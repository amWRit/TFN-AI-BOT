"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@langchain";
exports.ids = ["vendor-chunks/@langchain"];
exports.modules = {

/***/ "(rsc)/./node_modules/@langchain/aws/dist/chat_models.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/aws/dist/chat_models.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatBedrockConverse: () => (/* binding */ ChatBedrockConverse)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/language_models/chat_models */ \"(rsc)/./node_modules/@langchain/core/language_models/chat_models.js\");\n/* harmony import */ var _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-sdk/client-bedrock-runtime */ \"(rsc)/./node_modules/@aws-sdk/client-bedrock-runtime/dist-es/BedrockRuntimeClient.js\");\n/* harmony import */ var _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-sdk/client-bedrock-runtime */ \"(rsc)/./node_modules/@aws-sdk/client-bedrock-runtime/dist-es/commands/ConverseCommand.js\");\n/* harmony import */ var _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @aws-sdk/client-bedrock-runtime */ \"(rsc)/./node_modules/@aws-sdk/client-bedrock-runtime/dist-es/commands/ConverseStreamCommand.js\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/@langchain/core/outputs.js\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _aws_sdk_credential_provider_node__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-sdk/credential-provider-node */ \"(rsc)/./node_modules/@aws-sdk/credential-provider-node/dist-es/defaultProvider.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @langchain/core/utils/types */ \"(rsc)/./node_modules/@langchain/core/utils/types.js\");\n/* harmony import */ var _langchain_core_utils_json_schema__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @langchain/core/utils/json_schema */ \"(rsc)/./node_modules/@langchain/core/utils/json_schema.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./common.js */ \"(rsc)/./node_modules/@langchain/aws/dist/common.js\");\n\n\n\n\n\n\n\n\n\n\n/**\n * AWS Bedrock Converse chat model integration.\n *\n * Setup:\n * Install `@langchain/aws` and set the following environment variables:\n *\n * ```bash\n * npm install @langchain/aws\n * export BEDROCK_AWS_REGION=\"your-aws-region\"\n * export BEDROCK_AWS_SECRET_ACCESS_KEY=\"your-aws-secret-access-key\"\n * export BEDROCK_AWS_ACCESS_KEY_ID=\"your-aws-access-key-id\"\n * ```\n *\n * ## [Constructor args](https://api.js.langchain.com/classes/langchain_aws.ChatBedrockConverse.html#constructor)\n *\n * ## [Runtime args](https://api.js.langchain.com/interfaces/langchain_aws.ChatBedrockConverseCallOptions.html)\n *\n * Runtime args can be passed as the second argument to any of the base runnable methods `.invoke`. `.stream`, `.batch`, etc.\n * They can also be passed via `.withConfig`, or the second arg in `.bindTools`, like shown in the examples below:\n *\n * ```typescript\n * // When calling `.withConfig`, call options should be passed via the first argument\n * const llmWithArgsBound = llm.withConfig({\n *   stop: [\"\\n\"],\n *   tools: [...],\n * });\n *\n * // When calling `.bindTools`, call options should be passed via the second argument\n * const llmWithTools = llm.bindTools(\n *   [...],\n *   {\n *     stop: [\"\\n\"],\n *   }\n * );\n * ```\n *\n * ## Examples\n *\n * <details open>\n * <summary><strong>Instantiate</strong></summary>\n *\n * ```typescript\n * import { ChatBedrockConverse } from '@langchain/aws';\n *\n * const llm = new ChatBedrockConverse({\n *   model: \"anthropic.claude-3-5-sonnet-20240620-v1:0\",\n *   temperature: 0,\n *   maxTokens: undefined,\n *   timeout: undefined,\n *   maxRetries: 2,\n *   region: process.env.BEDROCK_AWS_REGION,\n *   credentials: {\n *     secretAccessKey: process.env.BEDROCK_AWS_SECRET_ACCESS_KEY!,\n *     accessKeyId: process.env.BEDROCK_AWS_ACCESS_KEY_ID!,\n *   },\n *   // Configure client options (e.g., custom request handler)\n *   // clientOptions: {\n *   //   requestHandler: myCustomRequestHandler,\n *   // },\n *   // other params...\n * });\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Invoking</strong></summary>\n *\n * ```typescript\n * const input = `Translate \"I love programming\" into French.`;\n *\n * // Models also accept a list of chat messages or a formatted prompt\n * const result = await llm.invoke(input);\n * console.log(result);\n * ```\n *\n * ```txt\n * AIMessage {\n *   \"id\": \"81a27f7a-550c-473d-8307-c2fbb9c74956\",\n *   \"content\": \"Here's the translation to French:\\n\\nJ'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"$metadata\": {\n *       \"httpStatusCode\": 200,\n *       \"requestId\": \"81a27f7a-550c-473d-8307-c2fbb9c74956\",\n *       \"attempts\": 1,\n *       \"totalRetryDelay\": 0\n *     },\n *     \"metrics\": {\n *       \"latencyMs\": 1109\n *     },\n *     \"stopReason\": \"end_turn\",\n *     \"usage\": {\n *       \"inputTokens\": 25,\n *       \"outputTokens\": 19,\n *       \"totalTokens\": 44\n *     }\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 25,\n *     \"output_tokens\": 19,\n *     \"total_tokens\": 44\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Streaming Chunks</strong></summary>\n *\n * ```typescript\n * for await (const chunk of await llm.stream(input)) {\n *   console.log(chunk);\n * }\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"content\": \"\"\n *   \"response_metadata\": {\n *     \"messageStart\": {\n *       \"p\": \"abcdefghijk\",\n *       \"role\": \"assistant\"\n *     }\n *   }\n * }\n * AIMessageChunk {\n *   \"content\": \"Here\"\n * }\n * AIMessageChunk {\n *   \"content\": \"'s\"\n * }\n * AIMessageChunk {\n *   \"content\": \" the translation\"\n * }\n * AIMessageChunk {\n *   \"content\": \" to\"\n * }\n * AIMessageChunk {\n *   \"content\": \" French:\\n\\nJ\"\n * }\n * AIMessageChunk {\n *   \"content\": \"'adore la\"\n * }\n * AIMessageChunk {\n *   \"content\": \" programmation.\"\n * }\n * AIMessageChunk {\n *   \"content\": \"\"\n *   \"response_metadata\": {\n *     \"contentBlockStop\": {\n *       \"contentBlockIndex\": 0,\n *       \"p\": \"abcdefghijk\"\n *     }\n *   }\n * }\n * AIMessageChunk {\n *   \"content\": \"\"\n *   \"response_metadata\": {\n *     \"messageStop\": {\n *       \"stopReason\": \"end_turn\"\n *     }\n *   }\n * }\n * AIMessageChunk {\n *   \"content\": \"\"\n *   \"response_metadata\": {\n *     \"metadata\": {\n *       \"metrics\": {\n *         \"latencyMs\": 838\n *       },\n *       \"p\": \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123\",\n *       \"usage\": {\n *         \"inputTokens\": 25,\n *         \"outputTokens\": 19,\n *         \"totalTokens\": 44\n *       }\n *     }\n *   }\n *   \"usage_metadata\": {\n *     \"input_tokens\": 25,\n *     \"output_tokens\": 19,\n *     \"total_tokens\": 44\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Aggregate Streamed Chunks</strong></summary>\n *\n * ```typescript\n * import { AIMessageChunk } from '@langchain/core/messages';\n * import { concat } from '@langchain/core/utils/stream';\n *\n * const stream = await llm.stream(input);\n * let full: AIMessageChunk | undefined;\n * for await (const chunk of stream) {\n *   full = !full ? chunk : concat(full, chunk);\n * }\n * console.log(full);\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"content\": \"Here's the translation to French:\\n\\nJ'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"messageStart\": {\n *       \"p\": \"ab\",\n *       \"role\": \"assistant\"\n *     },\n *     \"contentBlockStop\": {\n *       \"contentBlockIndex\": 0,\n *       \"p\": \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJK\"\n *     },\n *     \"messageStop\": {\n *       \"stopReason\": \"end_turn\"\n *     },\n *     \"metadata\": {\n *       \"metrics\": {\n *         \"latencyMs\": 838\n *       },\n *       \"p\": \"abcdefghijklmnopqrstuvwxyz\",\n *       \"usage\": {\n *         \"inputTokens\": 25,\n *         \"outputTokens\": 19,\n *         \"totalTokens\": 44\n *       }\n *     }\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 25,\n *     \"output_tokens\": 19,\n *     \"total_tokens\": 44\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Bind tools</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const GetWeather = {\n *   name: \"GetWeather\",\n *   description: \"Get the current weather in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const GetPopulation = {\n *   name: \"GetPopulation\",\n *   description: \"Get the current population in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const llmWithTools = llm.bindTools(\n *   [GetWeather, GetPopulation],\n *   {\n *     // strict: true  // enforce tool args schema is respected\n *   }\n * );\n * const aiMsg = await llmWithTools.invoke(\n *   \"Which city is hotter today and which is bigger: LA or NY?\"\n * );\n * console.log(aiMsg.tool_calls);\n * ```\n *\n * ```txt\n * [\n *   {\n *     id: 'tooluse_hIaiqfweRtSiJyi6J4naJA',\n *     name: 'GetWeather',\n *     args: { location: 'Los Angeles, CA' },\n *     type: 'tool_call'\n *   },\n *   {\n *     id: 'tooluse_nOS8B0UlTd2FdpH4MSHw9w',\n *     name: 'GetWeather',\n *     args: { location: 'New York, NY' },\n *     type: 'tool_call'\n *   },\n *   {\n *     id: 'tooluse_XxMpZiETQ5aVS5opVDyIaw',\n *     name: 'GetPopulation',\n *     args: { location: 'Los Angeles, CA' },\n *     type: 'tool_call'\n *   },\n *   {\n *     id: 'tooluse_GpYvAfldT2aR8VQfH-p4PQ',\n *     name: 'GetPopulation',\n *     args: { location: 'New York, NY' },\n *     type: 'tool_call'\n *   }\n * ]\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Structured Output</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const Joke = z.object({\n *   setup: z.string().describe(\"The setup of the joke\"),\n *   punchline: z.string().describe(\"The punchline to the joke\"),\n *   rating: z.number().optional().describe(\"How funny the joke is, from 1 to 10\")\n * }).describe('Joke to tell user.');\n *\n * const structuredLlm = llm.withStructuredOutput(Joke, { name: \"Joke\" });\n * const jokeResult = await structuredLlm.invoke(\"Tell me a joke about cats\");\n * console.log(jokeResult);\n * ```\n *\n * ```txt\n * {\n *   setup: \"Why don't cats play poker in the jungle?\",\n *   punchline: 'Too many cheetahs!',\n *   rating: 7\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Multimodal</strong></summary>\n *\n * ```typescript\n * import { HumanMessage } from '@langchain/core/messages';\n *\n * const imageUrl = \"https://example.com/image.jpg\";\n * const imageData = await fetch(imageUrl).then(res => res.arrayBuffer());\n * const base64Image = Buffer.from(imageData).toString('base64');\n *\n * const message = new HumanMessage({\n *   content: [\n *     { type: \"text\", text: \"describe the weather in this image\" },\n *     {\n *       type: \"image_url\",\n *       image_url: { url: `data:image/jpeg;base64,${base64Image}` },\n *     },\n *   ]\n * });\n *\n * const imageDescriptionAiMsg = await llm.invoke([message]);\n * console.log(imageDescriptionAiMsg.content);\n * ```\n *\n * ```txt\n * The weather in this image appears to be clear and pleasant. The sky is a vibrant blue with scattered white clouds, suggesting a sunny day with good visibility. The clouds are light and wispy, indicating fair weather conditions. There's no sign of rain, storm, or any adverse weather patterns. The lush green grass on the rolling hills looks well-watered and healthy, which could indicate recent rainfall or generally favorable weather conditions. Overall, the image depicts a beautiful, calm day with blue skies and sunshine - perfect weather for enjoying the outdoors.\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Usage Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForMetadata = await llm.invoke(input);\n * console.log(aiMsgForMetadata.usage_metadata);\n * ```\n *\n * ```txt\n * { input_tokens: 25, output_tokens: 19, total_tokens: 44 }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Stream Usage Metadata</strong></summary>\n *\n * ```typescript\n * const streamForMetadata = await llm.stream(input);\n * let fullForMetadata: AIMessageChunk | undefined;\n * for await (const chunk of streamForMetadata) {\n *   fullForMetadata = !fullForMetadata ? chunk : concat(fullForMetadata, chunk);\n * }\n * console.log(fullForMetadata?.usage_metadata);\n * ```\n *\n * ```txt\n * { input_tokens: 25, output_tokens: 19, total_tokens: 44 }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Response Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForResponseMetadata = await llm.invoke(input);\n * console.log(aiMsgForResponseMetadata.response_metadata);\n * ```\n *\n * ```txt\n * {\n *   '$metadata': {\n *     httpStatusCode: 200,\n *     requestId: '5de2a2e5-d1dc-4dff-bb02-31361f4107bc',\n *     extendedRequestId: undefined,\n *     cfId: undefined,\n *     attempts: 1,\n *     totalRetryDelay: 0\n *   },\n *   metrics: { latencyMs: 1163 },\n *   stopReason: 'end_turn',\n *   usage: { inputTokens: 25, outputTokens: 19, totalTokens: 44 }\n * }\n * ```\n * </details>\n *\n * <br />\n */ class ChatBedrockConverse extends _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_1__.BaseChatModel {\n    // Used for tracing, replace with the same name as your class\n    static lc_name() {\n        return \"ChatBedrockConverse\";\n    }\n    /**\n     * Replace with any secrets this class passes to `super`.\n     * See {@link ../../langchain-cohere/src/chat_model.ts} for\n     * an example.\n     */ get lc_secrets() {\n        return {\n            apiKey: \"API_KEY_NAME\"\n        };\n    }\n    get lc_aliases() {\n        return {\n            apiKey: \"API_KEY_NAME\"\n        };\n    }\n    constructor(fields){\n        super(fields ?? {});\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"anthropic.claude-3-haiku-20240307-v1:0\"\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"region\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: undefined\n        });\n        Object.defineProperty(this, \"maxTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: undefined\n        });\n        Object.defineProperty(this, \"endpointHost\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"additionalModelRequestFields\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streamUsage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"guardrailConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"performanceConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientOptions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Which types of `tool_choice` values the model supports.\n         *\n         * Inferred if not specified. Inferred as ['auto', 'any', 'tool'] if a 'claude-3'\n         * model is used, ['auto', 'any'] if a 'mistral-large' model is used, empty otherwise.\n         */ Object.defineProperty(this, \"supportsToolChoiceValues\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { profile, filepath, configFilepath, ignoreCache, mfaCodeProvider, roleAssumer, roleArn, webIdentityTokenFile, roleAssumerWithWebIdentity, ...rest } = fields ?? {};\n        const credentials = rest?.credentials ?? (0,_aws_sdk_credential_provider_node__WEBPACK_IMPORTED_MODULE_8__.defaultProvider)({\n            profile,\n            filepath,\n            configFilepath,\n            ignoreCache,\n            mfaCodeProvider,\n            roleAssumer,\n            roleArn,\n            webIdentityTokenFile,\n            roleAssumerWithWebIdentity\n        });\n        const region = rest?.region ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(\"AWS_DEFAULT_REGION\");\n        if (!region) {\n            throw new Error(\"Please set the AWS_DEFAULT_REGION environment variable or pass it to the constructor as the region field.\");\n        }\n        this.client = fields?.client ?? new _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_9__.BedrockRuntimeClient({\n            ...fields?.clientOptions,\n            region,\n            credentials,\n            endpoint: rest.endpointHost ? `https://${rest.endpointHost}` : undefined\n        });\n        this.region = region;\n        this.model = rest?.model ?? this.model;\n        this.streaming = rest?.streaming ?? this.streaming;\n        this.temperature = rest?.temperature;\n        this.maxTokens = rest?.maxTokens;\n        this.endpointHost = rest?.endpointHost;\n        this.topP = rest?.topP;\n        this.additionalModelRequestFields = rest?.additionalModelRequestFields;\n        this.streamUsage = rest?.streamUsage ?? this.streamUsage;\n        this.guardrailConfig = rest?.guardrailConfig;\n        this.performanceConfig = rest?.performanceConfig;\n        this.clientOptions = rest?.clientOptions;\n        if (rest?.supportsToolChoiceValues === undefined) {\n            this.supportsToolChoiceValues = (0,_common_js__WEBPACK_IMPORTED_MODULE_7__.supportedToolChoiceValuesForModel)(this.model);\n        } else {\n            this.supportsToolChoiceValues = rest.supportsToolChoiceValues;\n        }\n    }\n    getLsParams(options) {\n        const params = this.invocationParams(options);\n        return {\n            ls_provider: \"amazon_bedrock\",\n            ls_model_name: this.model,\n            ls_model_type: \"chat\",\n            ls_temperature: params.inferenceConfig?.temperature ?? this.temperature,\n            ls_max_tokens: params.inferenceConfig?.maxTokens ?? undefined,\n            ls_stop: options.stop\n        };\n    }\n    bindTools(tools, kwargs) {\n        return this.withConfig({\n            tools: (0,_common_js__WEBPACK_IMPORTED_MODULE_7__.convertToConverseTools)(tools),\n            ...kwargs\n        });\n    }\n    // Replace\n    _llmType() {\n        return \"chat_bedrock_converse\";\n    }\n    invocationParams(options) {\n        let toolConfig;\n        if (options?.tools && options.tools.length) {\n            const tools = (0,_common_js__WEBPACK_IMPORTED_MODULE_7__.convertToConverseTools)(options.tools);\n            toolConfig = {\n                tools,\n                toolChoice: options.tool_choice ? (0,_common_js__WEBPACK_IMPORTED_MODULE_7__.convertToBedrockToolChoice)(options.tool_choice, tools, {\n                    model: this.model,\n                    supportsToolChoiceValues: this.supportsToolChoiceValues\n                }) : undefined\n            };\n        }\n        return {\n            inferenceConfig: {\n                maxTokens: this.maxTokens,\n                temperature: this.temperature,\n                topP: this.topP,\n                stopSequences: options?.stop\n            },\n            toolConfig,\n            additionalModelRequestFields: this.additionalModelRequestFields ?? options?.additionalModelRequestFields,\n            guardrailConfig: this.guardrailConfig ?? options?.guardrailConfig,\n            performanceConfig: options?.performanceConfig\n        };\n    }\n    async _generate(messages, options, runManager) {\n        if (this.streaming) {\n            const stream = this._streamResponseChunks(messages, options, runManager);\n            let finalResult;\n            for await (const chunk of stream){\n                if (finalResult === undefined) {\n                    finalResult = chunk;\n                } else {\n                    finalResult = finalResult.concat(chunk);\n                }\n            }\n            if (finalResult === undefined) {\n                throw new Error(\"Could not parse final output from Bedrock streaming call.\");\n            }\n            return {\n                generations: [\n                    finalResult\n                ],\n                llmOutput: finalResult.generationInfo\n            };\n        }\n        return this._generateNonStreaming(messages, options, runManager);\n    }\n    async _generateNonStreaming(messages, options, _runManager) {\n        const { converseMessages, converseSystem } = (0,_common_js__WEBPACK_IMPORTED_MODULE_7__.convertToConverseMessages)(messages);\n        const params = this.invocationParams(options);\n        const command = new _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_10__.ConverseCommand({\n            modelId: this.model,\n            messages: converseMessages,\n            system: converseSystem,\n            requestMetadata: options.requestMetadata,\n            ...params\n        });\n        const response = await this.client.send(command, {\n            abortSignal: options.signal\n        });\n        const { output, ...responseMetadata } = response;\n        if (!output?.message) {\n            throw new Error(\"No message found in Bedrock response.\");\n        }\n        const message = (0,_common_js__WEBPACK_IMPORTED_MODULE_7__.convertConverseMessageToLangChainMessage)(output.message, responseMetadata);\n        return {\n            generations: [\n                {\n                    text: typeof message.content === \"string\" ? message.content : \"\",\n                    message\n                }\n            ]\n        };\n    }\n    async *_streamResponseChunks(messages, options, runManager) {\n        const { converseMessages, converseSystem } = (0,_common_js__WEBPACK_IMPORTED_MODULE_7__.convertToConverseMessages)(messages);\n        const params = this.invocationParams(options);\n        let { streamUsage } = this;\n        if (options.streamUsage !== undefined) {\n            streamUsage = options.streamUsage;\n        }\n        const command = new _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_11__.ConverseStreamCommand({\n            modelId: this.model,\n            messages: converseMessages,\n            system: converseSystem,\n            requestMetadata: options.requestMetadata,\n            ...params\n        });\n        const response = await this.client.send(command, {\n            abortSignal: options.signal\n        });\n        if (response.stream) {\n            for await (const chunk of response.stream){\n                if (chunk.contentBlockStart) {\n                    yield (0,_common_js__WEBPACK_IMPORTED_MODULE_7__.handleConverseStreamContentBlockStart)(chunk.contentBlockStart);\n                } else if (chunk.contentBlockDelta) {\n                    const textChatGeneration = (0,_common_js__WEBPACK_IMPORTED_MODULE_7__.handleConverseStreamContentBlockDelta)(chunk.contentBlockDelta);\n                    yield textChatGeneration;\n                    await runManager?.handleLLMNewToken(textChatGeneration.text, undefined, undefined, undefined, undefined, {\n                        chunk: textChatGeneration\n                    });\n                } else if (chunk.metadata) {\n                    yield (0,_common_js__WEBPACK_IMPORTED_MODULE_7__.handleConverseStreamMetadata)(chunk.metadata, {\n                        streamUsage\n                    });\n                } else {\n                    yield new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_2__.ChatGenerationChunk({\n                        text: \"\",\n                        message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                            content: \"\",\n                            response_metadata: chunk\n                        })\n                    });\n                }\n            }\n        }\n    }\n    withStructuredOutput(outputSchema, config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const schema = outputSchema;\n        const name = config?.name;\n        const description = (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_5__.getSchemaDescription)(schema) ?? \"A function available to call.\";\n        const method = config?.method;\n        const includeRaw = config?.includeRaw;\n        if (method === \"jsonMode\") {\n            throw new Error(`ChatBedrockConverse does not support 'jsonMode'.`);\n        }\n        let functionName = name ?? \"extract\";\n        let tools;\n        if ((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_5__.isInteropZodSchema)(schema)) {\n            tools = [\n                {\n                    type: \"function\",\n                    function: {\n                        name: functionName,\n                        description,\n                        parameters: (0,_langchain_core_utils_json_schema__WEBPACK_IMPORTED_MODULE_6__.toJsonSchema)(schema)\n                    }\n                }\n            ];\n        } else {\n            if (\"name\" in schema) {\n                functionName = schema.name;\n            }\n            tools = [\n                {\n                    type: \"function\",\n                    function: {\n                        name: functionName,\n                        description,\n                        parameters: schema\n                    }\n                }\n            ];\n        }\n        const supportsToolChoiceValues = this.supportsToolChoiceValues ?? [];\n        let toolChoiceObj;\n        if (supportsToolChoiceValues.includes(\"tool\")) {\n            toolChoiceObj = {\n                tool_choice: tools[0].function.name\n            };\n        } else if (supportsToolChoiceValues.includes(\"any\")) {\n            toolChoiceObj = {\n                tool_choice: \"any\"\n            };\n        }\n        const llm = this.bindTools(tools, toolChoiceObj);\n        const outputParser = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_4__.RunnableLambda.from((input)=>{\n            if (!input.tool_calls || input.tool_calls.length === 0) {\n                throw new Error(\"No tool calls found in the response.\");\n            }\n            const toolCall = input.tool_calls.find((tc)=>tc.name === functionName);\n            if (!toolCall) {\n                throw new Error(`No tool call found with name ${functionName}.`);\n            }\n            return toolCall.args;\n        });\n        if (!includeRaw) {\n            return llm.pipe(outputParser).withConfig({\n                runName: \"StructuredOutput\"\n            });\n        }\n        const parserAssign = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_4__.RunnablePassthrough.assign({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            parsed: (input, config)=>outputParser.invoke(input.raw, config)\n        });\n        const parserNone = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_4__.RunnablePassthrough.assign({\n            parsed: ()=>null\n        });\n        const parsedWithFallback = parserAssign.withFallbacks({\n            fallbacks: [\n                parserNone\n            ]\n        });\n        return _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_4__.RunnableSequence.from([\n            {\n                raw: llm\n            },\n            parsedWithFallback\n        ]).withConfig({\n            runName: \"StructuredOutputRunnable\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvZGlzdC9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQTBEO0FBQ21CO0FBQ21DO0FBQ2xEO0FBQ0s7QUFDRTtBQUM4QjtBQUNYO0FBQ3ZCO0FBQ3FPO0FBQ3RTOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBOGFDLEdBQ00sTUFBTXNCLDRCQUE0QnJCLHNGQUFhQTtJQUNsRCw2REFBNkQ7SUFDN0QsT0FBT3NCLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQTs7OztLQUlDLEdBQ0QsSUFBSUMsYUFBYTtRQUNiLE9BQU87WUFDSEMsUUFBUTtRQUNaO0lBQ0o7SUFDQSxJQUFJQyxhQUFhO1FBQ2IsT0FBTztZQUNIRCxRQUFRO1FBQ1o7SUFDSjtJQUNBRSxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQSxVQUFVLENBQUM7UUFDakJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RD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SCxFQUFFeEUsVUFBVSxDQUFDO1lBQ1ZpRSxTQUFTO1FBQ2I7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2F3cy9kaXN0L2NoYXRfbW9kZWxzLmpzPzg0YzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBCYXNlQ2hhdE1vZGVsLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzXCI7XG5pbXBvcnQgeyBCZWRyb2NrUnVudGltZUNsaWVudCwgQ29udmVyc2VDb21tYW5kLCBDb252ZXJzZVN0cmVhbUNvbW1hbmQsIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1iZWRyb2NrLXJ1bnRpbWVcIjtcbmltcG9ydCB7IENoYXRHZW5lcmF0aW9uQ2h1bmsgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL291dHB1dHNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2VudlwiO1xuaW1wb3J0IHsgZGVmYXVsdFByb3ZpZGVyLCB9IGZyb20gXCJAYXdzLXNkay9jcmVkZW50aWFsLXByb3ZpZGVyLW5vZGVcIjtcbmltcG9ydCB7IFJ1bm5hYmxlTGFtYmRhLCBSdW5uYWJsZVBhc3N0aHJvdWdoLCBSdW5uYWJsZVNlcXVlbmNlLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFEZXNjcmlwdGlvbiwgaXNJbnRlcm9wWm9kU2NoZW1hLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvdHlwZXNcIjtcbmltcG9ydCB7IHRvSnNvblNjaGVtYSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvanNvbl9zY2hlbWFcIjtcbmltcG9ydCB7IGNvbnZlcnRUb0NvbnZlcnNlVG9vbHMsIGNvbnZlcnRUb0JlZHJvY2tUb29sQ2hvaWNlLCBjb252ZXJ0VG9Db252ZXJzZU1lc3NhZ2VzLCBjb252ZXJ0Q29udmVyc2VNZXNzYWdlVG9MYW5nQ2hhaW5NZXNzYWdlLCBoYW5kbGVDb252ZXJzZVN0cmVhbUNvbnRlbnRCbG9ja0RlbHRhLCBoYW5kbGVDb252ZXJzZVN0cmVhbU1ldGFkYXRhLCBoYW5kbGVDb252ZXJzZVN0cmVhbUNvbnRlbnRCbG9ja1N0YXJ0LCBzdXBwb3J0ZWRUb29sQ2hvaWNlVmFsdWVzRm9yTW9kZWwsIH0gZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcbiAqIEFXUyBCZWRyb2NrIENvbnZlcnNlIGNoYXQgbW9kZWwgaW50ZWdyYXRpb24uXG4gKlxuICogU2V0dXA6XG4gKiBJbnN0YWxsIGBAbGFuZ2NoYWluL2F3c2AgYW5kIHNldCB0aGUgZm9sbG93aW5nIGVudmlyb25tZW50IHZhcmlhYmxlczpcbiAqXG4gKiBgYGBiYXNoXG4gKiBucG0gaW5zdGFsbCBAbGFuZ2NoYWluL2F3c1xuICogZXhwb3J0IEJFRFJPQ0tfQVdTX1JFR0lPTj1cInlvdXItYXdzLXJlZ2lvblwiXG4gKiBleHBvcnQgQkVEUk9DS19BV1NfU0VDUkVUX0FDQ0VTU19LRVk9XCJ5b3VyLWF3cy1zZWNyZXQtYWNjZXNzLWtleVwiXG4gKiBleHBvcnQgQkVEUk9DS19BV1NfQUNDRVNTX0tFWV9JRD1cInlvdXItYXdzLWFjY2Vzcy1rZXktaWRcIlxuICogYGBgXG4gKlxuICogIyMgW0NvbnN0cnVjdG9yIGFyZ3NdKGh0dHBzOi8vYXBpLmpzLmxhbmdjaGFpbi5jb20vY2xhc3Nlcy9sYW5nY2hhaW5fYXdzLkNoYXRCZWRyb2NrQ29udmVyc2UuaHRtbCNjb25zdHJ1Y3RvcilcbiAqXG4gKiAjIyBbUnVudGltZSBhcmdzXShodHRwczovL2FwaS5qcy5sYW5nY2hhaW4uY29tL2ludGVyZmFjZXMvbGFuZ2NoYWluX2F3cy5DaGF0QmVkcm9ja0NvbnZlcnNlQ2FsbE9wdGlvbnMuaHRtbClcbiAqXG4gKiBSdW50aW1lIGFyZ3MgY2FuIGJlIHBhc3NlZCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIGFueSBvZiB0aGUgYmFzZSBydW5uYWJsZSBtZXRob2RzIGAuaW52b2tlYC4gYC5zdHJlYW1gLCBgLmJhdGNoYCwgZXRjLlxuICogVGhleSBjYW4gYWxzbyBiZSBwYXNzZWQgdmlhIGAud2l0aENvbmZpZ2AsIG9yIHRoZSBzZWNvbmQgYXJnIGluIGAuYmluZFRvb2xzYCwgbGlrZSBzaG93biBpbiB0aGUgZXhhbXBsZXMgYmVsb3c6XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogLy8gV2hlbiBjYWxsaW5nIGAud2l0aENvbmZpZ2AsIGNhbGwgb3B0aW9ucyBzaG91bGQgYmUgcGFzc2VkIHZpYSB0aGUgZmlyc3QgYXJndW1lbnRcbiAqIGNvbnN0IGxsbVdpdGhBcmdzQm91bmQgPSBsbG0ud2l0aENvbmZpZyh7XG4gKiAgIHN0b3A6IFtcIlxcblwiXSxcbiAqICAgdG9vbHM6IFsuLi5dLFxuICogfSk7XG4gKlxuICogLy8gV2hlbiBjYWxsaW5nIGAuYmluZFRvb2xzYCwgY2FsbCBvcHRpb25zIHNob3VsZCBiZSBwYXNzZWQgdmlhIHRoZSBzZWNvbmQgYXJndW1lbnRcbiAqIGNvbnN0IGxsbVdpdGhUb29scyA9IGxsbS5iaW5kVG9vbHMoXG4gKiAgIFsuLi5dLFxuICogICB7XG4gKiAgICAgc3RvcDogW1wiXFxuXCJdLFxuICogICB9XG4gKiApO1xuICogYGBgXG4gKlxuICogIyMgRXhhbXBsZXNcbiAqXG4gKiA8ZGV0YWlscyBvcGVuPlxuICogPHN1bW1hcnk+PHN0cm9uZz5JbnN0YW50aWF0ZTwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBDaGF0QmVkcm9ja0NvbnZlcnNlIH0gZnJvbSAnQGxhbmdjaGFpbi9hd3MnO1xuICpcbiAqIGNvbnN0IGxsbSA9IG5ldyBDaGF0QmVkcm9ja0NvbnZlcnNlKHtcbiAqICAgbW9kZWw6IFwiYW50aHJvcGljLmNsYXVkZS0zLTUtc29ubmV0LTIwMjQwNjIwLXYxOjBcIixcbiAqICAgdGVtcGVyYXR1cmU6IDAsXG4gKiAgIG1heFRva2VuczogdW5kZWZpbmVkLFxuICogICB0aW1lb3V0OiB1bmRlZmluZWQsXG4gKiAgIG1heFJldHJpZXM6IDIsXG4gKiAgIHJlZ2lvbjogcHJvY2Vzcy5lbnYuQkVEUk9DS19BV1NfUkVHSU9OLFxuICogICBjcmVkZW50aWFsczoge1xuICogICAgIHNlY3JldEFjY2Vzc0tleTogcHJvY2Vzcy5lbnYuQkVEUk9DS19BV1NfU0VDUkVUX0FDQ0VTU19LRVkhLFxuICogICAgIGFjY2Vzc0tleUlkOiBwcm9jZXNzLmVudi5CRURST0NLX0FXU19BQ0NFU1NfS0VZX0lEISxcbiAqICAgfSxcbiAqICAgLy8gQ29uZmlndXJlIGNsaWVudCBvcHRpb25zIChlLmcuLCBjdXN0b20gcmVxdWVzdCBoYW5kbGVyKVxuICogICAvLyBjbGllbnRPcHRpb25zOiB7XG4gKiAgIC8vICAgcmVxdWVzdEhhbmRsZXI6IG15Q3VzdG9tUmVxdWVzdEhhbmRsZXIsXG4gKiAgIC8vIH0sXG4gKiAgIC8vIG90aGVyIHBhcmFtcy4uLlxuICogfSk7XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+SW52b2tpbmc8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgaW5wdXQgPSBgVHJhbnNsYXRlIFwiSSBsb3ZlIHByb2dyYW1taW5nXCIgaW50byBGcmVuY2guYDtcbiAqXG4gKiAvLyBNb2RlbHMgYWxzbyBhY2NlcHQgYSBsaXN0IG9mIGNoYXQgbWVzc2FnZXMgb3IgYSBmb3JtYXR0ZWQgcHJvbXB0XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBsbG0uaW52b2tlKGlucHV0KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIEFJTWVzc2FnZSB7XG4gKiAgIFwiaWRcIjogXCI4MWEyN2Y3YS01NTBjLTQ3M2QtODMwNy1jMmZiYjljNzQ5NTZcIixcbiAqICAgXCJjb250ZW50XCI6IFwiSGVyZSdzIHRoZSB0cmFuc2xhdGlvbiB0byBGcmVuY2g6XFxuXFxuSidhZG9yZSBsYSBwcm9ncmFtbWF0aW9uLlwiLFxuICogICBcInJlc3BvbnNlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcIiRtZXRhZGF0YVwiOiB7XG4gKiAgICAgICBcImh0dHBTdGF0dXNDb2RlXCI6IDIwMCxcbiAqICAgICAgIFwicmVxdWVzdElkXCI6IFwiODFhMjdmN2EtNTUwYy00NzNkLTgzMDctYzJmYmI5Yzc0OTU2XCIsXG4gKiAgICAgICBcImF0dGVtcHRzXCI6IDEsXG4gKiAgICAgICBcInRvdGFsUmV0cnlEZWxheVwiOiAwXG4gKiAgICAgfSxcbiAqICAgICBcIm1ldHJpY3NcIjoge1xuICogICAgICAgXCJsYXRlbmN5TXNcIjogMTEwOVxuICogICAgIH0sXG4gKiAgICAgXCJzdG9wUmVhc29uXCI6IFwiZW5kX3R1cm5cIixcbiAqICAgICBcInVzYWdlXCI6IHtcbiAqICAgICAgIFwiaW5wdXRUb2tlbnNcIjogMjUsXG4gKiAgICAgICBcIm91dHB1dFRva2Vuc1wiOiAxOSxcbiAqICAgICAgIFwidG90YWxUb2tlbnNcIjogNDRcbiAqICAgICB9XG4gKiAgIH0sXG4gKiAgIFwidXNhZ2VfbWV0YWRhdGFcIjoge1xuICogICAgIFwiaW5wdXRfdG9rZW5zXCI6IDI1LFxuICogICAgIFwib3V0cHV0X3Rva2Vuc1wiOiAxOSxcbiAqICAgICBcInRvdGFsX3Rva2Vuc1wiOiA0NFxuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+U3RyZWFtaW5nIENodW5rczwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGF3YWl0IGxsbS5zdHJlYW0oaW5wdXQpKSB7XG4gKiAgIGNvbnNvbGUubG9nKGNodW5rKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImNvbnRlbnRcIjogXCJcIlxuICogICBcInJlc3BvbnNlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcIm1lc3NhZ2VTdGFydFwiOiB7XG4gKiAgICAgICBcInBcIjogXCJhYmNkZWZnaGlqa1wiLFxuICogICAgICAgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCJcbiAqICAgICB9XG4gKiAgIH1cbiAqIH1cbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiSGVyZVwiXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIidzXCJcbiAqIH1cbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiIHRoZSB0cmFuc2xhdGlvblwiXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIiB0b1wiXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIiBGcmVuY2g6XFxuXFxuSlwiXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIidhZG9yZSBsYVwiXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIiBwcm9ncmFtbWF0aW9uLlwiXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIlwiXG4gKiAgIFwicmVzcG9uc2VfbWV0YWRhdGFcIjoge1xuICogICAgIFwiY29udGVudEJsb2NrU3RvcFwiOiB7XG4gKiAgICAgICBcImNvbnRlbnRCbG9ja0luZGV4XCI6IDAsXG4gKiAgICAgICBcInBcIjogXCJhYmNkZWZnaGlqa1wiXG4gKiAgICAgfVxuICogICB9XG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIlwiXG4gKiAgIFwicmVzcG9uc2VfbWV0YWRhdGFcIjoge1xuICogICAgIFwibWVzc2FnZVN0b3BcIjoge1xuICogICAgICAgXCJzdG9wUmVhc29uXCI6IFwiZW5kX3R1cm5cIlxuICogICAgIH1cbiAqICAgfVxuICogfVxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImNvbnRlbnRcIjogXCJcIlxuICogICBcInJlc3BvbnNlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcIm1ldGFkYXRhXCI6IHtcbiAqICAgICAgIFwibWV0cmljc1wiOiB7XG4gKiAgICAgICAgIFwibGF0ZW5jeU1zXCI6IDgzOFxuICogICAgICAgfSxcbiAqICAgICAgIFwicFwiOiBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzXCIsXG4gKiAgICAgICBcInVzYWdlXCI6IHtcbiAqICAgICAgICAgXCJpbnB1dFRva2Vuc1wiOiAyNSxcbiAqICAgICAgICAgXCJvdXRwdXRUb2tlbnNcIjogMTksXG4gKiAgICAgICAgIFwidG90YWxUb2tlbnNcIjogNDRcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiAgIH1cbiAqICAgXCJ1c2FnZV9tZXRhZGF0YVwiOiB7XG4gKiAgICAgXCJpbnB1dF90b2tlbnNcIjogMjUsXG4gKiAgICAgXCJvdXRwdXRfdG9rZW5zXCI6IDE5LFxuICogICAgIFwidG90YWxfdG9rZW5zXCI6IDQ0XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5BZ2dyZWdhdGUgU3RyZWFtZWQgQ2h1bmtzPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IEFJTWVzc2FnZUNodW5rIH0gZnJvbSAnQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzJztcbiAqIGltcG9ydCB7IGNvbmNhdCB9IGZyb20gJ0BsYW5nY2hhaW4vY29yZS91dGlscy9zdHJlYW0nO1xuICpcbiAqIGNvbnN0IHN0cmVhbSA9IGF3YWl0IGxsbS5zdHJlYW0oaW5wdXQpO1xuICogbGV0IGZ1bGw6IEFJTWVzc2FnZUNodW5rIHwgdW5kZWZpbmVkO1xuICogZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAqICAgZnVsbCA9ICFmdWxsID8gY2h1bmsgOiBjb25jYXQoZnVsbCwgY2h1bmspO1xuICogfVxuICogY29uc29sZS5sb2coZnVsbCk7XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiSGVyZSdzIHRoZSB0cmFuc2xhdGlvbiB0byBGcmVuY2g6XFxuXFxuSidhZG9yZSBsYSBwcm9ncmFtbWF0aW9uLlwiLFxuICogICBcInJlc3BvbnNlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcIm1lc3NhZ2VTdGFydFwiOiB7XG4gKiAgICAgICBcInBcIjogXCJhYlwiLFxuICogICAgICAgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCJcbiAqICAgICB9LFxuICogICAgIFwiY29udGVudEJsb2NrU3RvcFwiOiB7XG4gKiAgICAgICBcImNvbnRlbnRCbG9ja0luZGV4XCI6IDAsXG4gKiAgICAgICBcInBcIjogXCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLXCJcbiAqICAgICB9LFxuICogICAgIFwibWVzc2FnZVN0b3BcIjoge1xuICogICAgICAgXCJzdG9wUmVhc29uXCI6IFwiZW5kX3R1cm5cIlxuICogICAgIH0sXG4gKiAgICAgXCJtZXRhZGF0YVwiOiB7XG4gKiAgICAgICBcIm1ldHJpY3NcIjoge1xuICogICAgICAgICBcImxhdGVuY3lNc1wiOiA4MzhcbiAqICAgICAgIH0sXG4gKiAgICAgICBcInBcIjogXCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiLFxuICogICAgICAgXCJ1c2FnZVwiOiB7XG4gKiAgICAgICAgIFwiaW5wdXRUb2tlbnNcIjogMjUsXG4gKiAgICAgICAgIFwib3V0cHV0VG9rZW5zXCI6IDE5LFxuICogICAgICAgICBcInRvdGFsVG9rZW5zXCI6IDQ0XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICogICB9LFxuICogICBcInVzYWdlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcImlucHV0X3Rva2Vuc1wiOiAyNSxcbiAqICAgICBcIm91dHB1dF90b2tlbnNcIjogMTksXG4gKiAgICAgXCJ0b3RhbF90b2tlbnNcIjogNDRcbiAqICAgfVxuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPkJpbmQgdG9vbHM8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG4gKlxuICogY29uc3QgR2V0V2VhdGhlciA9IHtcbiAqICAgbmFtZTogXCJHZXRXZWF0aGVyXCIsXG4gKiAgIGRlc2NyaXB0aW9uOiBcIkdldCB0aGUgY3VycmVudCB3ZWF0aGVyIGluIGEgZ2l2ZW4gbG9jYXRpb25cIixcbiAqICAgc2NoZW1hOiB6Lm9iamVjdCh7XG4gKiAgICAgbG9jYXRpb246IHouc3RyaW5nKCkuZGVzY3JpYmUoXCJUaGUgY2l0eSBhbmQgc3RhdGUsIGUuZy4gU2FuIEZyYW5jaXNjbywgQ0FcIilcbiAqICAgfSksXG4gKiB9XG4gKlxuICogY29uc3QgR2V0UG9wdWxhdGlvbiA9IHtcbiAqICAgbmFtZTogXCJHZXRQb3B1bGF0aW9uXCIsXG4gKiAgIGRlc2NyaXB0aW9uOiBcIkdldCB0aGUgY3VycmVudCBwb3B1bGF0aW9uIGluIGEgZ2l2ZW4gbG9jYXRpb25cIixcbiAqICAgc2NoZW1hOiB6Lm9iamVjdCh7XG4gKiAgICAgbG9jYXRpb246IHouc3RyaW5nKCkuZGVzY3JpYmUoXCJUaGUgY2l0eSBhbmQgc3RhdGUsIGUuZy4gU2FuIEZyYW5jaXNjbywgQ0FcIilcbiAqICAgfSksXG4gKiB9XG4gKlxuICogY29uc3QgbGxtV2l0aFRvb2xzID0gbGxtLmJpbmRUb29scyhcbiAqICAgW0dldFdlYXRoZXIsIEdldFBvcHVsYXRpb25dLFxuICogICB7XG4gKiAgICAgLy8gc3RyaWN0OiB0cnVlICAvLyBlbmZvcmNlIHRvb2wgYXJncyBzY2hlbWEgaXMgcmVzcGVjdGVkXG4gKiAgIH1cbiAqICk7XG4gKiBjb25zdCBhaU1zZyA9IGF3YWl0IGxsbVdpdGhUb29scy5pbnZva2UoXG4gKiAgIFwiV2hpY2ggY2l0eSBpcyBob3R0ZXIgdG9kYXkgYW5kIHdoaWNoIGlzIGJpZ2dlcjogTEEgb3IgTlk/XCJcbiAqICk7XG4gKiBjb25zb2xlLmxvZyhhaU1zZy50b29sX2NhbGxzKTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogW1xuICogICB7XG4gKiAgICAgaWQ6ICd0b29sdXNlX2hJYWlxZndlUnRTaUp5aTZKNG5hSkEnLFxuICogICAgIG5hbWU6ICdHZXRXZWF0aGVyJyxcbiAqICAgICBhcmdzOiB7IGxvY2F0aW9uOiAnTG9zIEFuZ2VsZXMsIENBJyB9LFxuICogICAgIHR5cGU6ICd0b29sX2NhbGwnXG4gKiAgIH0sXG4gKiAgIHtcbiAqICAgICBpZDogJ3Rvb2x1c2Vfbk9TOEIwVWxUZDJGZHBINE1TSHc5dycsXG4gKiAgICAgbmFtZTogJ0dldFdlYXRoZXInLFxuICogICAgIGFyZ3M6IHsgbG9jYXRpb246ICdOZXcgWW9yaywgTlknIH0sXG4gKiAgICAgdHlwZTogJ3Rvb2xfY2FsbCdcbiAqICAgfSxcbiAqICAge1xuICogICAgIGlkOiAndG9vbHVzZV9YeE1wWmlFVFE1YVZTNW9wVkR5SWF3JyxcbiAqICAgICBuYW1lOiAnR2V0UG9wdWxhdGlvbicsXG4gKiAgICAgYXJnczogeyBsb2NhdGlvbjogJ0xvcyBBbmdlbGVzLCBDQScgfSxcbiAqICAgICB0eXBlOiAndG9vbF9jYWxsJ1xuICogICB9LFxuICogICB7XG4gKiAgICAgaWQ6ICd0b29sdXNlX0dwWXZBZmxkVDJhUjhWUWZILXA0UFEnLFxuICogICAgIG5hbWU6ICdHZXRQb3B1bGF0aW9uJyxcbiAqICAgICBhcmdzOiB7IGxvY2F0aW9uOiAnTmV3IFlvcmssIE5ZJyB9LFxuICogICAgIHR5cGU6ICd0b29sX2NhbGwnXG4gKiAgIH1cbiAqIF1cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5TdHJ1Y3R1cmVkIE91dHB1dDwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbiAqXG4gKiBjb25zdCBKb2tlID0gei5vYmplY3Qoe1xuICogICBzZXR1cDogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBzZXR1cCBvZiB0aGUgam9rZVwiKSxcbiAqICAgcHVuY2hsaW5lOiB6LnN0cmluZygpLmRlc2NyaWJlKFwiVGhlIHB1bmNobGluZSB0byB0aGUgam9rZVwiKSxcbiAqICAgcmF0aW5nOiB6Lm51bWJlcigpLm9wdGlvbmFsKCkuZGVzY3JpYmUoXCJIb3cgZnVubnkgdGhlIGpva2UgaXMsIGZyb20gMSB0byAxMFwiKVxuICogfSkuZGVzY3JpYmUoJ0pva2UgdG8gdGVsbCB1c2VyLicpO1xuICpcbiAqIGNvbnN0IHN0cnVjdHVyZWRMbG0gPSBsbG0ud2l0aFN0cnVjdHVyZWRPdXRwdXQoSm9rZSwgeyBuYW1lOiBcIkpva2VcIiB9KTtcbiAqIGNvbnN0IGpva2VSZXN1bHQgPSBhd2FpdCBzdHJ1Y3R1cmVkTGxtLmludm9rZShcIlRlbGwgbWUgYSBqb2tlIGFib3V0IGNhdHNcIik7XG4gKiBjb25zb2xlLmxvZyhqb2tlUmVzdWx0KTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICoge1xuICogICBzZXR1cDogXCJXaHkgZG9uJ3QgY2F0cyBwbGF5IHBva2VyIGluIHRoZSBqdW5nbGU/XCIsXG4gKiAgIHB1bmNobGluZTogJ1RvbyBtYW55IGNoZWV0YWhzIScsXG4gKiAgIHJhdGluZzogN1xuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPk11bHRpbW9kYWw8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgSHVtYW5NZXNzYWdlIH0gZnJvbSAnQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzJztcbiAqXG4gKiBjb25zdCBpbWFnZVVybCA9IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIjtcbiAqIGNvbnN0IGltYWdlRGF0YSA9IGF3YWl0IGZldGNoKGltYWdlVXJsKS50aGVuKHJlcyA9PiByZXMuYXJyYXlCdWZmZXIoKSk7XG4gKiBjb25zdCBiYXNlNjRJbWFnZSA9IEJ1ZmZlci5mcm9tKGltYWdlRGF0YSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICpcbiAqIGNvbnN0IG1lc3NhZ2UgPSBuZXcgSHVtYW5NZXNzYWdlKHtcbiAqICAgY29udGVudDogW1xuICogICAgIHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IFwiZGVzY3JpYmUgdGhlIHdlYXRoZXIgaW4gdGhpcyBpbWFnZVwiIH0sXG4gKiAgICAge1xuICogICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAqICAgICAgIGltYWdlX3VybDogeyB1cmw6IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7YmFzZTY0SW1hZ2V9YCB9LFxuICogICAgIH0sXG4gKiAgIF1cbiAqIH0pO1xuICpcbiAqIGNvbnN0IGltYWdlRGVzY3JpcHRpb25BaU1zZyA9IGF3YWl0IGxsbS5pbnZva2UoW21lc3NhZ2VdKTtcbiAqIGNvbnNvbGUubG9nKGltYWdlRGVzY3JpcHRpb25BaU1zZy5jb250ZW50KTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogVGhlIHdlYXRoZXIgaW4gdGhpcyBpbWFnZSBhcHBlYXJzIHRvIGJlIGNsZWFyIGFuZCBwbGVhc2FudC4gVGhlIHNreSBpcyBhIHZpYnJhbnQgYmx1ZSB3aXRoIHNjYXR0ZXJlZCB3aGl0ZSBjbG91ZHMsIHN1Z2dlc3RpbmcgYSBzdW5ueSBkYXkgd2l0aCBnb29kIHZpc2liaWxpdHkuIFRoZSBjbG91ZHMgYXJlIGxpZ2h0IGFuZCB3aXNweSwgaW5kaWNhdGluZyBmYWlyIHdlYXRoZXIgY29uZGl0aW9ucy4gVGhlcmUncyBubyBzaWduIG9mIHJhaW4sIHN0b3JtLCBvciBhbnkgYWR2ZXJzZSB3ZWF0aGVyIHBhdHRlcm5zLiBUaGUgbHVzaCBncmVlbiBncmFzcyBvbiB0aGUgcm9sbGluZyBoaWxscyBsb29rcyB3ZWxsLXdhdGVyZWQgYW5kIGhlYWx0aHksIHdoaWNoIGNvdWxkIGluZGljYXRlIHJlY2VudCByYWluZmFsbCBvciBnZW5lcmFsbHkgZmF2b3JhYmxlIHdlYXRoZXIgY29uZGl0aW9ucy4gT3ZlcmFsbCwgdGhlIGltYWdlIGRlcGljdHMgYSBiZWF1dGlmdWwsIGNhbG0gZGF5IHdpdGggYmx1ZSBza2llcyBhbmQgc3Vuc2hpbmUgLSBwZXJmZWN0IHdlYXRoZXIgZm9yIGVuam95aW5nIHRoZSBvdXRkb29ycy5cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5Vc2FnZSBNZXRhZGF0YTwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhaU1zZ0Zvck1ldGFkYXRhID0gYXdhaXQgbGxtLmludm9rZShpbnB1dCk7XG4gKiBjb25zb2xlLmxvZyhhaU1zZ0Zvck1ldGFkYXRhLnVzYWdlX21ldGFkYXRhKTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogeyBpbnB1dF90b2tlbnM6IDI1LCBvdXRwdXRfdG9rZW5zOiAxOSwgdG90YWxfdG9rZW5zOiA0NCB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+U3RyZWFtIFVzYWdlIE1ldGFkYXRhPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHN0cmVhbUZvck1ldGFkYXRhID0gYXdhaXQgbGxtLnN0cmVhbShpbnB1dCk7XG4gKiBsZXQgZnVsbEZvck1ldGFkYXRhOiBBSU1lc3NhZ2VDaHVuayB8IHVuZGVmaW5lZDtcbiAqIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtRm9yTWV0YWRhdGEpIHtcbiAqICAgZnVsbEZvck1ldGFkYXRhID0gIWZ1bGxGb3JNZXRhZGF0YSA/IGNodW5rIDogY29uY2F0KGZ1bGxGb3JNZXRhZGF0YSwgY2h1bmspO1xuICogfVxuICogY29uc29sZS5sb2coZnVsbEZvck1ldGFkYXRhPy51c2FnZV9tZXRhZGF0YSk7XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIHsgaW5wdXRfdG9rZW5zOiAyNSwgb3V0cHV0X3Rva2VuczogMTksIHRvdGFsX3Rva2VuczogNDQgfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPlJlc3BvbnNlIE1ldGFkYXRhPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGFpTXNnRm9yUmVzcG9uc2VNZXRhZGF0YSA9IGF3YWl0IGxsbS5pbnZva2UoaW5wdXQpO1xuICogY29uc29sZS5sb2coYWlNc2dGb3JSZXNwb25zZU1ldGFkYXRhLnJlc3BvbnNlX21ldGFkYXRhKTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICoge1xuICogICAnJG1ldGFkYXRhJzoge1xuICogICAgIGh0dHBTdGF0dXNDb2RlOiAyMDAsXG4gKiAgICAgcmVxdWVzdElkOiAnNWRlMmEyZTUtZDFkYy00ZGZmLWJiMDItMzEzNjFmNDEwN2JjJyxcbiAqICAgICBleHRlbmRlZFJlcXVlc3RJZDogdW5kZWZpbmVkLFxuICogICAgIGNmSWQ6IHVuZGVmaW5lZCxcbiAqICAgICBhdHRlbXB0czogMSxcbiAqICAgICB0b3RhbFJldHJ5RGVsYXk6IDBcbiAqICAgfSxcbiAqICAgbWV0cmljczogeyBsYXRlbmN5TXM6IDExNjMgfSxcbiAqICAgc3RvcFJlYXNvbjogJ2VuZF90dXJuJyxcbiAqICAgdXNhZ2U6IHsgaW5wdXRUb2tlbnM6IDI1LCBvdXRwdXRUb2tlbnM6IDE5LCB0b3RhbFRva2VuczogNDQgfVxuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0QmVkcm9ja0NvbnZlcnNlIGV4dGVuZHMgQmFzZUNoYXRNb2RlbCB7XG4gICAgLy8gVXNlZCBmb3IgdHJhY2luZywgcmVwbGFjZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgeW91ciBjbGFzc1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0QmVkcm9ja0NvbnZlcnNlXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcGxhY2Ugd2l0aCBhbnkgc2VjcmV0cyB0aGlzIGNsYXNzIHBhc3NlcyB0byBgc3VwZXJgLlxuICAgICAqIFNlZSB7QGxpbmsgLi4vLi4vbGFuZ2NoYWluLWNvaGVyZS9zcmMvY2hhdF9tb2RlbC50c30gZm9yXG4gICAgICogYW4gZXhhbXBsZS5cbiAgICAgKi9cbiAgICBnZXQgbGNfc2VjcmV0cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwaUtleTogXCJBUElfS0VZX05BTUVcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhcGlLZXk6IFwiQVBJX0tFWV9OQU1FXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMgPz8ge30pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJhbnRocm9waWMuY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDctdjE6MFwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHJlYW1pbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWdpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGVtcGVyYXR1cmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4VG9rZW5zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuZHBvaW50SG9zdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b3BQXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFkZGl0aW9uYWxNb2RlbFJlcXVlc3RGaWVsZHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyZWFtVXNhZ2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImd1YXJkcmFpbENvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwZXJmb3JtYW5jZUNvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50T3B0aW9uc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hpY2ggdHlwZXMgb2YgYHRvb2xfY2hvaWNlYCB2YWx1ZXMgdGhlIG1vZGVsIHN1cHBvcnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJbmZlcnJlZCBpZiBub3Qgc3BlY2lmaWVkLiBJbmZlcnJlZCBhcyBbJ2F1dG8nLCAnYW55JywgJ3Rvb2wnXSBpZiBhICdjbGF1ZGUtMydcbiAgICAgICAgICogbW9kZWwgaXMgdXNlZCwgWydhdXRvJywgJ2FueSddIGlmIGEgJ21pc3RyYWwtbGFyZ2UnIG1vZGVsIGlzIHVzZWQsIGVtcHR5IG90aGVyd2lzZS5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN1cHBvcnRzVG9vbENob2ljZVZhbHVlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHByb2ZpbGUsIGZpbGVwYXRoLCBjb25maWdGaWxlcGF0aCwgaWdub3JlQ2FjaGUsIG1mYUNvZGVQcm92aWRlciwgcm9sZUFzc3VtZXIsIHJvbGVBcm4sIHdlYklkZW50aXR5VG9rZW5GaWxlLCByb2xlQXNzdW1lcldpdGhXZWJJZGVudGl0eSwgLi4ucmVzdCB9ID0gZmllbGRzID8/IHt9O1xuICAgICAgICBjb25zdCBjcmVkZW50aWFscyA9IHJlc3Q/LmNyZWRlbnRpYWxzID8/XG4gICAgICAgICAgICBkZWZhdWx0UHJvdmlkZXIoe1xuICAgICAgICAgICAgICAgIHByb2ZpbGUsXG4gICAgICAgICAgICAgICAgZmlsZXBhdGgsXG4gICAgICAgICAgICAgICAgY29uZmlnRmlsZXBhdGgsXG4gICAgICAgICAgICAgICAgaWdub3JlQ2FjaGUsXG4gICAgICAgICAgICAgICAgbWZhQ29kZVByb3ZpZGVyLFxuICAgICAgICAgICAgICAgIHJvbGVBc3N1bWVyLFxuICAgICAgICAgICAgICAgIHJvbGVBcm4sXG4gICAgICAgICAgICAgICAgd2ViSWRlbnRpdHlUb2tlbkZpbGUsXG4gICAgICAgICAgICAgICAgcm9sZUFzc3VtZXJXaXRoV2ViSWRlbnRpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVnaW9uID0gcmVzdD8ucmVnaW9uID8/IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBV1NfREVGQVVMVF9SRUdJT05cIik7XG4gICAgICAgIGlmICghcmVnaW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2Ugc2V0IHRoZSBBV1NfREVGQVVMVF9SRUdJT04gZW52aXJvbm1lbnQgdmFyaWFibGUgb3IgcGFzcyBpdCB0byB0aGUgY29uc3RydWN0b3IgYXMgdGhlIHJlZ2lvbiBmaWVsZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnQgPVxuICAgICAgICAgICAgZmllbGRzPy5jbGllbnQgPz9cbiAgICAgICAgICAgICAgICBuZXcgQmVkcm9ja1J1bnRpbWVDbGllbnQoe1xuICAgICAgICAgICAgICAgICAgICAuLi5maWVsZHM/LmNsaWVudE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiByZXN0LmVuZHBvaW50SG9zdFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgaHR0cHM6Ly8ke3Jlc3QuZW5kcG9pbnRIb3N0fWBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlZ2lvbiA9IHJlZ2lvbjtcbiAgICAgICAgdGhpcy5tb2RlbCA9IHJlc3Q/Lm1vZGVsID8/IHRoaXMubW9kZWw7XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nID0gcmVzdD8uc3RyZWFtaW5nID8/IHRoaXMuc3RyZWFtaW5nO1xuICAgICAgICB0aGlzLnRlbXBlcmF0dXJlID0gcmVzdD8udGVtcGVyYXR1cmU7XG4gICAgICAgIHRoaXMubWF4VG9rZW5zID0gcmVzdD8ubWF4VG9rZW5zO1xuICAgICAgICB0aGlzLmVuZHBvaW50SG9zdCA9IHJlc3Q/LmVuZHBvaW50SG9zdDtcbiAgICAgICAgdGhpcy50b3BQID0gcmVzdD8udG9wUDtcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsTW9kZWxSZXF1ZXN0RmllbGRzID0gcmVzdD8uYWRkaXRpb25hbE1vZGVsUmVxdWVzdEZpZWxkcztcbiAgICAgICAgdGhpcy5zdHJlYW1Vc2FnZSA9IHJlc3Q/LnN0cmVhbVVzYWdlID8/IHRoaXMuc3RyZWFtVXNhZ2U7XG4gICAgICAgIHRoaXMuZ3VhcmRyYWlsQ29uZmlnID0gcmVzdD8uZ3VhcmRyYWlsQ29uZmlnO1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ29uZmlnID0gcmVzdD8ucGVyZm9ybWFuY2VDb25maWc7XG4gICAgICAgIHRoaXMuY2xpZW50T3B0aW9ucyA9IHJlc3Q/LmNsaWVudE9wdGlvbnM7XG4gICAgICAgIGlmIChyZXN0Py5zdXBwb3J0c1Rvb2xDaG9pY2VWYWx1ZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zdXBwb3J0c1Rvb2xDaG9pY2VWYWx1ZXMgPSBzdXBwb3J0ZWRUb29sQ2hvaWNlVmFsdWVzRm9yTW9kZWwodGhpcy5tb2RlbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN1cHBvcnRzVG9vbENob2ljZVZhbHVlcyA9IHJlc3Quc3VwcG9ydHNUb29sQ2hvaWNlVmFsdWVzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldExzUGFyYW1zKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbHNfcHJvdmlkZXI6IFwiYW1hem9uX2JlZHJvY2tcIixcbiAgICAgICAgICAgIGxzX21vZGVsX25hbWU6IHRoaXMubW9kZWwsXG4gICAgICAgICAgICBsc19tb2RlbF90eXBlOiBcImNoYXRcIixcbiAgICAgICAgICAgIGxzX3RlbXBlcmF0dXJlOiBwYXJhbXMuaW5mZXJlbmNlQ29uZmlnPy50ZW1wZXJhdHVyZSA/PyB0aGlzLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgbHNfbWF4X3Rva2VuczogcGFyYW1zLmluZmVyZW5jZUNvbmZpZz8ubWF4VG9rZW5zID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGxzX3N0b3A6IG9wdGlvbnMuc3RvcCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYmluZFRvb2xzKHRvb2xzLCBrd2FyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aENvbmZpZyh7XG4gICAgICAgICAgICB0b29sczogY29udmVydFRvQ29udmVyc2VUb29scyh0b29scyksXG4gICAgICAgICAgICAuLi5rd2FyZ3MsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBSZXBsYWNlXG4gICAgX2xsbVR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImNoYXRfYmVkcm9ja19jb252ZXJzZVwiO1xuICAgIH1cbiAgICBpbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHRvb2xDb25maWc7XG4gICAgICAgIGlmIChvcHRpb25zPy50b29scyAmJiBvcHRpb25zLnRvb2xzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgdG9vbHMgPSBjb252ZXJ0VG9Db252ZXJzZVRvb2xzKG9wdGlvbnMudG9vbHMpO1xuICAgICAgICAgICAgdG9vbENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICB0b29scyxcbiAgICAgICAgICAgICAgICB0b29sQ2hvaWNlOiBvcHRpb25zLnRvb2xfY2hvaWNlXG4gICAgICAgICAgICAgICAgICAgID8gY29udmVydFRvQmVkcm9ja1Rvb2xDaG9pY2Uob3B0aW9ucy50b29sX2Nob2ljZSwgdG9vbHMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VwcG9ydHNUb29sQ2hvaWNlVmFsdWVzOiB0aGlzLnN1cHBvcnRzVG9vbENob2ljZVZhbHVlcyxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbmZlcmVuY2VDb25maWc6IHtcbiAgICAgICAgICAgICAgICBtYXhUb2tlbnM6IHRoaXMubWF4VG9rZW5zLFxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgICAgIHRvcFA6IHRoaXMudG9wUCxcbiAgICAgICAgICAgICAgICBzdG9wU2VxdWVuY2VzOiBvcHRpb25zPy5zdG9wLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvb2xDb25maWcsXG4gICAgICAgICAgICBhZGRpdGlvbmFsTW9kZWxSZXF1ZXN0RmllbGRzOiB0aGlzLmFkZGl0aW9uYWxNb2RlbFJlcXVlc3RGaWVsZHMgPz9cbiAgICAgICAgICAgICAgICBvcHRpb25zPy5hZGRpdGlvbmFsTW9kZWxSZXF1ZXN0RmllbGRzLFxuICAgICAgICAgICAgZ3VhcmRyYWlsQ29uZmlnOiB0aGlzLmd1YXJkcmFpbENvbmZpZyA/PyBvcHRpb25zPy5ndWFyZHJhaWxDb25maWcsXG4gICAgICAgICAgICBwZXJmb3JtYW5jZUNvbmZpZzogb3B0aW9ucz8ucGVyZm9ybWFuY2VDb25maWcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIF9nZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBpZiAodGhpcy5zdHJlYW1pbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKG1lc3NhZ2VzLCBvcHRpb25zLCBydW5NYW5hZ2VyKTtcbiAgICAgICAgICAgIGxldCBmaW5hbFJlc3VsdDtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsUmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxSZXN1bHQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsUmVzdWx0ID0gZmluYWxSZXN1bHQuY29uY2F0KGNodW5rKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmluYWxSZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSBmaW5hbCBvdXRwdXQgZnJvbSBCZWRyb2NrIHN0cmVhbWluZyBjYWxsLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtmaW5hbFJlc3VsdF0sXG4gICAgICAgICAgICAgICAgbGxtT3V0cHV0OiBmaW5hbFJlc3VsdC5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2dlbmVyYXRlTm9uU3RyZWFtaW5nKG1lc3NhZ2VzLCBvcHRpb25zLCBydW5NYW5hZ2VyKTtcbiAgICB9XG4gICAgYXN5bmMgX2dlbmVyYXRlTm9uU3RyZWFtaW5nKG1lc3NhZ2VzLCBvcHRpb25zLCBfcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCB7IGNvbnZlcnNlTWVzc2FnZXMsIGNvbnZlcnNlU3lzdGVtIH0gPSBjb252ZXJ0VG9Db252ZXJzZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IENvbnZlcnNlQ29tbWFuZCh7XG4gICAgICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgbWVzc2FnZXM6IGNvbnZlcnNlTWVzc2FnZXMsXG4gICAgICAgICAgICBzeXN0ZW06IGNvbnZlcnNlU3lzdGVtLFxuICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBvcHRpb25zLnJlcXVlc3RNZXRhZGF0YSxcbiAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuc2VuZChjb21tYW5kLCB7XG4gICAgICAgICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IG91dHB1dCwgLi4ucmVzcG9uc2VNZXRhZGF0YSB9ID0gcmVzcG9uc2U7XG4gICAgICAgIGlmICghb3V0cHV0Py5tZXNzYWdlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBtZXNzYWdlIGZvdW5kIGluIEJlZHJvY2sgcmVzcG9uc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjb252ZXJ0Q29udmVyc2VNZXNzYWdlVG9MYW5nQ2hhaW5NZXNzYWdlKG91dHB1dC5tZXNzYWdlLCByZXNwb25zZU1ldGFkYXRhKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiID8gbWVzc2FnZS5jb250ZW50IDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCB7IGNvbnZlcnNlTWVzc2FnZXMsIGNvbnZlcnNlU3lzdGVtIH0gPSBjb252ZXJ0VG9Db252ZXJzZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICBsZXQgeyBzdHJlYW1Vc2FnZSB9ID0gdGhpcztcbiAgICAgICAgaWYgKG9wdGlvbnMuc3RyZWFtVXNhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RyZWFtVXNhZ2UgPSBvcHRpb25zLnN0cmVhbVVzYWdlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgQ29udmVyc2VTdHJlYW1Db21tYW5kKHtcbiAgICAgICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWwsXG4gICAgICAgICAgICBtZXNzYWdlczogY29udmVyc2VNZXNzYWdlcyxcbiAgICAgICAgICAgIHN5c3RlbTogY29udmVyc2VTeXN0ZW0sXG4gICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IG9wdGlvbnMucmVxdWVzdE1ldGFkYXRhLFxuICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5zZW5kKGNvbW1hbmQsIHtcbiAgICAgICAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdHJlYW0pIHtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVzcG9uc2Uuc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNodW5rLmNvbnRlbnRCbG9ja1N0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGhhbmRsZUNvbnZlcnNlU3RyZWFtQ29udGVudEJsb2NrU3RhcnQoY2h1bmsuY29udGVudEJsb2NrU3RhcnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaHVuay5jb250ZW50QmxvY2tEZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0Q2hhdEdlbmVyYXRpb24gPSBoYW5kbGVDb252ZXJzZVN0cmVhbUNvbnRlbnRCbG9ja0RlbHRhKGNodW5rLmNvbnRlbnRCbG9ja0RlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGV4dENoYXRHZW5lcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1OZXdUb2tlbih0ZXh0Q2hhdEdlbmVyYXRpb24udGV4dCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuazogdGV4dENoYXRHZW5lcmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2h1bmsubWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgaGFuZGxlQ29udmVyc2VTdHJlYW1NZXRhZGF0YShjaHVuay5tZXRhZGF0YSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtVXNhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogY2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHdpdGhTdHJ1Y3R1cmVkT3V0cHV0KG91dHB1dFNjaGVtYSwgY29uZmlnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHNjaGVtYSA9IG91dHB1dFNjaGVtYTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGNvbmZpZz8ubmFtZTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBnZXRTY2hlbWFEZXNjcmlwdGlvbihzY2hlbWEpID8/IFwiQSBmdW5jdGlvbiBhdmFpbGFibGUgdG8gY2FsbC5cIjtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gY29uZmlnPy5tZXRob2Q7XG4gICAgICAgIGNvbnN0IGluY2x1ZGVSYXcgPSBjb25maWc/LmluY2x1ZGVSYXc7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwianNvbk1vZGVcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaGF0QmVkcm9ja0NvbnZlcnNlIGRvZXMgbm90IHN1cHBvcnQgJ2pzb25Nb2RlJy5gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZnVuY3Rpb25OYW1lID0gbmFtZSA/PyBcImV4dHJhY3RcIjtcbiAgICAgICAgbGV0IHRvb2xzO1xuICAgICAgICBpZiAoaXNJbnRlcm9wWm9kU2NoZW1hKHNjaGVtYSkpIHtcbiAgICAgICAgICAgIHRvb2xzID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiB0b0pzb25TY2hlbWEoc2NoZW1hKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChcIm5hbWVcIiBpbiBzY2hlbWEpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbk5hbWUgPSBzY2hlbWEubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvb2xzID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBzY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3VwcG9ydHNUb29sQ2hvaWNlVmFsdWVzID0gdGhpcy5zdXBwb3J0c1Rvb2xDaG9pY2VWYWx1ZXMgPz8gW107XG4gICAgICAgIGxldCB0b29sQ2hvaWNlT2JqO1xuICAgICAgICBpZiAoc3VwcG9ydHNUb29sQ2hvaWNlVmFsdWVzLmluY2x1ZGVzKFwidG9vbFwiKSkge1xuICAgICAgICAgICAgdG9vbENob2ljZU9iaiA9IHtcbiAgICAgICAgICAgICAgICB0b29sX2Nob2ljZTogdG9vbHNbMF0uZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3VwcG9ydHNUb29sQ2hvaWNlVmFsdWVzLmluY2x1ZGVzKFwiYW55XCIpKSB7XG4gICAgICAgICAgICB0b29sQ2hvaWNlT2JqID0ge1xuICAgICAgICAgICAgICAgIHRvb2xfY2hvaWNlOiBcImFueVwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsbG0gPSB0aGlzLmJpbmRUb29scyh0b29scywgdG9vbENob2ljZU9iaik7XG4gICAgICAgIGNvbnN0IG91dHB1dFBhcnNlciA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWlucHV0LnRvb2xfY2FsbHMgfHwgaW5wdXQudG9vbF9jYWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIGNhbGxzIGZvdW5kIGluIHRoZSByZXNwb25zZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IGlucHV0LnRvb2xfY2FsbHMuZmluZCgodGMpID0+IHRjLm5hbWUgPT09IGZ1bmN0aW9uTmFtZSk7XG4gICAgICAgICAgICBpZiAoIXRvb2xDYWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyB0b29sIGNhbGwgZm91bmQgd2l0aCBuYW1lICR7ZnVuY3Rpb25OYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b29sQ2FsbC5hcmdzO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFpbmNsdWRlUmF3KSB7XG4gICAgICAgICAgICByZXR1cm4gbGxtLnBpcGUob3V0cHV0UGFyc2VyKS53aXRoQ29uZmlnKHtcbiAgICAgICAgICAgICAgICBydW5OYW1lOiBcIlN0cnVjdHVyZWRPdXRwdXRcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlckFzc2lnbiA9IFJ1bm5hYmxlUGFzc3Rocm91Z2guYXNzaWduKHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBwYXJzZWQ6IChpbnB1dCwgY29uZmlnKSA9PiBvdXRwdXRQYXJzZXIuaW52b2tlKGlucHV0LnJhdywgY29uZmlnKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBhcnNlck5vbmUgPSBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbih7XG4gICAgICAgICAgICBwYXJzZWQ6ICgpID0+IG51bGwsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYXJzZWRXaXRoRmFsbGJhY2sgPSBwYXJzZXJBc3NpZ24ud2l0aEZhbGxiYWNrcyh7XG4gICAgICAgICAgICBmYWxsYmFja3M6IFtwYXJzZXJOb25lXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJhdzogbGxtLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhcnNlZFdpdGhGYWxsYmFjayxcbiAgICAgICAgXSkud2l0aENvbmZpZyh7XG4gICAgICAgICAgICBydW5OYW1lOiBcIlN0cnVjdHVyZWRPdXRwdXRSdW5uYWJsZVwiLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQUlNZXNzYWdlQ2h1bmsiLCJCYXNlQ2hhdE1vZGVsIiwiQmVkcm9ja1J1bnRpbWVDbGllbnQiLCJDb252ZXJzZUNvbW1hbmQiLCJDb252ZXJzZVN0cmVhbUNvbW1hbmQiLCJDaGF0R2VuZXJhdGlvbkNodW5rIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsImRlZmF1bHRQcm92aWRlciIsIlJ1bm5hYmxlTGFtYmRhIiwiUnVubmFibGVQYXNzdGhyb3VnaCIsIlJ1bm5hYmxlU2VxdWVuY2UiLCJnZXRTY2hlbWFEZXNjcmlwdGlvbiIsImlzSW50ZXJvcFpvZFNjaGVtYSIsInRvSnNvblNjaGVtYSIsImNvbnZlcnRUb0NvbnZlcnNlVG9vbHMiLCJjb252ZXJ0VG9CZWRyb2NrVG9vbENob2ljZSIsImNvbnZlcnRUb0NvbnZlcnNlTWVzc2FnZXMiLCJjb252ZXJ0Q29udmVyc2VNZXNzYWdlVG9MYW5nQ2hhaW5NZXNzYWdlIiwiaGFuZGxlQ29udmVyc2VTdHJlYW1Db250ZW50QmxvY2tEZWx0YSIsImhhbmRsZUNvbnZlcnNlU3RyZWFtTWV0YWRhdGEiLCJoYW5kbGVDb252ZXJzZVN0cmVhbUNvbnRlbnRCbG9ja1N0YXJ0Iiwic3VwcG9ydGVkVG9vbENob2ljZVZhbHVlc0Zvck1vZGVsIiwiQ2hhdEJlZHJvY2tDb252ZXJzZSIsImxjX25hbWUiLCJsY19zZWNyZXRzIiwiYXBpS2V5IiwibGNfYWxpYXNlcyIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsInByb2ZpbGUiLCJmaWxlcGF0aCIsImNvbmZpZ0ZpbGVwYXRoIiwiaWdub3JlQ2FjaGUiLCJtZmFDb2RlUHJvdmlkZXIiLCJyb2xlQXNzdW1lciIsInJvbGVBcm4iLCJ3ZWJJZGVudGl0eVRva2VuRmlsZSIsInJvbGVBc3N1bWVyV2l0aFdlYklkZW50aXR5IiwicmVzdCIsImNyZWRlbnRpYWxzIiwicmVnaW9uIiwiRXJyb3IiLCJjbGllbnQiLCJjbGllbnRPcHRpb25zIiwiZW5kcG9pbnQiLCJlbmRwb2ludEhvc3QiLCJtb2RlbCIsInN0cmVhbWluZyIsInRlbXBlcmF0dXJlIiwibWF4VG9rZW5zIiwidG9wUCIsImFkZGl0aW9uYWxNb2RlbFJlcXVlc3RGaWVsZHMiLCJzdHJlYW1Vc2FnZSIsImd1YXJkcmFpbENvbmZpZyIsInBlcmZvcm1hbmNlQ29uZmlnIiwic3VwcG9ydHNUb29sQ2hvaWNlVmFsdWVzIiwiZ2V0THNQYXJhbXMiLCJvcHRpb25zIiwicGFyYW1zIiwiaW52b2NhdGlvblBhcmFtcyIsImxzX3Byb3ZpZGVyIiwibHNfbW9kZWxfbmFtZSIsImxzX21vZGVsX3R5cGUiLCJsc190ZW1wZXJhdHVyZSIsImluZmVyZW5jZUNvbmZpZyIsImxzX21heF90b2tlbnMiLCJsc19zdG9wIiwic3RvcCIsImJpbmRUb29scyIsInRvb2xzIiwia3dhcmdzIiwid2l0aENvbmZpZyIsIl9sbG1UeXBlIiwidG9vbENvbmZpZyIsImxlbmd0aCIsInRvb2xDaG9pY2UiLCJ0b29sX2Nob2ljZSIsInN0b3BTZXF1ZW5jZXMiLCJfZ2VuZXJhdGUiLCJtZXNzYWdlcyIsInJ1bk1hbmFnZXIiLCJzdHJlYW0iLCJfc3RyZWFtUmVzcG9uc2VDaHVua3MiLCJmaW5hbFJlc3VsdCIsImNodW5rIiwiY29uY2F0IiwiZ2VuZXJhdGlvbnMiLCJsbG1PdXRwdXQiLCJnZW5lcmF0aW9uSW5mbyIsIl9nZW5lcmF0ZU5vblN0cmVhbWluZyIsIl9ydW5NYW5hZ2VyIiwiY29udmVyc2VNZXNzYWdlcyIsImNvbnZlcnNlU3lzdGVtIiwiY29tbWFuZCIsIm1vZGVsSWQiLCJzeXN0ZW0iLCJyZXF1ZXN0TWV0YWRhdGEiLCJyZXNwb25zZSIsInNlbmQiLCJhYm9ydFNpZ25hbCIsInNpZ25hbCIsIm91dHB1dCIsInJlc3BvbnNlTWV0YWRhdGEiLCJtZXNzYWdlIiwidGV4dCIsImNvbnRlbnQiLCJjb250ZW50QmxvY2tTdGFydCIsImNvbnRlbnRCbG9ja0RlbHRhIiwidGV4dENoYXRHZW5lcmF0aW9uIiwiaGFuZGxlTExNTmV3VG9rZW4iLCJtZXRhZGF0YSIsInJlc3BvbnNlX21ldGFkYXRhIiwid2l0aFN0cnVjdHVyZWRPdXRwdXQiLCJvdXRwdXRTY2hlbWEiLCJjb25maWciLCJzY2hlbWEiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJtZXRob2QiLCJpbmNsdWRlUmF3IiwiZnVuY3Rpb25OYW1lIiwidHlwZSIsImZ1bmN0aW9uIiwicGFyYW1ldGVycyIsInRvb2xDaG9pY2VPYmoiLCJpbmNsdWRlcyIsImxsbSIsIm91dHB1dFBhcnNlciIsImZyb20iLCJpbnB1dCIsInRvb2xfY2FsbHMiLCJ0b29sQ2FsbCIsImZpbmQiLCJ0YyIsImFyZ3MiLCJwaXBlIiwicnVuTmFtZSIsInBhcnNlckFzc2lnbiIsImFzc2lnbiIsInBhcnNlZCIsImludm9rZSIsInJhdyIsInBhcnNlck5vbmUiLCJwYXJzZWRXaXRoRmFsbGJhY2siLCJ3aXRoRmFsbGJhY2tzIiwiZmFsbGJhY2tzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/aws/dist/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/aws/dist/common.js":
/*!****************************************************!*\
  !*** ./node_modules/@langchain/aws/dist/common.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bedrockReasoningBlockToLangchainReasoningBlock: () => (/* binding */ bedrockReasoningBlockToLangchainReasoningBlock),\n/* harmony export */   bedrockReasoningDeltaToLangchainPartialReasoningBlock: () => (/* binding */ bedrockReasoningDeltaToLangchainPartialReasoningBlock),\n/* harmony export */   concatenateLangchainReasoningBlocks: () => (/* binding */ concatenateLangchainReasoningBlocks),\n/* harmony export */   convertConverseMessageToLangChainMessage: () => (/* binding */ convertConverseMessageToLangChainMessage),\n/* harmony export */   convertToBedrockToolChoice: () => (/* binding */ convertToBedrockToolChoice),\n/* harmony export */   convertToConverseMessages: () => (/* binding */ convertToConverseMessages),\n/* harmony export */   convertToConverseTools: () => (/* binding */ convertToConverseTools),\n/* harmony export */   extractImageInfo: () => (/* binding */ extractImageInfo),\n/* harmony export */   handleConverseStreamContentBlockDelta: () => (/* binding */ handleConverseStreamContentBlockDelta),\n/* harmony export */   handleConverseStreamContentBlockStart: () => (/* binding */ handleConverseStreamContentBlockStart),\n/* harmony export */   handleConverseStreamMetadata: () => (/* binding */ handleConverseStreamMetadata),\n/* harmony export */   isBedrockTool: () => (/* binding */ isBedrockTool),\n/* harmony export */   langchainReasoningBlockToBedrockReasoningBlock: () => (/* binding */ langchainReasoningBlockToBedrockReasoningBlock),\n/* harmony export */   supportedToolChoiceValuesForModel: () => (/* binding */ supportedToolChoiceValuesForModel)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/language_models/base */ \"(rsc)/./node_modules/@langchain/core/language_models/base.js\");\n/* harmony import */ var _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/utils/function_calling */ \"(rsc)/./node_modules/@langchain/core/utils/function_calling.js\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/@langchain/core/outputs.js\");\n/* harmony import */ var _langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/utils/types */ \"(rsc)/./node_modules/@langchain/core/utils/types.js\");\n/* harmony import */ var _langchain_core_utils_json_schema__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @langchain/core/utils/json_schema */ \"(rsc)/./node_modules/@langchain/core/utils/json_schema.js\");\n\n\n\n\n\n\nfunction isDefaultCachePoint(block) {\n    return Boolean(typeof block === \"object\" && block !== null && \"cachePoint\" in block && block.cachePoint && typeof block.cachePoint === \"object\" && block.cachePoint !== null && \"type\" in block.cachePoint && block.cachePoint.type === \"default\");\n}\nconst standardContentBlockConverter = {\n    providerName: \"ChatBedrockConverse\",\n    fromStandardTextBlock (block) {\n        return {\n            text: block.text\n        };\n    },\n    fromStandardImageBlock (block) {\n        let format;\n        if (block.source_type === \"url\") {\n            const parsedData = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.parseBase64DataUrl)({\n                dataUrl: block.url,\n                asTypedArray: true\n            });\n            if (parsedData) {\n                const parsedMimeType = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.parseMimeType)(parsedData.mime_type);\n                format = parsedMimeType.type;\n                return {\n                    image: {\n                        format,\n                        source: {\n                            bytes: parsedData.data\n                        }\n                    }\n                };\n            } else {\n                throw new Error(\"Only base64 data URLs are supported for image blocks with source type 'url' with ChatBedrockConverse.\");\n            }\n        } else if (block.source_type === \"base64\") {\n            if (block.mime_type) {\n                const parsedMimeType = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.parseMimeType)(block.mime_type);\n                format = parsedMimeType.subtype;\n            }\n            if (format && ![\n                \"gif\",\n                \"jpeg\",\n                \"png\",\n                \"webp\"\n            ].includes(format)) {\n                throw new Error(`Unsupported image mime type: \"${block.mime_type}\" ChatBedrockConverse only supports \"image/gif\", \"image/jpeg\", \"image/png\", and \"image/webp\" formats.`);\n            }\n            return {\n                image: {\n                    format,\n                    source: {\n                        bytes: Uint8Array.from(atob(block.data), (c)=>c.charCodeAt(0))\n                    }\n                }\n            };\n        } else if (block.source_type === \"id\") {\n            throw new Error(\"Image source type 'id' not supported with ChatBedrockConverse.\");\n        } else {\n            throw new Error(`Unsupported image source type: \"${block.source_type}\" with ChatBedrockConverse.`);\n        }\n    },\n    fromStandardFileBlock (block) {\n        const mimeTypeToDocumentFormat = {\n            \"text/csv\": \"csv\",\n            \"application/msword\": \"doc\",\n            \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"docx\",\n            \"text/html\": \"html\",\n            \"text/markdown\": \"md\",\n            \"application/pdf\": \"pdf\",\n            \"text/plain\": \"txt\",\n            \"application/vnd.ms-excel\": \"xls\",\n            \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\": \"xlsx\"\n        };\n        const name = block.metadata?.name ?? block.metadata?.filename ?? block.metadata?.title;\n        if (block.source_type === \"text\") {\n            return {\n                document: {\n                    name,\n                    format: \"txt\",\n                    source: {\n                        bytes: new TextEncoder().encode(block.text)\n                    }\n                }\n            };\n        }\n        if (block.source_type === \"url\") {\n            const parsedData = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.parseBase64DataUrl)({\n                dataUrl: block.url,\n                asTypedArray: true\n            });\n            if (parsedData) {\n                const parsedMimeType = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.parseMimeType)(parsedData.mime_type ?? block.mime_type);\n                const mimeType = `${parsedMimeType.type}/${parsedMimeType.subtype}`;\n                const format = mimeTypeToDocumentFormat[mimeType];\n                return {\n                    document: {\n                        name,\n                        format,\n                        source: {\n                            bytes: parsedData.data\n                        }\n                    }\n                };\n            }\n            throw new Error(\"Only base64 data URLs are supported for file blocks with source type 'url' with ChatBedrockConverse.\");\n        }\n        if (block.source_type === \"base64\") {\n            let format;\n            if (block.mime_type) {\n                const parsedMimeType = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.parseMimeType)(block.mime_type);\n                const mimeType = `${parsedMimeType.type}/${parsedMimeType.subtype}`;\n                format = mimeTypeToDocumentFormat[mimeType];\n                if (format === undefined) {\n                    throw new Error(`Unsupported file mime type: \"${block.mime_type}\" ChatBedrockConverse only supports ${Object.keys(mimeTypeToDocumentFormat).join(\", \")} formats.`);\n                }\n            }\n            return {\n                document: {\n                    name,\n                    format,\n                    source: {\n                        bytes: Uint8Array.from(atob(block.data), (c)=>c.charCodeAt(0))\n                    }\n                }\n            };\n        }\n        if (block.source_type === \"id\") {\n            throw new Error(\"File source type 'id' not supported with ChatBedrockConverse.\");\n        }\n        throw new Error(`Unsupported file source type: \"${block.source_type}\" with ChatBedrockConverse.`);\n    }\n};\nfunction extractImageInfo(base64) {\n    // Extract the format from the base64 string\n    const formatMatch = base64.match(/^data:image\\/(\\w+);base64,/);\n    let format;\n    if (formatMatch) {\n        const extractedFormat = formatMatch[1].toLowerCase();\n        if ([\n            \"gif\",\n            \"jpeg\",\n            \"png\",\n            \"webp\"\n        ].includes(extractedFormat)) {\n            format = extractedFormat;\n        }\n    }\n    // Remove the data URL prefix if present\n    const base64Data = base64.replace(/^data:image\\/\\w+;base64,/, \"\");\n    // Convert base64 to Uint8Array\n    const binaryString = atob(base64Data);\n    const bytes = new Uint8Array(binaryString.length);\n    for(let i = 0; i < binaryString.length; i += 1){\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return {\n        image: {\n            format,\n            source: {\n                bytes\n            }\n        }\n    };\n}\nfunction convertLangChainContentBlockToConverseContentBlock({ block, onUnknown = \"throw\" }) {\n    if (typeof block === \"string\") {\n        return {\n            text: block\n        };\n    }\n    if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isDataContentBlock)(block)) {\n        return (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.convertToProviderContentBlock)(block, standardContentBlockConverter);\n    }\n    if (block.type === \"text\") {\n        return {\n            text: block.text\n        };\n    }\n    if (block.type === \"image_url\") {\n        return extractImageInfo(typeof block.image_url === \"string\" ? block.image_url : block.image_url.url);\n    }\n    if (block.type === \"document\" && block.document !== undefined) {\n        return {\n            document: block.document\n        };\n    }\n    if (block.type === \"image\" && block.image !== undefined) {\n        return {\n            image: block.image\n        };\n    }\n    if (isDefaultCachePoint(block)) {\n        return {\n            cachePoint: {\n                type: \"default\"\n            }\n        };\n    }\n    if (onUnknown === \"throw\") {\n        throw new Error(`Unsupported content block type: ${block.type}`);\n    } else {\n        return block;\n    }\n}\nfunction convertSystemMessageToConverseMessage(msg) {\n    if (typeof msg.content === \"string\") {\n        return [\n            {\n                text: msg.content\n            }\n        ];\n    } else if (Array.isArray(msg.content) && msg.content.length > 0) {\n        const contentBlocks = [];\n        for (const block of msg.content){\n            if (block.type === \"text\" && typeof block.text === \"string\") {\n                contentBlocks.push({\n                    text: block.text\n                });\n            } else if (isDefaultCachePoint(block)) {\n                contentBlocks.push({\n                    cachePoint: {\n                        type: \"default\"\n                    }\n                });\n            } else break;\n        }\n        if (msg.content.length === contentBlocks.length) return contentBlocks;\n    }\n    throw new Error(\"System message content must be either a string, or an array of text blocks, optionally including a cache point.\");\n}\nfunction convertAIMessageToConverseMessage(msg) {\n    const assistantMsg = {\n        role: \"assistant\",\n        content: []\n    };\n    if (typeof msg.content === \"string\" && msg.content !== \"\") {\n        assistantMsg.content?.push({\n            text: msg.content\n        });\n    } else if (Array.isArray(msg.content)) {\n        const concatenatedBlocks = concatenateLangchainReasoningBlocks(msg.content);\n        const contentBlocks = [];\n        concatenatedBlocks.forEach((block)=>{\n            if (block.type === \"text\" && block.text !== \"\") {\n                // Merge whitespace/newlines with previous text blocks to avoid validation errors.\n                const cleanedText = block.text?.replace(/\\n/g, \"\").trim();\n                if (cleanedText === \"\") {\n                    if (contentBlocks.length > 0) {\n                        const mergedTextContent = `${contentBlocks[contentBlocks.length - 1].text}${block.text}`;\n                        contentBlocks[contentBlocks.length - 1].text = mergedTextContent;\n                    }\n                } else {\n                    contentBlocks.push({\n                        text: block.text\n                    });\n                }\n            } else if (block.type === \"reasoning_content\") {\n                contentBlocks.push({\n                    reasoningContent: langchainReasoningBlockToBedrockReasoningBlock(block)\n                });\n            } else if (isDefaultCachePoint(block)) {\n                contentBlocks.push({\n                    cachePoint: {\n                        type: \"default\"\n                    }\n                });\n            } else {\n                const blockValues = Object.fromEntries(Object.entries(block).filter(([key])=>key !== \"type\"));\n                throw new Error(`Unsupported content block type: ${block.type} with content of ${JSON.stringify(blockValues, null, 2)}`);\n            }\n        });\n        assistantMsg.content = [\n            ...assistantMsg.content ? assistantMsg.content : [],\n            ...contentBlocks\n        ];\n    }\n    // Important: this must be placed after any reasoning content blocks, else claude models will return an error.\n    if (msg.tool_calls && msg.tool_calls.length) {\n        assistantMsg.content = [\n            ...assistantMsg.content ? assistantMsg.content : [],\n            ...msg.tool_calls.map((tc)=>({\n                    toolUse: {\n                        toolUseId: tc.id,\n                        name: tc.name,\n                        input: tc.args\n                    }\n                }))\n        ];\n    }\n    return assistantMsg;\n}\nfunction convertHumanMessageToConverseMessage(msg) {\n    if (msg.content === \"\") {\n        throw new Error(`Invalid message content: empty string. '${msg.getType()}' must contain non-empty content.`);\n    }\n    const content = Array.isArray(msg.content) ? msg.content.map((c)=>convertLangChainContentBlockToConverseContentBlock({\n            block: c,\n            onUnknown: \"throw\"\n        })) : [\n        convertLangChainContentBlockToConverseContentBlock({\n            block: msg.content,\n            onUnknown: \"throw\"\n        })\n    ];\n    return {\n        role: \"user\",\n        content\n    };\n}\nfunction convertToolMessageToConverseMessage(msg) {\n    const castMsg = msg;\n    if (typeof castMsg.content === \"string\") {\n        return {\n            // Tool use messages are always from the user\n            role: \"user\",\n            content: [\n                {\n                    toolResult: {\n                        toolUseId: castMsg.tool_call_id,\n                        content: [\n                            {\n                                text: castMsg.content\n                            }\n                        ]\n                    }\n                }\n            ]\n        };\n    } else {\n        return {\n            // Tool use messages are always from the user\n            role: \"user\",\n            content: [\n                {\n                    toolResult: {\n                        toolUseId: castMsg.tool_call_id,\n                        content: msg.content.map((c)=>{\n                            const converted = convertLangChainContentBlockToConverseContentBlock({\n                                block: c,\n                                onUnknown: \"returnUnmodified\"\n                            });\n                            if (converted !== c) {\n                                return converted;\n                            }\n                            return {\n                                json: c\n                            };\n                        })\n                    }\n                }\n            ]\n        };\n    }\n}\nfunction convertToConverseMessages(messages) {\n    const converseSystem = messages.filter((msg)=>msg.getType() === \"system\").flatMap((msg)=>convertSystemMessageToConverseMessage(msg));\n    const converseMessages = messages.filter((msg)=>msg.getType() !== \"system\").map((msg)=>{\n        if (msg.getType() === \"ai\") {\n            return convertAIMessageToConverseMessage(msg);\n        } else if (msg.getType() === \"human\" || msg.getType() === \"generic\") {\n            return convertHumanMessageToConverseMessage(msg);\n        } else if (msg.getType() === \"tool\") {\n            return convertToolMessageToConverseMessage(msg);\n        } else {\n            throw new Error(`Unsupported message type: ${msg.getType()}`);\n        }\n    });\n    // Combine consecutive user tool result messages into a single message\n    const combinedConverseMessages = converseMessages.reduce((acc, curr)=>{\n        const lastMessage = acc[acc.length - 1];\n        if (lastMessage && lastMessage.role === \"user\" && lastMessage.content?.some((c)=>\"toolResult\" in c) && curr.role === \"user\" && curr.content?.some((c)=>\"toolResult\" in c)) {\n            lastMessage.content = lastMessage.content.concat(curr.content);\n        } else {\n            acc.push(curr);\n        }\n        return acc;\n    }, []);\n    return {\n        converseMessages: combinedConverseMessages,\n        converseSystem\n    };\n}\nfunction isBedrockTool(tool) {\n    if (typeof tool === \"object\" && tool && \"toolSpec\" in tool) {\n        return true;\n    }\n    return false;\n}\nfunction convertToConverseTools(tools) {\n    if (tools.every(_langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_1__.isOpenAITool)) {\n        return tools.map((tool)=>({\n                toolSpec: {\n                    name: tool.function.name,\n                    description: tool.function.description,\n                    inputSchema: {\n                        json: tool.function.parameters\n                    }\n                }\n            }));\n    } else if (tools.every(_langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_2__.isLangChainTool)) {\n        return tools.map((tool)=>({\n                toolSpec: {\n                    name: tool.name,\n                    description: tool.description,\n                    inputSchema: {\n                        json: (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_4__.isInteropZodSchema)(tool.schema) ? (0,_langchain_core_utils_json_schema__WEBPACK_IMPORTED_MODULE_5__.toJsonSchema)(tool.schema) : tool.schema\n                    }\n                }\n            }));\n    } else if (tools.every(isBedrockTool)) {\n        return tools;\n    }\n    throw new Error(\"Invalid tools passed. Must be an array of StructuredToolInterface, ToolDefinition, or BedrockTool.\");\n}\nfunction convertToBedrockToolChoice(toolChoice, tools, fields) {\n    const supportsToolChoiceValues = fields.supportsToolChoiceValues ?? [];\n    let bedrockToolChoice;\n    if (typeof toolChoice === \"string\") {\n        switch(toolChoice){\n            case \"any\":\n                bedrockToolChoice = {\n                    any: {}\n                };\n                break;\n            case \"auto\":\n                bedrockToolChoice = {\n                    auto: {}\n                };\n                break;\n            default:\n                {\n                    const foundTool = tools.find((tool)=>tool.toolSpec?.name === toolChoice);\n                    if (!foundTool) {\n                        throw new Error(`Tool with name ${toolChoice} not found in tools list.`);\n                    }\n                    bedrockToolChoice = {\n                        tool: {\n                            name: toolChoice\n                        }\n                    };\n                }\n        }\n    } else {\n        bedrockToolChoice = toolChoice;\n    }\n    const toolChoiceType = Object.keys(bedrockToolChoice)[0];\n    if (!supportsToolChoiceValues.includes(toolChoiceType)) {\n        let supportedTxt = \"\";\n        if (supportsToolChoiceValues.length) {\n            supportedTxt = `Model ${fields.model} does not currently support 'tool_choice' ` + `of type ${toolChoiceType}. The following 'tool_choice' types ` + `are supported: ${supportsToolChoiceValues.join(\", \")}.`;\n        } else {\n            supportedTxt = `Model ${fields.model} does not currently support 'tool_choice'.`;\n        }\n        throw new Error(`${supportedTxt} Please see` + \"https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_ToolChoice.html\" + \"for the latest documentation on models that support tool choice.\");\n    }\n    return bedrockToolChoice;\n}\nfunction convertConverseMessageToLangChainMessage(message, responseMetadata) {\n    if (!message.content) {\n        throw new Error(\"No message content found in response.\");\n    }\n    if (message.role !== \"assistant\") {\n        throw new Error(`Unsupported message role received in ChatBedrockConverse response: ${message.role}`);\n    }\n    let requestId;\n    if (\"$metadata\" in responseMetadata && responseMetadata.$metadata && typeof responseMetadata.$metadata === \"object\" && \"requestId\" in responseMetadata.$metadata) {\n        requestId = responseMetadata.$metadata.requestId;\n    }\n    let tokenUsage;\n    if (responseMetadata.usage) {\n        const input_tokens = responseMetadata.usage.inputTokens ?? 0;\n        const output_tokens = responseMetadata.usage.outputTokens ?? 0;\n        tokenUsage = {\n            input_tokens,\n            output_tokens,\n            total_tokens: responseMetadata.usage.totalTokens ?? input_tokens + output_tokens\n        };\n    }\n    if (message.content?.length === 1 && \"text\" in message.content[0] && typeof message.content[0].text === \"string\") {\n        return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessage({\n            content: message.content[0].text,\n            response_metadata: responseMetadata,\n            usage_metadata: tokenUsage,\n            id: requestId\n        });\n    } else {\n        const toolCalls = [];\n        const content = [];\n        message.content.forEach((c)=>{\n            if (\"toolUse\" in c && c.toolUse && c.toolUse.name && c.toolUse.input && typeof c.toolUse.input === \"object\") {\n                toolCalls.push({\n                    id: c.toolUse.toolUseId,\n                    name: c.toolUse.name,\n                    args: c.toolUse.input,\n                    type: \"tool_call\"\n                });\n            } else if (\"text\" in c && typeof c.text === \"string\") {\n                content.push({\n                    type: \"text\",\n                    text: c.text\n                });\n            } else if (\"reasoningContent\" in c) {\n                content.push(bedrockReasoningBlockToLangchainReasoningBlock(c.reasoningContent));\n            } else {\n                content.push(c);\n            }\n        });\n        return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessage({\n            content: content.length ? content : \"\",\n            tool_calls: toolCalls.length ? toolCalls : undefined,\n            response_metadata: responseMetadata,\n            usage_metadata: tokenUsage,\n            id: requestId\n        });\n    }\n}\nfunction handleConverseStreamContentBlockDelta(contentBlockDelta) {\n    if (!contentBlockDelta.delta) {\n        throw new Error(\"No delta found in content block.\");\n    }\n    if (typeof contentBlockDelta.delta.text === \"string\") {\n        return new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_3__.ChatGenerationChunk({\n            text: contentBlockDelta.delta.text,\n            message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                content: contentBlockDelta.delta.text\n            })\n        });\n    } else if (contentBlockDelta.delta.toolUse) {\n        const index = contentBlockDelta.contentBlockIndex;\n        return new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_3__.ChatGenerationChunk({\n            text: \"\",\n            message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                content: \"\",\n                tool_call_chunks: [\n                    {\n                        args: contentBlockDelta.delta.toolUse.input,\n                        index,\n                        type: \"tool_call_chunk\"\n                    }\n                ]\n            })\n        });\n    } else if (contentBlockDelta.delta.reasoningContent) {\n        return new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_3__.ChatGenerationChunk({\n            text: \"\",\n            message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                content: [\n                    bedrockReasoningDeltaToLangchainPartialReasoningBlock(contentBlockDelta.delta.reasoningContent)\n                ]\n            })\n        });\n    } else {\n        throw new Error(`Unsupported content block type(s): ${JSON.stringify(contentBlockDelta.delta, null, 2)}`);\n    }\n}\nfunction handleConverseStreamContentBlockStart(contentBlockStart) {\n    const index = contentBlockStart.contentBlockIndex;\n    if (contentBlockStart.start?.toolUse) {\n        return new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_3__.ChatGenerationChunk({\n            text: \"\",\n            message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                content: \"\",\n                tool_call_chunks: [\n                    {\n                        name: contentBlockStart.start.toolUse.name,\n                        id: contentBlockStart.start.toolUse.toolUseId,\n                        index,\n                        type: \"tool_call_chunk\"\n                    }\n                ]\n            })\n        });\n    }\n    throw new Error(\"Unsupported content block start event.\");\n}\nfunction handleConverseStreamMetadata(metadata, extra) {\n    const inputTokens = metadata.usage?.inputTokens ?? 0;\n    const outputTokens = metadata.usage?.outputTokens ?? 0;\n    const usage_metadata = {\n        input_tokens: inputTokens,\n        output_tokens: outputTokens,\n        total_tokens: metadata.usage?.totalTokens ?? inputTokens + outputTokens\n    };\n    return new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_3__.ChatGenerationChunk({\n        text: \"\",\n        message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n            content: \"\",\n            usage_metadata: extra.streamUsage ? usage_metadata : undefined,\n            response_metadata: {\n                // Use the same key as returned from the Converse API\n                metadata\n            }\n        })\n    });\n}\nfunction bedrockReasoningDeltaToLangchainPartialReasoningBlock(reasoningContent) {\n    const { text, redactedContent, signature } = reasoningContent;\n    if (typeof text === \"string\") {\n        return {\n            type: \"reasoning_content\",\n            reasoningText: {\n                text\n            }\n        };\n    }\n    if (signature) {\n        return {\n            type: \"reasoning_content\",\n            reasoningText: {\n                signature\n            }\n        };\n    }\n    if (redactedContent) {\n        return {\n            type: \"reasoning_content\",\n            redactedContent: Buffer.from(redactedContent).toString(\"base64\")\n        };\n    }\n    throw new Error(\"Invalid reasoning content\");\n}\nfunction bedrockReasoningBlockToLangchainReasoningBlock(reasoningContent) {\n    const { reasoningText, redactedContent } = reasoningContent;\n    if (reasoningText) {\n        return {\n            type: \"reasoning_content\",\n            reasoningText: reasoningText\n        };\n    }\n    if (redactedContent) {\n        return {\n            type: \"reasoning_content\",\n            redactedContent: Buffer.from(redactedContent).toString(\"base64\")\n        };\n    }\n    throw new Error(\"Invalid reasoning content\");\n}\nfunction langchainReasoningBlockToBedrockReasoningBlock(content) {\n    if (content.type !== \"reasoning_content\") {\n        throw new Error(\"Invalid reasoning content\");\n    }\n    if (\"reasoningText\" in content) {\n        return {\n            reasoningText: content.reasoningText\n        };\n    }\n    if (\"redactedContent\" in content) {\n        return {\n            redactedContent: Buffer.from(content.redactedContent, \"base64\")\n        };\n    }\n    throw new Error(\"Invalid reasoning content\");\n}\nfunction concatenateLangchainReasoningBlocks(content) {\n    const concatenatedBlocks = [];\n    let concatenatedBlock = {};\n    for (const block of content){\n        if (block.type !== \"reasoning_content\") {\n            // if it's some other block type, end the current block, but keep it so we preserve order\n            if (Object.keys(concatenatedBlock).length > 0) {\n                concatenatedBlocks.push(concatenatedBlock);\n                concatenatedBlock = {};\n            }\n            concatenatedBlocks.push(block);\n            continue;\n        }\n        // non-redacted block\n        if (\"reasoningText\" in block && typeof block.reasoningText === \"object\") {\n            if (\"redactedContent\" in concatenatedBlock) {\n                // new type of block, so end the previous one\n                concatenatedBlocks.push(concatenatedBlock);\n                concatenatedBlock = {};\n            }\n            const { text, signature } = block.reasoningText;\n            const { text: prevText, signature: prevSignature } = \"reasoningText\" in concatenatedBlock ? concatenatedBlock.reasoningText : {};\n            concatenatedBlock = {\n                type: \"reasoning_content\",\n                reasoningText: {\n                    ...concatenatedBlock.reasoningText ?? {},\n                    ...prevText !== undefined || text !== undefined ? {\n                        text: (prevText ?? \"\") + (text ?? \"\")\n                    } : {},\n                    ...prevSignature !== undefined || signature !== undefined ? {\n                        signature: (prevSignature ?? \"\") + (signature ?? \"\")\n                    } : {}\n                }\n            };\n            // if a partial block chunk has a signature, the next one will begin a new reasoning block.\n            // full blocks always have signatures, so we start one now, anyway\n            if (\"signature\" in block.reasoningText) {\n                concatenatedBlocks.push(concatenatedBlock);\n                concatenatedBlock = {};\n            }\n        }\n        if (\"redactedContent\" in block) {\n            if (\"reasoningText\" in concatenatedBlock) {\n                // New type of block, so end the previous one. We should't really hit\n                // this, as we'll have created a new block upon encountering the\n                // signature above, but better safe than sorry.\n                concatenatedBlocks.push(concatenatedBlock);\n                concatenatedBlock = {};\n            }\n            const { redactedContent } = block;\n            const prevRedactedContent = \"redactedContent\" in concatenatedBlock ? concatenatedBlock.redactedContent : \"\";\n            concatenatedBlock = {\n                type: \"reasoning_content\",\n                redactedContent: prevRedactedContent + redactedContent\n            };\n        }\n    }\n    if (Object.keys(concatenatedBlock).length > 0) {\n        concatenatedBlocks.push(concatenatedBlock);\n    }\n    return concatenatedBlocks;\n}\nfunction supportedToolChoiceValuesForModel(model) {\n    if (model.includes(\"claude-3\") || model.includes(\"claude-4\") || model.includes(\"claude-opus-4\") || model.includes(\"claude-sonnet-4\")) {\n        return [\n            \"auto\",\n            \"any\",\n            \"tool\"\n        ];\n    }\n    if (model.includes(\"mistral-large\")) {\n        return [\n            \"auto\",\n            \"any\"\n        ];\n    }\n    return undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvZGlzdC9jb21tb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEo7QUFDeEY7QUFDSztBQUNYO0FBQ0c7QUFDQTtBQUNqRSxTQUFTVyxvQkFBb0JDLEtBQUs7SUFDOUIsT0FBT0MsUUFBUSxPQUFPRCxVQUFVLFlBQzVCQSxVQUFVLFFBQ1YsZ0JBQWdCQSxTQUNoQkEsTUFBTUUsVUFBVSxJQUNoQixPQUFPRixNQUFNRSxVQUFVLEtBQUssWUFDNUJGLE1BQU1FLFVBQVUsS0FBSyxRQUNyQixVQUFVRixNQUFNRSxVQUFVLElBQzFCRixNQUFNRSxVQUFVLENBQUNDLElBQUksS0FBSztBQUNsQztBQUNBLE1BQU1DLGdDQUFnQztJQUNsQ0MsY0FBYztJQUNkQyx1QkFBc0JOLEtBQUs7UUFDdkIsT0FBTztZQUNITyxNQUFNUCxNQUFNTyxJQUFJO1FBQ3BCO0lBQ0o7SUFDQUMsd0JBQXVCUixLQUFLO1FBQ3hCLElBQUlTO1FBQ0osSUFBSVQsTUFBTVUsV0FBVyxLQUFLLE9BQU87WUFDN0IsTUFBTUMsYUFBYXJCLDRFQUFrQkEsQ0FBQztnQkFDbENzQixTQUFTWixNQUFNYSxHQUFHO2dCQUNsQkMsY0FBYztZQUNsQjtZQUNBLElBQUlILFlBQVk7Z0JBQ1osTUFBTUksaUJBQWlCeEIsdUVBQWFBLENBQUNvQixXQUFXSyxTQUFTO2dCQUN6RFAsU0FBU00sZUFBZVosSUFBSTtnQkFDNUIsT0FBTztvQkFDSGMsT0FBTzt3QkFDSFI7d0JBQ0FTLFFBQVE7NEJBQ0pDLE9BQU9SLFdBQVdTLElBQUk7d0JBQzFCO29CQUNKO2dCQUNKO1lBQ0osT0FDSztnQkFDRCxNQUFNLElBQUlDLE1BQU07WUFDcEI7UUFDSixPQUNLLElBQUlyQixNQUFNVSxXQUFXLEtBQUssVUFBVTtZQUNyQyxJQUFJVixNQUFNZ0IsU0FBUyxFQUFFO2dCQUNqQixNQUFNRCxpQkFBaUJ4Qix1RUFBYUEsQ0FBQ1MsTUFB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QkFBbUJKLElBQUksQ0FBQ3lHO2dCQUN4QkEsb0JBQW9CLENBQUM7WUFDekI7UUFDSjtRQUNBLElBQUkscUJBQXFCeEssT0FBTztZQUM1QixJQUFJLG1CQUFtQndLLG1CQUFtQjtnQkFDdEMscUVBQXFFO2dCQUNyRSxnRUFBZ0U7Z0JBQ2hFLCtDQUErQztnQkFDL0NyRyxtQkFBbUJKLElBQUksQ0FBQ3lHO2dCQUN4QkEsb0JBQW9CLENBQUM7WUFDekI7WUFDQSxNQUFNLEVBQUVMLGVBQWUsRUFBRSxHQUFHbks7WUFDNUIsTUFBTTJLLHNCQUF1QixxQkFBcUJILG9CQUM1Q0Esa0JBQWtCTCxlQUFlLEdBQ2pDO1lBQ05LLG9CQUFvQjtnQkFDaEJySyxNQUFNO2dCQUNOZ0ssaUJBQWlCUSxzQkFBc0JSO1lBQzNDO1FBQ0o7SUFDSjtJQUNBLElBQUkzSCxPQUFPQyxJQUFJLENBQUMrSCxtQkFBbUJwSCxNQUFNLEdBQUcsR0FBRztRQUMzQ2UsbUJBQW1CSixJQUFJLENBQUN5RztJQUM1QjtJQUNBLE9BQU9yRztBQUNYO0FBQ08sU0FBU3lHLGtDQUFrQ3hDLEtBQUs7SUFDbkQsSUFBSUEsTUFBTTdHLFFBQVEsQ0FBQyxlQUNmNkcsTUFBTTdHLFFBQVEsQ0FBQyxlQUNmNkcsTUFBTTdHLFFBQVEsQ0FBQyxvQkFDZjZHLE1BQU03RyxRQUFRLENBQUMsb0JBQW9CO1FBQ25DLE9BQU87WUFBQztZQUFRO1lBQU87U0FBTztJQUNsQztJQUNBLElBQUk2RyxNQUFNN0csUUFBUSxDQUFDLGtCQUFrQjtRQUNqQyxPQUFPO1lBQUM7WUFBUTtTQUFNO0lBQzFCO0lBQ0EsT0FBT2dCO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vYXdzL2Rpc3QvY29tbW9uLmpzP2QwOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQUlNZXNzYWdlLCBBSU1lc3NhZ2VDaHVuaywgcGFyc2VCYXNlNjREYXRhVXJsLCBwYXJzZU1pbWVUeXBlLCBjb252ZXJ0VG9Qcm92aWRlckNvbnRlbnRCbG9jaywgaXNEYXRhQ29udGVudEJsb2NrLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbmltcG9ydCB7IGlzT3BlbkFJVG9vbCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2VcIjtcbmltcG9ydCB7IGlzTGFuZ0NoYWluVG9vbCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvZnVuY3Rpb25fY2FsbGluZ1wiO1xuaW1wb3J0IHsgQ2hhdEdlbmVyYXRpb25DaHVuayB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvb3V0cHV0c1wiO1xuaW1wb3J0IHsgaXNJbnRlcm9wWm9kU2NoZW1hIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy90eXBlc1wiO1xuaW1wb3J0IHsgdG9Kc29uU2NoZW1hIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9qc29uX3NjaGVtYVwiO1xuZnVuY3Rpb24gaXNEZWZhdWx0Q2FjaGVQb2ludChibG9jaykge1xuICAgIHJldHVybiBCb29sZWFuKHR5cGVvZiBibG9jayA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBibG9jayAhPT0gbnVsbCAmJlxuICAgICAgICBcImNhY2hlUG9pbnRcIiBpbiBibG9jayAmJlxuICAgICAgICBibG9jay5jYWNoZVBvaW50ICYmXG4gICAgICAgIHR5cGVvZiBibG9jay5jYWNoZVBvaW50ID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIGJsb2NrLmNhY2hlUG9pbnQgIT09IG51bGwgJiZcbiAgICAgICAgXCJ0eXBlXCIgaW4gYmxvY2suY2FjaGVQb2ludCAmJlxuICAgICAgICBibG9jay5jYWNoZVBvaW50LnR5cGUgPT09IFwiZGVmYXVsdFwiKTtcbn1cbmNvbnN0IHN0YW5kYXJkQ29udGVudEJsb2NrQ29udmVydGVyID0ge1xuICAgIHByb3ZpZGVyTmFtZTogXCJDaGF0QmVkcm9ja0NvbnZlcnNlXCIsXG4gICAgZnJvbVN0YW5kYXJkVGV4dEJsb2NrKGJsb2NrKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZXh0OiBibG9jay50ZXh0LFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZnJvbVN0YW5kYXJkSW1hZ2VCbG9jayhibG9jaykge1xuICAgICAgICBsZXQgZm9ybWF0O1xuICAgICAgICBpZiAoYmxvY2suc291cmNlX3R5cGUgPT09IFwidXJsXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBwYXJzZUJhc2U2NERhdGFVcmwoe1xuICAgICAgICAgICAgICAgIGRhdGFVcmw6IGJsb2NrLnVybCxcbiAgICAgICAgICAgICAgICBhc1R5cGVkQXJyYXk6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkTWltZVR5cGUgPSBwYXJzZU1pbWVUeXBlKHBhcnNlZERhdGEubWltZV90eXBlKTtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBwYXJzZWRNaW1lVHlwZS50eXBlO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlczogcGFyc2VkRGF0YS5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT25seSBiYXNlNjQgZGF0YSBVUkxzIGFyZSBzdXBwb3J0ZWQgZm9yIGltYWdlIGJsb2NrcyB3aXRoIHNvdXJjZSB0eXBlICd1cmwnIHdpdGggQ2hhdEJlZHJvY2tDb252ZXJzZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYmxvY2suc291cmNlX3R5cGUgPT09IFwiYmFzZTY0XCIpIHtcbiAgICAgICAgICAgIGlmIChibG9jay5taW1lX3R5cGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRNaW1lVHlwZSA9IHBhcnNlTWltZVR5cGUoYmxvY2subWltZV90eXBlKTtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBwYXJzZWRNaW1lVHlwZS5zdWJ0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvcm1hdCAmJiAhW1wiZ2lmXCIsIFwianBlZ1wiLCBcInBuZ1wiLCBcIndlYnBcIl0uaW5jbHVkZXMoZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgaW1hZ2UgbWltZSB0eXBlOiBcIiR7YmxvY2subWltZV90eXBlfVwiIENoYXRCZWRyb2NrQ29udmVyc2Ugb25seSBzdXBwb3J0cyBcImltYWdlL2dpZlwiLCBcImltYWdlL2pwZWdcIiwgXCJpbWFnZS9wbmdcIiwgYW5kIFwiaW1hZ2Uvd2VicFwiIGZvcm1hdHMuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlczogVWludDhBcnJheS5mcm9tKGF0b2IoYmxvY2suZGF0YSksIChjKSA9PiBjLmNoYXJDb2RlQXQoMCkpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJsb2NrLnNvdXJjZV90eXBlID09PSBcImlkXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkltYWdlIHNvdXJjZSB0eXBlICdpZCcgbm90IHN1cHBvcnRlZCB3aXRoIENoYXRCZWRyb2NrQ29udmVyc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBpbWFnZSBzb3VyY2UgdHlwZTogXCIke2Jsb2NrLnNvdXJjZV90eXBlfVwiIHdpdGggQ2hhdEJlZHJvY2tDb252ZXJzZS5gKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZnJvbVN0YW5kYXJkRmlsZUJsb2NrKGJsb2NrKSB7XG4gICAgICAgIGNvbnN0IG1pbWVUeXBlVG9Eb2N1bWVudEZvcm1hdCA9IHtcbiAgICAgICAgICAgIFwidGV4dC9jc3ZcIjogXCJjc3ZcIixcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vbXN3b3JkXCI6IFwiZG9jXCIsXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50XCI6IFwiZG9jeFwiLFxuICAgICAgICAgICAgXCJ0ZXh0L2h0bWxcIjogXCJodG1sXCIsXG4gICAgICAgICAgICBcInRleHQvbWFya2Rvd25cIjogXCJtZFwiLFxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9wZGZcIjogXCJwZGZcIixcbiAgICAgICAgICAgIFwidGV4dC9wbGFpblwiOiBcInR4dFwiLFxuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWxcIjogXCJ4bHNcIixcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXRcIjogXCJ4bHN4XCIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG5hbWUgPSAoYmxvY2subWV0YWRhdGE/Lm5hbWUgPz9cbiAgICAgICAgICAgIGJsb2NrLm1ldGFkYXRhPy5maWxlbmFtZSA/P1xuICAgICAgICAgICAgYmxvY2subWV0YWRhdGE/LnRpdGxlKTtcbiAgICAgICAgaWYgKGJsb2NrLnNvdXJjZV90eXBlID09PSBcInRleHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudDoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwidHh0XCIsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXM6IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShibG9jay50ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmxvY2suc291cmNlX3R5cGUgPT09IFwidXJsXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBwYXJzZUJhc2U2NERhdGFVcmwoe1xuICAgICAgICAgICAgICAgIGRhdGFVcmw6IGJsb2NrLnVybCxcbiAgICAgICAgICAgICAgICBhc1R5cGVkQXJyYXk6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkTWltZVR5cGUgPSBwYXJzZU1pbWVUeXBlKHBhcnNlZERhdGEubWltZV90eXBlID8/IGJsb2NrLm1pbWVfdHlwZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWltZVR5cGUgPSBgJHtwYXJzZWRNaW1lVHlwZS50eXBlfS8ke3BhcnNlZE1pbWVUeXBlLnN1YnR5cGV9YDtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXQgPSBtaW1lVHlwZVRvRG9jdW1lbnRGb3JtYXRbbWltZVR5cGVdO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXM6IHBhcnNlZERhdGEuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9ubHkgYmFzZTY0IGRhdGEgVVJMcyBhcmUgc3VwcG9ydGVkIGZvciBmaWxlIGJsb2NrcyB3aXRoIHNvdXJjZSB0eXBlICd1cmwnIHdpdGggQ2hhdEJlZHJvY2tDb252ZXJzZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJsb2NrLnNvdXJjZV90eXBlID09PSBcImJhc2U2NFwiKSB7XG4gICAgICAgICAgICBsZXQgZm9ybWF0O1xuICAgICAgICAgICAgaWYgKGJsb2NrLm1pbWVfdHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZE1pbWVUeXBlID0gcGFyc2VNaW1lVHlwZShibG9jay5taW1lX3R5cGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbWVUeXBlID0gYCR7cGFyc2VkTWltZVR5cGUudHlwZX0vJHtwYXJzZWRNaW1lVHlwZS5zdWJ0eXBlfWA7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbWltZVR5cGVUb0RvY3VtZW50Rm9ybWF0W21pbWVUeXBlXTtcbiAgICAgICAgICAgICAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBmaWxlIG1pbWUgdHlwZTogXCIke2Jsb2NrLm1pbWVfdHlwZX1cIiBDaGF0QmVkcm9ja0NvbnZlcnNlIG9ubHkgc3VwcG9ydHMgJHtPYmplY3Qua2V5cyhtaW1lVHlwZVRvRG9jdW1lbnRGb3JtYXQpLmpvaW4oXCIsIFwiKX0gZm9ybWF0cy5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlczogVWludDhBcnJheS5mcm9tKGF0b2IoYmxvY2suZGF0YSksIChjKSA9PiBjLmNoYXJDb2RlQXQoMCkpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJpZFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaWxlIHNvdXJjZSB0eXBlICdpZCcgbm90IHN1cHBvcnRlZCB3aXRoIENoYXRCZWRyb2NrQ29udmVyc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgZmlsZSBzb3VyY2UgdHlwZTogXCIke2Jsb2NrLnNvdXJjZV90eXBlfVwiIHdpdGggQ2hhdEJlZHJvY2tDb252ZXJzZS5gKTtcbiAgICB9LFxufTtcbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0SW1hZ2VJbmZvKGJhc2U2NCkge1xuICAgIC8vIEV4dHJhY3QgdGhlIGZvcm1hdCBmcm9tIHRoZSBiYXNlNjQgc3RyaW5nXG4gICAgY29uc3QgZm9ybWF0TWF0Y2ggPSBiYXNlNjQubWF0Y2goL15kYXRhOmltYWdlXFwvKFxcdyspO2Jhc2U2NCwvKTtcbiAgICBsZXQgZm9ybWF0O1xuICAgIGlmIChmb3JtYXRNYXRjaCkge1xuICAgICAgICBjb25zdCBleHRyYWN0ZWRGb3JtYXQgPSBmb3JtYXRNYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoW1wiZ2lmXCIsIFwianBlZ1wiLCBcInBuZ1wiLCBcIndlYnBcIl0uaW5jbHVkZXMoZXh0cmFjdGVkRm9ybWF0KSkge1xuICAgICAgICAgICAgZm9ybWF0ID0gZXh0cmFjdGVkRm9ybWF0O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFJlbW92ZSB0aGUgZGF0YSBVUkwgcHJlZml4IGlmIHByZXNlbnRcbiAgICBjb25zdCBiYXNlNjREYXRhID0gYmFzZTY0LnJlcGxhY2UoL15kYXRhOmltYWdlXFwvXFx3KztiYXNlNjQsLywgXCJcIik7XG4gICAgLy8gQ29udmVydCBiYXNlNjQgdG8gVWludDhBcnJheVxuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IGF0b2IoYmFzZTY0RGF0YSk7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShiaW5hcnlTdHJpbmcubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeVN0cmluZy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgZm9ybWF0LFxuICAgICAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgICAgICAgYnl0ZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBjb252ZXJ0TGFuZ0NoYWluQ29udGVudEJsb2NrVG9Db252ZXJzZUNvbnRlbnRCbG9jayh7IGJsb2NrLCBvblVua25vd24gPSBcInRocm93XCIsIH0pIHtcbiAgICBpZiAodHlwZW9mIGJsb2NrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB7IHRleHQ6IGJsb2NrIH07XG4gICAgfVxuICAgIGlmIChpc0RhdGFDb250ZW50QmxvY2soYmxvY2spKSB7XG4gICAgICAgIHJldHVybiBjb252ZXJ0VG9Qcm92aWRlckNvbnRlbnRCbG9jayhibG9jaywgc3RhbmRhcmRDb250ZW50QmxvY2tDb252ZXJ0ZXIpO1xuICAgIH1cbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgcmV0dXJuIHsgdGV4dDogYmxvY2sudGV4dCB9O1xuICAgIH1cbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJpbWFnZV91cmxcIikge1xuICAgICAgICByZXR1cm4gZXh0cmFjdEltYWdlSW5mbyh0eXBlb2YgYmxvY2suaW1hZ2VfdXJsID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGJsb2NrLmltYWdlX3VybFxuICAgICAgICAgICAgOiBibG9jay5pbWFnZV91cmwudXJsKTtcbiAgICB9XG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwiZG9jdW1lbnRcIiAmJiBibG9jay5kb2N1bWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkb2N1bWVudDogYmxvY2suZG9jdW1lbnQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIgJiYgYmxvY2suaW1hZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW1hZ2U6IGJsb2NrLmltYWdlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNEZWZhdWx0Q2FjaGVQb2ludChibG9jaykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhY2hlUG9pbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChvblVua25vd24gPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGNvbnRlbnQgYmxvY2sgdHlwZTogJHtibG9jay50eXBlfWApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGJsb2NrO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbnZlcnRTeXN0ZW1NZXNzYWdlVG9Db252ZXJzZU1lc3NhZ2UobXNnKSB7XG4gICAgaWYgKHR5cGVvZiBtc2cuY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gW3sgdGV4dDogbXNnLmNvbnRlbnQgfV07XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobXNnLmNvbnRlbnQpICYmIG1zZy5jb250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY29udGVudEJsb2NrcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGJsb2NrIG9mIG1zZy5jb250ZW50KSB7XG4gICAgICAgICAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgdHlwZW9mIGJsb2NrLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50QmxvY2tzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBibG9jay50ZXh0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNEZWZhdWx0Q2FjaGVQb2ludChibG9jaykpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50QmxvY2tzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVBvaW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRlZmF1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAobXNnLmNvbnRlbnQubGVuZ3RoID09PSBjb250ZW50QmxvY2tzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50QmxvY2tzO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTeXN0ZW0gbWVzc2FnZSBjb250ZW50IG11c3QgYmUgZWl0aGVyIGEgc3RyaW5nLCBvciBhbiBhcnJheSBvZiB0ZXh0IGJsb2Nrcywgb3B0aW9uYWxseSBpbmNsdWRpbmcgYSBjYWNoZSBwb2ludC5cIik7XG59XG5mdW5jdGlvbiBjb252ZXJ0QUlNZXNzYWdlVG9Db252ZXJzZU1lc3NhZ2UobXNnKSB7XG4gICAgY29uc3QgYXNzaXN0YW50TXNnID0ge1xuICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICBjb250ZW50OiBbXSxcbiAgICB9O1xuICAgIGlmICh0eXBlb2YgbXNnLmNvbnRlbnQgPT09IFwic3RyaW5nXCIgJiYgbXNnLmNvbnRlbnQgIT09IFwiXCIpIHtcbiAgICAgICAgYXNzaXN0YW50TXNnLmNvbnRlbnQ/LnB1c2goe1xuICAgICAgICAgICAgdGV4dDogbXNnLmNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1zZy5jb250ZW50KSkge1xuICAgICAgICBjb25zdCBjb25jYXRlbmF0ZWRCbG9ja3MgPSBjb25jYXRlbmF0ZUxhbmdjaGFpblJlYXNvbmluZ0Jsb2Nrcyhtc2cuY29udGVudCk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRCbG9ja3MgPSBbXTtcbiAgICAgICAgY29uY2F0ZW5hdGVkQmxvY2tzLmZvckVhY2goKGJsb2NrKSA9PiB7XG4gICAgICAgICAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgYmxvY2sudGV4dCAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIC8vIE1lcmdlIHdoaXRlc3BhY2UvbmV3bGluZXMgd2l0aCBwcmV2aW91cyB0ZXh0IGJsb2NrcyB0byBhdm9pZCB2YWxpZGF0aW9uIGVycm9ycy5cbiAgICAgICAgICAgICAgICBjb25zdCBjbGVhbmVkVGV4dCA9IGJsb2NrLnRleHQ/LnJlcGxhY2UoL1xcbi9nLCBcIlwiKS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNsZWFuZWRUZXh0ID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50QmxvY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFRleHRDb250ZW50ID0gYCR7Y29udGVudEJsb2Nrc1tjb250ZW50QmxvY2tzLmxlbmd0aCAtIDFdLnRleHR9JHtibG9jay50ZXh0fWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50QmxvY2tzW2NvbnRlbnRCbG9ja3MubGVuZ3RoIC0gMV0udGV4dCA9IG1lcmdlZFRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50QmxvY2tzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogYmxvY2sudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYmxvY2sudHlwZSA9PT0gXCJyZWFzb25pbmdfY29udGVudFwiKSB7XG4gICAgICAgICAgICAgICAgY29udGVudEJsb2Nrcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nQ29udGVudDogbGFuZ2NoYWluUmVhc29uaW5nQmxvY2tUb0JlZHJvY2tSZWFzb25pbmdCbG9jayhibG9jayksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0RlZmF1bHRDYWNoZVBvaW50KGJsb2NrKSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRCbG9ja3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlUG9pbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmxvY2tWYWx1ZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoYmxvY2spLmZpbHRlcigoW2tleV0pID0+IGtleSAhPT0gXCJ0eXBlXCIpKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGNvbnRlbnQgYmxvY2sgdHlwZTogJHtibG9jay50eXBlfSB3aXRoIGNvbnRlbnQgb2YgJHtKU09OLnN0cmluZ2lmeShibG9ja1ZhbHVlcywgbnVsbCwgMil9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhc3Npc3RhbnRNc2cuY29udGVudCA9IFtcbiAgICAgICAgICAgIC4uLihhc3Npc3RhbnRNc2cuY29udGVudCA/IGFzc2lzdGFudE1zZy5jb250ZW50IDogW10pLFxuICAgICAgICAgICAgLi4uY29udGVudEJsb2NrcyxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgLy8gSW1wb3J0YW50OiB0aGlzIG11c3QgYmUgcGxhY2VkIGFmdGVyIGFueSByZWFzb25pbmcgY29udGVudCBibG9ja3MsIGVsc2UgY2xhdWRlIG1vZGVscyB3aWxsIHJldHVybiBhbiBlcnJvci5cbiAgICBpZiAobXNnLnRvb2xfY2FsbHMgJiYgbXNnLnRvb2xfY2FsbHMubGVuZ3RoKSB7XG4gICAgICAgIGFzc2lzdGFudE1zZy5jb250ZW50ID0gW1xuICAgICAgICAgICAgLi4uKGFzc2lzdGFudE1zZy5jb250ZW50ID8gYXNzaXN0YW50TXNnLmNvbnRlbnQgOiBbXSksXG4gICAgICAgICAgICAuLi5tc2cudG9vbF9jYWxscy5tYXAoKHRjKSA9PiAoe1xuICAgICAgICAgICAgICAgIHRvb2xVc2U6IHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbFVzZUlkOiB0Yy5pZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHRjLmFyZ3MsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgcmV0dXJuIGFzc2lzdGFudE1zZztcbn1cbmZ1bmN0aW9uIGNvbnZlcnRIdW1hbk1lc3NhZ2VUb0NvbnZlcnNlTWVzc2FnZShtc2cpIHtcbiAgICBpZiAobXNnLmNvbnRlbnQgPT09IFwiXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1lc3NhZ2UgY29udGVudDogZW1wdHkgc3RyaW5nLiAnJHttc2cuZ2V0VHlwZSgpfScgbXVzdCBjb250YWluIG5vbi1lbXB0eSBjb250ZW50LmApO1xuICAgIH1cbiAgICBjb25zdCBjb250ZW50ID0gQXJyYXkuaXNBcnJheShtc2cuY29udGVudClcbiAgICAgICAgPyBtc2cuY29udGVudC5tYXAoKGMpID0+IGNvbnZlcnRMYW5nQ2hhaW5Db250ZW50QmxvY2tUb0NvbnZlcnNlQ29udGVudEJsb2NrKHtcbiAgICAgICAgICAgIGJsb2NrOiBjLFxuICAgICAgICAgICAgb25Vbmtub3duOiBcInRocm93XCIsXG4gICAgICAgIH0pKVxuICAgICAgICA6IFtcbiAgICAgICAgICAgIGNvbnZlcnRMYW5nQ2hhaW5Db250ZW50QmxvY2tUb0NvbnZlcnNlQ29udGVudEJsb2NrKHtcbiAgICAgICAgICAgICAgICBibG9jazogbXNnLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgb25Vbmtub3duOiBcInRocm93XCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgXTtcbiAgICByZXR1cm4ge1xuICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgY29udGVudCxcbiAgICB9O1xufVxuZnVuY3Rpb24gY29udmVydFRvb2xNZXNzYWdlVG9Db252ZXJzZU1lc3NhZ2UobXNnKSB7XG4gICAgY29uc3QgY2FzdE1zZyA9IG1zZztcbiAgICBpZiAodHlwZW9mIGNhc3RNc2cuY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy8gVG9vbCB1c2UgbWVzc2FnZXMgYXJlIGFsd2F5cyBmcm9tIHRoZSB1c2VyXG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xSZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xVc2VJZDogY2FzdE1zZy50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjYXN0TXNnLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy8gVG9vbCB1c2UgbWVzc2FnZXMgYXJlIGFsd2F5cyBmcm9tIHRoZSB1c2VyXG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xSZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xVc2VJZDogY2FzdE1zZy50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBtc2cuY29udGVudC5tYXAoKGMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJ0ZWQgPSBjb252ZXJ0TGFuZ0NoYWluQ29udGVudEJsb2NrVG9Db252ZXJzZUNvbnRlbnRCbG9jayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrOiBjLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVua25vd246IFwicmV0dXJuVW5tb2RpZmllZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb252ZXJ0ZWQgIT09IGMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsganNvbjogYyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb0NvbnZlcnNlTWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICBjb25zdCBjb252ZXJzZVN5c3RlbSA9IG1lc3NhZ2VzXG4gICAgICAgIC5maWx0ZXIoKG1zZykgPT4gbXNnLmdldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIilcbiAgICAgICAgLmZsYXRNYXAoKG1zZykgPT4gY29udmVydFN5c3RlbU1lc3NhZ2VUb0NvbnZlcnNlTWVzc2FnZShtc2cpKTtcbiAgICBjb25zdCBjb252ZXJzZU1lc3NhZ2VzID0gbWVzc2FnZXNcbiAgICAgICAgLmZpbHRlcigobXNnKSA9PiBtc2cuZ2V0VHlwZSgpICE9PSBcInN5c3RlbVwiKVxuICAgICAgICAubWFwKChtc2cpID0+IHtcbiAgICAgICAgaWYgKG1zZy5nZXRUeXBlKCkgPT09IFwiYWlcIikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRBSU1lc3NhZ2VUb0NvbnZlcnNlTWVzc2FnZShtc2cpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1zZy5nZXRUeXBlKCkgPT09IFwiaHVtYW5cIiB8fCBtc2cuZ2V0VHlwZSgpID09PSBcImdlbmVyaWNcIikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRIdW1hbk1lc3NhZ2VUb0NvbnZlcnNlTWVzc2FnZShtc2cpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1zZy5nZXRUeXBlKCkgPT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udmVydFRvb2xNZXNzYWdlVG9Db252ZXJzZU1lc3NhZ2UobXNnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgbWVzc2FnZSB0eXBlOiAke21zZy5nZXRUeXBlKCl9YCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBDb21iaW5lIGNvbnNlY3V0aXZlIHVzZXIgdG9vbCByZXN1bHQgbWVzc2FnZXMgaW50byBhIHNpbmdsZSBtZXNzYWdlXG4gICAgY29uc3QgY29tYmluZWRDb252ZXJzZU1lc3NhZ2VzID0gY29udmVyc2VNZXNzYWdlcy5yZWR1Y2UoKGFjYywgY3VycikgPT4ge1xuICAgICAgICBjb25zdCBsYXN0TWVzc2FnZSA9IGFjY1thY2MubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0TWVzc2FnZSAmJlxuICAgICAgICAgICAgbGFzdE1lc3NhZ2Uucm9sZSA9PT0gXCJ1c2VyXCIgJiZcbiAgICAgICAgICAgIGxhc3RNZXNzYWdlLmNvbnRlbnQ/LnNvbWUoKGMpID0+IFwidG9vbFJlc3VsdFwiIGluIGMpICYmXG4gICAgICAgICAgICBjdXJyLnJvbGUgPT09IFwidXNlclwiICYmXG4gICAgICAgICAgICBjdXJyLmNvbnRlbnQ/LnNvbWUoKGMpID0+IFwidG9vbFJlc3VsdFwiIGluIGMpKSB7XG4gICAgICAgICAgICBsYXN0TWVzc2FnZS5jb250ZW50ID0gbGFzdE1lc3NhZ2UuY29udGVudC5jb25jYXQoY3Vyci5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFjYy5wdXNoKGN1cnIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiB7IGNvbnZlcnNlTWVzc2FnZXM6IGNvbWJpbmVkQ29udmVyc2VNZXNzYWdlcywgY29udmVyc2VTeXN0ZW0gfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0JlZHJvY2tUb29sKHRvb2wpIHtcbiAgICBpZiAodHlwZW9mIHRvb2wgPT09IFwib2JqZWN0XCIgJiYgdG9vbCAmJiBcInRvb2xTcGVjXCIgaW4gdG9vbCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb0NvbnZlcnNlVG9vbHModG9vbHMpIHtcbiAgICBpZiAodG9vbHMuZXZlcnkoaXNPcGVuQUlUb29sKSkge1xuICAgICAgICByZXR1cm4gdG9vbHMubWFwKCh0b29sKSA9PiAoe1xuICAgICAgICAgICAgdG9vbFNwZWM6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZnVuY3Rpb24uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgaW5wdXRTY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgICAganNvbjogdG9vbC5mdW5jdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRvb2xzLmV2ZXJ5KGlzTGFuZ0NoYWluVG9vbCkpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xzLm1hcCgodG9vbCkgPT4gKHtcbiAgICAgICAgICAgIHRvb2xTcGVjOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGlucHV0U2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICAgIGpzb246IChpc0ludGVyb3Bab2RTY2hlbWEodG9vbC5zY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRvSnNvblNjaGVtYSh0b29sLnNjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdG9vbC5zY2hlbWEpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRvb2xzLmV2ZXJ5KGlzQmVkcm9ja1Rvb2wpKSB7XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0b29scyBwYXNzZWQuIE11c3QgYmUgYW4gYXJyYXkgb2YgU3RydWN0dXJlZFRvb2xJbnRlcmZhY2UsIFRvb2xEZWZpbml0aW9uLCBvciBCZWRyb2NrVG9vbC5cIik7XG59XG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvQmVkcm9ja1Rvb2xDaG9pY2UodG9vbENob2ljZSwgdG9vbHMsIGZpZWxkcykge1xuICAgIGNvbnN0IHN1cHBvcnRzVG9vbENob2ljZVZhbHVlcyA9IGZpZWxkcy5zdXBwb3J0c1Rvb2xDaG9pY2VWYWx1ZXMgPz8gW107XG4gICAgbGV0IGJlZHJvY2tUb29sQ2hvaWNlO1xuICAgIGlmICh0eXBlb2YgdG9vbENob2ljZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBzd2l0Y2ggKHRvb2xDaG9pY2UpIHtcbiAgICAgICAgICAgIGNhc2UgXCJhbnlcIjpcbiAgICAgICAgICAgICAgICBiZWRyb2NrVG9vbENob2ljZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgYW55OiB7fSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImF1dG9cIjpcbiAgICAgICAgICAgICAgICBiZWRyb2NrVG9vbENob2ljZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgYXV0bzoge30sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZFRvb2wgPSB0b29scy5maW5kKCh0b29sKSA9PiB0b29sLnRvb2xTcGVjPy5uYW1lID09PSB0b29sQ2hvaWNlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kVG9vbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRvb2wgd2l0aCBuYW1lICR7dG9vbENob2ljZX0gbm90IGZvdW5kIGluIHRvb2xzIGxpc3QuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJlZHJvY2tUb29sQ2hvaWNlID0ge1xuICAgICAgICAgICAgICAgICAgICB0b29sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2hvaWNlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGJlZHJvY2tUb29sQ2hvaWNlID0gdG9vbENob2ljZTtcbiAgICB9XG4gICAgY29uc3QgdG9vbENob2ljZVR5cGUgPSBPYmplY3Qua2V5cyhiZWRyb2NrVG9vbENob2ljZSlbMF07XG4gICAgaWYgKCFzdXBwb3J0c1Rvb2xDaG9pY2VWYWx1ZXMuaW5jbHVkZXModG9vbENob2ljZVR5cGUpKSB7XG4gICAgICAgIGxldCBzdXBwb3J0ZWRUeHQgPSBcIlwiO1xuICAgICAgICBpZiAoc3VwcG9ydHNUb29sQ2hvaWNlVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3VwcG9ydGVkVHh0ID1cbiAgICAgICAgICAgICAgICBgTW9kZWwgJHtmaWVsZHMubW9kZWx9IGRvZXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ICd0b29sX2Nob2ljZScgYCArXG4gICAgICAgICAgICAgICAgICAgIGBvZiB0eXBlICR7dG9vbENob2ljZVR5cGV9LiBUaGUgZm9sbG93aW5nICd0b29sX2Nob2ljZScgdHlwZXMgYCArXG4gICAgICAgICAgICAgICAgICAgIGBhcmUgc3VwcG9ydGVkOiAke3N1cHBvcnRzVG9vbENob2ljZVZhbHVlcy5qb2luKFwiLCBcIil9LmA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWRUeHQgPSBgTW9kZWwgJHtmaWVsZHMubW9kZWx9IGRvZXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ICd0b29sX2Nob2ljZScuYDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7c3VwcG9ydGVkVHh0fSBQbGVhc2Ugc2VlYCArXG4gICAgICAgICAgICBcImh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9iZWRyb2NrL2xhdGVzdC9BUElSZWZlcmVuY2UvQVBJX3J1bnRpbWVfVG9vbENob2ljZS5odG1sXCIgK1xuICAgICAgICAgICAgXCJmb3IgdGhlIGxhdGVzdCBkb2N1bWVudGF0aW9uIG9uIG1vZGVscyB0aGF0IHN1cHBvcnQgdG9vbCBjaG9pY2UuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gYmVkcm9ja1Rvb2xDaG9pY2U7XG59XG5leHBvcnQgZnVuY3Rpb24gY29udmVydENvbnZlcnNlTWVzc2FnZVRvTGFuZ0NoYWluTWVzc2FnZShtZXNzYWdlLCByZXNwb25zZU1ldGFkYXRhKSB7XG4gICAgaWYgKCFtZXNzYWdlLmNvbnRlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gbWVzc2FnZSBjb250ZW50IGZvdW5kIGluIHJlc3BvbnNlLlwiKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2Uucm9sZSAhPT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIG1lc3NhZ2Ugcm9sZSByZWNlaXZlZCBpbiBDaGF0QmVkcm9ja0NvbnZlcnNlIHJlc3BvbnNlOiAke21lc3NhZ2Uucm9sZX1gKTtcbiAgICB9XG4gICAgbGV0IHJlcXVlc3RJZDtcbiAgICBpZiAoXCIkbWV0YWRhdGFcIiBpbiByZXNwb25zZU1ldGFkYXRhICYmXG4gICAgICAgIHJlc3BvbnNlTWV0YWRhdGEuJG1ldGFkYXRhICYmXG4gICAgICAgIHR5cGVvZiByZXNwb25zZU1ldGFkYXRhLiRtZXRhZGF0YSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBcInJlcXVlc3RJZFwiIGluIHJlc3BvbnNlTWV0YWRhdGEuJG1ldGFkYXRhKSB7XG4gICAgICAgIHJlcXVlc3RJZCA9IHJlc3BvbnNlTWV0YWRhdGEuJG1ldGFkYXRhLnJlcXVlc3RJZDtcbiAgICB9XG4gICAgbGV0IHRva2VuVXNhZ2U7XG4gICAgaWYgKHJlc3BvbnNlTWV0YWRhdGEudXNhZ2UpIHtcbiAgICAgICAgY29uc3QgaW5wdXRfdG9rZW5zID0gcmVzcG9uc2VNZXRhZGF0YS51c2FnZS5pbnB1dFRva2VucyA/PyAwO1xuICAgICAgICBjb25zdCBvdXRwdXRfdG9rZW5zID0gcmVzcG9uc2VNZXRhZGF0YS51c2FnZS5vdXRwdXRUb2tlbnMgPz8gMDtcbiAgICAgICAgdG9rZW5Vc2FnZSA9IHtcbiAgICAgICAgICAgIGlucHV0X3Rva2VucyxcbiAgICAgICAgICAgIG91dHB1dF90b2tlbnMsXG4gICAgICAgICAgICB0b3RhbF90b2tlbnM6IHJlc3BvbnNlTWV0YWRhdGEudXNhZ2UudG90YWxUb2tlbnMgPz8gaW5wdXRfdG9rZW5zICsgb3V0cHV0X3Rva2VucyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuY29udGVudD8ubGVuZ3RoID09PSAxICYmXG4gICAgICAgIFwidGV4dFwiIGluIG1lc3NhZ2UuY29udGVudFswXSAmJlxuICAgICAgICB0eXBlb2YgbWVzc2FnZS5jb250ZW50WzBdLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2Uoe1xuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZS5jb250ZW50WzBdLnRleHQsXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogcmVzcG9uc2VNZXRhZGF0YSxcbiAgICAgICAgICAgIHVzYWdlX21ldGFkYXRhOiB0b2tlblVzYWdlLFxuICAgICAgICAgICAgaWQ6IHJlcXVlc3RJZCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB0b29sQ2FsbHMgPSBbXTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IFtdO1xuICAgICAgICBtZXNzYWdlLmNvbnRlbnQuZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICAgICAgaWYgKFwidG9vbFVzZVwiIGluIGMgJiZcbiAgICAgICAgICAgICAgICBjLnRvb2xVc2UgJiZcbiAgICAgICAgICAgICAgICBjLnRvb2xVc2UubmFtZSAmJlxuICAgICAgICAgICAgICAgIGMudG9vbFVzZS5pbnB1dCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBjLnRvb2xVc2UuaW5wdXQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBjLnRvb2xVc2UudG9vbFVzZUlkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjLnRvb2xVc2UubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogYy50b29sVXNlLmlucHV0LFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2xfY2FsbFwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoXCJ0ZXh0XCIgaW4gYyAmJiB0eXBlb2YgYy50ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IGMudGV4dCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKFwicmVhc29uaW5nQ29udGVudFwiIGluIGMpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnB1c2goYmVkcm9ja1JlYXNvbmluZ0Jsb2NrVG9MYW5nY2hhaW5SZWFzb25pbmdCbG9jayhjLnJlYXNvbmluZ0NvbnRlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaChjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQubGVuZ3RoID8gY29udGVudCA6IFwiXCIsXG4gICAgICAgICAgICB0b29sX2NhbGxzOiB0b29sQ2FsbHMubGVuZ3RoID8gdG9vbENhbGxzIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IHJlc3BvbnNlTWV0YWRhdGEsXG4gICAgICAgICAgICB1c2FnZV9tZXRhZGF0YTogdG9rZW5Vc2FnZSxcbiAgICAgICAgICAgIGlkOiByZXF1ZXN0SWQsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVDb252ZXJzZVN0cmVhbUNvbnRlbnRCbG9ja0RlbHRhKGNvbnRlbnRCbG9ja0RlbHRhKSB7XG4gICAgaWYgKCFjb250ZW50QmxvY2tEZWx0YS5kZWx0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBkZWx0YSBmb3VuZCBpbiBjb250ZW50IGJsb2NrLlwiKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjb250ZW50QmxvY2tEZWx0YS5kZWx0YS50ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgICAgICB0ZXh0OiBjb250ZW50QmxvY2tEZWx0YS5kZWx0YS50ZXh0LFxuICAgICAgICAgICAgbWVzc2FnZTogbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50QmxvY2tEZWx0YS5kZWx0YS50ZXh0LFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb250ZW50QmxvY2tEZWx0YS5kZWx0YS50b29sVXNlKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gY29udGVudEJsb2NrRGVsdGEuY29udGVudEJsb2NrSW5kZXg7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgbWVzc2FnZTogbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBcIlwiLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogY29udGVudEJsb2NrRGVsdGEuZGVsdGEudG9vbFVzZS5pbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxfY2h1bmtcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb250ZW50QmxvY2tEZWx0YS5kZWx0YS5yZWFzb25pbmdDb250ZW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgbWVzc2FnZTogbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgICAgIGJlZHJvY2tSZWFzb25pbmdEZWx0YVRvTGFuZ2NoYWluUGFydGlhbFJlYXNvbmluZ0Jsb2NrKGNvbnRlbnRCbG9ja0RlbHRhLmRlbHRhLnJlYXNvbmluZ0NvbnRlbnQpLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGNvbnRlbnQgYmxvY2sgdHlwZShzKTogJHtKU09OLnN0cmluZ2lmeShjb250ZW50QmxvY2tEZWx0YS5kZWx0YSwgbnVsbCwgMil9YCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUNvbnZlcnNlU3RyZWFtQ29udGVudEJsb2NrU3RhcnQoY29udGVudEJsb2NrU3RhcnQpIHtcbiAgICBjb25zdCBpbmRleCA9IGNvbnRlbnRCbG9ja1N0YXJ0LmNvbnRlbnRCbG9ja0luZGV4O1xuICAgIGlmIChjb250ZW50QmxvY2tTdGFydC5zdGFydD8udG9vbFVzZSkge1xuICAgICAgICByZXR1cm4gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICAgICAgY29udGVudDogXCJcIixcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbnRlbnRCbG9ja1N0YXJ0LnN0YXJ0LnRvb2xVc2UubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb250ZW50QmxvY2tTdGFydC5zdGFydC50b29sVXNlLnRvb2xVc2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxfY2h1bmtcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBjb250ZW50IGJsb2NrIHN0YXJ0IGV2ZW50LlwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVDb252ZXJzZVN0cmVhbU1ldGFkYXRhKG1ldGFkYXRhLCBleHRyYSkge1xuICAgIGNvbnN0IGlucHV0VG9rZW5zID0gbWV0YWRhdGEudXNhZ2U/LmlucHV0VG9rZW5zID8/IDA7XG4gICAgY29uc3Qgb3V0cHV0VG9rZW5zID0gbWV0YWRhdGEudXNhZ2U/Lm91dHB1dFRva2VucyA/PyAwO1xuICAgIGNvbnN0IHVzYWdlX21ldGFkYXRhID0ge1xuICAgICAgICBpbnB1dF90b2tlbnM6IGlucHV0VG9rZW5zLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiBvdXRwdXRUb2tlbnMsXG4gICAgICAgIHRvdGFsX3Rva2VuczogbWV0YWRhdGEudXNhZ2U/LnRvdGFsVG9rZW5zID8/IGlucHV0VG9rZW5zICsgb3V0cHV0VG9rZW5zLFxuICAgIH07XG4gICAgcmV0dXJuIG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgbWVzc2FnZTogbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICAgICAgICB1c2FnZV9tZXRhZGF0YTogZXh0cmEuc3RyZWFtVXNhZ2UgPyB1c2FnZV9tZXRhZGF0YSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBzYW1lIGtleSBhcyByZXR1cm5lZCBmcm9tIHRoZSBDb252ZXJzZSBBUElcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJlZHJvY2tSZWFzb25pbmdEZWx0YVRvTGFuZ2NoYWluUGFydGlhbFJlYXNvbmluZ0Jsb2NrKHJlYXNvbmluZ0NvbnRlbnQpIHtcbiAgICBjb25zdCB7IHRleHQsIHJlZGFjdGVkQ29udGVudCwgc2lnbmF0dXJlIH0gPSByZWFzb25pbmdDb250ZW50O1xuICAgIGlmICh0eXBlb2YgdGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdfY29udGVudFwiLFxuICAgICAgICAgICAgcmVhc29uaW5nVGV4dDogeyB0ZXh0IH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChzaWduYXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nX2NvbnRlbnRcIixcbiAgICAgICAgICAgIHJlYXNvbmluZ1RleHQ6IHsgc2lnbmF0dXJlIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWRhY3RlZENvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nX2NvbnRlbnRcIixcbiAgICAgICAgICAgIHJlZGFjdGVkQ29udGVudDogQnVmZmVyLmZyb20ocmVkYWN0ZWRDb250ZW50KS50b1N0cmluZyhcImJhc2U2NFwiKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByZWFzb25pbmcgY29udGVudFwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBiZWRyb2NrUmVhc29uaW5nQmxvY2tUb0xhbmdjaGFpblJlYXNvbmluZ0Jsb2NrKHJlYXNvbmluZ0NvbnRlbnQpIHtcbiAgICBjb25zdCB7IHJlYXNvbmluZ1RleHQsIHJlZGFjdGVkQ29udGVudCB9ID0gcmVhc29uaW5nQ29udGVudDtcbiAgICBpZiAocmVhc29uaW5nVGV4dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdfY29udGVudFwiLFxuICAgICAgICAgICAgcmVhc29uaW5nVGV4dDogcmVhc29uaW5nVGV4dCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZGFjdGVkQ29udGVudCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdfY29udGVudFwiLFxuICAgICAgICAgICAgcmVkYWN0ZWRDb250ZW50OiBCdWZmZXIuZnJvbShyZWRhY3RlZENvbnRlbnQpLnRvU3RyaW5nKFwiYmFzZTY0XCIpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJlYXNvbmluZyBjb250ZW50XCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxhbmdjaGFpblJlYXNvbmluZ0Jsb2NrVG9CZWRyb2NrUmVhc29uaW5nQmxvY2soY29udGVudCkge1xuICAgIGlmIChjb250ZW50LnR5cGUgIT09IFwicmVhc29uaW5nX2NvbnRlbnRcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJlYXNvbmluZyBjb250ZW50XCIpO1xuICAgIH1cbiAgICBpZiAoXCJyZWFzb25pbmdUZXh0XCIgaW4gY29udGVudCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVhc29uaW5nVGV4dDogY29udGVudC5yZWFzb25pbmdUZXh0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoXCJyZWRhY3RlZENvbnRlbnRcIiBpbiBjb250ZW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWRhY3RlZENvbnRlbnQ6IEJ1ZmZlci5mcm9tKGNvbnRlbnQucmVkYWN0ZWRDb250ZW50LCBcImJhc2U2NFwiKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByZWFzb25pbmcgY29udGVudFwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXRlbmF0ZUxhbmdjaGFpblJlYXNvbmluZ0Jsb2Nrcyhjb250ZW50KSB7XG4gICAgY29uc3QgY29uY2F0ZW5hdGVkQmxvY2tzID0gW107XG4gICAgbGV0IGNvbmNhdGVuYXRlZEJsb2NrID0ge307XG4gICAgZm9yIChjb25zdCBibG9jayBvZiBjb250ZW50KSB7XG4gICAgICAgIGlmIChibG9jay50eXBlICE9PSBcInJlYXNvbmluZ19jb250ZW50XCIpIHtcbiAgICAgICAgICAgIC8vIGlmIGl0J3Mgc29tZSBvdGhlciBibG9jayB0eXBlLCBlbmQgdGhlIGN1cnJlbnQgYmxvY2ssIGJ1dCBrZWVwIGl0IHNvIHdlIHByZXNlcnZlIG9yZGVyXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY29uY2F0ZW5hdGVkQmxvY2spLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25jYXRlbmF0ZWRCbG9ja3MucHVzaChjb25jYXRlbmF0ZWRCbG9jayk7XG4gICAgICAgICAgICAgICAgY29uY2F0ZW5hdGVkQmxvY2sgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmNhdGVuYXRlZEJsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIG5vbi1yZWRhY3RlZCBibG9ja1xuICAgICAgICBpZiAoXCJyZWFzb25pbmdUZXh0XCIgaW4gYmxvY2sgJiYgdHlwZW9mIGJsb2NrLnJlYXNvbmluZ1RleHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGlmIChcInJlZGFjdGVkQ29udGVudFwiIGluIGNvbmNhdGVuYXRlZEJsb2NrKSB7XG4gICAgICAgICAgICAgICAgLy8gbmV3IHR5cGUgb2YgYmxvY2ssIHNvIGVuZCB0aGUgcHJldmlvdXMgb25lXG4gICAgICAgICAgICAgICAgY29uY2F0ZW5hdGVkQmxvY2tzLnB1c2goY29uY2F0ZW5hdGVkQmxvY2spO1xuICAgICAgICAgICAgICAgIGNvbmNhdGVuYXRlZEJsb2NrID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHRleHQsIHNpZ25hdHVyZSB9ID0gYmxvY2sucmVhc29uaW5nVGV4dDtcbiAgICAgICAgICAgIGNvbnN0IHsgdGV4dDogcHJldlRleHQsIHNpZ25hdHVyZTogcHJldlNpZ25hdHVyZSB9ID0gKFwicmVhc29uaW5nVGV4dFwiIGluIGNvbmNhdGVuYXRlZEJsb2NrXG4gICAgICAgICAgICAgICAgPyBjb25jYXRlbmF0ZWRCbG9jay5yZWFzb25pbmdUZXh0XG4gICAgICAgICAgICAgICAgOiB7fSk7XG4gICAgICAgICAgICBjb25jYXRlbmF0ZWRCbG9jayA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZ19jb250ZW50XCIsXG4gICAgICAgICAgICAgICAgcmVhc29uaW5nVGV4dDoge1xuICAgICAgICAgICAgICAgICAgICAuLi4oY29uY2F0ZW5hdGVkQmxvY2tcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZWFzb25pbmdUZXh0ID8/IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uKHByZXZUZXh0ICE9PSB1bmRlZmluZWQgfHwgdGV4dCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHsgdGV4dDogKHByZXZUZXh0ID8/IFwiXCIpICsgKHRleHQgPz8gXCJcIikgfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIC4uLihwcmV2U2lnbmF0dXJlICE9PSB1bmRlZmluZWQgfHwgc2lnbmF0dXJlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8geyBzaWduYXR1cmU6IChwcmV2U2lnbmF0dXJlID8/IFwiXCIpICsgKHNpZ25hdHVyZSA/PyBcIlwiKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIGlmIGEgcGFydGlhbCBibG9jayBjaHVuayBoYXMgYSBzaWduYXR1cmUsIHRoZSBuZXh0IG9uZSB3aWxsIGJlZ2luIGEgbmV3IHJlYXNvbmluZyBibG9jay5cbiAgICAgICAgICAgIC8vIGZ1bGwgYmxvY2tzIGFsd2F5cyBoYXZlIHNpZ25hdHVyZXMsIHNvIHdlIHN0YXJ0IG9uZSBub3csIGFueXdheVxuICAgICAgICAgICAgaWYgKFwic2lnbmF0dXJlXCIgaW4gYmxvY2sucmVhc29uaW5nVGV4dCkge1xuICAgICAgICAgICAgICAgIGNvbmNhdGVuYXRlZEJsb2Nrcy5wdXNoKGNvbmNhdGVuYXRlZEJsb2NrKTtcbiAgICAgICAgICAgICAgICBjb25jYXRlbmF0ZWRCbG9jayA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcInJlZGFjdGVkQ29udGVudFwiIGluIGJsb2NrKSB7XG4gICAgICAgICAgICBpZiAoXCJyZWFzb25pbmdUZXh0XCIgaW4gY29uY2F0ZW5hdGVkQmxvY2spIHtcbiAgICAgICAgICAgICAgICAvLyBOZXcgdHlwZSBvZiBibG9jaywgc28gZW5kIHRoZSBwcmV2aW91cyBvbmUuIFdlIHNob3VsZCd0IHJlYWxseSBoaXRcbiAgICAgICAgICAgICAgICAvLyB0aGlzLCBhcyB3ZSdsbCBoYXZlIGNyZWF0ZWQgYSBuZXcgYmxvY2sgdXBvbiBlbmNvdW50ZXJpbmcgdGhlXG4gICAgICAgICAgICAgICAgLy8gc2lnbmF0dXJlIGFib3ZlLCBidXQgYmV0dGVyIHNhZmUgdGhhbiBzb3JyeS5cbiAgICAgICAgICAgICAgICBjb25jYXRlbmF0ZWRCbG9ja3MucHVzaChjb25jYXRlbmF0ZWRCbG9jayk7XG4gICAgICAgICAgICAgICAgY29uY2F0ZW5hdGVkQmxvY2sgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgcmVkYWN0ZWRDb250ZW50IH0gPSBibG9jaztcbiAgICAgICAgICAgIGNvbnN0IHByZXZSZWRhY3RlZENvbnRlbnQgPSAoXCJyZWRhY3RlZENvbnRlbnRcIiBpbiBjb25jYXRlbmF0ZWRCbG9ja1xuICAgICAgICAgICAgICAgID8gY29uY2F0ZW5hdGVkQmxvY2sucmVkYWN0ZWRDb250ZW50XG4gICAgICAgICAgICAgICAgOiBcIlwiKTtcbiAgICAgICAgICAgIGNvbmNhdGVuYXRlZEJsb2NrID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nX2NvbnRlbnRcIixcbiAgICAgICAgICAgICAgICByZWRhY3RlZENvbnRlbnQ6IHByZXZSZWRhY3RlZENvbnRlbnQgKyByZWRhY3RlZENvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhjb25jYXRlbmF0ZWRCbG9jaykubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25jYXRlbmF0ZWRCbG9ja3MucHVzaChjb25jYXRlbmF0ZWRCbG9jayk7XG4gICAgfVxuICAgIHJldHVybiBjb25jYXRlbmF0ZWRCbG9ja3M7XG59XG5leHBvcnQgZnVuY3Rpb24gc3VwcG9ydGVkVG9vbENob2ljZVZhbHVlc0Zvck1vZGVsKG1vZGVsKSB7XG4gICAgaWYgKG1vZGVsLmluY2x1ZGVzKFwiY2xhdWRlLTNcIikgfHxcbiAgICAgICAgbW9kZWwuaW5jbHVkZXMoXCJjbGF1ZGUtNFwiKSB8fFxuICAgICAgICBtb2RlbC5pbmNsdWRlcyhcImNsYXVkZS1vcHVzLTRcIikgfHxcbiAgICAgICAgbW9kZWwuaW5jbHVkZXMoXCJjbGF1ZGUtc29ubmV0LTRcIikpIHtcbiAgICAgICAgcmV0dXJuIFtcImF1dG9cIiwgXCJhbnlcIiwgXCJ0b29sXCJdO1xuICAgIH1cbiAgICBpZiAobW9kZWwuaW5jbHVkZXMoXCJtaXN0cmFsLWxhcmdlXCIpKSB7XG4gICAgICAgIHJldHVybiBbXCJhdXRvXCIsIFwiYW55XCJdO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuIl0sIm5hbWVzIjpbIkFJTWVzc2FnZSIsIkFJTWVzc2FnZUNodW5rIiwicGFyc2VCYXNlNjREYXRhVXJsIiwicGFyc2VNaW1lVHlwZSIsImNvbnZlcnRUb1Byb3ZpZGVyQ29udGVudEJsb2NrIiwiaXNEYXRhQ29udGVudEJsb2NrIiwiaXNPcGVuQUlUb29sIiwiaXNMYW5nQ2hhaW5Ub29sIiwiQ2hhdEdlbmVyYXRpb25DaHVuayIsImlzSW50ZXJvcFpvZFNjaGVtYSIsInRvSnNvblNjaGVtYSIsImlzRGVmYXVsdENhY2hlUG9pbnQiLCJibG9jayIsIkJvb2xlYW4iLCJjYWNoZVBvaW50IiwidHlwZSIsInN0YW5kYXJkQ29udGVudEJsb2NrQ29udmVydGVyIiwicHJvdmlkZXJOYW1lIiwiZnJvbVN0YW5kYXJkVGV4dEJsb2NrIiwidGV4dCIsImZyb21TdGFuZGFyZEltYWdlQmxvY2siLCJmb3JtYXQiLCJzb3VyY2VfdHlwZSIsInBhcnNlZERhdGEiLCJkYXRhVXJsIiwidXJsIiwiYXNUeXBlZEFycmF5IiwicGFyc2VkTWltZVR5cGUiLCJtaW1lX3R5cGUiLCJpbWFnZSIsInNvdXJjZSIsImJ5dGVzIiwiZGF0YSIsIkVycm9yIiwic3VidHlwZSIsImluY2x1ZGVzIiwiVWludDhBcnJheSIsImZyb20iLCJhdG9iIiwiYyIsImNoYXJDb2RlQXQiLCJmcm9tU3RhbmRhcmRGaWxlQmxvY2siLCJtaW1lVHlwZVRvRG9jdW1lbnRGb3JtYXQiLCJuYW1lIiwibWV0YWRhdGEiLCJmaWxlbmFtZSIsInRpdGxlIiwiZG9jdW1lbnQiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsIm1pbWVUeXBlIiwidW5kZWZpbmVkIiwiT2JqZWN0Iiwia2V5cyIsImpvaW4iLCJleHRyYWN0SW1hZ2VJbmZvIiwiYmFzZTY0IiwiZm9ybWF0TWF0Y2giLCJtYXRjaCIsImV4dHJhY3RlZEZvcm1hdCIsInRvTG93ZXJDYXNlIiwiYmFzZTY0RGF0YSIsInJlcGxhY2UiLCJiaW5hcnlTdHJpbmciLCJsZW5ndGgiLCJpIiwiY29udmVydExhbmdDaGFpbkNvbnRlbnRCbG9ja1RvQ29udmVyc2VDb250ZW50QmxvY2siLCJvblVua25vd24iLCJpbWFnZV91cmwiLCJjb252ZXJ0U3lzdGVtTWVzc2FnZVRvQ29udmVyc2VNZXNzYWdlIiwibXNnIiwiY29udGVudCIsIkFycmF5IiwiaXNBcnJheSIsImNvbnRlbnRCbG9ja3MiLCJwdXNoIiwiY29udmVydEFJTWVzc2FnZVRvQ29udmVyc2VNZXNzYWdlIiwiYXNzaXN0YW50TXNnIiwicm9sZSIsImNvbmNhdGVuYXRlZEJsb2NrcyIsImNvbmNhdGVuYXRlTGFuZ2NoYWluUmVhc29uaW5nQmxvY2tzIiwiZm9yRWFjaCIsImNsZWFuZWRUZXh0IiwidHJpbSIsIm1lcmdlZFRleHRDb250ZW50IiwicmVhc29uaW5nQ29udGVudCIsImxhbmdjaGFpblJlYXNvbmluZ0Jsb2NrVG9CZWRyb2NrUmVhc29uaW5nQmxvY2siLCJibG9ja1ZhbHVlcyIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsImZpbHRlciIsImtleSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b29sX2NhbGxzIiwibWFwIiwidGMiLCJ0b29sVXNlIiwidG9vbFVzZUlkIiwiaWQiLCJpbnB1dCIsImFyZ3MiLCJjb252ZXJ0SHVtYW5NZXNzYWdlVG9Db252ZXJzZU1lc3NhZ2UiLCJnZXRUeXBlIiwiY29udmVydFRvb2xNZXNzYWdlVG9Db252ZXJzZU1lc3NhZ2UiLCJjYXN0TXNnIiwidG9vbFJlc3VsdCIsInRvb2xfY2FsbF9pZCIsImNvbnZlcnRlZCIsImpzb24iLCJjb252ZXJ0VG9Db252ZXJzZU1lc3NhZ2VzIiwibWVzc2FnZXMiLCJjb252ZXJzZVN5c3RlbSIsImZsYXRNYXAiLCJjb252ZXJzZU1lc3NhZ2VzIiwiY29tYmluZWRDb252ZXJzZU1lc3NhZ2VzIiwicmVkdWNlIiwiYWNjIiwiY3VyciIsImxhc3RNZXNzYWdlIiwic29tZSIsImNvbmNhdCIsImlzQmVkcm9ja1Rvb2wiLCJ0b29sIiwiY29udmVydFRvQ29udmVyc2VUb29scyIsInRvb2xzIiwiZXZlcnkiLCJ0b29sU3BlYyIsImZ1bmN0aW9uIiwiZGVzY3JpcHRpb24iLCJpbnB1dFNjaGVtYSIsInBhcmFtZXRlcnMiLCJzY2hlbWEiLCJjb252ZXJ0VG9CZWRyb2NrVG9vbENob2ljZSIsInRvb2xDaG9pY2UiLCJmaWVsZHMiLCJzdXBwb3J0c1Rvb2xDaG9pY2VWYWx1ZXMiLCJiZWRyb2NrVG9vbENob2ljZSIsImFueSIsImF1dG8iLCJmb3VuZFRvb2wiLCJmaW5kIiwidG9vbENob2ljZVR5cGUiLCJzdXBwb3J0ZWRUeHQiLCJtb2RlbCIsImNvbnZlcnRDb252ZXJzZU1lc3NhZ2VUb0xhbmdDaGFpbk1lc3NhZ2UiLCJtZXNzYWdlIiwicmVzcG9uc2VNZXRhZGF0YSIsInJlcXVlc3RJZCIsIiRtZXRhZGF0YSIsInRva2VuVXNhZ2UiLCJ1c2FnZSIsImlucHV0X3Rva2VucyIsImlucHV0VG9rZW5zIiwib3V0cHV0X3Rva2VucyIsIm91dHB1dFRva2VucyIsInRvdGFsX3Rva2VucyIsInRvdGFsVG9rZW5zIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJ1c2FnZV9tZXRhZGF0YSIsInRvb2xDYWxscyIsImJlZHJvY2tSZWFzb25pbmdCbG9ja1RvTGFuZ2NoYWluUmVhc29uaW5nQmxvY2siLCJoYW5kbGVDb252ZXJzZVN0cmVhbUNvbnRlbnRCbG9ja0RlbHRhIiwiY29udGVudEJsb2NrRGVsdGEiLCJkZWx0YSIsImluZGV4IiwiY29udGVudEJsb2NrSW5kZXgiLCJ0b29sX2NhbGxfY2h1bmtzIiwiYmVkcm9ja1JlYXNvbmluZ0RlbHRhVG9MYW5nY2hhaW5QYXJ0aWFsUmVhc29uaW5nQmxvY2siLCJoYW5kbGVDb252ZXJzZVN0cmVhbUNvbnRlbnRCbG9ja1N0YXJ0IiwiY29udGVudEJsb2NrU3RhcnQiLCJzdGFydCIsImhhbmRsZUNvbnZlcnNlU3RyZWFtTWV0YWRhdGEiLCJleHRyYSIsInN0cmVhbVVzYWdlIiwicmVkYWN0ZWRDb250ZW50Iiwic2lnbmF0dXJlIiwicmVhc29uaW5nVGV4dCIsIkJ1ZmZlciIsInRvU3RyaW5nIiwiY29uY2F0ZW5hdGVkQmxvY2siLCJwcmV2VGV4dCIsInByZXZTaWduYXR1cmUiLCJwcmV2UmVkYWN0ZWRDb250ZW50Iiwic3VwcG9ydGVkVG9vbENob2ljZVZhbHVlc0Zvck1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/aws/dist/common.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/aws/dist/embeddings.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/aws/dist/embeddings.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BedrockEmbeddings: () => (/* binding */ BedrockEmbeddings)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/client-bedrock-runtime */ \"(rsc)/./node_modules/@aws-sdk/client-bedrock-runtime/dist-es/BedrockRuntimeClient.js\");\n/* harmony import */ var _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/client-bedrock-runtime */ \"(rsc)/./node_modules/@aws-sdk/client-bedrock-runtime/dist-es/commands/InvokeModelCommand.js\");\n/* harmony import */ var _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/embeddings */ \"(rsc)/./node_modules/@langchain/core/embeddings.js\");\n\n\n/**\n * Class that extends the Embeddings class and provides methods for\n * generating embeddings using the Bedrock API.\n * @example\n * ```typescript\n * const embeddings = new BedrockEmbeddings({\n *   region: \"your-aws-region\",\n *   credentials: {\n *     accessKeyId: \"your-access-key-id\",\n *     secretAccessKey: \"your-secret-access-key\",\n *   },\n *   model: \"amazon.titan-embed-text-v1\",\n *   // Configure client options (e.g., custom request handler)\n *   // clientOptions: {\n *   //   requestHandler: myCustomRequestHandler,\n *   // },\n * });\n *\n * // Embed a query and log the result\n * const res = await embeddings.embedQuery(\n *   \"What would be a good company name for a company that makes colorful socks?\"\n * );\n * console.log({ res });\n * ```\n */ class BedrockEmbeddings extends _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_0__.Embeddings {\n    constructor(fields){\n        super(fields ?? {});\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientOptions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"batchSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 512\n        });\n        this.model = fields?.model ?? \"amazon.titan-embed-text-v1\";\n        this.clientOptions = fields?.clientOptions;\n        this.client = fields?.client ?? new _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_1__.BedrockRuntimeClient({\n            ...fields?.clientOptions,\n            region: fields?.region,\n            credentials: fields?.credentials\n        });\n    }\n    /**\n     * Protected method to make a request to the Bedrock API to generate\n     * embeddings. Handles the retry logic and returns the response from the\n     * API.\n     * @param request Request to send to the Bedrock API.\n     * @returns Promise that resolves to the response from the API.\n     */ async _embedText(text) {\n        return this.caller.call(async ()=>{\n            try {\n                // replace newlines, which can negatively affect performance.\n                const cleanedText = text.replace(/\\n/g, \" \");\n                const res = await this.client.send(new _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_2__.InvokeModelCommand({\n                    modelId: this.model,\n                    body: JSON.stringify({\n                        inputText: cleanedText\n                    }),\n                    contentType: \"application/json\",\n                    accept: \"application/json\"\n                }));\n                const body = new TextDecoder().decode(res.body);\n                return JSON.parse(body).embedding;\n            } catch (e) {\n                console.error({\n                    error: e\n                });\n                // eslint-disable-next-line no-instanceof/no-instanceof\n                if (e instanceof Error) {\n                    throw new Error(`An error occurred while embedding documents with Bedrock: ${e.message}`);\n                }\n                throw new Error(\"An error occurred while embedding documents with Bedrock\");\n            }\n        });\n    }\n    /**\n     * Method that takes a document as input and returns a promise that\n     * resolves to an embedding for the document. It calls the _embedText\n     * method with the document as the input.\n     * @param document Document for which to generate an embedding.\n     * @returns Promise that resolves to an embedding for the input document.\n     */ embedQuery(document) {\n        return this.caller.callWithOptions({}, this._embedText.bind(this), document);\n    }\n    /**\n     * Method to generate embeddings for an array of texts. Calls _embedText\n     * method which batches and handles retry logic when calling the AWS Bedrock API.\n     * @param documents Array of texts for which to generate embeddings.\n     * @returns Promise that resolves to a 2D array of embeddings for each input document.\n     */ async embedDocuments(documents) {\n        return Promise.all(documents.map((document)=>this._embedText(document)));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvZGlzdC9lbWJlZGRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEY7QUFDcEM7QUFDeEQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXdCQyxHQUNNLE1BQU1HLDBCQUEwQkQsa0VBQVVBO0lBQzdDRSxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQSxVQUFVLENBQUM7UUFDakJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSxJQUFJLENBQUNDLEtBQUssR0FBR1AsUUFBUU8sU0FBUztRQUM5QixJQUFJLENBQUNDLGFBQWEsR0FBR1IsUUFBUVE7UUFDN0IsSUFBSSxDQUFDQyxNQUFNLEdBQ1BULFFBQVFTLFVBQ0osSUFBSWQsaUZBQW9CQSxDQUFDO1lBQ3JCLEdBQUdLLFFBQVFRLGFBQWE7WUFDeEJFLFFBQVFWLFFBQVFVO1lBQ2hCQyxhQUFhWCxRQUFRVztRQUN6QjtJQUNaO0lBQ0E7Ozs7OztLQU1DLEdBQ0QsTUFBTUMsV0FBV0MsSUFBSSxFQUFFO1FBQ25CLE9BQU8sSUFBSSxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQztZQUNwQixJQUFJO2dCQUNBLDZEQUE2RDtnQkFDN0QsTUFBTUMsY0FBY0gsS0FBS0ksT0FBTyxDQUFDLE9BQU87Z0JBQ3hDLE1BQU1DLE1BQU0sTUFBTSxJQUFJLENBQUNULE1BQU0sQ0FBQ1UsSUFBSSxDQUFDLElBQUl2QiwrRUFBa0JBLENBQUM7b0JBQ3REd0IsU0FBUyxJQUFJLENBQUNiLEtBQUs7b0JBQ25CYyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7d0JBQ2pCQyxXQUFXUjtvQkFDZjtvQkFDQVMsYUFBYTtvQkFDYkMsUUFBUTtnQkFDWjtnQkFDQSxNQUFNTCxPQUFPLElBQUlNLGNBQWNDLE1BQU0sQ0FBQ1YsSUFBSUcsSUFBSTtnQkFDOUMsT0FBT0MsS0FBS08sS0FBSyxDQUFDUixNQUFNUyxTQUFTO1lBQ3JDLEVBQ0EsT0FBT0MsR0FBRztnQkFDTkMsUUFBUUMsS0FBSyxDQUFDO29CQUNWQSxPQUFPRjtnQkFDWDtnQkFDQSx1REFBdUQ7Z0JBQ3ZELElBQUlBLGFBQWFHLE9BQU87b0JBQ3BCLE1BQU0sSUFBSUEsTUFBTSxDQUFDLDBEQUEwRCxFQUFFSCxFQUFFSSxPQUFPLENBQUMsQ0FBQztnQkFDNUY7Z0JBQ0EsTUFBTSxJQUFJRCxNQUFNO1lBQ3BCO1FBQ0o7SUFDSjtJQUNBOzs7Ozs7S0FNQyxHQUNERSxXQUFXQyxRQUFRLEVBQUU7UUFDakIsT0FBTyxJQUFJLENBQUN2QixNQUFNLENBQUN3QixlQUFlLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQzFCLFVBQVUsQ0FBQzJCLElBQUksQ0FBQyxJQUFJLEdBQUdGO0lBQ3ZFO0lBQ0E7Ozs7O0tBS0MsR0FDRCxNQUFNRyxlQUFlQyxTQUFTLEVBQUU7UUFDNUIsT0FBT0MsUUFBUUMsR0FBRyxDQUFDRixVQUFVRyxHQUFHLENBQUMsQ0FBQ1AsV0FBYSxJQUFJLENBQUN6QixVQUFVLENBQUN5QjtJQUNuRTtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2F3cy9kaXN0L2VtYmVkZGluZ3MuanM/MmVmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCZWRyb2NrUnVudGltZUNsaWVudCwgSW52b2tlTW9kZWxDb21tYW5kLCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtYmVkcm9jay1ydW50aW1lXCI7XG5pbXBvcnQgeyBFbWJlZGRpbmdzIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9lbWJlZGRpbmdzXCI7XG4vKipcbiAqIENsYXNzIHRoYXQgZXh0ZW5kcyB0aGUgRW1iZWRkaW5ncyBjbGFzcyBhbmQgcHJvdmlkZXMgbWV0aG9kcyBmb3JcbiAqIGdlbmVyYXRpbmcgZW1iZWRkaW5ncyB1c2luZyB0aGUgQmVkcm9jayBBUEkuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgZW1iZWRkaW5ncyA9IG5ldyBCZWRyb2NrRW1iZWRkaW5ncyh7XG4gKiAgIHJlZ2lvbjogXCJ5b3VyLWF3cy1yZWdpb25cIixcbiAqICAgY3JlZGVudGlhbHM6IHtcbiAqICAgICBhY2Nlc3NLZXlJZDogXCJ5b3VyLWFjY2Vzcy1rZXktaWRcIixcbiAqICAgICBzZWNyZXRBY2Nlc3NLZXk6IFwieW91ci1zZWNyZXQtYWNjZXNzLWtleVwiLFxuICogICB9LFxuICogICBtb2RlbDogXCJhbWF6b24udGl0YW4tZW1iZWQtdGV4dC12MVwiLFxuICogICAvLyBDb25maWd1cmUgY2xpZW50IG9wdGlvbnMgKGUuZy4sIGN1c3RvbSByZXF1ZXN0IGhhbmRsZXIpXG4gKiAgIC8vIGNsaWVudE9wdGlvbnM6IHtcbiAqICAgLy8gICByZXF1ZXN0SGFuZGxlcjogbXlDdXN0b21SZXF1ZXN0SGFuZGxlcixcbiAqICAgLy8gfSxcbiAqIH0pO1xuICpcbiAqIC8vIEVtYmVkIGEgcXVlcnkgYW5kIGxvZyB0aGUgcmVzdWx0XG4gKiBjb25zdCByZXMgPSBhd2FpdCBlbWJlZGRpbmdzLmVtYmVkUXVlcnkoXG4gKiAgIFwiV2hhdCB3b3VsZCBiZSBhIGdvb2QgY29tcGFueSBuYW1lIGZvciBhIGNvbXBhbnkgdGhhdCBtYWtlcyBjb2xvcmZ1bCBzb2Nrcz9cIlxuICogKTtcbiAqIGNvbnNvbGUubG9nKHsgcmVzIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBCZWRyb2NrRW1iZWRkaW5ncyBleHRlbmRzIEVtYmVkZGluZ3Mge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMgPz8ge30pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50T3B0aW9uc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJiYXRjaFNpemVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDUxMlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tb2RlbCA9IGZpZWxkcz8ubW9kZWwgPz8gXCJhbWF6b24udGl0YW4tZW1iZWQtdGV4dC12MVwiO1xuICAgICAgICB0aGlzLmNsaWVudE9wdGlvbnMgPSBmaWVsZHM/LmNsaWVudE9wdGlvbnM7XG4gICAgICAgIHRoaXMuY2xpZW50ID1cbiAgICAgICAgICAgIGZpZWxkcz8uY2xpZW50ID8/XG4gICAgICAgICAgICAgICAgbmV3IEJlZHJvY2tSdW50aW1lQ2xpZW50KHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzPy5jbGllbnRPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICByZWdpb246IGZpZWxkcz8ucmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogZmllbGRzPy5jcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvdGVjdGVkIG1ldGhvZCB0byBtYWtlIGEgcmVxdWVzdCB0byB0aGUgQmVkcm9jayBBUEkgdG8gZ2VuZXJhdGVcbiAgICAgKiBlbWJlZGRpbmdzLiBIYW5kbGVzIHRoZSByZXRyeSBsb2dpYyBhbmQgcmV0dXJucyB0aGUgcmVzcG9uc2UgZnJvbSB0aGVcbiAgICAgKiBBUEkuXG4gICAgICogQHBhcmFtIHJlcXVlc3QgUmVxdWVzdCB0byBzZW5kIHRvIHRoZSBCZWRyb2NrIEFQSS5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHJlc3BvbnNlIGZyb20gdGhlIEFQSS5cbiAgICAgKi9cbiAgICBhc3luYyBfZW1iZWRUZXh0KHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyByZXBsYWNlIG5ld2xpbmVzLCB3aGljaCBjYW4gbmVnYXRpdmVseSBhZmZlY3QgcGVyZm9ybWFuY2UuXG4gICAgICAgICAgICAgICAgY29uc3QgY2xlYW5lZFRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcbi9nLCBcIiBcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jbGllbnQuc2VuZChuZXcgSW52b2tlTW9kZWxDb21tYW5kKHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUZXh0OiBjbGVhbmVkVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICAgICAgYWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShyZXMuYm9keSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYm9keSkuZW1iZWRkaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBlbWJlZGRpbmcgZG9jdW1lbnRzIHdpdGggQmVkcm9jazogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGVtYmVkZGluZyBkb2N1bWVudHMgd2l0aCBCZWRyb2NrXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRoYXQgdGFrZXMgYSBkb2N1bWVudCBhcyBpbnB1dCBhbmQgcmV0dXJucyBhIHByb21pc2UgdGhhdFxuICAgICAqIHJlc29sdmVzIHRvIGFuIGVtYmVkZGluZyBmb3IgdGhlIGRvY3VtZW50LiBJdCBjYWxscyB0aGUgX2VtYmVkVGV4dFxuICAgICAqIG1ldGhvZCB3aXRoIHRoZSBkb2N1bWVudCBhcyB0aGUgaW5wdXQuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IERvY3VtZW50IGZvciB3aGljaCB0byBnZW5lcmF0ZSBhbiBlbWJlZGRpbmcuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGVtYmVkZGluZyBmb3IgdGhlIGlucHV0IGRvY3VtZW50LlxuICAgICAqL1xuICAgIGVtYmVkUXVlcnkoZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyLmNhbGxXaXRoT3B0aW9ucyh7fSwgdGhpcy5fZW1iZWRUZXh0LmJpbmQodGhpcyksIGRvY3VtZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIGdlbmVyYXRlIGVtYmVkZGluZ3MgZm9yIGFuIGFycmF5IG9mIHRleHRzLiBDYWxscyBfZW1iZWRUZXh0XG4gICAgICogbWV0aG9kIHdoaWNoIGJhdGNoZXMgYW5kIGhhbmRsZXMgcmV0cnkgbG9naWMgd2hlbiBjYWxsaW5nIHRoZSBBV1MgQmVkcm9jayBBUEkuXG4gICAgICogQHBhcmFtIGRvY3VtZW50cyBBcnJheSBvZiB0ZXh0cyBmb3Igd2hpY2ggdG8gZ2VuZXJhdGUgZW1iZWRkaW5ncy5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSAyRCBhcnJheSBvZiBlbWJlZGRpbmdzIGZvciBlYWNoIGlucHV0IGRvY3VtZW50LlxuICAgICAqL1xuICAgIGFzeW5jIGVtYmVkRG9jdW1lbnRzKGRvY3VtZW50cykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZG9jdW1lbnRzLm1hcCgoZG9jdW1lbnQpID0+IHRoaXMuX2VtYmVkVGV4dChkb2N1bWVudCkpKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmVkcm9ja1J1bnRpbWVDbGllbnQiLCJJbnZva2VNb2RlbENvbW1hbmQiLCJFbWJlZGRpbmdzIiwiQmVkcm9ja0VtYmVkZGluZ3MiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJtb2RlbCIsImNsaWVudE9wdGlvbnMiLCJjbGllbnQiLCJyZWdpb24iLCJjcmVkZW50aWFscyIsIl9lbWJlZFRleHQiLCJ0ZXh0IiwiY2FsbGVyIiwiY2FsbCIsImNsZWFuZWRUZXh0IiwicmVwbGFjZSIsInJlcyIsInNlbmQiLCJtb2RlbElkIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbnB1dFRleHQiLCJjb250ZW50VHlwZSIsImFjY2VwdCIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwicGFyc2UiLCJlbWJlZGRpbmciLCJlIiwiY29uc29sZSIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwiZW1iZWRRdWVyeSIsImRvY3VtZW50IiwiY2FsbFdpdGhPcHRpb25zIiwiYmluZCIsImVtYmVkRG9jdW1lbnRzIiwiZG9jdW1lbnRzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/aws/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/aws/dist/index.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/aws/dist/index.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AmazonKendraRetriever: () => (/* reexport safe */ _retrievers_index_js__WEBPACK_IMPORTED_MODULE_2__.AmazonKendraRetriever),\n/* harmony export */   AmazonKnowledgeBaseRetriever: () => (/* reexport safe */ _retrievers_index_js__WEBPACK_IMPORTED_MODULE_2__.AmazonKnowledgeBaseRetriever),\n/* harmony export */   BedrockEmbeddings: () => (/* reexport safe */ _embeddings_js__WEBPACK_IMPORTED_MODULE_3__.BedrockEmbeddings),\n/* harmony export */   ChatBedrockConverse: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_0__.ChatBedrockConverse)\n/* harmony export */ });\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chat_models.js */ \"(rsc)/./node_modules/@langchain/aws/dist/chat_models.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/@langchain/aws/dist/types.js\");\n/* harmony import */ var _retrievers_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./retrievers/index.js */ \"(rsc)/./node_modules/@langchain/aws/dist/retrievers/index.js\");\n/* harmony import */ var _embeddings_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./embeddings.js */ \"(rsc)/./node_modules/@langchain/aws/dist/embeddings.js\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFpQztBQUNOO0FBQ1c7QUFDTiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvZGlzdC9pbmRleC5qcz9jYmVhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2NoYXRfbW9kZWxzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90eXBlcy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcmV0cmlldmVycy9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZW1iZWRkaW5ncy5qc1wiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/aws/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/aws/dist/retrievers/bedrock.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/aws/dist/retrievers/bedrock.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AmazonKnowledgeBaseRetriever: () => (/* binding */ AmazonKnowledgeBaseRetriever)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_bedrock_agent_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/client-bedrock-agent-runtime */ \"(rsc)/./node_modules/@aws-sdk/client-bedrock-agent-runtime/dist-es/BedrockAgentRuntimeClient.js\");\n/* harmony import */ var _aws_sdk_client_bedrock_agent_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/client-bedrock-agent-runtime */ \"(rsc)/./node_modules/@aws-sdk/client-bedrock-agent-runtime/dist-es/commands/RetrieveCommand.js\");\n/* harmony import */ var _langchain_core_retrievers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/retrievers */ \"(rsc)/./node_modules/@langchain/core/retrievers.js\");\n\n\n/**\n * Class for interacting with Amazon Bedrock Knowledge Bases, a RAG workflow oriented service\n * provided by AWS. Extends the BaseRetriever class.\n * @example\n * ```typescript\n * const retriever = new AmazonKnowledgeBaseRetriever({\n *   topK: 10,\n *   knowledgeBaseId: \"YOUR_KNOWLEDGE_BASE_ID\",\n *   region: \"us-east-2\",\n *   clientOptions: {\n *     credentials: {\n *       accessKeyId: \"YOUR_ACCESS_KEY_ID\",\n *       secretAccessKey: \"YOUR_SECRET_ACCESS_KEY\",\n *     },\n *   },\n * });\n *\n * const docs = await retriever.getRelevantDocuments(\"How are clouds formed?\");\n * ```\n */ class AmazonKnowledgeBaseRetriever extends _langchain_core_retrievers__WEBPACK_IMPORTED_MODULE_0__.BaseRetriever {\n    static lc_name() {\n        return \"AmazonKnowledgeBaseRetriever\";\n    }\n    constructor({ knowledgeBaseId, topK = 10, clientOptions, region, filter, overrideSearchType }){\n        super();\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"retrievers\",\n                \"amazon_bedrock_knowledge_base\"\n            ]\n        });\n        Object.defineProperty(this, \"knowledgeBaseId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topK\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"bedrockAgentRuntimeClient\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"filter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"overrideSearchType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.topK = topK;\n        this.filter = filter;\n        this.overrideSearchType = overrideSearchType;\n        this.bedrockAgentRuntimeClient = new _aws_sdk_client_bedrock_agent_runtime__WEBPACK_IMPORTED_MODULE_1__.BedrockAgentRuntimeClient({\n            region,\n            ...clientOptions\n        });\n        this.knowledgeBaseId = knowledgeBaseId;\n    }\n    /**\n     * Cleans the result text by replacing sequences of whitespace with a\n     * single space and removing ellipses.\n     * @param resText The result text to clean.\n     * @returns The cleaned result text.\n     */ cleanResult(resText) {\n        const res = resText.replace(/\\s+/g, \" \").replace(/\\.\\.\\./g, \"\");\n        return res;\n    }\n    async queryKnowledgeBase(query, topK, filter, overrideSearchType) {\n        const retrieveCommand = new _aws_sdk_client_bedrock_agent_runtime__WEBPACK_IMPORTED_MODULE_2__.RetrieveCommand({\n            knowledgeBaseId: this.knowledgeBaseId,\n            retrievalQuery: {\n                text: query\n            },\n            retrievalConfiguration: {\n                vectorSearchConfiguration: {\n                    numberOfResults: topK,\n                    overrideSearchType,\n                    filter\n                }\n            }\n        });\n        const retrieveResponse = await this.bedrockAgentRuntimeClient.send(retrieveCommand);\n        return retrieveResponse.retrievalResults?.map((result)=>{\n            let source;\n            switch(result.location?.type){\n                case \"CONFLUENCE\":\n                    source = result.location?.confluenceLocation?.url;\n                    break;\n                case \"S3\":\n                    source = result.location?.s3Location?.uri;\n                    break;\n                case \"SALESFORCE\":\n                    source = result.location?.salesforceLocation?.url;\n                    break;\n                case \"SHAREPOINT\":\n                    source = result.location?.sharePointLocation?.url;\n                    break;\n                case \"WEB\":\n                    source = result.location?.webLocation?.url;\n                    break;\n                default:\n                    source = result.location?.s3Location?.uri;\n                    break;\n            }\n            return {\n                pageContent: this.cleanResult(result.content?.text || \"\"),\n                metadata: {\n                    source,\n                    score: result.score,\n                    ...result.metadata\n                }\n            };\n        }) ?? [];\n    }\n    async _getRelevantDocuments(query) {\n        const docs = await this.queryKnowledgeBase(query, this.topK, this.filter, this.overrideSearchType);\n        return docs;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvZGlzdC9yZXRyaWV2ZXJzL2JlZHJvY2suanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFvRztBQUN6QztBQUMzRDs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW1CQyxHQUNNLE1BQU1HLHFDQUFxQ0QscUVBQWFBO0lBQzNELE9BQU9FLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsWUFBWSxFQUFFQyxlQUFlLEVBQUVDLE9BQU8sRUFBRSxFQUFFQyxhQUFhLEVBQUVDLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxrQkFBa0IsRUFBRyxDQUFFO1FBQzVGLEtBQUs7UUFDTEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWE7Z0JBQWM7YUFBZ0M7UUFDdkU7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLDZCQUE2QjtZQUNyREMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsc0JBQXNCO1lBQzlDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNWLElBQUksR0FBR0E7UUFDWixJQUFJLENBQUNHLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNDLGtCQUFrQixHQUFHQTtRQUMxQixJQUFJLENBQUNPLHlCQUF5QixHQUFHLElBQUlqQiw0RkFBeUJBLENBQUM7WUFDM0RRO1lBQ0EsR0FBR0QsYUFBYTtRQUNwQjtRQUNBLElBQUksQ0FBQ0YsZUFBZSxHQUFHQTtJQUMzQjtJQUNBOzs7OztLQUtDLEdBQ0RhLFlBQVlDLE9BQU8sRUFBRTtRQUNqQixNQUFNQyxNQUFNRCxRQUFRRSxPQUFPLENBQUMsUUFBUSxLQUFLQSxPQUFPLENBQUMsV0FBVztRQUM1RCxPQUFPRDtJQUNYO0lBQ0EsTUFBTUUsbUJBQW1CQyxLQUFLLEVBQUVqQixJQUFJLEVBQUVHLE1BQU0sRUFBRUMsa0JBQWtCLEVBQUU7UUFDOUQsTUFBTWMsa0JBQWtCLElBQUl6QixrRkFBZUEsQ0FBQztZQUN4Q00saUJBQWlCLElBQUksQ0FBQ0EsZUFBZTtZQUNyQ29CLGdCQUFnQjtnQkFDWkMsTUFBTUg7WUFDVjtZQUNBSSx3QkFBd0I7Z0JBQ3BCQywyQkFBMkI7b0JBQ3ZCQyxpQkFBaUJ2QjtvQkFDakJJO29CQUNBRDtnQkFDSjtZQUNKO1FBQ0o7UUFDQSxNQUFNcUIsbUJBQW1CLE1BQU0sSUFBSSxDQUFDYix5QkFBeUIsQ0FBQ2MsSUFBSSxDQUFDUDtRQUNuRSxPQUFRTSxpQkFBaUJFLGdCQUFnQixFQUFFQyxJQUFJLENBQUNDO1lBQzVDLElBQUlDO1lBQ0osT0FBUUQsT0FBT0UsUUFBUSxFQUFFQztnQkFDckIsS0FBSztvQkFDREYsU0FBU0QsT0FBT0UsUUFBUSxFQUFFRSxvQkFBb0JDO29CQUM5QztnQkFDSixLQUFLO29CQUNESixTQUFTRCxPQUFPRSxRQUFRLEVBQUVJLFlBQVlDO29CQUN0QztnQkFDSixLQUFLO29CQUNETixTQUFTRCxPQUFPRSxRQUFRLEVBQUVNLG9CQUFvQkg7b0JBQzlDO2dCQUNKLEtBQUs7b0JBQ0RKLFNBQVNELE9BQU9FLFFBQVEsRUFBRU8sb0JBQW9CSjtvQkFDOUM7Z0JBQ0osS0FBSztvQkFDREosU0FBU0QsT0FBT0UsUUFBUSxFQUFFUSxhQUFhTDtvQkFDdkM7Z0JBQ0o7b0JBQ0lKLFNBQVNELE9BQU9FLFFBQVEsRUFBRUksWUFBWUM7b0JBQ3RDO1lBQ1I7WUFDQSxPQUFPO2dCQUNISSxhQUFhLElBQUksQ0FBQzNCLFdBQVcsQ0FBQ2dCLE9BQU9ZLE9BQU8sRUFBRXBCLFFBQVE7Z0JBQ3REcUIsVUFBVTtvQkFDTlo7b0JBQ0FhLE9BQU9kLE9BQU9jLEtBQUs7b0JBQ25CLEdBQUdkLE9BQU9hLFFBQVE7Z0JBQ3RCO1lBQ0o7UUFDSixNQUFNLEVBQUU7SUFDWjtJQUNBLE1BQU1FLHNCQUFzQjFCLEtBQUssRUFBRTtRQUMvQixNQUFNMkIsT0FBTyxNQUFNLElBQUksQ0FBQzVCLGtCQUFrQixDQUFDQyxPQUFPLElBQUksQ0FBQ2pCLElBQUksRUFBRSxJQUFJLENBQUNHLE1BQU0sRUFBRSxJQUFJLENBQUNDLGtCQUFrQjtRQUNqRyxPQUFPd0M7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2F3cy9kaXN0L3JldHJpZXZlcnMvYmVkcm9jay5qcz8xNjU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJldHJpZXZlQ29tbWFuZCwgQmVkcm9ja0FnZW50UnVudGltZUNsaWVudCwgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWJlZHJvY2stYWdlbnQtcnVudGltZVwiO1xuaW1wb3J0IHsgQmFzZVJldHJpZXZlciB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcmV0cmlldmVyc1wiO1xuLyoqXG4gKiBDbGFzcyBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBBbWF6b24gQmVkcm9jayBLbm93bGVkZ2UgQmFzZXMsIGEgUkFHIHdvcmtmbG93IG9yaWVudGVkIHNlcnZpY2VcbiAqIHByb3ZpZGVkIGJ5IEFXUy4gRXh0ZW5kcyB0aGUgQmFzZVJldHJpZXZlciBjbGFzcy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCByZXRyaWV2ZXIgPSBuZXcgQW1hem9uS25vd2xlZGdlQmFzZVJldHJpZXZlcih7XG4gKiAgIHRvcEs6IDEwLFxuICogICBrbm93bGVkZ2VCYXNlSWQ6IFwiWU9VUl9LTk9XTEVER0VfQkFTRV9JRFwiLFxuICogICByZWdpb246IFwidXMtZWFzdC0yXCIsXG4gKiAgIGNsaWVudE9wdGlvbnM6IHtcbiAqICAgICBjcmVkZW50aWFsczoge1xuICogICAgICAgYWNjZXNzS2V5SWQ6IFwiWU9VUl9BQ0NFU1NfS0VZX0lEXCIsXG4gKiAgICAgICBzZWNyZXRBY2Nlc3NLZXk6IFwiWU9VUl9TRUNSRVRfQUNDRVNTX0tFWVwiLFxuICogICAgIH0sXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBkb2NzID0gYXdhaXQgcmV0cmlldmVyLmdldFJlbGV2YW50RG9jdW1lbnRzKFwiSG93IGFyZSBjbG91ZHMgZm9ybWVkP1wiKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQW1hem9uS25vd2xlZGdlQmFzZVJldHJpZXZlciBleHRlbmRzIEJhc2VSZXRyaWV2ZXIge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJBbWF6b25Lbm93bGVkZ2VCYXNlUmV0cmlldmVyXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHsga25vd2xlZGdlQmFzZUlkLCB0b3BLID0gMTAsIGNsaWVudE9wdGlvbnMsIHJlZ2lvbiwgZmlsdGVyLCBvdmVycmlkZVNlYXJjaFR5cGUsIH0pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJyZXRyaWV2ZXJzXCIsIFwiYW1hem9uX2JlZHJvY2tfa25vd2xlZGdlX2Jhc2VcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImtub3dsZWRnZUJhc2VJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b3BLXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJlZHJvY2tBZ2VudFJ1bnRpbWVDbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlsdGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm92ZXJyaWRlU2VhcmNoVHlwZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRvcEsgPSB0b3BLO1xuICAgICAgICB0aGlzLmZpbHRlciA9IGZpbHRlcjtcbiAgICAgICAgdGhpcy5vdmVycmlkZVNlYXJjaFR5cGUgPSBvdmVycmlkZVNlYXJjaFR5cGU7XG4gICAgICAgIHRoaXMuYmVkcm9ja0FnZW50UnVudGltZUNsaWVudCA9IG5ldyBCZWRyb2NrQWdlbnRSdW50aW1lQ2xpZW50KHtcbiAgICAgICAgICAgIHJlZ2lvbixcbiAgICAgICAgICAgIC4uLmNsaWVudE9wdGlvbnMsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmtub3dsZWRnZUJhc2VJZCA9IGtub3dsZWRnZUJhc2VJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW5zIHRoZSByZXN1bHQgdGV4dCBieSByZXBsYWNpbmcgc2VxdWVuY2VzIG9mIHdoaXRlc3BhY2Ugd2l0aCBhXG4gICAgICogc2luZ2xlIHNwYWNlIGFuZCByZW1vdmluZyBlbGxpcHNlcy5cbiAgICAgKiBAcGFyYW0gcmVzVGV4dCBUaGUgcmVzdWx0IHRleHQgdG8gY2xlYW4uXG4gICAgICogQHJldHVybnMgVGhlIGNsZWFuZWQgcmVzdWx0IHRleHQuXG4gICAgICovXG4gICAgY2xlYW5SZXN1bHQocmVzVGV4dCkge1xuICAgICAgICBjb25zdCByZXMgPSByZXNUZXh0LnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnJlcGxhY2UoL1xcLlxcLlxcLi9nLCBcIlwiKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgYXN5bmMgcXVlcnlLbm93bGVkZ2VCYXNlKHF1ZXJ5LCB0b3BLLCBmaWx0ZXIsIG92ZXJyaWRlU2VhcmNoVHlwZSkge1xuICAgICAgICBjb25zdCByZXRyaWV2ZUNvbW1hbmQgPSBuZXcgUmV0cmlldmVDb21tYW5kKHtcbiAgICAgICAgICAgIGtub3dsZWRnZUJhc2VJZDogdGhpcy5rbm93bGVkZ2VCYXNlSWQsXG4gICAgICAgICAgICByZXRyaWV2YWxRdWVyeToge1xuICAgICAgICAgICAgICAgIHRleHQ6IHF1ZXJ5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJldHJpZXZhbENvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICAgICAgICB2ZWN0b3JTZWFyY2hDb25maWd1cmF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIG51bWJlck9mUmVzdWx0czogdG9wSyxcbiAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVTZWFyY2hUeXBlLFxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXRyaWV2ZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5iZWRyb2NrQWdlbnRSdW50aW1lQ2xpZW50LnNlbmQocmV0cmlldmVDb21tYW5kKTtcbiAgICAgICAgcmV0dXJuIChyZXRyaWV2ZVJlc3BvbnNlLnJldHJpZXZhbFJlc3VsdHM/Lm1hcCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBsZXQgc291cmNlO1xuICAgICAgICAgICAgc3dpdGNoIChyZXN1bHQubG9jYXRpb24/LnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiQ09ORkxVRU5DRVwiOlxuICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSByZXN1bHQubG9jYXRpb24/LmNvbmZsdWVuY2VMb2NhdGlvbj8udXJsO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiUzNcIjpcbiAgICAgICAgICAgICAgICAgICAgc291cmNlID0gcmVzdWx0LmxvY2F0aW9uPy5zM0xvY2F0aW9uPy51cmk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJTQUxFU0ZPUkNFXCI6XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IHJlc3VsdC5sb2NhdGlvbj8uc2FsZXNmb3JjZUxvY2F0aW9uPy51cmw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJTSEFSRVBPSU5UXCI6XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IHJlc3VsdC5sb2NhdGlvbj8uc2hhcmVQb2ludExvY2F0aW9uPy51cmw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJXRUJcIjpcbiAgICAgICAgICAgICAgICAgICAgc291cmNlID0gcmVzdWx0LmxvY2F0aW9uPy53ZWJMb2NhdGlvbj8udXJsO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSByZXN1bHQubG9jYXRpb24/LnMzTG9jYXRpb24/LnVyaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBhZ2VDb250ZW50OiB0aGlzLmNsZWFuUmVzdWx0KHJlc3VsdC5jb250ZW50Py50ZXh0IHx8IFwiXCIpLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgc2NvcmU6IHJlc3VsdC5zY29yZSxcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVzdWx0Lm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSA/PyBbXSk7XG4gICAgfVxuICAgIGFzeW5jIF9nZXRSZWxldmFudERvY3VtZW50cyhxdWVyeSkge1xuICAgICAgICBjb25zdCBkb2NzID0gYXdhaXQgdGhpcy5xdWVyeUtub3dsZWRnZUJhc2UocXVlcnksIHRoaXMudG9wSywgdGhpcy5maWx0ZXIsIHRoaXMub3ZlcnJpZGVTZWFyY2hUeXBlKTtcbiAgICAgICAgcmV0dXJuIGRvY3M7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlJldHJpZXZlQ29tbWFuZCIsIkJlZHJvY2tBZ2VudFJ1bnRpbWVDbGllbnQiLCJCYXNlUmV0cmlldmVyIiwiQW1hem9uS25vd2xlZGdlQmFzZVJldHJpZXZlciIsImxjX25hbWUiLCJjb25zdHJ1Y3RvciIsImtub3dsZWRnZUJhc2VJZCIsInRvcEsiLCJjbGllbnRPcHRpb25zIiwicmVnaW9uIiwiZmlsdGVyIiwib3ZlcnJpZGVTZWFyY2hUeXBlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImJlZHJvY2tBZ2VudFJ1bnRpbWVDbGllbnQiLCJjbGVhblJlc3VsdCIsInJlc1RleHQiLCJyZXMiLCJyZXBsYWNlIiwicXVlcnlLbm93bGVkZ2VCYXNlIiwicXVlcnkiLCJyZXRyaWV2ZUNvbW1hbmQiLCJyZXRyaWV2YWxRdWVyeSIsInRleHQiLCJyZXRyaWV2YWxDb25maWd1cmF0aW9uIiwidmVjdG9yU2VhcmNoQ29uZmlndXJhdGlvbiIsIm51bWJlck9mUmVzdWx0cyIsInJldHJpZXZlUmVzcG9uc2UiLCJzZW5kIiwicmV0cmlldmFsUmVzdWx0cyIsIm1hcCIsInJlc3VsdCIsInNvdXJjZSIsImxvY2F0aW9uIiwidHlwZSIsImNvbmZsdWVuY2VMb2NhdGlvbiIsInVybCIsInMzTG9jYXRpb24iLCJ1cmkiLCJzYWxlc2ZvcmNlTG9jYXRpb24iLCJzaGFyZVBvaW50TG9jYXRpb24iLCJ3ZWJMb2NhdGlvbiIsInBhZ2VDb250ZW50IiwiY29udGVudCIsIm1ldGFkYXRhIiwic2NvcmUiLCJfZ2V0UmVsZXZhbnREb2N1bWVudHMiLCJkb2NzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/aws/dist/retrievers/bedrock.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/aws/dist/retrievers/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/aws/dist/retrievers/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AmazonKendraRetriever: () => (/* reexport safe */ _kendra_js__WEBPACK_IMPORTED_MODULE_1__.AmazonKendraRetriever),\n/* harmony export */   AmazonKnowledgeBaseRetriever: () => (/* reexport safe */ _bedrock_js__WEBPACK_IMPORTED_MODULE_0__.AmazonKnowledgeBaseRetriever)\n/* harmony export */ });\n/* harmony import */ var _bedrock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bedrock.js */ \"(rsc)/./node_modules/@langchain/aws/dist/retrievers/bedrock.js\");\n/* harmony import */ var _kendra_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kendra.js */ \"(rsc)/./node_modules/@langchain/aws/dist/retrievers/kendra.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvZGlzdC9yZXRyaWV2ZXJzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNkI7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvZGlzdC9yZXRyaWV2ZXJzL2luZGV4LmpzP2Q4NDUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vYmVkcm9jay5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4va2VuZHJhLmpzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/aws/dist/retrievers/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/aws/dist/retrievers/kendra.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/aws/dist/retrievers/kendra.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AmazonKendraRetriever: () => (/* binding */ AmazonKendraRetriever)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_kendra__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/client-kendra */ \"(rsc)/./node_modules/@aws-sdk/client-kendra/dist-es/KendraClient.js\");\n/* harmony import */ var _aws_sdk_client_kendra__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-sdk/client-kendra */ \"(rsc)/./node_modules/@aws-sdk/client-kendra/dist-es/commands/RetrieveCommand.js\");\n/* harmony import */ var _aws_sdk_client_kendra__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-sdk/client-kendra */ \"(rsc)/./node_modules/@aws-sdk/client-kendra/dist-es/commands/QueryCommand.js\");\n/* harmony import */ var _langchain_core_retrievers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/retrievers */ \"(rsc)/./node_modules/@langchain/core/retrievers.js\");\n/* harmony import */ var _langchain_core_documents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/documents */ \"(rsc)/./node_modules/@langchain/core/documents.js\");\n\n\n\n/**\n * Class for interacting with Amazon Kendra, an intelligent search service\n * provided by AWS. Extends the BaseRetriever class.\n * @example\n * ```typescript\n * const retriever = new AmazonKendraRetriever({\n *   topK: 10,\n *   indexId: \"YOUR_INDEX_ID\",\n *   region: \"us-east-2\",\n *   clientOptions: {\n *     credentials: {\n *       accessKeyId: \"YOUR_ACCESS_KEY_ID\",\n *       secretAccessKey: \"YOUR_SECRET_ACCESS_KEY\",\n *     },\n *   },\n * });\n *\n * const docs = await retriever.getRelevantDocuments(\"How are clouds formed?\");\n * ```\n */ class AmazonKendraRetriever extends _langchain_core_retrievers__WEBPACK_IMPORTED_MODULE_0__.BaseRetriever {\n    static lc_name() {\n        return \"AmazonKendraRetriever\";\n    }\n    constructor({ indexId, topK = 10, clientOptions, attributeFilter, region }){\n        super();\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"retrievers\",\n                \"amazon_kendra\"\n            ]\n        });\n        Object.defineProperty(this, \"indexId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topK\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"kendraClient\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"attributeFilter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (!region) {\n            throw new Error(\"Please pass regionName field to the constructor!\");\n        }\n        if (!indexId) {\n            throw new Error(\"Please pass Kendra Index Id to the constructor\");\n        }\n        this.topK = topK;\n        this.kendraClient = new _aws_sdk_client_kendra__WEBPACK_IMPORTED_MODULE_2__.KendraClient({\n            region,\n            ...clientOptions\n        });\n        this.attributeFilter = attributeFilter;\n        this.indexId = indexId;\n    }\n    // A method to combine title and excerpt into a single string.\n    /**\n     * Combines title and excerpt into a single string.\n     * @param title The title of the document.\n     * @param excerpt An excerpt from the document.\n     * @returns A single string combining the title and excerpt.\n     */ combineText(title, excerpt) {\n        let text = \"\";\n        if (title) {\n            text += `Document Title: ${title}\\n`;\n        }\n        if (excerpt) {\n            text += `Document Excerpt: \\n${excerpt}\\n`;\n        }\n        return text;\n    }\n    // A method to clean the result text by replacing sequences of whitespace with a single space and removing ellipses.\n    /**\n     * Cleans the result text by replacing sequences of whitespace with a\n     * single space and removing ellipses.\n     * @param resText The result text to clean.\n     * @returns The cleaned result text.\n     */ cleanResult(resText) {\n        const res = resText.replace(/\\s+/g, \" \").replace(/\\.\\.\\./g, \"\");\n        return res;\n    }\n    // A method to extract the attribute value from a DocumentAttributeValue object.\n    /**\n     * Extracts the attribute value from a DocumentAttributeValue object.\n     * @param value The DocumentAttributeValue object to extract the value from.\n     * @returns The extracted attribute value.\n     */ getDocAttributeValue(value) {\n        if (value.DateValue) {\n            return value.DateValue;\n        }\n        if (value.LongValue) {\n            return value.LongValue;\n        }\n        if (value.StringListValue) {\n            return value.StringListValue;\n        }\n        if (value.StringValue) {\n            return value.StringValue;\n        }\n        return \"\";\n    }\n    // A method to extract the attribute key-value pairs from an array of DocumentAttribute objects.\n    /**\n     * Extracts the attribute key-value pairs from an array of\n     * DocumentAttribute objects.\n     * @param documentAttributes The array of DocumentAttribute objects to extract the key-value pairs from.\n     * @returns An object containing the extracted attribute key-value pairs.\n     */ getDocAttributes(documentAttributes) {\n        const attributes = {};\n        if (documentAttributes) {\n            for (const attr of documentAttributes){\n                if (attr.Key && attr.Value) {\n                    attributes[attr.Key] = this.getDocAttributeValue(attr.Value);\n                }\n            }\n        }\n        return attributes;\n    }\n    // A method to convert a RetrieveResultItem object into a Document object.\n    /**\n     * Converts a RetrieveResultItem object into a Document object.\n     * @param item The RetrieveResultItem object to convert.\n     * @returns A Document object.\n     */ convertRetrieverItem(item) {\n        const title = item.DocumentTitle || \"\";\n        const excerpt = item.Content ? this.cleanResult(item.Content) : \"\";\n        const pageContent = this.combineText(title, excerpt);\n        const source = item.DocumentURI;\n        const attributes = this.getDocAttributes(item.DocumentAttributes);\n        const metadata = {\n            source,\n            title,\n            excerpt,\n            document_attributes: attributes\n        };\n        return new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_1__.Document({\n            pageContent,\n            metadata\n        });\n    }\n    // A method to extract the top-k documents from a RetrieveCommandOutput object.\n    /**\n     * Extracts the top-k documents from a RetrieveCommandOutput object.\n     * @param response The RetrieveCommandOutput object to extract the documents from.\n     * @param pageSize The number of documents to extract.\n     * @returns An array of Document objects.\n     */ getRetrieverDocs(response, pageSize) {\n        if (!response.ResultItems) return [];\n        const { length } = response.ResultItems;\n        const count = length < pageSize ? length : pageSize;\n        return response.ResultItems.slice(0, count).map((item)=>this.convertRetrieverItem(item));\n    }\n    // A method to extract the excerpt text from a QueryResultItem object.\n    /**\n     * Extracts the excerpt text from a QueryResultItem object.\n     * @param item The QueryResultItem object to extract the excerpt text from.\n     * @returns The extracted excerpt text.\n     */ getQueryItemExcerpt(item) {\n        if (item.AdditionalAttributes && item.AdditionalAttributes.length && item.AdditionalAttributes[0].Key === \"AnswerText\") {\n            if (!item.AdditionalAttributes) {\n                return \"\";\n            }\n            if (!item.AdditionalAttributes[0]) {\n                return \"\";\n            }\n            return this.cleanResult(item.AdditionalAttributes[0].Value?.TextWithHighlightsValue?.Text || \"\");\n        } else if (item.DocumentExcerpt) {\n            return this.cleanResult(item.DocumentExcerpt.Text || \"\");\n        } else {\n            return \"\";\n        }\n    }\n    // A method to convert a QueryResultItem object into a Document object.\n    /**\n     * Converts a QueryResultItem object into a Document object.\n     * @param item The QueryResultItem object to convert.\n     * @returns A Document object.\n     */ convertQueryItem(item) {\n        const title = item.DocumentTitle?.Text || \"\";\n        const excerpt = this.getQueryItemExcerpt(item);\n        const pageContent = this.combineText(title, excerpt);\n        const source = item.DocumentURI;\n        const attributes = this.getDocAttributes(item.DocumentAttributes);\n        const metadata = {\n            source,\n            title,\n            excerpt,\n            document_attributes: attributes\n        };\n        return new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_1__.Document({\n            pageContent,\n            metadata\n        });\n    }\n    // A method to extract the top-k documents from a QueryCommandOutput object.\n    /**\n     * Extracts the top-k documents from a QueryCommandOutput object.\n     * @param response The QueryCommandOutput object to extract the documents from.\n     * @param pageSize The number of documents to extract.\n     * @returns An array of Document objects.\n     */ getQueryDocs(response, pageSize) {\n        if (!response.ResultItems) return [];\n        const { length } = response.ResultItems;\n        const count = length < pageSize ? length : pageSize;\n        return response.ResultItems.slice(0, count).map((item)=>this.convertQueryItem(item));\n    }\n    // A method to send a retrieve or query request to Kendra and return the top-k documents.\n    /**\n     * Sends a retrieve or query request to Kendra and returns the top-k\n     * documents.\n     * @param query The query to send to Kendra.\n     * @param topK The number of top documents to return.\n     * @param attributeFilter Optional filter to apply when retrieving documents.\n     * @returns A Promise that resolves to an array of Document objects.\n     */ async queryKendra(query, topK, attributeFilter) {\n        const retrieveCommand = new _aws_sdk_client_kendra__WEBPACK_IMPORTED_MODULE_3__.RetrieveCommand({\n            IndexId: this.indexId,\n            QueryText: query,\n            PageSize: topK,\n            AttributeFilter: attributeFilter\n        });\n        const retrieveResponse = await this.kendraClient.send(retrieveCommand);\n        const retriveLength = retrieveResponse.ResultItems?.length;\n        if (retriveLength === 0) {\n            // Retrieve API returned 0 results, call query API\n            const queryCommand = new _aws_sdk_client_kendra__WEBPACK_IMPORTED_MODULE_4__.QueryCommand({\n                IndexId: this.indexId,\n                QueryText: query,\n                PageSize: topK,\n                AttributeFilter: attributeFilter\n            });\n            const queryResponse = await this.kendraClient.send(queryCommand);\n            return this.getQueryDocs(queryResponse, this.topK);\n        } else {\n            return this.getRetrieverDocs(retrieveResponse, this.topK);\n        }\n    }\n    async _getRelevantDocuments(query) {\n        const docs = await this.queryKendra(query, this.topK, this.attributeFilter);\n        return docs;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvZGlzdC9yZXRyaWV2ZXJzL2tlbmRyYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBc0Y7QUFDM0I7QUFDTjtBQUNyRDs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW1CQyxHQUNNLE1BQU1LLDhCQUE4QkYscUVBQWFBO0lBQ3BELE9BQU9HLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsWUFBWSxFQUFFQyxPQUFPLEVBQUVDLE9BQU8sRUFBRSxFQUFFQyxhQUFhLEVBQUVDLGVBQWUsRUFBRUMsTUFBTSxFQUFHLENBQUU7UUFDekUsS0FBSztRQUNMQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBYTtnQkFBYzthQUFnQjtRQUN2RDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNOLFFBQVE7WUFDVCxNQUFNLElBQUlPLE1BQU07UUFDcEI7UUFDQSxJQUFJLENBQUNYLFNBQVM7WUFDVixNQUFNLElBQUlXLE1BQU07UUFDcEI7UUFDQSxJQUFJLENB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RUFBRTtRQUMvQixNQUFNWSxPQUFPLE1BQU0sSUFBSSxDQUFDYixXQUFXLENBQUNDLE9BQU8sSUFBSSxDQUFDekQsSUFBSSxFQUFFLElBQUksQ0FBQ0UsZUFBZTtRQUMxRSxPQUFPbUU7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2F3cy9kaXN0L3JldHJpZXZlcnMva2VuZHJhLmpzP2U5NWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS2VuZHJhQ2xpZW50LCBRdWVyeUNvbW1hbmQsIFJldHJpZXZlQ29tbWFuZCwgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWtlbmRyYVwiO1xuaW1wb3J0IHsgQmFzZVJldHJpZXZlciB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcmV0cmlldmVyc1wiO1xuaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2RvY3VtZW50c1wiO1xuLyoqXG4gKiBDbGFzcyBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBBbWF6b24gS2VuZHJhLCBhbiBpbnRlbGxpZ2VudCBzZWFyY2ggc2VydmljZVxuICogcHJvdmlkZWQgYnkgQVdTLiBFeHRlbmRzIHRoZSBCYXNlUmV0cmlldmVyIGNsYXNzLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHJldHJpZXZlciA9IG5ldyBBbWF6b25LZW5kcmFSZXRyaWV2ZXIoe1xuICogICB0b3BLOiAxMCxcbiAqICAgaW5kZXhJZDogXCJZT1VSX0lOREVYX0lEXCIsXG4gKiAgIHJlZ2lvbjogXCJ1cy1lYXN0LTJcIixcbiAqICAgY2xpZW50T3B0aW9uczoge1xuICogICAgIGNyZWRlbnRpYWxzOiB7XG4gKiAgICAgICBhY2Nlc3NLZXlJZDogXCJZT1VSX0FDQ0VTU19LRVlfSURcIixcbiAqICAgICAgIHNlY3JldEFjY2Vzc0tleTogXCJZT1VSX1NFQ1JFVF9BQ0NFU1NfS0VZXCIsXG4gKiAgICAgfSxcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIGNvbnN0IGRvY3MgPSBhd2FpdCByZXRyaWV2ZXIuZ2V0UmVsZXZhbnREb2N1bWVudHMoXCJIb3cgYXJlIGNsb3VkcyBmb3JtZWQ/XCIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBBbWF6b25LZW5kcmFSZXRyaWV2ZXIgZXh0ZW5kcyBCYXNlUmV0cmlldmVyIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQW1hem9uS2VuZHJhUmV0cmlldmVyXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHsgaW5kZXhJZCwgdG9wSyA9IDEwLCBjbGllbnRPcHRpb25zLCBhdHRyaWJ1dGVGaWx0ZXIsIHJlZ2lvbiwgfSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpblwiLCBcInJldHJpZXZlcnNcIiwgXCJhbWF6b25fa2VuZHJhXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmRleElkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvcEtcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia2VuZHJhQ2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF0dHJpYnV0ZUZpbHRlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlZ2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHBhc3MgcmVnaW9uTmFtZSBmaWVsZCB0byB0aGUgY29uc3RydWN0b3IhXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW5kZXhJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHBhc3MgS2VuZHJhIEluZGV4IElkIHRvIHRoZSBjb25zdHJ1Y3RvclwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvcEsgPSB0b3BLO1xuICAgICAgICB0aGlzLmtlbmRyYUNsaWVudCA9IG5ldyBLZW5kcmFDbGllbnQoe1xuICAgICAgICAgICAgcmVnaW9uLFxuICAgICAgICAgICAgLi4uY2xpZW50T3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlRmlsdGVyID0gYXR0cmlidXRlRmlsdGVyO1xuICAgICAgICB0aGlzLmluZGV4SWQgPSBpbmRleElkO1xuICAgIH1cbiAgICAvLyBBIG1ldGhvZCB0byBjb21iaW5lIHRpdGxlIGFuZCBleGNlcnB0IGludG8gYSBzaW5nbGUgc3RyaW5nLlxuICAgIC8qKlxuICAgICAqIENvbWJpbmVzIHRpdGxlIGFuZCBleGNlcnB0IGludG8gYSBzaW5nbGUgc3RyaW5nLlxuICAgICAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgb2YgdGhlIGRvY3VtZW50LlxuICAgICAqIEBwYXJhbSBleGNlcnB0IEFuIGV4Y2VycHQgZnJvbSB0aGUgZG9jdW1lbnQuXG4gICAgICogQHJldHVybnMgQSBzaW5nbGUgc3RyaW5nIGNvbWJpbmluZyB0aGUgdGl0bGUgYW5kIGV4Y2VycHQuXG4gICAgICovXG4gICAgY29tYmluZVRleHQodGl0bGUsIGV4Y2VycHQpIHtcbiAgICAgICAgbGV0IHRleHQgPSBcIlwiO1xuICAgICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgICAgIHRleHQgKz0gYERvY3VtZW50IFRpdGxlOiAke3RpdGxlfVxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4Y2VycHQpIHtcbiAgICAgICAgICAgIHRleHQgKz0gYERvY3VtZW50IEV4Y2VycHQ6IFxcbiR7ZXhjZXJwdH1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgIH1cbiAgICAvLyBBIG1ldGhvZCB0byBjbGVhbiB0aGUgcmVzdWx0IHRleHQgYnkgcmVwbGFjaW5nIHNlcXVlbmNlcyBvZiB3aGl0ZXNwYWNlIHdpdGggYSBzaW5nbGUgc3BhY2UgYW5kIHJlbW92aW5nIGVsbGlwc2VzLlxuICAgIC8qKlxuICAgICAqIENsZWFucyB0aGUgcmVzdWx0IHRleHQgYnkgcmVwbGFjaW5nIHNlcXVlbmNlcyBvZiB3aGl0ZXNwYWNlIHdpdGggYVxuICAgICAqIHNpbmdsZSBzcGFjZSBhbmQgcmVtb3ZpbmcgZWxsaXBzZXMuXG4gICAgICogQHBhcmFtIHJlc1RleHQgVGhlIHJlc3VsdCB0ZXh0IHRvIGNsZWFuLlxuICAgICAqIEByZXR1cm5zIFRoZSBjbGVhbmVkIHJlc3VsdCB0ZXh0LlxuICAgICAqL1xuICAgIGNsZWFuUmVzdWx0KHJlc1RleHQpIHtcbiAgICAgICAgY29uc3QgcmVzID0gcmVzVGV4dC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS5yZXBsYWNlKC9cXC5cXC5cXC4vZywgXCJcIik7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIC8vIEEgbWV0aG9kIHRvIGV4dHJhY3QgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBmcm9tIGEgRG9jdW1lbnRBdHRyaWJ1dGVWYWx1ZSBvYmplY3QuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdHMgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBmcm9tIGEgRG9jdW1lbnRBdHRyaWJ1dGVWYWx1ZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSBEb2N1bWVudEF0dHJpYnV0ZVZhbHVlIG9iamVjdCB0byBleHRyYWN0IHRoZSB2YWx1ZSBmcm9tLlxuICAgICAqIEByZXR1cm5zIFRoZSBleHRyYWN0ZWQgYXR0cmlidXRlIHZhbHVlLlxuICAgICAqL1xuICAgIGdldERvY0F0dHJpYnV0ZVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZS5EYXRlVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5EYXRlVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlLkxvbmdWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLkxvbmdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUuU3RyaW5nTGlzdFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuU3RyaW5nTGlzdFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZS5TdHJpbmdWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLlN0cmluZ1ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgICAvLyBBIG1ldGhvZCB0byBleHRyYWN0IHRoZSBhdHRyaWJ1dGUga2V5LXZhbHVlIHBhaXJzIGZyb20gYW4gYXJyYXkgb2YgRG9jdW1lbnRBdHRyaWJ1dGUgb2JqZWN0cy5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyB0aGUgYXR0cmlidXRlIGtleS12YWx1ZSBwYWlycyBmcm9tIGFuIGFycmF5IG9mXG4gICAgICogRG9jdW1lbnRBdHRyaWJ1dGUgb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRBdHRyaWJ1dGVzIFRoZSBhcnJheSBvZiBEb2N1bWVudEF0dHJpYnV0ZSBvYmplY3RzIHRvIGV4dHJhY3QgdGhlIGtleS12YWx1ZSBwYWlycyBmcm9tLlxuICAgICAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBleHRyYWN0ZWQgYXR0cmlidXRlIGtleS12YWx1ZSBwYWlycy5cbiAgICAgKi9cbiAgICBnZXREb2NBdHRyaWJ1dGVzKGRvY3VtZW50QXR0cmlidXRlcykge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0ge307XG4gICAgICAgIGlmIChkb2N1bWVudEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYXR0ciBvZiBkb2N1bWVudEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5LZXkgJiYgYXR0ci5WYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzW2F0dHIuS2V5XSA9IHRoaXMuZ2V0RG9jQXR0cmlidXRlVmFsdWUoYXR0ci5WYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVzO1xuICAgIH1cbiAgICAvLyBBIG1ldGhvZCB0byBjb252ZXJ0IGEgUmV0cmlldmVSZXN1bHRJdGVtIG9iamVjdCBpbnRvIGEgRG9jdW1lbnQgb2JqZWN0LlxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgUmV0cmlldmVSZXN1bHRJdGVtIG9iamVjdCBpbnRvIGEgRG9jdW1lbnQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSBpdGVtIFRoZSBSZXRyaWV2ZVJlc3VsdEl0ZW0gb2JqZWN0IHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMgQSBEb2N1bWVudCBvYmplY3QuXG4gICAgICovXG4gICAgY29udmVydFJldHJpZXZlckl0ZW0oaXRlbSkge1xuICAgICAgICBjb25zdCB0aXRsZSA9IGl0ZW0uRG9jdW1lbnRUaXRsZSB8fCBcIlwiO1xuICAgICAgICBjb25zdCBleGNlcnB0ID0gaXRlbS5Db250ZW50ID8gdGhpcy5jbGVhblJlc3VsdChpdGVtLkNvbnRlbnQpIDogXCJcIjtcbiAgICAgICAgY29uc3QgcGFnZUNvbnRlbnQgPSB0aGlzLmNvbWJpbmVUZXh0KHRpdGxlLCBleGNlcnB0KTtcbiAgICAgICAgY29uc3Qgc291cmNlID0gaXRlbS5Eb2N1bWVudFVSSTtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHRoaXMuZ2V0RG9jQXR0cmlidXRlcyhpdGVtLkRvY3VtZW50QXR0cmlidXRlcyk7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0ge1xuICAgICAgICAgICAgc291cmNlLFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBleGNlcnB0LFxuICAgICAgICAgICAgZG9jdW1lbnRfYXR0cmlidXRlczogYXR0cmlidXRlcyxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudCh7IHBhZ2VDb250ZW50LCBtZXRhZGF0YSB9KTtcbiAgICB9XG4gICAgLy8gQSBtZXRob2QgdG8gZXh0cmFjdCB0aGUgdG9wLWsgZG9jdW1lbnRzIGZyb20gYSBSZXRyaWV2ZUNvbW1hbmRPdXRwdXQgb2JqZWN0LlxuICAgIC8qKlxuICAgICAqIEV4dHJhY3RzIHRoZSB0b3AtayBkb2N1bWVudHMgZnJvbSBhIFJldHJpZXZlQ29tbWFuZE91dHB1dCBvYmplY3QuXG4gICAgICogQHBhcmFtIHJlc3BvbnNlIFRoZSBSZXRyaWV2ZUNvbW1hbmRPdXRwdXQgb2JqZWN0IHRvIGV4dHJhY3QgdGhlIGRvY3VtZW50cyBmcm9tLlxuICAgICAqIEBwYXJhbSBwYWdlU2l6ZSBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0byBleHRyYWN0LlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIERvY3VtZW50IG9iamVjdHMuXG4gICAgICovXG4gICAgZ2V0UmV0cmlldmVyRG9jcyhyZXNwb25zZSwgcGFnZVNpemUpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5SZXN1bHRJdGVtcylcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHJlc3BvbnNlLlJlc3VsdEl0ZW1zO1xuICAgICAgICBjb25zdCBjb3VudCA9IGxlbmd0aCA8IHBhZ2VTaXplID8gbGVuZ3RoIDogcGFnZVNpemU7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5SZXN1bHRJdGVtcy5zbGljZSgwLCBjb3VudCkubWFwKChpdGVtKSA9PiB0aGlzLmNvbnZlcnRSZXRyaWV2ZXJJdGVtKGl0ZW0pKTtcbiAgICB9XG4gICAgLy8gQSBtZXRob2QgdG8gZXh0cmFjdCB0aGUgZXhjZXJwdCB0ZXh0IGZyb20gYSBRdWVyeVJlc3VsdEl0ZW0gb2JqZWN0LlxuICAgIC8qKlxuICAgICAqIEV4dHJhY3RzIHRoZSBleGNlcnB0IHRleHQgZnJvbSBhIFF1ZXJ5UmVzdWx0SXRlbSBvYmplY3QuXG4gICAgICogQHBhcmFtIGl0ZW0gVGhlIFF1ZXJ5UmVzdWx0SXRlbSBvYmplY3QgdG8gZXh0cmFjdCB0aGUgZXhjZXJwdCB0ZXh0IGZyb20uXG4gICAgICogQHJldHVybnMgVGhlIGV4dHJhY3RlZCBleGNlcnB0IHRleHQuXG4gICAgICovXG4gICAgZ2V0UXVlcnlJdGVtRXhjZXJwdChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtLkFkZGl0aW9uYWxBdHRyaWJ1dGVzICYmXG4gICAgICAgICAgICBpdGVtLkFkZGl0aW9uYWxBdHRyaWJ1dGVzLmxlbmd0aCAmJlxuICAgICAgICAgICAgaXRlbS5BZGRpdGlvbmFsQXR0cmlidXRlc1swXS5LZXkgPT09IFwiQW5zd2VyVGV4dFwiKSB7XG4gICAgICAgICAgICBpZiAoIWl0ZW0uQWRkaXRpb25hbEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXRlbS5BZGRpdGlvbmFsQXR0cmlidXRlc1swXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xlYW5SZXN1bHQoaXRlbS5BZGRpdGlvbmFsQXR0cmlidXRlc1swXS5WYWx1ZT8uVGV4dFdpdGhIaWdobGlnaHRzVmFsdWU/LlRleHQgfHwgXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbS5Eb2N1bWVudEV4Y2VycHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFuUmVzdWx0KGl0ZW0uRG9jdW1lbnRFeGNlcnB0LlRleHQgfHwgXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBBIG1ldGhvZCB0byBjb252ZXJ0IGEgUXVlcnlSZXN1bHRJdGVtIG9iamVjdCBpbnRvIGEgRG9jdW1lbnQgb2JqZWN0LlxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgUXVlcnlSZXN1bHRJdGVtIG9iamVjdCBpbnRvIGEgRG9jdW1lbnQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSBpdGVtIFRoZSBRdWVyeVJlc3VsdEl0ZW0gb2JqZWN0IHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMgQSBEb2N1bWVudCBvYmplY3QuXG4gICAgICovXG4gICAgY29udmVydFF1ZXJ5SXRlbShpdGVtKSB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gaXRlbS5Eb2N1bWVudFRpdGxlPy5UZXh0IHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IGV4Y2VycHQgPSB0aGlzLmdldFF1ZXJ5SXRlbUV4Y2VycHQoaXRlbSk7XG4gICAgICAgIGNvbnN0IHBhZ2VDb250ZW50ID0gdGhpcy5jb21iaW5lVGV4dCh0aXRsZSwgZXhjZXJwdCk7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IGl0ZW0uRG9jdW1lbnRVUkk7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB0aGlzLmdldERvY0F0dHJpYnV0ZXMoaXRlbS5Eb2N1bWVudEF0dHJpYnV0ZXMpO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgZXhjZXJwdCxcbiAgICAgICAgICAgIGRvY3VtZW50X2F0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQoeyBwYWdlQ29udGVudCwgbWV0YWRhdGEgfSk7XG4gICAgfVxuICAgIC8vIEEgbWV0aG9kIHRvIGV4dHJhY3QgdGhlIHRvcC1rIGRvY3VtZW50cyBmcm9tIGEgUXVlcnlDb21tYW5kT3V0cHV0IG9iamVjdC5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyB0aGUgdG9wLWsgZG9jdW1lbnRzIGZyb20gYSBRdWVyeUNvbW1hbmRPdXRwdXQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSByZXNwb25zZSBUaGUgUXVlcnlDb21tYW5kT3V0cHV0IG9iamVjdCB0byBleHRyYWN0IHRoZSBkb2N1bWVudHMgZnJvbS5cbiAgICAgKiBAcGFyYW0gcGFnZVNpemUgVGhlIG51bWJlciBvZiBkb2N1bWVudHMgdG8gZXh0cmFjdC5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBEb2N1bWVudCBvYmplY3RzLlxuICAgICAqL1xuICAgIGdldFF1ZXJ5RG9jcyhyZXNwb25zZSwgcGFnZVNpemUpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5SZXN1bHRJdGVtcylcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHJlc3BvbnNlLlJlc3VsdEl0ZW1zO1xuICAgICAgICBjb25zdCBjb3VudCA9IGxlbmd0aCA8IHBhZ2VTaXplID8gbGVuZ3RoIDogcGFnZVNpemU7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5SZXN1bHRJdGVtcy5zbGljZSgwLCBjb3VudCkubWFwKChpdGVtKSA9PiB0aGlzLmNvbnZlcnRRdWVyeUl0ZW0oaXRlbSkpO1xuICAgIH1cbiAgICAvLyBBIG1ldGhvZCB0byBzZW5kIGEgcmV0cmlldmUgb3IgcXVlcnkgcmVxdWVzdCB0byBLZW5kcmEgYW5kIHJldHVybiB0aGUgdG9wLWsgZG9jdW1lbnRzLlxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgcmV0cmlldmUgb3IgcXVlcnkgcmVxdWVzdCB0byBLZW5kcmEgYW5kIHJldHVybnMgdGhlIHRvcC1rXG4gICAgICogZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgdG8gc2VuZCB0byBLZW5kcmEuXG4gICAgICogQHBhcmFtIHRvcEsgVGhlIG51bWJlciBvZiB0b3AgZG9jdW1lbnRzIHRvIHJldHVybi5cbiAgICAgKiBAcGFyYW0gYXR0cmlidXRlRmlsdGVyIE9wdGlvbmFsIGZpbHRlciB0byBhcHBseSB3aGVuIHJldHJpZXZpbmcgZG9jdW1lbnRzLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIERvY3VtZW50IG9iamVjdHMuXG4gICAgICovXG4gICAgYXN5bmMgcXVlcnlLZW5kcmEocXVlcnksIHRvcEssIGF0dHJpYnV0ZUZpbHRlcikge1xuICAgICAgICBjb25zdCByZXRyaWV2ZUNvbW1hbmQgPSBuZXcgUmV0cmlldmVDb21tYW5kKHtcbiAgICAgICAgICAgIEluZGV4SWQ6IHRoaXMuaW5kZXhJZCxcbiAgICAgICAgICAgIFF1ZXJ5VGV4dDogcXVlcnksXG4gICAgICAgICAgICBQYWdlU2l6ZTogdG9wSyxcbiAgICAgICAgICAgIEF0dHJpYnV0ZUZpbHRlcjogYXR0cmlidXRlRmlsdGVyLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmV0cmlldmVSZXNwb25zZSA9IGF3YWl0IHRoaXMua2VuZHJhQ2xpZW50LnNlbmQocmV0cmlldmVDb21tYW5kKTtcbiAgICAgICAgY29uc3QgcmV0cml2ZUxlbmd0aCA9IHJldHJpZXZlUmVzcG9uc2UuUmVzdWx0SXRlbXM/Lmxlbmd0aDtcbiAgICAgICAgaWYgKHJldHJpdmVMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIFJldHJpZXZlIEFQSSByZXR1cm5lZCAwIHJlc3VsdHMsIGNhbGwgcXVlcnkgQVBJXG4gICAgICAgICAgICBjb25zdCBxdWVyeUNvbW1hbmQgPSBuZXcgUXVlcnlDb21tYW5kKHtcbiAgICAgICAgICAgICAgICBJbmRleElkOiB0aGlzLmluZGV4SWQsXG4gICAgICAgICAgICAgICAgUXVlcnlUZXh0OiBxdWVyeSxcbiAgICAgICAgICAgICAgICBQYWdlU2l6ZTogdG9wSyxcbiAgICAgICAgICAgICAgICBBdHRyaWJ1dGVGaWx0ZXI6IGF0dHJpYnV0ZUZpbHRlcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcXVlcnlSZXNwb25zZSA9IGF3YWl0IHRoaXMua2VuZHJhQ2xpZW50LnNlbmQocXVlcnlDb21tYW5kKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFF1ZXJ5RG9jcyhxdWVyeVJlc3BvbnNlLCB0aGlzLnRvcEspO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmV0cmlldmVyRG9jcyhyZXRyaWV2ZVJlc3BvbnNlLCB0aGlzLnRvcEspO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIF9nZXRSZWxldmFudERvY3VtZW50cyhxdWVyeSkge1xuICAgICAgICBjb25zdCBkb2NzID0gYXdhaXQgdGhpcy5xdWVyeUtlbmRyYShxdWVyeSwgdGhpcy50b3BLLCB0aGlzLmF0dHJpYnV0ZUZpbHRlcik7XG4gICAgICAgIHJldHVybiBkb2NzO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJLZW5kcmFDbGllbnQiLCJRdWVyeUNvbW1hbmQiLCJSZXRyaWV2ZUNvbW1hbmQiLCJCYXNlUmV0cmlldmVyIiwiRG9jdW1lbnQiLCJBbWF6b25LZW5kcmFSZXRyaWV2ZXIiLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJpbmRleElkIiwidG9wSyIsImNsaWVudE9wdGlvbnMiLCJhdHRyaWJ1dGVGaWx0ZXIiLCJyZWdpb24iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiRXJyb3IiLCJrZW5kcmFDbGllbnQiLCJjb21iaW5lVGV4dCIsInRpdGxlIiwiZXhjZXJwdCIsInRleHQiLCJjbGVhblJlc3VsdCIsInJlc1RleHQiLCJyZXMiLCJyZXBsYWNlIiwiZ2V0RG9jQXR0cmlidXRlVmFsdWUiLCJEYXRlVmFsdWUiLCJMb25nVmFsdWUiLCJTdHJpbmdMaXN0VmFsdWUiLCJTdHJpbmdWYWx1ZSIsImdldERvY0F0dHJpYnV0ZXMiLCJkb2N1bWVudEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwiYXR0ciIsIktleSIsIlZhbHVlIiwiY29udmVydFJldHJpZXZlckl0ZW0iLCJpdGVtIiwiRG9jdW1lbnRUaXRsZSIsIkNvbnRlbnQiLCJwYWdlQ29udGVudCIsInNvdXJjZSIsIkRvY3VtZW50VVJJIiwiRG9jdW1lbnRBdHRyaWJ1dGVzIiwibWV0YWRhdGEiLCJkb2N1bWVudF9hdHRyaWJ1dGVzIiwiZ2V0UmV0cmlldmVyRG9jcyIsInJlc3BvbnNlIiwicGFnZVNpemUiLCJSZXN1bHRJdGVtcyIsImxlbmd0aCIsImNvdW50Iiwic2xpY2UiLCJtYXAiLCJnZXRRdWVyeUl0ZW1FeGNlcnB0IiwiQWRkaXRpb25hbEF0dHJpYnV0ZXMiLCJUZXh0V2l0aEhpZ2hsaWdodHNWYWx1ZSIsIlRleHQiLCJEb2N1bWVudEV4Y2VycHQiLCJjb252ZXJ0UXVlcnlJdGVtIiwiZ2V0UXVlcnlEb2NzIiwicXVlcnlLZW5kcmEiLCJxdWVyeSIsInJldHJpZXZlQ29tbWFuZCIsIkluZGV4SWQiLCJRdWVyeVRleHQiLCJQYWdlU2l6ZSIsIkF0dHJpYnV0ZUZpbHRlciIsInJldHJpZXZlUmVzcG9uc2UiLCJzZW5kIiwicmV0cml2ZUxlbmd0aCIsInF1ZXJ5Q29tbWFuZCIsInF1ZXJ5UmVzcG9uc2UiLCJfZ2V0UmVsZXZhbnREb2N1bWVudHMiLCJkb2NzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/aws/dist/retrievers/kendra.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/aws/dist/types.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/aws/dist/types.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvZGlzdC90eXBlcy5qcyIsIm1hcHBpbmdzIjoiO0FBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vYXdzL2Rpc3QvdHlwZXMuanM/ZDM0MiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQge307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/aws/dist/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/aws/index.js":
/*!**********************************************!*\
  !*** ./node_modules/@langchain/aws/index.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AmazonKendraRetriever: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.AmazonKendraRetriever),\n/* harmony export */   AmazonKnowledgeBaseRetriever: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.AmazonKnowledgeBaseRetriever),\n/* harmony export */   BedrockEmbeddings: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.BedrockEmbeddings),\n/* harmony export */   ChatBedrockConverse: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatBedrockConverse)\n/* harmony export */ });\n/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ \"(rsc)/./node_modules/@langchain/aws/dist/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hd3MvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vYXdzL2luZGV4LmpzP2ZjY2QiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/aws/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/caches/base.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/caches/base.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCache: () => (/* binding */ BaseCache),\n/* harmony export */   InMemoryCache: () => (/* binding */ InMemoryCache),\n/* harmony export */   deserializeStoredGeneration: () => (/* binding */ deserializeStoredGeneration),\n/* harmony export */   getCacheKey: () => (/* binding */ getCacheKey),\n/* harmony export */   serializeGeneration: () => (/* binding */ serializeGeneration)\n/* harmony export */ });\n/* harmony import */ var _utils_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/hash.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n\n\n/**\n * This cache key should be consistent across all versions of LangChain.\n * It is currently NOT consistent across versions of LangChain.\n *\n * A huge benefit of having a remote cache (like redis) is that you can\n * access the cache from different processes/machines. The allows you to\n * separate concerns and scale horizontally.\n *\n * TODO: Make cache key consistent across versions of LangChain.\n *\n * @deprecated Use `makeDefaultKeyEncoder()` to create a custom key encoder.\n * This function will be removed in a future version.\n */ const getCacheKey = (...strings)=>(0,_utils_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)(strings.join(\"_\"));\nfunction deserializeStoredGeneration(storedGeneration) {\n    if (storedGeneration.message !== undefined) {\n        return {\n            text: storedGeneration.text,\n            message: (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_1__.mapStoredMessageToChatMessage)(storedGeneration.message)\n        };\n    } else {\n        return {\n            text: storedGeneration.text\n        };\n    }\n}\nfunction serializeGeneration(generation) {\n    const serializedValue = {\n        text: generation.text\n    };\n    if (generation.message !== undefined) {\n        serializedValue.message = generation.message.toDict();\n    }\n    return serializedValue;\n}\n/**\n * Base class for all caches. All caches should extend this class.\n */ class BaseCache {\n    constructor(){\n        // For backwards compatibility, we use a default key encoder\n        // that uses SHA-1 to hash the prompt and LLM key. This will also print a warning\n        // about the security implications of using SHA-1 as a cache key.\n        Object.defineProperty(this, \"keyEncoder\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: getCacheKey\n        });\n    }\n    /**\n     * Sets a custom key encoder function for the cache.\n     * This function should take a prompt and an LLM key and return a string\n     * that will be used as the cache key.\n     * @param keyEncoderFn The custom key encoder function.\n     */ makeDefaultKeyEncoder(keyEncoderFn) {\n        this.keyEncoder = keyEncoderFn;\n    }\n}\nconst GLOBAL_MAP = new Map();\n/**\n * A cache for storing LLM generations that stores data in memory.\n */ class InMemoryCache extends BaseCache {\n    constructor(map){\n        super();\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.cache = map ?? new Map();\n    }\n    /**\n     * Retrieves data from the cache using a prompt and an LLM key. If the\n     * data is not found, it returns null.\n     * @param prompt The prompt used to find the data.\n     * @param llmKey The LLM key used to find the data.\n     * @returns The data corresponding to the prompt and LLM key, or null if not found.\n     */ lookup(prompt, llmKey) {\n        return Promise.resolve(this.cache.get(this.keyEncoder(prompt, llmKey)) ?? null);\n    }\n    /**\n     * Updates the cache with new data using a prompt and an LLM key.\n     * @param prompt The prompt used to store the data.\n     * @param llmKey The LLM key used to store the data.\n     * @param value The data to be stored.\n     */ async update(prompt, llmKey, value) {\n        this.cache.set(this.keyEncoder(prompt, llmKey), value);\n    }\n    /**\n     * Returns a global instance of InMemoryCache using a predefined global\n     * map as the initial cache.\n     * @returns A global instance of InMemoryCache.\n     */ static global() {\n        return new InMemoryCache(GLOBAL_MAP);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FjaGVzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFnRDtBQUNxQjtBQUNyRTs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxNQUFNRSxjQUFjLENBQUMsR0FBR0MsVUFBWUgsNERBQVlBLENBQUNHLFFBQVFDLElBQUksQ0FBQyxNQUFNO0FBQ3BFLFNBQVNDLDRCQUE0QkMsZ0JBQWdCO0lBQ3hELElBQUlBLGlCQUFpQkMsT0FBTyxLQUFLQyxXQUFXO1FBQ3hDLE9BQU87WUFDSEMsTUFBTUgsaUJBQWlCRyxJQUFJO1lBQzNCRixTQUFTTixpRkFBNkJBLENBQUNLLGlCQUFpQkMsT0FBTztRQUNuRTtJQUNKLE9BQ0s7UUFDRCxPQUFPO1lBQUVFLE1BQU1ILGlCQUFpQkcsSUFBSTtRQUFDO0lBQ3pDO0FBQ0o7QUFDTyxTQUFTQyxvQkFBb0JDLFVBQVU7SUFDMUMsTUFBTUMsa0JBQWtCO1FBQ3BCSCxNQUFNRSxXQUFXRixJQUFJO0lBQ3pCO0lBQ0EsSUFBSUUsV0FBV0osT0FBTyxLQUFLQyxXQUFXO1FBQ2xDSSxnQkFBZ0JMLE9BQU8sR0FBR0ksV0FBV0osT0FBTyxDQUFDTSxNQUFNO0lBQ3ZEO0lBQ0EsT0FBT0Q7QUFDWDtBQUNBOztDQUVDLEdBQ00sTUFBTUU7SUFDVEMsYUFBYztRQUNWLDREQUE0RDtRQUM1RCxpRkFBaUY7UUFDakYsaUVBQWlFO1FBQ2pFQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9uQjtRQUNYO0lBQ0o7SUFDQTs7Ozs7S0FLQyxHQUNEb0Isc0JBQXNCQyxZQUFZLEVBQUU7UUFDaEMsSUFBSSxDQUFDQyxVQUFVLEdBQUdEO0lBQ3RCO0FBQ0o7QUFDQSxNQUFNRSxhQUFhLElBQUlDO0FBQ3ZCOztDQUVDLEdBQ00sTUFBTUMsc0JBQXNCYjtJQUMvQkMsWUFBWWEsR0FBRyxDQUFFO1FBQ2IsS0FBSztRQUNMWixPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1EsS0FBSyxHQUFHRCxPQUFPLElBQUlGO0lBQzVCO0lBQ0E7Ozs7OztLQU1DLEdBQ0RJLE9BQU9DLE1BQU0sRUFBRUMsTUFBTSxFQUFFO1FBQ25CLE9BQU9DLFFBQVFDLE9BQU8sQ0FBQyxJQUFJLENBQUNMLEtBQUssQ0FBQ00sR0FBRyxDQUFDLElBQUksQ0FBQ1gsVUFBVSxDQUFDTyxRQUFRQyxZQUFZO0lBQzlFO0lBQ0E7Ozs7O0tBS0MsR0FDRCxNQUFNSSxPQUFPTCxNQUFNLEVBQUVDLE1BQU0sRUFBRVgsS0FBSyxFQUFFO1FBQ2hDLElBQUksQ0FBQ1EsS0FBSyxDQUFDUSxHQUFHLENBQUMsSUFBSSxDQUFDYixVQUFVLENBQUNPLFFBQVFDLFNBQVNYO0lBQ3BEO0lBQ0E7Ozs7S0FJQyxHQUNELE9BQU9pQixTQUFTO1FBQ1osT0FBTyxJQUFJWCxjQUFjRjtJQUM3QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWNoZXMvYmFzZS5qcz9hMjc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluc2VjdXJlSGFzaCB9IGZyb20gXCIuLi91dGlscy9oYXNoLmpzXCI7XG5pbXBvcnQgeyBtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZSB9IGZyb20gXCIuLi9tZXNzYWdlcy91dGlscy5qc1wiO1xuLyoqXG4gKiBUaGlzIGNhY2hlIGtleSBzaG91bGQgYmUgY29uc2lzdGVudCBhY3Jvc3MgYWxsIHZlcnNpb25zIG9mIExhbmdDaGFpbi5cbiAqIEl0IGlzIGN1cnJlbnRseSBOT1QgY29uc2lzdGVudCBhY3Jvc3MgdmVyc2lvbnMgb2YgTGFuZ0NoYWluLlxuICpcbiAqIEEgaHVnZSBiZW5lZml0IG9mIGhhdmluZyBhIHJlbW90ZSBjYWNoZSAobGlrZSByZWRpcykgaXMgdGhhdCB5b3UgY2FuXG4gKiBhY2Nlc3MgdGhlIGNhY2hlIGZyb20gZGlmZmVyZW50IHByb2Nlc3Nlcy9tYWNoaW5lcy4gVGhlIGFsbG93cyB5b3UgdG9cbiAqIHNlcGFyYXRlIGNvbmNlcm5zIGFuZCBzY2FsZSBob3Jpem9udGFsbHkuXG4gKlxuICogVE9ETzogTWFrZSBjYWNoZSBrZXkgY29uc2lzdGVudCBhY3Jvc3MgdmVyc2lvbnMgb2YgTGFuZ0NoYWluLlxuICpcbiAqIEBkZXByZWNhdGVkIFVzZSBgbWFrZURlZmF1bHRLZXlFbmNvZGVyKClgIHRvIGNyZWF0ZSBhIGN1c3RvbSBrZXkgZW5jb2Rlci5cbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDYWNoZUtleSA9ICguLi5zdHJpbmdzKSA9PiBpbnNlY3VyZUhhc2goc3RyaW5ncy5qb2luKFwiX1wiKSk7XG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVTdG9yZWRHZW5lcmF0aW9uKHN0b3JlZEdlbmVyYXRpb24pIHtcbiAgICBpZiAoc3RvcmVkR2VuZXJhdGlvbi5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRleHQ6IHN0b3JlZEdlbmVyYXRpb24udGV4dCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlKHN0b3JlZEdlbmVyYXRpb24ubWVzc2FnZSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4geyB0ZXh0OiBzdG9yZWRHZW5lcmF0aW9uLnRleHQgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplR2VuZXJhdGlvbihnZW5lcmF0aW9uKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZFZhbHVlID0ge1xuICAgICAgICB0ZXh0OiBnZW5lcmF0aW9uLnRleHQsXG4gICAgfTtcbiAgICBpZiAoZ2VuZXJhdGlvbi5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2VyaWFsaXplZFZhbHVlLm1lc3NhZ2UgPSBnZW5lcmF0aW9uLm1lc3NhZ2UudG9EaWN0KCk7XG4gICAgfVxuICAgIHJldHVybiBzZXJpYWxpemVkVmFsdWU7XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBjYWNoZXMuIEFsbCBjYWNoZXMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUNhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCB3ZSB1c2UgYSBkZWZhdWx0IGtleSBlbmNvZGVyXG4gICAgICAgIC8vIHRoYXQgdXNlcyBTSEEtMSB0byBoYXNoIHRoZSBwcm9tcHQgYW5kIExMTSBrZXkuIFRoaXMgd2lsbCBhbHNvIHByaW50IGEgd2FybmluZ1xuICAgICAgICAvLyBhYm91dCB0aGUgc2VjdXJpdHkgaW1wbGljYXRpb25zIG9mIHVzaW5nIFNIQS0xIGFzIGEgY2FjaGUga2V5LlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrZXlFbmNvZGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBnZXRDYWNoZUtleVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhIGN1c3RvbSBrZXkgZW5jb2RlciBmdW5jdGlvbiBmb3IgdGhlIGNhY2hlLlxuICAgICAqIFRoaXMgZnVuY3Rpb24gc2hvdWxkIHRha2UgYSBwcm9tcHQgYW5kIGFuIExMTSBrZXkgYW5kIHJldHVybiBhIHN0cmluZ1xuICAgICAqIHRoYXQgd2lsbCBiZSB1c2VkIGFzIHRoZSBjYWNoZSBrZXkuXG4gICAgICogQHBhcmFtIGtleUVuY29kZXJGbiBUaGUgY3VzdG9tIGtleSBlbmNvZGVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIG1ha2VEZWZhdWx0S2V5RW5jb2RlcihrZXlFbmNvZGVyRm4pIHtcbiAgICAgICAgdGhpcy5rZXlFbmNvZGVyID0ga2V5RW5jb2RlckZuO1xuICAgIH1cbn1cbmNvbnN0IEdMT0JBTF9NQVAgPSBuZXcgTWFwKCk7XG4vKipcbiAqIEEgY2FjaGUgZm9yIHN0b3JpbmcgTExNIGdlbmVyYXRpb25zIHRoYXQgc3RvcmVzIGRhdGEgaW4gbWVtb3J5LlxuICovXG5leHBvcnQgY2xhc3MgSW5NZW1vcnlDYWNoZSBleHRlbmRzIEJhc2VDYWNoZSB7XG4gICAgY29uc3RydWN0b3IobWFwKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhY2hlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBtYXAgPz8gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgZGF0YSBmcm9tIHRoZSBjYWNoZSB1c2luZyBhIHByb21wdCBhbmQgYW4gTExNIGtleS4gSWYgdGhlXG4gICAgICogZGF0YSBpcyBub3QgZm91bmQsIGl0IHJldHVybnMgbnVsbC5cbiAgICAgKiBAcGFyYW0gcHJvbXB0IFRoZSBwcm9tcHQgdXNlZCB0byBmaW5kIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSBsbG1LZXkgVGhlIExMTSBrZXkgdXNlZCB0byBmaW5kIHRoZSBkYXRhLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb21wdCBhbmQgTExNIGtleSwgb3IgbnVsbCBpZiBub3QgZm91bmQuXG4gICAgICovXG4gICAgbG9va3VwKHByb21wdCwgbGxtS2V5KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jYWNoZS5nZXQodGhpcy5rZXlFbmNvZGVyKHByb21wdCwgbGxtS2V5KSkgPz8gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNhY2hlIHdpdGggbmV3IGRhdGEgdXNpbmcgYSBwcm9tcHQgYW5kIGFuIExMTSBrZXkuXG4gICAgICogQHBhcmFtIHByb21wdCBUaGUgcHJvbXB0IHVzZWQgdG8gc3RvcmUgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGxsbUtleSBUaGUgTExNIGtleSB1c2VkIHRvIHN0b3JlIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgZGF0YSB0byBiZSBzdG9yZWQuXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlKHByb21wdCwgbGxtS2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmNhY2hlLnNldCh0aGlzLmtleUVuY29kZXIocHJvbXB0LCBsbG1LZXkpLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBnbG9iYWwgaW5zdGFuY2Ugb2YgSW5NZW1vcnlDYWNoZSB1c2luZyBhIHByZWRlZmluZWQgZ2xvYmFsXG4gICAgICogbWFwIGFzIHRoZSBpbml0aWFsIGNhY2hlLlxuICAgICAqIEByZXR1cm5zIEEgZ2xvYmFsIGluc3RhbmNlIG9mIEluTWVtb3J5Q2FjaGUuXG4gICAgICovXG4gICAgc3RhdGljIGdsb2JhbCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbk1lbW9yeUNhY2hlKEdMT0JBTF9NQVApO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJpbnNlY3VyZUhhc2giLCJtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZSIsImdldENhY2hlS2V5Iiwic3RyaW5ncyIsImpvaW4iLCJkZXNlcmlhbGl6ZVN0b3JlZEdlbmVyYXRpb24iLCJzdG9yZWRHZW5lcmF0aW9uIiwibWVzc2FnZSIsInVuZGVmaW5lZCIsInRleHQiLCJzZXJpYWxpemVHZW5lcmF0aW9uIiwiZ2VuZXJhdGlvbiIsInNlcmlhbGl6ZWRWYWx1ZSIsInRvRGljdCIsIkJhc2VDYWNoZSIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm1ha2VEZWZhdWx0S2V5RW5jb2RlciIsImtleUVuY29kZXJGbiIsImtleUVuY29kZXIiLCJHTE9CQUxfTUFQIiwiTWFwIiwiSW5NZW1vcnlDYWNoZSIsIm1hcCIsImNhY2hlIiwibG9va3VwIiwicHJvbXB0IiwibGxtS2V5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXQiLCJ1cGRhdGUiLCJzZXQiLCJnbG9iYWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/caches/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackHandler: () => (/* binding */ BaseCallbackHandler),\n/* harmony export */   callbackHandlerPrefersStreaming: () => (/* binding */ callbackHandlerPrefersStreaming),\n/* harmony export */   isBaseCallbackHandler: () => (/* binding */ isBaseCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n\n\n/**\n * Abstract class that provides a set of optional methods that can be\n * overridden in derived classes to handle various events during the\n * execution of a LangChain application.\n */ class BaseCallbackHandlerMethodsClass {\n}\nfunction callbackHandlerPrefersStreaming(x) {\n    return \"lc_prefer_streaming\" in x && x.lc_prefer_streaming;\n}\n/**\n * Abstract base class for creating callback handlers in the LangChain\n * framework. It provides a set of optional methods that can be overridden\n * in derived classes to handle various events during the execution of a\n * LangChain application.\n */ class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {\n    get lc_namespace() {\n        return [\n            \"langchain_core\",\n            \"callbacks\",\n            this.name\n        ];\n    }\n    get lc_secrets() {\n        return undefined;\n    }\n    get lc_attributes() {\n        return undefined;\n    }\n    get lc_aliases() {\n        return undefined;\n    }\n    get lc_serializable_keys() {\n        return undefined;\n    }\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            (0,_load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.get_lc_unique_name)(this.constructor)\n        ];\n    }\n    constructor(input){\n        super();\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ignoreLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreAgent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreCustomEvent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"raiseError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"awaitHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") === \"false\"\n        });\n        this.lc_kwargs = input || {};\n        if (input) {\n            this.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n            this.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n            this.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n            this.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n            this.ignoreCustomEvent = input.ignoreCustomEvent ?? this.ignoreCustomEvent;\n            this.raiseError = input.raiseError ?? this.raiseError;\n            this.awaitHandlers = this.raiseError || (input._awaitHandler ?? this.awaitHandlers);\n        }\n    }\n    copy() {\n        return new this.constructor(this);\n    }\n    toJSON() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSON.call(this);\n    }\n    toJSONNotImplemented() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSONNotImplemented.call(this);\n    }\n    static fromMethods(methods) {\n        class Handler extends BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"]()\n                });\n                Object.assign(this, methods);\n            }\n        }\n        return new Handler();\n    }\n}\nconst isBaseCallbackHandler = (x)=>{\n    const callbackHandler = x;\n    return callbackHandler !== undefined && typeof callbackHandler.copy === \"function\" && typeof callbackHandler.name === \"string\" && typeof callbackHandler.awaitHandlers === \"boolean\";\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTZCO0FBQytDO0FBQ25CO0FBQ3pEOzs7O0NBSUMsR0FDRCxNQUFNSTtBQUNOO0FBQ08sU0FBU0MsZ0NBQWdDQyxDQUFDO0lBQzdDLE9BQU8seUJBQXlCQSxLQUFLQSxFQUFFQyxtQkFBbUI7QUFDOUQ7QUFDQTs7Ozs7Q0FLQyxHQUNNLE1BQU1DLDRCQUE0Qko7SUFDckMsSUFBSUssZUFBZTtRQUNmLE9BQU87WUFBQztZQUFrQjtZQUFhLElBQUksQ0FBQ0MsSUFBSTtTQUFDO0lBQ3JEO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLE9BQU9DO0lBQ1g7SUFDQSxJQUFJQyxnQkFBZ0I7UUFDaEIsT0FBT0Q7SUFDWDtJQUNBLElBQUlFLGFBQWE7UUFDYixPQUFPRjtJQUNYO0lBQ0EsSUFBSUcsdUJBQXVCO1FBQ3ZCLE9BQU9IO0lBQ1g7SUFDQTs7Ozs7S0FLQyxHQUNELE9BQU9JLFVBQVU7UUFDYixPQUFPLElBQUksQ0FBQ04sSUFBSTtJQUNwQjtJQUNBOztLQUVDLEdBQ0QsSUFBSU8sUUFBUTtRQUNSLE9BQU87ZUFDQSxJQUFJLENBQUNSLFlBQVk7WUFDcEJQLHlFQUFrQkEsQ0FBQyxJQUFJLENBQUNnQixXQUFXO1NBQ3RDO0lBQ0w7SUFDQUEsWUFBWUMsS0FBSyxDQUFFO1FBQ2YsS0FBSztRQUNMQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lB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bi9jb3JlL2Rpc3QvY2FsbGJhY2tzL2Jhc2UuanM/NTE4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB1dWlkIGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUsIGdldF9sY191bmlxdWVfbmFtZSwgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIHRoYXQgcHJvdmlkZXMgYSBzZXQgb2Ygb3B0aW9uYWwgbWV0aG9kcyB0aGF0IGNhbiBiZVxuICogb3ZlcnJpZGRlbiBpbiBkZXJpdmVkIGNsYXNzZXMgdG8gaGFuZGxlIHZhcmlvdXMgZXZlbnRzIGR1cmluZyB0aGVcbiAqIGV4ZWN1dGlvbiBvZiBhIExhbmdDaGFpbiBhcHBsaWNhdGlvbi5cbiAqL1xuY2xhc3MgQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyB7XG59XG5leHBvcnQgZnVuY3Rpb24gY2FsbGJhY2tIYW5kbGVyUHJlZmVyc1N0cmVhbWluZyh4KSB7XG4gICAgcmV0dXJuIFwibGNfcHJlZmVyX3N0cmVhbWluZ1wiIGluIHggJiYgeC5sY19wcmVmZXJfc3RyZWFtaW5nO1xufVxuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBjcmVhdGluZyBjYWxsYmFjayBoYW5kbGVycyBpbiB0aGUgTGFuZ0NoYWluXG4gKiBmcmFtZXdvcmsuIEl0IHByb3ZpZGVzIGEgc2V0IG9mIG9wdGlvbmFsIG1ldGhvZHMgdGhhdCBjYW4gYmUgb3ZlcnJpZGRlblxuICogaW4gZGVyaXZlZCBjbGFzc2VzIHRvIGhhbmRsZSB2YXJpb3VzIGV2ZW50cyBkdXJpbmcgdGhlIGV4ZWN1dGlvbiBvZiBhXG4gKiBMYW5nQ2hhaW4gYXBwbGljYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyB7XG4gICAgZ2V0IGxjX25hbWVzcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIFtcImxhbmdjaGFpbl9jb3JlXCIsIFwiY2FsbGJhY2tzXCIsIHRoaXMubmFtZV07XG4gICAgfVxuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgbGNfYXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldCBsY19zZXJpYWxpemFibGVfa2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHNlcmlhbGl6YWJsZS4gT3ZlcnJpZGUgdG8gcHJvdmlkZSBhbiBhbGlhcyBvclxuICAgICAqIHRvIHByZXNlcnZlIHRoZSBzZXJpYWxpemVkIG1vZHVsZSBuYW1lIGluIG1pbmlmaWVkIGVudmlyb25tZW50cy5cbiAgICAgKlxuICAgICAqIEltcGxlbWVudGVkIGFzIGEgc3RhdGljIG1ldGhvZCB0byBzdXBwb3J0IGxvYWRpbmcgbG9naWMuXG4gICAgICovXG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaW5hbCBzZXJpYWxpemVkIGlkZW50aWZpZXIgZm9yIHRoZSBtb2R1bGUuXG4gICAgICovXG4gICAgZ2V0IGxjX2lkKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4udGhpcy5sY19uYW1lc3BhY2UsXG4gICAgICAgICAgICBnZXRfbGNfdW5pcXVlX25hbWUodGhpcy5jb25zdHJ1Y3RvciksXG4gICAgICAgIF07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX2t3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVMTE1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVDaGFpblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUFnZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlUmV0cmlldmVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlQ3VzdG9tRXZlbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyYWlzZUVycm9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXdhaXRIYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9DQUxMQkFDS1NfQkFDS0dST1VORFwiKSA9PT0gXCJmYWxzZVwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxjX2t3YXJncyA9IGlucHV0IHx8IHt9O1xuICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlTExNID0gaW5wdXQuaWdub3JlTExNID8/IHRoaXMuaWdub3JlTExNO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVDaGFpbiA9IGlucHV0Lmlnbm9yZUNoYWluID8/IHRoaXMuaWdub3JlQ2hhaW47XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUFnZW50ID0gaW5wdXQuaWdub3JlQWdlbnQgPz8gdGhpcy5pZ25vcmVBZ2VudDtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlUmV0cmlldmVyID0gaW5wdXQuaWdub3JlUmV0cmlldmVyID8/IHRoaXMuaWdub3JlUmV0cmlldmVyO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVDdXN0b21FdmVudCA9XG4gICAgICAgICAgICAgICAgaW5wdXQuaWdub3JlQ3VzdG9tRXZlbnQgPz8gdGhpcy5pZ25vcmVDdXN0b21FdmVudDtcbiAgICAgICAgICAgIHRoaXMucmFpc2VFcnJvciA9IGlucHV0LnJhaXNlRXJyb3IgPz8gdGhpcy5yYWlzZUVycm9yO1xuICAgICAgICAgICAgdGhpcy5hd2FpdEhhbmRsZXJzID1cbiAgICAgICAgICAgICAgICB0aGlzLnJhaXNlRXJyb3IgfHwgKGlucHV0Ll9hd2FpdEhhbmRsZXIgPz8gdGhpcy5hd2FpdEhhbmRsZXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcyk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6YWJsZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIHRvSlNPTk5vdEltcGxlbWVudGVkKCkge1xuICAgICAgICByZXR1cm4gU2VyaWFsaXphYmxlLnByb3RvdHlwZS50b0pTT05Ob3RJbXBsZW1lbnRlZC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU1ldGhvZHMobWV0aG9kcykge1xuICAgICAgICBjbGFzcyBIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdXVpZC52NCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBtZXRob2RzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEhhbmRsZXIoKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgaXNCYXNlQ2FsbGJhY2tIYW5kbGVyID0gKHgpID0+IHtcbiAgICBjb25zdCBjYWxsYmFja0hhbmRsZXIgPSB4O1xuICAgIHJldHVybiAoY2FsbGJhY2tIYW5kbGVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgdHlwZW9mIGNhbGxiYWNrSGFuZGxlci5jb3B5ID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgdHlwZW9mIGNhbGxiYWNrSGFuZGxlci5uYW1lID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIHR5cGVvZiBjYWxsYmFja0hhbmRsZXIuYXdhaXRIYW5kbGVycyA9PT0gXCJib29sZWFuXCIpO1xufTtcbiJdLCJuYW1lcyI6WyJ1dWlkIiwiU2VyaWFsaXphYmxlIiwiZ2V0X2xjX3VuaXF1ZV9uYW1lIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIkJhc2VDYWxsYmFja0hhbmRsZXJNZXRob2RzQ2xhc3MiLCJjYWxsYmFja0hhbmRsZXJQcmVmZXJzU3RyZWFtaW5nIiwieCIsImxjX3ByZWZlcl9zdHJlYW1pbmciLCJCYXNlQ2FsbGJhY2tIYW5kbGVyIiwibGNfbmFtZXNwYWNlIiwibmFtZSIsImxjX3NlY3JldHMiLCJ1bmRlZmluZWQiLCJsY19hdHRyaWJ1dGVzIiwibGNfYWxpYXNlcyIsImxjX3NlcmlhbGl6YWJsZV9rZXlzIiwibGNfbmFtZSIsImxjX2lkIiwiY29uc3RydWN0b3IiLCJpbnB1dCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJsY19rd2FyZ3MiLCJpZ25vcmVMTE0iLCJpZ25vcmVDaGFpbiIsImlnbm9yZUFnZW50IiwiaWdub3JlUmV0cmlldmVyIiwiaWdub3JlQ3VzdG9tRXZlbnQiLCJyYWlzZUVycm9yIiwiYXdhaXRIYW5kbGVycyIsIl9hd2FpdEhhbmRsZXIiLCJjb3B5IiwidG9KU09OIiwicHJvdG90eXBlIiwiY2FsbCIsInRvSlNPTk5vdEltcGxlbWVudGVkIiwiZnJvbU1ldGhvZHMiLCJtZXRob2RzIiwiSGFuZGxlciIsInY0IiwiYXNzaWduIiwiaXNCYXNlQ2FsbGJhY2tIYW5kbGVyIiwiY2FsbGJhY2tIYW5kbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/manager.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackManager: () => (/* binding */ BaseCallbackManager),\n/* harmony export */   BaseRunManager: () => (/* binding */ BaseRunManager),\n/* harmony export */   CallbackManager: () => (/* binding */ CallbackManager),\n/* harmony export */   CallbackManagerForChainRun: () => (/* binding */ CallbackManagerForChainRun),\n/* harmony export */   CallbackManagerForLLMRun: () => (/* binding */ CallbackManagerForLLMRun),\n/* harmony export */   CallbackManagerForRetrieverRun: () => (/* binding */ CallbackManagerForRetrieverRun),\n/* harmony export */   CallbackManagerForToolRun: () => (/* binding */ CallbackManagerForToolRun),\n/* harmony export */   TraceGroup: () => (/* binding */ TraceGroup),\n/* harmony export */   ensureHandler: () => (/* binding */ ensureHandler),\n/* harmony export */   parseCallbackConfigArg: () => (/* binding */ parseCallbackConfigArg),\n/* harmony export */   traceAsGroup: () => (/* binding */ traceAsGroup)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tracers/console.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/console.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tracers/tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js\");\n/* harmony import */ var _utils_callbacks_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/callbacks.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/callbacks.js\");\n/* harmony import */ var _tracers_base_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tracers/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _singletons_async_local_storage_context_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../singletons/async_local_storage/context.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js\");\n\n\n\n\n\n\n\n\n\n\nfunction parseCallbackConfigArg(arg) {\n    if (!arg) {\n        return {};\n    } else if (Array.isArray(arg) || \"name\" in arg) {\n        return {\n            callbacks: arg\n        };\n    } else {\n        return arg;\n    }\n}\n/**\n * Manage callbacks from different components of LangChain.\n */ class BaseCallbackManager {\n    setHandler(handler) {\n        return this.setHandlers([\n            handler\n        ]);\n    }\n}\n/**\n * Base class for run manager in LangChain.\n */ class BaseRunManager {\n    constructor(runId, handlers, inheritableHandlers, tags, inheritableTags, metadata, inheritableMetadata, _parentRunId){\n        Object.defineProperty(this, \"runId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: runId\n        });\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: handlers\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableHandlers\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tags\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableTags\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: metadata\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableMetadata\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _parentRunId\n        });\n    }\n    get parentRunId() {\n        return this._parentRunId;\n    }\n    async handleText(text) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleText?.(text, this.runId, this._parentRunId, this.tags);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleText: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleCustomEvent(eventName, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    data, _runId, _tags, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _metadata) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleCustomEvent?.(eventName, data, this.runId, this.tags, this.metadata);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleCustomEvent: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * Manages callbacks for retriever runs.\n */ class CallbackManagerForRetrieverRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleRetrieverEnd(documents) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverEnd?.(documents, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleRetriever`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleRetrieverError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (error) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleRetrieverError: ${error}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForLLMRun extends BaseRunManager {\n    async handleLLMNewToken(token, idx, _runId, _parentRunId, _tags, fields) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMNewToken?.(token, idx ?? {\n                            prompt: 0,\n                            completion: 0\n                        }, this.runId, this._parentRunId, this.tags, fields);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMError(err, _runId, _parentRunId, _tags, extraParams) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMError?.(err, this.runId, this._parentRunId, this.tags, extraParams);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMError: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMEnd(output, _runId, _parentRunId, _tags, extraParams) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMEnd?.(output, this.runId, this._parentRunId, this.tags, extraParams);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForChainRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleChainError(err, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainError?.(err, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleChainError: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleChainEnd(output, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainEnd?.(output, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentAction(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentAction?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentEnd(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentEnd?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForToolRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleToolError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleToolError: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async handleToolEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(\"What is the answer to {question}?\");\n *\n * // Example of using LLMChain with OpenAI and a simple prompt\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ model: \"gpt-4o-mini\", temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Running the chain with a single question\n * const result = await chain.call({\n *   question: \"What is the airspeed velocity of an unladen swallow?\",\n * });\n * console.log(\"The answer is:\", result);\n * ```\n */ class CallbackManager extends BaseCallbackManager {\n    constructor(parentRunId, options){\n        super();\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"callback_manager\"\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.handlers = options?.handlers ?? this.handlers;\n        this.inheritableHandlers = options?.inheritableHandlers ?? this.inheritableHandlers;\n        this.tags = options?.tags ?? this.tags;\n        this.inheritableTags = options?.inheritableTags ?? this.inheritableTags;\n        this.metadata = options?.metadata ?? this.metadata;\n        this.inheritableMetadata = options?.inheritableMetadata ?? this.inheritableMetadata;\n        this._parentRunId = parentRunId;\n    }\n    /**\n     * Gets the parent run ID, if any.\n     *\n     * @returns The parent run ID.\n     */ getParentRunId() {\n        return this._parentRunId;\n    }\n    async handleLLMStart(llm, prompts, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(prompts.map(async (prompt, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>{\n                if (handler.ignoreLLM) {\n                    return;\n                }\n                if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                    // Create and add run to the run map.\n                    // We do this synchronously to avoid race conditions\n                    // when callbacks are backgrounded.\n                    handler._createRunForLLMStart(llm, [\n                        prompt\n                    ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                }\n                return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                    try {\n                        await handler.handleLLMStart?.(llm, [\n                            prompt\n                        ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }, handler.awaitHandlers);\n            }));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChatModelStart(llm, messages, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(messages.map(async (messageGroup, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>{\n                if (handler.ignoreLLM) {\n                    return;\n                }\n                if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                    // Create and add run to the run map.\n                    // We do this synchronously to avoid race conditions\n                    // when callbacks are backgrounded.\n                    handler._createRunForChatModelStart(llm, [\n                        messageGroup\n                    ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                }\n                return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                    try {\n                        if (handler.handleChatModelStart) {\n                            await handler.handleChatModelStart?.(llm, [\n                                messageGroup\n                            ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        } else if (handler.handleLLMStart) {\n                            const messageString = (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_2__.getBufferString)(messageGroup);\n                            await handler.handleLLMStart?.(llm, [\n                                messageString\n                            ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        }\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }, handler.awaitHandlers);\n            }));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChainStart(chain, inputs, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(), runType = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>{\n            if (handler.ignoreChain) {\n                return;\n            }\n            if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                // Create and add run to the run map.\n                // We do this synchronously to avoid race conditions\n                // when callbacks are backgrounded.\n                handler._createRunForChainStart(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n            }\n            return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleChainStart?.(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers);\n        }));\n        return new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleToolStart(tool, input, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>{\n            if (handler.ignoreAgent) {\n                return;\n            }\n            if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                // Create and add run to the run map.\n                // We do this synchronously to avoid race conditions\n                // when callbacks are backgrounded.\n                handler._createRunForToolStart(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n            }\n            return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleToolStart?.(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers);\n        }));\n        return new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleRetrieverStart(retriever, query, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>{\n            if (handler.ignoreRetriever) {\n                return;\n            }\n            if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                // Create and add run to the run map.\n                // We do this synchronously to avoid race conditions\n                // when callbacks are backgrounded.\n                handler._createRunForRetrieverStart(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n            }\n            return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleRetrieverStart?.(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleRetrieverStart: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers);\n        }));\n        return new CallbackManagerForRetrieverRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleCustomEvent(eventName, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    data, runId, _tags, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _metadata) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreCustomEvent) {\n                    try {\n                        await handler.handleCustomEvent?.(eventName, data, runId, this.tags, this.metadata);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleCustomEvent: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    addHandler(handler, inherit = true) {\n        this.handlers.push(handler);\n        if (inherit) {\n            this.inheritableHandlers.push(handler);\n        }\n    }\n    removeHandler(handler) {\n        this.handlers = this.handlers.filter((_handler)=>_handler !== handler);\n        this.inheritableHandlers = this.inheritableHandlers.filter((_handler)=>_handler !== handler);\n    }\n    setHandlers(handlers, inherit = true) {\n        this.handlers = [];\n        this.inheritableHandlers = [];\n        for (const handler of handlers){\n            this.addHandler(handler, inherit);\n        }\n    }\n    addTags(tags, inherit = true) {\n        this.removeTags(tags); // Remove duplicates\n        this.tags.push(...tags);\n        if (inherit) {\n            this.inheritableTags.push(...tags);\n        }\n    }\n    removeTags(tags) {\n        this.tags = this.tags.filter((tag)=>!tags.includes(tag));\n        this.inheritableTags = this.inheritableTags.filter((tag)=>!tags.includes(tag));\n    }\n    addMetadata(metadata, inherit = true) {\n        this.metadata = {\n            ...this.metadata,\n            ...metadata\n        };\n        if (inherit) {\n            this.inheritableMetadata = {\n                ...this.inheritableMetadata,\n                ...metadata\n            };\n        }\n    }\n    removeMetadata(metadata) {\n        for (const key of Object.keys(metadata)){\n            delete this.metadata[key];\n            delete this.inheritableMetadata[key];\n        }\n    }\n    copy(additionalHandlers = [], inherit = true) {\n        const manager = new CallbackManager(this._parentRunId);\n        for (const handler of this.handlers){\n            const inheritable = this.inheritableHandlers.includes(handler);\n            manager.addHandler(handler, inheritable);\n        }\n        for (const tag of this.tags){\n            const inheritable = this.inheritableTags.includes(tag);\n            manager.addTags([\n                tag\n            ], inheritable);\n        }\n        for (const key of Object.keys(this.metadata)){\n            const inheritable = Object.keys(this.inheritableMetadata).includes(key);\n            manager.addMetadata({\n                [key]: this.metadata[key]\n            }, inheritable);\n        }\n        for (const handler of additionalHandlers){\n            if (// Prevent multiple copies of console_callback_handler\n            manager.handlers.filter((h)=>h.name === \"console_callback_handler\").some((h)=>h.name === handler.name)) {\n                continue;\n            }\n            manager.addHandler(handler, inherit);\n        }\n        return manager;\n    }\n    static fromHandlers(handlers) {\n        class Handler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])()\n                });\n                Object.assign(this, handlers);\n            }\n        }\n        const manager = new this();\n        manager.addHandler(new Handler());\n        return manager;\n    }\n    static configure(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        return this._configureSync(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options);\n    }\n    // TODO: Deprecate async method in favor of this one.\n    static _configureSync(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        let callbackManager;\n        if (inheritableHandlers || localHandlers) {\n            if (Array.isArray(inheritableHandlers) || !inheritableHandlers) {\n                callbackManager = new CallbackManager();\n                callbackManager.setHandlers(inheritableHandlers?.map(ensureHandler) ?? [], true);\n            } else {\n                callbackManager = inheritableHandlers;\n            }\n            callbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers?.handlers, false);\n        }\n        const verboseEnabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(\"LANGCHAIN_VERBOSE\") === \"true\" || options?.verbose;\n        const tracingV2Enabled = _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer.getTraceableRunTree()?.tracingEnabled || (0,_utils_callbacks_js__WEBPACK_IMPORTED_MODULE_6__.isTracingEnabled)();\n        const tracingEnabled = tracingV2Enabled || ((0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(\"LANGCHAIN_TRACING\") ?? false);\n        if (verboseEnabled || tracingEnabled) {\n            if (!callbackManager) {\n                callbackManager = new CallbackManager();\n            }\n            if (verboseEnabled && !callbackManager.handlers.some((handler)=>handler.name === _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler.prototype.name)) {\n                const consoleHandler = new _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler();\n                callbackManager.addHandler(consoleHandler, true);\n            }\n            if (tracingEnabled && !callbackManager.handlers.some((handler)=>handler.name === \"langchain_tracer\")) {\n                if (tracingV2Enabled) {\n                    const tracerV2 = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer();\n                    callbackManager.addHandler(tracerV2, true);\n                }\n            }\n            if (tracingV2Enabled) {\n                // handoff between langchain and langsmith/traceable\n                // override the parent run ID\n                const implicitRunTree = _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer.getTraceableRunTree();\n                if (implicitRunTree && callbackManager._parentRunId === undefined) {\n                    callbackManager._parentRunId = implicitRunTree.id;\n                    const tracerV2 = callbackManager.handlers.find((handler)=>handler.name === \"langchain_tracer\");\n                    tracerV2?.updateFromRunTree(implicitRunTree);\n                }\n            }\n        }\n        for (const { contextVar, inheritable = true, handlerClass, envVar } of (0,_singletons_async_local_storage_context_js__WEBPACK_IMPORTED_MODULE_8__._getConfigureHooks)()){\n            const createIfNotInContext = envVar && (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(envVar) === \"true\" && handlerClass;\n            let handler;\n            const contextVarValue = contextVar !== undefined ? (0,_singletons_async_local_storage_context_js__WEBPACK_IMPORTED_MODULE_8__.getContextVariable)(contextVar) : undefined;\n            if (contextVarValue && (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseCallbackHandler)(contextVarValue)) {\n                handler = contextVarValue;\n            } else if (createIfNotInContext) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                handler = new handlerClass({});\n            }\n            if (handler !== undefined) {\n                if (!callbackManager) {\n                    callbackManager = new CallbackManager();\n                }\n                if (!callbackManager.handlers.some((h)=>h.name === handler.name)) {\n                    callbackManager.addHandler(handler, inheritable);\n                }\n            }\n        }\n        if (inheritableTags || localTags) {\n            if (callbackManager) {\n                callbackManager.addTags(inheritableTags ?? []);\n                callbackManager.addTags(localTags ?? [], false);\n            }\n        }\n        if (inheritableMetadata || localMetadata) {\n            if (callbackManager) {\n                callbackManager.addMetadata(inheritableMetadata ?? {});\n                callbackManager.addMetadata(localMetadata ?? {}, false);\n            }\n        }\n        return callbackManager;\n    }\n}\nfunction ensureHandler(handler) {\n    if (\"name\" in handler) {\n        return handler;\n    }\n    return _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler.fromMethods(handler);\n}\n/**\n * @deprecated Use [`traceable`](https://docs.smith.langchain.com/observability/how_to_guides/tracing/annotate_code)\n * from \"langsmith\" instead.\n */ class TraceGroup {\n    constructor(groupName, options){\n        Object.defineProperty(this, \"groupName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: groupName\n        });\n        Object.defineProperty(this, \"options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: options\n        });\n        Object.defineProperty(this, \"runManager\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async getTraceGroupCallbackManager(group_name, inputs, options) {\n        const cb = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer(options);\n        const cm = await CallbackManager.configure([\n            cb\n        ]);\n        const runManager = await cm?.handleChainStart({\n            lc: 1,\n            type: \"not_implemented\",\n            id: [\n                \"langchain\",\n                \"callbacks\",\n                \"groups\",\n                group_name\n            ]\n        }, inputs ?? {});\n        if (!runManager) {\n            throw new Error(\"Failed to create run group callback manager.\");\n        }\n        return runManager;\n    }\n    async start(inputs) {\n        if (!this.runManager) {\n            this.runManager = await this.getTraceGroupCallbackManager(this.groupName, inputs, this.options);\n        }\n        return this.runManager.getChild();\n    }\n    async error(err) {\n        if (this.runManager) {\n            await this.runManager.handleChainError(err);\n            this.runManager = undefined;\n        }\n    }\n    async end(output) {\n        if (this.runManager) {\n            await this.runManager.handleChainEnd(output ?? {});\n            this.runManager = undefined;\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function traceAsGroup(groupOptions, enclosedCode, ...args) {\n    const traceGroup = new TraceGroup(groupOptions.name, groupOptions);\n    const callbackManager = await traceGroup.start({\n        ...args\n    });\n    try {\n        const result = await enclosedCode(callbackManager, ...args);\n        await traceGroup.end(_coerceToDict(result, \"output\"));\n        return result;\n    } catch (err) {\n        await traceGroup.error(err);\n        throw err;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ29DO0FBQ1Q7QUFDUjtBQUNFO0FBQ1M7QUFDbEI7QUFDUztBQUNQO0FBQ3FEO0FBQ2hHLFNBQVNhLHVCQUF1QkMsR0FBRztJQUN0QyxJQUFJLENBQUNBLEtBQUs7UUFDTixPQUFPLENBQUM7SUFDWixPQUNLLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0YsUUFBUSxVQUFVQSxLQUFLO1FBQzFDLE9BQU87WUFBRUcsV0FBV0g7UUFBSTtJQUM1QixPQUNLO1FBQ0QsT0FBT0E7SUFDWDtBQUNKO0FBQ0E7O0NBRUMsR0FDTSxNQUFNSTtJQUNUQyxXQUFXQyxPQUFPLEVBQUU7UUFDaEIsT0FBTyxJQUFJLENBQUNDLFdBQVcsQ0FBQztZQUFDRDtTQUFRO0lBQ3JDO0FBQ0o7QUFDQTs7Q0FFQyxHQUNNLE1BQU1FO0lBQ1RDLFlBQVlDLEtBQUssRUFBRUMsUUFBUSxFQUFFQyxtQkFBbUIsRUFBRUMsSUFBSSxFQUFFQyxlQUFlLEVBQUVDLFFBQVEsRUFBRUMsbUJBQW1CLEVBQUVDLFlBQVksQ0FBRTtRQUNsSEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPYjtRQUNYO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1o7UUFDWDtRQUNBTyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHVCQUF1QjtZQUMvQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1g7UUFDWDtRQUNBTSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9WO1FBQ1g7UUFDQUssT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9UO1FBQ1g7UUFDQUksT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPUjtRQUNYO1FBQ0FHLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsdUJBQXVCO1lBQy9DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPUDtRQUNYO1FBQ0FFLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPTjtRQUNYO0lBQ0o7SUFDQSxJQUFJTyxjQUFjO1FBQ2QsT0FBTyxJQUFJLENBQUNQLFlBQVk7SUFDNUI7SUFDQSxNQUFNUSxXQUFXQyxJQUFJLEVBQUU7UUFDbkIsTUFBTUMsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ2tCLEdBQUcsQ0FBQyxDQUFDdkIsVUFBWVosNkRBQWVBLENBQUM7Z0JBQzdELElBQUk7b0JBQ0EsTUFBTVksUUFBUW1CLFVBQVUsR0FBR0MsTUFBTSxJQUFJLENBQUNoQixLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJO2dCQUM3RSxFQUNBLE9BQU9pQixLQUFLO29CQUNSLE1BQU1DLGNBQWN6QixRQUFRMEIsVUFBVSxHQUNoQ0MsUUFBUUMsS0FBSyxHQUNiRCxRQUFRRSxJQUFJO29CQUNsQkosWUFBWSxDQUFDLGlCQUFpQixFQUFFekIsUUFBUUcsV0FBVyxDQUFDMkIsSUFBSSxDQUFDLGNBQWMsRUFBRU4sSUFBSSxDQUFDO29CQUM5RSxJQUFJeEIsUUFBUTBCLFVBQVUsRUFBRTt3QkFDcEIsTUFBTUY7b0JBQ1Y7Z0JBQ0o7WUFDSixHQUFHeEIsUUFBUStCLGFBQWE7SUFDNUI7SUFDQSxNQUFNQyxrQkFBa0JDLFNBQVMsRUFDakMsOERBQThEO0lBQzlEQyxJQUFJLEVBQUVDLE1BQU0sRUFBRUMsS0FBSyxFQUNuQiw4REFBOEQ7SUFDOURDLFNBQVMsRUFBRTtRQUNQLE1BQU1oQixRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDakIsUUFBUSxDQUFDa0IsR0FBRyxDQUFDLENBQUN2QixVQUFZWiw2REFBZUEsQ0FBQztnQkFDN0QsSUFBSTtvQkFDQSxNQUFNWSxRQUFRZ0MsaUJBQWlCLEdBQUdDLFdBQVdDLE1BQU0sSUFBSSxDQUFDOUIsS0FBSyxFQUFFLElBQUksQ0FBQ0csSUFBSSxFQUFFLElBQUksQ0FBQ0UsUUFBUTtnQkFDM0YsRUFDQSxPQUFPZSxLQUFLO29CQUNSLE1BQU1DLGNBQWN6QixRQUFRMEIsVUFBVSxHQUNoQ0MsUUFBUUMsS0FBSyxHQUNiRCxRQUFRRSxJQUFJO29CQUNsQkosWUFBWSxDQUFDLGlCQUFpQixFQUFFekIsUUFBUUcsV0FBVyxDQUFDMkIsSUFBSSxDQUFDLHFCQUFxQixFQUFFTixJQUFJLENBQUM7b0JBQ3JGLElBQUl4QixRQUFRMEIsVUFBVSxFQUFFO3dCQUNwQixNQUFNRjtvQkFDVjtnQkFDSjtZQUNKLEdBQUd4QixRQUFRK0IsYUFBYTtJQUM1QjtBQUNKO0FBQ0E7O0NBRUMsR0FDTSxNQUFNTyx1Q0FBdUNwQztJQUNoRHFDLFNBQVNDLEdBQUcsRUFBRTtRQUNWLG1FQUFtRTtRQUNuRSxNQUFNQyxVQUFVLElBQUlDLGdCQUFnQixJQUFJLENBQUN0QyxLQUFLO1FBQzlDcUMsUUFBUXhDLFdBQVcsQ0FBQyxJQUFJLENBQUNLLG1CQUFtQjtRQUM1Q21DLFFBQVFFLE9BQU8sQ0FBQyxJQUFJLENBQUNuQyxlQUFlO1FBQ3BDaUMsUUFBUUcsV0FBVyxDQUFDLElBQUksQ0FBQ2xDLG1CQUFtQjtRQUM1QyxJQUFJOEIsS0FBSztZQUNMQyxRQUFRRSxPQUFPLENBQUM7Z0JBQUNIO2FBQUksRUFBRTtRQUMzQjtRQUNBLE9BQU9DO0lBQ1g7SUFDQSxNQUFNSSxtQkFBbUJDLFNBQVMsRUFBRTtRQUNoQyxNQUFNekIsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ2tCLEdBQUcsQ0FBQyxDQUFDdkIsVUFBWVosNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1ksUUFBUStDLGVBQWUsRUFBRTtvQkFDMUIsSUFBSTt3QkFDQSxNQUFNL0MsUUFBUTZDLGtCQUFrQixHQUFHQyxXQUFXLElBQUksQ0FBQzFDLEtBQUssRUFBRSxJQUFJLENBQUNPLFlBQVksRUFBRSxJQUFJLENBQUNKLElBQUk7b0JBQzFGLEVBQ0EsT0FBT2lCLEtBQUs7d0JBQ1IsTUFBTUMsY0FBY3pCLFFBQVEwQixVQUFVLEdBQ2hDQyxRQUFRQyxLQUFLLEdBQ2JELFFBQVFFLElBQUk7d0JBQ2xCSixZQUFZLENBQUMsaUJBQWlCLEVBQUV6QixRQUFRRyxXQUFXLENBQUMyQixJQUFJLENBQUMsaUJBQWlCLENBQUM7d0JBQzNFLElBQUk5QixRQUFRMEIsVUFBVSxFQUFFOzRCQUNwQixNQUFNRjt3QkFDVjtvQkFDSjtnQkFDSjtZQUNKLEdBQUd4QixRQUFRK0IsYUFBYTtJQUM1QjtJQUNBLE1BQU1pQixxQkFBcUJ4QixHQUFHLEVBQUU7UUFDNUIsTUFBTUgsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ2tCLEdBQUcsQ0FBQyxDQUFDdkIsVUFBWVosNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1ksUUFBUStDLGVBQWUsRUFBRTtvQkFDMUIsSUFBSTt3QkFDQSxNQUFNL0MsUUFBUWdELG9CQUFvQixHQUFHeEIsS0FBSyxJQUFJLENBQUNwQixLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJO29CQUN0RixFQUNBLE9BQU9xQixPQUFPO3dCQUNWLE1BQU1ILGNBQWN6QixRQUFRMEIsVUFBVSxHQUNoQ0MsUUFBUUMsS0FBSyxHQUNiRCxRQUFRRSxJQUFJO3dCQUNsQkosWUFBWSxDQUFDLGlCQUFpQixFQUFFekIsUUFBUUcsV0FBVyxDQUFDMkIsSUFBSSxDQUFDLHdCQUF3QixFQUFFRixNQUFNLENBQUM7d0JBQzFGLElBQUk1QixRQUFRMEIsVUFBVSxFQUFFOzRCQUNwQixNQUFNRjt3QkFDVjtvQkFDSjtnQkFDSjtZQUNKLEdBQUd4QixRQUFRK0IsYUFBYTtJQUM1QjtBQUNKO0FBQ08sTUFBTWtCLGlDQUFpQy9DO0lBQzFDLE1BQU1nRCxrQkFBa0JDLEtBQUssRUFBRUMsR0FBRyxFQUFFakIsTUFBTSxFQUFFeEIsWUFBWSxFQUFFeUIsS0FBSyxFQUFFaUIsTUFBTSxFQUFFO1FBQ3JFLE1BQU1oQyxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDakIsUUFBUSxDQUFDa0IsR0FBRyxDQUFDLENBQUN2QixVQUFZWiw2REFBZUEsQ0FBQztnQkFDN0QsSUFBSSxDQUFDWSxRQUFRc0QsU0FBUyxFQUFFO29CQUNwQixJQUFJO3dCQUNBLE1BQU10RCxRQUFRa0QsaUJBQWlCLEdBQUdDLE9BQU9DLE9BQU87NEJBQUVHLFFBQVE7NEJBQUdDLFlBQVk7d0JBQUUsR0FBRyxJQUFJLENBQUNwRCxLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJLEVBQUU4QztvQkFDNUgsRUFDQSxPQUFPN0IsS0FBSzt3QkFDUixNQUFNQyxjQUFjekIsUUFBUTBCLFVBQVUsR0FDaENDLFFBQVFDLEtBQUssR0FDYkQsUUFBUUUsSUFBSTt3QkFDbEJKLFlBQVksQ0FBQyxpQkFBaUIsRUFBRXpCLFFBQVFHLFdBQVcsQ0FBQzJCLElBQUksQ0FBQyxxQkFBcUIsRUFBRU4sSUFBSSxDQUFDO3dCQUNyRixJQUFJeEIsUUFBUTBCLFVBQVUsRUFBRTs0QkFDcEIsTUFBTUY7d0JBQ1Y7b0JBQ0o7Z0JBQ0o7WUFDSixHQUFHeEIsUUFBUStCLGFBQWE7SUFDNUI7SUFDQSxNQUFNMEIsZUFBZWpDLEdBQUcsRUFBRVcsTUFBTSxFQUFFeEIsWUFBWSxFQUFFeUIsS0FBSyxFQUFFc0IsV0FBVyxFQUFFO1FBQ2hFLE1BQU1yQyxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDakIsUUFBUSxDQUFDa0IsR0FBRyxDQUFDLENBQUN2QixVQUFZWiw2REFBZUEsQ0FBQztnQkFDN0QsSUFBSSxDQUFDWSxRQUFRc0QsU0FBUyxFQUFFO29CQUNwQixJQUFJO3dCQUNBLE1BQU10RCxRQUFReUQsY0FBYyxHQUFHakMsS0FBSyxJQUFJLENBQUNwQixLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJLEVBQUVtRDtvQkFDbEYsRUFDQSxPQUFPbEMsS0FBSzt3QkFDUixNQUFNQyxjQUFjekIsUUFBUTBCLFVBQVUsR0FDaENDLFFBQVFDLEtBQUssR0FDYkQsUUFBUUUsSUFBSTt3QkFDbEJKLFlBQVksQ0FBQyxpQkFBaUIsRUFBRXpCLFFBQVFHLFdBQVcsQ0FBQzJCLElBQUksQ0FBQyxrQkFBa0IsRUFBRU4sSUFBSSxDQUFDO3dCQUNsRixJQUFJeEIsUUFBUTBCLFVBQVUsRUFBRTs0QkFDcEIsTUFBTUY7d0JBQ1Y7b0JBQ0o7Z0JBQ0o7WUFDSixHQUFHeEIsUUFBUStCLGFBQWE7SUFDNUI7SUFDQSxNQUFNNEIsYUFBYUMsTUFBTSxFQUFFekIsTUFBTSxFQUFFeEIsWUFBWSxFQUFFeUIsS0FBSyxFQUFFc0IsV0FBVyxFQUFFO1FBQ2pFLE1BQU1yQyxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDakIsUUFBUSxDQUFDa0IsR0FBRyxDQUFDLENBQUN2QixVQUFZWiw2REFBZUEsQ0FBQztnQkFDN0QsSUFBSSxDQUFDWSxRQUFRc0QsU0FBUyxFQUFFO29CQUNwQixJQUFJO3dCQUNBLE1BQU10RCxRQUFRMkQsWUFBWSxHQUFHQyxRQUFRLElBQUksQ0FBQ3hELEtBQUssRUFBRSxJQUFJLENBQUNPLFlBQVksRUFBRSxJQUFJLENBQUNKLElBQUksRUFBRW1EO29CQUNuRixFQUNBLE9BQU9sQyxLQUFLO3dCQUNSLE1BQU1DLGNBQWN6QixRQUFRMEIsVUFBVSxHQUNoQ0MsUUFBUUMsS0FBSyxHQUNiRCxRQUFRRSxJQUFJO3dCQUNsQkosWUFBWSxDQUFDLGlCQUFpQixFQUFFekIsUUFBUUcsV0FBVyxDQUFDMkIsSUFBSSxDQUFDLGdCQUFnQixFQUFFTixJQUFJLENBQUM7d0JBQ2hGLElBQUl4QixRQUFRMEIsVUFBVSxFQUFFOzRCQUNwQixNQUFNRjt3QkFDVjtvQkFDSjtnQkFDSjtZQUNKLEdBQUd4QixRQUFRK0IsYUFBYTtJQUM1QjtBQUNKO0FBQ08sTUFBTThCLG1DQUFtQzNEO0lBQzVDcUMsU0FBU0MsR0FBRyxFQUFFO1FBQ1YsbUVBQW1FO1FBQ25FLE1BQU1DLFVBQVUsSUFBSUMsZ0JBQWdCLElBQUksQ0FBQ3RDLEtBQUs7UUFDOUNxQyxRQUFReEMsV0FBVyxDQUFDLElBQUksQ0FBQ0ssbUJBQW1CO1FBQzVDbUMsUUFBUUUsT0FBTyxDQUFDLElBQUksQ0FBQ25DLGVBQWU7UUFDcENpQyxRQUFRRyxXQUFXLENBQUMsSUFBSSxDQUFDbEMsbUJBQW1CO1FBQzVDLElBQUk4QixLQUFLO1lBQ0xDLFFBQVFFLE9BQU8sQ0FBQztnQkFBQ0g7YUFBSSxFQUFFO1FBQzNCO1FBQ0EsT0FBT0M7SUFDWDtJQUNBLE1BQU1xQixpQkFBaUJ0QyxHQUFHLEVBQUVXLE1BQU0sRUFBRXhCLFlBQVksRUFBRXlCLEtBQUssRUFBRTJCLE1BQU0sRUFBRTtRQUM3RCxNQUFNMUMsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ2tCLEdBQUcsQ0FBQyxDQUFDdkIsVUFBWVosNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1ksUUFBUWdFLFdBQVcsRUFBRTtvQkFDdEIsSUFBSTt3QkFDQSxNQUFNaEUsUUFBUThELGdCQUFnQixHQUFHdEMsS0FBSyxJQUFJLENBQUNwQixLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJLEVBQUV3RDtvQkFDcEYsRUFDQSxPQUFPdkMsS0FBSzt3QkFDUixNQUFNQyxjQUFjekIsUUFBUTBCLFVBQVUsR0FDaENDLFFBQVFDLEtBQUssR0FDYkQsUUFBUUUsSUFBSTt3QkFDbEJKLFlBQVksQ0FBQyxpQkFBaUIsRUFBRXpCLFFBQVFHLFdBQVcsQ0FBQzJCLElBQUksQ0FBQyxvQkFBb0IsRUFBRU4sSUFBSSxDQUFDO3dCQUNwRixJQUFJeEIsUUFBUTBCLFVBQVUsRUFBRTs0QkFDcEIsTUFBTUY7d0JBQ1Y7b0JBQ0o7Z0JBQ0o7WUFDSixHQUFHeEIsUUFBUStCLGFBQWE7SUFDNUI7SUFDQSxNQUFNa0MsZUFBZUwsTUFBTSxFQUFFekIsTUFBTSxFQUFFeEIsWUFBWSxFQUFFeUIsS0FBSyxFQUFFMkIsTUFBTSxFQUFFO1FBQzlELE1BQU0xQyxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDakIsUUFBUSxDQUFDa0IsR0FBRyxDQUFDLENBQUN2QixVQUFZWiw2REFBZUEsQ0FBQztnQkFDN0QsSUFBSSxDQUFDWSxRQUFRZ0UsV0FBVyxFQUFFO29CQUN0QixJQUFJO3dCQUNBLE1BQU1oRSxRQUFRaUUsY0FBYyxHQUFHTCxRQUFRLElBQUksQ0FBQ3hELEtBQUssRUFBRSxJQUFJLENBQUNPLFlBQVksRUFBRSxJQUFJLENBQUNKLElBQUksRUFBRXdEO29CQUNyRixFQUNBLE9BQU92QyxLQUFLO3dCQUNSLE1BQU1DLGNBQWN6QixRQUFRMEIsVUFBVSxHQUNoQ0MsUUFBUUMsS0FBSyxHQUNiRCxRQUFRRSxJQUFJO3dCQUNsQkosWUFBWSxDQUFDLGlCQUFpQixFQUFFekIsUUFBUUcsV0FBVyxDQUFDMkIsSUFBSSxDQUFDLGtCQUFrQixFQUFFTixJQUFJLENBQUM7d0JBQ2xGLElBQUl4QixRQUFRMEIsVUFBVSxFQUFFOzRCQUNwQixNQUFNRjt3QkFDVjtvQkFDSjtnQkFDSjtZQUNKLEdBQUd4QixRQUFRK0IsYUFBYTtJQUM1QjtJQUNBLE1BQU1tQyxrQkFBa0JDLE1BQU0sRUFBRTtRQUM1QixNQUFNOUMsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ2tCLEdBQUcsQ0FBQyxDQUFDdkIsVUFBWVosNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1ksUUFBUW9FLFdBQVcsRUFBRTtvQkFDdEIsSUFBSTt3QkFDQSxNQUFNcEUsUUFBUWtFLGlCQUFpQixHQUFHQyxRQUFRLElBQUksQ0FBQy9ELEtBQUssRUFBRSxJQUFJLENBQUNPLFlBQVksRUFBRSxJQUFJLENBQUNKLElBQUk7b0JBQ3RGLEVBQ0EsT0FBT2lCLEtBQUs7d0JBQ1IsTUFBTUMsY0FBY3pCLFFBQVEwQixVQUFVLEdBQ2hDQyxRQUFRQyxLQUFLLEdBQ2JELFFBQVFFLElBQUk7d0JBQ2xCSixZQUFZLENBQUMsaUJBQWlCLEVBQUV6QixRQUFRRyxXQUFXLENBQUMyQixJQUFJLENBQUMscUJBQXFCLEVBQUVOLElBQUksQ0FBQzt3QkFDckYsSUFBSXhCLFFBQVEwQixVQUFVLEVBQUU7NEJBQ3BCLE1BQU1GO3dCQUNWO29CQUNKO2dCQUNKO1lBQ0osR0FBR3hCLFFBQVErQixhQUFhO0lBQzVCO0lBQ0EsTUFBTXNDLGVBQWVGLE1BQU0sRUFBRTtRQUN6QixNQUFNOUMsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ2tCLEdBQUcsQ0FBQyxDQUFDdkIsVUFBWVosNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1ksUUFBUW9FLFdBQVcsRUFBRTtvQkFDdEIsSUFBSTt3QkFDQSxNQUFNcEUsUUFBUXFFLGNBQWMsR0FBR0YsUUFBUSxJQUFJLENBQUMvRCxLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJO29CQUNuRixFQUNBLE9BQU9pQixLQUFLO3dCQUNSLE1BQU1DLGNBQWN6QixRQUFRMEIsVUFBVSxHQUNoQ0MsUUFBUUMsS0FBSyxHQUNiRCxRQUFRRSxJQUFJO3dCQUNsQkosWUFBWSxDQUFDLGlCQUFpQixFQUFFekIsUUFBUUcsV0FBVyxDQUFDMkIsSUFBSSxDQUFDLGtCQUFrQixFQUFFTixJQUFJLENBQUM7d0JBQ2xGLElBQUl4QixRQUFRMEIsVUFBVSxFQUFFOzRCQUNwQixNQUFNRjt3QkFDVjtvQkFDSjtnQkFDSjtZQUNKLEdBQUd4QixRQUFRK0IsYUFBYTtJQUM1QjtBQUNKO0FBQ08sTUFBTXVDLGtDQUFrQ3BFO0lBQzNDcUMsU0FBU0MsR0FBRyxFQUFFO1FBQ1YsbUVBQW1FO1FBQ25FLE1BQU1DLFVBQVUsSUFBSUMsZ0JBQWdCLElBQUksQ0FBQ3RDLEtBQUs7UUFDOUNxQyxRQUFReEMsV0FBVyxDQUFDLElBQUksQ0FBQ0ssbUJBQW1CO1FBQzVDbUMsUUFBUUUsT0FBTyxDQUFDLElBQUksQ0FBQ25DLGVBQWU7UUFDcENpQyxRQUFRRyxXQUFXLENBQUMsSUFBSSxDQUFDbEMsbUJBQW1CO1FBQzVDLElBQUk4QixLQUFLO1lBQ0xDLFFBQVFFLE9BQU8sQ0FBQztnQkFBQ0g7YUFBSSxFQUFFO1FBQzNCO1FBQ0EsT0FBT0M7SUFDWDtJQUNBLE1BQU04QixnQkFBZ0IvQyxHQUFHLEVBQUU7UUFDdkIsTUFBTUgsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ2tCLEdBQUcsQ0FBQyxDQUFDdkIsVUFBWVosNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1ksUUFBUW9FLFdBQVcsRUFBRTtvQkFDdEIsSUFBSTt3QkFDQSxNQUFNcEUsUUFBUXVFLGVBQWUsR0FBRy9DLEtBQUssSUFBSSxDQUFDcEIsS0FBSyxFQUFFLElBQUksQ0FBQ08sWUFBWSxFQUFFLElBQUksQ0FBQ0osSUFBSTtvQkFDakYsRUFDQSxPQUFPaUIsS0FBSzt3QkFDUixNQUFNQyxjQUFjekIsUUFBUTBCLFVBQVUsR0FDaENDLFFBQVFDLEtBQUssR0FDYkQsUUFBUUUsSUFBSTt3QkFDbEJKLFlBQVksQ0FBQyxpQkFBaUIsRUFBRXpCLFFBQVFHLFdBQVcsQ0FBQzJCLElBQUksQ0FBQyxtQkFBbUIsRUFBRU4sSUFBSSxDQUFDO3dCQUNuRixJQUFJeEIsUUFBUTBCLFVBQVUsRUFBRTs0QkFDcEIsTUFBTUY7d0JBQ1Y7b0JBQ0o7Z0JBQ0o7WUFDSixHQUFHeEIsUUFBUStCLGFBQWE7SUFDNUI7SUFDQSw4REFBOEQ7SUFDOUQsTUFBTXlDLGNBQWNaLE1BQU0sRUFBRTtRQUN4QixNQUFNdkMsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ2tCLEdBQUcsQ0FBQyxDQUFDdkIsVUFBWVosNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1ksUUFBUW9FLFdBQVcsRUFBRTtvQkFDdEIsSUFBSTt3QkFDQSxNQUFNcEUsUUFBUXdFLGFBQWEsR0FBR1osUUFBUSxJQUFJLENBQUN4RCxLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJO29CQUNsRixFQUNBLE9BQU9pQixLQUFLO3dCQUNSLE1BQU1DLGNBQWN6QixRQUFRMEIsVUFBVSxHQUNoQ0MsUUFBUUMsS0FBSyxHQUNiRCxRQUFRRSxJQUFJO3dCQUNsQkosWUFBWSxDQUFDLGlCQUFpQixFQUFFekIsUUFBUUcsV0FBVyxDQUFDMkIsSUFBSSxDQUFDLGlCQUFpQixFQUFFTixJQUFJLENBQUM7d0JBQ2pGLElBQUl4QixRQUFRMEIsVUFBVSxFQUFFOzRCQUNwQixNQUFNRjt3QkFDVjtvQkFDSjtnQkFDSjtZQUNKLEdBQUd4QixRQUFRK0IsYUFBYTtJQUM1QjtBQUNKO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBaUJDLEdBQ00sTUFBTVcsd0JBQXdCNUM7SUFDakNLLFlBQVllLFdBQVcsRUFBRXVELE9BQU8sQ0FBRTtRQUM5QixLQUFLO1FBQ0w3RCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sRUFBRTtRQUNiO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsdUJBQXVCO1lBQy9DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEVBQUU7UUFDYjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sRUFBRTtRQUNiO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEVBQUU7UUFDYjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sQ0FBQztRQUNaO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsdUJBQXVCO1lBQy9DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLENBQUM7UUFDWjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDWixRQUFRLEdBQUdvRSxTQUFTcEUsWUFBWSxJQUFJLENBQUNBLFFBQVE7UUFDbEQsSUFBSSxDQUFDQyxtQkFBbUIsR0FDcEJtRSxTQUFTbkUsdUJBQXVCLElBQUksQ0FBQ0EsbUJBQW1CO1FBQzVELElBQUksQ0FBQ0MsSUFBSSxHQUFHa0UsU0FBU2xFLFFBQVEsSUFBSSxDQUFDQSxJQUFJO1FBQ3RDLElBQUksQ0FBQ0MsZUFBZSxHQUFHaUUsU0FBU2pFLG1CQUFtQixJQUFJLENBQUNBLGVBQWU7UUFDdkUsSUFBSSxDQUFDQyxRQUFRLEdBQUdnRSxTQUFTaEUsWUFBWSxJQUFJLENBQUNBLFFBQVE7UUFDbEQsSUFBSSxDQUFDQyxtQkFBbUIsR0FDcEIrRCxTQUFTL0QsdUJBQXVCLElBQUksQ0FBQ0EsbUJBQW1CO1FBQzVELElBQUksQ0FBQ0MsWUFBWSxHQUFHTztJQUN4QjtJQUNBOzs7O0tBSUMsR0FDRHdELGlCQUFpQjtRQUNiLE9BQU8sSUFBSSxDQUFDL0QsWUFBWTtJQUM1QjtJQUNBLE1BQU1nRSxlQUFlQyxHQUFHLEVBQUVDLE9BQU8sRUFBRXpFLFFBQVEwRSxTQUFTLEVBQUVuRSxlQUFlbUUsU0FBUyxFQUFFcEIsY0FBY29CLFNBQVMsRUFBRTFDLFFBQVEwQyxTQUFTLEVBQUV6QyxZQUFZeUMsU0FBUyxFQUFFQyxVQUFVRCxTQUFTLEVBQUU7UUFDcEssT0FBT3pELFFBQVFDLEdBQUcsQ0FBQ3VELFFBQVF0RCxHQUFHLENBQUMsT0FBT2dDLFFBQVFIO1lBQzFDLCtEQUErRDtZQUMvRCxNQUFNNEIsU0FBUzVCLFFBQVEsS0FBS2hELFFBQVFBLFFBQVF2QixnREFBTUE7WUFDbEQsTUFBTXdDLFFBQVFDLEdBQUcsQ0FBQyxJQUFJLENBQUNqQixRQUFRLENBQUNrQixHQUFHLENBQUMsQ0FBQ3ZCO2dCQUNqQyxJQUFJQSxRQUFRc0QsU0FBUyxFQUFFO29CQUNuQjtnQkFDSjtnQkFDQSxJQUFJaEUsOERBQVlBLENBQUNVLFVBQVU7b0JBQ3ZCLHFDQUFxQztvQkFDckMsb0RBQW9EO29CQUNwRCxtQ0FBbUM7b0JBQ25DQSxRQUFRaUYscUJBQXFCLENBQUNMLEtBQUs7d0JBQUNyQjtxQkFBTyxFQUFFeUIsUUFBUSxJQUFJLENBQUNyRSxZQUFZLEVBQUUrQyxhQUFhLElBQUksQ0FBQ25ELElBQUksRUFBRSxJQUFJLENBQUNFLFFBQVEsRUFBRXNFO2dCQUNuSDtnQkFDQSxPQUFPM0YsNkRBQWVBLENBQUM7b0JBQ25CLElBQUk7d0JBQ0EsTUFBTVksUUFBUTJFLGNBQWMsR0FBR0MsS0FBSzs0QkFBQ3JCO3lCQUFPLEVBQUV5QixRQUFRLElBQUksQ0FBQ3JFLFlBQVksRUFBRStDLGFBQWEsSUFBSSxDQUFDbkQsSUFBSSxFQUFFLElBQUksQ0FBQ0UsUUFBUSxFQUFFc0U7b0JBQ3BILEVBQ0EsT0FBT3ZELEtBQUs7d0JBQ1IsTUFBTUMsY0FBY3pCLFFBQVEwQixVQUFVLEdBQ2hDQyxRQUFRQyxLQUFLLEdBQ2JELFFBQVFFLElBQUk7d0JBQ2xCSixZQUFZLENBQUMsaUJBQWlCLEVBQUV6QixRQUFRRyxXQUFXLENBQUMyQixJQUFJLENBQUMsa0JBQWtCLEVBQUVOLElBQUksQ0FBQzt3QkFDbEYsSUFBSXhCLFFBQVEwQixVQUFVLEVBQUU7NEJBQ3BCLE1BQU1GO3dCQUNWO29CQUNKO2dCQUNKLEdBQUd4QixRQUFRK0IsYUFBYTtZQUM1QjtZQUNBLE9BQU8sSUFBSWtCLHlCQUF5QitCLFFBQVEsSUFBSSxDQUFDM0UsUUFBUSxFQUFFLElBQUksQ0FBQ0MsbUJBQW1CLEVBQUUsSUFBSSxDQUFDQyxJQUFJLEVBQUUsSUFBSSxDQUFDQyxlQUFlLEVBQUUsSUFBSSxDQUFDQyxRQUFRLEVBQUUsSUFBSSxDQUFDQyxtQkFBbUIsRUFBRSxJQUFJLENBQUNDLFlBQVk7UUFDcEw7SUFDSjtJQUNBLE1BQU11RSxxQkFBcUJOLEdBQUcsRUFBRU8sUUFBUSxFQUFFL0UsUUFBUTBFLFNBQVMsRUFBRW5FLGVBQWVtRSxTQUFTLEVBQUVwQixjQUFjb0IsU0FBUyxFQUFFMUMsUUFBUTBDLFNBQVMsRUFBRXpDLFlBQVl5QyxTQUFTLEVBQUVDLFVBQVVELFNBQVMsRUFBRTtRQUMzSyxPQUFPekQsUUFBUUMsR0FBRyxDQUFDNkQsU0FBUzVELEdBQUcsQ0FBQyxPQUFPNkQsY0FBY2hDO1lBQ2pELCtEQUErRDtZQUMvRCxNQUFNNEIsU0FBUzVCLFFBQVEsS0FBS2hELFFBQVFBLFFBQVF2QixnREFBTUE7WUFDbEQsTUFBTXdDLFFBQVFDLEdBQUcsQ0FBQyxJQUFJLENBQUNqQixRQUFRLENBQUNrQixHQUFHLENBQUMsQ0FBQ3ZCO2dCQUNqQyxJQUFJQSxRQUFRc0QsU0FBUyxFQUFFO29CQUNuQjtnQkFDSjtnQkFDQSxJQUFJaEUsOERBQVlBLENBQUNVLFVBQVU7b0JBQ3ZCLHFDQUFxQztvQkFDckMsb0RBQW9EO29CQUNwRCxtQ0FBbUM7b0JBQ25DQSxRQUFRcUYsMkJBQTJCLENBQUNULEtBQUs7d0JBQUNRO3FCQUFhLEVBQUVKLFFBQVEsSUFBSSxDQUFDckUsWUFBWSxFQUFFK0MsYUFBYSxJQUFJLENBQUNuRCxJQUFJLEVBQUUsSUFBSSxDQUFDRSxRQUFRLEVBQUVzRTtnQkFDL0g7Z0JBQ0EsT0FBTzNGLDZEQUFlQSxDQUFDO29CQUNuQixJQUFJO3dCQUNBLElBQUlZLFFBQVFrRixvQkFBb0IsRUFBRTs0QkFDOUIsTUFBTWxGLFFBQVFrRixvQkFBb0IsR0FBR04sS0FBSztnQ0FBQ1E7NkJBQWEsRUFBRUosUUFBUSxJQUFJLENBQUNyRSxZQUFZLEVBQUUrQyxhQUFhLElBQUksQ0FBQ25ELElBQUksRUFBRSxJQUFJLENBQUNFLFFBQVEsRUFBRXNFO3dCQUNoSSxPQUNLLElBQUkvRSxRQUFRMkUsY0FBYyxFQUFFOzRCQUM3QixNQUFNVyxnQkFBZ0JyRyxtRUFBZUEsQ0FBQ21HOzRCQUN0QyxNQUFNcEYsUUFBUTJFLGNBQWMsR0FBR0MsS0FBSztnQ0FBQ1U7NkJBQWMsRUFBRU4sUUFBUSxJQUFJLENBQUNyRSxZQUFZLEVBQUUrQyxhQUFhLElBQUksQ0FBQ25ELElBQUksRUFBRSxJQUFJLENBQUNFLFFBQVEsRUFBRXNFO3dCQUMzSDtvQkFDSixFQUNBLE9BQU92RCxLQUFLO3dCQUNSLE1BQU1DLGNBQWN6QixRQUFRMEIsVUFBVSxHQUNoQ0MsUUFBUUMsS0FBSyxHQUNiRCxRQUFRRSxJQUFJO3dCQUNsQkosWUFBWSxDQUFDLGlCQUFpQixFQUFFekIsUUFBUUcsV0FBVyxDQUFDMkIsSUFBSSxDQUFDLGtCQUFrQixFQUFFTixJQUFJLENBQUM7d0JBQ2xGLElBQUl4QixRQUFRMEIsVUFBVSxFQUFFOzRCQUNwQixNQUFNRjt3QkFDVjtvQkFDSjtnQkFDSixHQUFHeEIsUUFBUStCLGFBQWE7WUFDNUI7WUFDQSxPQUFPLElBQUlrQix5QkFBeUIrQixRQUFRLElBQUksQ0FBQzNFLFFBQVEsRUFBRSxJQUFJLENBQUNDLG1CQUFtQixFQUFFLElBQUksQ0FBQ0MsSUFBSSxFQUFFLElBQUksQ0FBQ0MsZUFBZSxFQUFFLElBQUksQ0FBQ0MsUUFBUSxFQUFFLElBQUksQ0FBQ0MsbUJBQW1CLEVBQUUsSUFBSSxDQUFDQyxZQUFZO1FBQ3BMO0lBQ0o7SUFDQSxNQUFNNEUsaUJBQWlCQyxLQUFLLEVBQUVDLE1BQU0sRUFBRXJGLFFBQVF2QixnREFBTUEsRUFBRSxFQUFFNkcsVUFBVVosU0FBUyxFQUFFMUMsUUFBUTBDLFNBQVMsRUFBRXpDLFlBQVl5QyxTQUFTLEVBQUVDLFVBQVVELFNBQVMsRUFBRTtRQUN4SSxNQUFNekQsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ2tCLEdBQUcsQ0FBQyxDQUFDdkI7WUFDakMsSUFBSUEsUUFBUWdFLFdBQVcsRUFBRTtnQkFDckI7WUFDSjtZQUNBLElBQUkxRSw4REFBWUEsQ0FBQ1UsVUFBVTtnQkFDdkIscUNBQXFDO2dCQUNyQyxvREFBb0Q7Z0JBQ3BELG1DQUFtQztnQkFDbkNBLFFBQVEyRix1QkFBdUIsQ0FBQ0gsT0FBT0MsUUFBUXJGLE9BQU8sSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJLEVBQUUsSUFBSSxDQUFDRSxRQUFRLEVBQUVpRixTQUFTWDtZQUNoSDtZQUNBLE9BQU8zRiw2REFBZUEsQ0FBQztnQkFDbkIsSUFBSTtvQkFDQSxNQUFNWSxRQUFRdUYsZ0JBQWdCLEdBQUdDLE9BQU9DLFFBQVFyRixPQUFPLElBQUksQ0FBQ08sWUFBWSxFQUFFLElBQUksQ0FBQ0osSUFBSSxFQUFFLElBQUksQ0FBQ0UsUUFBUSxFQUFFaUYsU0FBU1g7Z0JBQ2pILEVBQ0EsT0FBT3ZELEtBQUs7b0JBQ1IsTUFBTUMsY0FBY3pCLFFBQVEwQixVQUFVLEdBQ2hDQyxRQUFRQyxLQUFLLEdBQ2JELFFBQVFFLElBQUk7b0JBQ2xCSixZQUFZLENBQUMsaUJBQWlCLEVBQUV6QixRQUFRRyxXQUFXLENBQUMyQixJQUFJLENBQUMsb0JBQW9CLEVBQUVOLElBQUksQ0FBQztvQkFDcEYsSUFBSXhCLFFBQVEwQixVQUFVLEVBQUU7d0JBQ3BCLE1BQU1GO29CQUNWO2dCQUNKO1lBQ0osR0FBR3hCLFFBQVErQixhQUFhO1FBQzVCO1FBQ0EsT0FBTyxJQUFJOEIsMkJBQTJCekQsT0FBTyxJQUFJLENBQUNDLFFBQVEsRUFBRSxJQUFJLENBQUNDLG1CQUFtQixFQUFFLElBQUksQ0FBQ0MsSUFBSSxFQUFFLElBQUksQ0FBQ0MsZUFBZSxFQUFFLElBQUksQ0FBQ0MsUUFBUSxFQUFFLElBQUksQ0FBQ0MsbUJBQW1CLEVBQUUsSUFBSSxDQUFDQyxZQUFZO0lBQ3JMO0lBQ0EsTUFBTWlGLGdCQUFnQkMsSUFBSSxFQUFFQyxLQUFLLEVBQUUxRixRQUFRdkIsZ0RBQU1BLEVBQUUsRUFBRThCLGVBQWVtRSxTQUFTLEVBQUUxQyxRQUFRMEMsU0FBUyxFQUFFekMsWUFBWXlDLFNBQVMsRUFBRUMsVUFBVUQsU0FBUyxFQUFFO1FBQzFJLE1BQU16RCxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDakIsUUFBUSxDQUFDa0IsR0FBRyxDQUFDLENBQUN2QjtZQUNqQyxJQUFJQSxRQUFRb0UsV0FBVyxFQUFFO2dCQUNyQjtZQUNKO1lBQ0EsSUFBSTlFLDhEQUFZQSxDQUFDVSxVQUFVO2dCQUN2QixxQ0FBcUM7Z0JBQ3JDLG9EQUFvRDtnQkFDcEQsbUNBQW1DO2dCQUNuQ0EsUUFBUStGLHNCQUFzQixDQUFDRixNQUFNQyxPQUFPMUYsT0FBTyxJQUFJLENBQUNPLFlBQVksRUFBRSxJQUFJLENBQUNKLElBQUksRUFBRSxJQUFJLENBQUNFLFFBQVEsRUFBRXNFO1lBQ3BHO1lBQ0EsT0FBTzNGLDZEQUFlQSxDQUFDO2dCQUNuQixJQUFJO29CQUNBLE1BQU1ZLFFBQVE0RixlQUFlLEdBQUdDLE1BQU1DLE9BQU8xRixPQUFPLElBQUksQ0FBQ08sWUFBWSxFQUFFLElBQUksQ0FBQ0osSUFBSSxFQUFFLElBQUksQ0FBQ0UsUUFBUSxFQUFFc0U7Z0JBQ3JHLEVBQ0EsT0FBT3ZELEtBQUs7b0JBQ1IsTUFBTUMsY0FBY3pCLFFBQVEwQixVQUFVLEdBQ2hDQyxRQUFRQyxLQUFLLEdBQ2JELFFBQVFFLElBQUk7b0JBQ2xCSixZQUFZLENBQUMsaUJBQWlCLEVBQUV6QixRQUFRRyxXQUFXLENBQUMyQixJQUFJLENBQUMsbUJBQW1CLEVBQUVOLElBQUksQ0FBQztvQkFDbkYsSUFBSXhCLFFBQVEwQixVQUFVLEVBQUU7d0JBQ3BCLE1BQU1GO29CQUNWO2dCQUNKO1lBQ0osR0FBR3hCLFFBQVErQixhQUFhO1FBQzVCO1FBQ0EsT0FBTyxJQUFJdUMsMEJBQTBCbEUsT0FBTyxJQUFJLENBQUNDLFFBQVEsRUFBRSxJQUFJLENBQUNDLG1CQUFtQixFQUFFLElBQUksQ0FBQ0MsSUFBSSxFQUFFLElBQUksQ0FBQ0MsZUFBZSxFQUFFLElBQUksQ0FBQ0MsUUFBUSxFQUFFLElBQUksQ0FBQ0MsbUJBQW1CLEVBQUUsSUFBSSxDQUFDQyxZQUFZO0lBQ3BMO0lBQ0EsTUFBTXFGLHFCQUFxQkMsU0FBUyxFQUFFQyxLQUFLLEVBQUU5RixRQUFRdkIsZ0RBQU1BLEVBQUUsRUFBRThCLGVBQWVtRSxTQUFTLEVBQUUxQyxRQUFRMEMsU0FBUyxFQUFFekMsWUFBWXlDLFNBQVMsRUFBRUMsVUFBVUQsU0FBUyxFQUFFO1FBQ3BKLE1BQU16RCxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDakIsUUFBUSxDQUFDa0IsR0FBRyxDQUFDLENBQUN2QjtZQUNqQyxJQUFJQSxRQUFRK0MsZUFBZSxFQUFFO2dCQUN6QjtZQUNKO1lBQ0EsSUFBSXpELDhEQUFZQSxDQUFDVSxVQUFVO2dCQUN2QixxQ0FBcUM7Z0JBQ3JDLG9EQUFvRDtnQkFDcEQsbUNBQW1DO2dCQUNuQ0EsUUFBUW1HLDJCQUEyQixDQUFDRixXQUFXQyxPQUFPOUYsT0FBTyxJQUFJLENBQUNPLFlBQVksRUFBRSxJQUFJLENBQUNKLElBQUksRUFBRSxJQUFJLENBQUNFLFFBQVEsRUFBRXNFO1lBQzlHO1lBQ0EsT0FBTzNGLDZEQUFlQSxDQUFDO2dCQUNuQixJQUFJO29CQUNBLE1BQU1ZLFFBQVFnRyxvQkFBb0IsR0FBR0MsV0FBV0MsT0FBTzlGLE9BQU8sSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJLEVBQUUsSUFBSSxDQUFDRSxRQUFRLEVBQUVzRTtnQkFDL0csRUFDQSxPQUFPdkQsS0FBSztvQkFDUixNQUFNQyxjQUFjekIsUUFBUTBCLFVBQVUsR0FDaENDLFFBQVFDLEtBQUssR0FDYkQsUUFBUUUsSUFBSTtvQkFDbEJKLFlBQVksQ0FBQyxpQkFBaUIsRUFBRXpCLFFBQVFHLFdBQVcsQ0FBQzJCLElBQUksQ0FBQyx3QkFBd0IsRUFBRU4sSUFBSSxDQUFDO29CQUN4RixJQUFJeEIsUUFBUTBCLFVBQVUsRUFBRTt3QkFDcEIsTUFBTUY7b0JBQ1Y7Z0JBQ0o7WUFDSixHQUFHeEIsUUFBUStCLGFBQWE7UUFDNUI7UUFDQSxPQUFPLElBQUlPLCtCQUErQmxDLE9BQU8sSUFBSSxDQUFDQyxRQUFRLEVBQUUsSUFBSSxDQUFDQyxtQkFBbUIsRUFBRSxJQUFJLENBQUNDLElBQUksRUFBRSxJQUFJLENBQUNDLGVBQWUsRUFBRSxJQUFJLENBQUNDLFFBQVEsRUFBRSxJQUFJLENBQUNDLG1CQUFtQixFQUFFLElBQUksQ0FBQ0MsWUFBWTtJQUN6TDtJQUNBLE1BQU1xQixrQkFBa0JDLFNBQVMsRUFDakMsOERBQThEO0lBQzlEQyxJQUFJLEVBQUU5QixLQUFLLEVBQUVnQyxLQUFLLEVBQ2xCLDhEQUE4RDtJQUM5REMsU0FBUyxFQUFFO1FBQ1AsTUFBTWhCLFFBQVFDLEdBQUcsQ0FBQyxJQUFJLENBQUNqQixRQUFRLENBQUNrQixHQUFHLENBQUMsQ0FBQ3ZCLFVBQVlaLDZEQUFlQSxDQUFDO2dCQUM3RCxJQUFJLENBQUNZLFFBQVFvRyxpQkFBaUIsRUFBRTtvQkFDNUIsSUFBSTt3QkFDQSxNQUFNcEcsUUFBUWdDLGlCQUFpQixHQUFHQyxXQUFXQyxNQUFNOUIsT0FBTyxJQUFJLENBQUNHLElBQUksRUFBRSxJQUFJLENBQUNFLFFBQVE7b0JBQ3RGLEVBQ0EsT0FBT2UsS0FBSzt3QkFDUixNQUFNQyxjQUFjekIsUUFBUTBCLFVBQVUsR0FDaENDLFFBQVFDLEtBQUssR0FDYkQsUUFBUUUsSUFBSTt3QkFDbEJKLFlBQVksQ0FBQyxpQkFBaUIsRUFBRXpCLFFBQVFHLFdBQVcsQ0FBQzJCLElBQUksQ0FBQyxxQkFBcUIsRUFBRU4sSUFBSSxDQUFDO3dCQUNyRixJQUFJeEIsUUFBUTBCLFVBQVUsRUFBRTs0QkFDcEIsTUFBTUY7d0JBQ1Y7b0JBQ0o7Z0JBQ0o7WUFDSixHQUFHeEIsUUFBUStCLGFBQWE7SUFDNUI7SUFDQXNFLFdBQVdyRyxPQUFPLEVBQUVzRyxVQUFVLElBQUksRUFBRTtRQUNoQyxJQUFJLENBQUNqRyxRQUFRLENBQUNrRyxJQUFJLENBQUN2RztRQUNuQixJQUFJc0csU0FBUztZQUNULElBQUksQ0FBQ2hHLG1CQUFtQixDQUFDaUcsSUFBSSxDQUFDdkc7UUFDbEM7SUFDSjtJQUNBd0csY0FBY3hHLE9BQU8sRUFBRTtRQUNuQixJQUFJLENBQUNLLFFBQVEsR0FBRyxJQUFJLENBQUNBLFFBQVEsQ0FBQ29HLE1BQU0sQ0FBQyxDQUFDQyxXQUFhQSxhQUFhMUc7UUFDaEUsSUFBSSxDQUFDTSxtQkFBbUIsR0FBRyxJQUFJLENBQUNBLG1CQUFtQixDQUFDbUcsTUFBTSxDQUFDLENBQUNDLFdBQWFBLGFBQWExRztJQUMxRjtJQUNBQyxZQUFZSSxRQUFRLEVBQUVpRyxVQUFVLElBQUksRUFBRTtRQUNsQyxJQUFJLENBQUNqRyxRQUFRLEdBQUcsRUFBRTtRQUNsQixJQUFJLENBQUNDLG1CQUFtQixHQUFHLEVBQUU7UUFDN0IsS0FBSyxNQUFNTixXQUFXSyxTQUFVO1lBQzVCLElBQUksQ0FBQ2dHLFVBQVUsQ0FBQ3JHLFNBQVNzRztRQUM3QjtJQUNKO0lBQ0EzRCxRQUFRcEMsSUFBSSxFQUFFK0YsVUFBVSxJQUFJLEVBQUU7UUFDMUIsSUFBSSxDQUFDSyxVQUFVLENBQUNwRyxPQUFPLG9CQUFvQjtRQUMzQyxJQUFJLENBQUNBLElBQUksQ0FBQ2dHLElBQUksSUFBSWhHO1FBQ2xCLElBQUkrRixTQUFTO1lBQ1QsSUFBSSxDQUFDOUYsZUFBZSxDQUFDK0YsSUFBSSxJQUFJaEc7UUFDakM7SUFDSjtJQUNBb0csV0FBV3BHLElBQUksRUFBRTtRQUNiLElBQUksQ0FBQ0EsSUFBSSxHQUFHLElBQUksQ0FBQ0EsSUFBSSxDQUFDa0csTUFBTSxDQUFDLENBQUNqRSxNQUFRLENBQUNqQyxLQUFLcUcsUUFBUSxDQUFDcEU7UUFDckQsSUFBSSxDQUFDaEMsZUFBZSxHQUFHLElBQUksQ0FBQ0EsZUFBZSxDQUFDaUcsTUFBTSxDQUFDLENBQUNqRSxNQUFRLENBQUNqQyxLQUFLcUcsUUFBUSxDQUFDcEU7SUFDL0U7SUFDQUksWUFBWW5DLFFBQVEsRUFBRTZGLFVBQVUsSUFBSSxFQUFFO1FBQ2xDLElBQUksQ0FBQzdGLFFBQVEsR0FBRztZQUFFLEdBQUcsSUFBSSxDQUFDQSxRQUFRO1lBQUUsR0FBR0EsUUFBUTtRQUFDO1FBQ2hELElBQUk2RixTQUFTO1lBQ1QsSUFBSSxDQUFDNUYsbUJBQW1CLEdBQUc7Z0JBQUUsR0FBRyxJQUFJLENBQUNBLG1CQUFtQjtnQkFBRSxHQUFHRCxRQUFRO1lBQUM7UUFDMUU7SUFDSjtJQUNBb0csZUFBZXBHLFFBQVEsRUFBRTtRQUNyQixLQUFLLE1BQU1xRyxPQUFPbEcsT0FBT21HLElBQUksQ0FBQ3RHLFVBQVc7WUFDckMsT0FBTyxJQUFJLENBQUNBLFFBQVEsQ0FBQ3FHLElBQUk7WUFDekIsT0FBTyxJQUFJLENBQUNwRyxtQkFBbUIsQ0FBQ29HLElBQUk7UUFDeEM7SUFDSjtJQUNBRSxLQUFLQyxxQkFBcUIsRUFBRSxFQUFFWCxVQUFVLElBQUksRUFBRTtRQUMxQyxNQUFNN0QsVUFBVSxJQUFJQyxnQkFBZ0IsSUFBSSxDQUFDL0IsWUFBWTtRQUNyRCxLQUFLLE1BQU1YLFdBQVcsSUFBSSxDQUFDSyxRQUFRLENBQUU7WUFDakMsTUFBTTZHLGNBQWMsSUFBSSxDQUFDNUcsbUJBQW1CLENBQUNzRyxRQUFRLENBQUM1RztZQUN0RHlDLFFBQVE0RCxVQUFVLENBQUNyRyxTQUFTa0g7UUFDaEM7UUFDQSxLQUFLLE1BQU0xRSxPQUFPLElBQUksQ0FBQ2pDLElBQUksQ0FBRTtZQUN6QixNQUFNMkcsY0FBYyxJQUFJLENBQUMxRyxlQUFlLENBQUNvRyxRQUFRLENBQUNwRTtZQUNsREMsUUFBUUUsT0FBTyxDQUFDO2dCQUFDSDthQUFJLEVBQUUwRTtRQUMzQjtRQUNBLEtBQUssTUFBTUosT0FBT2xHLE9BQU9tRyxJQUFJLENBQUMsSUFBSSxDQUFDdEcsUUFBUSxFQUFHO1lBQzFDLE1BQU15RyxjQUFjdEcsT0FBT21HLElBQUksQ0FBQyxJQUFJLENBQUNyRyxtQkFBbUIsRUFBRWtHLFFBQVEsQ0FBQ0U7WUFDbkVyRSxRQUFRRyxXQUFXLENBQUM7Z0JBQUUsQ0FBQ2tFLElBQUksRUFBRSxJQUFJLENBQUNyRyxRQUFRLENBQUNxRyxJQUFJO1lBQUMsR0FBR0k7UUFDdkQ7UUFDQSxLQUFLLE1BQU1sSCxXQUFXaUgsbUJBQW9CO1lBQ3RDLElBQ0Esc0RBQXNEO1lBQ3REeEUsUUFBUXBDLFFBQVEsQ0FDWG9HLE1BQU0sQ0FBQyxDQUFDVSxJQUFNQSxFQUFFckYsSUFBSSxLQUFLLDRCQUN6QnNGLElBQUksQ0FBQyxDQUFDRCxJQUFNQSxFQUFFckYsSUFBSSxLQUFLOUIsUUFBUThCLElBQUksR0FBRztnQkFDdkM7WUFDSjtZQUNBVyxRQUFRNEQsVUFBVSxDQUFDckcsU0FBU3NHO1FBQ2hDO1FBQ0EsT0FBTzdEO0lBQ1g7SUFDQSxPQUFPNEUsYUFBYWhILFFBQVEsRUFBRTtRQUMxQixNQUFNaUgsZ0JBQWdCeEkseURBQW1CQTtZQUNyQ3FCLGFBQWM7Z0JBQ1YsS0FBSztnQkFDTFMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO29CQUNoQ0MsWUFBWTtvQkFDWkMsY0FBYztvQkFDZEMsVUFBVTtvQkFDVkMsT0FBT3BDLGdEQUFNQTtnQkFDakI7Z0JBQ0ErQixPQUFPMkcsTUFBTSxDQUFDLElBQUksRUFBRWxIO1lBQ3hCO1FBQ0o7UUFDQSxNQUFNb0MsVUFBVSxJQUFJLElBQUk7UUFDeEJBLFFBQVE0RCxVQUFVLENBQUMsSUFBSWlCO1FBQ3ZCLE9BQU83RTtJQUNYO0lBQ0EsT0FBTytFLFVBQVVsSCxtQkFBbUIsRUFBRW1ILGFBQWEsRUFBRWpILGVBQWUsRUFBRWtILFNBQVMsRUFBRWhILG1CQUFtQixFQUFFaUgsYUFBYSxFQUFFbEQsT0FBTyxFQUFFO1FBQzFILE9BQU8sSUFBSSxDQUFDbUQsY0FBYyxDQUFDdEgscUJBQXFCbUgsZUFBZWpILGlCQUFpQmtILFdBQVdoSCxxQkFBcUJpSCxlQUFlbEQ7SUFDbkk7SUFDQSxxREFBcUQ7SUFDckQsT0FBT21ELGVBQWV0SCxtQkFBbUIsRUFBRW1ILGFBQWEsRUFBRWpILGVBQWUsRUFBRWtILFNBQVMsRUFBRWhILG1CQUFtQixFQUFFaUgsYUFBYSxFQUFFbEQsT0FBTyxFQUFFO1FBQy9ILElBQUlvRDtRQUNKLElBQUl2SCx1QkFBdUJtSCxlQUFlO1lBQ3RDLElBQUk5SCxNQUFNQyxPQUFPLENBQUNVLHdCQUF3QixDQUFDQSxxQkFBcUI7Z0JBQzVEdUgsa0JBQWtCLElBQUluRjtnQkFDdEJtRixnQkFBZ0I1SCxXQUFXLENBQUNLLHFCQUFxQmlCLElBQUl1RyxrQkFBa0IsRUFBRSxFQUFFO1lBQy9FLE9BQ0s7Z0JBQ0RELGtCQUFrQnZIO1lBQ3RCO1lBQ0F1SCxrQkFBa0JBLGdCQUFnQmIsSUFBSSxDQUFDckgsTUFBTUMsT0FBTyxDQUFDNkgsaUJBQy9DQSxjQUFjbEcsR0FBRyxDQUFDdUcsaUJBQ2xCTCxlQUFlcEgsVUFBVTtRQUNuQztRQUNBLE1BQU0wSCxpQkFBaUI3SSxxRUFBc0JBLENBQUMseUJBQXlCLFVBQ25FdUYsU0FBU3VEO1FBQ2IsTUFBTUMsbUJBQW1COUkseUVBQWVBLENBQUMrSSxtQkFBbUIsSUFBSUMsa0JBQzVEOUkscUVBQWdCQTtRQUNwQixNQUFNOEksaUJBQWlCRixvQkFDbEIvSSxDQUFBQSxxRUFBc0JBLENBQUMsd0JBQXdCLEtBQUk7UUFDeEQsSUFBSTZJLGtCQUFrQkksZ0JBQWdCO1lBQ2xDLElBQUksQ0FBQ04saUJBQWlCO2dCQUNsQkEsa0JBQWtCLElBQUluRjtZQUMxQjtZQUNBLElBQUlxRixrQkFDQSxDQUFDRixnQkFBZ0J4SCxRQUFRLENBQUMrRyxJQUFJLENBQUMsQ0FBQ3BILFVBQVlBLFFBQVE4QixJQUFJLEtBQUs5Qyx1RUFBc0JBLENBQUNvSixTQUFTLENBQUN0RyxJQUFJLEdBQUc7Z0JBQ3JHLE1BQU11RyxpQkFBaUIsSUFBSXJKLHVFQUFzQkE7Z0JBQ2pENkksZ0JBQWdCeEIsVUFBVSxDQUFDZ0MsZ0JBQWdCO1lBQy9DO1lBQ0EsSUFBSUYsa0JBQ0EsQ0FBQ04sZ0JBQWdCeEgsUUFBUSxDQUFDK0csSUFBSSxDQUFDLENBQUNwSCxVQUFZQSxRQUFROEIsSUFBSSxLQUFLLHFCQUFxQjtnQkFDbEYsSUFBSW1HLGtCQUFrQjtvQkFDbEIsTUFBTUssV0FBVyxJQUFJbkoseUVBQWVBO29CQUNwQzBJLGdCQUFnQnhCLFVBQVUsQ0FBQ2lDLFVBQVU7Z0JBQ3pDO1lBQ0o7WUFDQSxJQUFJTCxrQkFBa0I7Z0JBQ2xCLG9EQUFvRDtnQkFDcEQsNkJBQTZCO2dCQUM3QixNQUFNTSxrQkFBa0JwSix5RUFBZUEsQ0FBQytJLG1CQUFtQjtnQkFDM0QsSUFBSUssbUJBQW1CVixnQkFBZ0JsSCxZQUFZLEtBQUttRSxXQUFXO29CQUMvRCtDLGdCQUFnQmxILFlBQVksR0FBRzRILGdCQUFnQkMsRUFBRTtvQkFDakQsTUFBTUYsV0FBV1QsZ0JBQWdCeEgsUUFBUSxDQUFDb0ksSUFBSSxDQUFDLENBQUN6SSxVQUFZQSxRQUFROEIsSUFBSSxLQUFLO29CQUM3RXdHLFVBQVVJLGtCQUFrQkg7Z0JBQ2hDO1lBQ0o7UUFDSjtRQUNBLEtBQUssTUFBTSxFQUFFSSxVQUFVLEVBQUV6QixjQUFjLElBQUksRUFBRTBCLFlBQVksRUFBRUMsTUFBTSxFQUFHLElBQUlySiw4RkFBa0JBLEdBQUk7WUFDMUYsTUFBTXNKLHVCQUF1QkQsVUFBVTNKLHFFQUFzQkEsQ0FBQzJKLFlBQVksVUFBVUQ7WUFDcEYsSUFBSTVJO1lBQ0osTUFBTStJLGtCQUFrQkosZUFBZTdELFlBQVl2Riw4RkFBa0JBLENBQUNvSixjQUFjN0Q7WUFDcEYsSUFBSWlFLG1CQUFtQmhLLCtEQUFxQkEsQ0FBQ2dLLGtCQUFrQjtnQkFDM0QvSSxVQUFVK0k7WUFDZCxPQUNLLElBQUlELHNCQUFzQjtnQkFDM0IsOERBQThEO2dCQUM5RDlJLFVBQVUsSUFBSTRJLGFBQWEsQ0FBQztZQUNoQztZQUNBLElBQUk1SSxZQUFZOEUsV0FBVztnQkFDdkIsSUFBSSxDQUFDK0MsaUJBQWlCO29CQUNsQkEsa0JBQWtCLElBQUluRjtnQkFDMUI7Z0JBQ0EsSUFBSSxDQUFDbUYsZ0JBQWdCeEgsUUFBUSxDQUFDK0csSUFBSSxDQUFDLENBQUNELElBQU1BLEVBQUVyRixJQUFJLEtBQUs5QixRQUFROEIsSUFBSSxHQUFHO29CQUNoRStGLGdCQUFnQnhCLFVBQVUsQ0FBQ3JHLFNBQVNrSDtnQkFDeEM7WUFDSjtRQUNKO1FBQ0EsSUFBSTFHLG1CQUFtQmtILFdBQVc7WUFDOUIsSUFBSUcsaUJBQWlCO2dCQUNqQkEsZ0JBQWdCbEYsT0FBTyxDQUFDbkMsbUJBQW1CLEVBQUU7Z0JBQzdDcUgsZ0JBQWdCbEYsT0FBTyxDQUFDK0UsYUFBYSxFQUFFLEVBQUU7WUFDN0M7UUFDSjtRQUNBLElBQUloSCx1QkFBdUJpSCxlQUFlO1lBQ3RDLElBQUlFLGlCQUFpQjtnQkFDakJBLGdCQUFnQmpGLFdBQVcsQ0FBQ2xDLHVCQUF1QixDQUFDO2dCQUNwRG1ILGdCQUFnQmpGLFdBQVcsQ0FBQytFLGlCQUFpQixDQUFDLEdBQUc7WUFDckQ7UUFDSjtRQUNBLE9BQU9FO0lBQ1g7QUFDSjtBQUNPLFNBQVNDLGNBQWM5SCxPQUFPO0lBQ2pDLElBQUksVUFBVUEsU0FBUztRQUNuQixPQUFPQTtJQUNYO0lBQ0EsT0FBT2xCLHlEQUFtQkEsQ0FBQ2tLLFdBQVcsQ0FBQ2hKO0FBQzNDO0FBQ0E7OztDQUdDLEdBQ00sTUFBTWlKO0lBQ1Q5SSxZQUFZK0ksU0FBUyxFQUFFekUsT0FBTyxDQUFFO1FBQzVCN0QsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPaUk7UUFDWDtRQUNBdEksT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXO1lBQ25DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPd0Q7UUFDWDtRQUNBN0QsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7SUFDSjtJQUNBLE1BQU1rSSw2QkFBNkJDLFVBQVUsRUFBRTNELE1BQU0sRUFBRWhCLE9BQU8sRUFBRTtRQUM1RCxNQUFNNEUsS0FBSyxJQUFJbEsseUVBQWVBLENBQUNzRjtRQUMvQixNQUFNNkUsS0FBSyxNQUFNNUcsZ0JBQWdCOEUsU0FBUyxDQUFDO1lBQUM2QjtTQUFHO1FBQy9DLE1BQU1FLGFBQWEsTUFBTUQsSUFBSS9ELGlCQUFpQjtZQUMxQ2lFLElBQUk7WUFDSkMsTUFBTTtZQUNOakIsSUFBSTtnQkFBQztnQkFBYTtnQkFBYTtnQkFBVVk7YUFBVztRQUN4RCxHQUFHM0QsVUFBVSxDQUFDO1FBQ2QsSUFBSSxDQUFDOEQsWUFBWTtZQUNiLE1BQU0sSUFBSUcsTUFBTTtRQUNwQjtRQUNBLE9BQU9IO0lBQ1g7SUFDQSxNQUFNSSxNQUFNbEUsTUFBTSxFQUFFO1FBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUM4RCxVQUFVLEVBQUU7WUFDbEIsSUFBSSxDQUFDQSxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUNKLDRCQUE0QixDQUFDLElBQUksQ0FBQ0QsU0FBUyxFQUFFekQsUUFBUSxJQUFJLENBQUNoQixPQUFPO1FBQ2xHO1FBQ0EsT0FBTyxJQUFJLENBQUM4RSxVQUFVLENBQUNoSCxRQUFRO0lBQ25DO0lBQ0EsTUFBTVgsTUFBTUosR0FBRyxFQUFFO1FBQ2IsSUFBSSxJQUFJLENBQUMrSCxVQUFVLEVBQUU7WUFDakIsTUFBTSxJQUFJLENBQUNBLFVBQVUsQ0FBQ3pGLGdCQUFnQixDQUFDdEM7WUFDdkMsSUFBSSxDQUFDK0gsVUFBVSxHQUFHekU7UUFDdEI7SUFDSjtJQUNBLE1BQU04RSxJQUFJaEcsTUFBTSxFQUFFO1FBQ2QsSUFBSSxJQUFJLENBQUMyRixVQUFVLEVBQUU7WUFDakIsTUFBTSxJQUFJLENBQUNBLFVBQVUsQ0FBQ3RGLGNBQWMsQ0FBQ0wsVUFBVSxDQUFDO1lBQ2hELElBQUksQ0FBQzJGLFVBQVUsR0FBR3pFO1FBQ3RCO0lBQ0o7QUFDSjtBQUNBLDhEQUE4RDtBQUM5RCxTQUFTK0UsY0FBYzVJLEtBQUssRUFBRTZJLFVBQVU7SUFDcEMsT0FBTzdJLFNBQVMsQ0FBQ3RCLE1BQU1DLE9BQU8sQ0FBQ3FCLFVBQVUsT0FBT0EsVUFBVSxXQUNwREEsUUFDQTtRQUFFLENBQUM2SSxXQUFXLEVBQUU3STtJQUFNO0FBQ2hDO0FBQ0EsOERBQThEO0FBQ3ZELGVBQWU4SSxhQUFhQyxZQUFZLEVBQUVDLFlBQVksRUFBRSxHQUFHQyxJQUFJO0lBQ2xFLE1BQU1DLGFBQWEsSUFBSWxCLFdBQVdlLGFBQWFsSSxJQUFJLEVBQUVrSTtJQUNyRCxNQUFNbkMsa0JBQWtCLE1BQU1zQyxXQUFXUixLQUFLLENBQUM7UUFBRSxHQUFHTyxJQUFJO0lBQUM7SUFDekQsSUFBSTtRQUNBLE1BQU1FLFNBQVMsTUFBTUgsYUFBYXBDLG9CQUFvQnFDO1FBQ3RELE1BQU1DLFdBQVdQLEdBQUcsQ0FBQ0MsY0FBY08sUUFBUTtRQUMzQyxPQUFPQTtJQUNYLEVBQ0EsT0FBTzVJLEtBQUs7UUFDUixNQUFNMkksV0FBV3ZJLEtBQUssQ0FBQ0o7UUFDdkIsTUFBTUE7SUFDVjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvbWFuYWdlci5qcz8wOWRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBCYXNlQ2FsbGJhY2tIYW5kbGVyLCBpc0Jhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ29uc29sZUNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuLi90cmFjZXJzL2NvbnNvbGUuanNcIjtcbmltcG9ydCB7IGdldEJ1ZmZlclN0cmluZyB9IGZyb20gXCIuLi9tZXNzYWdlcy91dGlscy5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCB7IExhbmdDaGFpblRyYWNlciwgfSBmcm9tIFwiLi4vdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzXCI7XG5pbXBvcnQgeyBjb25zdW1lQ2FsbGJhY2sgfSBmcm9tIFwiLi9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgaXNUcmFjaW5nRW5hYmxlZCB9IGZyb20gXCIuLi91dGlscy9jYWxsYmFja3MuanNcIjtcbmltcG9ydCB7IGlzQmFzZVRyYWNlciB9IGZyb20gXCIuLi90cmFjZXJzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGdldENvbnRleHRWYXJpYWJsZSwgX2dldENvbmZpZ3VyZUhvb2tzLCB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2FzeW5jX2xvY2FsX3N0b3JhZ2UvY29udGV4dC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2FsbGJhY2tDb25maWdBcmcoYXJnKSB7XG4gICAgaWYgKCFhcmcpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgfHwgXCJuYW1lXCIgaW4gYXJnKSB7XG4gICAgICAgIHJldHVybiB7IGNhbGxiYWNrczogYXJnIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXJnO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlIGNhbGxiYWNrcyBmcm9tIGRpZmZlcmVudCBjb21wb25lbnRzIG9mIExhbmdDaGFpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIHNldEhhbmRsZXIoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRIYW5kbGVycyhbaGFuZGxlcl0pO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcnVuIG1hbmFnZXIgaW4gTGFuZ0NoYWluLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHJ1bklkLCBoYW5kbGVycywgaW5oZXJpdGFibGVIYW5kbGVycywgdGFncywgaW5oZXJpdGFibGVUYWdzLCBtZXRhZGF0YSwgaW5oZXJpdGFibGVNZXRhZGF0YSwgX3BhcmVudFJ1bklkKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBydW5JZFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGhhbmRsZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZUhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmhlcml0YWJsZUhhbmRsZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0YWdzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlVGFnc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG1ldGFkYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZU1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmhlcml0YWJsZU1ldGFkYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcGFyZW50UnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IF9wYXJlbnRSdW5JZFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IHBhcmVudFJ1bklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50UnVuSWQ7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRleHQodGV4dCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUZXh0Py4odGV4dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVGV4dDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBkYXRhLCBfcnVuSWQsIF90YWdzLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9tZXRhZGF0YSkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDdXN0b21FdmVudD8uKGV2ZW50TmFtZSwgZGF0YSwgdGhpcy5ydW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDdXN0b21FdmVudDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuLyoqXG4gKiBNYW5hZ2VzIGNhbGxiYWNrcyBmb3IgcmV0cmlldmVyIHJ1bnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgZ2V0Q2hpbGQodGFnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5ydW5JZCk7XG4gICAgICAgIG1hbmFnZXIuc2V0SGFuZGxlcnModGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzKTtcbiAgICAgICAgbWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcbiAgICAgICAgbWFuYWdlci5hZGRNZXRhZGF0YSh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpO1xuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRW5kKGRvY3VtZW50cykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVSZXRyaWV2ZXIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVJldHJpZXZlckVuZD8uKGRvY3VtZW50cywgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlUmV0cmlldmVyYCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlUmV0cmlldmVyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJFcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVSZXRyaWV2ZXJFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvckxMTVJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBhc3luYyBoYW5kbGVMTE1OZXdUb2tlbih0b2tlbiwgaWR4LCBfcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGZpZWxkcykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTU5ld1Rva2VuPy4odG9rZW4sIGlkeCA/PyB7IHByb21wdDogMCwgY29tcGxldGlvbjogMCB9LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBmaWVsZHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTU5ld1Rva2VuOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVycm9yKGVyciwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBleHRyYVBhcmFtcykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBleHRyYVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNRXJyb3I6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBleHRyYVBhcmFtcykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgZXh0cmFQYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBnZXRDaGlsZCh0YWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLnJ1bklkKTtcbiAgICAgICAgbWFuYWdlci5zZXRIYW5kbGVycyh0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMpO1xuICAgICAgICBtYW5hZ2VyLmFkZFRhZ3ModGhpcy5pbmhlcml0YWJsZVRhZ3MpO1xuICAgICAgICBtYW5hZ2VyLmFkZE1ldGFkYXRhKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSk7XG4gICAgICAgIGlmICh0YWcpIHtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkVGFncyhbdGFnXSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVycm9yKGVyciwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYWluRXJyb3I/LihlcnIsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIGt3YXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5FcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVuZChvdXRwdXQsIF9ydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGFpbkVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywga3dhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpbkVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEFjdGlvbihhY3Rpb24pIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUFnZW50QWN0aW9uPy4oYWN0aW9uLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEFjdGlvbjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEVuZChhY3Rpb24pIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUFnZW50RW5kPy4oYWN0aW9uLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKHRhZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIG1hbmFnZXIuYWRkVGFncyh0aGlzLmluaGVyaXRhYmxlVGFncyk7XG4gICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEodGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xFcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xFcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbEVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVuZChvdXRwdXQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xFbmQ/LihvdXRwdXQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xFbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG4vKipcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBwcm9tcHQgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJXaGF0IGlzIHRoZSBhbnN3ZXIgdG8ge3F1ZXN0aW9ufT9cIik7XG4gKlxuICogLy8gRXhhbXBsZSBvZiB1c2luZyBMTE1DaGFpbiB3aXRoIE9wZW5BSSBhbmQgYSBzaW1wbGUgcHJvbXB0XG4gKiBjb25zdCBjaGFpbiA9IG5ldyBMTE1DaGFpbih7XG4gKiAgIGxsbTogbmV3IENoYXRPcGVuQUkoeyBtb2RlbDogXCJncHQtNG8tbWluaVwiLCB0ZW1wZXJhdHVyZTogMC45IH0pLFxuICogICBwcm9tcHQsXG4gKiB9KTtcbiAqXG4gKiAvLyBSdW5uaW5nIHRoZSBjaGFpbiB3aXRoIGEgc2luZ2xlIHF1ZXN0aW9uXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5jYWxsKHtcbiAqICAgcXVlc3Rpb246IFwiV2hhdCBpcyB0aGUgYWlyc3BlZWQgdmVsb2NpdHkgb2YgYW4gdW5sYWRlbiBzd2FsbG93P1wiLFxuICogfSk7XG4gKiBjb25zb2xlLmxvZyhcIlRoZSBhbnN3ZXIgaXM6XCIsIHJlc3VsdCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlciBleHRlbmRzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFJ1bklkLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVIYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlTWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNhbGxiYWNrX21hbmFnZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3BhcmVudFJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBvcHRpb25zPy5oYW5kbGVycyA/PyB0aGlzLmhhbmRsZXJzO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPVxuICAgICAgICAgICAgb3B0aW9ucz8uaW5oZXJpdGFibGVIYW5kbGVycyA/PyB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnM7XG4gICAgICAgIHRoaXMudGFncyA9IG9wdGlvbnM/LnRhZ3MgPz8gdGhpcy50YWdzO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlVGFncyA9IG9wdGlvbnM/LmluaGVyaXRhYmxlVGFncyA/PyB0aGlzLmluaGVyaXRhYmxlVGFncztcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnM/Lm1ldGFkYXRhID8/IHRoaXMubWV0YWRhdGE7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSA9XG4gICAgICAgICAgICBvcHRpb25zPy5pbmhlcml0YWJsZU1ldGFkYXRhID8/IHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YTtcbiAgICAgICAgdGhpcy5fcGFyZW50UnVuSWQgPSBwYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcGFyZW50IHJ1biBJRCwgaWYgYW55LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHBhcmVudCBydW4gSUQuXG4gICAgICovXG4gICAgZ2V0UGFyZW50UnVuSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCA9IHVuZGVmaW5lZCwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBleHRyYVBhcmFtcyA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbXB0cy5tYXAoYXN5bmMgKHByb21wdCwgaWR4KSA9PiB7XG4gICAgICAgICAgICAvLyBDYW4ndCBoYXZlIGR1cGxpY2F0ZSBydW5zIHdpdGggdGhlIHNhbWUgcnVuIElEIChpZiBwcm92aWRlZClcbiAgICAgICAgICAgIGNvbnN0IHJ1bklkXyA9IGlkeCA9PT0gMCAmJiBydW5JZCA/IHJ1bklkIDogdXVpZHY0KCk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmlnbm9yZUxMTSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc0Jhc2VUcmFjZXIoaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBhZGQgcnVuIHRvIHRoZSBydW4gbWFwLlxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyB0aGlzIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gY2FsbGJhY2tzIGFyZSBiYWNrZ3JvdW5kZWQuXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuX2NyZWF0ZVJ1bkZvckxMTVN0YXJ0KGxsbSwgW3Byb21wdF0sIHJ1bklkXywgdGhpcy5fcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNU3RhcnQ/LihsbG0sIFtwcm9tcHRdLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1TdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuKHJ1bklkXywgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCA9IHVuZGVmaW5lZCwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBleHRyYVBhcmFtcyA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobWVzc2FnZXMubWFwKGFzeW5jIChtZXNzYWdlR3JvdXAsIGlkeCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2FuJ3QgaGF2ZSBkdXBsaWNhdGUgcnVucyB3aXRoIHRoZSBzYW1lIHJ1biBJRCAoaWYgcHJvdmlkZWQpXG4gICAgICAgICAgICBjb25zdCBydW5JZF8gPSBpZHggPT09IDAgJiYgcnVuSWQgPyBydW5JZCA6IHV1aWR2NCgpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNCYXNlVHJhY2VyKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgYWRkIHJ1biB0byB0aGUgcnVuIG1hcC5cbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG8gdGhpcyBzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLlxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLl9jcmVhdGVSdW5Gb3JDaGF0TW9kZWxTdGFydChsbG0sIFttZXNzYWdlR3JvdXBdLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5oYW5kbGVDaGF0TW9kZWxTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhdE1vZGVsU3RhcnQ/LihsbG0sIFttZXNzYWdlR3JvdXBdLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhhbmRsZXIuaGFuZGxlTExNU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlU3RyaW5nID0gZ2V0QnVmZmVyU3RyaW5nKG1lc3NhZ2VHcm91cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1TdGFydD8uKGxsbSwgW21lc3NhZ2VTdHJpbmddLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1TdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuKHJ1bklkXywgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkID0gdXVpZHY0KCksIHJ1blR5cGUgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQmFzZVRyYWNlcihoYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgYWRkIHJ1biB0byB0aGUgcnVuIG1hcC5cbiAgICAgICAgICAgICAgICAvLyBXZSBkbyB0aGlzIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICAgICAgICAgICAgLy8gd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZC5cbiAgICAgICAgICAgICAgICBoYW5kbGVyLl9jcmVhdGVSdW5Gb3JDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5UeXBlLCBydW5OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5TdGFydD8uKGNoYWluLCBpbnB1dHMsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5UeXBlLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpblN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkID0gdXVpZHY0KCksIF9wYXJlbnRSdW5JZCA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNCYXNlVHJhY2VyKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBhZGQgcnVuIHRvIHRoZSBydW4gbWFwLlxuICAgICAgICAgICAgICAgIC8vIFdlIGRvIHRoaXMgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgICAgICAgICAgICAvLyB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLlxuICAgICAgICAgICAgICAgIGhhbmRsZXIuX2NyZWF0ZVJ1bkZvclRvb2xTdGFydCh0b29sLCBpbnB1dCwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUb29sU3RhcnQ/Lih0b29sLCBpbnB1dCwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xTdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycyk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJTdGFydChyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCA9IHV1aWR2NCgpLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyLmlnbm9yZVJldHJpZXZlcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0Jhc2VUcmFjZXIoaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGFkZCBydW4gdG8gdGhlIHJ1biBtYXAuXG4gICAgICAgICAgICAgICAgLy8gV2UgZG8gdGhpcyBzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gY2FsbGJhY2tzIGFyZSBiYWNrZ3JvdW5kZWQuXG4gICAgICAgICAgICAgICAgaGFuZGxlci5fY3JlYXRlUnVuRm9yUmV0cmlldmVyU3RhcnQocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJTdGFydD8uKHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVSZXRyaWV2ZXJTdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycyk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBkYXRhLCBydW5JZCwgX3RhZ3MsIFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgX21ldGFkYXRhKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUN1c3RvbUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDdXN0b21FdmVudD8uKGV2ZW50TmFtZSwgZGF0YSwgcnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ3VzdG9tRXZlbnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIGlmIChpbmhlcml0KSB7XG4gICAgICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZmlsdGVyKChfaGFuZGxlcikgPT4gX2hhbmRsZXIgIT09IGhhbmRsZXIpO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPSB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMuZmlsdGVyKChfaGFuZGxlcikgPT4gX2hhbmRsZXIgIT09IGhhbmRsZXIpO1xuICAgIH1cbiAgICBzZXRIYW5kbGVycyhoYW5kbGVycywgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGhhbmRsZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVGFncyh0YWdzLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnJlbW92ZVRhZ3ModGFncyk7IC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgIHRoaXMudGFncy5wdXNoKC4uLnRhZ3MpO1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZVRhZ3MucHVzaCguLi50YWdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVUYWdzKHRhZ3MpIHtcbiAgICAgICAgdGhpcy50YWdzID0gdGhpcy50YWdzLmZpbHRlcigodGFnKSA9PiAhdGFncy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZVRhZ3MgPSB0aGlzLmluaGVyaXRhYmxlVGFncy5maWx0ZXIoKHRhZykgPT4gIXRhZ3MuaW5jbHVkZXModGFnKSk7XG4gICAgfVxuICAgIGFkZE1ldGFkYXRhKG1ldGFkYXRhLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0geyAuLi50aGlzLm1ldGFkYXRhLCAuLi5tZXRhZGF0YSB9O1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhID0geyAuLi50aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIC4uLm1ldGFkYXRhIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlTWV0YWRhdGEobWV0YWRhdGEpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobWV0YWRhdGEpKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5tZXRhZGF0YVtrZXldO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvcHkoYWRkaXRpb25hbEhhbmRsZXJzID0gW10sIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIHRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaGVyaXRhYmxlID0gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLmluY2x1ZGVzKGhhbmRsZXIpO1xuICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0aGlzLnRhZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaGVyaXRhYmxlID0gdGhpcy5pbmhlcml0YWJsZVRhZ3MuaW5jbHVkZXModGFnKTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkVGFncyhbdGFnXSwgaW5oZXJpdGFibGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMubWV0YWRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IE9iamVjdC5rZXlzKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSkuaW5jbHVkZXMoa2V5KTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEoeyBba2V5XTogdGhpcy5tZXRhZGF0YVtrZXldIH0sIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgYWRkaXRpb25hbEhhbmRsZXJzKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyBQcmV2ZW50IG11bHRpcGxlIGNvcGllcyBvZiBjb25zb2xlX2NhbGxiYWNrX2hhbmRsZXJcbiAgICAgICAgICAgIG1hbmFnZXIuaGFuZGxlcnNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChoKSA9PiBoLm5hbWUgPT09IFwiY29uc29sZV9jYWxsYmFja19oYW5kbGVyXCIpXG4gICAgICAgICAgICAgICAgLnNvbWUoKGgpID0+IGgubmFtZSA9PT0gaGFuZGxlci5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUhhbmRsZXJzKGhhbmRsZXJzKSB7XG4gICAgICAgIGNsYXNzIEhhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1dWlkdjQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgaGFuZGxlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgdGhpcygpO1xuICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIobmV3IEhhbmRsZXIoKSk7XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBzdGF0aWMgY29uZmlndXJlKGluaGVyaXRhYmxlSGFuZGxlcnMsIGxvY2FsSGFuZGxlcnMsIGluaGVyaXRhYmxlVGFncywgbG9jYWxUYWdzLCBpbmhlcml0YWJsZU1ldGFkYXRhLCBsb2NhbE1ldGFkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWd1cmVTeW5jKGluaGVyaXRhYmxlSGFuZGxlcnMsIGxvY2FsSGFuZGxlcnMsIGluaGVyaXRhYmxlVGFncywgbG9jYWxUYWdzLCBpbmhlcml0YWJsZU1ldGFkYXRhLCBsb2NhbE1ldGFkYXRhLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLy8gVE9ETzogRGVwcmVjYXRlIGFzeW5jIG1ldGhvZCBpbiBmYXZvciBvZiB0aGlzIG9uZS5cbiAgICBzdGF0aWMgX2NvbmZpZ3VyZVN5bmMoaW5oZXJpdGFibGVIYW5kbGVycywgbG9jYWxIYW5kbGVycywgaW5oZXJpdGFibGVUYWdzLCBsb2NhbFRhZ3MsIGluaGVyaXRhYmxlTWV0YWRhdGEsIGxvY2FsTWV0YWRhdGEsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGNhbGxiYWNrTWFuYWdlcjtcbiAgICAgICAgaWYgKGluaGVyaXRhYmxlSGFuZGxlcnMgfHwgbG9jYWxIYW5kbGVycykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5oZXJpdGFibGVIYW5kbGVycykgfHwgIWluaGVyaXRhYmxlSGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLnNldEhhbmRsZXJzKGluaGVyaXRhYmxlSGFuZGxlcnM/Lm1hcChlbnN1cmVIYW5kbGVyKSA/PyBbXSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBpbmhlcml0YWJsZUhhbmRsZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gY2FsbGJhY2tNYW5hZ2VyLmNvcHkoQXJyYXkuaXNBcnJheShsb2NhbEhhbmRsZXJzKVxuICAgICAgICAgICAgICAgID8gbG9jYWxIYW5kbGVycy5tYXAoZW5zdXJlSGFuZGxlcilcbiAgICAgICAgICAgICAgICA6IGxvY2FsSGFuZGxlcnM/LmhhbmRsZXJzLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmVyYm9zZUVuYWJsZWQgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1ZFUkJPU0VcIikgPT09IFwidHJ1ZVwiIHx8XG4gICAgICAgICAgICBvcHRpb25zPy52ZXJib3NlO1xuICAgICAgICBjb25zdCB0cmFjaW5nVjJFbmFibGVkID0gTGFuZ0NoYWluVHJhY2VyLmdldFRyYWNlYWJsZVJ1blRyZWUoKT8udHJhY2luZ0VuYWJsZWQgfHxcbiAgICAgICAgICAgIGlzVHJhY2luZ0VuYWJsZWQoKTtcbiAgICAgICAgY29uc3QgdHJhY2luZ0VuYWJsZWQgPSB0cmFjaW5nVjJFbmFibGVkIHx8XG4gICAgICAgICAgICAoZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9UUkFDSU5HXCIpID8/IGZhbHNlKTtcbiAgICAgICAgaWYgKHZlcmJvc2VFbmFibGVkIHx8IHRyYWNpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2ZXJib3NlRW5hYmxlZCAmJlxuICAgICAgICAgICAgICAgICFjYWxsYmFja01hbmFnZXIuaGFuZGxlcnMuc29tZSgoaGFuZGxlcikgPT4gaGFuZGxlci5uYW1lID09PSBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyLnByb3RvdHlwZS5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnNvbGVIYW5kbGVyID0gbmV3IENvbnNvbGVDYWxsYmFja0hhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkSGFuZGxlcihjb25zb2xlSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhY2luZ0VuYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAhY2FsbGJhY2tNYW5hZ2VyLmhhbmRsZXJzLnNvbWUoKGhhbmRsZXIpID0+IGhhbmRsZXIubmFtZSA9PT0gXCJsYW5nY2hhaW5fdHJhY2VyXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNpbmdWMkVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhY2VyVjIgPSBuZXcgTGFuZ0NoYWluVHJhY2VyKCk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRIYW5kbGVyKHRyYWNlclYyLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhY2luZ1YyRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIC8vIGhhbmRvZmYgYmV0d2VlbiBsYW5nY2hhaW4gYW5kIGxhbmdzbWl0aC90cmFjZWFibGVcbiAgICAgICAgICAgICAgICAvLyBvdmVycmlkZSB0aGUgcGFyZW50IHJ1biBJRFxuICAgICAgICAgICAgICAgIGNvbnN0IGltcGxpY2l0UnVuVHJlZSA9IExhbmdDaGFpblRyYWNlci5nZXRUcmFjZWFibGVSdW5UcmVlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGltcGxpY2l0UnVuVHJlZSAmJiBjYWxsYmFja01hbmFnZXIuX3BhcmVudFJ1bklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLl9wYXJlbnRSdW5JZCA9IGltcGxpY2l0UnVuVHJlZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhY2VyVjIgPSBjYWxsYmFja01hbmFnZXIuaGFuZGxlcnMuZmluZCgoaGFuZGxlcikgPT4gaGFuZGxlci5uYW1lID09PSBcImxhbmdjaGFpbl90cmFjZXJcIik7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNlclYyPy51cGRhdGVGcm9tUnVuVHJlZShpbXBsaWNpdFJ1blRyZWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHsgY29udGV4dFZhciwgaW5oZXJpdGFibGUgPSB0cnVlLCBoYW5kbGVyQ2xhc3MsIGVudlZhciwgfSBvZiBfZ2V0Q29uZmlndXJlSG9va3MoKSkge1xuICAgICAgICAgICAgY29uc3QgY3JlYXRlSWZOb3RJbkNvbnRleHQgPSBlbnZWYXIgJiYgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShlbnZWYXIpID09PSBcInRydWVcIiAmJiBoYW5kbGVyQ2xhc3M7XG4gICAgICAgICAgICBsZXQgaGFuZGxlcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHRWYXJWYWx1ZSA9IGNvbnRleHRWYXIgIT09IHVuZGVmaW5lZCA/IGdldENvbnRleHRWYXJpYWJsZShjb250ZXh0VmFyKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChjb250ZXh0VmFyVmFsdWUgJiYgaXNCYXNlQ2FsbGJhY2tIYW5kbGVyKGNvbnRleHRWYXJWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gY29udGV4dFZhclZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3JlYXRlSWZOb3RJbkNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGhhbmRsZXIgPSBuZXcgaGFuZGxlckNsYXNzKHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYW5kbGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrTWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY2FsbGJhY2tNYW5hZ2VyLmhhbmRsZXJzLnNvbWUoKGgpID0+IGgubmFtZSA9PT0gaGFuZGxlci5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0YWJsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmhlcml0YWJsZVRhZ3MgfHwgbG9jYWxUYWdzKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZFRhZ3MoaW5oZXJpdGFibGVUYWdzID8/IFtdKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkVGFncyhsb2NhbFRhZ3MgPz8gW10sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5oZXJpdGFibGVNZXRhZGF0YSB8fCBsb2NhbE1ldGFkYXRhKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZE1ldGFkYXRhKGluaGVyaXRhYmxlTWV0YWRhdGEgPz8ge30pO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRNZXRhZGF0YShsb2NhbE1ldGFkYXRhID8/IHt9LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrTWFuYWdlcjtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgaWYgKFwibmFtZVwiIGluIGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgfVxuICAgIHJldHVybiBCYXNlQ2FsbGJhY2tIYW5kbGVyLmZyb21NZXRob2RzKGhhbmRsZXIpO1xufVxuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgW2B0cmFjZWFibGVgXShodHRwczovL2RvY3Muc21pdGgubGFuZ2NoYWluLmNvbS9vYnNlcnZhYmlsaXR5L2hvd190b19ndWlkZXMvdHJhY2luZy9hbm5vdGF0ZV9jb2RlKVxuICogZnJvbSBcImxhbmdzbWl0aFwiIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFjZUdyb3VwIHtcbiAgICBjb25zdHJ1Y3Rvcihncm91cE5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ3JvdXBOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBncm91cE5hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wdGlvbnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bk1hbmFnZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0VHJhY2VHcm91cENhbGxiYWNrTWFuYWdlcihncm91cF9uYW1lLCBpbnB1dHMsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2IgPSBuZXcgTGFuZ0NoYWluVHJhY2VyKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjbSA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoW2NiXSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjbT8uaGFuZGxlQ2hhaW5TdGFydCh7XG4gICAgICAgICAgICBsYzogMSxcbiAgICAgICAgICAgIHR5cGU6IFwibm90X2ltcGxlbWVudGVkXCIsXG4gICAgICAgICAgICBpZDogW1wibGFuZ2NoYWluXCIsIFwiY2FsbGJhY2tzXCIsIFwiZ3JvdXBzXCIsIGdyb3VwX25hbWVdLFxuICAgICAgICB9LCBpbnB1dHMgPz8ge30pO1xuICAgICAgICBpZiAoIXJ1bk1hbmFnZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgcnVuIGdyb3VwIGNhbGxiYWNrIG1hbmFnZXIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5NYW5hZ2VyO1xuICAgIH1cbiAgICBhc3luYyBzdGFydChpbnB1dHMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJ1bk1hbmFnZXIpIHtcbiAgICAgICAgICAgIHRoaXMucnVuTWFuYWdlciA9IGF3YWl0IHRoaXMuZ2V0VHJhY2VHcm91cENhbGxiYWNrTWFuYWdlcih0aGlzLmdyb3VwTmFtZSwgaW5wdXRzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bk1hbmFnZXIuZ2V0Q2hpbGQoKTtcbiAgICB9XG4gICAgYXN5bmMgZXJyb3IoZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLnJ1bk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuTWFuYWdlci5oYW5kbGVDaGFpbkVycm9yKGVycik7XG4gICAgICAgICAgICB0aGlzLnJ1bk1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZW5kKG91dHB1dCkge1xuICAgICAgICBpZiAodGhpcy5ydW5NYW5hZ2VyKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1bk1hbmFnZXIuaGFuZGxlQ2hhaW5FbmQob3V0cHV0ID8/IHt9KTtcbiAgICAgICAgICAgIHRoaXMucnVuTWFuYWdlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5mdW5jdGlvbiBfY29lcmNlVG9EaWN0KHZhbHVlLCBkZWZhdWx0S2V5KSB7XG4gICAgcmV0dXJuIHZhbHVlICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgPyB2YWx1ZVxuICAgICAgICA6IHsgW2RlZmF1bHRLZXldOiB2YWx1ZSB9O1xufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cmFjZUFzR3JvdXAoZ3JvdXBPcHRpb25zLCBlbmNsb3NlZENvZGUsIC4uLmFyZ3MpIHtcbiAgICBjb25zdCB0cmFjZUdyb3VwID0gbmV3IFRyYWNlR3JvdXAoZ3JvdXBPcHRpb25zLm5hbWUsIGdyb3VwT3B0aW9ucyk7XG4gICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyID0gYXdhaXQgdHJhY2VHcm91cC5zdGFydCh7IC4uLmFyZ3MgfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW5jbG9zZWRDb2RlKGNhbGxiYWNrTWFuYWdlciwgLi4uYXJncyk7XG4gICAgICAgIGF3YWl0IHRyYWNlR3JvdXAuZW5kKF9jb2VyY2VUb0RpY3QocmVzdWx0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgYXdhaXQgdHJhY2VHcm91cC5lcnJvcihlcnIpO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInY0IiwidXVpZHY0IiwiQmFzZUNhbGxiYWNrSGFuZGxlciIsImlzQmFzZUNhbGxiYWNrSGFuZGxlciIsIkNvbnNvbGVDYWxsYmFja0hhbmRsZXIiLCJnZXRCdWZmZXJTdHJpbmciLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiTGFuZ0NoYWluVHJhY2VyIiwiY29uc3VtZUNhbGxiYWNrIiwiaXNUcmFjaW5nRW5hYmxlZCIsImlzQmFzZVRyYWNlciIsImdldENvbnRleHRWYXJpYWJsZSIsIl9nZXRDb25maWd1cmVIb29rcyIsInBhcnNlQ2FsbGJhY2tDb25maWdBcmciLCJhcmciLCJBcnJheSIsImlzQXJyYXkiLCJjYWxsYmFja3MiLCJCYXNlQ2FsbGJhY2tNYW5hZ2VyIiwic2V0SGFuZGxlciIsImhhbmRsZXIiLCJzZXRIYW5kbGVycyIsIkJhc2VSdW5NYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJydW5JZCIsImhhbmRsZXJzIiwiaW5oZXJpdGFibGVIYW5kbGVycyIsInRhZ3MiLCJpbmhlcml0YWJsZVRhZ3MiLCJtZXRhZGF0YSIsImluaGVyaXRhYmxlTWV0YWRhdGEiLCJfcGFyZW50UnVuSWQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwicGFyZW50UnVuSWQiLCJoYW5kbGVUZXh0IiwidGV4dCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJlcnIiLCJsb2dGdW5jdGlvbiIsInJhaXNlRXJyb3IiLCJjb25zb2xlIiwiZXJyb3IiLCJ3YXJuIiwibmFtZSIsImF3YWl0SGFuZGxlcnMiLCJoYW5kbGVDdXN0b21FdmVudCIsImV2ZW50TmFtZSIsImRhdGEiLCJfcnVuSWQiLCJfdGFncyIsIl9tZXRhZGF0YSIsIkNhbGxiYWNrTWFuYWdlckZvclJldHJpZXZlclJ1biIsImdldENoaWxkIiwidGFnIiwibWFuYWdlciIsIkNhbGxiYWNrTWFuYWdlciIsImFkZFRhZ3MiLCJhZGRNZXRhZGF0YSIsImhhbmRsZVJldHJpZXZlckVuZCIsImRvY3VtZW50cyIsImlnbm9yZVJldHJpZXZlciIsImhhbmRsZVJldHJpZXZlckVycm9yIiwiQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuIiwiaGFuZGxlTExNTmV3VG9rZW4iLCJ0b2tlbiIsImlkeCIsImZpZWxkcyIsImlnbm9yZUxMTSIsInByb21wdCIsImNvbXBsZXRpb24iLCJoYW5kbGVMTE1FcnJvciIsImV4dHJhUGFyYW1zIiwiaGFuZGxlTExNRW5kIiwib3V0cHV0IiwiQ2FsbGJhY2tNYW5hZ2VyRm9yQ2hhaW5SdW4iLCJoYW5kbGVDaGFpbkVycm9yIiwia3dhcmdzIiwiaWdub3JlQ2hhaW4iLCJoYW5kbGVDaGFpbkVuZCIsImhhbmRsZUFnZW50QWN0aW9uIiwiYWN0aW9uIiwiaWdub3JlQWdlbnQiLCJoYW5kbGVBZ2VudEVuZCIsIkNhbGxiYWNrTWFuYWdlckZvclRvb2xSdW4iLCJoYW5kbGVUb29sRXJyb3IiLCJoYW5kbGVUb29sRW5kIiwib3B0aW9ucyIsImdldFBhcmVudFJ1bklkIiwiaGFuZGxlTExNU3RhcnQiLCJsbG0iLCJwcm9tcHRzIiwidW5kZWZpbmVkIiwicnVuTmFtZSIsInJ1bklkXyIsIl9jcmVhdGVSdW5Gb3JMTE1TdGFydCIsImhhbmRsZUNoYXRNb2RlbFN0YXJ0IiwibWVzc2FnZXMiLCJtZXNzYWdlR3JvdXAiLCJfY3JlYXRlUnVuRm9yQ2hhdE1vZGVsU3RhcnQiLCJtZXNzYWdlU3RyaW5nIiwiaGFuZGxlQ2hhaW5TdGFydCIsImNoYWluIiwiaW5wdXRzIiwicnVuVHlwZSIsIl9jcmVhdGVSdW5Gb3JDaGFpblN0YXJ0IiwiaGFuZGxlVG9vbFN0YXJ0IiwidG9vbCIsImlucHV0IiwiX2NyZWF0ZVJ1bkZvclRvb2xTdGFydCIsImhhbmRsZVJldHJpZXZlclN0YXJ0IiwicmV0cmlldmVyIiwicXVlcnkiLCJfY3JlYXRlUnVuRm9yUmV0cmlldmVyU3RhcnQiLCJpZ25vcmVDdXN0b21FdmVudCIsImFkZEhhbmRsZXIiLCJpbmhlcml0IiwicHVzaCIsInJlbW92ZUhhbmRsZXIiLCJmaWx0ZXIiLCJfaGFuZGxlciIsInJlbW92ZVRhZ3MiLCJpbmNsdWRlcyIsInJlbW92ZU1ldGFkYXRhIiwia2V5Iiwia2V5cyIsImNvcHkiLCJhZGRpdGlvbmFsSGFuZGxlcnMiLCJpbmhlcml0YWJsZSIsImgiLCJzb21lIiwiZnJvbUhhbmRsZXJzIiwiSGFuZGxlciIsImFzc2lnbiIsImNvbmZpZ3VyZSIsImxvY2FsSGFuZGxlcnMiLCJsb2NhbFRhZ3MiLCJsb2NhbE1ldGFkYXRhIiwiX2NvbmZpZ3VyZVN5bmMiLCJjYWxsYmFja01hbmFnZXIiLCJlbnN1cmVIYW5kbGVyIiwidmVyYm9zZUVuYWJsZWQiLCJ2ZXJib3NlIiwidHJhY2luZ1YyRW5hYmxlZCIsImdldFRyYWNlYWJsZVJ1blRyZWUiLCJ0cmFjaW5nRW5hYmxlZCIsInByb3RvdHlwZSIsImNvbnNvbGVIYW5kbGVyIiwidHJhY2VyVjIiLCJpbXBsaWNpdFJ1blRyZWUiLCJpZCIsImZpbmQiLCJ1cGRhdGVGcm9tUnVuVHJlZSIsImNvbnRleHRWYXIiLCJoYW5kbGVyQ2xhc3MiLCJlbnZWYXIiLCJjcmVhdGVJZk5vdEluQ29udGV4dCIsImNvbnRleHRWYXJWYWx1ZSIsImZyb21NZXRob2RzIiwiVHJhY2VHcm91cCIsImdyb3VwTmFtZSIsImdldFRyYWNlR3JvdXBDYWxsYmFja01hbmFnZXIiLCJncm91cF9uYW1lIiwiY2IiLCJjbSIsInJ1bk1hbmFnZXIiLCJsYyIsInR5cGUiLCJFcnJvciIsInN0YXJ0IiwiZW5kIiwiX2NvZXJjZVRvRGljdCIsImRlZmF1bHRLZXkiLCJ0cmFjZUFzR3JvdXAiLCJncm91cE9wdGlvbnMiLCJlbmNsb3NlZENvZGUiLCJhcmdzIiwidHJhY2VHcm91cCIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/promises.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* reexport safe */ _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_0__.awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* reexport safe */ _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_0__.consumeCallback)\n/* harmony export */ });\n/* harmony import */ var _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../singletons/callbacks.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/callbacks.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL3Byb21pc2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRjtBQUNsQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL3Byb21pc2VzLmpzP2VjMzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXdhaXRBbGxDYWxsYmFja3MsIGNvbnN1bWVDYWxsYmFjayB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2NhbGxiYWNrcy5qc1wiO1xuZXhwb3J0IHsgYXdhaXRBbGxDYWxsYmFja3MsIGNvbnN1bWVDYWxsYmFjayB9O1xuIl0sIm5hbWVzIjpbImF3YWl0QWxsQ2FsbGJhY2tzIiwiY29uc3VtZUNhbGxiYWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/document.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/document.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Document: () => (/* binding */ Document)\n/* harmony export */ });\n/**\n * Interface for interacting with a document.\n */ class Document {\n    constructor(fields){\n        Object.defineProperty(this, \"pageContent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // The ID field is optional at the moment.\n        // It will likely become required in a future major release after\n        // it has been adopted by enough vectorstore implementations.\n        /**\n         * An optional identifier for the document.\n         *\n         * Ideally this should be unique across the document collection and formatted\n         * as a UUID, but this will not be enforced.\n         */ Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pageContent = fields.pageContent !== undefined ? fields.pageContent.toString() : \"\";\n        this.metadata = fields.metadata ?? {};\n        this.id = fields.id;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2RvY3VtZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Q0FFQyxHQUNNLE1BQU1BO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSwwQ0FBMEM7UUFDMUMsaUVBQWlFO1FBQ2pFLDZEQUE2RDtRQUM3RDs7Ozs7U0FLQyxHQUNETCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE1BQU07WUFDOUJDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsV0FBVyxHQUNaUCxPQUFPTyxXQUFXLEtBQUtDLFlBQVlSLE9BQU9PLFdBQVcsQ0FBQ0UsUUFBUSxLQUFLO1FBQ3ZFLElBQUksQ0FBQ0MsUUFBUSxHQUFHVixPQUFPVSxRQUFRLElBQUksQ0FBQztRQUNwQyxJQUFJLENBQUNDLEVBQUUsR0FBR1gsT0FBT1csRUFBRTtJQUN2QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvZG9jdW1lbnQuanM/YjRmYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEludGVyZmFjZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBhIGRvY3VtZW50LlxuICovXG5leHBvcnQgY2xhc3MgRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYWdlQ29udGVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUaGUgSUQgZmllbGQgaXMgb3B0aW9uYWwgYXQgdGhlIG1vbWVudC5cbiAgICAgICAgLy8gSXQgd2lsbCBsaWtlbHkgYmVjb21lIHJlcXVpcmVkIGluIGEgZnV0dXJlIG1ham9yIHJlbGVhc2UgYWZ0ZXJcbiAgICAgICAgLy8gaXQgaGFzIGJlZW4gYWRvcHRlZCBieSBlbm91Z2ggdmVjdG9yc3RvcmUgaW1wbGVtZW50YXRpb25zLlxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gb3B0aW9uYWwgaWRlbnRpZmllciBmb3IgdGhlIGRvY3VtZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBJZGVhbGx5IHRoaXMgc2hvdWxkIGJlIHVuaXF1ZSBhY3Jvc3MgdGhlIGRvY3VtZW50IGNvbGxlY3Rpb24gYW5kIGZvcm1hdHRlZFxuICAgICAgICAgKiBhcyBhIFVVSUQsIGJ1dCB0aGlzIHdpbGwgbm90IGJlIGVuZm9yY2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wYWdlQ29udGVudCA9XG4gICAgICAgICAgICBmaWVsZHMucGFnZUNvbnRlbnQgIT09IHVuZGVmaW5lZCA/IGZpZWxkcy5wYWdlQ29udGVudC50b1N0cmluZygpIDogXCJcIjtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IGZpZWxkcy5tZXRhZGF0YSA/PyB7fTtcbiAgICAgICAgdGhpcy5pZCA9IGZpZWxkcy5pZDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiRG9jdW1lbnQiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJwYWdlQ29udGVudCIsInVuZGVmaW5lZCIsInRvU3RyaW5nIiwibWV0YWRhdGEiLCJpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/document.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _document_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _document_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _transformers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transformers.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThCO0FBQ0kiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2RvY3VtZW50cy9pbmRleC5qcz8yNjI0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2RvY3VtZW50LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmFuc2Zvcm1lcnMuanNcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/transformers.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* binding */ BaseDocumentTransformer),\n/* harmony export */   MappingDocumentTransformer: () => (/* binding */ MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n/**\n * Abstract base class for document transformation systems.\n *\n * A document transformation system takes an array of Documents and returns an\n * array of transformed Documents. These arrays do not necessarily have to have\n * the same length.\n *\n * One example of this is a text splitter that splits a large document into\n * many smaller documents.\n */ class BaseDocumentTransformer extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"documents\",\n                \"transformers\"\n            ]\n        });\n    }\n    /**\n     * Method to invoke the document transformation. This method calls the\n     * transformDocuments method with the provided input.\n     * @param input The input documents to be transformed.\n     * @param _options Optional configuration object to customize the behavior of callbacks.\n     * @returns A Promise that resolves to the transformed documents.\n     */ invoke(input, _options) {\n        return this.transformDocuments(input);\n    }\n}\n/**\n * Class for document transformers that return exactly one transformed document\n * for each input document.\n */ class MappingDocumentTransformer extends BaseDocumentTransformer {\n    async transformDocuments(documents) {\n        const newDocuments = [];\n        for (const document of documents){\n            const transformedDocument = await this._transformDocument(document);\n            newDocuments.push(transformedDocument);\n        }\n        return newDocuments;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL3RyYW5zZm9ybWVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0Q7QUFDaEQ7Ozs7Ozs7OztDQVNDLEdBQ00sTUFBTUMsZ0NBQWdDRCx3REFBUUE7SUFDakRFLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjtnQkFBYTthQUFlO1FBQzFEO0lBQ0o7SUFDQTs7Ozs7O0tBTUMsR0FDREMsT0FBT0MsS0FBSyxFQUFFQyxRQUFRLEVBQUU7UUFDcEIsT0FBTyxJQUFJLENBQUNDLGtCQUFrQixDQUFDRjtJQUNuQztBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUcsbUNBQW1DYjtJQUM1QyxNQUFNWSxtQkFBbUJFLFNBQVMsRUFBRTtRQUNoQyxNQUFNQyxlQUFlLEVBQUU7UUFDdkIsS0FBSyxNQUFNQyxZQUFZRixVQUFXO1lBQzlCLE1BQU1HLHNCQUFzQixNQUFNLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNGO1lBQzFERCxhQUFhSSxJQUFJLENBQUNGO1FBQ3RCO1FBQ0EsT0FBT0Y7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvdHJhbnNmb3JtZXJzLmpzPzUwMDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUnVubmFibGUgfSBmcm9tIFwiLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbi8qKlxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgZG9jdW1lbnQgdHJhbnNmb3JtYXRpb24gc3lzdGVtcy5cbiAqXG4gKiBBIGRvY3VtZW50IHRyYW5zZm9ybWF0aW9uIHN5c3RlbSB0YWtlcyBhbiBhcnJheSBvZiBEb2N1bWVudHMgYW5kIHJldHVybnMgYW5cbiAqIGFycmF5IG9mIHRyYW5zZm9ybWVkIERvY3VtZW50cy4gVGhlc2UgYXJyYXlzIGRvIG5vdCBuZWNlc3NhcmlseSBoYXZlIHRvIGhhdmVcbiAqIHRoZSBzYW1lIGxlbmd0aC5cbiAqXG4gKiBPbmUgZXhhbXBsZSBvZiB0aGlzIGlzIGEgdGV4dCBzcGxpdHRlciB0aGF0IHNwbGl0cyBhIGxhcmdlIGRvY3VtZW50IGludG9cbiAqIG1hbnkgc21hbGxlciBkb2N1bWVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlRG9jdW1lbnRUcmFuc2Zvcm1lciBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcImRvY3VtZW50c1wiLCBcInRyYW5zZm9ybWVyc1wiXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIGludm9rZSB0aGUgZG9jdW1lbnQgdHJhbnNmb3JtYXRpb24uIFRoaXMgbWV0aG9kIGNhbGxzIHRoZVxuICAgICAqIHRyYW5zZm9ybURvY3VtZW50cyBtZXRob2Qgd2l0aCB0aGUgcHJvdmlkZWQgaW5wdXQuXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCBkb2N1bWVudHMgdG8gYmUgdHJhbnNmb3JtZWQuXG4gICAgICogQHBhcmFtIF9vcHRpb25zIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHRvIGN1c3RvbWl6ZSB0aGUgYmVoYXZpb3Igb2YgY2FsbGJhY2tzLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSB0cmFuc2Zvcm1lZCBkb2N1bWVudHMuXG4gICAgICovXG4gICAgaW52b2tlKGlucHV0LCBfb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Eb2N1bWVudHMoaW5wdXQpO1xuICAgIH1cbn1cbi8qKlxuICogQ2xhc3MgZm9yIGRvY3VtZW50IHRyYW5zZm9ybWVycyB0aGF0IHJldHVybiBleGFjdGx5IG9uZSB0cmFuc2Zvcm1lZCBkb2N1bWVudFxuICogZm9yIGVhY2ggaW5wdXQgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXBwaW5nRG9jdW1lbnRUcmFuc2Zvcm1lciBleHRlbmRzIEJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIHtcbiAgICBhc3luYyB0cmFuc2Zvcm1Eb2N1bWVudHMoZG9jdW1lbnRzKSB7XG4gICAgICAgIGNvbnN0IG5ld0RvY3VtZW50cyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGRvY3VtZW50IG9mIGRvY3VtZW50cykge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZWREb2N1bWVudCA9IGF3YWl0IHRoaXMuX3RyYW5zZm9ybURvY3VtZW50KGRvY3VtZW50KTtcbiAgICAgICAgICAgIG5ld0RvY3VtZW50cy5wdXNoKHRyYW5zZm9ybWVkRG9jdW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdEb2N1bWVudHM7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlJ1bm5hYmxlIiwiQmFzZURvY3VtZW50VHJhbnNmb3JtZXIiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJpbnZva2UiLCJpbnB1dCIsIl9vcHRpb25zIiwidHJhbnNmb3JtRG9jdW1lbnRzIiwiTWFwcGluZ0RvY3VtZW50VHJhbnNmb3JtZXIiLCJkb2N1bWVudHMiLCJuZXdEb2N1bWVudHMiLCJkb2N1bWVudCIsInRyYW5zZm9ybWVkRG9jdW1lbnQiLCJfdHJhbnNmb3JtRG9jdW1lbnQiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/embeddings.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/embeddings.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* binding */ Embeddings)\n/* harmony export */ });\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n/**\n * An abstract class that provides methods for embedding documents and\n * queries using LangChain.\n */ class Embeddings {\n    constructor(params){\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__.AsyncCaller(params ?? {});\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZW1iZWRkaW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzRDtBQUN0RDs7O0NBR0MsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEI7OztTQUdDLEdBQ0RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSVYsK0RBQVdBLENBQUNHLFVBQVUsQ0FBQztJQUM3QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9lbWJlZGRpbmdzLmpzP2UxOWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi91dGlscy9hc3luY19jYWxsZXIuanNcIjtcbi8qKlxuICogQW4gYWJzdHJhY3QgY2xhc3MgdGhhdCBwcm92aWRlcyBtZXRob2RzIGZvciBlbWJlZGRpbmcgZG9jdW1lbnRzIGFuZFxuICogcXVlcmllcyB1c2luZyBMYW5nQ2hhaW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBFbWJlZGRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhc3luYyBjYWxsZXIgc2hvdWxkIGJlIHVzZWQgYnkgc3ViY2xhc3NlcyB0byBtYWtlIGFueSBhc3luYyBjYWxscyxcbiAgICAgICAgICogd2hpY2ggd2lsbCB0aHVzIGJlbmVmaXQgZnJvbSB0aGUgY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FsbGVyID0gbmV3IEFzeW5jQ2FsbGVyKHBhcmFtcyA/PyB7fSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkFzeW5jQ2FsbGVyIiwiRW1iZWRkaW5ncyIsImNvbnN0cnVjdG9yIiwicGFyYW1zIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImNhbGxlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/errors/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/errors/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addLangChainErrorFields: () => (/* binding */ addLangChainErrorFields)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */ /* eslint-disable no-param-reassign */ function addLangChainErrorFields(error, lc_error_code) {\n    error.lc_error_code = lc_error_code;\n    error.message = `${error.message}\\n\\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${lc_error_code}/\\n`;\n    return error;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXJyb3JzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxxREFBcUQsR0FDckQsb0NBQW9DLEdBQzdCLFNBQVNBLHdCQUF3QkMsS0FBSyxFQUFFQyxhQUFhO0lBQ3hERCxNQUFNQyxhQUFhLEdBQUdBO0lBQ3RCRCxNQUFNRSxPQUFPLEdBQUcsQ0FBQyxFQUFFRixNQUFNRSxPQUFPLENBQUMsOEVBQThFLEVBQUVELGNBQWMsR0FBRyxDQUFDO0lBQ25JLE9BQU9EO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2Vycm9ycy9pbmRleC5qcz8xOTFmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5leHBvcnQgZnVuY3Rpb24gYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMoZXJyb3IsIGxjX2Vycm9yX2NvZGUpIHtcbiAgICBlcnJvci5sY19lcnJvcl9jb2RlID0gbGNfZXJyb3JfY29kZTtcbiAgICBlcnJvci5tZXNzYWdlID0gYCR7ZXJyb3IubWVzc2FnZX1cXG5cXG5Ucm91Ymxlc2hvb3RpbmcgVVJMOiBodHRwczovL2pzLmxhbmdjaGFpbi5jb20vZG9jcy90cm91Ymxlc2hvb3RpbmcvZXJyb3JzLyR7bGNfZXJyb3JfY29kZX0vXFxuYDtcbiAgICByZXR1cm4gZXJyb3I7XG59XG4iXSwibmFtZXMiOlsiYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMiLCJlcnJvciIsImxjX2Vycm9yX2NvZGUiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/errors/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/base.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/base.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangChain: () => (/* binding */ BaseLangChain),\n/* harmony export */   BaseLanguageModel: () => (/* binding */ BaseLanguageModel),\n/* harmony export */   calculateMaxTokens: () => (/* binding */ calculateMaxTokens),\n/* harmony export */   getEmbeddingContextSize: () => (/* binding */ getEmbeddingContextSize),\n/* harmony export */   getModelContextSize: () => (/* binding */ getModelContextSize),\n/* harmony export */   getModelNameForTiktoken: () => (/* binding */ getModelNameForTiktoken),\n/* harmony export */   isOpenAITool: () => (/* binding */ isOpenAITool)\n/* harmony export */ });\n/* harmony import */ var _caches_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../caches/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/caches/base.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/tiktoken.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n\n\n\n// https://www.npmjs.com/package/js-tiktoken\nconst getModelNameForTiktoken = (modelName)=>{\n    if (modelName.startsWith(\"gpt-3.5-turbo-16k\")) {\n        return \"gpt-3.5-turbo-16k\";\n    }\n    if (modelName.startsWith(\"gpt-3.5-turbo-\")) {\n        return \"gpt-3.5-turbo\";\n    }\n    if (modelName.startsWith(\"gpt-4-32k\")) {\n        return \"gpt-4-32k\";\n    }\n    if (modelName.startsWith(\"gpt-4-\")) {\n        return \"gpt-4\";\n    }\n    if (modelName.startsWith(\"gpt-4o\")) {\n        return \"gpt-4o\";\n    }\n    return modelName;\n};\nconst getEmbeddingContextSize = (modelName)=>{\n    switch(modelName){\n        case \"text-embedding-ada-002\":\n            return 8191;\n        default:\n            return 2046;\n    }\n};\nconst getModelContextSize = (modelName)=>{\n    switch(getModelNameForTiktoken(modelName)){\n        case \"gpt-3.5-turbo-16k\":\n            return 16384;\n        case \"gpt-3.5-turbo\":\n            return 4096;\n        case \"gpt-4-32k\":\n            return 32768;\n        case \"gpt-4\":\n            return 8192;\n        case \"text-davinci-003\":\n            return 4097;\n        case \"text-curie-001\":\n            return 2048;\n        case \"text-babbage-001\":\n            return 2048;\n        case \"text-ada-001\":\n            return 2048;\n        case \"code-davinci-002\":\n            return 8000;\n        case \"code-cushman-001\":\n            return 2048;\n        default:\n            return 4097;\n    }\n};\n/**\n * Whether or not the input matches the OpenAI tool definition.\n * @param {unknown} tool The input to check.\n * @returns {boolean} Whether the input is an OpenAI tool definition.\n */ function isOpenAITool(tool) {\n    if (typeof tool !== \"object\" || !tool) return false;\n    if (\"type\" in tool && tool.type === \"function\" && \"function\" in tool && typeof tool.function === \"object\" && tool.function && \"name\" in tool.function && \"parameters\" in tool.function) {\n        return true;\n    }\n    return false;\n}\nconst calculateMaxTokens = async ({ prompt, modelName })=>{\n    let numTokens;\n    try {\n        numTokens = (await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(getModelNameForTiktoken(modelName))).encode(prompt).length;\n    } catch (error) {\n        console.warn(\"Failed to calculate number of tokens, falling back to approximate count\");\n        // fallback to approximate calculation if tiktoken is not available\n        // each token is ~4 characters: https://help.openai.com/en/articles/4936856-what-are-tokens-and-how-to-count-them#\n        numTokens = Math.ceil(prompt.length / 4);\n    }\n    const maxTokens = getModelContextSize(modelName);\n    return maxTokens - numTokens;\n};\nconst getVerbosity = ()=>false;\n/**\n * Base class for language models, chains, tools.\n */ class BaseLangChain extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__.Runnable {\n    get lc_attributes() {\n        return {\n            callbacks: undefined,\n            verbose: undefined\n        };\n    }\n    constructor(params){\n        super(params);\n        /**\n         * Whether to print out response text.\n         */ Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.verbose = params.verbose ?? getVerbosity();\n        this.callbacks = params.callbacks;\n        this.tags = params.tags ?? [];\n        this.metadata = params.metadata ?? {};\n    }\n}\n/**\n * Base class for language models.\n */ class BaseLanguageModel extends BaseLangChain {\n    /**\n     * Keys that the language model accepts as call options.\n     */ get callKeys() {\n        return [\n            \"stop\",\n            \"timeout\",\n            \"signal\",\n            \"tags\",\n            \"metadata\",\n            \"callbacks\"\n        ];\n    }\n    constructor({ callbacks, callbackManager, ...params }){\n        const { cache, ...rest } = params;\n        super({\n            callbacks: callbacks ?? callbackManager,\n            ...rest\n        });\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_encoding\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (typeof cache === \"object\") {\n            this.cache = cache;\n        } else if (cache) {\n            this.cache = _caches_base_js__WEBPACK_IMPORTED_MODULE_0__.InMemoryCache.global();\n        } else {\n            this.cache = undefined;\n        }\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__.AsyncCaller(params ?? {});\n    }\n    /**\n     * Get the number of tokens in the content.\n     * @param content The content to get the number of tokens for.\n     * @returns The number of tokens in the content.\n     */ async getNumTokens(content) {\n        // Extract text content from MessageContent\n        let textContent;\n        if (typeof content === \"string\") {\n            textContent = content;\n        } else {\n            /**\n             * Content is an array of MessageContentComplex\n             *\n             * ToDo(@christian-bromann): This is a temporary fix to get the number of tokens for the content.\n             * We need to find a better way to do this.\n             * @see https://github.com/langchain-ai/langchainjs/pull/8341#pullrequestreview-2933713116\n             */ textContent = content.map((item)=>{\n                if (typeof item === \"string\") return item;\n                if (item.type === \"text\" && \"text\" in item) return item.text;\n                return \"\";\n            }).join(\"\");\n        }\n        // fallback to approximate calculation if tiktoken is not available\n        let numTokens = Math.ceil(textContent.length / 4);\n        if (!this._encoding) {\n            try {\n                this._encoding = await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(\"modelName\" in this ? getModelNameForTiktoken(this.modelName) : \"gpt2\");\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        if (this._encoding) {\n            try {\n                numTokens = this._encoding.encode(textContent).length;\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        return numTokens;\n    }\n    static _convertInputToPromptValue(input) {\n        if (typeof input === \"string\") {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.StringPromptValue(input);\n        } else if (Array.isArray(input)) {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptValue(input.map(_messages_utils_js__WEBPACK_IMPORTED_MODULE_2__.coerceMessageLikeToMessage));\n        } else {\n            return input;\n        }\n    }\n    /**\n     * Get the identifying parameters of the LLM.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _identifyingParams() {\n        return {};\n    }\n    /**\n     * Create a unique cache key for a specific call to a specific language model.\n     * @param callOptions Call options for the model\n     * @returns A unique cache key.\n     */ _getSerializedCacheKeyParametersForCall(// TODO: Fix when we remove the RunnableLambda backwards compatibility shim.\n    { config, ...callOptions }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const params = {\n            ...this._identifyingParams(),\n            ...callOptions,\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n        const filteredEntries = Object.entries(params).filter(([_, value])=>value !== undefined);\n        const serializedEntries = filteredEntries.map(([key, value])=>`${key}:${JSON.stringify(value)}`).sort().join(\",\");\n        return serializedEntries;\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this._identifyingParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * @deprecated\n     * Load an LLM from a json-like object describing it.\n     */ static async deserialize(_data) {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRDtBQUN3QjtBQUNSO0FBQ1g7QUFDQztBQUNSO0FBQ2hELDRDQUE0QztBQUNyQyxNQUFNTywwQkFBMEIsQ0FBQ0M7SUFDcEMsSUFBSUEsVUFBVUMsVUFBVSxDQUFDLHNCQUFzQjtRQUMzQyxPQUFPO0lBQ1g7SUFDQSxJQUFJRCxVQUFVQyxVQUFVLENBQUMsbUJBQW1CO1FBQ3hDLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxjQUFjO1FBQ25DLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxXQUFXO1FBQ2hDLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxXQUFXO1FBQ2hDLE9BQU87SUFDWDtJQUNBLE9BQU9EO0FBQ1gsRUFBRTtBQUNLLE1BQU1FLDBCQUEwQixDQUFDRjtJQUNwQyxPQUFRQTtRQUNKLEtBQUs7WUFDRCxPQUFPO1FBQ1g7WUFDSSxPQUFPO0lBQ2Y7QUFDSixFQUFFO0FBQ0ssTUFBTUcsc0JBQXNCLENBQUNIO0lBQ2hDLE9BQVFELHdCQUF3QkM7UUFDNUIsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWDtZQUNJLE9BQU87SUFDZjtBQUNKLEVBQUU7QUFDRjs7OztDQUlDLEdBQ00sU0FBU0ksYUFBYUMsSUFBSTtJQUM3QixJQUFJLE9BQU9BLFNBQVMsWUFBWSxDQUFDQSxNQUM3QixPQUFPO0lBQ1gsSUFB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QkksT0FBTyxJQUFJLENBQUNDLFFBQVE7WUFDcEJDLFFBQVEsSUFBSSxDQUFDQyxVQUFVO1FBQzNCO0lBQ0o7SUFDQTs7O0tBR0MsR0FDRCxhQUFhVyxZQUFZQyxLQUFLLEVBQUU7UUFDNUIsTUFBTSxJQUFJQyxNQUFNO0lBQ3BCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xhbmd1YWdlX21vZGVscy9iYXNlLmpzPzliZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gXCIuLi9jYWNoZXMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgU3RyaW5nUHJvbXB0VmFsdWUsIENoYXRQcm9tcHRWYWx1ZSwgfSBmcm9tIFwiLi4vcHJvbXB0X3ZhbHVlcy5qc1wiO1xuaW1wb3J0IHsgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UgfSBmcm9tIFwiLi4vbWVzc2FnZXMvdXRpbHMuanNcIjtcbmltcG9ydCB7IEFzeW5jQ2FsbGVyIH0gZnJvbSBcIi4uL3V0aWxzL2FzeW5jX2NhbGxlci5qc1wiO1xuaW1wb3J0IHsgZW5jb2RpbmdGb3JNb2RlbCB9IGZyb20gXCIuLi91dGlscy90aWt0b2tlbi5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGUgfSBmcm9tIFwiLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbi8vIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2pzLXRpa3Rva2VuXG5leHBvcnQgY29uc3QgZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4gPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJiby0xNmtcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTMuNS10dXJiby0xNmtcIjtcbiAgICB9XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJiby1cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTMuNS10dXJib1wiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtNC0zMmtcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTQtMzJrXCI7XG4gICAgfVxuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00LVwiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtNFwiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtNG9cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTRvXCI7XG4gICAgfVxuICAgIHJldHVybiBtb2RlbE5hbWU7XG59O1xuZXhwb3J0IGNvbnN0IGdldEVtYmVkZGluZ0NvbnRleHRTaXplID0gKG1vZGVsTmFtZSkgPT4ge1xuICAgIHN3aXRjaCAobW9kZWxOYW1lKSB7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWVtYmVkZGluZy1hZGEtMDAyXCI6XG4gICAgICAgICAgICByZXR1cm4gODE5MTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAyMDQ2O1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZ2V0TW9kZWxDb250ZXh0U2l6ZSA9IChtb2RlbE5hbWUpID0+IHtcbiAgICBzd2l0Y2ggKGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKG1vZGVsTmFtZSkpIHtcbiAgICAgICAgY2FzZSBcImdwdC0zLjUtdHVyYm8tMTZrXCI6XG4gICAgICAgICAgICByZXR1cm4gMTYzODQ7XG4gICAgICAgIGNhc2UgXCJncHQtMy41LXR1cmJvXCI6XG4gICAgICAgICAgICByZXR1cm4gNDA5NjtcbiAgICAgICAgY2FzZSBcImdwdC00LTMya1wiOlxuICAgICAgICAgICAgcmV0dXJuIDMyNzY4O1xuICAgICAgICBjYXNlIFwiZ3B0LTRcIjpcbiAgICAgICAgICAgIHJldHVybiA4MTkyO1xuICAgICAgICBjYXNlIFwidGV4dC1kYXZpbmNpLTAwM1wiOlxuICAgICAgICAgICAgcmV0dXJuIDQwOTc7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWN1cmllLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWJhYmJhZ2UtMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgY2FzZSBcInRleHQtYWRhLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJjb2RlLWRhdmluY2ktMDAyXCI6XG4gICAgICAgICAgICByZXR1cm4gODAwMDtcbiAgICAgICAgY2FzZSBcImNvZGUtY3VzaG1hbi0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIDQwOTc7XG4gICAgfVxufTtcbi8qKlxuICogV2hldGhlciBvciBub3QgdGhlIGlucHV0IG1hdGNoZXMgdGhlIE9wZW5BSSB0b29sIGRlZmluaXRpb24uXG4gKiBAcGFyYW0ge3Vua25vd259IHRvb2wgVGhlIGlucHV0IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGlucHV0IGlzIGFuIE9wZW5BSSB0b29sIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09wZW5BSVRvb2wodG9vbCkge1xuICAgIGlmICh0eXBlb2YgdG9vbCAhPT0gXCJvYmplY3RcIiB8fCAhdG9vbClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChcInR5cGVcIiBpbiB0b29sICYmXG4gICAgICAgIHRvb2wudHlwZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIFwiZnVuY3Rpb25cIiBpbiB0b29sICYmXG4gICAgICAgIHR5cGVvZiB0b29sLmZ1bmN0aW9uID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHRvb2wuZnVuY3Rpb24gJiZcbiAgICAgICAgXCJuYW1lXCIgaW4gdG9vbC5mdW5jdGlvbiAmJlxuICAgICAgICBcInBhcmFtZXRlcnNcIiBpbiB0b29sLmZ1bmN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgY29uc3QgY2FsY3VsYXRlTWF4VG9rZW5zID0gYXN5bmMgKHsgcHJvbXB0LCBtb2RlbE5hbWUsIH0pID0+IHtcbiAgICBsZXQgbnVtVG9rZW5zO1xuICAgIHRyeSB7XG4gICAgICAgIG51bVRva2VucyA9IChhd2FpdCBlbmNvZGluZ0Zvck1vZGVsKGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKG1vZGVsTmFtZSkpKS5lbmNvZGUocHJvbXB0KS5sZW5ndGg7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMsIGZhbGxpbmcgYmFjayB0byBhcHByb3hpbWF0ZSBjb3VudFwiKTtcbiAgICAgICAgLy8gZmFsbGJhY2sgdG8gYXBwcm94aW1hdGUgY2FsY3VsYXRpb24gaWYgdGlrdG9rZW4gaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICAvLyBlYWNoIHRva2VuIGlzIH40IGNoYXJhY3RlcnM6IGh0dHBzOi8vaGVscC5vcGVuYWkuY29tL2VuL2FydGljbGVzLzQ5MzY4NTYtd2hhdC1hcmUtdG9rZW5zLWFuZC1ob3ctdG8tY291bnQtdGhlbSNcbiAgICAgICAgbnVtVG9rZW5zID0gTWF0aC5jZWlsKHByb21wdC5sZW5ndGggLyA0KTtcbiAgICB9XG4gICAgY29uc3QgbWF4VG9rZW5zID0gZ2V0TW9kZWxDb250ZXh0U2l6ZShtb2RlbE5hbWUpO1xuICAgIHJldHVybiBtYXhUb2tlbnMgLSBudW1Ub2tlbnM7XG59O1xuY29uc3QgZ2V0VmVyYm9zaXR5ID0gKCkgPT4gZmFsc2U7XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGxhbmd1YWdlIG1vZGVscywgY2hhaW5zLCB0b29scy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VMYW5nQ2hhaW4gZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYWxsYmFja3M6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZlcmJvc2U6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIHN1cGVyKHBhcmFtcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRvIHByaW50IG91dCByZXNwb25zZSB0ZXh0LlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmVyYm9zZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsYmFja3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnZlcmJvc2UgPSBwYXJhbXMudmVyYm9zZSA/PyBnZXRWZXJib3NpdHkoKTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSBwYXJhbXMuY2FsbGJhY2tzO1xuICAgICAgICB0aGlzLnRhZ3MgPSBwYXJhbXMudGFncyA/PyBbXTtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IHBhcmFtcy5tZXRhZGF0YSA/PyB7fTtcbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGxhbmd1YWdlIG1vZGVscy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VMYW5ndWFnZU1vZGVsIGV4dGVuZHMgQmFzZUxhbmdDaGFpbiB7XG4gICAgLyoqXG4gICAgICogS2V5cyB0aGF0IHRoZSBsYW5ndWFnZSBtb2RlbCBhY2NlcHRzIGFzIGNhbGwgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBnZXQgY2FsbEtleXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJzdG9wXCIsIFwidGltZW91dFwiLCBcInNpZ25hbFwiLCBcInRhZ3NcIiwgXCJtZXRhZGF0YVwiLCBcImNhbGxiYWNrc1wiXTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoeyBjYWxsYmFja3MsIGNhbGxiYWNrTWFuYWdlciwgLi4ucGFyYW1zIH0pIHtcbiAgICAgICAgY29uc3QgeyBjYWNoZSwgLi4ucmVzdCB9ID0gcGFyYW1zO1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBjYWxsYmFja3M6IGNhbGxiYWNrcyA/PyBjYWxsYmFja01hbmFnZXIsXG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhc3luYyBjYWxsZXIgc2hvdWxkIGJlIHVzZWQgYnkgc3ViY2xhc3NlcyB0byBtYWtlIGFueSBhc3luYyBjYWxscyxcbiAgICAgICAgICogd2hpY2ggd2lsbCB0aHVzIGJlbmVmaXQgZnJvbSB0aGUgY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhY2hlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9lbmNvZGluZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGNhY2hlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSBJbk1lbW9yeUNhY2hlLmdsb2JhbCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGxlciA9IG5ldyBBc3luY0NhbGxlcihwYXJhbXMgPz8ge30pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG51bWJlciBvZiB0b2tlbnMgaW4gdGhlIGNvbnRlbnQuXG4gICAgICogQHBhcmFtIGNvbnRlbnQgVGhlIGNvbnRlbnQgdG8gZ2V0IHRoZSBudW1iZXIgb2YgdG9rZW5zIGZvci5cbiAgICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIHRva2VucyBpbiB0aGUgY29udGVudC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXROdW1Ub2tlbnMoY29udGVudCkge1xuICAgICAgICAvLyBFeHRyYWN0IHRleHQgY29udGVudCBmcm9tIE1lc3NhZ2VDb250ZW50XG4gICAgICAgIGxldCB0ZXh0Q29udGVudDtcbiAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnRlbnQgaXMgYW4gYXJyYXkgb2YgTWVzc2FnZUNvbnRlbnRDb21wbGV4XG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogVG9EbyhAY2hyaXN0aWFuLWJyb21hbm4pOiBUaGlzIGlzIGEgdGVtcG9yYXJ5IGZpeCB0byBnZXQgdGhlIG51bWJlciBvZiB0b2tlbnMgZm9yIHRoZSBjb250ZW50LlxuICAgICAgICAgICAgICogV2UgbmVlZCB0byBmaW5kIGEgYmV0dGVyIHdheSB0byBkbyB0aGlzLlxuICAgICAgICAgICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbGFuZ2NoYWluLWFpL2xhbmdjaGFpbmpzL3B1bGwvODM0MSNwdWxscmVxdWVzdHJldmlldy0yOTMzNzEzMTE2XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRleHRDb250ZW50ID0gY29udGVudFxuICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09IFwidGV4dFwiICYmIFwidGV4dFwiIGluIGl0ZW0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnRleHQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5qb2luKFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIGFwcHJveGltYXRlIGNhbGN1bGF0aW9uIGlmIHRpa3Rva2VuIGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgbGV0IG51bVRva2VucyA9IE1hdGguY2VpbCh0ZXh0Q29udGVudC5sZW5ndGggLyA0KTtcbiAgICAgICAgaWYgKCF0aGlzLl9lbmNvZGluZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbmNvZGluZyA9IGF3YWl0IGVuY29kaW5nRm9yTW9kZWwoXCJtb2RlbE5hbWVcIiBpbiB0aGlzXG4gICAgICAgICAgICAgICAgICAgID8gZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4odGhpcy5tb2RlbE5hbWUpXG4gICAgICAgICAgICAgICAgICAgIDogXCJncHQyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNhbGN1bGF0ZSBudW1iZXIgb2YgdG9rZW5zLCBmYWxsaW5nIGJhY2sgdG8gYXBwcm94aW1hdGUgY291bnRcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9lbmNvZGluZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBudW1Ub2tlbnMgPSB0aGlzLl9lbmNvZGluZy5lbmNvZGUodGV4dENvbnRlbnQpLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVtVG9rZW5zO1xuICAgIH1cbiAgICBzdGF0aWMgX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdQcm9tcHRWYWx1ZShpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hhdFByb21wdFZhbHVlKGlucHV0Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWRlbnRpZnlpbmcgcGFyYW1ldGVycyBvZiB0aGUgTExNLlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgX2lkZW50aWZ5aW5nUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHVuaXF1ZSBjYWNoZSBrZXkgZm9yIGEgc3BlY2lmaWMgY2FsbCB0byBhIHNwZWNpZmljIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEBwYXJhbSBjYWxsT3B0aW9ucyBDYWxsIG9wdGlvbnMgZm9yIHRoZSBtb2RlbFxuICAgICAqIEByZXR1cm5zIEEgdW5pcXVlIGNhY2hlIGtleS5cbiAgICAgKi9cbiAgICBfZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwoXG4gICAgLy8gVE9ETzogRml4IHdoZW4gd2UgcmVtb3ZlIHRoZSBSdW5uYWJsZUxhbWJkYSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBzaGltLlxuICAgIHsgY29uZmlnLCAuLi5jYWxsT3B0aW9ucyB9KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCksXG4gICAgICAgICAgICAuLi5jYWxsT3B0aW9ucyxcbiAgICAgICAgICAgIF90eXBlOiB0aGlzLl9sbG1UeXBlKCksXG4gICAgICAgICAgICBfbW9kZWw6IHRoaXMuX21vZGVsVHlwZSgpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWx0ZXJlZEVudHJpZXMgPSBPYmplY3QuZW50cmllcyhwYXJhbXMpLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdmFsdWUgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRFbnRyaWVzID0gZmlsdGVyZWRFbnRyaWVzXG4gICAgICAgICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2tleX06JHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YClcbiAgICAgICAgICAgIC5zb3J0KClcbiAgICAgICAgICAgIC5qb2luKFwiLFwiKTtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZWRFbnRyaWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIFJldHVybiBhIGpzb24tbGlrZSBvYmplY3QgcmVwcmVzZW50aW5nIHRoaXMgTExNLlxuICAgICAqL1xuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCksXG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fbGxtVHlwZSgpLFxuICAgICAgICAgICAgX21vZGVsOiB0aGlzLl9tb2RlbFR5cGUoKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBMb2FkIGFuIExMTSBmcm9tIGEganNvbi1saWtlIG9iamVjdCBkZXNjcmliaW5nIGl0LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShfZGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2UgLnRvSlNPTigpIGluc3RlYWRcIik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkluTWVtb3J5Q2FjaGUiLCJTdHJpbmdQcm9tcHRWYWx1ZSIsIkNoYXRQcm9tcHRWYWx1ZSIsImNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlIiwiQXN5bmNDYWxsZXIiLCJlbmNvZGluZ0Zvck1vZGVsIiwiUnVubmFibGUiLCJnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbiIsIm1vZGVsTmFtZSIsInN0YXJ0c1dpdGgiLCJnZXRFbWJlZGRpbmdDb250ZXh0U2l6ZSIsImdldE1vZGVsQ29udGV4dFNpemUiLCJpc09wZW5BSVRvb2wiLCJ0b29sIiwidHlwZSIsImZ1bmN0aW9uIiwiY2FsY3VsYXRlTWF4VG9rZW5zIiwicHJvbXB0IiwibnVtVG9rZW5zIiwiZW5jb2RlIiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsIk1hdGgiLCJjZWlsIiwibWF4VG9rZW5zIiwiZ2V0VmVyYm9zaXR5IiwiQmFzZUxhbmdDaGFpbiIsImxjX2F0dHJpYnV0ZXMiLCJjYWxsYmFja3MiLCJ1bmRlZmluZWQiLCJ2ZXJib3NlIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGFncyIsIm1ldGFkYXRhIiwiQmFzZUxhbmd1YWdlTW9kZWwiLCJjYWxsS2V5cyIsImNhbGxiYWNrTWFuYWdlciIsImNhY2hlIiwicmVzdCIsImdsb2JhbCIsImNhbGxlciIsImdldE51bVRva2VucyIsImNvbnRlbnQiLCJ0ZXh0Q29udGVudCIsIm1hcCIsIml0ZW0iLCJ0ZXh0Iiwiam9pbiIsIl9lbmNvZGluZyIsIl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlIiwiaW5wdXQiLCJBcnJheSIsImlzQXJyYXkiLCJfaWRlbnRpZnlpbmdQYXJhbXMiLCJfZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwiLCJjb25maWciLCJjYWxsT3B0aW9ucyIsIl90eXBlIiwiX2xsbVR5cGUiLCJfbW9kZWwiLCJfbW9kZWxUeXBlIiwiZmlsdGVyZWRFbnRyaWVzIiwiZW50cmllcyIsImZpbHRlciIsIl8iLCJzZXJpYWxpemVkRW50cmllcyIsImtleSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzb3J0Iiwic2VyaWFsaXplIiwiZGVzZXJpYWxpemUiLCJfZGF0YSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/chat_models.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* binding */ BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* binding */ SimpleChatModel),\n/* harmony export */   createChatMessageChunkEncoderStream: () => (/* binding */ createChatMessageChunkEncoderStream)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _runnables_passthrough_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../runnables/passthrough.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n/* harmony import */ var _utils_types_zod_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/types/zod.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _utils_json_schema_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/json_schema.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n\n\n\n\n\n\n\n\n\n\n/**\n * Creates a transform stream for encoding chat message chunks.\n * @deprecated Use {@link BytesOutputParser} instead\n * @returns A TransformStream instance that encodes chat message chunks.\n */ function createChatMessageChunkEncoderStream() {\n    const textEncoder = new TextEncoder();\n    return new TransformStream({\n        transform (chunk, controller) {\n            controller.enqueue(textEncoder.encode(typeof chunk.content === \"string\" ? chunk.content : JSON.stringify(chunk.content)));\n        }\n    });\n}\nfunction _formatForTracing(messages) {\n    const messagesToTrace = [];\n    for (const message of messages){\n        let messageToTrace = message;\n        if (Array.isArray(message.content)) {\n            for(let idx = 0; idx < message.content.length; idx++){\n                const block = message.content[idx];\n                if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isURLContentBlock)(block) || (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBase64ContentBlock)(block)) {\n                    if (messageToTrace === message) {\n                        // Also shallow-copy content\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        messageToTrace = new message.constructor({\n                            ...messageToTrace,\n                            content: [\n                                ...message.content.slice(0, idx),\n                                (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.convertToOpenAIImageBlock)(block),\n                                ...message.content.slice(idx + 1)\n                            ]\n                        });\n                    }\n                }\n            }\n        }\n        messagesToTrace.push(messageToTrace);\n    }\n    return messagesToTrace;\n}\n/**\n * Base class for chat models. It extends the BaseLanguageModel class and\n * provides methods for generating chat based on input messages.\n */ class BaseChatModel extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseLanguageModel {\n    constructor(fields){\n        super(fields);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"chat_models\",\n                this._llmType()\n            ]\n        });\n        Object.defineProperty(this, \"disableStreaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    _separateRunnableConfigFromCallOptionsCompat(options) {\n        // For backwards compat, keep `signal` in both runnableConfig and callOptions\n        const [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n        callOptions.signal = runnableConfig.signal;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    /**\n     * Invokes the chat model with a single input.\n     * @param input The input for the language model.\n     * @param options The call options.\n     * @returns A Promise that resolves to a BaseMessageChunk.\n     */ async invoke(input, options) {\n        const promptValue = BaseChatModel._convertInputToPromptValue(input);\n        const result = await this.generatePrompt([\n            promptValue\n        ], options, options?.callbacks);\n        const chatGeneration = result.generations[0][0];\n        // TODO: Remove cast after figuring out inheritance\n        return chatGeneration.message;\n    }\n    // eslint-disable-next-line require-yield\n    async *_streamResponseChunks(_messages, _options, _runManager) {\n        throw new Error(\"Not implemented.\");\n    }\n    async *_streamIterator(input, options) {\n        // Subclass check required to avoid double callbacks with default implementation\n        if (this._streamResponseChunks === BaseChatModel.prototype._streamResponseChunks || this.disableStreaming) {\n            yield this.invoke(input, options);\n        } else {\n            const prompt = BaseChatModel._convertInputToPromptValue(input);\n            const messages = prompt.toChatMessages();\n            const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(options);\n            const inheritableMetadata = {\n                ...runnableConfig.metadata,\n                ...this.getLsParams(callOptions)\n            };\n            const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, inheritableMetadata, this.metadata, {\n                verbose: this.verbose\n            });\n            const extra = {\n                options: callOptions,\n                invocation_params: this?.invocationParams(callOptions),\n                batch_size: 1\n            };\n            const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), [\n                _formatForTracing(messages)\n            ], runnableConfig.runId, undefined, extra, undefined, undefined, runnableConfig.runName);\n            let generationChunk;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let llmOutput;\n            try {\n                for await (const chunk of this._streamResponseChunks(messages, callOptions, runManagers?.[0])){\n                    if (chunk.message.id == null) {\n                        const runId = runManagers?.at(0)?.runId;\n                        if (runId != null) chunk.message._updateId(`run-${runId}`);\n                    }\n                    chunk.message.response_metadata = {\n                        ...chunk.generationInfo,\n                        ...chunk.message.response_metadata\n                    };\n                    yield chunk.message;\n                    if (!generationChunk) {\n                        generationChunk = chunk;\n                    } else {\n                        generationChunk = generationChunk.concat(chunk);\n                    }\n                    if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessageChunk)(chunk.message) && chunk.message.usage_metadata !== undefined) {\n                        llmOutput = {\n                            tokenUsage: {\n                                promptTokens: chunk.message.usage_metadata.input_tokens,\n                                completionTokens: chunk.message.usage_metadata.output_tokens,\n                                totalTokens: chunk.message.usage_metadata.total_tokens\n                            }\n                        };\n                    }\n                }\n            } catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMError(err)));\n                throw err;\n            }\n            await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMEnd({\n                    // TODO: Remove cast after figuring out inheritance\n                    generations: [\n                        [\n                            generationChunk\n                        ]\n                    ],\n                    llmOutput\n                })));\n        }\n    }\n    getLsParams(options) {\n        const providerName = this.getName().startsWith(\"Chat\") ? this.getName().replace(\"Chat\", \"\") : this.getName();\n        return {\n            ls_model_type: \"chat\",\n            ls_stop: options.stop,\n            ls_provider: providerName\n        };\n    }\n    /** @ignore */ async _generateUncached(messages, parsedOptions, handledOptions, startedRunManagers) {\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        let runManagers;\n        if (startedRunManagers !== undefined && startedRunManagers.length === baseMessages.length) {\n            runManagers = startedRunManagers;\n        } else {\n            const inheritableMetadata = {\n                ...handledOptions.metadata,\n                ...this.getLsParams(parsedOptions)\n            };\n            // create callback manager and start run\n            const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, inheritableMetadata, this.metadata, {\n                verbose: this.verbose\n            });\n            const extra = {\n                options: parsedOptions,\n                invocation_params: this?.invocationParams(parsedOptions),\n                batch_size: 1\n            };\n            runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages.map(_formatForTracing), handledOptions.runId, undefined, extra, undefined, undefined, handledOptions.runName);\n        }\n        const generations = [];\n        const llmOutputs = [];\n        // Even if stream is not explicitly called, check if model is implicitly\n        // called from streamEvents() or streamLog() to get all streamed events.\n        // Bail out if _streamResponseChunks not overridden\n        const hasStreamingHandler = !!runManagers?.[0].handlers.find(_callbacks_base_js__WEBPACK_IMPORTED_MODULE_8__.callbackHandlerPrefersStreaming);\n        if (hasStreamingHandler && !this.disableStreaming && baseMessages.length === 1 && this._streamResponseChunks !== BaseChatModel.prototype._streamResponseChunks) {\n            try {\n                const stream = await this._streamResponseChunks(baseMessages[0], parsedOptions, runManagers?.[0]);\n                let aggregated;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                let llmOutput;\n                for await (const chunk of stream){\n                    if (chunk.message.id == null) {\n                        const runId = runManagers?.at(0)?.runId;\n                        if (runId != null) chunk.message._updateId(`run-${runId}`);\n                    }\n                    if (aggregated === undefined) {\n                        aggregated = chunk;\n                    } else {\n                        aggregated = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(aggregated, chunk);\n                    }\n                    if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessageChunk)(chunk.message) && chunk.message.usage_metadata !== undefined) {\n                        llmOutput = {\n                            tokenUsage: {\n                                promptTokens: chunk.message.usage_metadata.input_tokens,\n                                completionTokens: chunk.message.usage_metadata.output_tokens,\n                                totalTokens: chunk.message.usage_metadata.total_tokens\n                            }\n                        };\n                    }\n                }\n                if (aggregated === undefined) {\n                    throw new Error(\"Received empty response from chat model call.\");\n                }\n                generations.push([\n                    aggregated\n                ]);\n                await runManagers?.[0].handleLLMEnd({\n                    generations,\n                    llmOutput\n                });\n            } catch (e) {\n                await runManagers?.[0].handleLLMError(e);\n                throw e;\n            }\n        } else {\n            // generate results\n            const results = await Promise.allSettled(baseMessages.map((messageList, i)=>this._generate(messageList, {\n                    ...parsedOptions,\n                    promptIndex: i\n                }, runManagers?.[i])));\n            // handle results\n            await Promise.all(results.map(async (pResult, i)=>{\n                if (pResult.status === \"fulfilled\") {\n                    const result = pResult.value;\n                    for (const generation of result.generations){\n                        if (generation.message.id == null) {\n                            const runId = runManagers?.at(0)?.runId;\n                            if (runId != null) generation.message._updateId(`run-${runId}`);\n                        }\n                        generation.message.response_metadata = {\n                            ...generation.generationInfo,\n                            ...generation.message.response_metadata\n                        };\n                    }\n                    if (result.generations.length === 1) {\n                        result.generations[0].message.response_metadata = {\n                            ...result.llmOutput,\n                            ...result.generations[0].message.response_metadata\n                        };\n                    }\n                    generations[i] = result.generations;\n                    llmOutputs[i] = result.llmOutput;\n                    return runManagers?.[i]?.handleLLMEnd({\n                        generations: [\n                            result.generations\n                        ],\n                        llmOutput: result.llmOutput\n                    });\n                } else {\n                    // status === \"rejected\"\n                    await runManagers?.[i]?.handleLLMError(pResult.reason);\n                    return Promise.reject(pResult.reason);\n                }\n            }));\n        }\n        // create combined output\n        const output = {\n            generations,\n            llmOutput: llmOutputs.length ? this._combineLLMOutput?.(...llmOutputs) : undefined\n        };\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    async _generateCached({ messages, cache, llmStringKey, parsedOptions, handledOptions }) {\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        const inheritableMetadata = {\n            ...handledOptions.metadata,\n            ...this.getLsParams(parsedOptions)\n        };\n        // create callback manager and start run\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, inheritableMetadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: 1\n        };\n        const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages.map(_formatForTracing), handledOptions.runId, undefined, extra, undefined, undefined, handledOptions.runName);\n        // generate results\n        const missingPromptIndices = [];\n        const results = await Promise.allSettled(baseMessages.map(async (baseMessage, index)=>{\n            // Join all content into one string for the prompt index\n            const prompt = BaseChatModel._convertInputToPromptValue(baseMessage).toString();\n            const result = await cache.lookup(prompt, llmStringKey);\n            if (result == null) {\n                missingPromptIndices.push(index);\n            }\n            return result;\n        }));\n        // Map run managers to the results before filtering out null results\n        // Null results are just absent from the cache.\n        const cachedResults = results.map((result, index)=>({\n                result,\n                runManager: runManagers?.[index]\n            })).filter(({ result })=>result.status === \"fulfilled\" && result.value != null || result.status === \"rejected\");\n        // Handle results and call run managers\n        const generations = [];\n        await Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i)=>{\n            if (promiseResult.status === \"fulfilled\") {\n                const result = promiseResult.value;\n                generations[i] = result.map((result)=>{\n                    if (\"message\" in result && (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(result.message) && (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessage)(result.message)) {\n                        // eslint-disable-next-line no-param-reassign\n                        result.message.usage_metadata = {\n                            input_tokens: 0,\n                            output_tokens: 0,\n                            total_tokens: 0\n                        };\n                    }\n                    // eslint-disable-next-line no-param-reassign\n                    result.generationInfo = {\n                        ...result.generationInfo,\n                        tokenUsage: {}\n                    };\n                    return result;\n                });\n                if (result.length) {\n                    await runManager?.handleLLMNewToken(result[0].text);\n                }\n                return runManager?.handleLLMEnd({\n                    generations: [\n                        result\n                    ]\n                }, undefined, undefined, undefined, {\n                    cached: true\n                });\n            } else {\n                // status === \"rejected\"\n                await runManager?.handleLLMError(promiseResult.reason, undefined, undefined, undefined, {\n                    cached: true\n                });\n                return Promise.reject(promiseResult.reason);\n            }\n        }));\n        const output = {\n            generations,\n            missingPromptIndices,\n            startedRunManagers: runManagers\n        };\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    /**\n     * Generates chat based on the input messages.\n     * @param messages An array of arrays of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */ async generate(messages, options, callbacks) {\n        // parse call options\n        let parsedOptions;\n        if (Array.isArray(options)) {\n            parsedOptions = {\n                stop: options\n            };\n        } else {\n            parsedOptions = options;\n        }\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(parsedOptions);\n        runnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n        if (!this.cache) {\n            return this._generateUncached(baseMessages, callOptions, runnableConfig);\n        }\n        const { cache } = this;\n        const llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n        const { generations, missingPromptIndices, startedRunManagers } = await this._generateCached({\n            messages: baseMessages,\n            cache,\n            llmStringKey,\n            parsedOptions: callOptions,\n            handledOptions: runnableConfig\n        });\n        let llmOutput = {};\n        if (missingPromptIndices.length > 0) {\n            const results = await this._generateUncached(missingPromptIndices.map((i)=>baseMessages[i]), callOptions, runnableConfig, startedRunManagers !== undefined ? missingPromptIndices.map((i)=>startedRunManagers?.[i]) : undefined);\n            await Promise.all(results.generations.map(async (generation, index)=>{\n                const promptIndex = missingPromptIndices[index];\n                generations[promptIndex] = generation;\n                // Join all content into one string for the prompt index\n                const prompt = BaseChatModel._convertInputToPromptValue(baseMessages[promptIndex]).toString();\n                return cache.update(prompt, llmStringKey, generation);\n            }));\n            llmOutput = results.llmOutput ?? {};\n        }\n        return {\n            generations,\n            llmOutput\n        };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    invocationParams(_options) {\n        return {};\n    }\n    _modelType() {\n        return \"base_chat_model\";\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this.invocationParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * Generates a prompt based on the input prompt values.\n     * @param promptValues An array of BasePromptValue instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */ async generatePrompt(promptValues, options, callbacks) {\n        const promptMessages = promptValues.map((promptValue)=>promptValue.toChatMessages());\n        return this.generate(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async call(messages, options, callbacks) {\n        const result = await this.generate([\n            messages.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage)\n        ], options, callbacks);\n        const generations = result.generations;\n        return generations[0][0].message;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model with a prompt value.\n     * @param promptValue The value of the prompt.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async callPrompt(promptValue, options, callbacks) {\n        const promptMessages = promptValue.toChatMessages();\n        return this.call(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on the input messages.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async predictMessages(messages, options, callbacks) {\n        return this.call(messages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on a text input.\n     * @param text The text input.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a string.\n     */ async predict(text, options, callbacks) {\n        const message = new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage(text);\n        const result = await this.call([\n            message\n        ], options, callbacks);\n        if (typeof result.content !== \"string\") {\n            throw new Error(\"Cannot use predict when output is not a string.\");\n        }\n        return result.content;\n    }\n    withStructuredOutput(outputSchema, config) {\n        if (typeof this.bindTools !== \"function\") {\n            throw new Error(`Chat model must implement \".bindTools()\" to use withStructuredOutput.`);\n        }\n        if (config?.strict) {\n            throw new Error(`\"strict\" mode is not supported for this model by default.`);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const schema = outputSchema;\n        const name = config?.name;\n        const description = (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_7__.getSchemaDescription)(schema) ?? \"A function available to call.\";\n        const method = config?.method;\n        const includeRaw = config?.includeRaw;\n        if (method === \"jsonMode\") {\n            throw new Error(`Base withStructuredOutput implementation only supports \"functionCalling\" as a method.`);\n        }\n        let functionName = name ?? \"extract\";\n        let tools;\n        if ((0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_7__.isInteropZodSchema)(schema)) {\n            tools = [\n                {\n                    type: \"function\",\n                    function: {\n                        name: functionName,\n                        description,\n                        parameters: (0,_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_9__.toJsonSchema)(schema)\n                    }\n                }\n            ];\n        } else {\n            if (\"name\" in schema) {\n                functionName = schema.name;\n            }\n            tools = [\n                {\n                    type: \"function\",\n                    function: {\n                        name: functionName,\n                        description,\n                        parameters: schema\n                    }\n                }\n            ];\n        }\n        const llm = this.bindTools(tools);\n        const outputParser = _runnables_base_js__WEBPACK_IMPORTED_MODULE_4__.RunnableLambda.from((input)=>{\n            if (!input.tool_calls || input.tool_calls.length === 0) {\n                throw new Error(\"No tool calls found in the response.\");\n            }\n            const toolCall = input.tool_calls.find((tc)=>tc.name === functionName);\n            if (!toolCall) {\n                throw new Error(`No tool call found with name ${functionName}.`);\n            }\n            return toolCall.args;\n        });\n        if (!includeRaw) {\n            return llm.pipe(outputParser).withConfig({\n                runName: \"StructuredOutput\"\n            });\n        }\n        const parserAssign = _runnables_passthrough_js__WEBPACK_IMPORTED_MODULE_6__.RunnablePassthrough.assign({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            parsed: (input, config)=>outputParser.invoke(input.raw, config)\n        });\n        const parserNone = _runnables_passthrough_js__WEBPACK_IMPORTED_MODULE_6__.RunnablePassthrough.assign({\n            parsed: ()=>null\n        });\n        const parsedWithFallback = parserAssign.withFallbacks({\n            fallbacks: [\n                parserNone\n            ]\n        });\n        return _runnables_base_js__WEBPACK_IMPORTED_MODULE_4__.RunnableSequence.from([\n            {\n                raw: llm\n            },\n            parsedWithFallback\n        ]).withConfig({\n            runName: \"StructuredOutputRunnable\"\n        });\n    }\n}\n/**\n * An abstract class that extends BaseChatModel and provides a simple\n * implementation of _generate.\n */ class SimpleChatModel extends BaseChatModel {\n    async _generate(messages, options, runManager) {\n        const text = await this._call(messages, options, runManager);\n        const message = new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(text);\n        if (typeof message.content !== \"string\") {\n            throw new Error(\"Cannot generate with a simple chat model when output is not a string.\");\n        }\n        return {\n            generations: [\n                {\n                    text: message.content,\n                    message\n                }\n            ]\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOE07QUFDcks7QUFDTTtBQUNZO0FBQ2M7QUFDN0I7QUFDc0I7QUFDZ0I7QUFDWDtBQUNoQjtBQUN2RDs7OztDQUlDLEdBQ00sU0FBU29CO0lBQ1osTUFBTUMsY0FBYyxJQUFJQztJQUN4QixPQUFPLElBQUlDLGdCQUFnQjtRQUN2QkMsV0FBVUMsS0FBSyxFQUFFQyxVQUFVO1lBQ3ZCQSxXQUFXQyxPQUFPLENBQUNOLFlBQVlPLE1BQU0sQ0FBQyxPQUFPSCxNQUFNSSxPQUFPLEtBQUssV0FDekRKLE1BQU1JLE9BQU8sR0FDYkMsS0FBS0MsU0FBUyxDQUFDTixNQUFNSSxPQUFPO1FBQ3RDO0lBQ0o7QUFDSjtBQUNBLFNBQVNHLGtCQUFrQkMsUUFBUTtJQUMvQixNQUFNQyxrQkFBa0IsRUFBRTtJQUMxQixLQUFLLE1BQU1DLFdBQVdGLFNBQVU7UUFDNUIsSUFBSUcsaUJBQWlCRDtRQUNyQixJQUFJRSxNQUFNQyxPQUFPLENBQUNILFFBQVFOLE9BQU8sR0FBRztZQUNoQyxJQUFLLElBQUlVLE1BQU0sR0FBR0EsTUFBTUosUUFBUU4sT0FBTyxDQUFDVyxNQUFNLEVBQUVELE1BQU87Z0JBQ25ELE1BQU1FLFFBQVFOLFFBQVFOLE9BQU8sQ0FBQ1UsSUFBSTtnQkFDbEMsSUFBSWhDLHFFQUFpQkEsQ0FBQ2tDLFVBQVVqQyx3RUFBb0JBLENBQUNpQyxRQUFRO29CQUN6RCxJQUFJTCxtQkFBbUJELFNBQVM7d0JBQzVCLDRCQUE0Qjt3QkFDNUIsOERBQThEO3dCQUM5REMsaUJBQWlCLElBQUlELFFBQVFPLFdBQVcsQ0FBQzs0QkFDckMsR0FBR04sY0FBYzs0QkFDakJQLFNBQVM7bUNBQ0ZNLFFBQVFOLE9BQU8sQ0FBQ2MsS0FBSyxDQUFDLEdBQUdKO2dDQUM1QmpDLDZFQUF5QkEsQ0FBQ21D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YWluL2NvcmUvZGlzdC9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHMuanM/MmQ4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBSU1lc3NhZ2UsIEh1bWFuTWVzc2FnZSwgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UsIGlzQUlNZXNzYWdlQ2h1bmssIGlzQmFzZU1lc3NhZ2UsIGlzQUlNZXNzYWdlLCBjb252ZXJ0VG9PcGVuQUlJbWFnZUJsb2NrLCBpc1VSTENvbnRlbnRCbG9jaywgaXNCYXNlNjRDb250ZW50QmxvY2ssIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBSVU5fS0VZLCB9IGZyb20gXCIuLi9vdXRwdXRzLmpzXCI7XG5pbXBvcnQgeyBCYXNlTGFuZ3VhZ2VNb2RlbCwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDYWxsYmFja01hbmFnZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUxhbWJkYSwgUnVubmFibGVTZXF1ZW5jZSwgfSBmcm9tIFwiLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGNvbmNhdCB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlUGFzc3Rocm91Z2ggfSBmcm9tIFwiLi4vcnVubmFibGVzL3Bhc3N0aHJvdWdoLmpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFEZXNjcmlwdGlvbiwgaXNJbnRlcm9wWm9kU2NoZW1hLCB9IGZyb20gXCIuLi91dGlscy90eXBlcy96b2QuanNcIjtcbmltcG9ydCB7IGNhbGxiYWNrSGFuZGxlclByZWZlcnNTdHJlYW1pbmcgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL2Jhc2UuanNcIjtcbmltcG9ydCB7IHRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi91dGlscy9qc29uX3NjaGVtYS5qc1wiO1xuLyoqXG4gKiBDcmVhdGVzIGEgdHJhbnNmb3JtIHN0cmVhbSBmb3IgZW5jb2RpbmcgY2hhdCBtZXNzYWdlIGNodW5rcy5cbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgQnl0ZXNPdXRwdXRQYXJzZXJ9IGluc3RlYWRcbiAqIEByZXR1cm5zIEEgVHJhbnNmb3JtU3RyZWFtIGluc3RhbmNlIHRoYXQgZW5jb2RlcyBjaGF0IG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hhdE1lc3NhZ2VDaHVua0VuY29kZXJTdHJlYW0oKSB7XG4gICAgY29uc3QgdGV4dEVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICByZXR1cm4gbmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgIHRyYW5zZm9ybShjaHVuaywgY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHRleHRFbmNvZGVyLmVuY29kZSh0eXBlb2YgY2h1bmsuY29udGVudCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgID8gY2h1bmsuY29udGVudFxuICAgICAgICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkoY2h1bmsuY29udGVudCkpKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIF9mb3JtYXRGb3JUcmFjaW5nKG1lc3NhZ2VzKSB7XG4gICAgY29uc3QgbWVzc2FnZXNUb1RyYWNlID0gW107XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgIGxldCBtZXNzYWdlVG9UcmFjZSA9IG1lc3NhZ2U7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1lc3NhZ2UuY29udGVudCkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IG1lc3NhZ2UuY29udGVudC5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmxvY2sgPSBtZXNzYWdlLmNvbnRlbnRbaWR4XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNVUkxDb250ZW50QmxvY2soYmxvY2spIHx8IGlzQmFzZTY0Q29udGVudEJsb2NrKGJsb2NrKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZVRvVHJhY2UgPT09IG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsc28gc2hhbGxvdy1jb3B5IGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVG9UcmFjZSA9IG5ldyBtZXNzYWdlLmNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlVG9UcmFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm1lc3NhZ2UuY29udGVudC5zbGljZSgwLCBpZHgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJ0VG9PcGVuQUlJbWFnZUJsb2NrKGJsb2NrKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ubWVzc2FnZS5jb250ZW50LnNsaWNlKGlkeCArIDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlc1RvVHJhY2UucHVzaChtZXNzYWdlVG9UcmFjZSk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlc1RvVHJhY2U7XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGNoYXQgbW9kZWxzLiBJdCBleHRlbmRzIHRoZSBCYXNlTGFuZ3VhZ2VNb2RlbCBjbGFzcyBhbmRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGdlbmVyYXRpbmcgY2hhdCBiYXNlZCBvbiBpbnB1dCBtZXNzYWdlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDaGF0TW9kZWwgZXh0ZW5kcyBCYXNlTGFuZ3VhZ2VNb2RlbCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIC8vIE9ubHkgZXZlciBpbnN0YW50aWF0ZWQgaW4gbWFpbiBMYW5nQ2hhaW5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJjaGF0X21vZGVsc1wiLCB0aGlzLl9sbG1UeXBlKCldXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkaXNhYmxlU3RyZWFtaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnNDb21wYXQob3B0aW9ucykge1xuICAgICAgICAvLyBGb3IgYmFja3dhcmRzIGNvbXBhdCwga2VlcCBgc2lnbmFsYCBpbiBib3RoIHJ1bm5hYmxlQ29uZmlnIGFuZCBjYWxsT3B0aW9uc1xuICAgICAgICBjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHN1cGVyLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBjYWxsT3B0aW9ucy5zaWduYWwgPSBydW5uYWJsZUNvbmZpZy5zaWduYWw7XG4gICAgICAgIHJldHVybiBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgY2hhdCBtb2RlbCB3aXRoIGEgc2luZ2xlIGlucHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2VDaHVuay5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0VmFsdWUgPSBCYXNlQ2hhdE1vZGVsLl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGlucHV0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVByb21wdChbcHJvbXB0VmFsdWVdLCBvcHRpb25zLCBvcHRpb25zPy5jYWxsYmFja3MpO1xuICAgICAgICBjb25zdCBjaGF0R2VuZXJhdGlvbiA9IHJlc3VsdC5nZW5lcmF0aW9uc1swXVswXTtcbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGNhc3QgYWZ0ZXIgZmlndXJpbmcgb3V0IGluaGVyaXRhbmNlXG4gICAgICAgIHJldHVybiBjaGF0R2VuZXJhdGlvbi5tZXNzYWdlO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS15aWVsZFxuICAgIGFzeW5jICpfc3RyZWFtUmVzcG9uc2VDaHVua3MoX21lc3NhZ2VzLCBfb3B0aW9ucywgX3J1bk1hbmFnZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBTdWJjbGFzcyBjaGVjayByZXF1aXJlZCB0byBhdm9pZCBkb3VibGUgY2FsbGJhY2tzIHdpdGggZGVmYXVsdCBpbXBsZW1lbnRhdGlvblxuICAgICAgICBpZiAodGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MgPT09XG4gICAgICAgICAgICBCYXNlQ2hhdE1vZGVsLnByb3RvdHlwZS5fc3RyZWFtUmVzcG9uc2VDaHVua3MgfHxcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZVN0cmVhbWluZykge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gQmFzZUNoYXRNb2RlbC5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHByb21wdC50b0NoYXRNZXNzYWdlcygpO1xuICAgICAgICAgICAgY29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSB0aGlzLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zQ29tcGF0KG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgaW5oZXJpdGFibGVNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAuLi5ydW5uYWJsZUNvbmZpZy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmdldExzUGFyYW1zKGNhbGxPcHRpb25zKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBydW5uYWJsZUNvbmZpZy50YWdzLCB0aGlzLnRhZ3MsIGluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuICAgICAgICAgICAgY29uc3QgZXh0cmEgPSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uczogY2FsbE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMoY2FsbE9wdGlvbnMpLFxuICAgICAgICAgICAgICAgIGJhdGNoX3NpemU6IDEsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGF0TW9kZWxTdGFydCh0aGlzLnRvSlNPTigpLCBbX2Zvcm1hdEZvclRyYWNpbmcobWVzc2FnZXMpXSwgcnVubmFibGVDb25maWcucnVuSWQsIHVuZGVmaW5lZCwgZXh0cmEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBydW5uYWJsZUNvbmZpZy5ydW5OYW1lKTtcbiAgICAgICAgICAgIGxldCBnZW5lcmF0aW9uQ2h1bms7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgbGV0IGxsbU91dHB1dDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgY2FsbE9wdGlvbnMsIHJ1bk1hbmFnZXJzPy5bMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay5tZXNzYWdlLmlkID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJ1bklkID0gcnVuTWFuYWdlcnM/LmF0KDApPy5ydW5JZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydW5JZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLm1lc3NhZ2UuX3VwZGF0ZUlkKGBydW4tJHtydW5JZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjaHVuay5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2h1bmsuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaHVuay5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBjaHVuay5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWdlbmVyYXRpb25DaHVuaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNodW5rID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ2h1bmsgPSBnZW5lcmF0aW9uQ2h1bmsuY29uY2F0KGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBSU1lc3NhZ2VDaHVuayhjaHVuay5tZXNzYWdlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5Vc2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHRUb2tlbnM6IGNodW5rLm1lc3NhZ2UudXNhZ2VfbWV0YWRhdGEuaW5wdXRfdG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uVG9rZW5zOiBjaHVuay5tZXNzYWdlLnVzYWdlX21ldGFkYXRhLm91dHB1dF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiBjaHVuay5tZXNzYWdlLnVzYWdlX21ldGFkYXRhLnRvdGFsX3Rva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRXJyb3IoZXJyKSkpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKChydW5NYW5hZ2VycyA/PyBbXSkubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQoe1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IFJlbW92ZSBjYXN0IGFmdGVyIGZpZ3VyaW5nIG91dCBpbmhlcml0YW5jZVxuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbW2dlbmVyYXRpb25DaHVua11dLFxuICAgICAgICAgICAgICAgIGxsbU91dHB1dCxcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0THNQYXJhbXMob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcm92aWRlck5hbWUgPSB0aGlzLmdldE5hbWUoKS5zdGFydHNXaXRoKFwiQ2hhdFwiKVxuICAgICAgICAgICAgPyB0aGlzLmdldE5hbWUoKS5yZXBsYWNlKFwiQ2hhdFwiLCBcIlwiKVxuICAgICAgICAgICAgOiB0aGlzLmdldE5hbWUoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxzX21vZGVsX3R5cGU6IFwiY2hhdFwiLFxuICAgICAgICAgICAgbHNfc3RvcDogb3B0aW9ucy5zdG9wLFxuICAgICAgICAgICAgbHNfcHJvdmlkZXI6IHByb3ZpZGVyTmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBhc3luYyBfZ2VuZXJhdGVVbmNhY2hlZChtZXNzYWdlcywgcGFyc2VkT3B0aW9ucywgaGFuZGxlZE9wdGlvbnMsIHN0YXJ0ZWRSdW5NYW5hZ2Vycykge1xuICAgICAgICBjb25zdCBiYXNlTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2VMaXN0KSA9PiBtZXNzYWdlTGlzdC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgbGV0IHJ1bk1hbmFnZXJzO1xuICAgICAgICBpZiAoc3RhcnRlZFJ1bk1hbmFnZXJzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHN0YXJ0ZWRSdW5NYW5hZ2Vycy5sZW5ndGggPT09IGJhc2VNZXNzYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJ1bk1hbmFnZXJzID0gc3RhcnRlZFJ1bk1hbmFnZXJzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5oZXJpdGFibGVNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAuLi5oYW5kbGVkT3B0aW9ucy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmdldExzUGFyYW1zKHBhcnNlZE9wdGlvbnMpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBjYWxsYmFjayBtYW5hZ2VyIGFuZCBzdGFydCBydW5cbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGhhbmRsZWRPcHRpb25zLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIGhhbmRsZWRPcHRpb25zLnRhZ3MsIHRoaXMudGFncywgaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG4gICAgICAgICAgICBjb25zdCBleHRyYSA9IHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBwYXJzZWRPcHRpb25zLFxuICAgICAgICAgICAgICAgIGludm9jYXRpb25fcGFyYW1zOiB0aGlzPy5pbnZvY2F0aW9uUGFyYW1zKHBhcnNlZE9wdGlvbnMpLFxuICAgICAgICAgICAgICAgIGJhdGNoX3NpemU6IDEsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnVuTWFuYWdlcnMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGF0TW9kZWxTdGFydCh0aGlzLnRvSlNPTigpLCBiYXNlTWVzc2FnZXMubWFwKF9mb3JtYXRGb3JUcmFjaW5nKSwgaGFuZGxlZE9wdGlvbnMucnVuSWQsIHVuZGVmaW5lZCwgZXh0cmEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoYW5kbGVkT3B0aW9ucy5ydW5OYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IFtdO1xuICAgICAgICBjb25zdCBsbG1PdXRwdXRzID0gW107XG4gICAgICAgIC8vIEV2ZW4gaWYgc3RyZWFtIGlzIG5vdCBleHBsaWNpdGx5IGNhbGxlZCwgY2hlY2sgaWYgbW9kZWwgaXMgaW1wbGljaXRseVxuICAgICAgICAvLyBjYWxsZWQgZnJvbSBzdHJlYW1FdmVudHMoKSBvciBzdHJlYW1Mb2coKSB0byBnZXQgYWxsIHN0cmVhbWVkIGV2ZW50cy5cbiAgICAgICAgLy8gQmFpbCBvdXQgaWYgX3N0cmVhbVJlc3BvbnNlQ2h1bmtzIG5vdCBvdmVycmlkZGVuXG4gICAgICAgIGNvbnN0IGhhc1N0cmVhbWluZ0hhbmRsZXIgPSAhIXJ1bk1hbmFnZXJzPy5bMF0uaGFuZGxlcnMuZmluZChjYWxsYmFja0hhbmRsZXJQcmVmZXJzU3RyZWFtaW5nKTtcbiAgICAgICAgaWYgKGhhc1N0cmVhbWluZ0hhbmRsZXIgJiZcbiAgICAgICAgICAgICF0aGlzLmRpc2FibGVTdHJlYW1pbmcgJiZcbiAgICAgICAgICAgIGJhc2VNZXNzYWdlcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgIHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzICE9PVxuICAgICAgICAgICAgICAgIEJhc2VDaGF0TW9kZWwucHJvdG90eXBlLl9zdHJlYW1SZXNwb25zZUNodW5rcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhiYXNlTWVzc2FnZXNbMF0sIHBhcnNlZE9wdGlvbnMsIHJ1bk1hbmFnZXJzPy5bMF0pO1xuICAgICAgICAgICAgICAgIGxldCBhZ2dyZWdhdGVkO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgbGV0IGxsbU91dHB1dDtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsubWVzc2FnZS5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBydW5JZCA9IHJ1bk1hbmFnZXJzPy5hdCgwKT8ucnVuSWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVuSWQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5tZXNzYWdlLl91cGRhdGVJZChgcnVuLSR7cnVuSWR9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFnZ3JlZ2F0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZCA9IGNvbmNhdChhZ2dyZWdhdGVkLCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQUlNZXNzYWdlQ2h1bmsoY2h1bmsubWVzc2FnZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLm1lc3NhZ2UudXNhZ2VfbWV0YWRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGxtT3V0cHV0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuVXNhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0VG9rZW5zOiBjaHVuay5tZXNzYWdlLnVzYWdlX21ldGFkYXRhLmlucHV0X3Rva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvblRva2VuczogY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YS5vdXRwdXRfdG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YS50b3RhbF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFnZ3JlZ2F0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWNlaXZlZCBlbXB0eSByZXNwb25zZSBmcm9tIGNoYXQgbW9kZWwgY2FsbC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zLnB1c2goW2FnZ3JlZ2F0ZWRdKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2Vycz8uWzBdLmhhbmRsZUxMTUVuZCh7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXJzPy5bMF0uaGFuZGxlTExNRXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIHJlc3VsdHNcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoYmFzZU1lc3NhZ2VzLm1hcCgobWVzc2FnZUxpc3QsIGkpID0+IHRoaXMuX2dlbmVyYXRlKG1lc3NhZ2VMaXN0LCB7IC4uLnBhcnNlZE9wdGlvbnMsIHByb21wdEluZGV4OiBpIH0sIHJ1bk1hbmFnZXJzPy5baV0pKSk7XG4gICAgICAgICAgICAvLyBoYW5kbGUgcmVzdWx0c1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocmVzdWx0cy5tYXAoYXN5bmMgKHBSZXN1bHQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocFJlc3VsdC5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcFJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBnZW5lcmF0aW9uIG9mIHJlc3VsdC5nZW5lcmF0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdlbmVyYXRpb24ubWVzc2FnZS5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcnVuSWQgPSBydW5NYW5hZ2Vycz8uYXQoMCk/LnJ1bklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydW5JZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uLm1lc3NhZ2UuX3VwZGF0ZUlkKGBydW4tJHtydW5JZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb24ubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5nZW5lcmF0aW9uLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdlbmVyYXRpb24ubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5nZW5lcmF0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5nZW5lcmF0aW9uc1swXS5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdC5sbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVzdWx0LmdlbmVyYXRpb25zWzBdLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zW2ldID0gcmVzdWx0LmdlbmVyYXRpb25zO1xuICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXRzW2ldID0gcmVzdWx0LmxsbU91dHB1dDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bk1hbmFnZXJzPy5baV0/LmhhbmRsZUxMTUVuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogW3Jlc3VsdC5nZW5lcmF0aW9uc10sXG4gICAgICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXQ6IHJlc3VsdC5sbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RhdHVzID09PSBcInJlamVjdGVkXCJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcnM/LltpXT8uaGFuZGxlTExNRXJyb3IocFJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocFJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjcmVhdGUgY29tYmluZWQgb3V0cHV0XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgbGxtT3V0cHV0OiBsbG1PdXRwdXRzLmxlbmd0aFxuICAgICAgICAgICAgICAgID8gdGhpcy5fY29tYmluZUxMTU91dHB1dD8uKC4uLmxsbU91dHB1dHMpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvdXRwdXQsIFJVTl9LRVksIHtcbiAgICAgICAgICAgIHZhbHVlOiBydW5NYW5hZ2Vyc1xuICAgICAgICAgICAgICAgID8geyBydW5JZHM6IHJ1bk1hbmFnZXJzPy5tYXAoKG1hbmFnZXIpID0+IG1hbmFnZXIucnVuSWQpIH1cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGFzeW5jIF9nZW5lcmF0ZUNhY2hlZCh7IG1lc3NhZ2VzLCBjYWNoZSwgbGxtU3RyaW5nS2V5LCBwYXJzZWRPcHRpb25zLCBoYW5kbGVkT3B0aW9ucywgfSkge1xuICAgICAgICBjb25zdCBiYXNlTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2VMaXN0KSA9PiBtZXNzYWdlTGlzdC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgY29uc3QgaW5oZXJpdGFibGVNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIC4uLmhhbmRsZWRPcHRpb25zLm1ldGFkYXRhLFxuICAgICAgICAgICAgLi4udGhpcy5nZXRMc1BhcmFtcyhwYXJzZWRPcHRpb25zKSxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gY3JlYXRlIGNhbGxiYWNrIG1hbmFnZXIgYW5kIHN0YXJ0IHJ1blxuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShoYW5kbGVkT3B0aW9ucy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBoYW5kbGVkT3B0aW9ucy50YWdzLCB0aGlzLnRhZ3MsIGluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuICAgICAgICBjb25zdCBleHRyYSA9IHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHBhcnNlZE9wdGlvbnMsXG4gICAgICAgICAgICBpbnZvY2F0aW9uX3BhcmFtczogdGhpcz8uaW52b2NhdGlvblBhcmFtcyhwYXJzZWRPcHRpb25zKSxcbiAgICAgICAgICAgIGJhdGNoX3NpemU6IDEsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhdE1vZGVsU3RhcnQodGhpcy50b0pTT04oKSwgYmFzZU1lc3NhZ2VzLm1hcChfZm9ybWF0Rm9yVHJhY2luZyksIGhhbmRsZWRPcHRpb25zLnJ1bklkLCB1bmRlZmluZWQsIGV4dHJhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaGFuZGxlZE9wdGlvbnMucnVuTmFtZSk7XG4gICAgICAgIC8vIGdlbmVyYXRlIHJlc3VsdHNcbiAgICAgICAgY29uc3QgbWlzc2luZ1Byb21wdEluZGljZXMgPSBbXTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChiYXNlTWVzc2FnZXMubWFwKGFzeW5jIChiYXNlTWVzc2FnZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIEpvaW4gYWxsIGNvbnRlbnQgaW50byBvbmUgc3RyaW5nIGZvciB0aGUgcHJvbXB0IGluZGV4XG4gICAgICAgICAgICBjb25zdCBwcm9tcHQgPSBCYXNlQ2hhdE1vZGVsLl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGJhc2VNZXNzYWdlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2FjaGUubG9va3VwKHByb21wdCwgbGxtU3RyaW5nS2V5KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG1pc3NpbmdQcm9tcHRJbmRpY2VzLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBNYXAgcnVuIG1hbmFnZXJzIHRvIHRoZSByZXN1bHRzIGJlZm9yZSBmaWx0ZXJpbmcgb3V0IG51bGwgcmVzdWx0c1xuICAgICAgICAvLyBOdWxsIHJlc3VsdHMgYXJlIGp1c3QgYWJzZW50IGZyb20gdGhlIGNhY2hlLlxuICAgICAgICBjb25zdCBjYWNoZWRSZXN1bHRzID0gcmVzdWx0c1xuICAgICAgICAgICAgLm1hcCgocmVzdWx0LCBpbmRleCkgPT4gKHsgcmVzdWx0LCBydW5NYW5hZ2VyOiBydW5NYW5hZ2Vycz8uW2luZGV4XSB9KSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHsgcmVzdWx0IH0pID0+IChyZXN1bHQuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiICYmIHJlc3VsdC52YWx1ZSAhPSBudWxsKSB8fFxuICAgICAgICAgICAgcmVzdWx0LnN0YXR1cyA9PT0gXCJyZWplY3RlZFwiKTtcbiAgICAgICAgLy8gSGFuZGxlIHJlc3VsdHMgYW5kIGNhbGwgcnVuIG1hbmFnZXJzXG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gW107XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNhY2hlZFJlc3VsdHMubWFwKGFzeW5jICh7IHJlc3VsdDogcHJvbWlzZVJlc3VsdCwgcnVuTWFuYWdlciB9LCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvbWlzZVJlc3VsdC5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBwcm9taXNlUmVzdWx0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zW2ldID0gcmVzdWx0Lm1hcCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcIm1lc3NhZ2VcIiBpbiByZXN1bHQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmFzZU1lc3NhZ2UocmVzdWx0Lm1lc3NhZ2UpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FJTWVzc2FnZShyZXN1bHQubWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm1lc3NhZ2UudXNhZ2VfbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfdG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dF90b2tlbnM6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxfdG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmdlbmVyYXRpb25JbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVzdWx0LmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5Vc2FnZToge30sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4ocmVzdWx0WzBdLnRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtyZXN1bHRdLFxuICAgICAgICAgICAgICAgIH0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gc3RhdHVzID09PSBcInJlamVjdGVkXCJcbiAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FcnJvcihwcm9taXNlUmVzdWx0LnJlYXNvbiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHByb21pc2VSZXN1bHQucmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICAgICAgICBnZW5lcmF0aW9ucyxcbiAgICAgICAgICAgIG1pc3NpbmdQcm9tcHRJbmRpY2VzLFxuICAgICAgICAgICAgc3RhcnRlZFJ1bk1hbmFnZXJzOiBydW5NYW5hZ2VycyxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVGhpcyBkZWZpbmVzIFJVTl9LRVkgYXMgYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSBvbiB0aGUgb3V0cHV0IG9iamVjdFxuICAgICAgICAvLyBzbyB0aGF0IGl0IGlzIG5vdCBzZXJpYWxpemVkIHdoZW4gdGhlIG91dHB1dCBpcyBzdHJpbmdpZmllZCwgYW5kIHNvIHRoYXRcbiAgICAgICAgLy8gaXQgaXNudCBpbmNsdWRlZCB3aGVuIGxpc3RpbmcgdGhlIGtleXMgb2YgdGhlIG91dHB1dCBvYmplY3QuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvdXRwdXQsIFJVTl9LRVksIHtcbiAgICAgICAgICAgIHZhbHVlOiBydW5NYW5hZ2Vyc1xuICAgICAgICAgICAgICAgID8geyBydW5JZHM6IHJ1bk1hbmFnZXJzPy5tYXAoKG1hbmFnZXIpID0+IG1hbmFnZXIucnVuSWQpIH1cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBjaGF0IGJhc2VkIG9uIHRoZSBpbnB1dCBtZXNzYWdlcy5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgQW4gYXJyYXkgb2YgYXJyYXlzIG9mIEJhc2VNZXNzYWdlIGluc3RhbmNlcy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIExMTVJlc3VsdC5cbiAgICAgKi9cbiAgICBhc3luYyBnZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIC8vIHBhcnNlIGNhbGwgb3B0aW9uc1xuICAgICAgICBsZXQgcGFyc2VkT3B0aW9ucztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgICAgIHBhcnNlZE9wdGlvbnMgPSB7IHN0b3A6IG9wdGlvbnMgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZE9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJhc2VNZXNzYWdlcyA9IG1lc3NhZ2VzLm1hcCgobWVzc2FnZUxpc3QpID0+IG1lc3NhZ2VMaXN0Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSkpO1xuICAgICAgICBjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHRoaXMuX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnNDb21wYXQocGFyc2VkT3B0aW9ucyk7XG4gICAgICAgIHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcyA9IHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcyA/PyBjYWxsYmFja3M7XG4gICAgICAgIGlmICghdGhpcy5jYWNoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dlbmVyYXRlVW5jYWNoZWQoYmFzZU1lc3NhZ2VzLCBjYWxsT3B0aW9ucywgcnVubmFibGVDb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgY2FjaGUgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGxsbVN0cmluZ0tleSA9IHRoaXMuX2dldFNlcmlhbGl6ZWRDYWNoZUtleVBhcmFtZXRlcnNGb3JDYWxsKGNhbGxPcHRpb25zKTtcbiAgICAgICAgY29uc3QgeyBnZW5lcmF0aW9ucywgbWlzc2luZ1Byb21wdEluZGljZXMsIHN0YXJ0ZWRSdW5NYW5hZ2VycyB9ID0gYXdhaXQgdGhpcy5fZ2VuZXJhdGVDYWNoZWQoe1xuICAgICAgICAgICAgbWVzc2FnZXM6IGJhc2VNZXNzYWdlcyxcbiAgICAgICAgICAgIGNhY2hlLFxuICAgICAgICAgICAgbGxtU3RyaW5nS2V5LFxuICAgICAgICAgICAgcGFyc2VkT3B0aW9uczogY2FsbE9wdGlvbnMsXG4gICAgICAgICAgICBoYW5kbGVkT3B0aW9uczogcnVubmFibGVDb25maWcsXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGxtT3V0cHV0ID0ge307XG4gICAgICAgIGlmIChtaXNzaW5nUHJvbXB0SW5kaWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5fZ2VuZXJhdGVVbmNhY2hlZChtaXNzaW5nUHJvbXB0SW5kaWNlcy5tYXAoKGkpID0+IGJhc2VNZXNzYWdlc1tpXSksIGNhbGxPcHRpb25zLCBydW5uYWJsZUNvbmZpZywgc3RhcnRlZFJ1bk1hbmFnZXJzICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG1pc3NpbmdQcm9tcHRJbmRpY2VzLm1hcCgoaSkgPT4gc3RhcnRlZFJ1bk1hbmFnZXJzPy5baV0pXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocmVzdWx0cy5nZW5lcmF0aW9ucy5tYXAoYXN5bmMgKGdlbmVyYXRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbXB0SW5kZXggPSBtaXNzaW5nUHJvbXB0SW5kaWNlc1tpbmRleF07XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnNbcHJvbXB0SW5kZXhdID0gZ2VuZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAvLyBKb2luIGFsbCBjb250ZW50IGludG8gb25lIHN0cmluZyBmb3IgdGhlIHByb21wdCBpbmRleFxuICAgICAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IEJhc2VDaGF0TW9kZWwuX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoYmFzZU1lc3NhZ2VzW3Byb21wdEluZGV4XSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGUudXBkYXRlKHByb21wdCwgbGxtU3RyaW5nS2V5LCBnZW5lcmF0aW9uKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGxsbU91dHB1dCA9IHJlc3VsdHMubGxtT3V0cHV0ID8/IHt9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGdlbmVyYXRpb25zLCBsbG1PdXRwdXQgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwYXJhbWV0ZXJzIHVzZWQgdG8gaW52b2tlIHRoZSBtb2RlbFxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaW52b2NhdGlvblBhcmFtcyhfb3B0aW9ucykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIF9tb2RlbFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImJhc2VfY2hhdF9tb2RlbFwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIFJldHVybiBhIGpzb24tbGlrZSBvYmplY3QgcmVwcmVzZW50aW5nIHRoaXMgTExNLlxuICAgICAqL1xuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMuaW52b2NhdGlvblBhcmFtcygpLFxuICAgICAgICAgICAgX3R5cGU6IHRoaXMuX2xsbVR5cGUoKSxcbiAgICAgICAgICAgIF9tb2RlbDogdGhpcy5fbW9kZWxUeXBlKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIHByb21wdCBiYXNlZCBvbiB0aGUgaW5wdXQgcHJvbXB0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gcHJvbXB0VmFsdWVzIEFuIGFycmF5IG9mIEJhc2VQcm9tcHRWYWx1ZSBpbnN0YW5jZXMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBMTE1SZXN1bHQuXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGVQcm9tcHQocHJvbXB0VmFsdWVzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0TWVzc2FnZXMgPSBwcm9tcHRWYWx1ZXMubWFwKChwcm9tcHRWYWx1ZSkgPT4gcHJvbXB0VmFsdWUudG9DaGF0TWVzc2FnZXMoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlKHByb21wdE1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLmludm9rZSgpIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiAwLjIuMC5cbiAgICAgKlxuICAgICAqIE1ha2VzIGEgc2luZ2xlIGNhbGwgdG8gdGhlIGNoYXQgbW9kZWwuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFuIGFycmF5IG9mIEJhc2VNZXNzYWdlIGluc3RhbmNlcy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2UuXG4gICAgICovXG4gICAgYXN5bmMgY2FsbChtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGUoW21lc3NhZ2VzLm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSldLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IHJlc3VsdC5nZW5lcmF0aW9ucztcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRpb25zWzBdWzBdLm1lc3NhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMi4wLlxuICAgICAqXG4gICAgICogTWFrZXMgYSBzaW5nbGUgY2FsbCB0byB0aGUgY2hhdCBtb2RlbCB3aXRoIGEgcHJvbXB0IHZhbHVlLlxuICAgICAqIEBwYXJhbSBwcm9tcHRWYWx1ZSBUaGUgdmFsdWUgb2YgdGhlIHByb21wdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2UuXG4gICAgICovXG4gICAgYXN5bmMgY2FsbFByb21wdChwcm9tcHRWYWx1ZSwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHByb21wdE1lc3NhZ2VzID0gcHJvbXB0VmFsdWUudG9DaGF0TWVzc2FnZXMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbChwcm9tcHRNZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBQcmVkaWN0cyB0aGUgbmV4dCBtZXNzYWdlIGJhc2VkIG9uIHRoZSBpbnB1dCBtZXNzYWdlcy5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgQW4gYXJyYXkgb2YgQmFzZU1lc3NhZ2UgaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBCYXNlTWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBwcmVkaWN0TWVzc2FnZXMobWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKG1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLmludm9rZSgpIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiAwLjIuMC5cbiAgICAgKlxuICAgICAqIFByZWRpY3RzIHRoZSBuZXh0IG1lc3NhZ2UgYmFzZWQgb24gYSB0ZXh0IGlucHV0LlxuICAgICAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IGlucHV0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBzdHJpbmcuXG4gICAgICovXG4gICAgYXN5bmMgcHJlZGljdCh0ZXh0LCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBIdW1hbk1lc3NhZ2UodGV4dCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY2FsbChbbWVzc2FnZV0sIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgICAgIGlmICh0eXBlb2YgcmVzdWx0LmNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgcHJlZGljdCB3aGVuIG91dHB1dCBpcyBub3QgYSBzdHJpbmcuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQuY29udGVudDtcbiAgICB9XG4gICAgd2l0aFN0cnVjdHVyZWRPdXRwdXQob3V0cHV0U2NoZW1hLCBjb25maWcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmJpbmRUb29scyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYXQgbW9kZWwgbXVzdCBpbXBsZW1lbnQgXCIuYmluZFRvb2xzKClcIiB0byB1c2Ugd2l0aFN0cnVjdHVyZWRPdXRwdXQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZz8uc3RyaWN0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwic3RyaWN0XCIgbW9kZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIG1vZGVsIGJ5IGRlZmF1bHQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3Qgc2NoZW1hID0gb3V0cHV0U2NoZW1hO1xuICAgICAgICBjb25zdCBuYW1lID0gY29uZmlnPy5uYW1lO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGdldFNjaGVtYURlc2NyaXB0aW9uKHNjaGVtYSkgPz8gXCJBIGZ1bmN0aW9uIGF2YWlsYWJsZSB0byBjYWxsLlwiO1xuICAgICAgICBjb25zdCBtZXRob2QgPSBjb25maWc/Lm1ldGhvZDtcbiAgICAgICAgY29uc3QgaW5jbHVkZVJhdyA9IGNvbmZpZz8uaW5jbHVkZVJhdztcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJqc29uTW9kZVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhc2Ugd2l0aFN0cnVjdHVyZWRPdXRwdXQgaW1wbGVtZW50YXRpb24gb25seSBzdXBwb3J0cyBcImZ1bmN0aW9uQ2FsbGluZ1wiIGFzIGEgbWV0aG9kLmApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmdW5jdGlvbk5hbWUgPSBuYW1lID8/IFwiZXh0cmFjdFwiO1xuICAgICAgICBsZXQgdG9vbHM7XG4gICAgICAgIGlmIChpc0ludGVyb3Bab2RTY2hlbWEoc2NoZW1hKSkge1xuICAgICAgICAgICAgdG9vbHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHRvSnNvblNjaGVtYShzY2hlbWEpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKFwibmFtZVwiIGluIHNjaGVtYSkge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uTmFtZSA9IHNjaGVtYS5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9vbHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsbG0gPSB0aGlzLmJpbmRUb29scyh0b29scyk7XG4gICAgICAgIGNvbnN0IG91dHB1dFBhcnNlciA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWlucHV0LnRvb2xfY2FsbHMgfHwgaW5wdXQudG9vbF9jYWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIGNhbGxzIGZvdW5kIGluIHRoZSByZXNwb25zZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IGlucHV0LnRvb2xfY2FsbHMuZmluZCgodGMpID0+IHRjLm5hbWUgPT09IGZ1bmN0aW9uTmFtZSk7XG4gICAgICAgICAgICBpZiAoIXRvb2xDYWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyB0b29sIGNhbGwgZm91bmQgd2l0aCBuYW1lICR7ZnVuY3Rpb25OYW1lfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b29sQ2FsbC5hcmdzO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFpbmNsdWRlUmF3KSB7XG4gICAgICAgICAgICByZXR1cm4gbGxtLnBpcGUob3V0cHV0UGFyc2VyKS53aXRoQ29uZmlnKHtcbiAgICAgICAgICAgICAgICBydW5OYW1lOiBcIlN0cnVjdHVyZWRPdXRwdXRcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlckFzc2lnbiA9IFJ1bm5hYmxlUGFzc3Rocm91Z2guYXNzaWduKHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBwYXJzZWQ6IChpbnB1dCwgY29uZmlnKSA9PiBvdXRwdXRQYXJzZXIuaW52b2tlKGlucHV0LnJhdywgY29uZmlnKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBhcnNlck5vbmUgPSBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbih7XG4gICAgICAgICAgICBwYXJzZWQ6ICgpID0+IG51bGwsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYXJzZWRXaXRoRmFsbGJhY2sgPSBwYXJzZXJBc3NpZ24ud2l0aEZhbGxiYWNrcyh7XG4gICAgICAgICAgICBmYWxsYmFja3M6IFtwYXJzZXJOb25lXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJhdzogbGxtLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhcnNlZFdpdGhGYWxsYmFjayxcbiAgICAgICAgXSkud2l0aENvbmZpZyh7XG4gICAgICAgICAgICBydW5OYW1lOiBcIlN0cnVjdHVyZWRPdXRwdXRSdW5uYWJsZVwiLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEFuIGFic3RyYWN0IGNsYXNzIHRoYXQgZXh0ZW5kcyBCYXNlQ2hhdE1vZGVsIGFuZCBwcm92aWRlcyBhIHNpbXBsZVxuICogaW1wbGVtZW50YXRpb24gb2YgX2dlbmVyYXRlLlxuICovXG5leHBvcnQgY2xhc3MgU2ltcGxlQ2hhdE1vZGVsIGV4dGVuZHMgQmFzZUNoYXRNb2RlbCB7XG4gICAgYXN5bmMgX2dlbmVyYXRlKG1lc3NhZ2VzLCBvcHRpb25zLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCB0aGlzLl9jYWxsKG1lc3NhZ2VzLCBvcHRpb25zLCBydW5NYW5hZ2VyKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBBSU1lc3NhZ2UodGV4dCk7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5jb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZ2VuZXJhdGUgd2l0aCBhIHNpbXBsZSBjaGF0IG1vZGVsIHdoZW4gb3V0cHV0IGlzIG5vdCBhIHN0cmluZy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkFJTWVzc2FnZSIsIkh1bWFuTWVzc2FnZSIsImNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlIiwiaXNBSU1lc3NhZ2VDaHVuayIsImlzQmFzZU1lc3NhZ2UiLCJpc0FJTWVzc2FnZSIsImNvbnZlcnRUb09wZW5BSUltYWdlQmxvY2siLCJpc1VSTENvbnRlbnRCbG9jayIsImlzQmFzZTY0Q29udGVudEJsb2NrIiwiUlVOX0tFWSIsIkJhc2VMYW5ndWFnZU1vZGVsIiwiQ2FsbGJhY2tNYW5hZ2VyIiwiUnVubmFibGVMYW1iZGEiLCJSdW5uYWJsZVNlcXVlbmNlIiwiY29uY2F0IiwiUnVubmFibGVQYXNzdGhyb3VnaCIsImdldFNjaGVtYURlc2NyaXB0aW9uIiwiaXNJbnRlcm9wWm9kU2NoZW1hIiwiY2FsbGJhY2tIYW5kbGVyUHJlZmVyc1N0cmVhbWluZyIsInRvSnNvblNjaGVtYSIsImNyZWF0ZUNoYXRNZXNzYWdlQ2h1bmtFbmNvZGVyU3RyZWFtIiwidGV4dEVuY29kZXIiLCJUZXh0RW5jb2RlciIsIlRyYW5zZm9ybVN0cmVhbSIsInRyYW5zZm9ybSIsImNodW5rIiwiY29udHJvbGxlciIsImVucXVldWUiLCJlbmNvZGUiLCJjb250ZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsIl9mb3JtYXRGb3JUcmFjaW5nIiwibWVzc2FnZXMiLCJtZXNzYWdlc1RvVHJhY2UiLCJtZXNzYWdlIiwibWVzc2FnZVRvVHJhY2UiLCJBcnJheSIsImlzQXJyYXkiLCJpZHgiLCJsZW5ndGgiLCJibG9jayIsImNvbnN0cnVjdG9yIiwic2xpY2UiLCJwdXNoIiwiQmFzZUNoYXRNb2RlbCIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJfbGxtVHlwZSIsIl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zQ29tcGF0Iiwib3B0aW9ucyIsInJ1bm5hYmxlQ29uZmlnIiwiY2FsbE9wdGlvbnMiLCJfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyIsInNpZ25hbCIsImludm9rZSIsImlucHV0IiwicHJvbXB0VmFsdWUiLCJfY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZSIsInJlc3VsdCIsImdlbmVyYXRlUHJvbXB0IiwiY2FsbGJhY2tzIiwiY2hhdEdlbmVyYXRpb24iLCJnZW5lcmF0aW9ucyIsIl9zdHJlYW1SZXNwb25zZUNodW5rcyIsIl9tZXNzYWdlcyIsIl9vcHRpb25zIiwiX3J1bk1hbmFnZXIiLCJFcnJvciIsIl9zdHJlYW1JdGVyYXRvciIsInByb3RvdHlwZSIsImRpc2FibGVTdHJlYW1pbmciLCJwcm9tcHQiLCJ0b0NoYXRNZXNzYWdlcyIsImluaGVyaXRhYmxlTWV0YWRhdGEiLCJtZXRhZGF0YSIsImdldExzUGFyYW1zIiwiY2FsbGJhY2tNYW5hZ2VyXyIsImNvbmZpZ3VyZSIsInRhZ3MiLCJ2ZXJib3NlIiwiZXh0cmEiLCJpbnZvY2F0aW9uX3BhcmFtcyIsImludm9jYXRpb25QYXJhbXMiLCJiYXRjaF9zaXplIiwicnVuTWFuYWdlcnMiLCJoYW5kbGVDaGF0TW9kZWxTdGFydCIsInRvSlNPTiIsInJ1bklkIiwidW5kZWZpbmVkIiwicnVuTmFtZSIsImdlbmVyYXRpb25DaHVuayIsImxsbU91dHB1dCIsImlkIiwiYXQiLCJfdXBkYXRlSWQiLCJyZXNwb25zZV9tZXRhZGF0YSIsImdlbmVyYXRpb25JbmZvIiwidXNhZ2VfbWV0YWRhdGEiLCJ0b2tlblVzYWdlIiwicHJvbXB0VG9rZW5zIiwiaW5wdXRfdG9rZW5zIiwiY29tcGxldGlvblRva2VucyIsIm91dHB1dF90b2tlbnMiLCJ0b3RhbFRva2VucyIsInRvdGFsX3Rva2VucyIsImVyciIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJydW5NYW5hZ2VyIiwiaGFuZGxlTExNRXJyb3IiLCJoYW5kbGVMTE1FbmQiLCJwcm92aWRlck5hbWUiLCJnZXROYW1lIiwic3RhcnRzV2l0aCIsInJlcGxhY2UiLCJsc19tb2RlbF90eXBlIiwibHNfc3RvcCIsInN0b3AiLCJsc19wcm92aWRlciIsIl9nZW5lcmF0ZVVuY2FjaGVkIiwicGFyc2VkT3B0aW9ucyIsImhhbmRsZWRPcHRpb25zIiwic3RhcnRlZFJ1bk1hbmFnZXJzIiwiYmFzZU1lc3NhZ2VzIiwibWVzc2FnZUxpc3QiLCJsbG1PdXRwdXRzIiwiaGFzU3RyZWFtaW5nSGFuZGxlciIsImhhbmRsZXJzIiwiZmluZCIsInN0cmVhbSIsImFnZ3JlZ2F0ZWQiLCJlIiwicmVzdWx0cyIsImFsbFNldHRsZWQiLCJpIiwiX2dlbmVyYXRlIiwicHJvbXB0SW5kZXgiLCJwUmVzdWx0Iiwic3RhdHVzIiwiZ2VuZXJhdGlvbiIsInJlYXNvbiIsInJlamVjdCIsIm91dHB1dCIsIl9jb21iaW5lTExNT3V0cHV0IiwicnVuSWRzIiwibWFuYWdlciIsIl9nZW5lcmF0ZUNhY2hlZCIsImNhY2hlIiwibGxtU3RyaW5nS2V5IiwibWlzc2luZ1Byb21wdEluZGljZXMiLCJiYXNlTWVzc2FnZSIsImluZGV4IiwidG9TdHJpbmciLCJsb29rdXAiLCJjYWNoZWRSZXN1bHRzIiwiZmlsdGVyIiwicHJvbWlzZVJlc3VsdCIsImhhbmRsZUxMTU5ld1Rva2VuIiwidGV4dCIsImNhY2hlZCIsImdlbmVyYXRlIiwiX2dldFNlcmlhbGl6ZWRDYWNoZUtleVBhcmFtZXRlcnNGb3JDYWxsIiwidXBkYXRlIiwiX21vZGVsVHlwZSIsInNlcmlhbGl6ZSIsIl90eXBlIiwiX21vZGVsIiwicHJvbXB0VmFsdWVzIiwicHJvbXB0TWVzc2FnZXMiLCJjYWxsIiwiY2FsbFByb21wdCIsInByZWRpY3RNZXNzYWdlcyIsInByZWRpY3QiLCJ3aXRoU3RydWN0dXJlZE91dHB1dCIsIm91dHB1dFNjaGVtYSIsImNvbmZpZyIsImJpbmRUb29scyIsInN0cmljdCIsInNjaGVtYSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm1ldGhvZCIsImluY2x1ZGVSYXciLCJmdW5jdGlvbk5hbWUiLCJ0b29scyIsInR5cGUiLCJmdW5jdGlvbiIsInBhcmFtZXRlcnMiLCJsbG0iLCJvdXRwdXRQYXJzZXIiLCJmcm9tIiwidG9vbF9jYWxscyIsInRvb2xDYWxsIiwidGMiLCJhcmdzIiwicGlwZSIsIndpdGhDb25maWciLCJwYXJzZXJBc3NpZ24iLCJhc3NpZ24iLCJwYXJzZWQiLCJyYXciLCJwYXJzZXJOb25lIiwicGFyc2VkV2l0aEZhbGxiYWNrIiwid2l0aEZhbGxiYWNrcyIsImZhbGxiYWNrcyIsIlNpbXBsZUNoYXRNb2RlbCIsIl9jYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/map_keys.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyFromJson: () => (/* binding */ keyFromJson),\n/* harmony export */   keyToJson: () => (/* binding */ keyToJson),\n/* harmony export */   mapKeys: () => (/* binding */ mapKeys)\n/* harmony export */ });\n/* harmony import */ var decamelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! decamelize */ \"(rsc)/./node_modules/decamelize/index.js\");\n/* harmony import */ var camelcase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! camelcase */ \"(rsc)/./node_modules/camelcase/index.js\");\n\n\nfunction keyToJson(key, map) {\n    return map?.[key] || decamelize__WEBPACK_IMPORTED_MODULE_0__(key);\n}\nfunction keyFromJson(key, map) {\n    return map?.[key] || camelcase__WEBPACK_IMPORTED_MODULE_1__(key);\n}\nfunction mapKeys(fields, mapper, map) {\n    const mapped = {};\n    for(const key in fields){\n        if (Object.hasOwn(fields, key)) {\n            mapped[mapper(key, map)] = fields[key];\n        }\n    }\n    return mapped;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9tYXBfa2V5cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtQztBQUNEO0FBQzNCLFNBQVNFLFVBQVVDLEdBQUcsRUFBRUMsR0FBRztJQUM5QixPQUFPQSxLQUFLLENBQUNELElBQUksSUFBSUgsdUNBQVNBLENBQUNHO0FBQ25DO0FBQ08sU0FBU0UsWUFBWUYsR0FBRyxFQUFFQyxHQUFHO0lBQ2hDLE9BQU9BLEtBQUssQ0FBQ0QsSUFBSSxJQUFJRixzQ0FBU0EsQ0FBQ0U7QUFDbkM7QUFDTyxTQUFTRyxRQUFRQyxNQUFNLEVBQUVDLE1BQU0sRUFBRUosR0FBRztJQUN2QyxNQUFNSyxTQUFTLENBQUM7SUFDaEIsSUFBSyxNQUFNTixPQUFPSSxPQUFRO1FBQ3RCLElBQUlHLE9BQU9DLE1BQU0sQ0FBQ0osUUFBUUosTUFBTTtZQUM1Qk0sTUFBTSxDQUFDRCxPQUFPTCxLQUFLQyxLQUFLLEdBQUdHLE1BQU0sQ0FBQ0osSUFBSTtRQUMxQztJQUNKO0lBQ0EsT0FBT007QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9tYXBfa2V5cy5qcz8wZjQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzbmFrZUNhc2UgZnJvbSBcImRlY2FtZWxpemVcIjtcbmltcG9ydCBjYW1lbENhc2UgZnJvbSBcImNhbWVsY2FzZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIGtleVRvSnNvbihrZXksIG1hcCkge1xuICAgIHJldHVybiBtYXA/LltrZXldIHx8IHNuYWtlQ2FzZShrZXkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGtleUZyb21Kc29uKGtleSwgbWFwKSB7XG4gICAgcmV0dXJuIG1hcD8uW2tleV0gfHwgY2FtZWxDYXNlKGtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFwS2V5cyhmaWVsZHMsIG1hcHBlciwgbWFwKSB7XG4gICAgY29uc3QgbWFwcGVkID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZmllbGRzKSB7XG4gICAgICAgIGlmIChPYmplY3QuaGFzT3duKGZpZWxkcywga2V5KSkge1xuICAgICAgICAgICAgbWFwcGVkW21hcHBlcihrZXksIG1hcCldID0gZmllbGRzW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcHBlZDtcbn1cbiJdLCJuYW1lcyI6WyJzbmFrZUNhc2UiLCJjYW1lbENhc2UiLCJrZXlUb0pzb24iLCJrZXkiLCJtYXAiLCJrZXlGcm9tSnNvbiIsIm1hcEtleXMiLCJmaWVsZHMiLCJtYXBwZXIiLCJtYXBwZWQiLCJPYmplY3QiLCJoYXNPd24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/load/serializable.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/serializable.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Serializable: () => (/* binding */ Serializable),\n/* harmony export */   get_lc_unique_name: () => (/* binding */ get_lc_unique_name)\n/* harmony export */ });\n/* harmony import */ var _map_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map_keys.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js\");\n\nfunction shallowCopy(obj) {\n    return Array.isArray(obj) ? [\n        ...obj\n    ] : {\n        ...obj\n    };\n}\nfunction replaceSecrets(root, secretsMap) {\n    const result = shallowCopy(root);\n    for (const [path, secretId] of Object.entries(secretsMap)){\n        const [last, ...partsReverse] = path.split(\".\").reverse();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let current = result;\n        for (const part of partsReverse.reverse()){\n            if (current[part] === undefined) {\n                break;\n            }\n            current[part] = shallowCopy(current[part]);\n            current = current[part];\n        }\n        if (current[last] !== undefined) {\n            current[last] = {\n                lc: 1,\n                type: \"secret\",\n                id: [\n                    secretId\n                ]\n            };\n        }\n    }\n    return result;\n}\n/**\n * Get a unique name for the module, rather than parent class implementations.\n * Should not be subclassed, subclass lc_name above instead.\n */ function get_lc_unique_name(// eslint-disable-next-line @typescript-eslint/no-use-before-define\nserializableClass) {\n    // \"super\" here would refer to the parent class of Serializable,\n    // when we want the parent class of the module actually calling this method.\n    const parentClass = Object.getPrototypeOf(serializableClass);\n    const lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" && (typeof parentClass.lc_name !== \"function\" || serializableClass.lc_name() !== parentClass.lc_name());\n    if (lcNameIsSubclassed) {\n        return serializableClass.lc_name();\n    } else {\n        return serializableClass.name;\n    }\n}\nclass Serializable {\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            get_lc_unique_name(this.constructor)\n        ];\n    }\n    /**\n     * A map of secrets, which will be omitted from serialization.\n     * Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n     * Values are the secret ids, which will be used when deserializing.\n     */ get lc_secrets() {\n        return undefined;\n    }\n    /**\n     * A map of additional attributes to merge with constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the attribute values, which will be serialized.\n     * These attributes need to be accepted by the constructor as arguments.\n     */ get lc_attributes() {\n        return undefined;\n    }\n    /**\n     * A map of aliases for constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the alias that will replace the key in serialization.\n     * This is used to eg. make argument names match Python.\n     */ get lc_aliases() {\n        return undefined;\n    }\n    /**\n     * A manual list of keys that should be serialized.\n     * If not overridden, all fields passed into the constructor will be serialized.\n     */ get lc_serializable_keys() {\n        return undefined;\n    }\n    constructor(kwargs, ..._args){\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (this.lc_serializable_keys !== undefined) {\n            this.lc_kwargs = Object.fromEntries(Object.entries(kwargs || {}).filter(([key])=>this.lc_serializable_keys?.includes(key)));\n        } else {\n            this.lc_kwargs = kwargs ?? {};\n        }\n    }\n    toJSON() {\n        if (!this.lc_serializable) {\n            return this.toJSONNotImplemented();\n        }\n        if (// eslint-disable-next-line no-instanceof/no-instanceof\n        this.lc_kwargs instanceof Serializable || typeof this.lc_kwargs !== \"object\" || Array.isArray(this.lc_kwargs)) {\n            // We do not support serialization of classes with arg not a POJO\n            // I'm aware the check above isn't as strict as it could be\n            return this.toJSONNotImplemented();\n        }\n        const aliases = {};\n        const secrets = {};\n        const kwargs = Object.keys(this.lc_kwargs).reduce((acc, key)=>{\n            acc[key] = key in this ? this[key] : this.lc_kwargs[key];\n            return acc;\n        }, {});\n        // get secrets, attributes and aliases from all superclasses\n        for(// eslint-disable-next-line @typescript-eslint/no-this-alias\n        let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)){\n            Object.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n            Object.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n            Object.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n        }\n        // include all secrets used, even if not in kwargs,\n        // will be replaced with sentinel value in replaceSecrets\n        Object.keys(secrets).forEach((keyPath)=>{\n            // eslint-disable-next-line @typescript-eslint/no-this-alias, @typescript-eslint/no-explicit-any\n            let read = this;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let write = kwargs;\n            const [last, ...partsReverse] = keyPath.split(\".\").reverse();\n            for (const key of partsReverse.reverse()){\n                if (!(key in read) || read[key] === undefined) return;\n                if (!(key in write) || write[key] === undefined) {\n                    if (typeof read[key] === \"object\" && read[key] != null) {\n                        write[key] = {};\n                    } else if (Array.isArray(read[key])) {\n                        write[key] = [];\n                    }\n                }\n                read = read[key];\n                write = write[key];\n            }\n            if (last in read && read[last] !== undefined) {\n                write[last] = write[last] || read[last];\n            }\n        });\n        return {\n            lc: 1,\n            type: \"constructor\",\n            id: this.lc_id,\n            kwargs: (0,_map_keys_js__WEBPACK_IMPORTED_MODULE_0__.mapKeys)(Object.keys(secrets).length ? replaceSecrets(kwargs, secrets) : kwargs, _map_keys_js__WEBPACK_IMPORTED_MODULE_0__.keyToJson, aliases)\n        };\n    }\n    toJSONNotImplemented() {\n        return {\n            lc: 1,\n            type: \"not_implemented\",\n            id: this.lc_id\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9zZXJpYWxpemFibGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1EO0FBQ25ELFNBQVNFLFlBQVlDLEdBQUc7SUFDcEIsT0FBT0MsTUFBTUMsT0FBTyxDQUFDRixPQUFPO1dBQUlBO0tBQUksR0FBRztRQUFFLEdBQUdBLEdBQUc7SUFBQztBQUNwRDtBQUNBLFNBQVNHLGVBQWVDLElBQUksRUFBRUMsVUFBVTtJQUNwQyxNQUFNQyxTQUFTUCxZQUFZSztJQUMzQixLQUFLLE1BQU0sQ0FBQ0csTUFBTUMsU0FBUyxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLFlBQWE7UUFDdkQsTUFBTSxDQUFDTSxNQUFNLEdBQUdDLGFBQWEsR0FBR0wsS0FBS00sS0FBSyxDQUFDLEtBQUtDLE9BQU87UUFDdkQsOERBQThEO1FBQzlELElBQUlDLFVBQVVUO1FBQ2QsS0FBSyxNQUFNVSxRQUFRSixhQUFhRSxPQUFPLEdBQUk7WUFDdkMsSUFBSUMsT0FBTyxDQUFDQyxLQUFLLEtBQUtDLFdBQVc7Z0JBQzdCO1lBQ0o7WUFDQUYsT0FBTyxDQUFDQyxLQUFLLEdBQUdqQixZQUFZZ0IsT0FBTyxDQUFDQyxLQUFLO1lBQ3pDRCxVQUFVQSxPQUFPLENBQUNDLEtBQUs7UUFDM0I7UUFDQSxJQUFJRCxPQUFPLENBQUNKLEtBQUssS0FBS00sV0FBVztZQUM3QkYsT0FBTyxDQUFDSixLQUFLLEdBQUc7Z0JBQ1pPLElBQUk7Z0JBQ0pDLE1BQU07Z0JBQ05DLElBQUk7b0JBQUNaO2lCQUFTO1lBQ2xCO1FBQ0o7SUFDSjtJQUNBLE9BQU9GO0FBQ1g7QUFDQTs7O0NBR0MsR0FDTSxTQUFTZSxtQkFDaEIsbUVBQW1FO0FBQ25FQyxpQkFBaUI7SUFDYixnRUFBZ0U7SUFDaEUsNEVBQTRFO0lBQzVFLE1BQU1DLGNBQWNkLE9BQU9lLGNBQWMsQ0FBQ0Y7SUFDMUMsTUFBTUcscUJBQXFCLE9BQU9ILGtCQUFrQkksT0FBTyxLQUFL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QU9BLENBQUNXLE9BQU80QyxJQUFJLENBQUNELFNBQVNXLE1BQU0sR0FBRzVELGVBQWVpQyxRQUFRZ0IsV0FBV2hCLFFBQVF2QyxtREFBU0EsRUFBRXNEO1FBQ3ZHO0lBQ0o7SUFDQUQsdUJBQXVCO1FBQ25CLE9BQU87WUFDSGhDLElBQUk7WUFDSkMsTUFBTTtZQUNOQyxJQUFJLElBQUksQ0FBQ1MsS0FBSztRQUNsQjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xvYWQvc2VyaWFsaXphYmxlLmpzP2VlMmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsga2V5VG9Kc29uLCBtYXBLZXlzIH0gZnJvbSBcIi4vbWFwX2tleXMuanNcIjtcbmZ1bmN0aW9uIHNoYWxsb3dDb3B5KG9iaikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KG9iaikgPyBbLi4ub2JqXSA6IHsgLi4ub2JqIH07XG59XG5mdW5jdGlvbiByZXBsYWNlU2VjcmV0cyhyb290LCBzZWNyZXRzTWFwKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gc2hhbGxvd0NvcHkocm9vdCk7XG4gICAgZm9yIChjb25zdCBbcGF0aCwgc2VjcmV0SWRdIG9mIE9iamVjdC5lbnRyaWVzKHNlY3JldHNNYXApKSB7XG4gICAgICAgIGNvbnN0IFtsYXN0LCAuLi5wYXJ0c1JldmVyc2VdID0gcGF0aC5zcGxpdChcIi5cIikucmV2ZXJzZSgpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgY3VycmVudCA9IHJlc3VsdDtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzUmV2ZXJzZS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50W3BhcnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRbcGFydF0gPSBzaGFsbG93Q29weShjdXJyZW50W3BhcnRdKTtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W3BhcnRdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50W2xhc3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGN1cnJlbnRbbGFzdF0gPSB7XG4gICAgICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzZWNyZXRcIixcbiAgICAgICAgICAgICAgICBpZDogW3NlY3JldElkXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogR2V0IGEgdW5pcXVlIG5hbWUgZm9yIHRoZSBtb2R1bGUsIHJhdGhlciB0aGFuIHBhcmVudCBjbGFzcyBpbXBsZW1lbnRhdGlvbnMuXG4gKiBTaG91bGQgbm90IGJlIHN1YmNsYXNzZWQsIHN1YmNsYXNzIGxjX25hbWUgYWJvdmUgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldF9sY191bmlxdWVfbmFtZShcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbnNlcmlhbGl6YWJsZUNsYXNzKSB7XG4gICAgLy8gXCJzdXBlclwiIGhlcmUgd291bGQgcmVmZXIgdG8gdGhlIHBhcmVudCBjbGFzcyBvZiBTZXJpYWxpemFibGUsXG4gICAgLy8gd2hlbiB3ZSB3YW50IHRoZSBwYXJlbnQgY2xhc3Mgb2YgdGhlIG1vZHVsZSBhY3R1YWxseSBjYWxsaW5nIHRoaXMgbWV0aG9kLlxuICAgIGNvbnN0IHBhcmVudENsYXNzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHNlcmlhbGl6YWJsZUNsYXNzKTtcbiAgICBjb25zdCBsY05hbWVJc1N1YmNsYXNzZWQgPSB0eXBlb2Ygc2VyaWFsaXphYmxlQ2xhc3MubGNfbmFtZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICh0eXBlb2YgcGFyZW50Q2xhc3MubGNfbmFtZSAhPT0gXCJmdW5jdGlvblwiIHx8XG4gICAgICAgICAgICBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lKCkgIT09IHBhcmVudENsYXNzLmxjX25hbWUoKSk7XG4gICAgaWYgKGxjTmFtZUlzU3ViY2xhc3NlZCkge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXphYmxlQ2xhc3MubGNfbmFtZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6YWJsZUNsYXNzLm5hbWU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNlcmlhbGl6YWJsZSB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHNlcmlhbGl6YWJsZS4gT3ZlcnJpZGUgdG8gcHJvdmlkZSBhbiBhbGlhcyBvclxuICAgICAqIHRvIHByZXNlcnZlIHRoZSBzZXJpYWxpemVkIG1vZHVsZSBuYW1lIGluIG1pbmlmaWVkIGVudmlyb25tZW50cy5cbiAgICAgKlxuICAgICAqIEltcGxlbWVudGVkIGFzIGEgc3RhdGljIG1ldGhvZCB0byBzdXBwb3J0IGxvYWRpbmcgbG9naWMuXG4gICAgICovXG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaW5hbCBzZXJpYWxpemVkIGlkZW50aWZpZXIgZm9yIHRoZSBtb2R1bGUuXG4gICAgICovXG4gICAgZ2V0IGxjX2lkKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4udGhpcy5sY19uYW1lc3BhY2UsXG4gICAgICAgICAgICBnZXRfbGNfdW5pcXVlX25hbWUodGhpcy5jb25zdHJ1Y3RvciksXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHNlY3JldHMsIHdoaWNoIHdpbGwgYmUgb21pdHRlZCBmcm9tIHNlcmlhbGl6YXRpb24uXG4gICAgICogS2V5cyBhcmUgcGF0aHMgdG8gdGhlIHNlY3JldCBpbiBjb25zdHJ1Y3RvciBhcmdzLCBlLmcuIFwiZm9vLmJhci5iYXpcIi5cbiAgICAgKiBWYWx1ZXMgYXJlIHRoZSBzZWNyZXQgaWRzLCB3aGljaCB3aWxsIGJlIHVzZWQgd2hlbiBkZXNlcmlhbGl6aW5nLlxuICAgICAqL1xuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiBhZGRpdGlvbmFsIGF0dHJpYnV0ZXMgdG8gbWVyZ2Ugd2l0aCBjb25zdHJ1Y3RvciBhcmdzLlxuICAgICAqIEtleXMgYXJlIHRoZSBhdHRyaWJ1dGUgbmFtZXMsIGUuZy4gXCJmb29cIi5cbiAgICAgKiBWYWx1ZXMgYXJlIHRoZSBhdHRyaWJ1dGUgdmFsdWVzLCB3aGljaCB3aWxsIGJlIHNlcmlhbGl6ZWQuXG4gICAgICogVGhlc2UgYXR0cmlidXRlcyBuZWVkIHRvIGJlIGFjY2VwdGVkIGJ5IHRoZSBjb25zdHJ1Y3RvciBhcyBhcmd1bWVudHMuXG4gICAgICovXG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIGFsaWFzZXMgZm9yIGNvbnN0cnVjdG9yIGFyZ3MuXG4gICAgICogS2V5cyBhcmUgdGhlIGF0dHJpYnV0ZSBuYW1lcywgZS5nLiBcImZvb1wiLlxuICAgICAqIFZhbHVlcyBhcmUgdGhlIGFsaWFzIHRoYXQgd2lsbCByZXBsYWNlIHRoZSBrZXkgaW4gc2VyaWFsaXphdGlvbi5cbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZWcuIG1ha2UgYXJndW1lbnQgbmFtZXMgbWF0Y2ggUHl0aG9uLlxuICAgICAqL1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIG1hbnVhbCBsaXN0IG9mIGtleXMgdGhhdCBzaG91bGQgYmUgc2VyaWFsaXplZC5cbiAgICAgKiBJZiBub3Qgb3ZlcnJpZGRlbiwgYWxsIGZpZWxkcyBwYXNzZWQgaW50byB0aGUgY29uc3RydWN0b3Igd2lsbCBiZSBzZXJpYWxpemVkLlxuICAgICAqL1xuICAgIGdldCBsY19zZXJpYWxpemFibGVfa2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3RydWN0b3Ioa3dhcmdzLCAuLi5fYXJncykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19rd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMubGNfc2VyaWFsaXphYmxlX2tleXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5sY19rd2FyZ3MgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoa3dhcmdzIHx8IHt9KS5maWx0ZXIoKFtrZXldKSA9PiB0aGlzLmxjX3NlcmlhbGl6YWJsZV9rZXlzPy5pbmNsdWRlcyhrZXkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxjX2t3YXJncyA9IGt3YXJncyA/PyB7fTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGlmICghdGhpcy5sY19zZXJpYWxpemFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNPTk5vdEltcGxlbWVudGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIHRoaXMubGNfa3dhcmdzIGluc3RhbmNlb2YgU2VyaWFsaXphYmxlIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5sY19rd2FyZ3MgIT09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodGhpcy5sY19rd2FyZ3MpKSB7XG4gICAgICAgICAgICAvLyBXZSBkbyBub3Qgc3VwcG9ydCBzZXJpYWxpemF0aW9uIG9mIGNsYXNzZXMgd2l0aCBhcmcgbm90IGEgUE9KT1xuICAgICAgICAgICAgLy8gSSdtIGF3YXJlIHRoZSBjaGVjayBhYm92ZSBpc24ndCBhcyBzdHJpY3QgYXMgaXQgY291bGQgYmVcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNPTk5vdEltcGxlbWVudGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWxpYXNlcyA9IHt9O1xuICAgICAgICBjb25zdCBzZWNyZXRzID0ge307XG4gICAgICAgIGNvbnN0IGt3YXJncyA9IE9iamVjdC5rZXlzKHRoaXMubGNfa3dhcmdzKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IGtleSBpbiB0aGlzID8gdGhpc1trZXldIDogdGhpcy5sY19rd2FyZ3Nba2V5XTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgLy8gZ2V0IHNlY3JldHMsIGF0dHJpYnV0ZXMgYW5kIGFsaWFzZXMgZnJvbSBhbGwgc3VwZXJjbGFzc2VzXG4gICAgICAgIGZvciAoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICBsZXQgY3VycmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKTsgY3VycmVudDsgY3VycmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjdXJyZW50KSkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhbGlhc2VzLCBSZWZsZWN0LmdldChjdXJyZW50LCBcImxjX2FsaWFzZXNcIiwgdGhpcykpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzZWNyZXRzLCBSZWZsZWN0LmdldChjdXJyZW50LCBcImxjX3NlY3JldHNcIiwgdGhpcykpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihrd2FyZ3MsIFJlZmxlY3QuZ2V0KGN1cnJlbnQsIFwibGNfYXR0cmlidXRlc1wiLCB0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5jbHVkZSBhbGwgc2VjcmV0cyB1c2VkLCBldmVuIGlmIG5vdCBpbiBrd2FyZ3MsXG4gICAgICAgIC8vIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCBzZW50aW5lbCB2YWx1ZSBpbiByZXBsYWNlU2VjcmV0c1xuICAgICAgICBPYmplY3Qua2V5cyhzZWNyZXRzKS5mb3JFYWNoKChrZXlQYXRoKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGxldCByZWFkID0gdGhpcztcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBsZXQgd3JpdGUgPSBrd2FyZ3M7XG4gICAgICAgICAgICBjb25zdCBbbGFzdCwgLi4ucGFydHNSZXZlcnNlXSA9IGtleVBhdGguc3BsaXQoXCIuXCIpLnJldmVyc2UoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHBhcnRzUmV2ZXJzZS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gcmVhZCkgfHwgcmVhZFtrZXldID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gd3JpdGUpIHx8IHdyaXRlW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlYWRba2V5XSA9PT0gXCJvYmplY3RcIiAmJiByZWFkW2tleV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVba2V5XSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmVhZFtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVba2V5XSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlYWQgPSByZWFkW2tleV07XG4gICAgICAgICAgICAgICAgd3JpdGUgPSB3cml0ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxhc3QgaW4gcmVhZCAmJiByZWFkW2xhc3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB3cml0ZVtsYXN0XSA9IHdyaXRlW2xhc3RdIHx8IHJlYWRbbGFzdF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICB0eXBlOiBcImNvbnN0cnVjdG9yXCIsXG4gICAgICAgICAgICBpZDogdGhpcy5sY19pZCxcbiAgICAgICAgICAgIGt3YXJnczogbWFwS2V5cyhPYmplY3Qua2V5cyhzZWNyZXRzKS5sZW5ndGggPyByZXBsYWNlU2VjcmV0cyhrd2FyZ3MsIHNlY3JldHMpIDoga3dhcmdzLCBrZXlUb0pzb24sIGFsaWFzZXMpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0pTT05Ob3RJbXBsZW1lbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgdHlwZTogXCJub3RfaW1wbGVtZW50ZWRcIixcbiAgICAgICAgICAgIGlkOiB0aGlzLmxjX2lkLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJrZXlUb0pzb24iLCJtYXBLZXlzIiwic2hhbGxvd0NvcHkiLCJvYmoiLCJBcnJheSIsImlzQXJyYXkiLCJyZXBsYWNlU2VjcmV0cyIsInJvb3QiLCJzZWNyZXRzTWFwIiwicmVzdWx0IiwicGF0aCIsInNlY3JldElkIiwiT2JqZWN0IiwiZW50cmllcyIsImxhc3QiLCJwYXJ0c1JldmVyc2UiLCJzcGxpdCIsInJldmVyc2UiLCJjdXJyZW50IiwicGFydCIsInVuZGVmaW5lZCIsImxjIiwidHlwZSIsImlkIiwiZ2V0X2xjX3VuaXF1ZV9uYW1lIiwic2VyaWFsaXphYmxlQ2xhc3MiLCJwYXJlbnRDbGFzcyIsImdldFByb3RvdHlwZU9mIiwibGNOYW1lSXNTdWJjbGFzc2VkIiwibGNfbmFtZSIsIm5hbWUiLCJTZXJpYWxpemFibGUiLCJsY19pZCIsImxjX25hbWVzcGFjZSIsImNvbnN0cnVjdG9yIiwibGNfc2VjcmV0cyIsImxjX2F0dHJpYnV0ZXMiLCJsY19hbGlhc2VzIiwibGNfc2VyaWFsaXphYmxlX2tleXMiLCJrd2FyZ3MiLCJfYXJncyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJsY19rd2FyZ3MiLCJmcm9tRW50cmllcyIsImZpbHRlciIsImtleSIsImluY2x1ZGVzIiwidG9KU09OIiwibGNfc2VyaWFsaXphYmxlIiwidG9KU09OTm90SW1wbGVtZW50ZWQiLCJhbGlhc2VzIiwic2VjcmV0cyIsImtleXMiLCJyZWR1Y2UiLCJhY2MiLCJhc3NpZ24iLCJSZWZsZWN0IiwiZ2V0IiwiZm9yRWFjaCIsImtleVBhdGgiLCJyZWFkIiwid3JpdGUiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/ai.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/ai.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* binding */ AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* binding */ AIMessageChunk),\n/* harmony export */   isAIMessage: () => (/* binding */ isAIMessage),\n/* harmony export */   isAIMessageChunk: () => (/* binding */ isAIMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/json.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n/**\n * Represents an AI message in a conversation.\n */ class AIMessage extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\"\n        };\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                additional_kwargs: kwargs ?? {}\n            };\n        } else {\n            initParams = fields;\n            const rawToolCalls = initParams.additional_kwargs?.tool_calls;\n            const toolCalls = initParams.tool_calls;\n            if (!(rawToolCalls == null) && rawToolCalls.length > 0 && (toolCalls === undefined || toolCalls.length === 0)) {\n                console.warn([\n                    \"New LangChain packages are available that more efficiently handle\",\n                    \"tool calling.\\n\\nPlease upgrade your packages to versions that set\",\n                    \"message tool calls. e.g., `yarn add @langchain/anthropic`,\",\n                    \"yarn add @langchain/openai`, etc.\"\n                ].join(\" \"));\n            }\n            try {\n                if (!(rawToolCalls == null) && toolCalls === undefined) {\n                    const [toolCalls, invalidToolCalls] = (0,_tool_js__WEBPACK_IMPORTED_MODULE_2__.defaultToolCallParser)(rawToolCalls);\n                    initParams.tool_calls = toolCalls ?? [];\n                    initParams.invalid_tool_calls = invalidToolCalls ?? [];\n                } else {\n                    initParams.tool_calls = initParams.tool_calls ?? [];\n                    initParams.invalid_tool_calls = initParams.invalid_tool_calls ?? [];\n                }\n            } catch (e) {\n                // Do nothing if parsing fails\n                initParams.tool_calls = [];\n                initParams.invalid_tool_calls = [];\n            }\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        /**\n         * If provided, token usage information associated with the message.\n         */ Object.defineProperty(this, \"usage_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (typeof initParams !== \"string\") {\n            this.tool_calls = initParams.tool_calls ?? this.tool_calls;\n            this.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n        }\n        this.usage_metadata = initParams.usage_metadata;\n    }\n    static lc_name() {\n        return \"AIMessage\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_calls: this.tool_calls,\n            invalid_tool_calls: this.invalid_tool_calls,\n            usage_metadata: this.usage_metadata\n        };\n    }\n}\nfunction isAIMessage(x) {\n    return x._getType() === \"ai\";\n}\nfunction isAIMessageChunk(x) {\n    return x._getType() === \"ai\";\n}\n/**\n * Represents a chunk of an AI message, which can be concatenated with\n * other AI message chunks.\n */ class AIMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk {\n    constructor(fields){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                tool_call_chunks: []\n            };\n        } else if (fields.tool_call_chunks === undefined || fields.tool_call_chunks.length === 0) {\n            initParams = {\n                ...fields,\n                tool_calls: fields.tool_calls ?? [],\n                invalid_tool_calls: [],\n                tool_call_chunks: [],\n                usage_metadata: fields.usage_metadata !== undefined ? fields.usage_metadata : undefined\n            };\n        } else {\n            const toolCallChunks = fields.tool_call_chunks ?? [];\n            const groupedToolCallChunks = toolCallChunks.reduce((acc, chunk)=>{\n                const matchedChunkIndex = acc.findIndex(([match])=>{\n                    // If chunk has an id and index, match if both are present\n                    if (\"id\" in chunk && chunk.id && \"index\" in chunk && chunk.index !== undefined) {\n                        return chunk.id === match.id && chunk.index === match.index;\n                    }\n                    // If chunk has an id, we match on id\n                    if (\"id\" in chunk && chunk.id) {\n                        return chunk.id === match.id;\n                    }\n                    // If chunk has an index, we match on index\n                    if (\"index\" in chunk && chunk.index !== undefined) {\n                        return chunk.index === match.index;\n                    }\n                    return false;\n                });\n                if (matchedChunkIndex !== -1) {\n                    acc[matchedChunkIndex].push(chunk);\n                } else {\n                    acc.push([\n                        chunk\n                    ]);\n                }\n                return acc;\n            }, []);\n            const toolCalls = [];\n            const invalidToolCalls = [];\n            for (const chunks of groupedToolCallChunks){\n                let parsedArgs = {};\n                const name = chunks[0]?.name ?? \"\";\n                const joinedArgs = chunks.map((c)=>c.args || \"\").join(\"\");\n                const argsStr = joinedArgs.length ? joinedArgs : \"{}\";\n                const id = chunks[0]?.id;\n                try {\n                    parsedArgs = (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson)(argsStr);\n                    if (!id || parsedArgs === null || typeof parsedArgs !== \"object\" || Array.isArray(parsedArgs)) {\n                        throw new Error(\"Malformed tool call chunk args.\");\n                    }\n                    toolCalls.push({\n                        name,\n                        args: parsedArgs,\n                        id,\n                        type: \"tool_call\"\n                    });\n                } catch (e) {\n                    invalidToolCalls.push({\n                        name,\n                        args: argsStr,\n                        id,\n                        error: \"Malformed args.\",\n                        type: \"invalid_tool_call\"\n                    });\n                }\n            }\n            initParams = {\n                ...fields,\n                tool_calls: toolCalls,\n                invalid_tool_calls: invalidToolCalls,\n                usage_metadata: fields.usage_metadata !== undefined ? fields.usage_metadata : undefined\n            };\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // Must redeclare tool call fields since there is no multiple inheritance in JS.\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tool_call_chunks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        /**\n         * If provided, token usage information associated with the message.\n         */ Object.defineProperty(this, \"usage_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_chunks = initParams.tool_call_chunks ?? this.tool_call_chunks;\n        this.tool_calls = initParams.tool_calls ?? this.tool_calls;\n        this.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n        this.usage_metadata = initParams.usage_metadata;\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\",\n            tool_call_chunks: \"tool_call_chunks\"\n        };\n    }\n    static lc_name() {\n        return \"AIMessageChunk\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_calls: this.tool_calls,\n            tool_call_chunks: this.tool_call_chunks,\n            invalid_tool_calls: this.invalid_tool_calls,\n            usage_metadata: this.usage_metadata\n        };\n    }\n    concat(chunk) {\n        const combinedFields = {\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            tool_call_chunks: [],\n            id: this.id ?? chunk.id\n        };\n        if (this.tool_call_chunks !== undefined || chunk.tool_call_chunks !== undefined) {\n            const rawToolCalls = (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists)(this.tool_call_chunks, chunk.tool_call_chunks);\n            if (rawToolCalls !== undefined && rawToolCalls.length > 0) {\n                combinedFields.tool_call_chunks = rawToolCalls;\n            }\n        }\n        if (this.usage_metadata !== undefined || chunk.usage_metadata !== undefined) {\n            const inputTokenDetails = {\n                ...(this.usage_metadata?.input_token_details?.audio !== undefined || chunk.usage_metadata?.input_token_details?.audio !== undefined) && {\n                    audio: (this.usage_metadata?.input_token_details?.audio ?? 0) + (chunk.usage_metadata?.input_token_details?.audio ?? 0)\n                },\n                ...(this.usage_metadata?.input_token_details?.cache_read !== undefined || chunk.usage_metadata?.input_token_details?.cache_read !== undefined) && {\n                    cache_read: (this.usage_metadata?.input_token_details?.cache_read ?? 0) + (chunk.usage_metadata?.input_token_details?.cache_read ?? 0)\n                },\n                ...(this.usage_metadata?.input_token_details?.cache_creation !== undefined || chunk.usage_metadata?.input_token_details?.cache_creation !== undefined) && {\n                    cache_creation: (this.usage_metadata?.input_token_details?.cache_creation ?? 0) + (chunk.usage_metadata?.input_token_details?.cache_creation ?? 0)\n                }\n            };\n            const outputTokenDetails = {\n                ...(this.usage_metadata?.output_token_details?.audio !== undefined || chunk.usage_metadata?.output_token_details?.audio !== undefined) && {\n                    audio: (this.usage_metadata?.output_token_details?.audio ?? 0) + (chunk.usage_metadata?.output_token_details?.audio ?? 0)\n                },\n                ...(this.usage_metadata?.output_token_details?.reasoning !== undefined || chunk.usage_metadata?.output_token_details?.reasoning !== undefined) && {\n                    reasoning: (this.usage_metadata?.output_token_details?.reasoning ?? 0) + (chunk.usage_metadata?.output_token_details?.reasoning ?? 0)\n                }\n            };\n            const left = this.usage_metadata ?? {\n                input_tokens: 0,\n                output_tokens: 0,\n                total_tokens: 0\n            };\n            const right = chunk.usage_metadata ?? {\n                input_tokens: 0,\n                output_tokens: 0,\n                total_tokens: 0\n            };\n            const usage_metadata = {\n                input_tokens: left.input_tokens + right.input_tokens,\n                output_tokens: left.output_tokens + right.output_tokens,\n                total_tokens: left.total_tokens + right.total_tokens,\n                // Do not include `input_token_details` / `output_token_details` keys in combined fields\n                // unless their values are defined.\n                ...Object.keys(inputTokenDetails).length > 0 && {\n                    input_token_details: inputTokenDetails\n                },\n                ...Object.keys(outputTokenDetails).length > 0 && {\n                    output_token_details: outputTokenDetails\n                }\n            };\n            combinedFields.usage_metadata = usage_metadata;\n        }\n        return new AIMessageChunk(combinedFields);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYWkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFvRDtBQUMrQztBQUNoRDtBQUNuRDs7Q0FFQyxHQUNNLE1BQU1PLGtCQUFrQk4saURBQVdBO0lBQ3RDLElBQUlPLGFBQWE7UUFDYiwrQ0FBK0M7UUFDL0MsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxVQUFVO1lBQ25CQyxZQUFZO1lBQ1pDLG9CQUFvQjtRQUN4QjtJQUNKO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxNQUFNLENBQUU7UUFDSixJQUFJQztRQUNKLElBQUksT0FBT0YsV0FBVyxVQUFVO1lBQzVCRSxhQUFhO2dCQUNUQyxTQUFTSDtnQkFDVEgsWUFBWSxFQUFFO2dCQUNkQyxvQkFBb0IsRUFBRTtnQkFDdEJNLG1CQUFtQkgsVUFBVSxDQUFDO1lBQ2xDO1FBQ0osT0FDSztZQUNEQyxhQUFhRjtZQUNiLE1BQU1LLGVBQWVILFdBQVdFLGlCQUFpQixFQUFFUDtZQUNuRCxNQUFNUyxZQUFZSixXQUFXTCxVQUFVO1lBQ3ZDLElBQUksQ0FBRVEsQ0FBQUEsZ0JBQWdCLElBQUcsS0FDckJBLGFBQWFFLE1BQU0sR0FBRyxLQUNyQkQsQ0FBQUEsY0FBY0UsYUFBYUYsVUFBVUMsTUFBTSxLQUFLLElBQUk7Z0JBQ3JERSxRQUFRQyxJQUFJLENBQUM7b0JBQ1Q7b0JBQ0E7b0JBQ0E7b0JBQ0E7aUJBQ0gsQ0FBQ0MsSUFBSSxDQUFDO1lBQ1g7WUFDQSxJQUFJO2dCQUNBLElBQUksQ0FBRU4sQ0FBQUEsZ0JBQWdCLElBQUcsS0FBTUMsY0FBY0UsV0FBVztvQkFDcEQsTUFBTSxDQUFDRixXQUFXTSxpQkFBaUIsR0FBR2xCLCtEQUFxQkEsQ0FBQ1c7b0JBQzVESCxXQUFXTCxVQUFVLEdBQUdTLGFBQWEsRUFBRTtvQkFDdkNKLFdBQVdKLGtCQUFrQixHQUFHYyxvQkFBb0IsRUFBRTtnQkFDMUQsT0FD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RCxJQUFJLENBQUNSLG9CQUFvQnRELE1BQU0sR0FBRyxLQUFLO29CQUM5Q3VELHNCQUFzQkQ7Z0JBQzFCLENBQUM7WUFDTDtZQUNBUCxlQUFlbEMsY0FBYyxHQUFHQTtRQUNwQztRQUNBLE9BQU8sSUFBSU8sZUFBZTJCO0lBQzlCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2FpLmpzPzljYWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VQYXJ0aWFsSnNvbiB9IGZyb20gXCIuLi91dGlscy9qc29uLmpzXCI7XG5pbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgX21lcmdlTGlzdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdFRvb2xDYWxsUGFyc2VyLCB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhbiBBSSBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQUlNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIubGNfYWxpYXNlcyxcbiAgICAgICAgICAgIHRvb2xfY2FsbHM6IFwidG9vbF9jYWxsc1wiLFxuICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBcImludmFsaWRfdG9vbF9jYWxsc1wiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIGt3YXJncykge1xuICAgICAgICBsZXQgaW5pdFBhcmFtcztcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGluaXRQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgY29udGVudDogZmllbGRzLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IGt3YXJncyA/PyB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbml0UGFyYW1zID0gZmllbGRzO1xuICAgICAgICAgICAgY29uc3QgcmF3VG9vbENhbGxzID0gaW5pdFBhcmFtcy5hZGRpdGlvbmFsX2t3YXJncz8udG9vbF9jYWxscztcbiAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxscyA9IGluaXRQYXJhbXMudG9vbF9jYWxscztcbiAgICAgICAgICAgIGlmICghKHJhd1Rvb2xDYWxscyA9PSBudWxsKSAmJlxuICAgICAgICAgICAgICAgIHJhd1Rvb2xDYWxscy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgKHRvb2xDYWxscyA9PT0gdW5kZWZpbmVkIHx8IHRvb2xDYWxscy5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFtcbiAgICAgICAgICAgICAgICAgICAgXCJOZXcgTGFuZ0NoYWluIHBhY2thZ2VzIGFyZSBhdmFpbGFibGUgdGhhdCBtb3JlIGVmZmljaWVudGx5IGhhbmRsZVwiLFxuICAgICAgICAgICAgICAgICAgICBcInRvb2wgY2FsbGluZy5cXG5cXG5QbGVhc2UgdXBncmFkZSB5b3VyIHBhY2thZ2VzIHRvIHZlcnNpb25zIHRoYXQgc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwibWVzc2FnZSB0b29sIGNhbGxzLiBlLmcuLCBgeWFybiBhZGQgQGxhbmdjaGFpbi9hbnRocm9waWNgLFwiLFxuICAgICAgICAgICAgICAgICAgICBcInlhcm4gYWRkIEBsYW5nY2hhaW4vb3BlbmFpYCwgZXRjLlwiLFxuICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIShyYXdUb29sQ2FsbHMgPT0gbnVsbCkgJiYgdG9vbENhbGxzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3Rvb2xDYWxscywgaW52YWxpZFRvb2xDYWxsc10gPSBkZWZhdWx0VG9vbENhbGxQYXJzZXIocmF3VG9vbENhbGxzKTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdFBhcmFtcy50b29sX2NhbGxzID0gdG9vbENhbGxzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA9IGludmFsaWRUb29sQ2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPSBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgICAgIGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID0gaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHBhcnNpbmcgZmFpbHNcbiAgICAgICAgICAgICAgICBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFNhZGx5LCBUeXBlU2NyaXB0IG9ubHkgYWxsb3dzIHN1cGVyKCkgY2FsbHMgYXQgcm9vdCBpZiB0aGUgY2xhc3MgaGFzXG4gICAgICAgIC8vIHByb3BlcnRpZXMgd2l0aCBpbml0aWFsaXplcnMsIHNvIHdlIGhhdmUgdG8gY2hlY2sgdHlwZXMgdHdpY2UuXG4gICAgICAgIHN1cGVyKGluaXRQYXJhbXMpO1xuICAgICAgICAvLyBUaGVzZSBhcmUgdHlwZWQgYXMgb3B0aW9uYWwgdG8gYXZvaWQgYnJlYWtpbmcgY2hhbmdlcyBhbmQgYWxsb3cgZm9yIGNhc3RpbmdcbiAgICAgICAgLy8gZnJvbSBCYXNlTWVzc2FnZS5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbF9jYWxsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImludmFsaWRfdG9vbF9jYWxsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBwcm92aWRlZCwgdG9rZW4gdXNhZ2UgaW5mb3JtYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBtZXNzYWdlLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidXNhZ2VfbWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbml0UGFyYW1zICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2xfY2FsbHMgPSBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPz8gdGhpcy50b29sX2NhbGxzO1xuICAgICAgICAgICAgdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPVxuICAgICAgICAgICAgICAgIGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID8/IHRoaXMuaW52YWxpZF90b29sX2NhbGxzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXNhZ2VfbWV0YWRhdGEgPSBpbml0UGFyYW1zLnVzYWdlX21ldGFkYXRhO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQUlNZXNzYWdlXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJhaVwiO1xuICAgIH1cbiAgICBnZXQgX3ByaW50YWJsZUZpZWxkcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLl9wcmludGFibGVGaWVsZHMsXG4gICAgICAgICAgICB0b29sX2NhbGxzOiB0aGlzLnRvb2xfY2FsbHMsXG4gICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IHRoaXMuaW52YWxpZF90b29sX2NhbGxzLFxuICAgICAgICAgICAgdXNhZ2VfbWV0YWRhdGE6IHRoaXMudXNhZ2VfbWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQUlNZXNzYWdlKHgpIHtcbiAgICByZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcImFpXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBSU1lc3NhZ2VDaHVuayh4KSB7XG4gICAgcmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJhaVwiO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYW4gQUkgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBBSSBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFJTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGxldCBpbml0UGFyYW1zO1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaW5pdFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZmllbGRzLnRvb2xfY2FsbF9jaHVua3MgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgZmllbGRzLnRvb2xfY2FsbF9jaHVua3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBpbml0UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiBmaWVsZHMudG9vbF9jYWxscyA/PyBbXSxcbiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtdLFxuICAgICAgICAgICAgICAgIHVzYWdlX21ldGFkYXRhOiBmaWVsZHMudXNhZ2VfbWV0YWRhdGEgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IGZpZWxkcy51c2FnZV9tZXRhZGF0YVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0b29sQ2FsbENodW5rcyA9IGZpZWxkcy50b29sX2NhbGxfY2h1bmtzID8/IFtdO1xuICAgICAgICAgICAgY29uc3QgZ3JvdXBlZFRvb2xDYWxsQ2h1bmtzID0gdG9vbENhbGxDaHVua3MucmVkdWNlKChhY2MsIGNodW5rKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlZENodW5rSW5kZXggPSBhY2MuZmluZEluZGV4KChbbWF0Y2hdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGNodW5rIGhhcyBhbiBpZCBhbmQgaW5kZXgsIG1hdGNoIGlmIGJvdGggYXJlIHByZXNlbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiaWRcIiBpbiBjaHVuayAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuaWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaW5kZXhcIiBpbiBjaHVuayAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNodW5rLmlkID09PSBtYXRjaC5pZCAmJiBjaHVuay5pbmRleCA9PT0gbWF0Y2guaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgY2h1bmsgaGFzIGFuIGlkLCB3ZSBtYXRjaCBvbiBpZFxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJpZFwiIGluIGNodW5rICYmIGNodW5rLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2h1bmsuaWQgPT09IG1hdGNoLmlkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGNodW5rIGhhcyBhbiBpbmRleCwgd2UgbWF0Y2ggb24gaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiaW5kZXhcIiBpbiBjaHVuayAmJiBjaHVuay5pbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2h1bmsuaW5kZXggPT09IG1hdGNoLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZENodW5rSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY1ttYXRjaGVkQ2h1bmtJbmRleF0ucHVzaChjaHVuayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhY2MucHVzaChbY2h1bmtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH0sIFtdKTtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxscyA9IFtdO1xuICAgICAgICAgICAgY29uc3QgaW52YWxpZFRvb2xDYWxscyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjaHVua3Mgb2YgZ3JvdXBlZFRvb2xDYWxsQ2h1bmtzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB7fTtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gY2h1bmtzWzBdPy5uYW1lID8/IFwiXCI7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9pbmVkQXJncyA9IGNodW5rcy5tYXAoKGMpID0+IGMuYXJncyB8fCBcIlwiKS5qb2luKFwiXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3NTdHIgPSBqb2luZWRBcmdzLmxlbmd0aCA/IGpvaW5lZEFyZ3MgOiBcInt9XCI7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBjaHVua3NbMF0/LmlkO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBwYXJzZVBhcnRpYWxKc29uKGFyZ3NTdHIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlkIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcGFyc2VkQXJncyAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShwYXJzZWRBcmdzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFsZm9ybWVkIHRvb2wgY2FsbCBjaHVuayBhcmdzLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogcGFyc2VkQXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRUb29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogYXJnc1N0cixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFwiTWFsZm9ybWVkIGFyZ3MuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImludmFsaWRfdG9vbF9jYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluaXRQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IHRvb2xDYWxscyxcbiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IGludmFsaWRUb29sQ2FsbHMsXG4gICAgICAgICAgICAgICAgdXNhZ2VfbWV0YWRhdGE6IGZpZWxkcy51c2FnZV9tZXRhZGF0YSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gZmllbGRzLnVzYWdlX21ldGFkYXRhXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTYWRseSwgVHlwZVNjcmlwdCBvbmx5IGFsbG93cyBzdXBlcigpIGNhbGxzIGF0IHJvb3QgaWYgdGhlIGNsYXNzIGhhc1xuICAgICAgICAvLyBwcm9wZXJ0aWVzIHdpdGggaW5pdGlhbGl6ZXJzLCBzbyB3ZSBoYXZlIHRvIGNoZWNrIHR5cGVzIHR3aWNlLlxuICAgICAgICBzdXBlcihpbml0UGFyYW1zKTtcbiAgICAgICAgLy8gTXVzdCByZWRlY2xhcmUgdG9vbCBjYWxsIGZpZWxkcyBzaW5jZSB0aGVyZSBpcyBubyBtdWx0aXBsZSBpbmhlcml0YW5jZSBpbiBKUy5cbiAgICAgICAgLy8gVGhlc2UgYXJlIHR5cGVkIGFzIG9wdGlvbmFsIHRvIGF2b2lkIGJyZWFraW5nIGNoYW5nZXMgYW5kIGFsbG93IGZvciBjYXN0aW5nXG4gICAgICAgIC8vIGZyb20gQmFzZU1lc3NhZ2UuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxfY2h1bmtzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHByb3ZpZGVkLCB0b2tlbiB1c2FnZSBpbmZvcm1hdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIG1lc3NhZ2UuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ1c2FnZV9tZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRvb2xfY2FsbF9jaHVua3MgPVxuICAgICAgICAgICAgaW5pdFBhcmFtcy50b29sX2NhbGxfY2h1bmtzID8/IHRoaXMudG9vbF9jYWxsX2NodW5rcztcbiAgICAgICAgdGhpcy50b29sX2NhbGxzID0gaW5pdFBhcmFtcy50b29sX2NhbGxzID8/IHRoaXMudG9vbF9jYWxscztcbiAgICAgICAgdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPVxuICAgICAgICAgICAgaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHM7XG4gICAgICAgIHRoaXMudXNhZ2VfbWV0YWRhdGEgPSBpbml0UGFyYW1zLnVzYWdlX21ldGFkYXRhO1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgLy8gZXhjbHVkZSBzbmFrZSBjYXNlIGNvbnZlcnNpb24gdG8gcGFzY2FsIGNhc2VcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLmxjX2FsaWFzZXMsXG4gICAgICAgICAgICB0b29sX2NhbGxzOiBcInRvb2xfY2FsbHNcIixcbiAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIixcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFwidG9vbF9jYWxsX2NodW5rc1wiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQUlNZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgfVxuICAgIGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIuX3ByaW50YWJsZUZpZWxkcyxcbiAgICAgICAgICAgIHRvb2xfY2FsbHM6IHRoaXMudG9vbF9jYWxscyxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IHRoaXMudG9vbF9jYWxsX2NodW5rcyxcbiAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMsXG4gICAgICAgICAgICB1c2FnZV9tZXRhZGF0YTogdGhpcy51c2FnZV9tZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIGNvbnN0IGNvbWJpbmVkRmllbGRzID0ge1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtdLFxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgPz8gY2h1bmsuaWQsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnRvb2xfY2FsbF9jaHVua3MgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgY2h1bmsudG9vbF9jYWxsX2NodW5rcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCByYXdUb29sQ2FsbHMgPSBfbWVyZ2VMaXN0cyh0aGlzLnRvb2xfY2FsbF9jaHVua3MsIGNodW5rLnRvb2xfY2FsbF9jaHVua3MpO1xuICAgICAgICAgICAgaWYgKHJhd1Rvb2xDYWxscyAhPT0gdW5kZWZpbmVkICYmIHJhd1Rvb2xDYWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29tYmluZWRGaWVsZHMudG9vbF9jYWxsX2NodW5rcyA9IHJhd1Rvb2xDYWxscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy51c2FnZV9tZXRhZGF0YSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBjaHVuay51c2FnZV9tZXRhZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VuRGV0YWlscyA9IHtcbiAgICAgICAgICAgICAgICAuLi4oKHRoaXMudXNhZ2VfbWV0YWRhdGE/LmlucHV0X3Rva2VuX2RldGFpbHM/LmF1ZGlvICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsudXNhZ2VfbWV0YWRhdGE/LmlucHV0X3Rva2VuX2RldGFpbHM/LmF1ZGlvICE9PSB1bmRlZmluZWQpICYmIHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW86ICh0aGlzLnVzYWdlX21ldGFkYXRhPy5pbnB1dF90b2tlbl9kZXRhaWxzPy5hdWRpbyA/PyAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2h1bmsudXNhZ2VfbWV0YWRhdGE/LmlucHV0X3Rva2VuX2RldGFpbHM/LmF1ZGlvID8/IDApLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIC4uLigodGhpcy51c2FnZV9tZXRhZGF0YT8uaW5wdXRfdG9rZW5fZGV0YWlscz8uY2FjaGVfcmVhZCAhPT1cbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgIGNodW5rLnVzYWdlX21ldGFkYXRhPy5pbnB1dF90b2tlbl9kZXRhaWxzPy5jYWNoZV9yZWFkICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkKSAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlX3JlYWQ6ICh0aGlzLnVzYWdlX21ldGFkYXRhPy5pbnB1dF90b2tlbl9kZXRhaWxzPy5jYWNoZV9yZWFkID8/IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChjaHVuay51c2FnZV9tZXRhZGF0YT8uaW5wdXRfdG9rZW5fZGV0YWlscz8uY2FjaGVfcmVhZCA/PyAwKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAuLi4oKHRoaXMudXNhZ2VfbWV0YWRhdGE/LmlucHV0X3Rva2VuX2RldGFpbHM/LmNhY2hlX2NyZWF0aW9uICE9PVxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsudXNhZ2VfbWV0YWRhdGE/LmlucHV0X3Rva2VuX2RldGFpbHM/LmNhY2hlX2NyZWF0aW9uICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkKSAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlX2NyZWF0aW9uOiAodGhpcy51c2FnZV9tZXRhZGF0YT8uaW5wdXRfdG9rZW5fZGV0YWlscz8uY2FjaGVfY3JlYXRpb24gPz8gMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKGNodW5rLnVzYWdlX21ldGFkYXRhPy5pbnB1dF90b2tlbl9kZXRhaWxzPy5jYWNoZV9jcmVhdGlvbiA/PyAwKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRUb2tlbkRldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgLi4uKCh0aGlzLnVzYWdlX21ldGFkYXRhPy5vdXRwdXRfdG9rZW5fZGV0YWlscz8uYXVkaW8gIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICBjaHVuay51c2FnZV9tZXRhZGF0YT8ub3V0cHV0X3Rva2VuX2RldGFpbHM/LmF1ZGlvICE9PSB1bmRlZmluZWQpICYmIHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW86ICh0aGlzLnVzYWdlX21ldGFkYXRhPy5vdXRwdXRfdG9rZW5fZGV0YWlscz8uYXVkaW8gPz8gMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKGNodW5rLnVzYWdlX21ldGFkYXRhPy5vdXRwdXRfdG9rZW5fZGV0YWlscz8uYXVkaW8gPz8gMCksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgLi4uKCh0aGlzLnVzYWdlX21ldGFkYXRhPy5vdXRwdXRfdG9rZW5fZGV0YWlscz8ucmVhc29uaW5nICE9PVxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsudXNhZ2VfbWV0YWRhdGE/Lm91dHB1dF90b2tlbl9kZXRhaWxzPy5yZWFzb25pbmcgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQpICYmIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nOiAodGhpcy51c2FnZV9tZXRhZGF0YT8ub3V0cHV0X3Rva2VuX2RldGFpbHM/LnJlYXNvbmluZyA/PyAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2h1bmsudXNhZ2VfbWV0YWRhdGE/Lm91dHB1dF90b2tlbl9kZXRhaWxzPy5yZWFzb25pbmcgPz8gMCksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMudXNhZ2VfbWV0YWRhdGEgPz8ge1xuICAgICAgICAgICAgICAgIGlucHV0X3Rva2VuczogMCxcbiAgICAgICAgICAgICAgICBvdXRwdXRfdG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgIHRvdGFsX3Rva2VuczogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IGNodW5rLnVzYWdlX21ldGFkYXRhID8/IHtcbiAgICAgICAgICAgICAgICBpbnB1dF90b2tlbnM6IDAsXG4gICAgICAgICAgICAgICAgb3V0cHV0X3Rva2VuczogMCxcbiAgICAgICAgICAgICAgICB0b3RhbF90b2tlbnM6IDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgdXNhZ2VfbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5wdXRfdG9rZW5zOiBsZWZ0LmlucHV0X3Rva2VucyArIHJpZ2h0LmlucHV0X3Rva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRfdG9rZW5zOiBsZWZ0Lm91dHB1dF90b2tlbnMgKyByaWdodC5vdXRwdXRfdG9rZW5zLFxuICAgICAgICAgICAgICAgIHRvdGFsX3Rva2VuczogbGVmdC50b3RhbF90b2tlbnMgKyByaWdodC50b3RhbF90b2tlbnMsXG4gICAgICAgICAgICAgICAgLy8gRG8gbm90IGluY2x1ZGUgYGlucHV0X3Rva2VuX2RldGFpbHNgIC8gYG91dHB1dF90b2tlbl9kZXRhaWxzYCBrZXlzIGluIGNvbWJpbmVkIGZpZWxkc1xuICAgICAgICAgICAgICAgIC8vIHVubGVzcyB0aGVpciB2YWx1ZXMgYXJlIGRlZmluZWQuXG4gICAgICAgICAgICAgICAgLi4uKE9iamVjdC5rZXlzKGlucHV0VG9rZW5EZXRhaWxzKS5sZW5ndGggPiAwICYmIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRfdG9rZW5fZGV0YWlsczogaW5wdXRUb2tlbkRldGFpbHMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgLi4uKE9iamVjdC5rZXlzKG91dHB1dFRva2VuRGV0YWlscykubGVuZ3RoID4gMCAmJiB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dF90b2tlbl9kZXRhaWxzOiBvdXRwdXRUb2tlbkRldGFpbHMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29tYmluZWRGaWVsZHMudXNhZ2VfbWV0YWRhdGEgPSB1c2FnZV9tZXRhZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZUNodW5rKGNvbWJpbmVkRmllbGRzKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsicGFyc2VQYXJ0aWFsSnNvbiIsIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiX21lcmdlTGlzdHMiLCJkZWZhdWx0VG9vbENhbGxQYXJzZXIiLCJBSU1lc3NhZ2UiLCJsY19hbGlhc2VzIiwidG9vbF9jYWxscyIsImludmFsaWRfdG9vbF9jYWxscyIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwia3dhcmdzIiwiaW5pdFBhcmFtcyIsImNvbnRlbnQiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJhd1Rvb2xDYWxscyIsInRvb2xDYWxscyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImNvbnNvbGUiLCJ3YXJuIiwiam9pbiIsImludmFsaWRUb29sQ2FsbHMiLCJlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInVzYWdlX21ldGFkYXRhIiwibGNfbmFtZSIsIl9nZXRUeXBlIiwiX3ByaW50YWJsZUZpZWxkcyIsImlzQUlNZXNzYWdlIiwieCIsImlzQUlNZXNzYWdlQ2h1bmsiLCJBSU1lc3NhZ2VDaHVuayIsInRvb2xfY2FsbF9jaHVua3MiLCJ0b29sQ2FsbENodW5rcyIsImdyb3VwZWRUb29sQ2FsbENodW5rcyIsInJlZHVjZSIsImFjYyIsImNodW5rIiwibWF0Y2hlZENodW5rSW5kZXgiLCJmaW5kSW5kZXgiLCJtYXRjaCIsImlkIiwiaW5kZXgiLCJwdXNoIiwiY2h1bmtzIiwicGFyc2VkQXJncyIsIm5hbWUiLCJqb2luZWRBcmdzIiwibWFwIiwiYyIsImFyZ3MiLCJhcmdzU3RyIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJ0eXBlIiwiZXJyb3IiLCJjb25jYXQiLCJjb21iaW5lZEZpZWxkcyIsInJlc3BvbnNlX21ldGFkYXRhIiwiaW5wdXRUb2tlbkRldGFpbHMiLCJpbnB1dF90b2tlbl9kZXRhaWxzIiwiYXVkaW8iLCJjYWNoZV9yZWFkIiwiY2FjaGVfY3JlYXRpb24iLCJvdXRwdXRUb2tlbkRldGFpbHMiLCJvdXRwdXRfdG9rZW5fZGV0YWlscyIsInJlYXNvbmluZyIsImxlZnQiLCJpbnB1dF90b2tlbnMiLCJvdXRwdXRfdG9rZW5zIiwidG90YWxfdG9rZW5zIiwicmlnaHQiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/base.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/base.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseMessage: () => (/* binding */ BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* binding */ BaseMessageChunk),\n/* harmony export */   _isMessageFieldWithRole: () => (/* binding */ _isMessageFieldWithRole),\n/* harmony export */   _mergeDicts: () => (/* binding */ _mergeDicts),\n/* harmony export */   _mergeLists: () => (/* binding */ _mergeLists),\n/* harmony export */   _mergeObj: () => (/* binding */ _mergeObj),\n/* harmony export */   _mergeStatus: () => (/* binding */ _mergeStatus),\n/* harmony export */   isBaseMessage: () => (/* binding */ isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* binding */ isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* binding */ isOpenAIToolCallArray),\n/* harmony export */   mergeContent: () => (/* binding */ mergeContent)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _content_blocks_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./content_blocks.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/content_blocks.js\");\n\n\nfunction mergeContent(firstContent, secondContent) {\n    // If first content is a string\n    if (typeof firstContent === \"string\") {\n        if (firstContent === \"\") {\n            return secondContent;\n        }\n        if (typeof secondContent === \"string\") {\n            return firstContent + secondContent;\n        } else if (Array.isArray(secondContent) && secondContent.some((c)=>(0,_content_blocks_js__WEBPACK_IMPORTED_MODULE_1__.isDataContentBlock)(c))) {\n            return [\n                {\n                    type: \"text\",\n                    source_type: \"text\",\n                    text: firstContent\n                },\n                ...secondContent\n            ];\n        } else {\n            return [\n                {\n                    type: \"text\",\n                    text: firstContent\n                },\n                ...secondContent\n            ];\n        }\n    // If both are arrays\n    } else if (Array.isArray(secondContent)) {\n        return _mergeLists(firstContent, secondContent) ?? [\n            ...firstContent,\n            ...secondContent\n        ];\n    } else {\n        if (secondContent === \"\") {\n            return firstContent;\n        } else if (Array.isArray(firstContent) && firstContent.some((c)=>(0,_content_blocks_js__WEBPACK_IMPORTED_MODULE_1__.isDataContentBlock)(c))) {\n            return [\n                ...firstContent,\n                {\n                    type: \"file\",\n                    source_type: \"text\",\n                    text: secondContent\n                }\n            ];\n        } else {\n            return [\n                ...firstContent,\n                {\n                    type: \"text\",\n                    text: secondContent\n                }\n            ];\n        }\n    }\n}\n/**\n * 'Merge' two statuses. If either value passed is 'error', it will return 'error'. Else\n * it will return 'success'.\n *\n * @param {\"success\" | \"error\" | undefined} left The existing value to 'merge' with the new value.\n * @param {\"success\" | \"error\" | undefined} right The new value to 'merge' with the existing value\n * @returns {\"success\" | \"error\"} The 'merged' value.\n */ function _mergeStatus(left, right) {\n    if (left === \"error\" || right === \"error\") {\n        return \"error\";\n    }\n    return \"success\";\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction stringifyWithDepthLimit(obj, depthLimit) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function helper(obj, currentDepth) {\n        if (typeof obj !== \"object\" || obj === null || obj === undefined) {\n            return obj;\n        }\n        if (currentDepth >= depthLimit) {\n            if (Array.isArray(obj)) {\n                return \"[Array]\";\n            }\n            return \"[Object]\";\n        }\n        if (Array.isArray(obj)) {\n            return obj.map((item)=>helper(item, currentDepth + 1));\n        }\n        const result = {};\n        for (const key of Object.keys(obj)){\n            result[key] = helper(obj[key], currentDepth + 1);\n        }\n        return result;\n    }\n    return JSON.stringify(helper(obj, 0), null, 2);\n}\n/**\n * Base class for all types of messages in a conversation. It includes\n * properties like `content`, `name`, and `additional_kwargs`. It also\n * includes methods like `toDict()` and `_getType()`.\n */ class BaseMessage extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            additional_kwargs: \"additional_kwargs\",\n            response_metadata: \"response_metadata\"\n        };\n    }\n    /**\n     * Get text content of the message.\n     */ get text() {\n        if (typeof this.content === \"string\") {\n            return this.content;\n        }\n        if (!Array.isArray(this.content)) return \"\";\n        return this.content.map((c)=>{\n            if (typeof c === \"string\") return c;\n            if (c.type === \"text\") return c.text;\n            return \"\";\n        }).join(\"\");\n    }\n    /** The type of the message. */ getType() {\n        return this._getType();\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                content: fields,\n                additional_kwargs: kwargs,\n                response_metadata: {}\n            };\n        }\n        // Make sure the default value for additional_kwargs is passed into super() for serialization\n        if (!fields.additional_kwargs) {\n            // eslint-disable-next-line no-param-reassign\n            fields.additional_kwargs = {};\n        }\n        if (!fields.response_metadata) {\n            // eslint-disable-next-line no-param-reassign\n            fields.response_metadata = {};\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"messages\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /** The content of the message. */ Object.defineProperty(this, \"content\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** The name of the message sender in a multi-user chat. */ Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Additional keyword arguments */ Object.defineProperty(this, \"additional_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Response metadata. For example: response headers, logprobs, token counts, model name. */ Object.defineProperty(this, \"response_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * An optional unique identifier for the message. This should ideally be\n         * provided by the provider/model which created the message.\n         */ Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.content = fields.content;\n        this.additional_kwargs = fields.additional_kwargs;\n        this.response_metadata = fields.response_metadata;\n        this.id = fields.id;\n    }\n    toDict() {\n        return {\n            type: this._getType(),\n            data: this.toJSON().kwargs\n        };\n    }\n    static lc_name() {\n        return \"BaseMessage\";\n    }\n    // Can't be protected for silly reasons\n    get _printableFields() {\n        return {\n            id: this.id,\n            content: this.content,\n            name: this.name,\n            additional_kwargs: this.additional_kwargs,\n            response_metadata: this.response_metadata\n        };\n    }\n    // this private method is used to update the ID for the runtime\n    // value as well as in lc_kwargs for serialisation\n    _updateId(value) {\n        this.id = value;\n        // lc_attributes wouldn't work here, because jest compares the\n        // whole object\n        this.lc_kwargs.id = value;\n    }\n    get [Symbol.toStringTag]() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return this.constructor.lc_name();\n    }\n    // Override the default behavior of console.log\n    [Symbol.for(\"nodejs.util.inspect.custom\")](depth) {\n        if (depth === null) {\n            return this;\n        }\n        const printable = stringifyWithDepthLimit(this._printableFields, Math.max(4, depth));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return `${this.constructor.lc_name()} ${printable}`;\n    }\n}\nfunction isOpenAIToolCallArray(value) {\n    return Array.isArray(value) && value.every((v)=>typeof v.index === \"number\");\n}\nfunction _mergeDicts(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nleft, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nright) {\n    const merged = {\n        ...left\n    };\n    for (const [key, value] of Object.entries(right)){\n        if (merged[key] == null) {\n            merged[key] = value;\n        } else if (value == null) {\n            continue;\n        } else if (typeof merged[key] !== typeof value || Array.isArray(merged[key]) !== Array.isArray(value)) {\n            throw new Error(`field[${key}] already exists in the message chunk, but with a different type.`);\n        } else if (typeof merged[key] === \"string\") {\n            if (key === \"type\") {\n                continue;\n            } else if ([\n                \"id\",\n                \"name\",\n                \"output_version\",\n                \"model_provider\"\n            ].includes(key)) {\n                // Keep the incoming value for these fields\n                merged[key] = value;\n            } else {\n                merged[key] += value;\n            }\n        } else if (typeof merged[key] === \"object\" && !Array.isArray(merged[key])) {\n            merged[key] = _mergeDicts(merged[key], value);\n        } else if (Array.isArray(merged[key])) {\n            merged[key] = _mergeLists(merged[key], value);\n        } else if (merged[key] === value) {\n            continue;\n        } else {\n            console.warn(`field[${key}] already exists in this message chunk and value has unsupported type.`);\n        }\n    }\n    return merged;\n}\nfunction _mergeLists(left, right) {\n    if (left === undefined && right === undefined) {\n        return undefined;\n    } else if (left === undefined || right === undefined) {\n        return left || right;\n    } else {\n        const merged = [\n            ...left\n        ];\n        for (const item of right){\n            if (typeof item === \"object\" && item !== null && \"index\" in item && typeof item.index === \"number\") {\n                const toMerge = merged.findIndex((leftItem)=>{\n                    const isObject = typeof leftItem === \"object\";\n                    const indiciesMatch = \"index\" in leftItem && leftItem.index === item.index;\n                    const idsMatch = \"id\" in leftItem && \"id\" in item && leftItem?.id === item?.id;\n                    const eitherItemMissingID = !(\"id\" in leftItem) || !leftItem?.id || !(\"id\" in item) || !item?.id;\n                    return isObject && indiciesMatch && (idsMatch || eitherItemMissingID);\n                });\n                if (toMerge !== -1 && typeof merged[toMerge] === \"object\" && merged[toMerge] !== null) {\n                    merged[toMerge] = _mergeDicts(merged[toMerge], item);\n                } else {\n                    merged.push(item);\n                }\n            } else if (typeof item === \"object\" && item !== null && \"text\" in item && item.text === \"\") {\n                continue;\n            } else {\n                merged.push(item);\n            }\n        }\n        return merged;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _mergeObj(left, right) {\n    if (!left && !right) {\n        throw new Error(\"Cannot merge two undefined objects.\");\n    }\n    if (!left || !right) {\n        return left || right;\n    } else if (typeof left !== typeof right) {\n        throw new Error(`Cannot merge objects of different types.\\nLeft ${typeof left}\\nRight ${typeof right}`);\n    } else if (typeof left === \"string\" && typeof right === \"string\") {\n        return left + right;\n    } else if (Array.isArray(left) && Array.isArray(right)) {\n        return _mergeLists(left, right);\n    } else if (typeof left === \"object\" && typeof right === \"object\") {\n        return _mergeDicts(left, right);\n    } else if (left === right) {\n        return left;\n    } else {\n        throw new Error(`Can not merge objects of different types.\\nLeft ${left}\\nRight ${right}`);\n    }\n}\n/**\n * Represents a chunk of a message, which can be concatenated with other\n * message chunks. It includes a method `_merge_kwargs_dict()` for merging\n * additional keyword arguments from another `BaseMessageChunk` into this\n * one. It also overrides the `__add__()` method to support concatenation\n * of `BaseMessageChunk` instances.\n */ class BaseMessageChunk extends BaseMessage {\n}\nfunction _isMessageFieldWithRole(x) {\n    return typeof x.role === \"string\";\n}\nfunction isBaseMessage(messageLike) {\n    return typeof messageLike?._getType === \"function\";\n}\nfunction isBaseMessageChunk(messageLike) {\n    return isBaseMessage(messageLike) && typeof messageLike.concat === \"function\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQ0c7QUFDbkQsU0FBU0UsYUFBYUMsWUFBWSxFQUFFQyxhQUFhO0lBQ3BELCtCQUErQjtJQUMvQixJQUFJLE9BQU9ELGlCQUFpQixVQUFVO1FBQ2xDLElBQUlBLGlCQUFpQixJQUFJO1lBQ3JCLE9BQU9DO1FBQ1g7UUFDQSxJQUFJLE9BQU9BLGtCQUFrQixVQUFVO1lBQ25DLE9BQU9ELGVBQWVDO1FBQzFCLE9BQ0ssSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixrQkFDbkJBLGNBQWNHLElBQUksQ0FBQyxDQUFDQyxJQUFNUCxzRUFBa0JBLENBQUNPLEtBQUs7WUFDbEQsT0FBTztnQkFDSDtvQkFDSUMsTUFBTTtvQkFDTkMsYUFBYTtvQkFDYkMsTUFBTVI7Z0JBQ1Y7bUJBQ0dDO2FBQ047UUFDTCxPQUNLO1lBQ0QsT0FBTztnQkFBQztvQkFBRUssTUFBTTtvQkFBUUUsTUFBTVI7Z0JBQWE7bUJBQU1DO2FBQWM7UUFDbkU7SUFDQSxxQkFBcUI7SUFDekIsT0FDSyxJQUFJQyxNQUFNQyxPQUFPLENBQUNGLGdCQUFnQjtRQUNuQyxPQUFRUSxZQUFZVCxjQUFjQyxrQkFBa0I7ZUFDN0NEO2VBQ0FDO1NBQ047SUFDTCxPQUNLO1FBQ0QsSUFBSUEsa0JBQWtCLElBQUk7WUFDdEIsT0FBT0Q7UUFDWCxPQUNLLElBQUlFLE1BQU1DLE9BQU8sQ0FBQ0gsaUJBQ25CQSxhQUFhSSxJQUFJLENBQUMsQ0FBQ0MsSUFBTVAsc0VBQWtCQSxDQUFDTyxLQUFLO1lBQ2pELE9BQU87bUJBQ0FMO2dCQUNIO29CQUNJTSxNQUFNO29CQUNOQyxhQUFhO29CQUNiQyxNQUFNUDtnQkFDVjthQUNIO1FBQ0wsT0FDSztZQUNELE9BQU87bUJBQUlEO2dCQUFjO29CQUFFTSxNQUFNO29CQUFRRSxNQUFNUDtnQkFBYzthQUFFO1FBQ25FO0lBQ0o7QUFDSjtBQUNBOzs7Ozs7O0NBT0MsR0FDTSxTQUFTUyxhQUFhQyxJQUFJLEVBQUVDLEtBQUs7SUFDcEMsSUFBSUQsU0FBUyxXQUFXQyxVQUFVLFNBQVM7UUFDdkMsT0FBTztJQUNYO0lBQ0EsT0FBTztBQUNYO0FBQ0EsOERBQThEO0FBQzlELFNBQVNDLHdCQUF3QkMsR0FBRyxFQUFFQyxVQUFVO0lBQzVDLDhEQUE4RDtJQUM5RCxTQUFTQyxPQUFPRixHQUFHLEVBQUVHLFlBQVk7UUFDN0IsSUFBSSxPQUFPSCxRQUFRLFlBQVlBLFFBQVEsUUFBUUEsUUFBUUksV0FBVztZQUM5RCxPQUFPSjtRQUNYO1FBQ0EsSUFBSUcsZ0JBQWdCRixZQUFZO1lBQzVCLElBQUliLE1BQU1DLE9BQU8sQ0FBQ1csTUFBTTtnQkFDcEIsT0FBTztZQUNYO1lBQ0EsT0FBTztRQUNYO1FBQ0EsSUFBSVosTUFBTUMsT0FBTyxDQUFDVyxNQUFNO1lBQ3BCLE9BQU9BLElBQUlLLEdBQUcsQ0FBQyxDQUFDQyxPQUFTSixPQUFPSSxNQUFNSCxlQUFlO1FBQ3pEO1FBQ0EsTUFBTUksU0FBUyxDQUFDO1FBQ2hCLEtBQUssTUFBTUMsT0FBT0MsT0FBT0MsSUFBSSxDQUFDVixLQUFNO1lBQ2hDTyxNQUFNLENBQUNDLElBQUksR0FBR04sT0FBT0YsR0FBRyxDQUFDUSxJQUFJLEVBQUVMLGVBQWU7UUFDbEQ7UUFDQSxPQUFPSTtJQUNYO0lBQ0EsT0FBT0ksS0FBS0MsU0FBUyxDQUFDVixPQUFPRixLQUFLLElBQUksTUFBTTtBQUNoRDtBQUNBOzs7O0NBSUMsR0FDTSxNQUFNYSxvQkFBb0I5QiwrREFBWUE7SUFDekMsSUFBSStCLGFBQWE7UUFDYiwrQ0FBK0M7UUFDL0MsT0FBTztZQUNIQyxtQkFBbUI7WUFDbkJDLG1CQUFtQjtRQUN2QjtJQUNKO0lBQ0E7O0tBRUMsR0FDRCxJQUFJdEIsT0FBTztRQUNQLElBQUksT0FBTyxJQUFJLENBQUN1QixPQUFPLEtBQUssVUFBVTtZQUNsQyxPQUFPLElBQUksQ0FBQ0EsT0FBTztRQUN2QjtRQUNBLElBQUksQ0FBQzdCLE1BQU1DLE9BQU8sQ0FBQyxJQUFJLENBQUM0QixPQUFPLEdBQzNCLE9BQU87UUFDWCxPQUFPLElBQUksQ0FBQ0EsT0FBTyxDQUNkWixHQUFHLENBQUMsQ0FBQ2Q7WUFDTixJQUFJLE9BQU9BLE1BQU0sVUFDYixPQUFPQTtZQUNYLElBQUlBLEVBQUVDLElBQUksS0FBSyxRQUNYLE9BQU9ELEVBQUVHLElBQUk7WUFDakIsT0FBTztRQUNYLEdBQ0t3QixJQUFJLENBQUM7SUFDZDtJQUNBLDZCQUE2QixHQUM3QkMsVUFBVTtRQUNOLE9BQU8sSUFBSSxDQUFDQyxRQUFRO0lBQ3hCO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxNQUFNLENBQUU7UUFDSixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qiw2Q0FBNkM7WUFDN0NBLFNBQVM7Z0JBQ0xMLFNBQVNLO2dCQUNUUCxtQkFBbUJRO2dCQUNuQlAsbUJBQW1CLENBQUM7WUFDeEI7UUFDSjtRQUNBLDZGQUE2RjtRQUM3RixJQUFJLENBQUNNLE9BQU9QLGlCQUFpQixFQUFFO1lBQzNCLDZDQUE2QztZQUM3Q08sT0FBT1AsaUJBQWlCLEdBQUcsQ0FBQztRQUNoQztRQUNBLElBQUksQ0FBQ08sT0FBT04saUJBQWlCLEVBQUU7WUFDM0IsNkNBQTZDO1lBQzdDTSxPQUFPTixpQkFBaUIsR0FBRyxDQUFDO1FBQ2hDO1FBQ0EsS0FBSyxDQUFDTTtRQUNOYixPQUFPZSxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7YUFBVztRQUN6QztRQUNBbkIsT0FBT2UsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBLGdDQUFnQyxHQUNoQ25CLE9BQU9lLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EseURBQXlELEdBQ3pEbkIsT0FBT2UsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxpQ0FBaUMsR0FDakNuQixPQUFPZSxjQUFjLENBQUMsSUFBSSxFQUFFLHFCQUFxQjtZQUM3Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsMEZBQTBGLEdBQzFGbkIsT0FBT2UsY0FBYyxDQUFDLElBQUksRUFBRSxxQkFBcUI7WUFDN0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBOzs7U0FHQyxHQUNEbkIsT0FBT2UsY0FBYyxDQUFDLElBQUksRUFBRSxNQUFNO1lBQzlCQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLElBQUksR0FBR1AsT0FBT08sSUFBSTtRQUN2QixJQUFJLENBQUNaLE9BQU8sR0FBR0ssT0FBT0wsT0FBTztRQUM3QixJQUFJLENBQUNGLGlCQUFpQixHQUFHTyxPQUFPUCxpQkFBaUI7UUFDakQsSUFBSSxDQUFDQyxpQkFBaUIsR0FBR00sT0FBT04saUJBQWlCO1FBQ2pELElBQUksQ0FBQ2MsRUFBRSxHQUFHUixPQUFPUSxFQUFFO0lBQ3ZCO0lBQ0FDLFNBQVM7UUFDTCxPQUFPO1lBQ0h2QyxNQUFNLElBQUksQ0FBQzRCLFFBQVE7WUFDbkJZLE1BQU0sSUFBSSxDQUFDQyxNQUFNLEdBQ1pWLE1BQU07UUFDZjtJQUNKO0lBQ0EsT0FBT1csVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBLHVDQUF1QztJQUN2QyxJQUFJQyxtQkFBbUI7UUFDbkIsT0FBTztZQUNITCxJQUFJLElBQUksQ0FBQ0EsRUFBRTtZQUNYYixTQUFTLElBQUksQ0FBQ0EsT0FBTztZQUNyQlksTUFBTSxJQUFJLENBQUNBLElBQUk7WUFDZmQsbUJBQW1CLElBQUksQ0FBQ0EsaUJBQWlCO1lBQ3pDQyxtQkFBbUIsSUFBSSxDQUFDQSxpQkFBaUI7UUFDN0M7SUFDSjtJQUNBLCtEQUErRDtJQUMvRCxrREFBa0Q7SUFDbERvQixVQUFVUixLQUFLLEVBQUU7UUFDYixJQUFJLENBQUNFLEVBQUUsR0FBR0Y7UUFDViw4REFBOEQ7UUFDOUQsZUFBZTtRQUNmLElBQUksQ0FBQ1MsU0FBUyxDQUFDUCxFQUFFLEdBQUdGO0lBQ3hCO0lBQ0EsSUFBSSxDQUFDVSxPQUFPQyxXQUFXLENBQUMsR0FBRztRQUN2Qiw4REFBOEQ7UUFDOUQsT0FBTyxJQUFJLENBQUNsQixXQUFXLENBQUNhLE9BQU87SUFDbkM7SUFDQSwrQ0FBK0M7SUFDL0MsQ0FBQ0ksT0FBT0UsR0FBRyxDQUFDLDhCQUE4QixDQUFDQyxLQUFLLEVBQUU7UUFDOUMsSUFBSUEsVUFBVSxNQUFNO1lBQ2hCLE9BQU8sSUFBSTtRQUNmO1FBQ0EsTUFBTUMsWUFBWTNDLHdCQUF3QixJQUFJLENBQUNvQyxnQkFBZ0IsRUFBRVEsS0FBS0MsR0FBRyxDQUFDLEdBQUdIO1FBQzdFLDhEQUE4RDtRQUM5RCxPQUFPLENBQUMsRUFBRSxJQUFJLENBQUNwQixXQUFXLENBQUNhLE9BQU8sR0FBRyxDQUFDLEVBQUVRLFVBQVUsQ0FBQztJQUN2RDtBQUNKO0FBQ08sU0FBU0csc0JBQXNCakIsS0FBSztJQUN2QyxPQUFReEMsTUFBTUMsT0FBTyxDQUFDdUMsVUFDbEJBLE1BQU1rQixLQUFLLENBQUMsQ0FBQ0MsSUFBTSxPQUFPQSxFQUFFQyxLQUFLLEtBQUs7QUFDOUM7QUFDTyxTQUFTQyxZQUNoQiw4REFBOEQ7QUFDOURwRCxJQUFJLEVBQ0osOERBQThEO0FBQzlEQyxLQUFLO0lBR0QsTUFBTW9ELFNBQVM7UUFBRSxHQUFHckQsSUFBSTtJQUFDO0lBQ3pCLEtBQUssTUFBTSxDQUFDVyxLQUFLb0IsTUFBTSxJQUFJbkIsT0FBTzBDLE9BQU8sQ0FBQ3JELE9BQVE7UUFDOUMsSUFBSW9ELE1BQU0sQ0FBQzFDLElBQUksSUFBSSxNQUFNO1lBQ3JCMEMsTUFBTSxDQUFDMUMsSUFBSSxHQUFHb0I7UUFDbEIsT0FDSyxJQUFJQSxTQUFTLE1BQU07WUFDcEI7UUFDSixPQUNLLElBQUksT0FBT3NCLE1BQU0sQ0FBQzFDLElBQUksS0FBSyxPQUFPb0IsU0FDbkN4QyxNQUFNQyxPQUFPLENBQUM2RCxNQUFNLENBQUMxQyxJQUFJLE1BQU1wQixNQUFNQyxPQUFPLENBQUN1QyxRQUFRO1lBQ3JELE1BQU0sSUFBSXdCLE1BQU0sQ0FBQyxNQUFNLEVBQUU1QyxJQUFJLGlFQUFpRSxDQUFDO1FBQ25HLE9BQ0ssSUFBSSxPQUFPMEMsTUFBTSxDQUFDMUMsSUFBSSxLQUFLLFVBQVU7WUFDdEMsSUFBSUEsUUFBUSxRQUFRO2dCQUVoQjtZQUNKLE9BQ0ssSUFBSTtnQkFBQztnQkFBTTtnQkFBUTtnQkFBa0I7YUFBaUIsQ0FBQzZDLFFBQVEsQ0FBQzdDLE1BQU07Z0JBQ3ZFLDJDQUEyQztnQkFDM0MwQyxNQUFNLENBQUMxQyxJQUFJLEdBQUdvQjtZQUNsQixPQUNLO2dCQUNEc0IsTUFBTSxDQUFDMUMsSUFBSSxJQUFJb0I7WUFDbkI7UUFDSixPQUNLLElBQUksT0FBT3NCLE1BQU0sQ0FBQzFDLElBQUksS0FBSyxZQUFZLENBQUNwQixNQUFNQyxPQUFPLENBQUM2RCxNQUFNLENBQUMxQyxJQUFJLEdBQUc7WUFDckUwQyxNQUFNLENBQUMxQyxJQUFJLEdBQUd5QyxZQUFZQyxNQUFNLENBQUMxQyxJQUFJLEVBQUVvQjtRQUMzQyxPQUNLLElBQUl4QyxNQUFNQyxPQUFPLENBQUM2RCxNQUFNLENBQUMxQyxJQUFJLEdBQUc7WUFDakMwQyxNQUFNLENBQUMxQyxJQUFJLEdBQUdiLFlBQVl1RCxNQUFNLENBQUMxQyxJQUFJLEVBQUVvQjtRQUMzQyxPQUNLLElBQUlzQixNQUFNLENBQUMxQyxJQUFJLEtBQUtvQixPQUFPO1lBQzVCO1FBQ0osT0FDSztZQUNEMEIsUUFBUUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFL0MsSUFBSSxzRUFBc0UsQ0FBQztRQUNyRztJQUNKO0lBQ0EsT0FBTzBDO0FBQ1g7QUFDTyxTQUFTdkQsWUFBWUUsSUFBSSxFQUFFQyxLQUFLO0lBQ25DLElBQUlELFNBQVNPLGFBQWFOLFVBQVVNLFdBQVc7UUFDM0MsT0FBT0E7SUFDWCxPQUNLLElBQUlQLFNBQVNPLGFBQWFOLFVBQVVNLFdBQVc7UUFDaEQsT0FBT1AsUUFBUUM7SUFDbkIsT0FDSztRQUNELE1BQU1vRCxTQUFTO2VBQUlyRDtTQUFLO1FBQ3hCLEtBQUssTUFBTVMsUUFBUVIsTUFBTztZQUN0QixJQUFJLE9BQU9RLFNBQVMsWUFDaEJBLFNBQVMsUUFDVCxXQUFXQSxRQUNYLE9BQU9BLEtBQUswQyxLQUFLLEtBQUssVUFBVTtnQkFDaEMsTUFBTVEsVUFBVU4sT0FBT08sU0FBUyxDQUFDLENBQUNDO29CQUM5QixNQUFNQyxXQUFXLE9BQU9ELGFBQWE7b0JBQ3JDLE1BQU1FLGdCQUFnQixXQUFXRixZQUFZQSxTQUFTVixLQUFLLEtBQUsxQyxLQUFLMEMsS0FBSztvQkFDMUUsTUFBTWEsV0FBVyxRQUFRSCxZQUFZLFFBQVFwRCxRQUFRb0QsVUFBVTVCLE9BQU94QixNQUFNd0I7b0JBQzVFLE1BQU1nQyxzQkFBc0IsQ0FBRSxTQUFRSixRQUFPLEtBQ3pDLENBQUNBLFVBQVU1QixNQUNYLENBQUUsU0FBUXhCLElBQUcsS0FDYixDQUFDQSxNQUFNd0I7b0JBQ1gsT0FBTzZCLFlBQVlDLGlCQUFrQkMsQ0FBQUEsWUFBWUMsbUJBQWtCO2dCQUN2RTtnQkFDQSxJQUFJTixZQUFZLENBQUMsS0FDYixPQUFPTixNQUFNLENBQUNNLFFBQVEsS0FBSyxZQUMzQk4sTUFBTSxDQUFDTSxRQUFRLEtBQUssTUFBTTtvQkFDMUJOLE1BQU0sQ0FBQ00sUUFBUSxHQUFHUCxZQUFZQyxNQUFNLENBQUNNLFFBQVEsRUFBRWxEO2dCQUNuRCxPQUNLO29CQUNENEMsT0FBT2EsSUFBSSxDQUFDekQ7Z0JBQ2hCO1lBQ0osT0FDSyxJQUFJLE9BQU9BLFNBQVMsWUFDckJBLFNBQVMsUUFDVCxVQUFVQSxRQUNWQSxLQUFLWixJQUFJLEtBQUssSUFBSTtnQkFFbEI7WUFDSixPQUNLO2dCQUNEd0QsT0FBT2EsSUFBSSxDQUFDekQ7WUFDaEI7UUFDSjtRQUNBLE9BQU80QztJQUNYO0FBQ0o7QUFDQSw4REFBOEQ7QUFDdkQsU0FBU2MsVUFBVW5FLElBQUksRUFBRUMsS0FBSztJQUNqQyxJQUFJLENBQUNELFFBQVEsQ0FBQ0MsT0FBTztRQUNqQixNQUFNLElBQUlzRCxNQUFNO0lBQ3BCO0lBQ0EsSUFBSSxDQUFDdkQsUUFBUSxDQUFDQyxPQUFPO1FBQ2pCLE9BQU9ELFFBQVFDO0lBQ25CLE9BQ0ssSUFBSSxPQUFPRCxTQUFTLE9BQU9DLE9BQU87UUFDbkMsTUFBTSxJQUFJc0QsTUFBTSxDQUFDLCtDQUErQyxFQUFFLE9BQU92RCxLQUFLLFFBQVEsRUFBRSxPQUFPQyxNQUFNLENBQUM7SUFDMUcsT0FDSyxJQUFJLE9BQU9ELFNBQVMsWUFBWSxPQUFPQyxVQUFVLFVBQVU7UUFDNUQsT0FBUUQsT0FBT0M7SUFDbkIsT0FDSyxJQUFJVixNQUFNQyxPQUFPLENBQUNRLFNBQVNULE1BQU1DLE9BQU8sQ0FBQ1MsUUFBUTtRQUNsRCxPQUFPSCxZQUFZRSxNQUFNQztJQUM3QixPQUNLLElBQUksT0FBT0QsU0FBUyxZQUFZLE9BQU9DLFVBQVUsVUFBVTtRQUM1RCxPQUFPbUQsWUFBWXBELE1BQU1DO0lBQzdCLE9BQ0ssSUFBSUQsU0FBU0MsT0FBTztRQUNyQixPQUFPRDtJQUNYLE9BQ0s7UUFDRCxNQUFNLElBQUl1RCxNQUFNLENBQUMsZ0RBQWdELEVBQUV2RCxLQUFLLFFBQVEsRUFBRUMsTUFBTSxDQUFDO0lBQzdGO0FBQ0o7QUFDQTs7Ozs7O0NBTUMsR0FDTSxNQUFNbUUseUJBQXlCcEQ7QUFDdEM7QUFDTyxTQUFTcUQsd0JBQXdCQyxDQUFDO0lBQ3JDLE9BQU8sT0FBT0EsRUFBRUMsSUFBSSxLQUFLO0FBQzdCO0FBQ08sU0FBU0MsY0FBY0MsV0FBVztJQUNyQyxPQUFPLE9BQU9BLGFBQWFsRCxhQUFhO0FBQzVDO0FBQ08sU0FBU21ELG1CQUFtQkQsV0FBVztJQUMxQyxPQUFRRCxjQUFjQyxnQkFDbEIsT0FBT0EsWUFBWUUsTUFBTSxLQUFLO0FBQ3RDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9iYXNlLmpzPzAzYzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4uL2xvYWQvc2VyaWFsaXphYmxlLmpzXCI7XG5pbXBvcnQgeyBpc0RhdGFDb250ZW50QmxvY2ssIH0gZnJvbSBcIi4vY29udGVudF9ibG9ja3MuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUNvbnRlbnQoZmlyc3RDb250ZW50LCBzZWNvbmRDb250ZW50KSB7XG4gICAgLy8gSWYgZmlyc3QgY29udGVudCBpcyBhIHN0cmluZ1xuICAgIGlmICh0eXBlb2YgZmlyc3RDb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmIChmaXJzdENvbnRlbnQgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWNvbmRDb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygc2Vjb25kQ29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0Q29udGVudCArIHNlY29uZENvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzZWNvbmRDb250ZW50KSAmJlxuICAgICAgICAgICAgc2Vjb25kQ29udGVudC5zb21lKChjKSA9PiBpc0RhdGFDb250ZW50QmxvY2soYykpKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZV90eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZmlyc3RDb250ZW50LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uc2Vjb25kQ29udGVudCxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW3sgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IGZpcnN0Q29udGVudCB9LCAuLi5zZWNvbmRDb250ZW50XTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBib3RoIGFyZSBhcnJheXNcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzZWNvbmRDb250ZW50KSkge1xuICAgICAgICByZXR1cm4gKF9tZXJnZUxpc3RzKGZpcnN0Q29udGVudCwgc2Vjb25kQ29udGVudCkgPz8gW1xuICAgICAgICAgICAgLi4uZmlyc3RDb250ZW50LFxuICAgICAgICAgICAgLi4uc2Vjb25kQ29udGVudCxcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoc2Vjb25kQ29udGVudCA9PT0gXCJcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0Q29udGVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpcnN0Q29udGVudCkgJiZcbiAgICAgICAgICAgIGZpcnN0Q29udGVudC5zb21lKChjKSA9PiBpc0RhdGFDb250ZW50QmxvY2soYykpKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC4uLmZpcnN0Q29udGVudCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VfdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHNlY29uZENvbnRlbnQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLmZpcnN0Q29udGVudCwgeyB0eXBlOiBcInRleHRcIiwgdGV4dDogc2Vjb25kQ29udGVudCB9XTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogJ01lcmdlJyB0d28gc3RhdHVzZXMuIElmIGVpdGhlciB2YWx1ZSBwYXNzZWQgaXMgJ2Vycm9yJywgaXQgd2lsbCByZXR1cm4gJ2Vycm9yJy4gRWxzZVxuICogaXQgd2lsbCByZXR1cm4gJ3N1Y2Nlc3MnLlxuICpcbiAqIEBwYXJhbSB7XCJzdWNjZXNzXCIgfCBcImVycm9yXCIgfCB1bmRlZmluZWR9IGxlZnQgVGhlIGV4aXN0aW5nIHZhbHVlIHRvICdtZXJnZScgd2l0aCB0aGUgbmV3IHZhbHVlLlxuICogQHBhcmFtIHtcInN1Y2Nlc3NcIiB8IFwiZXJyb3JcIiB8IHVuZGVmaW5lZH0gcmlnaHQgVGhlIG5ldyB2YWx1ZSB0byAnbWVyZ2UnIHdpdGggdGhlIGV4aXN0aW5nIHZhbHVlXG4gKiBAcmV0dXJucyB7XCJzdWNjZXNzXCIgfCBcImVycm9yXCJ9IFRoZSAnbWVyZ2VkJyB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9tZXJnZVN0YXR1cyhsZWZ0LCByaWdodCkge1xuICAgIGlmIChsZWZ0ID09PSBcImVycm9yXCIgfHwgcmlnaHQgPT09IFwiZXJyb3JcIikge1xuICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xuICAgIH1cbiAgICByZXR1cm4gXCJzdWNjZXNzXCI7XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gc3RyaW5naWZ5V2l0aERlcHRoTGltaXQob2JqLCBkZXB0aExpbWl0KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBmdW5jdGlvbiBoZWxwZXIob2JqLCBjdXJyZW50RGVwdGgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgfHwgb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50RGVwdGggPj0gZGVwdGhMaW1pdCkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIltBcnJheV1cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIltPYmplY3RdXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgcmV0dXJuIG9iai5tYXAoKGl0ZW0pID0+IGhlbHBlcihpdGVtLCBjdXJyZW50RGVwdGggKyAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9iaikpIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gaGVscGVyKG9ialtrZXldLCBjdXJyZW50RGVwdGggKyAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoaGVscGVyKG9iaiwgMCksIG51bGwsIDIpO1xufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgdHlwZXMgb2YgbWVzc2FnZXMgaW4gYSBjb252ZXJzYXRpb24uIEl0IGluY2x1ZGVzXG4gKiBwcm9wZXJ0aWVzIGxpa2UgYGNvbnRlbnRgLCBgbmFtZWAsIGFuZCBgYWRkaXRpb25hbF9rd2FyZ3NgLiBJdCBhbHNvXG4gKiBpbmNsdWRlcyBtZXRob2RzIGxpa2UgYHRvRGljdCgpYCBhbmQgYF9nZXRUeXBlKClgLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZU1lc3NhZ2UgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IFwiYWRkaXRpb25hbF9rd2FyZ3NcIixcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBcInJlc3BvbnNlX21ldGFkYXRhXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0ZXh0IGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5jb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLmNvbnRlbnQpKVxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRcbiAgICAgICAgICAgIC5tYXAoKGMpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYyA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgICAgIGlmIChjLnR5cGUgPT09IFwidGV4dFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBjLnRleHQ7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKFwiXCIpO1xuICAgIH1cbiAgICAvKiogVGhlIHR5cGUgb2YgdGhlIG1lc3NhZ2UuICovXG4gICAgZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFR5cGUoKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBrd2FyZ3MpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZpZWxkcyxcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczoga3dhcmdzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBkZWZhdWx0IHZhbHVlIGZvciBhZGRpdGlvbmFsX2t3YXJncyBpcyBwYXNzZWQgaW50byBzdXBlcigpIGZvciBzZXJpYWxpemF0aW9uXG4gICAgICAgIGlmICghZmllbGRzLmFkZGl0aW9uYWxfa3dhcmdzKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghZmllbGRzLnJlc3BvbnNlX21ldGFkYXRhKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJtZXNzYWdlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbnRlbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBtZXNzYWdlIHNlbmRlciBpbiBhIG11bHRpLXVzZXIgY2hhdC4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogQWRkaXRpb25hbCBrZXl3b3JkIGFyZ3VtZW50cyAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhZGRpdGlvbmFsX2t3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogUmVzcG9uc2UgbWV0YWRhdGEuIEZvciBleGFtcGxlOiByZXNwb25zZSBoZWFkZXJzLCBsb2dwcm9icywgdG9rZW4gY291bnRzLCBtb2RlbCBuYW1lLiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXNwb25zZV9tZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gb3B0aW9uYWwgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBtZXNzYWdlLiBUaGlzIHNob3VsZCBpZGVhbGx5IGJlXG4gICAgICAgICAqIHByb3ZpZGVkIGJ5IHRoZSBwcm92aWRlci9tb2RlbCB3aGljaCBjcmVhdGVkIHRoZSBtZXNzYWdlLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5uYW1lID0gZmllbGRzLm5hbWU7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGZpZWxkcy5jb250ZW50O1xuICAgICAgICB0aGlzLmFkZGl0aW9uYWxfa3dhcmdzID0gZmllbGRzLmFkZGl0aW9uYWxfa3dhcmdzO1xuICAgICAgICB0aGlzLnJlc3BvbnNlX21ldGFkYXRhID0gZmllbGRzLnJlc3BvbnNlX21ldGFkYXRhO1xuICAgICAgICB0aGlzLmlkID0gZmllbGRzLmlkO1xuICAgIH1cbiAgICB0b0RpY3QoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLl9nZXRUeXBlKCksXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnRvSlNPTigpXG4gICAgICAgICAgICAgICAgLmt3YXJncyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkJhc2VNZXNzYWdlXCI7XG4gICAgfVxuICAgIC8vIENhbid0IGJlIHByb3RlY3RlZCBmb3Igc2lsbHkgcmVhc29uc1xuICAgIGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogdGhpcy5hZGRpdGlvbmFsX2t3YXJncyxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiB0aGlzLnJlc3BvbnNlX21ldGFkYXRhLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyB0aGlzIHByaXZhdGUgbWV0aG9kIGlzIHVzZWQgdG8gdXBkYXRlIHRoZSBJRCBmb3IgdGhlIHJ1bnRpbWVcbiAgICAvLyB2YWx1ZSBhcyB3ZWxsIGFzIGluIGxjX2t3YXJncyBmb3Igc2VyaWFsaXNhdGlvblxuICAgIF91cGRhdGVJZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmlkID0gdmFsdWU7XG4gICAgICAgIC8vIGxjX2F0dHJpYnV0ZXMgd291bGRuJ3Qgd29yayBoZXJlLCBiZWNhdXNlIGplc3QgY29tcGFyZXMgdGhlXG4gICAgICAgIC8vIHdob2xlIG9iamVjdFxuICAgICAgICB0aGlzLmxjX2t3YXJncy5pZCA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmxjX25hbWUoKTtcbiAgICB9XG4gICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgY29uc29sZS5sb2dcbiAgICBbU3ltYm9sLmZvcihcIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tXCIpXShkZXB0aCkge1xuICAgICAgICBpZiAoZGVwdGggPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByaW50YWJsZSA9IHN0cmluZ2lmeVdpdGhEZXB0aExpbWl0KHRoaXMuX3ByaW50YWJsZUZpZWxkcywgTWF0aC5tYXgoNCwgZGVwdGgpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uc3RydWN0b3IubGNfbmFtZSgpfSAke3ByaW50YWJsZX1gO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc09wZW5BSVRvb2xDYWxsQXJyYXkodmFsdWUpIHtcbiAgICByZXR1cm4gKEFycmF5LmlzQXJyYXkodmFsdWUpICYmXG4gICAgICAgIHZhbHVlLmV2ZXJ5KCh2KSA9PiB0eXBlb2Ygdi5pbmRleCA9PT0gXCJudW1iZXJcIikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9tZXJnZURpY3RzKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmxlZnQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnJpZ2h0XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuKSB7XG4gICAgY29uc3QgbWVyZ2VkID0geyAuLi5sZWZ0IH07XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmlnaHQpKSB7XG4gICAgICAgIGlmIChtZXJnZWRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBtZXJnZWRba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXJnZWRba2V5XSAhPT0gdHlwZW9mIHZhbHVlIHx8XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KG1lcmdlZFtrZXldKSAhPT0gQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZmllbGRbJHtrZXl9XSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgbWVzc2FnZSBjaHVuaywgYnV0IHdpdGggYSBkaWZmZXJlbnQgdHlwZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVyZ2VkW2tleV0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwidHlwZVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gRG8gbm90IG1lcmdlICd0eXBlJyBmaWVsZHNcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKFtcImlkXCIsIFwibmFtZVwiLCBcIm91dHB1dF92ZXJzaW9uXCIsIFwibW9kZWxfcHJvdmlkZXJcIl0uaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIGluY29taW5nIHZhbHVlIGZvciB0aGVzZSBmaWVsZHNcbiAgICAgICAgICAgICAgICBtZXJnZWRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkW2tleV0gKz0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lcmdlZFtrZXldID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KG1lcmdlZFtrZXldKSkge1xuICAgICAgICAgICAgbWVyZ2VkW2tleV0gPSBfbWVyZ2VEaWN0cyhtZXJnZWRba2V5XSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWVyZ2VkW2tleV0pKSB7XG4gICAgICAgICAgICBtZXJnZWRba2V5XSA9IF9tZXJnZUxpc3RzKG1lcmdlZFtrZXldLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWVyZ2VkW2tleV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgZmllbGRbJHtrZXl9XSBhbHJlYWR5IGV4aXN0cyBpbiB0aGlzIG1lc3NhZ2UgY2h1bmsgYW5kIHZhbHVlIGhhcyB1bnN1cHBvcnRlZCB0eXBlLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gX21lcmdlTGlzdHMobGVmdCwgcmlnaHQpIHtcbiAgICBpZiAobGVmdCA9PT0gdW5kZWZpbmVkICYmIHJpZ2h0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSBpZiAobGVmdCA9PT0gdW5kZWZpbmVkIHx8IHJpZ2h0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlZnQgfHwgcmlnaHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBbLi4ubGVmdF07XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByaWdodCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgaXRlbSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIFwiaW5kZXhcIiBpbiBpdGVtICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGl0ZW0uaW5kZXggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b01lcmdlID0gbWVyZ2VkLmZpbmRJbmRleCgobGVmdEl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNPYmplY3QgPSB0eXBlb2YgbGVmdEl0ZW0gPT09IFwib2JqZWN0XCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGljaWVzTWF0Y2ggPSBcImluZGV4XCIgaW4gbGVmdEl0ZW0gJiYgbGVmdEl0ZW0uaW5kZXggPT09IGl0ZW0uaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkc01hdGNoID0gXCJpZFwiIGluIGxlZnRJdGVtICYmIFwiaWRcIiBpbiBpdGVtICYmIGxlZnRJdGVtPy5pZCA9PT0gaXRlbT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVpdGhlckl0ZW1NaXNzaW5nSUQgPSAhKFwiaWRcIiBpbiBsZWZ0SXRlbSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFsZWZ0SXRlbT8uaWQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoXCJpZFwiIGluIGl0ZW0pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhaXRlbT8uaWQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc09iamVjdCAmJiBpbmRpY2llc01hdGNoICYmIChpZHNNYXRjaCB8fCBlaXRoZXJJdGVtTWlzc2luZ0lEKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAodG9NZXJnZSAhPT0gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIG1lcmdlZFt0b01lcmdlXSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgICAgICBtZXJnZWRbdG9NZXJnZV0gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkW3RvTWVyZ2VdID0gX21lcmdlRGljdHMobWVyZ2VkW3RvTWVyZ2VdLCBpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgaXRlbSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIFwidGV4dFwiIGluIGl0ZW0gJiZcbiAgICAgICAgICAgICAgICBpdGVtLnRleHQgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBOby1vcCAtIHNraXAgZW1wdHkgdGV4dCBibG9ja3NcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lcmdlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfVxufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiBfbWVyZ2VPYmoobGVmdCwgcmlnaHQpIHtcbiAgICBpZiAoIWxlZnQgJiYgIXJpZ2h0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBtZXJnZSB0d28gdW5kZWZpbmVkIG9iamVjdHMuXCIpO1xuICAgIH1cbiAgICBpZiAoIWxlZnQgfHwgIXJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0IHx8IHJpZ2h0O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbGVmdCAhPT0gdHlwZW9mIHJpZ2h0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IG1lcmdlIG9iamVjdHMgb2YgZGlmZmVyZW50IHR5cGVzLlxcbkxlZnQgJHt0eXBlb2YgbGVmdH1cXG5SaWdodCAke3R5cGVvZiByaWdodH1gKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGxlZnQgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIHJpZ2h0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiAobGVmdCArIHJpZ2h0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShsZWZ0KSAmJiBBcnJheS5pc0FycmF5KHJpZ2h0KSkge1xuICAgICAgICByZXR1cm4gX21lcmdlTGlzdHMobGVmdCwgcmlnaHQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbGVmdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmlnaHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmV0dXJuIF9tZXJnZURpY3RzKGxlZnQsIHJpZ2h0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAobGVmdCA9PT0gcmlnaHQpIHtcbiAgICAgICAgcmV0dXJuIGxlZnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbiBub3QgbWVyZ2Ugb2JqZWN0cyBvZiBkaWZmZXJlbnQgdHlwZXMuXFxuTGVmdCAke2xlZnR9XFxuUmlnaHQgJHtyaWdodH1gKTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuICogbWVzc2FnZSBjaHVua3MuIEl0IGluY2x1ZGVzIGEgbWV0aG9kIGBfbWVyZ2Vfa3dhcmdzX2RpY3QoKWAgZm9yIG1lcmdpbmdcbiAqIGFkZGl0aW9uYWwga2V5d29yZCBhcmd1bWVudHMgZnJvbSBhbm90aGVyIGBCYXNlTWVzc2FnZUNodW5rYCBpbnRvIHRoaXNcbiAqIG9uZS4gSXQgYWxzbyBvdmVycmlkZXMgdGhlIGBfX2FkZF9fKClgIG1ldGhvZCB0byBzdXBwb3J0IGNvbmNhdGVuYXRpb25cbiAqIG9mIGBCYXNlTWVzc2FnZUNodW5rYCBpbnN0YW5jZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9pc01lc3NhZ2VGaWVsZFdpdGhSb2xlKHgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHgucm9sZSA9PT0gXCJzdHJpbmdcIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VMaWtlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtZXNzYWdlTGlrZT8uX2dldFR5cGUgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VNZXNzYWdlQ2h1bmsobWVzc2FnZUxpa2UpIHtcbiAgICByZXR1cm4gKGlzQmFzZU1lc3NhZ2UobWVzc2FnZUxpa2UpICYmXG4gICAgICAgIHR5cGVvZiBtZXNzYWdlTGlrZS5jb25jYXQgPT09IFwiZnVuY3Rpb25cIik7XG59XG4iXSwibmFtZXMiOlsiU2VyaWFsaXphYmxlIiwiaXNEYXRhQ29udGVudEJsb2NrIiwibWVyZ2VDb250ZW50IiwiZmlyc3RDb250ZW50Iiwic2Vjb25kQ29udGVudCIsIkFycmF5IiwiaXNBcnJheSIsInNvbWUiLCJjIiwidHlwZSIsInNvdXJjZV90eXBlIiwidGV4dCIsIl9tZXJnZUxpc3RzIiwiX21lcmdlU3RhdHVzIiwibGVmdCIsInJpZ2h0Iiwic3RyaW5naWZ5V2l0aERlcHRoTGltaXQiLCJvYmoiLCJkZXB0aExpbWl0IiwiaGVscGVyIiwiY3VycmVudERlcHRoIiwidW5kZWZpbmVkIiwibWFwIiwiaXRlbSIsInJlc3VsdCIsImtleSIsIk9iamVjdCIsImtleXMiLCJKU09OIiwic3RyaW5naWZ5IiwiQmFzZU1lc3NhZ2UiLCJsY19hbGlhc2VzIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImNvbnRlbnQiLCJqb2luIiwiZ2V0VHlwZSIsIl9nZXRUeXBlIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJrd2FyZ3MiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibmFtZSIsImlkIiwidG9EaWN0IiwiZGF0YSIsInRvSlNPTiIsImxjX25hbWUiLCJfcHJpbnRhYmxlRmllbGRzIiwiX3VwZGF0ZUlkIiwibGNfa3dhcmdzIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJmb3IiLCJkZXB0aCIsInByaW50YWJsZSIsIk1hdGgiLCJtYXgiLCJpc09wZW5BSVRvb2xDYWxsQXJyYXkiLCJldmVyeSIsInYiLCJpbmRleCIsIl9tZXJnZURpY3RzIiwibWVyZ2VkIiwiZW50cmllcyIsIkVycm9yIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwid2FybiIsInRvTWVyZ2UiLCJmaW5kSW5kZXgiLCJsZWZ0SXRlbSIsImlzT2JqZWN0IiwiaW5kaWNpZXNNYXRjaCIsImlkc01hdGNoIiwiZWl0aGVySXRlbU1pc3NpbmdJRCIsInB1c2giLCJfbWVyZ2VPYmoiLCJCYXNlTWVzc2FnZUNodW5rIiwiX2lzTWVzc2FnZUZpZWxkV2l0aFJvbGUiLCJ4Iiwicm9sZSIsImlzQmFzZU1lc3NhZ2UiLCJtZXNzYWdlTGlrZSIsImlzQmFzZU1lc3NhZ2VDaHVuayIsImNvbmNhdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/chat.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/chat.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatMessage: () => (/* binding */ ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* binding */ ChatMessageChunk),\n/* harmony export */   isChatMessage: () => (/* binding */ isChatMessage),\n/* harmony export */   isChatMessageChunk: () => (/* binding */ isChatMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a chat message in a conversation.\n */ class ChatMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ChatMessage\";\n    }\n    static _chatMessageClass() {\n        return ChatMessage;\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"generic\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            role: this.role\n        };\n    }\n}\n/**\n * Represents a chunk of a chat message, which can be concatenated with\n * other chat message chunks.\n */ class ChatMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"ChatMessageChunk\";\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    concat(chunk) {\n        return new ChatMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            role: this.role,\n            id: this.id ?? chunk.id\n        });\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            role: this.role\n        };\n    }\n}\nfunction isChatMessage(x) {\n    return x._getType() === \"generic\";\n}\nfunction isChatMessageChunk(x) {\n    return x._getType() === \"generic\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY2hhdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzRjtBQUN0Rjs7Q0FFQyxHQUNNLE1BQU1JLG9CQUFvQkosaURBQVdBO0lBQ3hDLE9BQU9LLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQSxPQUFPQyxvQkFBb0I7UUFDdkIsT0FBT0Y7SUFDWDtJQUNBRyxZQUFZQyxNQUFNLEVBQUVDLElBQUksQ0FBRTtRQUN0QixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qix1RkFBdUY7WUFDdkZBLFNBQVM7Z0JBQUVFLFNBQVNGO2dCQUFRQyxNQUFNQTtZQUFLO1FBQzNDO1FBQ0EsS0FBSyxDQUFDRDtRQUNORyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1AsSUFBSSxHQUFHRCxPQUFPQyxJQUFJO0lBQzNCO0lBQ0FRLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQSxPQUFPQyxXQUFXQyxPQUFPLEVBQUU7UUFDdkIsT0FBT0EsUUFBUUYsUUFBUSxPQUFPO0lBQ2xDO0lBQ0EsSUFBSUcsbUJBQW1CO1FBQ25CLE9BQU87WUFDSCxHQUFHLEtBQUssQ0FBQ0EsZ0JBQWdCO1lBQ3pCWCxNQUFNLElBQUksQ0FBQ0EsSUFBSTtRQUNuQjtJQUNKO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNWSx5QkFBeUJwQixzREFBZ0JBO0lBQ2xELE9BQU9JLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUUsWUFBWUMsTUFBTSxFQUFFQyxJQUFJLENBQUU7UUFDdEIsSUFBSSxPQUFPRCxXQUFXLFVBQVU7WUFDNUIsdUZBQXVGO1lBQ3ZGQSxTQUFTO2dCQUFFRSxTQUFTRjtnQkFBUUMsTUFBTUE7WUFBSztRQUMzQztRQUNBLEtBQUssQ0FBQ0Q7UUFDTkcsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNQLElBQUksR0FBR0QsT0FBT0MsSUFBSTtJQUMzQjtJQUNBUSxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FLLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYsaUJBQWlCO1lBQ3hCWCxTQUFTUixzREFBWUEsQ0FBQyxJQUFJLENBQUNRLE9BQU8sRUFBRWEsTUFBTWIsT0FBTztZQUNqRGMsbUJBQW1CckIscURBQVdBLENBQUMsSUFBSSxDQUFDcUIsaUJBQWlCLEVBQUVELE1BQU1DLGlCQUFpQjtZQUM5RUMsbUJBQW1CdEIscURBQVdBLENBQUMsSUFBSSxDQUFDc0IsaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RWhCLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZpQixJQUFJLElBQUksQ0FBQ0EsRUFBRSxJQUFJSCxNQUFNRyxFQUFFO1FBQzNCO0lBQ0o7SUFDQSxJQUFJTixtQkFBbUI7UUFDbkIsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxnQkFBZ0I7WUFDekJYLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1FBQ25CO0lBQ0o7QUFDSjtBQUNPLFNBQVNrQixjQUFjQyxDQUFDO0lBQzNCLE9BQU9BLEVBQUVYLFFBQVEsT0FBTztBQUM1QjtBQUNPLFNBQVNZLG1CQUFtQkQsQ0FBQztJQUNoQyxPQUFPQSxFQUFFWCxRQUFRLE9BQU87QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2NoYXQuanM/YzE3NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGF0IG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0TWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hhdE1lc3NhZ2VcIjtcbiAgICB9XG4gICAgc3RhdGljIF9jaGF0TWVzc2FnZUNsYXNzKCkge1xuICAgICAgICByZXR1cm4gQ2hhdE1lc3NhZ2U7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgcm9sZSkge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGNvbnRlbnQ6IGZpZWxkcywgcm9sZTogcm9sZSB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvbGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yb2xlID0gZmllbGRzLnJvbGU7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJnZW5lcmljXCI7XG4gICAgfVxuICAgIHN0YXRpYyBpc0luc3RhbmNlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJnZW5lcmljXCI7XG4gICAgfVxuICAgIGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIuX3ByaW50YWJsZUZpZWxkcyxcbiAgICAgICAgICAgIHJvbGU6IHRoaXMucm9sZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIGNoYXQgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBjaGF0IG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgQ2hhdE1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0TWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgcm9sZSkge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGNvbnRlbnQ6IGZpZWxkcywgcm9sZTogcm9sZSB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvbGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yb2xlID0gZmllbGRzLnJvbGU7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJnZW5lcmljXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIHJvbGU6IHRoaXMucm9sZSxcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkID8/IGNodW5rLmlkLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IF9wcmludGFibGVGaWVsZHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci5fcHJpbnRhYmxlRmllbGRzLFxuICAgICAgICAgICAgcm9sZTogdGhpcy5yb2xlLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0NoYXRNZXNzYWdlKHgpIHtcbiAgICByZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcImdlbmVyaWNcIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0NoYXRNZXNzYWdlQ2h1bmsoeCkge1xuICAgIHJldHVybiB4Ll9nZXRUeXBlKCkgPT09IFwiZ2VuZXJpY1wiO1xufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiQ2hhdE1lc3NhZ2UiLCJsY19uYW1lIiwiX2NoYXRNZXNzYWdlQ2xhc3MiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsInJvbGUiLCJjb250ZW50IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl9nZXRUeXBlIiwiaXNJbnN0YW5jZSIsIm1lc3NhZ2UiLCJfcHJpbnRhYmxlRmllbGRzIiwiQ2hhdE1lc3NhZ2VDaHVuayIsImNvbmNhdCIsImNodW5rIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImlkIiwiaXNDaGF0TWVzc2FnZSIsIngiLCJpc0NoYXRNZXNzYWdlQ2h1bmsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/content_blocks.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/content_blocks.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToOpenAIImageBlock: () => (/* binding */ convertToOpenAIImageBlock),\n/* harmony export */   convertToProviderContentBlock: () => (/* binding */ convertToProviderContentBlock),\n/* harmony export */   isBase64ContentBlock: () => (/* binding */ isBase64ContentBlock),\n/* harmony export */   isDataContentBlock: () => (/* binding */ isDataContentBlock),\n/* harmony export */   isIDContentBlock: () => (/* binding */ isIDContentBlock),\n/* harmony export */   isPlainTextContentBlock: () => (/* binding */ isPlainTextContentBlock),\n/* harmony export */   isURLContentBlock: () => (/* binding */ isURLContentBlock),\n/* harmony export */   parseBase64DataUrl: () => (/* binding */ parseBase64DataUrl),\n/* harmony export */   parseMimeType: () => (/* binding */ parseMimeType)\n/* harmony export */ });\nfunction isDataContentBlock(content_block) {\n    return typeof content_block === \"object\" && content_block !== null && \"type\" in content_block && typeof content_block.type === \"string\" && \"source_type\" in content_block && (content_block.source_type === \"url\" || content_block.source_type === \"base64\" || content_block.source_type === \"text\" || content_block.source_type === \"id\");\n}\nfunction isURLContentBlock(content_block) {\n    return isDataContentBlock(content_block) && content_block.source_type === \"url\" && \"url\" in content_block && typeof content_block.url === \"string\";\n}\nfunction isBase64ContentBlock(content_block) {\n    return isDataContentBlock(content_block) && content_block.source_type === \"base64\" && \"data\" in content_block && typeof content_block.data === \"string\";\n}\nfunction isPlainTextContentBlock(content_block) {\n    return isDataContentBlock(content_block) && content_block.source_type === \"text\" && \"text\" in content_block && typeof content_block.text === \"string\";\n}\nfunction isIDContentBlock(content_block) {\n    return isDataContentBlock(content_block) && content_block.source_type === \"id\" && \"id\" in content_block && typeof content_block.id === \"string\";\n}\nfunction convertToOpenAIImageBlock(content_block) {\n    if (isDataContentBlock(content_block)) {\n        if (content_block.source_type === \"url\") {\n            return {\n                type: \"image_url\",\n                image_url: {\n                    url: content_block.url\n                }\n            };\n        }\n        if (content_block.source_type === \"base64\") {\n            if (!content_block.mime_type) {\n                throw new Error(\"mime_type key is required for base64 data.\");\n            }\n            const mime_type = content_block.mime_type;\n            return {\n                type: \"image_url\",\n                image_url: {\n                    url: `data:${mime_type};base64,${content_block.data}`\n                }\n            };\n        }\n    }\n    throw new Error(\"Unsupported source type. Only 'url' and 'base64' are supported.\");\n}\n/**\n * Utility function for ChatModelProviders. Parses a mime type into a type, subtype, and parameters.\n *\n * @param mime_type - The mime type to parse.\n * @returns An object containing the type, subtype, and parameters.\n */ function parseMimeType(mime_type) {\n    const parts = mime_type.split(\";\")[0].split(\"/\");\n    if (parts.length !== 2) {\n        throw new Error(`Invalid mime type: \"${mime_type}\" - does not match type/subtype format.`);\n    }\n    const type = parts[0].trim();\n    const subtype = parts[1].trim();\n    if (type === \"\" || subtype === \"\") {\n        throw new Error(`Invalid mime type: \"${mime_type}\" - type or subtype is empty.`);\n    }\n    const parameters = {};\n    for (const parameterKvp of mime_type.split(\";\").slice(1)){\n        const parameterParts = parameterKvp.split(\"=\");\n        if (parameterParts.length !== 2) {\n            throw new Error(`Invalid parameter syntax in mime type: \"${mime_type}\".`);\n        }\n        const key = parameterParts[0].trim();\n        const value = parameterParts[1].trim();\n        if (key === \"\") {\n            throw new Error(`Invalid parameter syntax in mime type: \"${mime_type}\".`);\n        }\n        parameters[key] = value;\n    }\n    return {\n        type,\n        subtype,\n        parameters\n    };\n}\n/**\n * Utility function for ChatModelProviders. Parses a base64 data URL into a typed array or string.\n *\n * @param dataUrl - The base64 data URL to parse.\n * @param asTypedArray - Whether to return the data as a typed array.\n * @returns The parsed data and mime type, or undefined if the data URL is invalid.\n */ function parseBase64DataUrl({ dataUrl: data_url, asTypedArray = false }) {\n    const formatMatch = data_url.match(/^data:(\\w+\\/\\w+);base64,([A-Za-z0-9+/]+=*)$/);\n    let mime_type;\n    if (formatMatch) {\n        mime_type = formatMatch[1].toLowerCase();\n        const data = asTypedArray ? Uint8Array.from(atob(formatMatch[2]), (c)=>c.charCodeAt(0)) : formatMatch[2];\n        return {\n            mime_type,\n            data\n        };\n    }\n    return undefined;\n}\n/**\n * Convert from a standard data content block to a provider's proprietary data content block format.\n *\n * Don't override this method. Instead, override the more specific conversion methods and use this\n * method unmodified.\n *\n * @param block - The standard data content block to convert.\n * @returns The provider data content block.\n * @throws An error if the standard data content block type is not supported.\n */ function convertToProviderContentBlock(block, converter) {\n    if (block.type === \"text\") {\n        if (!converter.fromStandardTextBlock) {\n            throw new Error(`Converter for ${converter.providerName} does not implement \\`fromStandardTextBlock\\` method.`);\n        }\n        return converter.fromStandardTextBlock(block);\n    }\n    if (block.type === \"image\") {\n        if (!converter.fromStandardImageBlock) {\n            throw new Error(`Converter for ${converter.providerName} does not implement \\`fromStandardImageBlock\\` method.`);\n        }\n        return converter.fromStandardImageBlock(block);\n    }\n    if (block.type === \"audio\") {\n        if (!converter.fromStandardAudioBlock) {\n            throw new Error(`Converter for ${converter.providerName} does not implement \\`fromStandardAudioBlock\\` method.`);\n        }\n        return converter.fromStandardAudioBlock(block);\n    }\n    if (block.type === \"file\") {\n        if (!converter.fromStandardFileBlock) {\n            throw new Error(`Converter for ${converter.providerName} does not implement \\`fromStandardFileBlock\\` method.`);\n        }\n        return converter.fromStandardFileBlock(block);\n    }\n    throw new Error(`Unable to convert content block type '${block.type}' to provider-specific format: not recognized.`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY29udGVudF9ibG9ja3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQU8sU0FBU0EsbUJBQW1CQyxhQUFhO0lBQzVDLE9BQVEsT0FBT0Esa0JBQWtCLFlBQzdCQSxrQkFBa0IsUUFDbEIsVUFBVUEsaUJBQ1YsT0FBT0EsY0FBY0MsSUFBSSxLQUFLLFlBQzlCLGlCQUFpQkQsaUJBQ2hCQSxDQUFBQSxjQUFjRSxXQUFXLEtBQUssU0FDM0JGLGNBQWNFLFdBQVcsS0FBSyxZQUM5QkYsY0FBY0UsV0FBVyxLQUFLLFVBQzlCRixjQUFjRSxXQUFXLEtBQUssSUFBRztBQUM3QztBQUNPLFNBQVNDLGtCQUFrQkgsYUFBYTtJQUMzQyxPQUFRRCxtQkFBbUJDLGtCQUN2QkEsY0FBY0UsV0FBVyxLQUFLLFNBQzlCLFNBQVNGLGlCQUNULE9BQU9BLGNBQWNJLEdBQUcsS0FBSztBQUNyQztBQUNPLFNBQVNDLHFCQUFxQkwsYUFBYTtJQUM5QyxPQUFRRCxtQkFBbUJDLGtCQUN2QkEsY0FBY0UsV0FBVyxLQUFLLFlBQzlCLFVBQVVGLGlCQUNWLE9BQU9BLGNBQWNNLElBQUksS0FBSztBQUN0QztBQUNPLFNBQVNDLHdCQUF3QlAsYUFBYTtJQUNqRCxPQUFRRCxtQkFBbUJDLGtCQUN2QkEsY0FBY0UsV0FBVyxLQUFLLFVBQzlCLFVBQVVGLGlCQUNWLE9BQU9BLGNBQWNRLElBQUksS0FBSztBQUN0QztBQUNPLFNBQVNDLGlCQUFpQlQsYUFBYTtJQUMxQyxPQUFRRCxtQkFBbUJDLGtCQUN2QkEsY0FBY0UsV0FBVyxLQUFLLFFBQzlCLFFBQVFGLGlCQUNSLE9BQU9BLGNBQWNVLEVBQUUsS0FBSztBQUNwQztBQUNPLFNBQVNDLDBCQUEwQlgsYUFBYTtJQUNuRCxJQUFJRCxtQkFBbUJDLGdCQUFnQjtRQUNuQyxJQUFJQSxjQUFjRSxXQUFXLEtBQUssT0FBTztZQUNyQyxPQUFPO2dCQUNIRCxN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LHNCQUFzQixFQUFFO1lBQ25DLE1BQU0sSUFBSS9CLE1BQU0sQ0FBQyxjQUFjLEVBQUU0QixVQUFVRSxZQUFZLENBQUMsc0RBQXNELENBQUM7UUFDbkg7UUFDQSxPQUFPRixVQUFVRyxzQkFBc0IsQ0FBQ0o7SUFDNUM7SUFDQSxJQUFJQSxNQUFNeEMsSUFBSSxLQUFLLFNBQVM7UUFDeEIsSUFBSSxDQUFDeUMsVUFBVUksc0JBQXNCLEVBQUU7WUFDbkMsTUFBTSxJQUFJaEMsTUFBTSxDQUFDLGNBQWMsRUFBRTRCLFVBQVVFLFlBQVksQ0FBQyxzREFBc0QsQ0FBQztRQUNuSDtRQUNBLE9BQU9GLFVBQVVJLHNCQUFzQixDQUFDTDtJQUM1QztJQUNBLElBQUlBLE1BQU14QyxJQUFJLEtBQUssUUFBUTtRQUN2QixJQUFJLENBQUN5QyxVQUFVSyxxQkFBcUIsRUFBRTtZQUNsQyxNQUFNLElBQUlqQyxNQUFNLENBQUMsY0FBYyxFQUFFNEIsVUFBVUUsWUFBWSxDQUFDLHFEQUFxRCxDQUFDO1FBQ2xIO1FBQ0EsT0FBT0YsVUFBVUsscUJBQXFCLENBQUNOO0lBQzNDO0lBQ0EsTUFBTSxJQUFJM0IsTUFBTSxDQUFDLHNDQUFzQyxFQUFFMkIsTUFBTXhDLElBQUksQ0FBQyw4Q0FBOEMsQ0FBQztBQUN2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY29udGVudF9ibG9ja3MuanM/MWIzNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gaXNEYXRhQ29udGVudEJsb2NrKGNvbnRlbnRfYmxvY2spIHtcbiAgICByZXR1cm4gKHR5cGVvZiBjb250ZW50X2Jsb2NrID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIGNvbnRlbnRfYmxvY2sgIT09IG51bGwgJiZcbiAgICAgICAgXCJ0eXBlXCIgaW4gY29udGVudF9ibG9jayAmJlxuICAgICAgICB0eXBlb2YgY29udGVudF9ibG9jay50eXBlID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIFwic291cmNlX3R5cGVcIiBpbiBjb250ZW50X2Jsb2NrICYmXG4gICAgICAgIChjb250ZW50X2Jsb2NrLnNvdXJjZV90eXBlID09PSBcInVybFwiIHx8XG4gICAgICAgICAgICBjb250ZW50X2Jsb2NrLnNvdXJjZV90eXBlID09PSBcImJhc2U2NFwiIHx8XG4gICAgICAgICAgICBjb250ZW50X2Jsb2NrLnNvdXJjZV90eXBlID09PSBcInRleHRcIiB8fFxuICAgICAgICAgICAgY29udGVudF9ibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJpZFwiKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNVUkxDb250ZW50QmxvY2soY29udGVudF9ibG9jaykge1xuICAgIHJldHVybiAoaXNEYXRhQ29udGVudEJsb2NrKGNvbnRlbnRfYmxvY2spICYmXG4gICAgICAgIGNvbnRlbnRfYmxvY2suc291cmNlX3R5cGUgPT09IFwidXJsXCIgJiZcbiAgICAgICAgXCJ1cmxcIiBpbiBjb250ZW50X2Jsb2NrICYmXG4gICAgICAgIHR5cGVvZiBjb250ZW50X2Jsb2NrLnVybCA9PT0gXCJzdHJpbmdcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlNjRDb250ZW50QmxvY2soY29udGVudF9ibG9jaykge1xuICAgIHJldHVybiAoaXNEYXRhQ29udGVudEJsb2NrKGNvbnRlbnRfYmxvY2spICYmXG4gICAgICAgIGNvbnRlbnRfYmxvY2suc291cmNlX3R5cGUgPT09IFwiYmFzZTY0XCIgJiZcbiAgICAgICAgXCJkYXRhXCIgaW4gY29udGVudF9ibG9jayAmJlxuICAgICAgICB0eXBlb2YgY29udGVudF9ibG9jay5kYXRhID09PSBcInN0cmluZ1wiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWluVGV4dENvbnRlbnRCbG9jayhjb250ZW50X2Jsb2NrKSB7XG4gICAgcmV0dXJuIChpc0RhdGFDb250ZW50QmxvY2soY29udGVudF9ibG9jaykgJiZcbiAgICAgICAgY29udGVudF9ibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJ0ZXh0XCIgJiZcbiAgICAgICAgXCJ0ZXh0XCIgaW4gY29udGVudF9ibG9jayAmJlxuICAgICAgICB0eXBlb2YgY29udGVudF9ibG9jay50ZXh0ID09PSBcInN0cmluZ1wiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0lEQ29udGVudEJsb2NrKGNvbnRlbnRfYmxvY2spIHtcbiAgICByZXR1cm4gKGlzRGF0YUNvbnRlbnRCbG9jayhjb250ZW50X2Jsb2NrKSAmJlxuICAgICAgICBjb250ZW50X2Jsb2NrLnNvdXJjZV90eXBlID09PSBcImlkXCIgJiZcbiAgICAgICAgXCJpZFwiIGluIGNvbnRlbnRfYmxvY2sgJiZcbiAgICAgICAgdHlwZW9mIGNvbnRlbnRfYmxvY2suaWQgPT09IFwic3RyaW5nXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb09wZW5BSUltYWdlQmxvY2soY29udGVudF9ibG9jaykge1xuICAgIGlmIChpc0RhdGFDb250ZW50QmxvY2soY29udGVudF9ibG9jaykpIHtcbiAgICAgICAgaWYgKGNvbnRlbnRfYmxvY2suc291cmNlX3R5cGUgPT09IFwidXJsXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBjb250ZW50X2Jsb2NrLnVybCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGVudF9ibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgaWYgKCFjb250ZW50X2Jsb2NrLm1pbWVfdHlwZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1pbWVfdHlwZSBrZXkgaXMgcmVxdWlyZWQgZm9yIGJhc2U2NCBkYXRhLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1pbWVfdHlwZSA9IGNvbnRlbnRfYmxvY2subWltZV90eXBlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlX3VybFwiLFxuICAgICAgICAgICAgICAgIGltYWdlX3VybDoge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IGBkYXRhOiR7bWltZV90eXBlfTtiYXNlNjQsJHtjb250ZW50X2Jsb2NrLmRhdGF9YCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBzb3VyY2UgdHlwZS4gT25seSAndXJsJyBhbmQgJ2Jhc2U2NCcgYXJlIHN1cHBvcnRlZC5cIik7XG59XG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIENoYXRNb2RlbFByb3ZpZGVycy4gUGFyc2VzIGEgbWltZSB0eXBlIGludG8gYSB0eXBlLCBzdWJ0eXBlLCBhbmQgcGFyYW1ldGVycy5cbiAqXG4gKiBAcGFyYW0gbWltZV90eXBlIC0gVGhlIG1pbWUgdHlwZSB0byBwYXJzZS5cbiAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSB0eXBlLCBzdWJ0eXBlLCBhbmQgcGFyYW1ldGVycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTWltZVR5cGUobWltZV90eXBlKSB7XG4gICAgY29uc3QgcGFydHMgPSBtaW1lX3R5cGUuc3BsaXQoXCI7XCIpWzBdLnNwbGl0KFwiL1wiKTtcbiAgICBpZiAocGFydHMubGVuZ3RoICE9PSAyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtaW1lIHR5cGU6IFwiJHttaW1lX3R5cGV9XCIgLSBkb2VzIG5vdCBtYXRjaCB0eXBlL3N1YnR5cGUgZm9ybWF0LmApO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gcGFydHNbMF0udHJpbSgpO1xuICAgIGNvbnN0IHN1YnR5cGUgPSBwYXJ0c1sxXS50cmltKCk7XG4gICAgaWYgKHR5cGUgPT09IFwiXCIgfHwgc3VidHlwZSA9PT0gXCJcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbWltZSB0eXBlOiBcIiR7bWltZV90eXBlfVwiIC0gdHlwZSBvciBzdWJ0eXBlIGlzIGVtcHR5LmApO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbWV0ZXJzID0ge307XG4gICAgZm9yIChjb25zdCBwYXJhbWV0ZXJLdnAgb2YgbWltZV90eXBlLnNwbGl0KFwiO1wiKS5zbGljZSgxKSkge1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXJQYXJ0cyA9IHBhcmFtZXRlckt2cC5zcGxpdChcIj1cIik7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJQYXJ0cy5sZW5ndGggIT09IDIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwYXJhbWV0ZXIgc3ludGF4IGluIG1pbWUgdHlwZTogXCIke21pbWVfdHlwZX1cIi5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXkgPSBwYXJhbWV0ZXJQYXJ0c1swXS50cmltKCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcGFyYW1ldGVyUGFydHNbMV0udHJpbSgpO1xuICAgICAgICBpZiAoa2V5ID09PSBcIlwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcGFyYW1ldGVyIHN5bnRheCBpbiBtaW1lIHR5cGU6IFwiJHttaW1lX3R5cGV9XCIuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyYW1ldGVyc1trZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGUsXG4gICAgICAgIHN1YnR5cGUsXG4gICAgICAgIHBhcmFtZXRlcnMsXG4gICAgfTtcbn1cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgQ2hhdE1vZGVsUHJvdmlkZXJzLiBQYXJzZXMgYSBiYXNlNjQgZGF0YSBVUkwgaW50byBhIHR5cGVkIGFycmF5IG9yIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0gZGF0YVVybCAtIFRoZSBiYXNlNjQgZGF0YSBVUkwgdG8gcGFyc2UuXG4gKiBAcGFyYW0gYXNUeXBlZEFycmF5IC0gV2hldGhlciB0byByZXR1cm4gdGhlIGRhdGEgYXMgYSB0eXBlZCBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgZGF0YSBhbmQgbWltZSB0eXBlLCBvciB1bmRlZmluZWQgaWYgdGhlIGRhdGEgVVJMIGlzIGludmFsaWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJhc2U2NERhdGFVcmwoeyBkYXRhVXJsOiBkYXRhX3VybCwgYXNUeXBlZEFycmF5ID0gZmFsc2UsIH0pIHtcbiAgICBjb25zdCBmb3JtYXRNYXRjaCA9IGRhdGFfdXJsLm1hdGNoKC9eZGF0YTooXFx3K1xcL1xcdyspO2Jhc2U2NCwoW0EtWmEtejAtOSsvXSs9KikkLyk7XG4gICAgbGV0IG1pbWVfdHlwZTtcbiAgICBpZiAoZm9ybWF0TWF0Y2gpIHtcbiAgICAgICAgbWltZV90eXBlID0gZm9ybWF0TWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGFzVHlwZWRBcnJheVxuICAgICAgICAgICAgPyBVaW50OEFycmF5LmZyb20oYXRvYihmb3JtYXRNYXRjaFsyXSksIChjKSA9PiBjLmNoYXJDb2RlQXQoMCkpXG4gICAgICAgICAgICA6IGZvcm1hdE1hdGNoWzJdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWltZV90eXBlLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogQ29udmVydCBmcm9tIGEgc3RhbmRhcmQgZGF0YSBjb250ZW50IGJsb2NrIHRvIGEgcHJvdmlkZXIncyBwcm9wcmlldGFyeSBkYXRhIGNvbnRlbnQgYmxvY2sgZm9ybWF0LlxuICpcbiAqIERvbid0IG92ZXJyaWRlIHRoaXMgbWV0aG9kLiBJbnN0ZWFkLCBvdmVycmlkZSB0aGUgbW9yZSBzcGVjaWZpYyBjb252ZXJzaW9uIG1ldGhvZHMgYW5kIHVzZSB0aGlzXG4gKiBtZXRob2QgdW5tb2RpZmllZC5cbiAqXG4gKiBAcGFyYW0gYmxvY2sgLSBUaGUgc3RhbmRhcmQgZGF0YSBjb250ZW50IGJsb2NrIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyBUaGUgcHJvdmlkZXIgZGF0YSBjb250ZW50IGJsb2NrLlxuICogQHRocm93cyBBbiBlcnJvciBpZiB0aGUgc3RhbmRhcmQgZGF0YSBjb250ZW50IGJsb2NrIHR5cGUgaXMgbm90IHN1cHBvcnRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb1Byb3ZpZGVyQ29udGVudEJsb2NrKGJsb2NrLCBjb252ZXJ0ZXIpIHtcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgaWYgKCFjb252ZXJ0ZXIuZnJvbVN0YW5kYXJkVGV4dEJsb2NrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbnZlcnRlciBmb3IgJHtjb252ZXJ0ZXIucHJvdmlkZXJOYW1lfSBkb2VzIG5vdCBpbXBsZW1lbnQgXFxgZnJvbVN0YW5kYXJkVGV4dEJsb2NrXFxgIG1ldGhvZC5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udmVydGVyLmZyb21TdGFuZGFyZFRleHRCbG9jayhibG9jayk7XG4gICAgfVxuICAgIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgaWYgKCFjb252ZXJ0ZXIuZnJvbVN0YW5kYXJkSW1hZ2VCbG9jaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb252ZXJ0ZXIgZm9yICR7Y29udmVydGVyLnByb3ZpZGVyTmFtZX0gZG9lcyBub3QgaW1wbGVtZW50IFxcYGZyb21TdGFuZGFyZEltYWdlQmxvY2tcXGAgbWV0aG9kLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb252ZXJ0ZXIuZnJvbVN0YW5kYXJkSW1hZ2VCbG9jayhibG9jayk7XG4gICAgfVxuICAgIGlmIChibG9jay50eXBlID09PSBcImF1ZGlvXCIpIHtcbiAgICAgICAgaWYgKCFjb252ZXJ0ZXIuZnJvbVN0YW5kYXJkQXVkaW9CbG9jaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb252ZXJ0ZXIgZm9yICR7Y29udmVydGVyLnByb3ZpZGVyTmFtZX0gZG9lcyBub3QgaW1wbGVtZW50IFxcYGZyb21TdGFuZGFyZEF1ZGlvQmxvY2tcXGAgbWV0aG9kLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb252ZXJ0ZXIuZnJvbVN0YW5kYXJkQXVkaW9CbG9jayhibG9jayk7XG4gICAgfVxuICAgIGlmIChibG9jay50eXBlID09PSBcImZpbGVcIikge1xuICAgICAgICBpZiAoIWNvbnZlcnRlci5mcm9tU3RhbmRhcmRGaWxlQmxvY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29udmVydGVyIGZvciAke2NvbnZlcnRlci5wcm92aWRlck5hbWV9IGRvZXMgbm90IGltcGxlbWVudCBcXGBmcm9tU3RhbmRhcmRGaWxlQmxvY2tcXGAgbWV0aG9kLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb252ZXJ0ZXIuZnJvbVN0YW5kYXJkRmlsZUJsb2NrKGJsb2NrKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gY29udmVydCBjb250ZW50IGJsb2NrIHR5cGUgJyR7YmxvY2sudHlwZX0nIHRvIHByb3ZpZGVyLXNwZWNpZmljIGZvcm1hdDogbm90IHJlY29nbml6ZWQuYCk7XG59XG4iXSwibmFtZXMiOlsiaXNEYXRhQ29udGVudEJsb2NrIiwiY29udGVudF9ibG9jayIsInR5cGUiLCJzb3VyY2VfdHlwZSIsImlzVVJMQ29udGVudEJsb2NrIiwidXJsIiwiaXNCYXNlNjRDb250ZW50QmxvY2siLCJkYXRhIiwiaXNQbGFpblRleHRDb250ZW50QmxvY2siLCJ0ZXh0IiwiaXNJRENvbnRlbnRCbG9jayIsImlkIiwiY29udmVydFRvT3BlbkFJSW1hZ2VCbG9jayIsImltYWdlX3VybCIsIm1pbWVfdHlwZSIsIkVycm9yIiwicGFyc2VNaW1lVHlwZSIsInBhcnRzIiwic3BsaXQiLCJsZW5ndGgiLCJ0cmltIiwic3VidHlwZSIsInBhcmFtZXRlcnMiLCJwYXJhbWV0ZXJLdnAiLCJzbGljZSIsInBhcmFtZXRlclBhcnRzIiwia2V5IiwidmFsdWUiLCJwYXJzZUJhc2U2NERhdGFVcmwiLCJkYXRhVXJsIiwiZGF0YV91cmwiLCJhc1R5cGVkQXJyYXkiLCJmb3JtYXRNYXRjaCIsIm1hdGNoIiwidG9Mb3dlckNhc2UiLCJVaW50OEFycmF5IiwiZnJvbSIsImF0b2IiLCJjIiwiY2hhckNvZGVBdCIsInVuZGVmaW5lZCIsImNvbnZlcnRUb1Byb3ZpZGVyQ29udGVudEJsb2NrIiwiYmxvY2siLCJjb252ZXJ0ZXIiLCJmcm9tU3RhbmRhcmRUZXh0QmxvY2siLCJwcm92aWRlck5hbWUiLCJmcm9tU3RhbmRhcmRJbWFnZUJsb2NrIiwiZnJvbVN0YW5kYXJkQXVkaW9CbG9jayIsImZyb21TdGFuZGFyZEZpbGVCbG9jayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/content_blocks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/function.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/function.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FunctionMessage: () => (/* binding */ FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* binding */ FunctionMessageChunk),\n/* harmony export */   isFunctionMessage: () => (/* binding */ isFunctionMessage),\n/* harmony export */   isFunctionMessageChunk: () => (/* binding */ isFunctionMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a function message in a conversation.\n */ class FunctionMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"FunctionMessage\";\n    }\n    constructor(fields, /** @deprecated */ name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name: name\n            };\n        }\n        super(fields);\n    }\n    _getType() {\n        return \"function\";\n    }\n}\n/**\n * Represents a chunk of a function message, which can be concatenated\n * with other function message chunks.\n */ class FunctionMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"FunctionMessageChunk\";\n    }\n    _getType() {\n        return \"function\";\n    }\n    concat(chunk) {\n        return new FunctionMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            name: this.name ?? \"\",\n            id: this.id ?? chunk.id\n        });\n    }\n}\nfunction isFunctionMessage(x) {\n    return x._getType() === \"function\";\n}\nfunction isFunctionMessageChunk(x) {\n    return x._getType() === \"function\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvZnVuY3Rpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSx3QkFBd0JKLGlEQUFXQTtJQUM1QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxJQUFJLENBQUU7UUFDRixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qix1RkFBdUY7WUFDdkZBLFNBQVM7Z0JBQUVFLFNBQVNGO2dCQUFRQyxNQUFNQTtZQUFLO1FBQzNDO1FBQ0EsS0FBSyxDQUFDRDtJQUNWO0lBQ0FHLFdBQVc7UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLDZCQUE2QlYsc0RBQWdCQTtJQUN0RCxPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FLLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUUsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixxQkFBcUI7WUFDNUJGLFNBQVNQLHNEQUFZQSxDQUFDLElBQUksQ0FBQ08sT0FBTyxFQUFFSSxNQUFNSixPQUFPO1lBQ2pESyxtQkFBbUJYLHFEQUFXQSxDQUFDLElBQUksQ0FBQ1csaUJBQWlCLEVBQUVELE1BQU1DLGlCQUFpQjtZQUM5RUMsbUJBQW1CWixxREFBV0EsQ0FBQyxJQUFJLENBQUNZLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVQLE1BQU0sSUFBSSxDQUFDQSxJQUFJLElBQUk7WUFDbkJRLElBQUksSUFBSSxDQUFDQSxFQUFFLElBQUlILE1BQU1HLEVBQUU7UUFDM0I7SUFDSjtBQUNKO0FBQ08sU0FBU0Msa0JBQWtCQyxDQUFDO0lBQy9CLE9BQU9BLEVBQUVSLFFBQVEsT0FBTztBQUM1QjtBQUNPLFNBQVNTLHVCQUF1QkQsQ0FBQztJQUNwQyxPQUFPQSxFQUFFUixRQUFRLE9BQU87QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Z1bmN0aW9uLmpzPzg5YTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlQ2h1bmssIG1lcmdlQ29udGVudCwgX21lcmdlRGljdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgZnVuY3Rpb24gbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEZ1bmN0aW9uTWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRnVuY3Rpb25NZXNzYWdlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAgbmFtZSkge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGNvbnRlbnQ6IGZpZWxkcywgbmFtZTogbmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgZnVuY3Rpb24gbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZFxuICogd2l0aCBvdGhlciBmdW5jdGlvbiBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEZ1bmN0aW9uTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkZ1bmN0aW9uTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbk1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lID8/IFwiXCIsXG4gICAgICAgICAgICBpZDogdGhpcy5pZCA/PyBjaHVuay5pZCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb25NZXNzYWdlKHgpIHtcbiAgICByZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcImZ1bmN0aW9uXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbk1lc3NhZ2VDaHVuayh4KSB7XG4gICAgcmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJmdW5jdGlvblwiO1xufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiRnVuY3Rpb25NZXNzYWdlIiwibGNfbmFtZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwibmFtZSIsImNvbnRlbnQiLCJfZ2V0VHlwZSIsIkZ1bmN0aW9uTWVzc2FnZUNodW5rIiwiY29uY2F0IiwiY2h1bmsiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJlc3BvbnNlX21ldGFkYXRhIiwiaWQiLCJpc0Z1bmN0aW9uTWVzc2FnZSIsIngiLCJpc0Z1bmN0aW9uTWVzc2FnZUNodW5rIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/function.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/human.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/human.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HumanMessage: () => (/* binding */ HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* binding */ HumanMessageChunk),\n/* harmony export */   isHumanMessage: () => (/* binding */ isHumanMessage),\n/* harmony export */   isHumanMessageChunk: () => (/* binding */ isHumanMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a human message in a conversation.\n */ class HumanMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"HumanMessage\";\n    }\n    _getType() {\n        return \"human\";\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        super(fields, kwargs);\n    }\n}\n/**\n * Represents a chunk of a human message, which can be concatenated with\n * other human message chunks.\n */ class HumanMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"HumanMessageChunk\";\n    }\n    _getType() {\n        return \"human\";\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        super(fields, kwargs);\n    }\n    concat(chunk) {\n        return new HumanMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            id: this.id ?? chunk.id\n        });\n    }\n}\nfunction isHumanMessage(x) {\n    return x.getType() === \"human\";\n}\nfunction isHumanMessageChunk(x) {\n    return x.getType() === \"human\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaHVtYW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSxxQkFBcUJKLGlEQUFXQTtJQUN6QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUMsWUFBWUMsTUFBTSxFQUNsQixnQkFBZ0IsR0FDaEJDLE1BQU0sQ0FBRTtRQUNKLEtBQUssQ0FBQ0QsUUFBUUM7SUFDbEI7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLDBCQUEwQlQsc0RBQWdCQTtJQUNuRCxPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUMsWUFBWUMsTUFBTSxFQUNsQixnQkFBZ0IsR0FDaEJDLE1BQU0sQ0FBRTtRQUNKLEtBQUssQ0FBQ0QsUUFBUUM7SUFDbEI7SUFDQUUsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixrQkFBa0I7WUFDekJHLFNBQVNYLHNEQUFZQSxDQUFDLElBQUksQ0FBQ1csT0FBTyxFQUFFRCxNQUFNQyxPQUFPO1lBQ2pEQyxtQkFBbUJYLHFEQUFXQSxDQUFDLElBQUksQ0FBQ1csaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RUMsbUJBQW1CWixxREFBV0EsQ0FBQyxJQUFJLENBQUNZLGlCQUFpQixFQUFFSCxNQUFNRyxpQkFBaUI7WUFDOUVDLElBQUksSUFBSSxDQUFDQSxFQUFFLElBQUlKLE1BQU1JLEVBQUU7UUFDM0I7SUFDSjtBQUNKO0FBQ08sU0FBU0MsZUFBZUMsQ0FBQztJQUM1QixPQUFPQSxFQUFFQyxPQUFPLE9BQU87QUFDM0I7QUFDTyxTQUFTQyxvQkFBb0JGLENBQUM7SUFDakMsT0FBT0EsRUFBRUMsT0FBTyxPQUFPO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9odW1hbi5qcz83MjE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIGh1bWFuIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBIdW1hbk1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkh1bWFuTWVzc2FnZVwiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHVtYW5cIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBrd2FyZ3MpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzLCBrd2FyZ3MpO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgaHVtYW4gbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBodW1hbiBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEh1bWFuTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkh1bWFuTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJodW1hblwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIGt3YXJncykge1xuICAgICAgICBzdXBlcihmaWVsZHMsIGt3YXJncyk7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgICAgICBpZDogdGhpcy5pZCA/PyBjaHVuay5pZCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzSHVtYW5NZXNzYWdlKHgpIHtcbiAgICByZXR1cm4geC5nZXRUeXBlKCkgPT09IFwiaHVtYW5cIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0h1bWFuTWVzc2FnZUNodW5rKHgpIHtcbiAgICByZXR1cm4geC5nZXRUeXBlKCkgPT09IFwiaHVtYW5cIjtcbn1cbiJdLCJuYW1lcyI6WyJCYXNlTWVzc2FnZSIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJtZXJnZUNvbnRlbnQiLCJfbWVyZ2VEaWN0cyIsIkh1bWFuTWVzc2FnZSIsImxjX25hbWUiLCJfZ2V0VHlwZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwia3dhcmdzIiwiSHVtYW5NZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImNvbnRlbnQiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJlc3BvbnNlX21ldGFkYXRhIiwiaWQiLCJpc0h1bWFuTWVzc2FnZSIsIngiLCJnZXRUeXBlIiwiaXNIdW1hbk1lc3NhZ2VDaHVuayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/human.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessageChunk),\n/* harmony export */   RemoveMessage: () => (/* reexport safe */ _modifier_js__WEBPACK_IMPORTED_MODULE_8__.RemoveMessage),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_10__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_10__.ToolMessageChunk),\n/* harmony export */   _isMessageFieldWithRole: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._isMessageFieldWithRole),\n/* harmony export */   _mergeDicts: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts),\n/* harmony export */   _mergeLists: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists),\n/* harmony export */   _mergeObj: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeObj),\n/* harmony export */   _mergeStatus: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeStatus),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.convertToChunk),\n/* harmony export */   convertToOpenAIImageBlock: () => (/* reexport safe */ _content_blocks_js__WEBPACK_IMPORTED_MODULE_9__.convertToOpenAIImageBlock),\n/* harmony export */   convertToProviderContentBlock: () => (/* reexport safe */ _content_blocks_js__WEBPACK_IMPORTED_MODULE_9__.convertToProviderContentBlock),\n/* harmony export */   defaultTextSplitter: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_7__.defaultTextSplitter),\n/* harmony export */   filterMessages: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_7__.filterMessages),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.getBufferString),\n/* harmony export */   isAIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessage),\n/* harmony export */   isAIMessageChunk: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessageChunk),\n/* harmony export */   isBase64ContentBlock: () => (/* reexport safe */ _content_blocks_js__WEBPACK_IMPORTED_MODULE_9__.isBase64ContentBlock),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessageChunk),\n/* harmony export */   isChatMessage: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.isChatMessage),\n/* harmony export */   isChatMessageChunk: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.isChatMessageChunk),\n/* harmony export */   isDataContentBlock: () => (/* reexport safe */ _content_blocks_js__WEBPACK_IMPORTED_MODULE_9__.isDataContentBlock),\n/* harmony export */   isFunctionMessage: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.isFunctionMessage),\n/* harmony export */   isFunctionMessageChunk: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.isFunctionMessageChunk),\n/* harmony export */   isHumanMessage: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.isHumanMessage),\n/* harmony export */   isHumanMessageChunk: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.isHumanMessageChunk),\n/* harmony export */   isIDContentBlock: () => (/* reexport safe */ _content_blocks_js__WEBPACK_IMPORTED_MODULE_9__.isIDContentBlock),\n/* harmony export */   isOpenAIToolCallArray: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isOpenAIToolCallArray),\n/* harmony export */   isPlainTextContentBlock: () => (/* reexport safe */ _content_blocks_js__WEBPACK_IMPORTED_MODULE_9__.isPlainTextContentBlock),\n/* harmony export */   isSystemMessage: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.isSystemMessage),\n/* harmony export */   isSystemMessageChunk: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.isSystemMessageChunk),\n/* harmony export */   isToolMessage: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_10__.isToolMessage),\n/* harmony export */   isToolMessageChunk: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_10__.isToolMessageChunk),\n/* harmony export */   isURLContentBlock: () => (/* reexport safe */ _content_blocks_js__WEBPACK_IMPORTED_MODULE_9__.isURLContentBlock),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapStoredMessagesToChatMessages),\n/* harmony export */   mergeContent: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent),\n/* harmony export */   mergeMessageRuns: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_7__.mergeMessageRuns),\n/* harmony export */   parseBase64DataUrl: () => (/* reexport safe */ _content_blocks_js__WEBPACK_IMPORTED_MODULE_9__.parseBase64DataUrl),\n/* harmony export */   parseMimeType: () => (/* reexport safe */ _content_blocks_js__WEBPACK_IMPORTED_MODULE_9__.parseMimeType),\n/* harmony export */   trimMessages: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_7__.trimMessages)\n/* harmony export */ });\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _transformers_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./transformers.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/transformers.js\");\n/* harmony import */ var _modifier_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./modifier.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/modifier.js\");\n/* harmony import */ var _content_blocks_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./content_blocks.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/content_blocks.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\n\n\n\n// TODO: Use a star export when we deprecate the\n// existing \"ToolCall\" type in \"base.js\".\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0U7QUFDQTtBQUNJO0FBQ0g7QUFDQztBQUNEO0FBQ087QUFDSjtBQUNNO0FBQ3BDLGdEQUFnRDtBQUNoRCx5Q0FBeUM7QUFDcUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2luZGV4LmpzP2IxYzgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vYWkuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NoYXQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2Z1bmN0aW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9odW1hbi5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3lzdGVtLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91dGlscy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdHJhbnNmb3JtZXJzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9tb2RpZmllci5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY29udGVudF9ibG9ja3MuanNcIjtcbi8vIFRPRE86IFVzZSBhIHN0YXIgZXhwb3J0IHdoZW4gd2UgZGVwcmVjYXRlIHRoZVxuLy8gZXhpc3RpbmcgXCJUb29sQ2FsbFwiIHR5cGUgaW4gXCJiYXNlLmpzXCIuXG5leHBvcnQgeyBUb29sTWVzc2FnZSwgVG9vbE1lc3NhZ2VDaHVuaywgaXNUb29sTWVzc2FnZSwgaXNUb29sTWVzc2FnZUNodW5rLCB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbiJdLCJuYW1lcyI6WyJUb29sTWVzc2FnZSIsIlRvb2xNZXNzYWdlQ2h1bmsiLCJpc1Rvb2xNZXNzYWdlIiwiaXNUb29sTWVzc2FnZUNodW5rIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/modifier.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/modifier.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RemoveMessage: () => (/* binding */ RemoveMessage)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Message responsible for deleting other messages.\n */ class RemoveMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    constructor(fields){\n        super({\n            ...fields,\n            content: \"\"\n        });\n        /**\n         * The ID of the message to remove.\n         */ Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.id = fields.id;\n    }\n    _getType() {\n        return \"remove\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            id: this.id\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvbW9kaWZpZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFDeEM7O0NBRUMsR0FDTSxNQUFNQyxzQkFBc0JELGlEQUFXQTtJQUMxQ0UsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQztZQUNGLEdBQUdBLE1BQU07WUFDVEMsU0FBUztRQUNiO1FBQ0E7O1NBRUMsR0FDREMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxNQUFNO1lBQzlCQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLEVBQUUsR0FBR1IsT0FBT1EsRUFBRTtJQUN2QjtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0EsSUFBSUMsbUJBQW1CO1FBQ25CLE9BQU87WUFDSCxHQUFHLEtBQUssQ0FBQ0EsZ0JBQWdCO1lBQ3pCRixJQUFJLElBQUksQ0FBQ0EsRUFBRTtRQUNmO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvbW9kaWZpZXIuanM/MWU4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogTWVzc2FnZSByZXNwb25zaWJsZSBmb3IgZGVsZXRpbmcgb3RoZXIgbWVzc2FnZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZW1vdmVNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICBjb250ZW50OiBcIlwiLFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBJRCBvZiB0aGUgbWVzc2FnZSB0byByZW1vdmUuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmlkID0gZmllbGRzLmlkO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwicmVtb3ZlXCI7XG4gICAgfVxuICAgIGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIuX3ByaW50YWJsZUZpZWxkcyxcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlTWVzc2FnZSIsIlJlbW92ZU1lc3NhZ2UiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsImNvbnRlbnQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiaWQiLCJfZ2V0VHlwZSIsIl9wcmludGFibGVGaWVsZHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/modifier.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/system.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/system.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SystemMessage: () => (/* binding */ SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* binding */ SystemMessageChunk),\n/* harmony export */   isSystemMessage: () => (/* binding */ isSystemMessage),\n/* harmony export */   isSystemMessageChunk: () => (/* binding */ isSystemMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a system message in a conversation.\n */ class SystemMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"SystemMessage\";\n    }\n    _getType() {\n        return \"system\";\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        super(fields, kwargs);\n    }\n}\n/**\n * Represents a chunk of a system message, which can be concatenated with\n * other system message chunks.\n */ class SystemMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"SystemMessageChunk\";\n    }\n    _getType() {\n        return \"system\";\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        super(fields, kwargs);\n    }\n    concat(chunk) {\n        return new SystemMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            id: this.id ?? chunk.id\n        });\n    }\n}\nfunction isSystemMessage(x) {\n    return x._getType() === \"system\";\n}\nfunction isSystemMessageChunk(x) {\n    return x._getType() === \"system\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvc3lzdGVtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXNGO0FBQ3RGOztDQUVDLEdBQ00sTUFBTUksc0JBQXNCSixpREFBV0E7SUFDMUMsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxNQUFNLENBQUU7UUFDSixLQUFLLENBQUNELFFBQVFDO0lBQ2xCO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNQywyQkFBMkJULHNEQUFnQkE7SUFDcEQsT0FBT0ksVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxNQUFNLENBQUU7UUFDSixLQUFLLENBQUNELFFBQVFDO0lBQ2xCO0lBQ0FFLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYsbUJBQW1CO1lBQzFCRyxTQUFTWCxzREFBWUEsQ0FBQyxJQUFJLENBQUNXLE9BQU8sRUFBRUQsTUFBTUMsT0FBTztZQUNqREMsbUJBQW1CWCxxREFBV0EsQ0FBQyxJQUFJLENBQUNXLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVDLG1CQUFtQloscURBQVdBLENBQUMsSUFBSSxDQUFDWSxpQkFBaUIsRUFBRUgsTUFBTUcsaUJBQWlCO1lBQzlFQyxJQUFJLElBQUksQ0FBQ0EsRUFBRSxJQUFJSixNQUFNSSxFQUFFO1FBQzNCO0lBQ0o7QUFDSjtBQUNPLFNBQVNDLGdCQUFnQkMsQ0FBQztJQUM3QixPQUFPQSxFQUFFWixRQUFRLE9BQU87QUFDNUI7QUFDTyxTQUFTYSxxQkFBcUJELENBQUM7SUFDbEMsT0FBT0EsRUFBRVosUUFBUSxPQUFPO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9zeXN0ZW0uanM/ZTViNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBzeXN0ZW0gbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbU1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlN5c3RlbU1lc3NhZ2VcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIGt3YXJncykge1xuICAgICAgICBzdXBlcihmaWVsZHMsIGt3YXJncyk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBzeXN0ZW0gbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBzeXN0ZW0gbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1NZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3lzdGVtTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJzeXN0ZW1cIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBrd2FyZ3MpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzLCBrd2FyZ3MpO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkID8/IGNodW5rLmlkLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTeXN0ZW1NZXNzYWdlKHgpIHtcbiAgICByZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcInN5c3RlbVwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU3lzdGVtTWVzc2FnZUNodW5rKHgpIHtcbiAgICByZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcInN5c3RlbVwiO1xufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiU3lzdGVtTWVzc2FnZSIsImxjX25hbWUiLCJfZ2V0VHlwZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwia3dhcmdzIiwiU3lzdGVtTWVzc2FnZUNodW5rIiwiY29uY2F0IiwiY2h1bmsiLCJjb250ZW50IiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImlkIiwiaXNTeXN0ZW1NZXNzYWdlIiwieCIsImlzU3lzdGVtTWVzc2FnZUNodW5rIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/system.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/tool.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/tool.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolMessage: () => (/* binding */ ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* binding */ ToolMessageChunk),\n/* harmony export */   defaultToolCallParser: () => (/* binding */ defaultToolCallParser),\n/* harmony export */   isDirectToolOutput: () => (/* binding */ isDirectToolOutput),\n/* harmony export */   isToolMessage: () => (/* binding */ isToolMessage),\n/* harmony export */   isToolMessageChunk: () => (/* binding */ isToolMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\nfunction isDirectToolOutput(x) {\n    return x != null && typeof x === \"object\" && \"lc_direct_tool_output\" in x && x.lc_direct_tool_output === true;\n}\n/**\n * Represents a tool message in a conversation.\n */ class ToolMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ToolMessage\";\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            tool_call_id: \"tool_call_id\"\n        };\n    }\n    constructor(fields, tool_call_id, name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name,\n                tool_call_id: tool_call_id\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_direct_tool_output\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /**\n         * Status of the tool invocation.\n         * @version 0.2.19\n         */ Object.defineProperty(this, \"status\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Artifact of the Tool execution which is not meant to be sent to the model.\n         *\n         * Should only be specified if it is different from the message content, e.g. if only\n         * a subset of the full tool output is being passed as message content but the full\n         * output is needed in other parts of the code.\n         */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"artifact\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n        this.artifact = fields.artifact;\n        this.status = fields.status;\n        this.metadata = fields.metadata;\n    }\n    _getType() {\n        return \"tool\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"tool\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_call_id: this.tool_call_id,\n            artifact: this.artifact\n        };\n    }\n}\n/**\n * Represents a chunk of a tool message, which can be concatenated\n * with other tool message chunks.\n */ class ToolMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Status of the tool invocation.\n         * @version 0.2.19\n         */ Object.defineProperty(this, \"status\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Artifact of the Tool execution which is not meant to be sent to the model.\n         *\n         * Should only be specified if it is different from the message content, e.g. if only\n         * a subset of the full tool output is being passed as message content but the full\n         * output is needed in other parts of the code.\n         */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"artifact\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n        this.artifact = fields.artifact;\n        this.status = fields.status;\n    }\n    static lc_name() {\n        return \"ToolMessageChunk\";\n    }\n    _getType() {\n        return \"tool\";\n    }\n    concat(chunk) {\n        return new ToolMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            artifact: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeObj)(this.artifact, chunk.artifact),\n            tool_call_id: this.tool_call_id,\n            id: this.id ?? chunk.id,\n            status: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeStatus)(this.status, chunk.status)\n        });\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_call_id: this.tool_call_id,\n            artifact: this.artifact\n        };\n    }\n}\nfunction defaultToolCallParser(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrawToolCalls) {\n    const toolCalls = [];\n    const invalidToolCalls = [];\n    for (const toolCall of rawToolCalls){\n        if (!toolCall.function) {\n            continue;\n        } else {\n            const functionName = toolCall.function.name;\n            try {\n                const functionArgs = JSON.parse(toolCall.function.arguments);\n                const parsed = {\n                    name: functionName || \"\",\n                    args: functionArgs || {},\n                    id: toolCall.id\n                };\n                toolCalls.push(parsed);\n            } catch (error) {\n                invalidToolCalls.push({\n                    name: functionName,\n                    args: toolCall.function.arguments,\n                    id: toolCall.id,\n                    error: \"Malformed args.\"\n                });\n            }\n        }\n    }\n    return [\n        toolCalls,\n        invalidToolCalls\n    ];\n}\nfunction isToolMessage(x) {\n    return x._getType() === \"tool\";\n}\nfunction isToolMessageChunk(x) {\n    return x._getType() === \"tool\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdG9vbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQStHO0FBQ3hHLFNBQVNNLG1CQUFtQkMsQ0FBQztJQUNoQyxPQUFRQSxLQUFLLFFBQ1QsT0FBT0EsTUFBTSxZQUNiLDJCQUEyQkEsS0FDM0JBLEVBQUVDLHFCQUFxQixLQUFLO0FBQ3BDO0FBQ0E7O0NBRUMsR0FDTSxNQUFNQyxvQkFBb0JULGlEQUFXQTtJQUN4QyxPQUFPVSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLCtDQUErQztRQUMvQyxPQUFPO1lBQUVDLGNBQWM7UUFBZTtJQUMxQztJQUNBQyxZQUFZQyxNQUFNLEVBQUVGLFlBQVksRUFBRUcsSUFBSSxDQUFFO1FBQ3BDLElBQUksT0FBT0QsV0FBVyxVQUFVO1lBQzVCLHVGQUF1RjtZQUN2RkEsU0FBUztnQkFBRUUsU0FBU0Y7Z0JBQVFDO2dCQUFNSCxjQUFjQTtZQUFhO1FBQ2pFO1FBQ0EsS0FBSyxDQUFDRTtRQUNORyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHlCQUF5QjtZQUNqREMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0E7OztTQUdDLEdBQ0RMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQTs7Ozs7O1NBTUMsR0FDRCw4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QyxlQUFlRixTQUFTQyxRQUFRLENBQUMxQixJQUFJO1lBQzNDLElBQUk7Z0JBQ0EsTUFBTTRCLGVBQWVDLEtBQUtDLEtBQUssQ0FBQ0wsU0FBU0MsUUFBUSxDQUFDSyxTQUFTO2dCQUMzRCxNQUFNQyxTQUFTO29CQUNYaEMsTUFBTTJCLGdCQUFnQjtvQkFDdEJNLE1BQU1MLGdCQUFnQixDQUFDO29CQUN2QlIsSUFBSUssU0FBU0wsRUFBRTtnQkFDbkI7Z0JBQ0FHLFVBQVVXLElBQUksQ0FBQ0Y7WUFDbkIsRUFDQSxPQUFPRyxPQUFPO2dCQUNWWCxpQkFBaUJVLElBQUksQ0FBQztvQkFDbEJsQyxNQUFNMkI7b0JBQ05NLE1BQU1SLFNBQVNDLFFBQVEsQ0FBQ0ssU0FBUztvQkFDakNYLElBQUlLLFNBQVNMLEVBQUU7b0JBQ2ZlLE9BQU87Z0JBQ1g7WUFDSjtRQUNKO0lBQ0o7SUFDQSxPQUFPO1FBQUNaO1FBQVdDO0tBQWlCO0FBQ3hDO0FBQ08sU0FBU1ksY0FBYzVDLENBQUM7SUFDM0IsT0FBT0EsRUFBRW1CLFFBQVEsT0FBTztBQUM1QjtBQUNPLFNBQVMwQixtQkFBbUI3QyxDQUFDO0lBQ2hDLE9BQU9BLEVBQUVtQixRQUFRLE9BQU87QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3Rvb2wuanM/MzAxOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgX21lcmdlT2JqLCBfbWVyZ2VTdGF0dXMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGlyZWN0VG9vbE91dHB1dCh4KSB7XG4gICAgcmV0dXJuICh4ICE9IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgXCJsY19kaXJlY3RfdG9vbF9vdXRwdXRcIiBpbiB4ICYmXG4gICAgICAgIHgubGNfZGlyZWN0X3Rvb2xfb3V0cHV0ID09PSB0cnVlKTtcbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIHRvb2wgbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJUb29sTWVzc2FnZVwiO1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgLy8gZXhjbHVkZSBzbmFrZSBjYXNlIGNvbnZlcnNpb24gdG8gcGFzY2FsIGNhc2VcbiAgICAgICAgcmV0dXJuIHsgdG9vbF9jYWxsX2lkOiBcInRvb2xfY2FsbF9pZFwiIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgdG9vbF9jYWxsX2lkLCBuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCBuYW1lLCB0b29sX2NhbGxfaWQ6IHRvb2xfY2FsbF9pZCB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX2RpcmVjdF90b29sX291dHB1dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0YXR1cyBvZiB0aGUgdG9vbCBpbnZvY2F0aW9uLlxuICAgICAgICAgKiBAdmVyc2lvbiAwLjIuMTlcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXR1c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxfaWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFydGlmYWN0IG9mIHRoZSBUb29sIGV4ZWN1dGlvbiB3aGljaCBpcyBub3QgbWVhbnQgdG8gYmUgc2VudCB0byB0aGUgbW9kZWwuXG4gICAgICAgICAqXG4gICAgICAgICAqIFNob3VsZCBvbmx5IGJlIHNwZWNpZmllZCBpZiBpdCBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgbWVzc2FnZSBjb250ZW50LCBlLmcuIGlmIG9ubHlcbiAgICAgICAgICogYSBzdWJzZXQgb2YgdGhlIGZ1bGwgdG9vbCBvdXRwdXQgaXMgYmVpbmcgcGFzc2VkIGFzIG1lc3NhZ2UgY29udGVudCBidXQgdGhlIGZ1bGxcbiAgICAgICAgICogb3V0cHV0IGlzIG5lZWRlZCBpbiBvdGhlciBwYXJ0cyBvZiB0aGUgY29kZS5cbiAgICAgICAgICovXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFydGlmYWN0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudG9vbF9jYWxsX2lkID0gZmllbGRzLnRvb2xfY2FsbF9pZDtcbiAgICAgICAgdGhpcy5hcnRpZmFjdCA9IGZpZWxkcy5hcnRpZmFjdDtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBmaWVsZHMuc3RhdHVzO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gZmllbGRzLm1ldGFkYXRhO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidG9vbFwiO1xuICAgIH1cbiAgICBzdGF0aWMgaXNJbnN0YW5jZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlLl9nZXRUeXBlKCkgPT09IFwidG9vbFwiO1xuICAgIH1cbiAgICBnZXQgX3ByaW50YWJsZUZpZWxkcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLl9wcmludGFibGVGaWVsZHMsXG4gICAgICAgICAgICB0b29sX2NhbGxfaWQ6IHRoaXMudG9vbF9jYWxsX2lkLFxuICAgICAgICAgICAgYXJ0aWZhY3Q6IHRoaXMuYXJ0aWZhY3QsXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSB0b29sIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWRcbiAqIHdpdGggb3RoZXIgdG9vbCBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xNZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbF9jYWxsX2lkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdGF0dXMgb2YgdGhlIHRvb2wgaW52b2NhdGlvbi5cbiAgICAgICAgICogQHZlcnNpb24gMC4yLjE5XG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGF0dXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFydGlmYWN0IG9mIHRoZSBUb29sIGV4ZWN1dGlvbiB3aGljaCBpcyBub3QgbWVhbnQgdG8gYmUgc2VudCB0byB0aGUgbW9kZWwuXG4gICAgICAgICAqXG4gICAgICAgICAqIFNob3VsZCBvbmx5IGJlIHNwZWNpZmllZCBpZiBpdCBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgbWVzc2FnZSBjb250ZW50LCBlLmcuIGlmIG9ubHlcbiAgICAgICAgICogYSBzdWJzZXQgb2YgdGhlIGZ1bGwgdG9vbCBvdXRwdXQgaXMgYmVpbmcgcGFzc2VkIGFzIG1lc3NhZ2UgY29udGVudCBidXQgdGhlIGZ1bGxcbiAgICAgICAgICogb3V0cHV0IGlzIG5lZWRlZCBpbiBvdGhlciBwYXJ0cyBvZiB0aGUgY29kZS5cbiAgICAgICAgICovXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFydGlmYWN0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudG9vbF9jYWxsX2lkID0gZmllbGRzLnRvb2xfY2FsbF9pZDtcbiAgICAgICAgdGhpcy5hcnRpZmFjdCA9IGZpZWxkcy5hcnRpZmFjdDtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBmaWVsZHMuc3RhdHVzO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiVG9vbE1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidG9vbFwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgICAgICBhcnRpZmFjdDogX21lcmdlT2JqKHRoaXMuYXJ0aWZhY3QsIGNodW5rLmFydGlmYWN0KSxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogdGhpcy50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICBpZDogdGhpcy5pZCA/PyBjaHVuay5pZCxcbiAgICAgICAgICAgIHN0YXR1czogX21lcmdlU3RhdHVzKHRoaXMuc3RhdHVzLCBjaHVuay5zdGF0dXMpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IF9wcmludGFibGVGaWVsZHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci5fcHJpbnRhYmxlRmllbGRzLFxuICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB0aGlzLnRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgIGFydGlmYWN0OiB0aGlzLmFydGlmYWN0LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0VG9vbENhbGxQYXJzZXIoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxucmF3VG9vbENhbGxzKSB7XG4gICAgY29uc3QgdG9vbENhbGxzID0gW107XG4gICAgY29uc3QgaW52YWxpZFRvb2xDYWxscyA9IFtdO1xuICAgIGZvciAoY29uc3QgdG9vbENhbGwgb2YgcmF3VG9vbENhbGxzKSB7XG4gICAgICAgIGlmICghdG9vbENhbGwuZnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25OYW1lID0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25BcmdzID0gSlNPTi5wYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZnVuY3Rpb25OYW1lIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IGZ1bmN0aW9uQXJncyB8fCB7fSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdG9vbENhbGxzLnB1c2gocGFyc2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGludmFsaWRUb29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogdG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBcIk1hbGZvcm1lZCBhcmdzLlwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbdG9vbENhbGxzLCBpbnZhbGlkVG9vbENhbGxzXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1Rvb2xNZXNzYWdlKHgpIHtcbiAgICByZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcInRvb2xcIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1Rvb2xNZXNzYWdlQ2h1bmsoeCkge1xuICAgIHJldHVybiB4Ll9nZXRUeXBlKCkgPT09IFwidG9vbFwiO1xufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiX21lcmdlT2JqIiwiX21lcmdlU3RhdHVzIiwiaXNEaXJlY3RUb29sT3V0cHV0IiwieCIsImxjX2RpcmVjdF90b29sX291dHB1dCIsIlRvb2xNZXNzYWdlIiwibGNfbmFtZSIsImxjX2FsaWFzZXMiLCJ0b29sX2NhbGxfaWQiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIm5hbWUiLCJjb250ZW50IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImFydGlmYWN0Iiwic3RhdHVzIiwibWV0YWRhdGEiLCJfZ2V0VHlwZSIsImlzSW5zdGFuY2UiLCJtZXNzYWdlIiwiX3ByaW50YWJsZUZpZWxkcyIsIlRvb2xNZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJpZCIsImRlZmF1bHRUb29sQ2FsbFBhcnNlciIsInJhd1Rvb2xDYWxscyIsInRvb2xDYWxscyIsImludmFsaWRUb29sQ2FsbHMiLCJ0b29sQ2FsbCIsImZ1bmN0aW9uIiwiZnVuY3Rpb25OYW1lIiwiZnVuY3Rpb25BcmdzIiwiSlNPTiIsInBhcnNlIiwiYXJndW1lbnRzIiwicGFyc2VkIiwiYXJncyIsInB1c2giLCJlcnJvciIsImlzVG9vbE1lc3NhZ2UiLCJpc1Rvb2xNZXNzYWdlQ2h1bmsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/transformers.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/transformers.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultTextSplitter: () => (/* binding */ defaultTextSplitter),\n/* harmony export */   filterMessages: () => (/* binding */ filterMessages),\n/* harmony export */   mergeMessageRuns: () => (/* binding */ mergeMessageRuns),\n/* harmony export */   trimMessages: () => (/* binding */ trimMessages)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _modifier_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./modifier.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/modifier.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n\n\n\n\n\n\n\n\n\n\nconst _isMessageType = (msg, types)=>{\n    const typesAsStrings = [\n        ...new Set(types?.map((t)=>{\n            if (typeof t === \"string\") {\n                return t;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const instantiatedMsgClass = new t({});\n            if (!(\"getType\" in instantiatedMsgClass) || typeof instantiatedMsgClass.getType !== \"function\") {\n                throw new Error(\"Invalid type provided.\");\n            }\n            return instantiatedMsgClass.getType();\n        }))\n    ];\n    const msgType = msg.getType();\n    return typesAsStrings.some((t)=>t === msgType);\n};\nfunction filterMessages(messagesOrOptions, options) {\n    if (Array.isArray(messagesOrOptions)) {\n        return _filterMessages(messagesOrOptions, options);\n    }\n    return _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda.from((input)=>{\n        return _filterMessages(input, messagesOrOptions);\n    });\n}\nfunction _filterMessages(messages, options = {}) {\n    const { includeNames, excludeNames, includeTypes, excludeTypes, includeIds, excludeIds } = options;\n    const filtered = [];\n    for (const msg of messages){\n        if (excludeNames && msg.name && excludeNames.includes(msg.name)) {\n            continue;\n        } else if (excludeTypes && _isMessageType(msg, excludeTypes)) {\n            continue;\n        } else if (excludeIds && msg.id && excludeIds.includes(msg.id)) {\n            continue;\n        }\n        // default to inclusion when no inclusion criteria given.\n        if (!(includeTypes || includeIds || includeNames)) {\n            filtered.push(msg);\n        } else if (includeNames && msg.name && includeNames.some((iName)=>iName === msg.name)) {\n            filtered.push(msg);\n        } else if (includeTypes && _isMessageType(msg, includeTypes)) {\n            filtered.push(msg);\n        } else if (includeIds && msg.id && includeIds.some((id)=>id === msg.id)) {\n            filtered.push(msg);\n        }\n    }\n    return filtered;\n}\nfunction mergeMessageRuns(messages) {\n    if (Array.isArray(messages)) {\n        return _mergeMessageRuns(messages);\n    }\n    return _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda.from(_mergeMessageRuns);\n}\nfunction _mergeMessageRuns(messages) {\n    if (!messages.length) {\n        return [];\n    }\n    const merged = [];\n    for (const msg of messages){\n        const curr = msg;\n        const last = merged.pop();\n        if (!last) {\n            merged.push(curr);\n        } else if (curr.getType() === \"tool\" || !(curr.getType() === last.getType())) {\n            merged.push(last, curr);\n        } else {\n            const lastChunk = (0,_utils_js__WEBPACK_IMPORTED_MODULE_9__.convertToChunk)(last);\n            const currChunk = (0,_utils_js__WEBPACK_IMPORTED_MODULE_9__.convertToChunk)(curr);\n            const mergedChunks = lastChunk.concat(currChunk);\n            if (typeof lastChunk.content === \"string\" && typeof currChunk.content === \"string\") {\n                mergedChunks.content = `${lastChunk.content}\\n${currChunk.content}`;\n            }\n            merged.push(_chunkToMsg(mergedChunks));\n        }\n    }\n    return merged;\n}\nfunction trimMessages(messagesOrOptions, options) {\n    if (Array.isArray(messagesOrOptions)) {\n        const messages = messagesOrOptions;\n        if (!options) {\n            throw new Error(\"Options parameter is required when providing messages.\");\n        }\n        return _trimMessagesHelper(messages, options);\n    } else {\n        const trimmerOptions = messagesOrOptions;\n        return _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda.from((input)=>_trimMessagesHelper(input, trimmerOptions)).withConfig({\n            runName: \"trim_messages\"\n        });\n    }\n}\nasync function _trimMessagesHelper(messages, options) {\n    const { maxTokens, tokenCounter, strategy = \"last\", allowPartial = false, endOn, startOn, includeSystem = false, textSplitter } = options;\n    if (startOn && strategy === \"first\") {\n        throw new Error(\"`startOn` should only be specified if `strategy` is 'last'.\");\n    }\n    if (includeSystem && strategy === \"first\") {\n        throw new Error(\"`includeSystem` should only be specified if `strategy` is 'last'.\");\n    }\n    let listTokenCounter;\n    if (\"getNumTokens\" in tokenCounter) {\n        listTokenCounter = async (msgs)=>{\n            const tokenCounts = await Promise.all(msgs.map((msg)=>tokenCounter.getNumTokens(msg.content)));\n            return tokenCounts.reduce((sum, count)=>sum + count, 0);\n        };\n    } else {\n        listTokenCounter = async (msgs)=>tokenCounter(msgs);\n    }\n    let textSplitterFunc = defaultTextSplitter;\n    if (textSplitter) {\n        if (\"splitText\" in textSplitter) {\n            textSplitterFunc = textSplitter.splitText;\n        } else {\n            textSplitterFunc = async (text)=>textSplitter(text);\n        }\n    }\n    if (strategy === \"first\") {\n        return _firstMaxTokens(messages, {\n            maxTokens,\n            tokenCounter: listTokenCounter,\n            textSplitter: textSplitterFunc,\n            partialStrategy: allowPartial ? \"first\" : undefined,\n            endOn\n        });\n    } else if (strategy === \"last\") {\n        return _lastMaxTokens(messages, {\n            maxTokens,\n            tokenCounter: listTokenCounter,\n            textSplitter: textSplitterFunc,\n            allowPartial,\n            includeSystem,\n            startOn,\n            endOn\n        });\n    } else {\n        throw new Error(`Unrecognized strategy: '${strategy}'. Must be one of 'first' or 'last'.`);\n    }\n}\nasync function _firstMaxTokens(messages, options) {\n    const { maxTokens, tokenCounter, textSplitter, partialStrategy, endOn } = options;\n    let messagesCopy = [\n        ...messages\n    ];\n    let idx = 0;\n    for(let i = 0; i < messagesCopy.length; i += 1){\n        const remainingMessages = i > 0 ? messagesCopy.slice(0, -i) : messagesCopy;\n        if (await tokenCounter(remainingMessages) <= maxTokens) {\n            idx = messagesCopy.length - i;\n            break;\n        }\n    }\n    if (idx < messagesCopy.length && partialStrategy) {\n        let includedPartial = false;\n        if (Array.isArray(messagesCopy[idx].content)) {\n            const excluded = messagesCopy[idx];\n            if (typeof excluded.content === \"string\") {\n                throw new Error(\"Expected content to be an array.\");\n            }\n            const numBlock = excluded.content.length;\n            const reversedContent = partialStrategy === \"last\" ? [\n                ...excluded.content\n            ].reverse() : excluded.content;\n            for(let i = 1; i <= numBlock; i += 1){\n                const partialContent = partialStrategy === \"first\" ? reversedContent.slice(0, i) : reversedContent.slice(-i);\n                const fields = Object.fromEntries(Object.entries(excluded).filter(([k])=>k !== \"type\" && !k.startsWith(\"lc_\")));\n                const updatedMessage = _switchTypeToMessage(excluded.getType(), {\n                    ...fields,\n                    content: partialContent\n                });\n                const slicedMessages = [\n                    ...messagesCopy.slice(0, idx),\n                    updatedMessage\n                ];\n                if (await tokenCounter(slicedMessages) <= maxTokens) {\n                    messagesCopy = slicedMessages;\n                    idx += 1;\n                    includedPartial = true;\n                } else {\n                    break;\n                }\n            }\n            if (includedPartial && partialStrategy === \"last\") {\n                excluded.content = [\n                    ...reversedContent\n                ].reverse();\n            }\n        }\n        if (!includedPartial) {\n            const excluded = messagesCopy[idx];\n            let text;\n            if (Array.isArray(excluded.content) && excluded.content.some((block)=>typeof block === \"string\" || block.type === \"text\")) {\n                const textBlock = excluded.content.find((block)=>block.type === \"text\" && block.text);\n                text = textBlock?.text;\n            } else if (typeof excluded.content === \"string\") {\n                text = excluded.content;\n            }\n            if (text) {\n                const splitTexts = await textSplitter(text);\n                const numSplits = splitTexts.length;\n                if (partialStrategy === \"last\") {\n                    splitTexts.reverse();\n                }\n                for(let _ = 0; _ < numSplits - 1; _ += 1){\n                    splitTexts.pop();\n                    excluded.content = splitTexts.join(\"\");\n                    if (await tokenCounter([\n                        ...messagesCopy.slice(0, idx),\n                        excluded\n                    ]) <= maxTokens) {\n                        if (partialStrategy === \"last\") {\n                            excluded.content = [\n                                ...splitTexts\n                            ].reverse().join(\"\");\n                        }\n                        messagesCopy = [\n                            ...messagesCopy.slice(0, idx),\n                            excluded\n                        ];\n                        idx += 1;\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    if (endOn) {\n        const endOnArr = Array.isArray(endOn) ? endOn : [\n            endOn\n        ];\n        while(idx > 0 && !_isMessageType(messagesCopy[idx - 1], endOnArr)){\n            idx -= 1;\n        }\n    }\n    return messagesCopy.slice(0, idx);\n}\nasync function _lastMaxTokens(messages, options) {\n    const { allowPartial = false, includeSystem = false, endOn, startOn, ...rest } = options;\n    // Create a copy of messages to avoid mutation\n    let messagesCopy = messages.map((message)=>{\n        const fields = Object.fromEntries(Object.entries(message).filter(([k])=>k !== \"type\" && !k.startsWith(\"lc_\")));\n        return _switchTypeToMessage(message.getType(), fields, (0,_base_js__WEBPACK_IMPORTED_MODULE_2__.isBaseMessageChunk)(message));\n    });\n    if (endOn) {\n        const endOnArr = Array.isArray(endOn) ? endOn : [\n            endOn\n        ];\n        while(messagesCopy.length > 0 && !_isMessageType(messagesCopy[messagesCopy.length - 1], endOnArr)){\n            messagesCopy = messagesCopy.slice(0, -1);\n        }\n    }\n    const swappedSystem = includeSystem && messagesCopy[0]?.getType() === \"system\";\n    let reversed_ = swappedSystem ? messagesCopy.slice(0, 1).concat(messagesCopy.slice(1).reverse()) : messagesCopy.reverse();\n    reversed_ = await _firstMaxTokens(reversed_, {\n        ...rest,\n        partialStrategy: allowPartial ? \"last\" : undefined,\n        endOn: startOn\n    });\n    if (swappedSystem) {\n        return [\n            reversed_[0],\n            ...reversed_.slice(1).reverse()\n        ];\n    } else {\n        return reversed_.reverse();\n    }\n}\nconst _MSG_CHUNK_MAP = {\n    human: {\n        message: _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessage,\n        messageChunk: _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessageChunk\n    },\n    ai: {\n        message: _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage,\n        messageChunk: _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessageChunk\n    },\n    system: {\n        message: _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage,\n        messageChunk: _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessageChunk\n    },\n    developer: {\n        message: _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage,\n        messageChunk: _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessageChunk\n    },\n    tool: {\n        message: _tool_js__WEBPACK_IMPORTED_MODULE_8__.ToolMessage,\n        messageChunk: _tool_js__WEBPACK_IMPORTED_MODULE_8__.ToolMessageChunk\n    },\n    function: {\n        message: _function_js__WEBPACK_IMPORTED_MODULE_4__.FunctionMessage,\n        messageChunk: _function_js__WEBPACK_IMPORTED_MODULE_4__.FunctionMessageChunk\n    },\n    generic: {\n        message: _chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessage,\n        messageChunk: _chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessageChunk\n    },\n    remove: {\n        message: _modifier_js__WEBPACK_IMPORTED_MODULE_6__.RemoveMessage,\n        messageChunk: _modifier_js__WEBPACK_IMPORTED_MODULE_6__.RemoveMessage\n    }\n};\nfunction _switchTypeToMessage(messageType, fields, returnChunk) {\n    let chunk;\n    let msg;\n    switch(messageType){\n        case \"human\":\n            if (returnChunk) {\n                chunk = new _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessageChunk(fields);\n            } else {\n                msg = new _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessage(fields);\n            }\n            break;\n        case \"ai\":\n            if (returnChunk) {\n                let aiChunkFields = {\n                    ...fields\n                };\n                if (\"tool_calls\" in aiChunkFields) {\n                    aiChunkFields = {\n                        ...aiChunkFields,\n                        tool_call_chunks: aiChunkFields.tool_calls?.map((tc)=>({\n                                ...tc,\n                                type: \"tool_call_chunk\",\n                                index: undefined,\n                                args: JSON.stringify(tc.args)\n                            }))\n                    };\n                }\n                chunk = new _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessageChunk(aiChunkFields);\n            } else {\n                msg = new _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage(fields);\n            }\n            break;\n        case \"system\":\n            if (returnChunk) {\n                chunk = new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessageChunk(fields);\n            } else {\n                msg = new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage(fields);\n            }\n            break;\n        case \"developer\":\n            if (returnChunk) {\n                chunk = new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessageChunk({\n                    ...fields,\n                    additional_kwargs: {\n                        ...fields.additional_kwargs,\n                        __openai_role__: \"developer\"\n                    }\n                });\n            } else {\n                msg = new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage({\n                    ...fields,\n                    additional_kwargs: {\n                        ...fields.additional_kwargs,\n                        __openai_role__: \"developer\"\n                    }\n                });\n            }\n            break;\n        case \"tool\":\n            if (\"tool_call_id\" in fields) {\n                if (returnChunk) {\n                    chunk = new _tool_js__WEBPACK_IMPORTED_MODULE_8__.ToolMessageChunk(fields);\n                } else {\n                    msg = new _tool_js__WEBPACK_IMPORTED_MODULE_8__.ToolMessage(fields);\n                }\n            } else {\n                throw new Error(\"Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.\");\n            }\n            break;\n        case \"function\":\n            if (returnChunk) {\n                chunk = new _function_js__WEBPACK_IMPORTED_MODULE_4__.FunctionMessageChunk(fields);\n            } else {\n                if (!fields.name) {\n                    throw new Error(\"FunctionMessage must have a 'name' field\");\n                }\n                msg = new _function_js__WEBPACK_IMPORTED_MODULE_4__.FunctionMessage(fields);\n            }\n            break;\n        case \"generic\":\n            if (\"role\" in fields) {\n                if (returnChunk) {\n                    chunk = new _chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessageChunk(fields);\n                } else {\n                    msg = new _chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessage(fields);\n                }\n            } else {\n                throw new Error(\"Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.\");\n            }\n            break;\n        default:\n            throw new Error(`Unrecognized message type ${messageType}`);\n    }\n    if (returnChunk && chunk) {\n        return chunk;\n    }\n    if (msg) {\n        return msg;\n    }\n    throw new Error(`Unrecognized message type ${messageType}`);\n}\nfunction _chunkToMsg(chunk) {\n    const chunkType = chunk.getType();\n    let msg;\n    const fields = Object.fromEntries(Object.entries(chunk).filter(([k])=>![\n            \"type\",\n            \"tool_call_chunks\"\n        ].includes(k) && !k.startsWith(\"lc_\")));\n    if (chunkType in _MSG_CHUNK_MAP) {\n        msg = _switchTypeToMessage(chunkType, fields);\n    }\n    if (!msg) {\n        throw new Error(`Unrecognized message chunk class ${chunkType}. Supported classes are ${Object.keys(_MSG_CHUNK_MAP)}`);\n    }\n    return msg;\n}\n/**\n * The default text splitter function that splits text by newlines.\n *\n * @param {string} text\n * @returns A promise that resolves to an array of strings split by newlines.\n */ function defaultTextSplitter(text) {\n    const splits = text.split(\"\\n\");\n    return Promise.resolve([\n        ...splits.slice(0, -1).map((s)=>`${s}\\n`),\n        splits[splits.length - 1]\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdHJhbnNmb3JtZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNEO0FBQ0Y7QUFDSjtBQUNXO0FBQ1k7QUFDVjtBQUNmO0FBQ2tCO0FBQ0w7QUFDZjtBQUM1QyxNQUFNZ0IsaUJBQWlCLENBQUNDLEtBQUtDO0lBQ3pCLE1BQU1DLGlCQUFpQjtXQUNoQixJQUFJQyxJQUFJRixPQUFPRyxJQUFJLENBQUNDO1lBQ25CLElBQUksT0FBT0EsTUFBTSxVQUFVO2dCQUN2QixPQUFPQTtZQUNYO1lBQ0EsOERBQThEO1lBQzlELE1BQU1DLHVCQUF1QixJQUFJRCxFQUFFLENBQUM7WUFDcEMsSUFBSSxDQUFFLGNBQWFDLG9CQUFtQixLQUNsQyxPQUFPQSxxQkFBcUJDLE9BQU8sS0FBSyxZQUFZO2dCQUNwRCxNQUFNLElBQUlDLE1BQU07WUFDcEI7WUFDQSxPQUFPRixxQkFBcUJDLE9BQU87UUFDdkM7S0FDSDtJQUNELE1BQU1FLFVBQVVULElBQUlPLE9BQU87SUFDM0IsT0FBT0wsZUFBZVEsSUFBSSxDQUFDLENBQUNMLElBQU1BLE1BQU1JO0FBQzVDO0FBQ08sU0FBU0UsZUFBZUMsaUJBQWlCLEVBQUVDLE9BQU87SUFDckQsSUFBSUMsTUFBTUMsT0FBTyxDQUFDSCxvQkFBb0I7UUFDbEMsT0FBT0ksZ0JBQWdCSixtQkFBbUJDO0lBQzlDO0lBQ0EsT0FBTzlCLDhEQUFjQSxDQUFDa0MsSUFBSSxDQUFDLENBQUNDO1FBQ3hCLE9BQU9GLGdCQUFnQkUsT0FBT047SUFDbEM7QUFDSjtBQUNBLFNBQVNJLGdCQUFnQkcsUUFBUSxFQUFFTixVQUFVLENBQUMsQ0FBQztJQUMzQyxNQUFNLEVBQUVPLFlBQVksRUFBRUMsWUFBWSxFQUFFQyxZQUFZLEVBQUVDLFlBQVksRUFBRUMsVUFBVSxFQUFFQyxVQUFVLEVBQUcsR0FBR1o7SUFDNUYsTUFBTWEsV0FBVyxFQUFFO0lBQ25CLEtBQUssTUFBTTFCLE9BQU9tQixTQUFVO1FBQ3hCLElBQUlFLGdCQUFnQnJCLElBQUkyQixJQUFJLElBQUlOLGFBQWFPLFFBQVEsQ0FBQzVCLElBQUkyQixJQUFJLEdBQUc7WUFDN0Q7UUFDSixPQUNLLElBQUlKLGdCQUFnQnhCLGVBQWVDLEtBQUt1QixlQUFlO1lBQ3hEO1FBQ0osT0FDSyxJQUFJRSxjQUFjekIsSUFBSTZCLEVBQUUsSUFBSUosV0FBV0csUUFBUSxDQUFDNUIsSUFBSTZCLEVBQUUsR0FBRztZQUMxRDtRQUNKO1FBQ0EseURBQXlEO1FBQ3pELElBQUksQ0FBRVAsQ0FBQUEsZ0JBQWdCRSxjQUFjSixZQUFXLEdBQUk7WUFDL0NNLFNBQVNJLElBQUksQ0FBQzlCO1FBQ2xCLE9BQ0ssSUFBSW9CLGdCQUNMcEIsSUFBSTJCLElBQUksSUFDUlAsYUFBYVYsSUFBSSxDQUFDLENBQUNxQixRQUFVQSxVQUFVL0IsSUFBSTJCLElBQUksR0FBRztZQUNsREQsU0FBU0ksSUFBSSxDQUFDOUI7UUFDbEIsT0FDSyxJQUFJc0IsZ0JBQWdCdkIsZUFBZUMsS0FBS3NCLGVBQWU7WUFDeERJLFNBQVNJLElBQUksQ0FBQzlCO1FBQ2xCLE9BQ0ssSUFBSXdCLGNBQWN4QixJQUFJNkIsRUFBRSxJQUFJTCxXQUFXZCxJQUFJLENBQUMsQ0FBQ21CLEtBQU9BLE9BQU83QixJQUFJNkIsRUFBRSxHQUFHO1lBQ3JFSCxTQUFTSSxJQUFJLENBQUM5QjtRQUNsQjtJQUNKO0lBQ0EsT0FBTzBCO0FBQ1g7QUFDTyxTQUFTTSxpQkFBaUJiLFFBQVE7SUFDckMsSUFBSUwsTUFBTUMsT0FBTyxDQUFDSSxXQUFXO1FBQ3pCLE9BQU9jLGtCQUFrQmQ7SUFDN0I7SUFDQSxPQUFPcEMsOERBQWNBLENBQUNrQyxJQUFJLENBQUNnQjtBQUMvQjtBQUNBLFNBQVNBLGtCQUFrQmQsUUFBUTtJQUMvQixJQUFJLENBQUNBLFNBQVNlLE1BQU0sRUFBRTtRQUNsQixPQUFPLEVBQUU7SUFDYjtJQUNBLE1BQU1DLFNBQVMsRUFBRTtJQUNqQixLQUFLLE1BQU1uQyxPQUFPbUIsU0FBVTtRQUN4QixNQUFNaUIsT0FBT3BDO1FBQ2IsTUFBTXFDLE9BQU9GLE9BQU9HLEdBQUc7UUFDdkIsSUFBSSxDQUFDRCxNQUFNO1lBQ1BGLE9BQU9MLElBQUksQ0FBQ007UUFDaEIsT0FDSyxJQUFJQSxLQUFLN0IsT0FBTyxPQUFPLFVBQ3hCLENBQUU2QixDQUFBQSxLQUFLN0IsT0FBTyxPQUFPOEIsS0FBSzlCLE9BQU8sRUFBQyxHQUFJO1lBQ3RDNEIsT0FBT0wsSUFBSSxDQUFDTyxNQUFNRDtRQUN0QixPQUNLO1lBQ0QsTUFBTUcsWUFBWXpDLHlEQUFjQSxDQUFDdUM7WUFDakMsTUFBTUcsWUFBWTFDLHlEQUFjQSxDQUFDc0M7WUFDakMsTUFBTUssZUFBZUYsVUFBVUcsTUFBTSxDQUFDRjtZQUN0QyxJQUFJLE9BQU9ELFVBQVVJLE9BQU8sS0FBSyxZQUM3QixPQUFPSCxVQUFVRyxPQUFPLEtBQUssVUFBVTtnQkFDdkNGLGFBQWFFLE9BQU8sR0FBRyxDQUFDLEVBQUVKLFVBQVVJLE9BQU8sQ0FBQyxFQUFFLEVBQUVILFVBQVVHLE9BQU8sQ0FBQyxDQUFDO1lBQ3ZFO1lBQ0FSLE9BQU9MLElBQUksQ0FBQ2MsWUFBWUg7UUFDNUI7SUFDSjtJQUNBLE9BQU9OO0FBQ1g7QUFDTyxTQUFTVSxhQUFhakMsaUJBQWlCLEVBQUVDLE9BQU87SUFDbkQsSUFBSUMsTUFBTUMsT0FBTyxDQUFDSCxvQkFBb0I7UUFDbEMsTUFBTU8sV0FBV1A7UUFDakIsSUFBSSxDQUFDQyxTQUFTO1lBQ1YsTUFBTSxJQUFJTCxNQUFNO1FBQ3BCO1FBQ0EsT0FBT3NDLG9CQUFvQjNCLFVBQVVOO0lBQ3pDLE9BQ0s7UUFDRCxNQUFNa0MsaUJBQWlCbkM7UUFDdkIsT0FBTzdCLDhEQUFjQSxDQUFDa0MsSUFBSSxDQUFDLENBQUNDLFFBQVU0QixvQkFBb0I1QixPQUFPNkIsaUJBQWlCQyxVQUFVLENBQUM7WUFDekZDLFNBQVM7UUFDYjtJQUNKO0FBQ0o7QUFDQSxlQUFlSCxvQkFBb0IzQixRQUFRLEVBQUVOLE9BQU87SUFDaEQsTUFBTSxFQUFFcUMsU0FBUyxFQUFFQyxZQUFZLEVBQUVDLFdBQVcsTUFBTSxFQUFFQyxlQUFlLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUVDLGdCQUFnQixLQUFLLEVBQUVDLFlBQVksRUFBRyxHQUFHNUM7SUFDbkksSUFBSTBDLFdBQVdILGFBQWEsU0FBUztRQUNqQyxNQUFNLElBQUk1QyxNQUFNO0lBQ3BCO0lBQ0EsSUFBSWdELGlCQUFpQkosYUFBYSxTQUFTO1FBQ3ZDLE1BQU0sSUFBSTVDLE1BQU07SUFDcEI7SUFDQSxJQUFJa0Q7SUFDSixJQUFJLGtCQUFrQlAsY0FBYztRQUNoQ08sbUJBQW1CLE9BQU9DO1lBQ3RCLE1BQU1DLGNBQWMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDSCxLQUFLdkQsR0FBRyxDQUFDLENBQUNKLE1BQVFtRCxhQUFhWSxZQUFZLENBQUMvRCxJQUFJMkMsT0FBTztZQUM3RixPQUFPaUIsWUFBWUksTUFBTSxDQUFDLENBQUNDLEtBQUtDLFFBQVVELE1BQU1DLE9BQU87UUFDM0Q7SUFDSixPQUNLO1FBQ0RSLG1CQUFtQixPQUFPQyxPQUFTUixhQUFhUTtJQUNwRDtJQUNBLElBQUlRLG1CQUFtQkM7SUFDdkIsSUFBSVgsY0FBYztRQUNkLElBQUksZUFBZUEsY0FBYztZQUM3QlUsbUJBQW1CVixhQUFhWSxTQUFTO1FBQzdDLE9BQ0s7WUFDREYsbUJBQW1CLE9BQU9HLE9BQVNiLGFBQWFhO1FBQ3BEO0lBQ0o7SUFDQSxJQUFJbEIsYUFBYSxTQUFTO1FBQ3RCLE9BQU9tQixnQkFBZ0JwRCxVQUFVO1lBQzdCK0I7WUFDQUMsY0FBY087WUFDZEQsY0FBY1U7WUFDZEssaUJBQWlCbkIsZUFBZSxVQUFVb0I7WUFDMUNuQjtRQUNKO0lBQ0osT0FDSyxJQUFJRixhQUFhLFFBQVE7UUFDMUIsT0FBT3NCLGVBQWV2RCxVQUFVO1lBQzVCK0I7WUFDQUMsY0FBY087WUFDZEQsY0FBY1U7WUFDZGQ7WUFDQUc7WUFDQUQ7WUFDQUQ7UUFDSjtJQUNKLE9BQ0s7UUFDRCxNQUFNLElBQUk5QyxNQUFNLENBQUMsd0JBQXdCLEVBQUU0QyxTQUFTLG9DQUFvQyxDQUFDO0lBQzdGO0FBQ0o7QUFDQSxlQUFlbUIsZ0JBQWdCcEQsUUFBUSxFQUFFTixPQUFPO0lBQzVDLE1BQU0sRUFBRXFDLFNBQVMsRUFBRUMsWUFBWSxFQUFFTSxZQUFZLEVBQUVlLGVBQWUsRUFBRWxCLEtBQUssRUFBRSxHQUFHekM7SUFDMUUsSUFBSThELGVBQWU7V0FBSXhEO0tBQVM7SUFDaEMsSUFBSXlELE1BQU07SUFDVixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSUYsYUFBYXpDLE1BQU0sRUFBRTJDLEtBQUssRUFBRztRQUM3QyxNQUFNQyxvQkFBb0JELElBQUksSUFBSUYsYUFBYUksS0FBSyxDQUFDLEdBQUcsQ0FBQ0YsS0FBS0Y7UUFDOUQsSUFBSSxNQUFPeEIsYUFBYTJCLHNCQUF1QjVCLFdBQVc7WUFDdEQwQixNQUFNRCxhQUFhekMsTUFBTSxHQUFHMkM7WUFDNUI7UUFDSjtJQUNKO0lBQ0EsSUFBSUQsTUFBTUQsYUFBYXpDLE1BQU0sSUFBSXNDLGlCQUFpQjtRQUM5QyxJQUFJUSxrQkFBa0I7UUFDdEIsSUFBSWxFLE1BQU1DLE9BQU8sQ0FBQzRELFlBQVksQ0FBQ0MsSUFBSSxDQUFDakMsT0FBTyxHQUFHO1lBQzFDLE1BQU1zQyxXQUFXTixZQUFZLENBQUNDLElBQUk7WUFDbEMsSUFBSSxPQUFPSyxTQUFTdEMsT0FBTyxLQUFLLFVBQVU7Z0JBQ3RDLE1BQU0sSUFBSW5DLE1BQU07WUFDcEI7WUFDQSxNQUFNMEUsV0FBV0QsU0FBU3RDLE9BQU8sQ0FBQ1QsTUFBTTtZQUN4QyxNQUFNaUQsa0JBQWtCWCxvQkFBb0IsU0FDdEM7bUJBQUlTLFNBQVN0QyxPQUFPO2FBQUMsQ0FBQ3lDLE9BQU8sS0FDN0JILFNBQVN0QyxPQUFPO1lBQ3RCLElBQUssSUFBSWtDLElBQUksR0FBR0EsS0FBS0ssVUFBVUwsS0FBSyxFQUFHO2dCQUNuQyxNQUFNUSxpQkFBaUJiLG9CQUFvQixVQUNyQ1csZ0JBQWdCSixLQUFLLENBQUMsR0FBR0YsS0FDekJNLGdCQUFnQkosS0FBSyxDQUFDLENBQUNGO2dCQUM3QixNQUFNUyxTQUFTQyxPQUFPQyxXQUFXLENBQUNELE9BQU9FLE9BQU8sQ0FBQ1IsVUFBVVMsTUFBTSxDQUFDLENBQUMsQ0FBQ0MsRUFBRSxHQUFLQSxNQUFNLFVBQVUsQ0FBQ0EsRUFBRUMsVUFBVSxDQUFDO2dCQUN6RyxNQUFNQyxpQkFBaUJDLHFCQUFxQmIsU0FBUzFFLE9BQU8sSUFBSTtvQkFDNUQsR0FBRytFLE1BQU07b0JBQ1QzQyxTQUFTMEM7Z0JBQ2I7Z0JBQ0EsTUFBTVUsaUJBQWlCO3VCQUFJcEIsYUFBYUksS0FBSyxDQUFDLEdBQUdIO29CQUFNaUI7aUJBQWU7Z0JBQ3RFLElBQUksTUFBTzFDLGFBQWE0QyxtQkFBb0I3QyxXQUFXO29CQUNuRHlCLGVBQWVvQjtvQkFDZm5CLE9BQU87b0JBQ1BJLGtCQUFrQjtnQkFDdEIsT0FDSztvQkFDRDtnQkFDSjtZQUNKO1lBQ0EsSUFBSUEsbUJBQW1CUixvQkFBb0IsUUFBUTtnQkFDL0NTLFNBQVN0QyxPQUFPLEdBQUc7dUJBQUl3QztpQkFBZ0IsQ0FBQ0MsT0FBTztZQUNuRDtRQUNKO1FBQ0EsSUFBSSxDQUFDSixpQkFBaUI7WUFDbEIsTUFBTUMsV0FBV04sWUFBWSxDQUFDQyxJQUFJO1lBQ2xDLElBQUlOO1lBQ0osSUFBSXhELE1BQU1DLE9BQU8sQ0FBQ2tFLFNBQVN0QyxPQUFPLEtBQzlCc0MsU0FBU3RDLE9BQU8sQ0FBQ2pDLElBQUksQ0FBQyxDQUFDc0YsUUFBVSxPQUFPQSxVQUFVLFlBQVlBLE1BQU1DLElBQUksS0FBSyxTQUFTO2dCQUN0RixNQUFNQyxZQUFZakIsU0FBU3RDLE9BQU8sQ0FBQ3dELElBQUksQ0FBQyxDQUFDSCxRQUFVQSxNQUFNQyxJQUFJLEtBQUssVUFBVUQsTUFBTTFCLElBQUk7Z0JBQ3RGQSxPQUFPNEIsV0FBVzVCO1lBQ3RCLE9BQ0ssSUFBSSxPQUFPVyxTQUFTdEMsT0FBTyxLQUFLLFVBQVU7Z0JBQzNDMkIsT0FBT1csU0FBU3RDLE9BQU87WUFDM0I7WUFDQSxJQUFJMkIsTUFBTTtnQkFDTixNQUFNOEIsYUFBYSxNQUFNM0MsYUFBYWE7Z0JBQ3RDLE1BQU0rQixZQUFZRCxXQUFXbEUsTUFBTTtnQkFDbkMsSUFBSXNDLG9CQUFvQixRQUFRO29CQUM1QjRCLFdBQVdoQixPQUFPO2dCQUN0QjtnQkFDQSxJQUFLLElBQUlrQixJQUFJLEdBQUdBLElBQUlELFlBQVksR0FBR0MsS0FBSyxFQUFHO29CQUN2Q0YsV0FBVzlELEdBQUc7b0JBQ2QyQyxTQUFTdEMsT0FBTyxHQUFHeUQsV0FBV0csSUFBSSxDQUFDO29CQUNuQyxJQUFJLE1BQU9wRCxhQUFhOzJCQUFJd0IsYUFBYUksS0FBSyxDQUFDLEdBQUdIO3dCQUFNSztxQkFBUyxLQUM3RC9CLFdBQVc7d0JBQ1gsSUFBSXNCLG9CQUFvQixRQUFROzRCQUM1QlMsU0FBU3RDLE9BQU8sR0FBRzttQ0FBSXlEOzZCQUFXLENBQUNoQixPQUFPLEdBQUdtQixJQUFJLENBQUM7d0JBQ3REO3dCQUNBNUIsZUFBZTsrQkFBSUEsYUFBYUksS0FBSyxDQUFDLEdBQUdIOzRCQUFNSzt5QkFBUzt3QkFDeERMLE9BQU87d0JBQ1A7b0JBQ0o7Z0JBQ0o7WUFDSjtRQUNKO0lBQ0o7SUFDQSxJQUFJdEIsT0FBTztRQUNQLE1BQU1rRCxXQUFXMUYsTUFBTUMsT0FBTyxDQUFDdUMsU0FBU0EsUUFBUTtZQUFDQTtTQUFNO1FBQ3ZELE1BQU9zQixNQUFNLEtBQUssQ0FBQzdFLGVBQWU0RSxZQUFZLENBQUNDLE1BQU0sRUFBRSxFQUFFNEIsVUFBVztZQUNoRTVCLE9BQU87UUFDWDtJQUNKO0lBQ0EsT0FBT0QsYUFBYUksS0FBSyxDQUFDLEdBQUdIO0FBQ2pDO0FBQ0EsZUFBZUYsZUFBZXZELFFBQVEsRUFBRU4sT0FBTztJQUMzQyxNQUFNLEVBQUV3QyxlQUFlLEtBQUssRUFBRUcsZ0JBQWdCLEtBQUssRUFBRUYsS0FBSyxFQUFFQyxPQUFPLEVBQUUsR0FBR2tELE1BQU0sR0FBRzVGO0lBQ2pGLDhDQUE4QztJQUM5QyxJQUFJOEQsZUFBZXhELFNBQVNmLEdBQUcsQ0FBQyxDQUFDc0c7UUFDN0IsTUFBTXBCLFNBQVNDLE9BQU9DLFdBQVcsQ0FBQ0QsT0FBT0UsT0FBTyxDQUFDaUIsU0FBU2hCLE1BQU0sQ0FBQyxDQUFDLENBQUNDLEVBQUUsR0FBS0EsTUFBTSxVQUFVLENBQUNBLEVBQUVDLFVBQVUsQ0FBQztRQUN4RyxPQUFPRSxxQkFBcUJZLFFBQVFuRyxPQUFPLElBQUkrRSxRQUFRcEcsNERBQWtCQSxDQUFDd0g7SUFDOUU7SUFDQSxJQUFJcEQsT0FBTztRQUNQLE1BQU1rRCxXQUFXMUYsTUFBTUMsT0FBTyxDQUFDdUMsU0FBU0EsUUFBUTtZQUFDQTtTQUFNO1FBQ3ZELE1BQU9xQixhQUFhekMsTUFBTSxHQUFHLEtBQ3pCLENBQUNuQyxlQUFlNEUsWUFBWSxDQUFDQSxhQUFhekMsTUFBTSxHQUFHLEVBQUUsRUFBRXNFLFVBQVc7WUFDbEU3QixlQUFlQSxhQUFhSSxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQzFDO0lBQ0o7SUFDQSxNQUFNNEIsZ0JBQWdCbkQsaUJBQWlCbUIsWUFBWSxDQUFDLEVBQUUsRUFBRXBFLGNBQWM7SUFDdEUsSUFBSXFHLFlBQVlELGdCQUNWaEMsYUFBYUksS0FBSyxDQUFDLEdBQUcsR0FBR3JDLE1BQU0sQ0FBQ2lDLGFBQWFJLEtBQUssQ0FBQyxHQUFHSyxPQUFPLE1BQzdEVCxhQUFhUyxPQUFPO0lBQzFCd0IsWUFBWSxNQUFNckMsZ0JBQWdCcUMsV0FBVztRQUN6QyxHQUFHSCxJQUFJO1FBQ1BqQyxpQkFBaUJuQixlQUFlLFNBQVNvQjtRQUN6Q25CLE9BQU9DO0lBQ1g7SUFDQSxJQUFJb0QsZUFBZTtRQUNmLE9BQU87WUFBQ0MsU0FBUyxDQUFDLEVBQUU7ZUFBS0EsVUFBVTdCLEtBQUssQ0FBQyxHQUFHSyxPQUFPO1NBQUc7SUFDMUQsT0FDSztRQUNELE9BQU93QixVQUFVeEIsT0FBTztJQUM1QjtBQUNKO0FBQ0EsTUFBTXlCLGlCQUFpQjtJQUNuQkMsT0FBTztRQUNISixTQUFTbkgsbURBQVlBO1FBQ3JCd0gsY0FBY3ZILHdEQUFpQkE7SUFDbkM7SUFDQXdILElBQUk7UUFDQU4sU0FBUzFILDZDQUFTQTtRQUNsQitILGNBQWM5SCxrREFBY0E7SUFDaEM7SUFDQWdJLFFBQVE7UUFDSlAsU0FBU2hILHFEQUFhQTtRQUN0QnFILGNBQWNwSCwwREFBa0JBO0lBQ3BDO0lBQ0F1SCxXQUFXO1FBQ1BSLFNBQVNoSCxxREFBYUE7UUFDdEJxSCxjQUFjcEgsMERBQWtCQTtJQUNwQztJQUNBd0gsTUFBTTtRQUNGVCxTQUFTOUcsaURBQVdBO1FBQ3BCbUgsY0FBY2xILHNEQUFnQkE7SUFDbEM7SUFDQXVILFVBQVU7UUFDTlYsU0FBU3JILHlEQUFlQTtRQUN4QjBILGNBQWN6SCw4REFBb0JBO0lBQ3RDO0lBQ0ErSCxTQUFTO1FBQ0xYLFNBQVN2SCxpREFBV0E7UUFDcEI0SCxjQUFjM0gsc0RBQWdCQTtJQUNsQztJQUNBa0ksUUFBUTtRQUNKWixTQUFTakgsdURBQWFBO1FBQ3RCc0gsY0FBY3RILHVEQUFhQTtJQUMvQjtBQUNKO0FBQ0EsU0FBU3FHLHFCQUFxQnlCLFdBQVcsRUFBRWpDLE1BQU0sRUFBRWtDLFdBQVc7SUFDMUQsSUFBSUM7SUFDSixJQUFJekg7SUFDSixPQUFRdUg7UUFDSixLQUFLO1lBQ0QsSUFBSUMsYUFBYTtnQkFDYkMsUUFBUSxJQUFJakksd0RBQWlCQSxDQUFDOEY7WUFDbEMsT0FDSztnQkFDRHRGLE1BQU0sSUFBSVQsbURBQVlBLENBQUMrRjtZQUMzQjtZQUNBO1FBQ0osS0FBSztZQUNELElBQUlrQyxhQUFhO2dCQUNiLElBQUlFLGdCQUFnQjtvQkFDaEIsR0FBR3BDLE1BQU07Z0JBQ2I7Z0JBQ0EsSUFBSSxnQkFBZ0JvQyxlQUFlO29CQUMvQkEsZ0JBQWdCO3dCQUNaLEdBQUdBLGFBQWE7d0JBQ2hCQyxrQkFBa0JELGNBQWNFLFVBQVUsRUFBRXhILElBQUksQ0FBQ3lILEtBQVE7Z0NBQ3JELEdBQUdBLEVBQUU7Z0NBQ0w1QixNQUFNO2dDQUNONkIsT0FBT3JEO2dDQUNQc0QsTUFBTUMsS0FBS0MsU0FBUyxDQUFDSixHQUFHRSxJQUFJOzRCQUNoQztvQkFDSjtnQkFDSjtnQkFDQU4sUUFBUSxJQUFJeEksa0RBQWNBLENBQUN5STtZQUMvQixPQUNLO2dCQUNEMUgsTUFBTSxJQUFJaEIsNkNBQVNBLENBQUNzRztZQUN4QjtZQUNBO1FBQ0osS0FBSztZQUNELElBQUlrQyxhQUFhO2dCQUNiQyxRQUFRLElBQUk5SCwwREFBa0JBLENBQUMyRjtZQUNuQyxPQUNLO2dCQUNEdEYsTUFBTSxJQUFJTixxREFBYUEsQ0FBQzRGO1lBQzVCO1lBQ0E7UUFDSixLQUFLO1lBQ0QsSUFBSWtDLGFBQWE7Z0JBQ2JDLFFBQVEsSUFBSTlILDBEQUFrQkEsQ0FBQztvQkFDM0IsR0FBRzJGLE1BQU07b0JBQ1Q0QyxtQkFBbUI7d0JBQ2YsR0FBRzVDLE9BQU80QyxpQkFBaUI7d0JBQzNCQyxpQkFBaUI7b0JBQ3JCO2dCQUNKO1lBQ0osT0FDSztnQkFDRG5JLE1BQU0sSUFBSU4scURBQWFBLENBQUM7b0JBQ3BCLEdBQUc0RixNQUFNO29CQUNUNEMsbUJBQW1CO3dCQUNmLEdBQUc1QyxPQUFPNEMsaUJBQWlCO3dCQUMzQkMsaUJBQWlCO29CQUNyQjtnQkFDSjtZQUNKO1lBQ0E7UUFDSixLQUFLO1lBQ0QsSUFBSSxrQkFBa0I3QyxRQUFRO2dCQUMxQixJQUFJa0MsYUFBYTtvQkFDYkMsUUFBUSxJQUFJNUgsc0RBQWdCQSxDQUFDeUY7Z0JBQ2pDLE9BQ0s7b0JBQ0R0RixNQUFNLElBQUlKLGlEQUFXQSxDQUFDMEY7Z0JBQzFCO1lBQ0osT0FDSztnQkFDRCxNQUFNLElBQUk5RSxNQUFNO1lBQ3BCO1lBQ0E7UUFDSixLQUFLO1lBQ0QsSUFBSWdILGFBQWE7Z0JBQ2JDLFFBQVEsSUFBSW5JLDhEQUFvQkEsQ0FBQ2dHO1lBQ3JDLE9BQ0s7Z0JBQ0QsSUFBSSxDQUFDQSxPQUFPM0QsSUFBSSxFQUFFO29CQUNkLE1BQU0sSUFBSW5CLE1BQU07Z0JBQ3BCO2dCQUNBUixNQUFNLElBQUlYLHlEQUFlQSxDQUFDaUc7WUFDOUI7WUFDQTtRQUNKLEtBQUs7WUFDRCxJQUFJLFVBQVVBLFFBQVE7Z0JBQ2xCLElBQUlrQyxhQUFhO29CQUNiQyxRQUFRLElBQUlySSxzREFBZ0JBLENBQUNrRztnQkFDakMsT0FDSztvQkFDRHRGLE1BQU0sSUFBSWIsaURBQVdBLENBQUNtRztnQkFDMUI7WUFDSixPQUNLO2dCQUNELE1BQU0sSUFBSTlFLE1BQU07WUFDcEI7WUFDQTtRQUNKO1lBQ0ksTUFBTSxJQUFJQSxNQUFNLENBQUMsMEJBQTBCLEVBQUUrRyxZQUFZLENBQUM7SUFDbEU7SUFDQSxJQUFJQyxlQUFlQyxPQUFPO1FBQ3RCLE9BQU9BO0lBQ1g7SUFDQSxJQUFJekgsS0FBSztRQUNMLE9BQU9BO0lBQ1g7SUFDQSxNQUFNLElBQUlRLE1BQU0sQ0FBQywwQkFBMEIsRUFBRStHLFlBQVksQ0FBQztBQUM5RDtBQUNBLFNBQVMzRSxZQUFZNkUsS0FBSztJQUN0QixNQUFNVyxZQUFZWCxNQUFNbEgsT0FBTztJQUMvQixJQUFJUDtJQUNKLE1BQU1zRixTQUFTQyxPQUFPQyxXQUFXLENBQUNELE9BQU9FLE9BQU8sQ0FBQ2dDLE9BQU8vQixNQUFNLENBQUMsQ0FBQyxDQUFDQyxFQUFFLEdBQUssQ0FBQztZQUFDO1lBQVE7U0FBbUIsQ0FBQy9ELFFBQVEsQ0FBQytELE1BQU0sQ0FBQ0EsRUFBRUMsVUFBVSxDQUFDO0lBQ25JLElBQUl3QyxhQUFhdkIsZ0JBQWdCO1FBQzdCN0csTUFBTThGLHFCQUFxQnNDLFdBQVc5QztJQUMxQztJQUNBLElBQUksQ0FBQ3RGLEtBQUs7UUFDTixNQUFNLElBQUlRLE1BQU0sQ0FBQyxpQ0FBaUMsRUFBRTRILFVBQVUsd0JBQXdCLEVBQUU3QyxPQUFPOEMsSUFBSSxDQUFDeEIsZ0JBQWdCLENBQUM7SUFDekg7SUFDQSxPQUFPN0c7QUFDWDtBQUNBOzs7OztDQUtDLEdBQ00sU0FBU29FLG9CQUFvQkUsSUFBSTtJQUNwQyxNQUFNZ0UsU0FBU2hFLEtBQUtpRSxLQUFLLENBQUM7SUFDMUIsT0FBTzFFLFFBQVEyRSxPQUFPLENBQUM7V0FDaEJGLE9BQU92RCxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUczRSxHQUFHLENBQUMsQ0FBQ3FJLElBQU0sQ0FBQyxFQUFFQSxFQUFFLEVBQUUsQ0FBQztRQUMxQ0gsTUFBTSxDQUFDQSxPQUFPcEcsTUFBTSxHQUFHLEVBQUU7S0FDNUI7QUFDTCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdHJhbnNmb3JtZXJzLmpzPzA2MzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUnVubmFibGVMYW1iZGEgfSBmcm9tIFwiLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZSwgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9haS5qc1wiO1xuaW1wb3J0IHsgaXNCYXNlTWVzc2FnZUNodW5rLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IENoYXRNZXNzYWdlLCBDaGF0TWVzc2FnZUNodW5rLCB9IGZyb20gXCIuL2NoYXQuanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uTWVzc2FnZSwgRnVuY3Rpb25NZXNzYWdlQ2h1bmssIH0gZnJvbSBcIi4vZnVuY3Rpb24uanNcIjtcbmltcG9ydCB7IEh1bWFuTWVzc2FnZSwgSHVtYW5NZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9odW1hbi5qc1wiO1xuaW1wb3J0IHsgUmVtb3ZlTWVzc2FnZSB9IGZyb20gXCIuL21vZGlmaWVyLmpzXCI7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlLCBTeXN0ZW1NZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9zeXN0ZW0uanNcIjtcbmltcG9ydCB7IFRvb2xNZXNzYWdlLCBUb29sTWVzc2FnZUNodW5rLCB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbmltcG9ydCB7IGNvbnZlcnRUb0NodW5rIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmNvbnN0IF9pc01lc3NhZ2VUeXBlID0gKG1zZywgdHlwZXMpID0+IHtcbiAgICBjb25zdCB0eXBlc0FzU3RyaW5ncyA9IFtcbiAgICAgICAgLi4ubmV3IFNldCh0eXBlcz8ubWFwKCh0KSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBjb25zdCBpbnN0YW50aWF0ZWRNc2dDbGFzcyA9IG5ldyB0KHt9KTtcbiAgICAgICAgICAgIGlmICghKFwiZ2V0VHlwZVwiIGluIGluc3RhbnRpYXRlZE1zZ0NsYXNzKSB8fFxuICAgICAgICAgICAgICAgIHR5cGVvZiBpbnN0YW50aWF0ZWRNc2dDbGFzcy5nZXRUeXBlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHR5cGUgcHJvdmlkZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbnRpYXRlZE1zZ0NsYXNzLmdldFR5cGUoKTtcbiAgICAgICAgfSkpLFxuICAgIF07XG4gICAgY29uc3QgbXNnVHlwZSA9IG1zZy5nZXRUeXBlKCk7XG4gICAgcmV0dXJuIHR5cGVzQXNTdHJpbmdzLnNvbWUoKHQpID0+IHQgPT09IG1zZ1R5cGUpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJNZXNzYWdlcyhtZXNzYWdlc09yT3B0aW9ucywgb3B0aW9ucykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG1lc3NhZ2VzT3JPcHRpb25zKSkge1xuICAgICAgICByZXR1cm4gX2ZpbHRlck1lc3NhZ2VzKG1lc3NhZ2VzT3JPcHRpb25zLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIFJ1bm5hYmxlTGFtYmRhLmZyb20oKGlucHV0KSA9PiB7XG4gICAgICAgIHJldHVybiBfZmlsdGVyTWVzc2FnZXMoaW5wdXQsIG1lc3NhZ2VzT3JPcHRpb25zKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIF9maWx0ZXJNZXNzYWdlcyhtZXNzYWdlcywgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgeyBpbmNsdWRlTmFtZXMsIGV4Y2x1ZGVOYW1lcywgaW5jbHVkZVR5cGVzLCBleGNsdWRlVHlwZXMsIGluY2x1ZGVJZHMsIGV4Y2x1ZGVJZHMsIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGZpbHRlcmVkID0gW107XG4gICAgZm9yIChjb25zdCBtc2cgb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgaWYgKGV4Y2x1ZGVOYW1lcyAmJiBtc2cubmFtZSAmJiBleGNsdWRlTmFtZXMuaW5jbHVkZXMobXNnLm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleGNsdWRlVHlwZXMgJiYgX2lzTWVzc2FnZVR5cGUobXNnLCBleGNsdWRlVHlwZXMpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleGNsdWRlSWRzICYmIG1zZy5pZCAmJiBleGNsdWRlSWRzLmluY2x1ZGVzKG1zZy5pZCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRlZmF1bHQgdG8gaW5jbHVzaW9uIHdoZW4gbm8gaW5jbHVzaW9uIGNyaXRlcmlhIGdpdmVuLlxuICAgICAgICBpZiAoIShpbmNsdWRlVHlwZXMgfHwgaW5jbHVkZUlkcyB8fCBpbmNsdWRlTmFtZXMpKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKG1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5jbHVkZU5hbWVzICYmXG4gICAgICAgICAgICBtc2cubmFtZSAmJlxuICAgICAgICAgICAgaW5jbHVkZU5hbWVzLnNvbWUoKGlOYW1lKSA9PiBpTmFtZSA9PT0gbXNnLm5hbWUpKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKG1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5jbHVkZVR5cGVzICYmIF9pc01lc3NhZ2VUeXBlKG1zZywgaW5jbHVkZVR5cGVzKSkge1xuICAgICAgICAgICAgZmlsdGVyZWQucHVzaChtc2cpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluY2x1ZGVJZHMgJiYgbXNnLmlkICYmIGluY2x1ZGVJZHMuc29tZSgoaWQpID0+IGlkID09PSBtc2cuaWQpKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKG1zZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZpbHRlcmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlTWVzc2FnZVJ1bnMobWVzc2FnZXMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlcykpIHtcbiAgICAgICAgcmV0dXJuIF9tZXJnZU1lc3NhZ2VSdW5zKG1lc3NhZ2VzKTtcbiAgICB9XG4gICAgcmV0dXJuIFJ1bm5hYmxlTGFtYmRhLmZyb20oX21lcmdlTWVzc2FnZVJ1bnMpO1xufVxuZnVuY3Rpb24gX21lcmdlTWVzc2FnZVJ1bnMobWVzc2FnZXMpIHtcbiAgICBpZiAoIW1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IG1lcmdlZCA9IFtdO1xuICAgIGZvciAoY29uc3QgbXNnIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgIGNvbnN0IGN1cnIgPSBtc2c7XG4gICAgICAgIGNvbnN0IGxhc3QgPSBtZXJnZWQucG9wKCk7XG4gICAgICAgIGlmICghbGFzdCkge1xuICAgICAgICAgICAgbWVyZ2VkLnB1c2goY3Vycik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3Vyci5nZXRUeXBlKCkgPT09IFwidG9vbFwiIHx8XG4gICAgICAgICAgICAhKGN1cnIuZ2V0VHlwZSgpID09PSBsYXN0LmdldFR5cGUoKSkpIHtcbiAgICAgICAgICAgIG1lcmdlZC5wdXNoKGxhc3QsIGN1cnIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbGFzdENodW5rID0gY29udmVydFRvQ2h1bmsobGFzdCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyQ2h1bmsgPSBjb252ZXJ0VG9DaHVuayhjdXJyKTtcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZENodW5rcyA9IGxhc3RDaHVuay5jb25jYXQoY3VyckNodW5rKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGFzdENodW5rLmNvbnRlbnQgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgY3VyckNodW5rLmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBtZXJnZWRDaHVua3MuY29udGVudCA9IGAke2xhc3RDaHVuay5jb250ZW50fVxcbiR7Y3VyckNodW5rLmNvbnRlbnR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lcmdlZC5wdXNoKF9jaHVua1RvTXNnKG1lcmdlZENodW5rcykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gdHJpbU1lc3NhZ2VzKG1lc3NhZ2VzT3JPcHRpb25zLCBvcHRpb25zKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZXNPck9wdGlvbnMpKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gbWVzc2FnZXNPck9wdGlvbnM7XG4gICAgICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3B0aW9ucyBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgd2hlbiBwcm92aWRpbmcgbWVzc2FnZXMuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdHJpbU1lc3NhZ2VzSGVscGVyKG1lc3NhZ2VzLCBvcHRpb25zKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHRyaW1tZXJPcHRpb25zID0gbWVzc2FnZXNPck9wdGlvbnM7XG4gICAgICAgIHJldHVybiBSdW5uYWJsZUxhbWJkYS5mcm9tKChpbnB1dCkgPT4gX3RyaW1NZXNzYWdlc0hlbHBlcihpbnB1dCwgdHJpbW1lck9wdGlvbnMpKS53aXRoQ29uZmlnKHtcbiAgICAgICAgICAgIHJ1bk5hbWU6IFwidHJpbV9tZXNzYWdlc1wiLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBfdHJpbU1lc3NhZ2VzSGVscGVyKG1lc3NhZ2VzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgeyBtYXhUb2tlbnMsIHRva2VuQ291bnRlciwgc3RyYXRlZ3kgPSBcImxhc3RcIiwgYWxsb3dQYXJ0aWFsID0gZmFsc2UsIGVuZE9uLCBzdGFydE9uLCBpbmNsdWRlU3lzdGVtID0gZmFsc2UsIHRleHRTcGxpdHRlciwgfSA9IG9wdGlvbnM7XG4gICAgaWYgKHN0YXJ0T24gJiYgc3RyYXRlZ3kgPT09IFwiZmlyc3RcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgc3RhcnRPbmAgc2hvdWxkIG9ubHkgYmUgc3BlY2lmaWVkIGlmIGBzdHJhdGVneWAgaXMgJ2xhc3QnLlwiKTtcbiAgICB9XG4gICAgaWYgKGluY2x1ZGVTeXN0ZW0gJiYgc3RyYXRlZ3kgPT09IFwiZmlyc3RcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgaW5jbHVkZVN5c3RlbWAgc2hvdWxkIG9ubHkgYmUgc3BlY2lmaWVkIGlmIGBzdHJhdGVneWAgaXMgJ2xhc3QnLlwiKTtcbiAgICB9XG4gICAgbGV0IGxpc3RUb2tlbkNvdW50ZXI7XG4gICAgaWYgKFwiZ2V0TnVtVG9rZW5zXCIgaW4gdG9rZW5Db3VudGVyKSB7XG4gICAgICAgIGxpc3RUb2tlbkNvdW50ZXIgPSBhc3luYyAobXNncykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9rZW5Db3VudHMgPSBhd2FpdCBQcm9taXNlLmFsbChtc2dzLm1hcCgobXNnKSA9PiB0b2tlbkNvdW50ZXIuZ2V0TnVtVG9rZW5zKG1zZy5jb250ZW50KSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRva2VuQ291bnRzLnJlZHVjZSgoc3VtLCBjb3VudCkgPT4gc3VtICsgY291bnQsIDApO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGlzdFRva2VuQ291bnRlciA9IGFzeW5jIChtc2dzKSA9PiB0b2tlbkNvdW50ZXIobXNncyk7XG4gICAgfVxuICAgIGxldCB0ZXh0U3BsaXR0ZXJGdW5jID0gZGVmYXVsdFRleHRTcGxpdHRlcjtcbiAgICBpZiAodGV4dFNwbGl0dGVyKSB7XG4gICAgICAgIGlmIChcInNwbGl0VGV4dFwiIGluIHRleHRTcGxpdHRlcikge1xuICAgICAgICAgICAgdGV4dFNwbGl0dGVyRnVuYyA9IHRleHRTcGxpdHRlci5zcGxpdFRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0ZXh0U3BsaXR0ZXJGdW5jID0gYXN5bmMgKHRleHQpID0+IHRleHRTcGxpdHRlcih0ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3RyYXRlZ3kgPT09IFwiZmlyc3RcIikge1xuICAgICAgICByZXR1cm4gX2ZpcnN0TWF4VG9rZW5zKG1lc3NhZ2VzLCB7XG4gICAgICAgICAgICBtYXhUb2tlbnMsXG4gICAgICAgICAgICB0b2tlbkNvdW50ZXI6IGxpc3RUb2tlbkNvdW50ZXIsXG4gICAgICAgICAgICB0ZXh0U3BsaXR0ZXI6IHRleHRTcGxpdHRlckZ1bmMsXG4gICAgICAgICAgICBwYXJ0aWFsU3RyYXRlZ3k6IGFsbG93UGFydGlhbCA/IFwiZmlyc3RcIiA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVuZE9uLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3RyYXRlZ3kgPT09IFwibGFzdFwiKSB7XG4gICAgICAgIHJldHVybiBfbGFzdE1heFRva2VucyhtZXNzYWdlcywge1xuICAgICAgICAgICAgbWF4VG9rZW5zLFxuICAgICAgICAgICAgdG9rZW5Db3VudGVyOiBsaXN0VG9rZW5Db3VudGVyLFxuICAgICAgICAgICAgdGV4dFNwbGl0dGVyOiB0ZXh0U3BsaXR0ZXJGdW5jLFxuICAgICAgICAgICAgYWxsb3dQYXJ0aWFsLFxuICAgICAgICAgICAgaW5jbHVkZVN5c3RlbSxcbiAgICAgICAgICAgIHN0YXJ0T24sXG4gICAgICAgICAgICBlbmRPbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBzdHJhdGVneTogJyR7c3RyYXRlZ3l9Jy4gTXVzdCBiZSBvbmUgb2YgJ2ZpcnN0JyBvciAnbGFzdCcuYCk7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gX2ZpcnN0TWF4VG9rZW5zKG1lc3NhZ2VzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgeyBtYXhUb2tlbnMsIHRva2VuQ291bnRlciwgdGV4dFNwbGl0dGVyLCBwYXJ0aWFsU3RyYXRlZ3ksIGVuZE9uIH0gPSBvcHRpb25zO1xuICAgIGxldCBtZXNzYWdlc0NvcHkgPSBbLi4ubWVzc2FnZXNdO1xuICAgIGxldCBpZHggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZXNDb3B5Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ01lc3NhZ2VzID0gaSA+IDAgPyBtZXNzYWdlc0NvcHkuc2xpY2UoMCwgLWkpIDogbWVzc2FnZXNDb3B5O1xuICAgICAgICBpZiAoKGF3YWl0IHRva2VuQ291bnRlcihyZW1haW5pbmdNZXNzYWdlcykpIDw9IG1heFRva2Vucykge1xuICAgICAgICAgICAgaWR4ID0gbWVzc2FnZXNDb3B5Lmxlbmd0aCAtIGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaWR4IDwgbWVzc2FnZXNDb3B5Lmxlbmd0aCAmJiBwYXJ0aWFsU3RyYXRlZ3kpIHtcbiAgICAgICAgbGV0IGluY2x1ZGVkUGFydGlhbCA9IGZhbHNlO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlc0NvcHlbaWR4XS5jb250ZW50KSkge1xuICAgICAgICAgICAgY29uc3QgZXhjbHVkZWQgPSBtZXNzYWdlc0NvcHlbaWR4XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXhjbHVkZWQuY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIGNvbnRlbnQgdG8gYmUgYW4gYXJyYXkuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbnVtQmxvY2sgPSBleGNsdWRlZC5jb250ZW50Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHJldmVyc2VkQ29udGVudCA9IHBhcnRpYWxTdHJhdGVneSA9PT0gXCJsYXN0XCJcbiAgICAgICAgICAgICAgICA/IFsuLi5leGNsdWRlZC5jb250ZW50XS5yZXZlcnNlKClcbiAgICAgICAgICAgICAgICA6IGV4Y2x1ZGVkLmNvbnRlbnQ7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBudW1CbG9jazsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydGlhbENvbnRlbnQgPSBwYXJ0aWFsU3RyYXRlZ3kgPT09IFwiZmlyc3RcIlxuICAgICAgICAgICAgICAgICAgICA/IHJldmVyc2VkQ29udGVudC5zbGljZSgwLCBpKVxuICAgICAgICAgICAgICAgICAgICA6IHJldmVyc2VkQ29udGVudC5zbGljZSgtaSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRzID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGV4Y2x1ZGVkKS5maWx0ZXIoKFtrXSkgPT4gayAhPT0gXCJ0eXBlXCIgJiYgIWsuc3RhcnRzV2l0aChcImxjX1wiKSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRNZXNzYWdlID0gX3N3aXRjaFR5cGVUb01lc3NhZ2UoZXhjbHVkZWQuZ2V0VHlwZSgpLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFydGlhbENvbnRlbnQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2xpY2VkTWVzc2FnZXMgPSBbLi4ubWVzc2FnZXNDb3B5LnNsaWNlKDAsIGlkeCksIHVwZGF0ZWRNZXNzYWdlXTtcbiAgICAgICAgICAgICAgICBpZiAoKGF3YWl0IHRva2VuQ291bnRlcihzbGljZWRNZXNzYWdlcykpIDw9IG1heFRva2Vucykge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc0NvcHkgPSBzbGljZWRNZXNzYWdlcztcbiAgICAgICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIGluY2x1ZGVkUGFydGlhbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5jbHVkZWRQYXJ0aWFsICYmIHBhcnRpYWxTdHJhdGVneSA9PT0gXCJsYXN0XCIpIHtcbiAgICAgICAgICAgICAgICBleGNsdWRlZC5jb250ZW50ID0gWy4uLnJldmVyc2VkQ29udGVudF0ucmV2ZXJzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaW5jbHVkZWRQYXJ0aWFsKSB7XG4gICAgICAgICAgICBjb25zdCBleGNsdWRlZCA9IG1lc3NhZ2VzQ29weVtpZHhdO1xuICAgICAgICAgICAgbGV0IHRleHQ7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShleGNsdWRlZC5jb250ZW50KSAmJlxuICAgICAgICAgICAgICAgIGV4Y2x1ZGVkLmNvbnRlbnQuc29tZSgoYmxvY2spID0+IHR5cGVvZiBibG9jayA9PT0gXCJzdHJpbmdcIiB8fCBibG9jay50eXBlID09PSBcInRleHRcIikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0QmxvY2sgPSBleGNsdWRlZC5jb250ZW50LmZpbmQoKGJsb2NrKSA9PiBibG9jay50eXBlID09PSBcInRleHRcIiAmJiBibG9jay50ZXh0KTtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dEJsb2NrPy50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGV4Y2x1ZGVkLmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gZXhjbHVkZWQuY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BsaXRUZXh0cyA9IGF3YWl0IHRleHRTcGxpdHRlcih0ZXh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBudW1TcGxpdHMgPSBzcGxpdFRleHRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAocGFydGlhbFN0cmF0ZWd5ID09PSBcImxhc3RcIikge1xuICAgICAgICAgICAgICAgICAgICBzcGxpdFRleHRzLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgXyA9IDA7IF8gPCBudW1TcGxpdHMgLSAxOyBfICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3BsaXRUZXh0cy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWQuY29udGVudCA9IHNwbGl0VGV4dHMuam9pbihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChhd2FpdCB0b2tlbkNvdW50ZXIoWy4uLm1lc3NhZ2VzQ29weS5zbGljZSgwLCBpZHgpLCBleGNsdWRlZF0pKSA8PVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4VG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydGlhbFN0cmF0ZWd5ID09PSBcImxhc3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVkLmNvbnRlbnQgPSBbLi4uc3BsaXRUZXh0c10ucmV2ZXJzZSgpLmpvaW4oXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc0NvcHkgPSBbLi4ubWVzc2FnZXNDb3B5LnNsaWNlKDAsIGlkeCksIGV4Y2x1ZGVkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuZE9uKSB7XG4gICAgICAgIGNvbnN0IGVuZE9uQXJyID0gQXJyYXkuaXNBcnJheShlbmRPbikgPyBlbmRPbiA6IFtlbmRPbl07XG4gICAgICAgIHdoaWxlIChpZHggPiAwICYmICFfaXNNZXNzYWdlVHlwZShtZXNzYWdlc0NvcHlbaWR4IC0gMV0sIGVuZE9uQXJyKSkge1xuICAgICAgICAgICAgaWR4IC09IDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2VzQ29weS5zbGljZSgwLCBpZHgpO1xufVxuYXN5bmMgZnVuY3Rpb24gX2xhc3RNYXhUb2tlbnMobWVzc2FnZXMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGFsbG93UGFydGlhbCA9IGZhbHNlLCBpbmNsdWRlU3lzdGVtID0gZmFsc2UsIGVuZE9uLCBzdGFydE9uLCAuLi5yZXN0IH0gPSBvcHRpb25zO1xuICAgIC8vIENyZWF0ZSBhIGNvcHkgb2YgbWVzc2FnZXMgdG8gYXZvaWQgbXV0YXRpb25cbiAgICBsZXQgbWVzc2FnZXNDb3B5ID0gbWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhtZXNzYWdlKS5maWx0ZXIoKFtrXSkgPT4gayAhPT0gXCJ0eXBlXCIgJiYgIWsuc3RhcnRzV2l0aChcImxjX1wiKSkpO1xuICAgICAgICByZXR1cm4gX3N3aXRjaFR5cGVUb01lc3NhZ2UobWVzc2FnZS5nZXRUeXBlKCksIGZpZWxkcywgaXNCYXNlTWVzc2FnZUNodW5rKG1lc3NhZ2UpKTtcbiAgICB9KTtcbiAgICBpZiAoZW5kT24pIHtcbiAgICAgICAgY29uc3QgZW5kT25BcnIgPSBBcnJheS5pc0FycmF5KGVuZE9uKSA/IGVuZE9uIDogW2VuZE9uXTtcbiAgICAgICAgd2hpbGUgKG1lc3NhZ2VzQ29weS5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAhX2lzTWVzc2FnZVR5cGUobWVzc2FnZXNDb3B5W21lc3NhZ2VzQ29weS5sZW5ndGggLSAxXSwgZW5kT25BcnIpKSB7XG4gICAgICAgICAgICBtZXNzYWdlc0NvcHkgPSBtZXNzYWdlc0NvcHkuc2xpY2UoMCwgLTEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHN3YXBwZWRTeXN0ZW0gPSBpbmNsdWRlU3lzdGVtICYmIG1lc3NhZ2VzQ29weVswXT8uZ2V0VHlwZSgpID09PSBcInN5c3RlbVwiO1xuICAgIGxldCByZXZlcnNlZF8gPSBzd2FwcGVkU3lzdGVtXG4gICAgICAgID8gbWVzc2FnZXNDb3B5LnNsaWNlKDAsIDEpLmNvbmNhdChtZXNzYWdlc0NvcHkuc2xpY2UoMSkucmV2ZXJzZSgpKVxuICAgICAgICA6IG1lc3NhZ2VzQ29weS5yZXZlcnNlKCk7XG4gICAgcmV2ZXJzZWRfID0gYXdhaXQgX2ZpcnN0TWF4VG9rZW5zKHJldmVyc2VkXywge1xuICAgICAgICAuLi5yZXN0LFxuICAgICAgICBwYXJ0aWFsU3RyYXRlZ3k6IGFsbG93UGFydGlhbCA/IFwibGFzdFwiIDogdW5kZWZpbmVkLFxuICAgICAgICBlbmRPbjogc3RhcnRPbixcbiAgICB9KTtcbiAgICBpZiAoc3dhcHBlZFN5c3RlbSkge1xuICAgICAgICByZXR1cm4gW3JldmVyc2VkX1swXSwgLi4ucmV2ZXJzZWRfLnNsaWNlKDEpLnJldmVyc2UoKV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gcmV2ZXJzZWRfLnJldmVyc2UoKTtcbiAgICB9XG59XG5jb25zdCBfTVNHX0NIVU5LX01BUCA9IHtcbiAgICBodW1hbjoge1xuICAgICAgICBtZXNzYWdlOiBIdW1hbk1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2VDaHVuazogSHVtYW5NZXNzYWdlQ2h1bmssXG4gICAgfSxcbiAgICBhaToge1xuICAgICAgICBtZXNzYWdlOiBBSU1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2VDaHVuazogQUlNZXNzYWdlQ2h1bmssXG4gICAgfSxcbiAgICBzeXN0ZW06IHtcbiAgICAgICAgbWVzc2FnZTogU3lzdGVtTWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZUNodW5rOiBTeXN0ZW1NZXNzYWdlQ2h1bmssXG4gICAgfSxcbiAgICBkZXZlbG9wZXI6IHtcbiAgICAgICAgbWVzc2FnZTogU3lzdGVtTWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZUNodW5rOiBTeXN0ZW1NZXNzYWdlQ2h1bmssXG4gICAgfSxcbiAgICB0b29sOiB7XG4gICAgICAgIG1lc3NhZ2U6IFRvb2xNZXNzYWdlLFxuICAgICAgICBtZXNzYWdlQ2h1bms6IFRvb2xNZXNzYWdlQ2h1bmssXG4gICAgfSxcbiAgICBmdW5jdGlvbjoge1xuICAgICAgICBtZXNzYWdlOiBGdW5jdGlvbk1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2VDaHVuazogRnVuY3Rpb25NZXNzYWdlQ2h1bmssXG4gICAgfSxcbiAgICBnZW5lcmljOiB7XG4gICAgICAgIG1lc3NhZ2U6IENoYXRNZXNzYWdlLFxuICAgICAgICBtZXNzYWdlQ2h1bms6IENoYXRNZXNzYWdlQ2h1bmssXG4gICAgfSxcbiAgICByZW1vdmU6IHtcbiAgICAgICAgbWVzc2FnZTogUmVtb3ZlTWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZUNodW5rOiBSZW1vdmVNZXNzYWdlLCAvLyBSZW1vdmVNZXNzYWdlIGRvZXMgbm90IGhhdmUgYSBjaHVuayBjbGFzcy5cbiAgICB9LFxufTtcbmZ1bmN0aW9uIF9zd2l0Y2hUeXBlVG9NZXNzYWdlKG1lc3NhZ2VUeXBlLCBmaWVsZHMsIHJldHVybkNodW5rKSB7XG4gICAgbGV0IGNodW5rO1xuICAgIGxldCBtc2c7XG4gICAgc3dpdGNoIChtZXNzYWdlVHlwZSkge1xuICAgICAgICBjYXNlIFwiaHVtYW5cIjpcbiAgICAgICAgICAgIGlmIChyZXR1cm5DaHVuaykge1xuICAgICAgICAgICAgICAgIGNodW5rID0gbmV3IEh1bWFuTWVzc2FnZUNodW5rKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgSHVtYW5NZXNzYWdlKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImFpXCI6XG4gICAgICAgICAgICBpZiAocmV0dXJuQ2h1bmspIHtcbiAgICAgICAgICAgICAgICBsZXQgYWlDaHVua0ZpZWxkcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKFwidG9vbF9jYWxsc1wiIGluIGFpQ2h1bmtGaWVsZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYWlDaHVua0ZpZWxkcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmFpQ2h1bmtGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiBhaUNodW5rRmllbGRzLnRvb2xfY2FsbHM/Lm1hcCgodGMpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxfY2h1bmtcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IEpTT04uc3RyaW5naWZ5KHRjLmFyZ3MpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaHVuayA9IG5ldyBBSU1lc3NhZ2VDaHVuayhhaUNodW5rRmllbGRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBBSU1lc3NhZ2UoZmllbGRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic3lzdGVtXCI6XG4gICAgICAgICAgICBpZiAocmV0dXJuQ2h1bmspIHtcbiAgICAgICAgICAgICAgICBjaHVuayA9IG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoZmllbGRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBTeXN0ZW1NZXNzYWdlKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImRldmVsb3BlclwiOlxuICAgICAgICAgICAgaWYgKHJldHVybkNodW5rKSB7XG4gICAgICAgICAgICAgICAgY2h1bmsgPSBuZXcgU3lzdGVtTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzLmFkZGl0aW9uYWxfa3dhcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgX19vcGVuYWlfcm9sZV9fOiBcImRldmVsb3BlclwiLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IFN5c3RlbU1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5maWVsZHMuYWRkaXRpb25hbF9rd2FyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBfX29wZW5haV9yb2xlX186IFwiZGV2ZWxvcGVyXCIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInRvb2xcIjpcbiAgICAgICAgICAgIGlmIChcInRvb2xfY2FsbF9pZFwiIGluIGZpZWxkcykge1xuICAgICAgICAgICAgICAgIGlmIChyZXR1cm5DaHVuaykge1xuICAgICAgICAgICAgICAgICAgICBjaHVuayA9IG5ldyBUb29sTWVzc2FnZUNodW5rKGZpZWxkcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtc2cgPSBuZXcgVG9vbE1lc3NhZ2UoZmllbGRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4gbm90IGNvbnZlcnQgVG9vbE1lc3NhZ2UgdG8gVG9vbE1lc3NhZ2VDaHVuayBpZiAndG9vbF9jYWxsX2lkJyBmaWVsZCBpcyBub3QgZGVmaW5lZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICBpZiAocmV0dXJuQ2h1bmspIHtcbiAgICAgICAgICAgICAgICBjaHVuayA9IG5ldyBGdW5jdGlvbk1lc3NhZ2VDaHVuayhmaWVsZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWVsZHMubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGdW5jdGlvbk1lc3NhZ2UgbXVzdCBoYXZlIGEgJ25hbWUnIGZpZWxkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgRnVuY3Rpb25NZXNzYWdlKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImdlbmVyaWNcIjpcbiAgICAgICAgICAgIGlmIChcInJvbGVcIiBpbiBmaWVsZHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuQ2h1bmspIHtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsgPSBuZXcgQ2hhdE1lc3NhZ2VDaHVuayhmaWVsZHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gbmV3IENoYXRNZXNzYWdlKGZpZWxkcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuIG5vdCBjb252ZXJ0IENoYXRNZXNzYWdlIHRvIENoYXRNZXNzYWdlQ2h1bmsgaWYgJ3JvbGUnIGZpZWxkIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgbWVzc2FnZSB0eXBlICR7bWVzc2FnZVR5cGV9YCk7XG4gICAgfVxuICAgIGlmIChyZXR1cm5DaHVuayAmJiBjaHVuaykge1xuICAgICAgICByZXR1cm4gY2h1bms7XG4gICAgfVxuICAgIGlmIChtc2cpIHtcbiAgICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgbWVzc2FnZSB0eXBlICR7bWVzc2FnZVR5cGV9YCk7XG59XG5mdW5jdGlvbiBfY2h1bmtUb01zZyhjaHVuaykge1xuICAgIGNvbnN0IGNodW5rVHlwZSA9IGNodW5rLmdldFR5cGUoKTtcbiAgICBsZXQgbXNnO1xuICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhjaHVuaykuZmlsdGVyKChba10pID0+ICFbXCJ0eXBlXCIsIFwidG9vbF9jYWxsX2NodW5rc1wiXS5pbmNsdWRlcyhrKSAmJiAhay5zdGFydHNXaXRoKFwibGNfXCIpKSk7XG4gICAgaWYgKGNodW5rVHlwZSBpbiBfTVNHX0NIVU5LX01BUCkge1xuICAgICAgICBtc2cgPSBfc3dpdGNoVHlwZVRvTWVzc2FnZShjaHVua1R5cGUsIGZpZWxkcyk7XG4gICAgfVxuICAgIGlmICghbXNnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIG1lc3NhZ2UgY2h1bmsgY2xhc3MgJHtjaHVua1R5cGV9LiBTdXBwb3J0ZWQgY2xhc3NlcyBhcmUgJHtPYmplY3Qua2V5cyhfTVNHX0NIVU5LX01BUCl9YCk7XG4gICAgfVxuICAgIHJldHVybiBtc2c7XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IHRleHQgc3BsaXR0ZXIgZnVuY3Rpb24gdGhhdCBzcGxpdHMgdGV4dCBieSBuZXdsaW5lcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2Ygc3RyaW5ncyBzcGxpdCBieSBuZXdsaW5lcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRUZXh0U3BsaXR0ZXIodGV4dCkge1xuICAgIGNvbnN0IHNwbGl0cyA9IHRleHQuc3BsaXQoXCJcXG5cIik7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXG4gICAgICAgIC4uLnNwbGl0cy5zbGljZSgwLCAtMSkubWFwKChzKSA9PiBgJHtzfVxcbmApLFxuICAgICAgICBzcGxpdHNbc3BsaXRzLmxlbmd0aCAtIDFdLFxuICAgIF0pO1xufVxuIl0sIm5hbWVzIjpbIlJ1bm5hYmxlTGFtYmRhIiwiQUlNZXNzYWdlIiwiQUlNZXNzYWdlQ2h1bmsiLCJpc0Jhc2VNZXNzYWdlQ2h1bmsiLCJDaGF0TWVzc2FnZSIsIkNoYXRNZXNzYWdlQ2h1bmsiLCJGdW5jdGlvbk1lc3NhZ2UiLCJGdW5jdGlvbk1lc3NhZ2VDaHVuayIsIkh1bWFuTWVzc2FnZSIsIkh1bWFuTWVzc2FnZUNodW5rIiwiUmVtb3ZlTWVzc2FnZSIsIlN5c3RlbU1lc3NhZ2UiLCJTeXN0ZW1NZXNzYWdlQ2h1bmsiLCJUb29sTWVzc2FnZSIsIlRvb2xNZXNzYWdlQ2h1bmsiLCJjb252ZXJ0VG9DaHVuayIsIl9pc01lc3NhZ2VUeXBlIiwibXNnIiwidHlwZXMiLCJ0eXBlc0FzU3RyaW5ncyIsIlNldCIsIm1hcCIsInQiLCJpbnN0YW50aWF0ZWRNc2dDbGFzcyIsImdldFR5cGUiLCJFcnJvciIsIm1zZ1R5cGUiLCJzb21lIiwiZmlsdGVyTWVzc2FnZXMiLCJtZXNzYWdlc09yT3B0aW9ucyIsIm9wdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJfZmlsdGVyTWVzc2FnZXMiLCJmcm9tIiwiaW5wdXQiLCJtZXNzYWdlcyIsImluY2x1ZGVOYW1lcyIsImV4Y2x1ZGVOYW1lcyIsImluY2x1ZGVUeXBlcyIsImV4Y2x1ZGVUeXBlcyIsImluY2x1ZGVJZHMiLCJleGNsdWRlSWRzIiwiZmlsdGVyZWQiLCJuYW1lIiwiaW5jbHVkZXMiLCJpZCIsInB1c2giLCJpTmFtZSIsIm1lcmdlTWVzc2FnZVJ1bnMiLCJfbWVyZ2VNZXNzYWdlUnVucyIsImxlbmd0aCIsIm1lcmdlZCIsImN1cnIiLCJsYXN0IiwicG9wIiwibGFzdENodW5rIiwiY3VyckNodW5rIiwibWVyZ2VkQ2h1bmtzIiwiY29uY2F0IiwiY29udGVudCIsIl9jaHVua1RvTXNnIiwidHJpbU1lc3NhZ2VzIiwiX3RyaW1NZXNzYWdlc0hlbHBlciIsInRyaW1tZXJPcHRpb25zIiwid2l0aENvbmZpZyIsInJ1bk5hbWUiLCJtYXhUb2tlbnMiLCJ0b2tlbkNvdW50ZXIiLCJzdHJhdGVneSIsImFsbG93UGFydGlhbCIsImVuZE9uIiwic3RhcnRPbiIsImluY2x1ZGVTeXN0ZW0iLCJ0ZXh0U3BsaXR0ZXIiLCJsaXN0VG9rZW5Db3VudGVyIiwibXNncyIsInRva2VuQ291bnRzIiwiUHJvbWlzZSIsImFsbCIsImdldE51bVRva2VucyIsInJlZHVjZSIsInN1bSIsImNvdW50IiwidGV4dFNwbGl0dGVyRnVuYyIsImRlZmF1bHRUZXh0U3BsaXR0ZXIiLCJzcGxpdFRleHQiLCJ0ZXh0IiwiX2ZpcnN0TWF4VG9rZW5zIiwicGFydGlhbFN0cmF0ZWd5IiwidW5kZWZpbmVkIiwiX2xhc3RNYXhUb2tlbnMiLCJtZXNzYWdlc0NvcHkiLCJpZHgiLCJpIiwicmVtYWluaW5nTWVzc2FnZXMiLCJzbGljZSIsImluY2x1ZGVkUGFydGlhbCIsImV4Y2x1ZGVkIiwibnVtQmxvY2siLCJyZXZlcnNlZENvbnRlbnQiLCJyZXZlcnNlIiwicGFydGlhbENvbnRlbnQiLCJmaWVsZHMiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJmaWx0ZXIiLCJrIiwic3RhcnRzV2l0aCIsInVwZGF0ZWRNZXNzYWdlIiwiX3N3aXRjaFR5cGVUb01lc3NhZ2UiLCJzbGljZWRNZXNzYWdlcyIsImJsb2NrIiwidHlwZSIsInRleHRCbG9jayIsImZpbmQiLCJzcGxpdFRleHRzIiwibnVtU3BsaXRzIiwiXyIsImpvaW4iLCJlbmRPbkFyciIsInJlc3QiLCJtZXNzYWdlIiwic3dhcHBlZFN5c3RlbSIsInJldmVyc2VkXyIsIl9NU0dfQ0hVTktfTUFQIiwiaHVtYW4iLCJtZXNzYWdlQ2h1bmsiLCJhaSIsInN5c3RlbSIsImRldmVsb3BlciIsInRvb2wiLCJmdW5jdGlvbiIsImdlbmVyaWMiLCJyZW1vdmUiLCJtZXNzYWdlVHlwZSIsInJldHVybkNodW5rIiwiY2h1bmsiLCJhaUNodW5rRmllbGRzIiwidG9vbF9jYWxsX2NodW5rcyIsInRvb2xfY2FsbHMiLCJ0YyIsImluZGV4IiwiYXJncyIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRpdGlvbmFsX2t3YXJncyIsIl9fb3BlbmFpX3JvbGVfXyIsImNodW5rVHlwZSIsImtleXMiLCJzcGxpdHMiLCJzcGxpdCIsInJlc29sdmUiLCJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/transformers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/utils.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/utils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   coerceMessageLikeToMessage: () => (/* binding */ coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* binding */ convertToChunk),\n/* harmony export */   getBufferString: () => (/* binding */ getBufferString),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* binding */ mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* binding */ mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* binding */ mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/errors/index.js\");\n/* harmony import */ var _tools_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tools/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/tools/utils.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _modifier_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./modifier.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/modifier.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\n\n\n\nfunction _coerceToolCall(toolCall) {\n    if ((0,_tools_utils_js__WEBPACK_IMPORTED_MODULE_1__._isToolCall)(toolCall)) {\n        return toolCall;\n    } else if (typeof toolCall.id === \"string\" && toolCall.type === \"function\" && typeof toolCall.function === \"object\" && toolCall.function !== null && \"arguments\" in toolCall.function && typeof toolCall.function.arguments === \"string\" && \"name\" in toolCall.function && typeof toolCall.function.name === \"string\") {\n        // Handle OpenAI tool call format\n        return {\n            id: toolCall.id,\n            args: JSON.parse(toolCall.function.arguments),\n            name: toolCall.function.name,\n            type: \"tool_call\"\n        };\n    } else {\n        // TODO: Throw an error?\n        return toolCall;\n    }\n}\nfunction isSerializedConstructor(x) {\n    return typeof x === \"object\" && x != null && x.lc === 1 && Array.isArray(x.id) && x.kwargs != null && typeof x.kwargs === \"object\";\n}\nfunction _constructMessageFromParams(params) {\n    let type;\n    let rest;\n    // Support serialized messages\n    if (isSerializedConstructor(params)) {\n        const className = params.id.at(-1);\n        if (className === \"HumanMessage\" || className === \"HumanMessageChunk\") {\n            type = \"user\";\n        } else if (className === \"AIMessage\" || className === \"AIMessageChunk\") {\n            type = \"assistant\";\n        } else if (className === \"SystemMessage\" || className === \"SystemMessageChunk\") {\n            type = \"system\";\n        } else if (className === \"FunctionMessage\" || className === \"FunctionMessageChunk\") {\n            type = \"function\";\n        } else if (className === \"ToolMessage\" || className === \"ToolMessageChunk\") {\n            type = \"tool\";\n        } else {\n            type = \"unknown\";\n        }\n        rest = params.kwargs;\n    } else {\n        const { type: extractedType, ...otherParams } = params;\n        type = extractedType;\n        rest = otherParams;\n    }\n    if (type === \"human\" || type === \"user\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_6__.HumanMessage(rest);\n    } else if (type === \"ai\" || type === \"assistant\") {\n        const { tool_calls: rawToolCalls, ...other } = rest;\n        if (!Array.isArray(rawToolCalls)) {\n            return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage(rest);\n        }\n        const tool_calls = rawToolCalls.map(_coerceToolCall);\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage({\n            ...other,\n            tool_calls\n        });\n    } else if (type === \"system\") {\n        return new _system_js__WEBPACK_IMPORTED_MODULE_8__.SystemMessage(rest);\n    } else if (type === \"developer\") {\n        return new _system_js__WEBPACK_IMPORTED_MODULE_8__.SystemMessage({\n            ...rest,\n            additional_kwargs: {\n                ...rest.additional_kwargs,\n                __openai_role__: \"developer\"\n            }\n        });\n    } else if (type === \"tool\" && \"tool_call_id\" in rest) {\n        return new _tool_js__WEBPACK_IMPORTED_MODULE_9__.ToolMessage({\n            ...rest,\n            content: rest.content,\n            tool_call_id: rest.tool_call_id,\n            name: rest.name\n        });\n    } else if (type === \"remove\" && \"id\" in rest && typeof rest.id === \"string\") {\n        return new _modifier_js__WEBPACK_IMPORTED_MODULE_7__.RemoveMessage({\n            ...rest,\n            id: rest.id\n        });\n    } else {\n        const error = (0,_errors_index_js__WEBPACK_IMPORTED_MODULE_0__.addLangChainErrorFields)(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.\\n\\nReceived: ${JSON.stringify(params, null, 2)}`), \"MESSAGE_COERCION_FAILURE\");\n        throw error;\n    }\n}\nfunction coerceMessageLikeToMessage(messageLike) {\n    if (typeof messageLike === \"string\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_6__.HumanMessage(messageLike);\n    } else if ((0,_base_js__WEBPACK_IMPORTED_MODULE_3__.isBaseMessage)(messageLike)) {\n        return messageLike;\n    }\n    if (Array.isArray(messageLike)) {\n        const [type, content] = messageLike;\n        return _constructMessageFromParams({\n            type,\n            content\n        });\n    } else if ((0,_base_js__WEBPACK_IMPORTED_MODULE_3__._isMessageFieldWithRole)(messageLike)) {\n        const { role: type, ...rest } = messageLike;\n        return _constructMessageFromParams({\n            ...rest,\n            type\n        });\n    } else {\n        return _constructMessageFromParams(messageLike);\n    }\n}\n/**\n * This function is used by memory classes to get a string representation\n * of the chat message history, based on the message content and role.\n */ function getBufferString(messages, humanPrefix = \"Human\", aiPrefix = \"AI\") {\n    const string_messages = [];\n    for (const m of messages){\n        let role;\n        if (m._getType() === \"human\") {\n            role = humanPrefix;\n        } else if (m._getType() === \"ai\") {\n            role = aiPrefix;\n        } else if (m._getType() === \"system\") {\n            role = \"System\";\n        } else if (m._getType() === \"function\") {\n            role = \"Function\";\n        } else if (m._getType() === \"tool\") {\n            role = \"Tool\";\n        } else if (m._getType() === \"generic\") {\n            role = m.role;\n        } else {\n            throw new Error(`Got unsupported message type: ${m._getType()}`);\n        }\n        const nameStr = m.name ? `${m.name}, ` : \"\";\n        const readableContent = typeof m.content === \"string\" ? m.content : JSON.stringify(m.content, null, 2);\n        string_messages.push(`${role}: ${nameStr}${readableContent}`);\n    }\n    return string_messages.join(\"\\n\");\n}\n/**\n * Maps messages from an older format (V1) to the current `StoredMessage`\n * format. If the message is already in the `StoredMessage` format, it is\n * returned as is. Otherwise, it transforms the V1 message into a\n * `StoredMessage`. This function is important for maintaining\n * compatibility with older message formats.\n */ function mapV1MessageToStoredMessage(message) {\n    // TODO: Remove this mapper when we deprecate the old message format.\n    if (message.data !== undefined) {\n        return message;\n    } else {\n        const v1Message = message;\n        return {\n            type: v1Message.type,\n            data: {\n                content: v1Message.text,\n                role: v1Message.role,\n                name: undefined,\n                tool_call_id: undefined\n            }\n        };\n    }\n}\nfunction mapStoredMessageToChatMessage(message) {\n    const storedMessage = mapV1MessageToStoredMessage(message);\n    switch(storedMessage.type){\n        case \"human\":\n            return new _human_js__WEBPACK_IMPORTED_MODULE_6__.HumanMessage(storedMessage.data);\n        case \"ai\":\n            return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage(storedMessage.data);\n        case \"system\":\n            return new _system_js__WEBPACK_IMPORTED_MODULE_8__.SystemMessage(storedMessage.data);\n        case \"function\":\n            if (storedMessage.data.name === undefined) {\n                throw new Error(\"Name must be defined for function messages\");\n            }\n            return new _function_js__WEBPACK_IMPORTED_MODULE_5__.FunctionMessage(storedMessage.data);\n        case \"tool\":\n            if (storedMessage.data.tool_call_id === undefined) {\n                throw new Error(\"Tool call ID must be defined for tool messages\");\n            }\n            return new _tool_js__WEBPACK_IMPORTED_MODULE_9__.ToolMessage(storedMessage.data);\n        case \"generic\":\n            {\n                if (storedMessage.data.role === undefined) {\n                    throw new Error(\"Role must be defined for chat messages\");\n                }\n                return new _chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessage(storedMessage.data);\n            }\n        default:\n            throw new Error(`Got unexpected type: ${storedMessage.type}`);\n    }\n}\n/**\n * Transforms an array of `StoredMessage` instances into an array of\n * `BaseMessage` instances. It uses the `mapV1MessageToStoredMessage`\n * function to ensure all messages are in the `StoredMessage` format, then\n * creates new instances of the appropriate `BaseMessage` subclass based\n * on the type of each message. This function is used to prepare stored\n * messages for use in a chat context.\n */ function mapStoredMessagesToChatMessages(messages) {\n    return messages.map(mapStoredMessageToChatMessage);\n}\n/**\n * Transforms an array of `BaseMessage` instances into an array of\n * `StoredMessage` instances. It does this by calling the `toDict` method\n * on each `BaseMessage`, which returns a `StoredMessage`. This function\n * is used to prepare chat messages for storage.\n */ function mapChatMessagesToStoredMessages(messages) {\n    return messages.map((message)=>message.toDict());\n}\nfunction convertToChunk(message) {\n    const type = message._getType();\n    if (type === \"human\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _human_js__WEBPACK_IMPORTED_MODULE_6__.HumanMessageChunk({\n            ...message\n        });\n    } else if (type === \"ai\") {\n        let aiChunkFields = {\n            ...message\n        };\n        if (\"tool_calls\" in aiChunkFields) {\n            aiChunkFields = {\n                ...aiChunkFields,\n                tool_call_chunks: aiChunkFields.tool_calls?.map((tc)=>({\n                        ...tc,\n                        type: \"tool_call_chunk\",\n                        index: undefined,\n                        args: JSON.stringify(tc.args)\n                    }))\n            };\n        }\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessageChunk({\n            ...aiChunkFields\n        });\n    } else if (type === \"system\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _system_js__WEBPACK_IMPORTED_MODULE_8__.SystemMessageChunk({\n            ...message\n        });\n    } else if (type === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _function_js__WEBPACK_IMPORTED_MODULE_5__.FunctionMessageChunk({\n            ...message\n        });\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    } else if (_chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessage.isInstance(message)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessageChunk({\n            ...message\n        });\n    } else {\n        throw new Error(\"Unknown message type.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2RDtBQUNiO0FBQ0k7QUFDZ0I7QUFDVDtBQUNZO0FBQ1Y7QUFDZjtBQUNrQjtBQUN2QjtBQUN6QyxTQUFTZ0IsZ0JBQWdCQyxRQUFRO0lBQzdCLElBQUloQiw0REFBV0EsQ0FBQ2dCLFdBQVc7UUFDdkIsT0FBT0E7SUFDWCxPQUNLLElBQUksT0FBT0EsU0FBU0MsRUFBRSxLQUFLLFlBQzVCRCxTQUFTRSxJQUFJLEtBQUssY0FDbEIsT0FBT0YsU0FBU0csUUFBUSxLQUFLLFlBQzdCSCxTQUFTRyxRQUFRLEtBQUssUUFDdEIsZUFBZUgsU0FBU0csUUFBUSxJQUNoQyxPQUFPSCxTQUFTRyxRQUFRLENBQUNDLFNBQVMsS0FBSyxZQUN2QyxVQUFVSixTQUFTRyxRQUFRLElBQzNCLE9BQU9ILFNBQVNHLFFBQVEsQ0FBQ0UsSUFBSSxLQUFLLFVBQVU7UUFDNUMsaUNBQWlDO1FBQ2pDLE9BQU87WUFDSEosSUFBSUQsU0FBU0MsRUFBRTtZQUNmSyxNQUFNQyxLQUFLQyxLQUFLLENBQUNSLFNBQVNHLFFBQVEsQ0FBQ0MsU0FBUztZQUM1Q0MsTUFBTUwsU0FBU0csUUFBUSxDQUFDRSxJQUFJO1lBQzVCSCxNQUFNO1FBQ1Y7SUFDSixPQUNLO1FBQ0Qsd0JBQXdCO1FBQ3hCLE9BQU9GO0lBQ1g7QUFDSjtBQUNBLFNBQVNTLHdCQUF3QkMsQ0FBQztJQUM5QixPQUFRLE9BQU9BLE1BQU0sWUFDakJBLEtBQUssUUFDTEEsRUFBRUMsRUFBRSxLQUFLLEtBQ1RDLE1BQU1DLE9BQU8sQ0FBQ0gsRUFBRVQsRUFBRSxLQUNsQlMsRUFBRUksTUFBTSxJQUFJLFFBQ1osT0FBT0osRUFBRUksTUFBTSxLQUFLO0FBQzVCO0FBQ0EsU0FBU0MsNEJBQTRCQyxNQUFNO0lBQ3ZDLElBQUlkO0lBQ0osSUFBSWU7SUFDSiw4QkFBOEI7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QW9CQSxDQUFDO1lBQUUsR0FBR3dELE9BQU87UUFBQztJQUM3QyxtRUFBbUU7SUFDdkUsT0FDSyxJQUFJM0QsaURBQVdBLENBQUMwRSxVQUFVLENBQUNmLFVBQVU7UUFDdEMsbUVBQW1FO1FBQ25FLE9BQU8sSUFBSTFELHNEQUFnQkEsQ0FBQztZQUFFLEdBQUcwRCxPQUFPO1FBQUM7SUFDN0MsT0FDSztRQUNELE1BQU0sSUFBSWpCLE1BQU07SUFDcEI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdXRpbHMuanM/ZTk3YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyB9IGZyb20gXCIuLi9lcnJvcnMvaW5kZXguanNcIjtcbmltcG9ydCB7IF9pc1Rvb2xDYWxsIH0gZnJvbSBcIi4uL3Rvb2xzL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBBSU1lc3NhZ2UsIEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vYWkuanNcIjtcbmltcG9ydCB7IGlzQmFzZU1lc3NhZ2UsIF9pc01lc3NhZ2VGaWVsZFdpdGhSb2xlLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IENoYXRNZXNzYWdlLCBDaGF0TWVzc2FnZUNodW5rLCB9IGZyb20gXCIuL2NoYXQuanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uTWVzc2FnZSwgRnVuY3Rpb25NZXNzYWdlQ2h1bmssIH0gZnJvbSBcIi4vZnVuY3Rpb24uanNcIjtcbmltcG9ydCB7IEh1bWFuTWVzc2FnZSwgSHVtYW5NZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9odW1hbi5qc1wiO1xuaW1wb3J0IHsgUmVtb3ZlTWVzc2FnZSB9IGZyb20gXCIuL21vZGlmaWVyLmpzXCI7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlLCBTeXN0ZW1NZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9zeXN0ZW0uanNcIjtcbmltcG9ydCB7IFRvb2xNZXNzYWdlLCB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbmZ1bmN0aW9uIF9jb2VyY2VUb29sQ2FsbCh0b29sQ2FsbCkge1xuICAgIGlmIChfaXNUb29sQ2FsbCh0b29sQ2FsbCkpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xDYWxsO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdG9vbENhbGwuaWQgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgdG9vbENhbGwudHlwZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIHR5cGVvZiB0b29sQ2FsbC5mdW5jdGlvbiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICB0b29sQ2FsbC5mdW5jdGlvbiAhPT0gbnVsbCAmJlxuICAgICAgICBcImFyZ3VtZW50c1wiIGluIHRvb2xDYWxsLmZ1bmN0aW9uICYmXG4gICAgICAgIHR5cGVvZiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgXCJuYW1lXCIgaW4gdG9vbENhbGwuZnVuY3Rpb24gJiZcbiAgICAgICAgdHlwZW9mIHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgLy8gSGFuZGxlIE9wZW5BSSB0b29sIGNhbGwgZm9ybWF0XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICBhcmdzOiBKU09OLnBhcnNlKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyksXG4gICAgICAgICAgICBuYW1lOiB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFRPRE86IFRocm93IGFuIGVycm9yP1xuICAgICAgICByZXR1cm4gdG9vbENhbGw7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTZXJpYWxpemVkQ29uc3RydWN0b3IoeCkge1xuICAgIHJldHVybiAodHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgeCAhPSBudWxsICYmXG4gICAgICAgIHgubGMgPT09IDEgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheSh4LmlkKSAmJlxuICAgICAgICB4Lmt3YXJncyAhPSBudWxsICYmXG4gICAgICAgIHR5cGVvZiB4Lmt3YXJncyA9PT0gXCJvYmplY3RcIik7XG59XG5mdW5jdGlvbiBfY29uc3RydWN0TWVzc2FnZUZyb21QYXJhbXMocGFyYW1zKSB7XG4gICAgbGV0IHR5cGU7XG4gICAgbGV0IHJlc3Q7XG4gICAgLy8gU3VwcG9ydCBzZXJpYWxpemVkIG1lc3NhZ2VzXG4gICAgaWYgKGlzU2VyaWFsaXplZENvbnN0cnVjdG9yKHBhcmFtcykpIHtcbiAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gcGFyYW1zLmlkLmF0KC0xKTtcbiAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gXCJIdW1hbk1lc3NhZ2VcIiB8fCBjbGFzc05hbWUgPT09IFwiSHVtYW5NZXNzYWdlQ2h1bmtcIikge1xuICAgICAgICAgICAgdHlwZSA9IFwidXNlclwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNsYXNzTmFtZSA9PT0gXCJBSU1lc3NhZ2VcIiB8fCBjbGFzc05hbWUgPT09IFwiQUlNZXNzYWdlQ2h1bmtcIikge1xuICAgICAgICAgICAgdHlwZSA9IFwiYXNzaXN0YW50XCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2xhc3NOYW1lID09PSBcIlN5c3RlbU1lc3NhZ2VcIiB8fFxuICAgICAgICAgICAgY2xhc3NOYW1lID09PSBcIlN5c3RlbU1lc3NhZ2VDaHVua1wiKSB7XG4gICAgICAgICAgICB0eXBlID0gXCJzeXN0ZW1cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjbGFzc05hbWUgPT09IFwiRnVuY3Rpb25NZXNzYWdlXCIgfHxcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9PT0gXCJGdW5jdGlvbk1lc3NhZ2VDaHVua1wiKSB7XG4gICAgICAgICAgICB0eXBlID0gXCJmdW5jdGlvblwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNsYXNzTmFtZSA9PT0gXCJUb29sTWVzc2FnZVwiIHx8XG4gICAgICAgICAgICBjbGFzc05hbWUgPT09IFwiVG9vbE1lc3NhZ2VDaHVua1wiKSB7XG4gICAgICAgICAgICB0eXBlID0gXCJ0b29sXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0eXBlID0gXCJ1bmtub3duXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdCA9IHBhcmFtcy5rd2FyZ3M7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB7IHR5cGU6IGV4dHJhY3RlZFR5cGUsIC4uLm90aGVyUGFyYW1zIH0gPSBwYXJhbXM7XG4gICAgICAgIHR5cGUgPSBleHRyYWN0ZWRUeXBlO1xuICAgICAgICByZXN0ID0gb3RoZXJQYXJhbXM7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSBcImh1bWFuXCIgfHwgdHlwZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UocmVzdCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiYWlcIiB8fCB0eXBlID09PSBcImFzc2lzdGFudFwiKSB7XG4gICAgICAgIGNvbnN0IHsgdG9vbF9jYWxsczogcmF3VG9vbENhbGxzLCAuLi5vdGhlciB9ID0gcmVzdDtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJhd1Rvb2xDYWxscykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHJlc3QpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xfY2FsbHMgPSByYXdUb29sQ2FsbHMubWFwKF9jb2VyY2VUb29sQ2FsbCk7XG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHsgLi4ub3RoZXIsIHRvb2xfY2FsbHMgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlKHJlc3QpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImRldmVsb3BlclwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZSh7XG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IHtcbiAgICAgICAgICAgICAgICAuLi5yZXN0LmFkZGl0aW9uYWxfa3dhcmdzLFxuICAgICAgICAgICAgICAgIF9fb3BlbmFpX3JvbGVfXzogXCJkZXZlbG9wZXJcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInRvb2xcIiAmJiBcInRvb2xfY2FsbF9pZFwiIGluIHJlc3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZSh7XG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICAgICAgY29udGVudDogcmVzdC5jb250ZW50LFxuICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiByZXN0LnRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgIG5hbWU6IHJlc3QubmFtZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwicmVtb3ZlXCIgJiYgXCJpZFwiIGluIHJlc3QgJiYgdHlwZW9mIHJlc3QuaWQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZW1vdmVNZXNzYWdlKHsgLi4ucmVzdCwgaWQ6IHJlc3QuaWQgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBlcnJvciA9IGFkZExhbmdDaGFpbkVycm9yRmllbGRzKG5ldyBFcnJvcihgVW5hYmxlIHRvIGNvZXJjZSBtZXNzYWdlIGZyb20gYXJyYXk6IG9ubHkgaHVtYW4sIEFJLCBzeXN0ZW0sIGRldmVsb3Blciwgb3IgdG9vbCBtZXNzYWdlIGNvZXJjaW9uIGlzIGN1cnJlbnRseSBzdXBwb3J0ZWQuXFxuXFxuUmVjZWl2ZWQ6ICR7SlNPTi5zdHJpbmdpZnkocGFyYW1zLCBudWxsLCAyKX1gKSwgXCJNRVNTQUdFX0NPRVJDSU9OX0ZBSUxVUkVcIik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZShtZXNzYWdlTGlrZSkge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZUxpa2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UobWVzc2FnZUxpa2UpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VMaWtlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZUxpa2U7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KG1lc3NhZ2VMaWtlKSkge1xuICAgICAgICBjb25zdCBbdHlwZSwgY29udGVudF0gPSBtZXNzYWdlTGlrZTtcbiAgICAgICAgcmV0dXJuIF9jb25zdHJ1Y3RNZXNzYWdlRnJvbVBhcmFtcyh7IHR5cGUsIGNvbnRlbnQgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKF9pc01lc3NhZ2VGaWVsZFdpdGhSb2xlKG1lc3NhZ2VMaWtlKSkge1xuICAgICAgICBjb25zdCB7IHJvbGU6IHR5cGUsIC4uLnJlc3QgfSA9IG1lc3NhZ2VMaWtlO1xuICAgICAgICByZXR1cm4gX2NvbnN0cnVjdE1lc3NhZ2VGcm9tUGFyYW1zKHsgLi4ucmVzdCwgdHlwZSB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBfY29uc3RydWN0TWVzc2FnZUZyb21QYXJhbXMobWVzc2FnZUxpa2UpO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJ5IG1lbW9yeSBjbGFzc2VzIHRvIGdldCBhIHN0cmluZyByZXByZXNlbnRhdGlvblxuICogb2YgdGhlIGNoYXQgbWVzc2FnZSBoaXN0b3J5LCBiYXNlZCBvbiB0aGUgbWVzc2FnZSBjb250ZW50IGFuZCByb2xlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnVmZmVyU3RyaW5nKG1lc3NhZ2VzLCBodW1hblByZWZpeCA9IFwiSHVtYW5cIiwgYWlQcmVmaXggPSBcIkFJXCIpIHtcbiAgICBjb25zdCBzdHJpbmdfbWVzc2FnZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG0gb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgbGV0IHJvbGU7XG4gICAgICAgIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiaHVtYW5cIikge1xuICAgICAgICAgICAgcm9sZSA9IGh1bWFuUHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJhaVwiKSB7XG4gICAgICAgICAgICByb2xlID0gYWlQcmVmaXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgICAgICByb2xlID0gXCJTeXN0ZW1cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcm9sZSA9IFwiRnVuY3Rpb25cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICByb2xlID0gXCJUb29sXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcImdlbmVyaWNcIikge1xuICAgICAgICAgICAgcm9sZSA9IG0ucm9sZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR290IHVuc3VwcG9ydGVkIG1lc3NhZ2UgdHlwZTogJHttLl9nZXRUeXBlKCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmFtZVN0ciA9IG0ubmFtZSA/IGAke20ubmFtZX0sIGAgOiBcIlwiO1xuICAgICAgICBjb25zdCByZWFkYWJsZUNvbnRlbnQgPSB0eXBlb2YgbS5jb250ZW50ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IG0uY29udGVudFxuICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShtLmNvbnRlbnQsIG51bGwsIDIpO1xuICAgICAgICBzdHJpbmdfbWVzc2FnZXMucHVzaChgJHtyb2xlfTogJHtuYW1lU3RyfSR7cmVhZGFibGVDb250ZW50fWApO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nX21lc3NhZ2VzLmpvaW4oXCJcXG5cIik7XG59XG4vKipcbiAqIE1hcHMgbWVzc2FnZXMgZnJvbSBhbiBvbGRlciBmb3JtYXQgKFYxKSB0byB0aGUgY3VycmVudCBgU3RvcmVkTWVzc2FnZWBcbiAqIGZvcm1hdC4gSWYgdGhlIG1lc3NhZ2UgaXMgYWxyZWFkeSBpbiB0aGUgYFN0b3JlZE1lc3NhZ2VgIGZvcm1hdCwgaXQgaXNcbiAqIHJldHVybmVkIGFzIGlzLiBPdGhlcndpc2UsIGl0IHRyYW5zZm9ybXMgdGhlIFYxIG1lc3NhZ2UgaW50byBhXG4gKiBgU3RvcmVkTWVzc2FnZWAuIFRoaXMgZnVuY3Rpb24gaXMgaW1wb3J0YW50IGZvciBtYWludGFpbmluZ1xuICogY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIG1lc3NhZ2UgZm9ybWF0cy5cbiAqL1xuZnVuY3Rpb24gbWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBtYXBwZXIgd2hlbiB3ZSBkZXByZWNhdGUgdGhlIG9sZCBtZXNzYWdlIGZvcm1hdC5cbiAgICBpZiAobWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB2MU1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdjFNZXNzYWdlLnR5cGUsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgY29udGVudDogdjFNZXNzYWdlLnRleHQsXG4gICAgICAgICAgICAgICAgcm9sZTogdjFNZXNzYWdlLnJvbGUsXG4gICAgICAgICAgICAgICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gbWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGNvbnN0IHN0b3JlZE1lc3NhZ2UgPSBtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgc3dpdGNoIChzdG9yZWRNZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcImh1bWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwiYWlcIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJzeXN0ZW1cIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIGlmIChzdG9yZWRNZXNzYWdlLmRhdGEubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmFtZSBtdXN0IGJlIGRlZmluZWQgZm9yIGZ1bmN0aW9uIG1lc3NhZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbk1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcInRvb2xcIjpcbiAgICAgICAgICAgIGlmIChzdG9yZWRNZXNzYWdlLmRhdGEudG9vbF9jYWxsX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb29sIGNhbGwgSUQgbXVzdCBiZSBkZWZpbmVkIGZvciB0b29sIG1lc3NhZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwiZ2VuZXJpY1wiOiB7XG4gICAgICAgICAgICBpZiAoc3RvcmVkTWVzc2FnZS5kYXRhLnJvbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJvbGUgbXVzdCBiZSBkZWZpbmVkIGZvciBjaGF0IG1lc3NhZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0TWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvdCB1bmV4cGVjdGVkIHR5cGU6ICR7c3RvcmVkTWVzc2FnZS50eXBlfWApO1xuICAgIH1cbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBhcnJheSBvZiBgU3RvcmVkTWVzc2FnZWAgaW5zdGFuY2VzIGludG8gYW4gYXJyYXkgb2ZcbiAqIGBCYXNlTWVzc2FnZWAgaW5zdGFuY2VzLiBJdCB1c2VzIHRoZSBgbWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlYFxuICogZnVuY3Rpb24gdG8gZW5zdXJlIGFsbCBtZXNzYWdlcyBhcmUgaW4gdGhlIGBTdG9yZWRNZXNzYWdlYCBmb3JtYXQsIHRoZW5cbiAqIGNyZWF0ZXMgbmV3IGluc3RhbmNlcyBvZiB0aGUgYXBwcm9wcmlhdGUgYEJhc2VNZXNzYWdlYCBzdWJjbGFzcyBiYXNlZFxuICogb24gdGhlIHR5cGUgb2YgZWFjaCBtZXNzYWdlLiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gcHJlcGFyZSBzdG9yZWRcbiAqIG1lc3NhZ2VzIGZvciB1c2UgaW4gYSBjaGF0IGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXBTdG9yZWRNZXNzYWdlc1RvQ2hhdE1lc3NhZ2VzKG1lc3NhZ2VzKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLm1hcChtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZSk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYXJyYXkgb2YgYEJhc2VNZXNzYWdlYCBpbnN0YW5jZXMgaW50byBhbiBhcnJheSBvZlxuICogYFN0b3JlZE1lc3NhZ2VgIGluc3RhbmNlcy4gSXQgZG9lcyB0aGlzIGJ5IGNhbGxpbmcgdGhlIGB0b0RpY3RgIG1ldGhvZFxuICogb24gZWFjaCBgQmFzZU1lc3NhZ2VgLCB3aGljaCByZXR1cm5zIGEgYFN0b3JlZE1lc3NhZ2VgLiBUaGlzIGZ1bmN0aW9uXG4gKiBpcyB1c2VkIHRvIHByZXBhcmUgY2hhdCBtZXNzYWdlcyBmb3Igc3RvcmFnZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcENoYXRNZXNzYWdlc1RvU3RvcmVkTWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICByZXR1cm4gbWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiBtZXNzYWdlLnRvRGljdCgpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VG9DaHVuayhtZXNzYWdlKSB7XG4gICAgY29uc3QgdHlwZSA9IG1lc3NhZ2UuX2dldFR5cGUoKTtcbiAgICBpZiAodHlwZSA9PT0gXCJodW1hblwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2VDaHVuayh7IC4uLm1lc3NhZ2UgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiYWlcIikge1xuICAgICAgICBsZXQgYWlDaHVua0ZpZWxkcyA9IHtcbiAgICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInRvb2xfY2FsbHNcIiBpbiBhaUNodW5rRmllbGRzKSB7XG4gICAgICAgICAgICBhaUNodW5rRmllbGRzID0ge1xuICAgICAgICAgICAgICAgIC4uLmFpQ2h1bmtGaWVsZHMsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsX2NodW5rczogYWlDaHVua0ZpZWxkcy50b29sX2NhbGxzPy5tYXAoKHRjKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAuLi50YyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxfY2h1bmtcIixcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogSlNPTi5zdHJpbmdpZnkodGMuYXJncyksXG4gICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlQ2h1bmsoeyAuLi5haUNodW5rRmllbGRzIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZUNodW5rKHsgLi4ubWVzc2FnZSB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgIH1cbiAgICBlbHNlIGlmIChDaGF0TWVzc2FnZS5pc0luc3RhbmNlKG1lc3NhZ2UpKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0TWVzc2FnZUNodW5rKHsgLi4ubWVzc2FnZSB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gbWVzc2FnZSB0eXBlLlwiKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMiLCJfaXNUb29sQ2FsbCIsIkFJTWVzc2FnZSIsIkFJTWVzc2FnZUNodW5rIiwiaXNCYXNlTWVzc2FnZSIsIl9pc01lc3NhZ2VGaWVsZFdpdGhSb2xlIiwiQ2hhdE1lc3NhZ2UiLCJDaGF0TWVzc2FnZUNodW5rIiwiRnVuY3Rpb25NZXNzYWdlIiwiRnVuY3Rpb25NZXNzYWdlQ2h1bmsiLCJIdW1hbk1lc3NhZ2UiLCJIdW1hbk1lc3NhZ2VDaHVuayIsIlJlbW92ZU1lc3NhZ2UiLCJTeXN0ZW1NZXNzYWdlIiwiU3lzdGVtTWVzc2FnZUNodW5rIiwiVG9vbE1lc3NhZ2UiLCJfY29lcmNlVG9vbENhbGwiLCJ0b29sQ2FsbCIsImlkIiwidHlwZSIsImZ1bmN0aW9uIiwiYXJndW1lbnRzIiwibmFtZSIsImFyZ3MiLCJKU09OIiwicGFyc2UiLCJpc1NlcmlhbGl6ZWRDb25zdHJ1Y3RvciIsIngiLCJsYyIsIkFycmF5IiwiaXNBcnJheSIsImt3YXJncyIsIl9jb25zdHJ1Y3RNZXNzYWdlRnJvbVBhcmFtcyIsInBhcmFtcyIsInJlc3QiLCJjbGFzc05hbWUiLCJhdCIsImV4dHJhY3RlZFR5cGUiLCJvdGhlclBhcmFtcyIsInRvb2xfY2FsbHMiLCJyYXdUb29sQ2FsbHMiLCJvdGhlciIsIm1hcCIsImFkZGl0aW9uYWxfa3dhcmdzIiwiX19vcGVuYWlfcm9sZV9fIiwiY29udGVudCIsInRvb2xfY2FsbF9pZCIsImVycm9yIiwiRXJyb3IiLCJzdHJpbmdpZnkiLCJjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSIsIm1lc3NhZ2VMaWtlIiwicm9sZSIsImdldEJ1ZmZlclN0cmluZyIsIm1lc3NhZ2VzIiwiaHVtYW5QcmVmaXgiLCJhaVByZWZpeCIsInN0cmluZ19tZXNzYWdlcyIsIm0iLCJfZ2V0VHlwZSIsIm5hbWVTdHIiLCJyZWFkYWJsZUNvbnRlbnQiLCJwdXNoIiwiam9pbiIsIm1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZSIsIm1lc3NhZ2UiLCJkYXRhIiwidW5kZWZpbmVkIiwidjFNZXNzYWdlIiwidGV4dCIsIm1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlIiwic3RvcmVkTWVzc2FnZSIsIm1hcFN0b3JlZE1lc3NhZ2VzVG9DaGF0TWVzc2FnZXMiLCJtYXBDaGF0TWVzc2FnZXNUb1N0b3JlZE1lc3NhZ2VzIiwidG9EaWN0IiwiY29udmVydFRvQ2h1bmsiLCJhaUNodW5rRmllbGRzIiwidG9vbF9jYWxsX2NodW5rcyIsInRjIiwiaW5kZXgiLCJpc0luc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/base.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLLMOutputParser: () => (/* binding */ BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* binding */ BaseOutputParser),\n/* harmony export */   OutputParserException: () => (/* binding */ OutputParserException)\n/* harmony export */ });\n/* harmony import */ var _runnables_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/index.js\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/errors/index.js\");\n\n\n/**\n * Abstract base class for parsing the output of a Large Language Model\n * (LLM) call. It provides methods for parsing the result of an LLM call\n * and invoking the parser with a given input.\n */ class BaseLLMOutputParser extends _runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    /**\n     * Parses the result of an LLM call with a given prompt. By default, it\n     * simply calls `parseResult`.\n     * @param generations The generations from an LLM call.\n     * @param _prompt The prompt used in the LLM call.\n     * @param callbacks Optional callbacks.\n     * @returns A promise of the parsed output.\n     */ parseResultWithPrompt(generations, _prompt, callbacks) {\n        return this.parseResult(generations, callbacks);\n    }\n    _baseMessageToString(message) {\n        return typeof message.content === \"string\" ? message.content : this._baseMessageContentToString(message.content);\n    }\n    _baseMessageContentToString(content) {\n        return JSON.stringify(content);\n    }\n    /**\n     * Calls the parser with a given input and optional configuration options.\n     * If the input is a string, it creates a generation with the input as\n     * text and calls `parseResult`. If the input is a `BaseMessage`, it\n     * creates a generation with the input as a message and the content of the\n     * input as text, and then calls `parseResult`.\n     * @param input The input to the parser, which can be a string or a `BaseMessage`.\n     * @param options Optional configuration options.\n     * @returns A promise of the parsed output.\n     */ async invoke(input, options) {\n        if (typeof input === \"string\") {\n            return this._callWithConfig(async (input, options)=>this.parseResult([\n                    {\n                        text: input\n                    }\n                ], options?.callbacks), input, {\n                ...options,\n                runType: \"parser\"\n            });\n        } else {\n            return this._callWithConfig(async (input, options)=>this.parseResult([\n                    {\n                        message: input,\n                        text: this._baseMessageToString(input)\n                    }\n                ], options?.callbacks), input, {\n                ...options,\n                runType: \"parser\"\n            });\n        }\n    }\n}\n/**\n * Class to parse the output of an LLM call.\n */ class BaseOutputParser extends BaseLLMOutputParser {\n    parseResult(generations, callbacks) {\n        return this.parse(generations[0].text, callbacks);\n    }\n    async parseWithPrompt(text, _prompt, callbacks) {\n        return this.parse(text, callbacks);\n    }\n    /**\n     * Return the string type key uniquely identifying this class of parser\n     */ _type() {\n        throw new Error(\"_type not implemented\");\n    }\n}\n/**\n * Exception that output parsers should raise to signify a parsing error.\n *\n * This exists to differentiate parsing errors from other code or execution errors\n * that also may arise inside the output parser. OutputParserExceptions will be\n * available to catch and handle in ways to fix the parsing error, while other\n * errors will be raised.\n *\n * @param message - The error that's being re-raised or an error message.\n * @param llmOutput - String model output which is error-ing.\n * @param observation - String explanation of error which can be passed to a\n *     model to try and remediate the issue.\n * @param sendToLLM - Whether to send the observation and llm_output back to an Agent\n *     after an OutputParserException has been raised. This gives the underlying\n *     model driving the agent the context that the previous output was improperly\n *     structured, in the hopes that it will update the output to the correct\n *     format.\n */ class OutputParserException extends Error {\n    constructor(message, llmOutput, observation, sendToLLM = false){\n        super(message);\n        Object.defineProperty(this, \"llmOutput\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"sendToLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.llmOutput = llmOutput;\n        this.observation = observation;\n        this.sendToLLM = sendToLLM;\n        if (sendToLLM) {\n            if (observation === undefined || llmOutput === undefined) {\n                throw new Error(\"Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true\");\n            }\n        }\n        (0,_errors_index_js__WEBPACK_IMPORTED_MODULE_1__.addLangChainErrorFields)(this, \"OUTPUT_PARSING_FAILURE\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpRDtBQUNZO0FBQzdEOzs7O0NBSUMsR0FDTSxNQUFNRSw0QkFBNEJGLHlEQUFRQTtJQUM3Qzs7Ozs7OztLQU9DLEdBQ0RHLHNCQUFzQkMsV0FBVyxFQUFFQyxPQUFPLEVBQUVDLFNBQVMsRUFBRTtRQUNuRCxPQUFPLElBQUksQ0FBQ0MsV0FBVyxDQUFDSCxhQUFhRTtJQUN6QztJQUNBRSxxQkFBcUJDLE9BQU8sRUFBRTtRQUMxQixPQUFPLE9BQU9BLFFBQVFDLE9BQU8sS0FBSyxXQUM1QkQsUUFBUUMsT0FBTyxHQUNmLElBQUksQ0FBQ0MsMkJBQTJCLENBQUNGLFFBQVFDLE9BQU87SUFDMUQ7SUFDQUMsNEJBQTRCRCxPQUFPLEVBQUU7UUFDakMsT0FBT0UsS0FBS0MsU0FBUyxDQUFDSDtJQUMxQjtJQUNBOzs7Ozs7Ozs7S0FTQyxHQUNELE1BQU1JLE9BQU9DLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLElBQUksT0FBT0QsVUFBVSxVQUFVO1lBQzNCLE9BQU8sSUFBSSxDQUFDRSxlQUFlLENBQUMsT0FBT0YsT0FBT0MsVUFBWSxJQUFJLENBQUNULFdBQVcsQ0FBQztvQkFBQzt3QkFBRVcsTUFBTUg7b0JBQU07aUJBQUUsRUFBRUMsU0FBU1YsWUFBWVMsT0FBTztnQkFBRSxHQUFHQyxPQUFPO2dCQUFFRyxTQUFTO1lBQVM7UUFDMUosT0FDSztZQUNELE9BQU8sSUFBSSxDQUFDRixlQUFlLENBQUMsT0FBT0YsT0FBT0MsVUFBWSxJQUFJLENBQUNULFdBQVcsQ0FBQztvQkFDbkU7d0JBQ0lFLFNBQVNNO3dCQUNURyxNQUFNLElBQUksQ0FBQ1Ysb0JBQW9CLENBQUNPO29CQUNwQztpQkFDSCxFQUFFQyxTQUFTVixZQUFZUyxPQUFPO2dCQUFFLEdBQUdDLE9BQU87Z0JBQUVHLFNBQVM7WUFBUztRQUNuRTtJQUNKO0FBQ0o7QUFDQTs7Q0FFQyxHQUNNLE1BQU1DLHlCQUF5QmxCO0lBQ2xDSyxZQUFZSCxXQUFXLEVBQUVFLFNBQVMsRUFBRTtRQUNoQyxPQUFPLElBQUksQ0FBQ2UsS0FBSyxDQUFDakIsV0FBVyxDQUFDLEVBQUUsQ0FBQ2MsSUFBSSxFQUFFWjtJQUMzQztJQUNBLE1BQU1nQixnQkFBZ0JKLElBQUksRUFBRWIsT0FBTyxFQUFFQyxTQUFTLEVBQUU7UUFDNUMsT0FBTyxJQUFJLENBQUNlLEtBQUssQ0FBQ0gsTUFBTVo7SUFDNUI7SUFDQTs7S0FFQyxHQUNEaUIsUUFBUTtRQUNKLE1BQU0sSUFBSUMsTUFBTTtJQUNwQjtBQUNKO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBaUJDLEdBQ00sTUFBTUMsOEJBQThCRDtJQUN2Q0UsWUFBWWpCLE9BQU8sRUFBRWtCLFNBQVMsRUFBRUMsV0FBVyxFQUFFQyxZQUFZLEtBQUssQ0FBRTtRQUM1RCxLQUFLLENBQUNwQjtRQUNOcUIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNSLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDQyxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsU0FBUyxHQUFHQTtRQUNqQixJQUFJQSxXQUFXO1lBQ1gsSUFBSUQsZ0JBQWdCUSxhQUFhVCxjQUFjUyxXQUFXO2dCQUN0RCxNQUFNLElBQUlaLE1BQU07WUFDcEI7UUFDSjtRQUNBdkIseUVBQXVCQSxDQUFDLElBQUksRUFBRTtJQUNsQztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9iYXNlLmpzPzViY2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUnVubmFibGUgfSBmcm9tIFwiLi4vcnVubmFibGVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyB9IGZyb20gXCIuLi9lcnJvcnMvaW5kZXguanNcIjtcbi8qKlxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgcGFyc2luZyB0aGUgb3V0cHV0IG9mIGEgTGFyZ2UgTGFuZ3VhZ2UgTW9kZWxcbiAqIChMTE0pIGNhbGwuIEl0IHByb3ZpZGVzIG1ldGhvZHMgZm9yIHBhcnNpbmcgdGhlIHJlc3VsdCBvZiBhbiBMTE0gY2FsbFxuICogYW5kIGludm9raW5nIHRoZSBwYXJzZXIgd2l0aCBhIGdpdmVuIGlucHV0LlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUxMTU91dHB1dFBhcnNlciBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIHJlc3VsdCBvZiBhbiBMTE0gY2FsbCB3aXRoIGEgZ2l2ZW4gcHJvbXB0LiBCeSBkZWZhdWx0LCBpdFxuICAgICAqIHNpbXBseSBjYWxscyBgcGFyc2VSZXN1bHRgLlxuICAgICAqIEBwYXJhbSBnZW5lcmF0aW9ucyBUaGUgZ2VuZXJhdGlvbnMgZnJvbSBhbiBMTE0gY2FsbC5cbiAgICAgKiBAcGFyYW0gX3Byb21wdCBUaGUgcHJvbXB0IHVzZWQgaW4gdGhlIExMTSBjYWxsLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgT3B0aW9uYWwgY2FsbGJhY2tzLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgcGFyc2VkIG91dHB1dC5cbiAgICAgKi9cbiAgICBwYXJzZVJlc3VsdFdpdGhQcm9tcHQoZ2VuZXJhdGlvbnMsIF9wcm9tcHQsIGNhbGxiYWNrcykge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVJlc3VsdChnZW5lcmF0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgX2Jhc2VNZXNzYWdlVG9TdHJpbmcobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG1lc3NhZ2UuY29udGVudCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBtZXNzYWdlLmNvbnRlbnRcbiAgICAgICAgICAgIDogdGhpcy5fYmFzZU1lc3NhZ2VDb250ZW50VG9TdHJpbmcobWVzc2FnZS5jb250ZW50KTtcbiAgICB9XG4gICAgX2Jhc2VNZXNzYWdlQ29udGVudFRvU3RyaW5nKGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNvbnRlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgcGFyc2VyIHdpdGggYSBnaXZlbiBpbnB1dCBhbmQgb3B0aW9uYWwgY29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgICAqIElmIHRoZSBpbnB1dCBpcyBhIHN0cmluZywgaXQgY3JlYXRlcyBhIGdlbmVyYXRpb24gd2l0aCB0aGUgaW5wdXQgYXNcbiAgICAgKiB0ZXh0IGFuZCBjYWxscyBgcGFyc2VSZXN1bHRgLiBJZiB0aGUgaW5wdXQgaXMgYSBgQmFzZU1lc3NhZ2VgLCBpdFxuICAgICAqIGNyZWF0ZXMgYSBnZW5lcmF0aW9uIHdpdGggdGhlIGlucHV0IGFzIGEgbWVzc2FnZSBhbmQgdGhlIGNvbnRlbnQgb2YgdGhlXG4gICAgICogaW5wdXQgYXMgdGV4dCwgYW5kIHRoZW4gY2FsbHMgYHBhcnNlUmVzdWx0YC5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHRvIHRoZSBwYXJzZXIsIHdoaWNoIGNhbiBiZSBhIHN0cmluZyBvciBhIGBCYXNlTWVzc2FnZWAuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgcGFyc2VkIG91dHB1dC5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKGFzeW5jIChpbnB1dCwgb3B0aW9ucykgPT4gdGhpcy5wYXJzZVJlc3VsdChbeyB0ZXh0OiBpbnB1dCB9XSwgb3B0aW9ucz8uY2FsbGJhY2tzKSwgaW5wdXQsIHsgLi4ub3B0aW9ucywgcnVuVHlwZTogXCJwYXJzZXJcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyhhc3luYyAoaW5wdXQsIG9wdGlvbnMpID0+IHRoaXMucGFyc2VSZXN1bHQoW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuX2Jhc2VNZXNzYWdlVG9TdHJpbmcoaW5wdXQpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLCBvcHRpb25zPy5jYWxsYmFja3MpLCBpbnB1dCwgeyAuLi5vcHRpb25zLCBydW5UeXBlOiBcInBhcnNlclwiIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0byBwYXJzZSB0aGUgb3V0cHV0IG9mIGFuIExMTSBjYWxsLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZU91dHB1dFBhcnNlciBleHRlbmRzIEJhc2VMTE1PdXRwdXRQYXJzZXIge1xuICAgIHBhcnNlUmVzdWx0KGdlbmVyYXRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2UoZ2VuZXJhdGlvbnNbMF0udGV4dCwgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgYXN5bmMgcGFyc2VXaXRoUHJvbXB0KHRleHQsIF9wcm9tcHQsIGNhbGxiYWNrcykge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZSh0ZXh0LCBjYWxsYmFja3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHN0cmluZyB0eXBlIGtleSB1bmlxdWVseSBpZGVudGlmeWluZyB0aGlzIGNsYXNzIG9mIHBhcnNlclxuICAgICAqL1xuICAgIF90eXBlKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJfdHlwZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxufVxuLyoqXG4gKiBFeGNlcHRpb24gdGhhdCBvdXRwdXQgcGFyc2VycyBzaG91bGQgcmFpc2UgdG8gc2lnbmlmeSBhIHBhcnNpbmcgZXJyb3IuXG4gKlxuICogVGhpcyBleGlzdHMgdG8gZGlmZmVyZW50aWF0ZSBwYXJzaW5nIGVycm9ycyBmcm9tIG90aGVyIGNvZGUgb3IgZXhlY3V0aW9uIGVycm9yc1xuICogdGhhdCBhbHNvIG1heSBhcmlzZSBpbnNpZGUgdGhlIG91dHB1dCBwYXJzZXIuIE91dHB1dFBhcnNlckV4Y2VwdGlvbnMgd2lsbCBiZVxuICogYXZhaWxhYmxlIHRvIGNhdGNoIGFuZCBoYW5kbGUgaW4gd2F5cyB0byBmaXggdGhlIHBhcnNpbmcgZXJyb3IsIHdoaWxlIG90aGVyXG4gKiBlcnJvcnMgd2lsbCBiZSByYWlzZWQuXG4gKlxuICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgZXJyb3IgdGhhdCdzIGJlaW5nIHJlLXJhaXNlZCBvciBhbiBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIGxsbU91dHB1dCAtIFN0cmluZyBtb2RlbCBvdXRwdXQgd2hpY2ggaXMgZXJyb3ItaW5nLlxuICogQHBhcmFtIG9ic2VydmF0aW9uIC0gU3RyaW5nIGV4cGxhbmF0aW9uIG9mIGVycm9yIHdoaWNoIGNhbiBiZSBwYXNzZWQgdG8gYVxuICogICAgIG1vZGVsIHRvIHRyeSBhbmQgcmVtZWRpYXRlIHRoZSBpc3N1ZS5cbiAqIEBwYXJhbSBzZW5kVG9MTE0gLSBXaGV0aGVyIHRvIHNlbmQgdGhlIG9ic2VydmF0aW9uIGFuZCBsbG1fb3V0cHV0IGJhY2sgdG8gYW4gQWdlbnRcbiAqICAgICBhZnRlciBhbiBPdXRwdXRQYXJzZXJFeGNlcHRpb24gaGFzIGJlZW4gcmFpc2VkLiBUaGlzIGdpdmVzIHRoZSB1bmRlcmx5aW5nXG4gKiAgICAgbW9kZWwgZHJpdmluZyB0aGUgYWdlbnQgdGhlIGNvbnRleHQgdGhhdCB0aGUgcHJldmlvdXMgb3V0cHV0IHdhcyBpbXByb3Blcmx5XG4gKiAgICAgc3RydWN0dXJlZCwgaW4gdGhlIGhvcGVzIHRoYXQgaXQgd2lsbCB1cGRhdGUgdGhlIG91dHB1dCB0byB0aGUgY29ycmVjdFxuICogICAgIGZvcm1hdC5cbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dFBhcnNlckV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBsbG1PdXRwdXQsIG9ic2VydmF0aW9uLCBzZW5kVG9MTE0gPSBmYWxzZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGxtT3V0cHV0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9ic2VydmF0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlbmRUb0xMTVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxsbU91dHB1dCA9IGxsbU91dHB1dDtcbiAgICAgICAgdGhpcy5vYnNlcnZhdGlvbiA9IG9ic2VydmF0aW9uO1xuICAgICAgICB0aGlzLnNlbmRUb0xMTSA9IHNlbmRUb0xMTTtcbiAgICAgICAgaWYgKHNlbmRUb0xMTSkge1xuICAgICAgICAgICAgaWYgKG9ic2VydmF0aW9uID09PSB1bmRlZmluZWQgfHwgbGxtT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBcmd1bWVudHMgJ29ic2VydmF0aW9uJyAmICdsbG1PdXRwdXQnIGFyZSByZXF1aXJlZCBpZiAnc2VuZFRvTGxtJyBpcyB0cnVlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFkZExhbmdDaGFpbkVycm9yRmllbGRzKHRoaXMsIFwiT1VUUFVUX1BBUlNJTkdfRkFJTFVSRVwiKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUnVubmFibGUiLCJhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyIsIkJhc2VMTE1PdXRwdXRQYXJzZXIiLCJwYXJzZVJlc3VsdFdpdGhQcm9tcHQiLCJnZW5lcmF0aW9ucyIsIl9wcm9tcHQiLCJjYWxsYmFja3MiLCJwYXJzZVJlc3VsdCIsIl9iYXNlTWVzc2FnZVRvU3RyaW5nIiwibWVzc2FnZSIsImNvbnRlbnQiLCJfYmFzZU1lc3NhZ2VDb250ZW50VG9TdHJpbmciLCJKU09OIiwic3RyaW5naWZ5IiwiaW52b2tlIiwiaW5wdXQiLCJvcHRpb25zIiwiX2NhbGxXaXRoQ29uZmlnIiwidGV4dCIsInJ1blR5cGUiLCJCYXNlT3V0cHV0UGFyc2VyIiwicGFyc2UiLCJwYXJzZVdpdGhQcm9tcHQiLCJfdHlwZSIsIkVycm9yIiwiT3V0cHV0UGFyc2VyRXhjZXB0aW9uIiwiY29uc3RydWN0b3IiLCJsbG1PdXRwdXQiLCJvYnNlcnZhdGlvbiIsInNlbmRUb0xMTSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/bytes.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/bytes.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BytesOutputParser: () => (/* binding */ BytesOutputParser)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n/**\n * OutputParser that parses LLMResult into the top likely string and\n * encodes it into bytes.\n */ class BytesOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"bytes\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"textEncoder\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new TextEncoder()\n        });\n    }\n    static lc_name() {\n        return \"BytesOutputParser\";\n    }\n    parse(text) {\n        return Promise.resolve(this.textEncoder.encode(text));\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvYnl0ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7QUFDM0Q7OztDQUdDLEdBQ00sTUFBTUMsMEJBQTBCRCxvRUFBeUJBO0lBQzVERSxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7Z0JBQWtCO2FBQVE7UUFDeEQ7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sSUFBSUM7UUFDZjtJQUNKO0lBQ0EsT0FBT0MsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxNQUFNQyxJQUFJLEVBQUU7UUFDUixPQUFPQyxRQUFRQyxPQUFPLENBQUMsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQ0o7SUFDbkQ7SUFDQUssd0JBQXdCO1FBQ3BCLE9BQU87SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9ieXRlcy5qcz81MmU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXIgfSBmcm9tIFwiLi90cmFuc2Zvcm0uanNcIjtcbi8qKlxuICogT3V0cHV0UGFyc2VyIHRoYXQgcGFyc2VzIExMTVJlc3VsdCBpbnRvIHRoZSB0b3AgbGlrZWx5IHN0cmluZyBhbmRcbiAqIGVuY29kZXMgaXQgaW50byBieXRlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ5dGVzT3V0cHV0UGFyc2VyIGV4dGVuZHMgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJvdXRwdXRfcGFyc2Vyc1wiLCBcImJ5dGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRleHRFbmNvZGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgVGV4dEVuY29kZXIoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzT3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIHBhcnNlKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnRleHRFbmNvZGVyLmVuY29kZSh0ZXh0KSk7XG4gICAgfVxuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXIiLCJCeXRlc091dHB1dFBhcnNlciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIlRleHRFbmNvZGVyIiwibGNfbmFtZSIsInBhcnNlIiwidGV4dCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGV4dEVuY29kZXIiLCJlbmNvZGUiLCJnZXRGb3JtYXRJbnN0cnVjdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/bytes.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_4__.AsymmetricStructuredOutputParser),\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* reexport safe */ _transform_js__WEBPACK_IMPORTED_MODULE_5__.BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseLLMOutputParser: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* reexport safe */ _transform_js__WEBPACK_IMPORTED_MODULE_5__.BaseTransformOutputParser),\n/* harmony export */   BytesOutputParser: () => (/* reexport safe */ _bytes_js__WEBPACK_IMPORTED_MODULE_1__.BytesOutputParser),\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.CustomListOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_4__.JsonMarkdownStructuredOutputParser),\n/* harmony export */   JsonOutputParser: () => (/* reexport safe */ _json_js__WEBPACK_IMPORTED_MODULE_6__.JsonOutputParser),\n/* harmony export */   ListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.NumberedListOutputParser),\n/* harmony export */   OutputParserException: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException),\n/* harmony export */   StringOutputParser: () => (/* reexport safe */ _string_js__WEBPACK_IMPORTED_MODULE_3__.StringOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_4__.StructuredOutputParser),\n/* harmony export */   XMLOutputParser: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_7__.XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_7__.XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   parseJsonMarkdown: () => (/* reexport safe */ _json_js__WEBPACK_IMPORTED_MODULE_6__.parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* reexport safe */ _json_js__WEBPACK_IMPORTED_MODULE_6__.parsePartialJson),\n/* harmony export */   parseXMLMarkdown: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_7__.parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _bytes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bytes.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/bytes.js\");\n/* harmony import */ var _list_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./list.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/list.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/string.js\");\n/* harmony import */ var _structured_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./structured.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/structured.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _json_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./json.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/json.js\");\n/* harmony import */ var _xml_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./xml.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/xml.js\");\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEI7QUFDQztBQUNEO0FBQ0U7QUFDSTtBQUNEO0FBQ0w7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvaW5kZXguanM/M2E2NiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9ieXRlcy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbGlzdC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3RyaW5nLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zdHJ1Y3R1cmVkLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmFuc2Zvcm0uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2pzb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3htbC5qc1wiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/json.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/json.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonOutputParser: () => (/* binding */ JsonOutputParser),\n/* harmony export */   parseJsonMarkdown: () => (/* reexport safe */ _utils_json_js__WEBPACK_IMPORTED_MODULE_2__.parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* reexport safe */ _utils_json_js__WEBPACK_IMPORTED_MODULE_2__.parsePartialJson)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/json_patch.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/json.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json.js\");\n\n\n\n/**\n * Class for parsing the output of an LLM into a JSON object.\n */ class JsonOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseCumulativeTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"JsonOutputParser\";\n    }\n    /** @internal */ _concatOutputChunks(first, second) {\n        if (this.diff) {\n            return super._concatOutputChunks(first, second);\n        }\n        return second;\n    }\n    _diff(prev, next) {\n        if (!next) {\n            return undefined;\n        }\n        if (!prev) {\n            return [\n                {\n                    op: \"replace\",\n                    path: \"\",\n                    value: next\n                }\n            ];\n        }\n        return (0,_utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__.compare)(prev, next);\n    }\n    // This should actually return Partial<T>, but there's no way\n    // to specify emitted chunks as instances separate from the main output type.\n    async parsePartialResult(generations) {\n        return (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_2__.parseJsonMarkdown)(generations[0].text);\n    }\n    async parse(text) {\n        return (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_2__.parseJsonMarkdown)(text, JSON.parse);\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvanNvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUU7QUFDcEI7QUFDc0I7QUFDdkU7O0NBRUMsR0FDTSxNQUFNSSx5QkFBeUJKLDhFQUFtQ0E7SUFDckVLLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjthQUFpQjtRQUMvQztRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO0lBQ0o7SUFDQSxPQUFPQyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0EsY0FBYyxHQUNkQyxvQkFBb0JDLEtBQUssRUFBRUMsTUFBTSxFQUFFO1FBQy9CLElBQUksSUFBSSxDQUFDQyxJQUFJLEVBQUU7WUFDWCxPQUFPLEtBQUssQ0FBQ0gsb0JBQW9CQyxPQUFPQztRQUM1QztRQUNBLE9BQU9BO0lBQ1g7SUFDQUUsTUFBTUMsSUFBSSxFQUFFQyxJQUFJLEVBQUU7UUFDZCxJQUFJLENBQUNBLE1BQU07WUFDUCxPQUFPQztRQUNYO1FBQ0EsSUFBSSxDQUFDRixNQUFNO1lBQ1AsT0FBTztnQkFBQztvQkFBRUcsSUFBSTtvQkFBV0MsTUFBTTtvQkFBSVgsT0FBT1E7Z0JBQUs7YUFBRTtRQUNyRDtRQUNBLE9BQU9uQiw2REFBT0EsQ0FBQ2tCLE1BQU1DO0lBQ3pCO0lBQ0EsNkRBQTZEO0lBQzdELDZFQUE2RTtJQUM3RSxNQUFNSSxtQkFBbUJDLFdBQVcsRUFBRTtRQUNsQyxPQUFPdkIsaUVBQWlCQSxDQUFDdUIsV0FBVyxDQUFDLEVBQUUsQ0FBQ0MsSUFBSTtJQUNoRDtJQUNBLE1BQU1DLE1BQU1ELElBQUksRUFBRTtRQUNkLE9BQU94QixpRUFBaUJBLENBQUN3QixNQUFNRSxLQUFLRCxLQUFLO0lBQzdDO0lBQ0FFLHdCQUF3QjtRQUNwQixPQUFPO0lBQ1g7QUFDSjtBQUMrQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvanNvbi5qcz9hYmExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vdHJhbnNmb3JtLmpzXCI7XG5pbXBvcnQgeyBjb21wYXJlIH0gZnJvbSBcIi4uL3V0aWxzL2pzb25fcGF0Y2guanNcIjtcbmltcG9ydCB7IHBhcnNlSnNvbk1hcmtkb3duLCBwYXJzZVBhcnRpYWxKc29uIH0gZnJvbSBcIi4uL3V0aWxzL2pzb24uanNcIjtcbi8qKlxuICogQ2xhc3MgZm9yIHBhcnNpbmcgdGhlIG91dHB1dCBvZiBhbiBMTE0gaW50byBhIEpTT04gb2JqZWN0LlxuICovXG5leHBvcnQgY2xhc3MgSnNvbk91dHB1dFBhcnNlciBleHRlbmRzIEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcIm91dHB1dF9wYXJzZXJzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJKc29uT3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfY29uY2F0T3V0cHV0Q2h1bmtzKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlmZikge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLl9jb25jYXRPdXRwdXRDaHVua3MoZmlyc3QsIHNlY29uZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlY29uZDtcbiAgICB9XG4gICAgX2RpZmYocHJldiwgbmV4dCkge1xuICAgICAgICBpZiAoIW5leHQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwcmV2KSB7XG4gICAgICAgICAgICByZXR1cm4gW3sgb3A6IFwicmVwbGFjZVwiLCBwYXRoOiBcIlwiLCB2YWx1ZTogbmV4dCB9XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcGFyZShwcmV2LCBuZXh0KTtcbiAgICB9XG4gICAgLy8gVGhpcyBzaG91bGQgYWN0dWFsbHkgcmV0dXJuIFBhcnRpYWw8VD4sIGJ1dCB0aGVyZSdzIG5vIHdheVxuICAgIC8vIHRvIHNwZWNpZnkgZW1pdHRlZCBjaHVua3MgYXMgaW5zdGFuY2VzIHNlcGFyYXRlIGZyb20gdGhlIG1haW4gb3V0cHV0IHR5cGUuXG4gICAgYXN5bmMgcGFyc2VQYXJ0aWFsUmVzdWx0KGdlbmVyYXRpb25zKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUpzb25NYXJrZG93bihnZW5lcmF0aW9uc1swXS50ZXh0KTtcbiAgICB9XG4gICAgYXN5bmMgcGFyc2UodGV4dCkge1xuICAgICAgICByZXR1cm4gcGFyc2VKc29uTWFya2Rvd24odGV4dCwgSlNPTi5wYXJzZSk7XG4gICAgfVxuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxufVxuZXhwb3J0IHsgcGFyc2VQYXJ0aWFsSnNvbiwgcGFyc2VKc29uTWFya2Rvd24gfTtcbiJdLCJuYW1lcyI6WyJCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciIsImNvbXBhcmUiLCJwYXJzZUpzb25NYXJrZG93biIsInBhcnNlUGFydGlhbEpzb24iLCJKc29uT3V0cHV0UGFyc2VyIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibGNfbmFtZSIsIl9jb25jYXRPdXRwdXRDaHVua3MiLCJmaXJzdCIsInNlY29uZCIsImRpZmYiLCJfZGlmZiIsInByZXYiLCJuZXh0IiwidW5kZWZpbmVkIiwib3AiLCJwYXRoIiwicGFyc2VQYXJ0aWFsUmVzdWx0IiwiZ2VuZXJhdGlvbnMiLCJ0ZXh0IiwicGFyc2UiLCJKU09OIiwiZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/list.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/list.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* binding */ CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* binding */ CustomListOutputParser),\n/* harmony export */   ListOutputParser: () => (/* binding */ ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* binding */ MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* binding */ NumberedListOutputParser)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n\n/**\n * Class to parse the output of an LLM call to a list.\n * @augments BaseOutputParser\n */ class ListOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_1__.BaseTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async *_transform(inputGenerator) {\n        let buffer = \"\";\n        for await (const input of inputGenerator){\n            if (typeof input === \"string\") {\n                // add current chunk to buffer\n                buffer += input;\n            } else {\n                // extract message content and add to buffer\n                buffer += input.content;\n            }\n            // get parts in buffer\n            if (!this.re) {\n                const parts = await this.parse(buffer);\n                if (parts.length > 1) {\n                    // if there are multiple parts, yield all but the last one\n                    for (const part of parts.slice(0, -1)){\n                        yield [\n                            part\n                        ];\n                    }\n                    // keep the last part in the buffer\n                    buffer = parts[parts.length - 1];\n                }\n            } else {\n                // if there is a regex, get all matches\n                const matches = [\n                    ...buffer.matchAll(this.re)\n                ];\n                if (matches.length > 1) {\n                    let doneIdx = 0;\n                    // if there are multiple matches, yield all but the last one\n                    for (const match of matches.slice(0, -1)){\n                        yield [\n                            match[1]\n                        ];\n                        doneIdx += (match.index ?? 0) + match[0].length;\n                    }\n                    // keep the last match in the buffer\n                    buffer = buffer.slice(doneIdx);\n                }\n            }\n        }\n        // yield the last part\n        for (const part of (await this.parse(buffer))){\n            yield [\n                part\n            ];\n        }\n    }\n}\n/**\n * Class to parse the output of an LLM call as a comma-separated list.\n * @augments ListOutputParser\n */ class CommaSeparatedListOutputParser extends ListOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"CommaSeparatedListOutputParser\";\n    }\n    /**\n     * Parses the given text into an array of strings, using a comma as the\n     * separator. If the parsing fails, throws an OutputParserException.\n     * @param text The text to parse.\n     * @returns An array of strings obtained by splitting the input text at each comma.\n     */ async parse(text) {\n        try {\n            return text.trim().split(\",\").map((s)=>s.trim());\n        } catch (e) {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Could not parse output: ${text}`, text);\n        }\n    }\n    /**\n     * Provides instructions on the expected format of the response for the\n     * CommaSeparatedListOutputParser.\n     * @returns A string containing instructions on the expected format of the response.\n     */ getFormatInstructions() {\n        return `Your response should be a list of comma separated values, eg: \\`foo, bar, baz\\``;\n    }\n}\n/**\n * Class to parse the output of an LLM call to a list with a specific length and separator.\n * @augments ListOutputParser\n */ class CustomListOutputParser extends ListOutputParser {\n    constructor({ length, separator }){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"length\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"separator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.length = length;\n        this.separator = separator || \",\";\n    }\n    /**\n     * Parses the given text into an array of strings, using the specified\n     * separator. If the parsing fails or the number of items in the list\n     * doesn't match the expected length, throws an OutputParserException.\n     * @param text The text to parse.\n     * @returns An array of strings obtained by splitting the input text at each occurrence of the specified separator.\n     */ async parse(text) {\n        try {\n            const items = text.trim().split(this.separator).map((s)=>s.trim());\n            if (this.length !== undefined && items.length !== this.length) {\n                throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Incorrect number of items. Expected ${this.length}, got ${items.length}.`);\n            }\n            return items;\n        } catch (e) {\n            if (Object.getPrototypeOf(e) === _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException.prototype) {\n                throw e;\n            }\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Could not parse output: ${text}`);\n        }\n    }\n    /**\n     * Provides instructions on the expected format of the response for the\n     * CustomListOutputParser, including the number of items and the\n     * separator.\n     * @returns A string containing instructions on the expected format of the response.\n     */ getFormatInstructions() {\n        return `Your response should be a list of ${this.length === undefined ? \"\" : `${this.length} `}items separated by \"${this.separator}\" (eg: \\`foo${this.separator} bar${this.separator} baz\\`)`;\n    }\n}\nclass NumberedListOutputParser extends ListOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: /\\d+\\.\\s([^\\n]+)/g\n        });\n    }\n    static lc_name() {\n        return \"NumberedListOutputParser\";\n    }\n    getFormatInstructions() {\n        return `Your response should be a numbered list with each item on a new line. For example: \\n\\n1. foo\\n\\n2. bar\\n\\n3. baz`;\n    }\n    async parse(text) {\n        return [\n            ...text.matchAll(this.re) ?? []\n        ].map((m)=>m[1]);\n    }\n}\nclass MarkdownListOutputParser extends ListOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: /^\\s*[-*]\\s([^\\n]+)$/gm\n        });\n    }\n    static lc_name() {\n        return \"NumberedListOutputParser\";\n    }\n    getFormatInstructions() {\n        return `Your response should be a numbered list with each item on a new line. For example: \\n\\n1. foo\\n\\n2. bar\\n\\n3. baz`;\n    }\n    async parse(text) {\n        return [\n            ...text.matchAll(this.re) ?? []\n        ].map((m)=>m[1]);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvbGlzdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtEO0FBQ1M7QUFDM0Q7OztDQUdDLEdBQ00sTUFBTUUseUJBQXlCRCxvRUFBeUJBO0lBQzNERSxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE1BQU07WUFDOUJDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtJQUNKO0lBQ0EsT0FBT0MsV0FBV0MsY0FBYyxFQUFFO1FBQzlCLElBQUlDLFNBQVM7UUFDYixXQUFXLE1BQU1DLFNBQVNGLGVBQWdCO1lBQ3RDLElBQUksT0FBT0UsVUFBVSxVQUFVO2dCQUMzQiw4QkFBOEI7Z0JBQzlCRCxVQUFVQztZQUNkLE9BQ0s7Z0JBQ0QsNENBQTRDO2dCQUM1Q0QsVUFBVUMsTUFBTUMsT0FBTztZQUMzQjtZQUNBLHNCQUFzQjtZQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDQyxFQUFFLEVBQUU7Z0JBQ1YsTUFBTUMsUUFBUSxNQUFNLElBQUksQ0FBQ0MsS0FBSyxDQUFDTDtnQkFDL0IsSUFBSUksTUFBTUUsTUFBTSxHQUFHLEdBQUc7b0JBQ2xCLDBEQUEwRDtvQkFDMUQsS0FBSyxNQUFNQyxRQUFRSCxNQUFNSSxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUk7d0JBQ25DLE1BQU07NEJBQUNEO3lCQUFLO29CQUNoQjtvQkFDQSxtQ0FBbUM7b0JBQ25DUCxTQUFTSSxLQUFLLENBQUNBLE1BQU1FLE1BQU0sR0FBRyxFQUFFO2dCQUNwQztZQUNKLE9BQ0s7Z0JBQ0QsdUNBQXVDO2dCQUN2QyxNQUFNRyxVQUFVO3VCQUFJVCxPQUFPVSxRQUFRLENBQUMsSUFBSSxDQUFDUCxFQUFFO2lCQUFFO2dCQUM3QyxJQUFJTSxRQUFRSCxNQUFNLEdBQUcsR0FBRztvQkFDcEIsSUFBSUssVUFBVTtv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QUFFLENBQUNnQixHQUFHLENBQUMsQ0FBQ1csSUFBTUEsQ0FBQyxDQUFDLEVBQUU7SUFDOUQ7QUFDSjtBQUNPLE1BQU1DLGlDQUFpQzFDO0lBQzFDQyxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7Z0JBQWtCO2FBQU87UUFDdkQ7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE1BQU07WUFDOUJDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtJQUNKO0lBQ0EsT0FBT2tCLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQU8sd0JBQXdCO1FBQ3BCLE9BQU8sQ0FBQyxpSEFBaUgsQ0FBQztJQUM5SDtJQUNBLE1BQU1qQixNQUFNVyxJQUFJLEVBQUU7UUFDZCxPQUFPO2VBQUtBLEtBQUtOLFFBQVEsQ0FBQyxJQUFJLENBQUNQLEVBQUUsS0FBSyxFQUFFO1NBQUUsQ0FBQ2dCLEdBQUcsQ0FBQyxDQUFDVyxJQUFNQSxDQUFDLENBQUMsRUFBRTtJQUM5RDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9saXN0LmpzP2E5NDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT3V0cHV0UGFyc2VyRXhjZXB0aW9uIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB9IGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuLyoqXG4gKiBDbGFzcyB0byBwYXJzZSB0aGUgb3V0cHV0IG9mIGFuIExMTSBjYWxsIHRvIGEgbGlzdC5cbiAqIEBhdWdtZW50cyBCYXNlT3V0cHV0UGFyc2VyXG4gKi9cbmV4cG9ydCBjbGFzcyBMaXN0T3V0cHV0UGFyc2VyIGV4dGVuZHMgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jICpfdHJhbnNmb3JtKGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgIGxldCBidWZmZXIgPSBcIlwiO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGlucHV0IG9mIGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkIGN1cnJlbnQgY2h1bmsgdG8gYnVmZmVyXG4gICAgICAgICAgICAgICAgYnVmZmVyICs9IGlucHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZXh0cmFjdCBtZXNzYWdlIGNvbnRlbnQgYW5kIGFkZCB0byBidWZmZXJcbiAgICAgICAgICAgICAgICBidWZmZXIgKz0gaW5wdXQuY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGdldCBwYXJ0cyBpbiBidWZmZXJcbiAgICAgICAgICAgIGlmICghdGhpcy5yZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gYXdhaXQgdGhpcy5wYXJzZShidWZmZXIpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBwYXJ0cywgeWllbGQgYWxsIGJ1dCB0aGUgbGFzdCBvbmVcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzLnNsaWNlKDAsIC0xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgW3BhcnRdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgdGhlIGxhc3QgcGFydCBpbiB0aGUgYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgcmVnZXgsIGdldCBhbGwgbWF0Y2hlc1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBbLi4uYnVmZmVyLm1hdGNoQWxsKHRoaXMucmUpXTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkb25lSWR4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgYXJlIG11bHRpcGxlIG1hdGNoZXMsIHlpZWxkIGFsbCBidXQgdGhlIGxhc3Qgb25lXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hlcy5zbGljZSgwLCAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIFttYXRjaFsxXV07XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lSWR4ICs9IChtYXRjaC5pbmRleCA/PyAwKSArIG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIHRoZSBsYXN0IG1hdGNoIGluIHRoZSBidWZmZXJcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGRvbmVJZHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB5aWVsZCB0aGUgbGFzdCBwYXJ0XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBhd2FpdCB0aGlzLnBhcnNlKGJ1ZmZlcikpIHtcbiAgICAgICAgICAgIHlpZWxkIFtwYXJ0XTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQ2xhc3MgdG8gcGFyc2UgdGhlIG91dHB1dCBvZiBhbiBMTE0gY2FsbCBhcyBhIGNvbW1hLXNlcGFyYXRlZCBsaXN0LlxuICogQGF1Z21lbnRzIExpc3RPdXRwdXRQYXJzZXJcbiAqL1xuZXhwb3J0IGNsYXNzIENvbW1hU2VwYXJhdGVkTGlzdE91dHB1dFBhcnNlciBleHRlbmRzIExpc3RPdXRwdXRQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwib3V0cHV0X3BhcnNlcnNcIiwgXCJsaXN0XCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDb21tYVNlcGFyYXRlZExpc3RPdXRwdXRQYXJzZXJcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBnaXZlbiB0ZXh0IGludG8gYW4gYXJyYXkgb2Ygc3RyaW5ncywgdXNpbmcgYSBjb21tYSBhcyB0aGVcbiAgICAgKiBzZXBhcmF0b3IuIElmIHRoZSBwYXJzaW5nIGZhaWxzLCB0aHJvd3MgYW4gT3V0cHV0UGFyc2VyRXhjZXB0aW9uLlxuICAgICAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IHRvIHBhcnNlLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHN0cmluZ3Mgb2J0YWluZWQgYnkgc3BsaXR0aW5nIHRoZSBpbnB1dCB0ZXh0IGF0IGVhY2ggY29tbWEuXG4gICAgICovXG4gICAgYXN5bmMgcGFyc2UodGV4dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRleHRcbiAgICAgICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxuICAgICAgICAgICAgICAgIC5tYXAoKHMpID0+IHMudHJpbSgpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgQ291bGQgbm90IHBhcnNlIG91dHB1dDogJHt0ZXh0fWAsIHRleHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGluc3RydWN0aW9ucyBvbiB0aGUgZXhwZWN0ZWQgZm9ybWF0IG9mIHRoZSByZXNwb25zZSBmb3IgdGhlXG4gICAgICogQ29tbWFTZXBhcmF0ZWRMaXN0T3V0cHV0UGFyc2VyLlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIGNvbnRhaW5pbmcgaW5zdHJ1Y3Rpb25zIG9uIHRoZSBleHBlY3RlZCBmb3JtYXQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIGBZb3VyIHJlc3BvbnNlIHNob3VsZCBiZSBhIGxpc3Qgb2YgY29tbWEgc2VwYXJhdGVkIHZhbHVlcywgZWc6IFxcYGZvbywgYmFyLCBiYXpcXGBgO1xuICAgIH1cbn1cbi8qKlxuICogQ2xhc3MgdG8gcGFyc2UgdGhlIG91dHB1dCBvZiBhbiBMTE0gY2FsbCB0byBhIGxpc3Qgd2l0aCBhIHNwZWNpZmljIGxlbmd0aCBhbmQgc2VwYXJhdG9yLlxuICogQGF1Z21lbnRzIExpc3RPdXRwdXRQYXJzZXJcbiAqL1xuZXhwb3J0IGNsYXNzIEN1c3RvbUxpc3RPdXRwdXRQYXJzZXIgZXh0ZW5kcyBMaXN0T3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGxlbmd0aCwgc2VwYXJhdG9yIH0pIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcIm91dHB1dF9wYXJzZXJzXCIsIFwibGlzdFwiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGVuZ3RoXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlcGFyYXRvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5zZXBhcmF0b3IgPSBzZXBhcmF0b3IgfHwgXCIsXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgZ2l2ZW4gdGV4dCBpbnRvIGFuIGFycmF5IG9mIHN0cmluZ3MsIHVzaW5nIHRoZSBzcGVjaWZpZWRcbiAgICAgKiBzZXBhcmF0b3IuIElmIHRoZSBwYXJzaW5nIGZhaWxzIG9yIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIGxpc3RcbiAgICAgKiBkb2Vzbid0IG1hdGNoIHRoZSBleHBlY3RlZCBsZW5ndGgsIHRocm93cyBhbiBPdXRwdXRQYXJzZXJFeGNlcHRpb24uXG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHQgdG8gcGFyc2UuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Ygc3RyaW5ncyBvYnRhaW5lZCBieSBzcGxpdHRpbmcgdGhlIGlucHV0IHRleHQgYXQgZWFjaCBvY2N1cnJlbmNlIG9mIHRoZSBzcGVjaWZpZWQgc2VwYXJhdG9yLlxuICAgICAqL1xuICAgIGFzeW5jIHBhcnNlKHRleHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gdGV4dFxuICAgICAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgICAgICAuc3BsaXQodGhpcy5zZXBhcmF0b3IpXG4gICAgICAgICAgICAgICAgLm1hcCgocykgPT4gcy50cmltKCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMubGVuZ3RoICE9PSB1bmRlZmluZWQgJiYgaXRlbXMubGVuZ3RoICE9PSB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRQYXJzZXJFeGNlcHRpb24oYEluY29ycmVjdCBudW1iZXIgb2YgaXRlbXMuIEV4cGVjdGVkICR7dGhpcy5sZW5ndGh9LCBnb3QgJHtpdGVtcy5sZW5ndGh9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpID09PSBPdXRwdXRQYXJzZXJFeGNlcHRpb24ucHJvdG90eXBlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRQYXJzZXJFeGNlcHRpb24oYENvdWxkIG5vdCBwYXJzZSBvdXRwdXQ6ICR7dGV4dH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBpbnN0cnVjdGlvbnMgb24gdGhlIGV4cGVjdGVkIGZvcm1hdCBvZiB0aGUgcmVzcG9uc2UgZm9yIHRoZVxuICAgICAqIEN1c3RvbUxpc3RPdXRwdXRQYXJzZXIsIGluY2x1ZGluZyB0aGUgbnVtYmVyIG9mIGl0ZW1zIGFuZCB0aGVcbiAgICAgKiBzZXBhcmF0b3IuXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgY29udGFpbmluZyBpbnN0cnVjdGlvbnMgb24gdGhlIGV4cGVjdGVkIGZvcm1hdCBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICovXG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gYFlvdXIgcmVzcG9uc2Ugc2hvdWxkIGJlIGEgbGlzdCBvZiAke3RoaXMubGVuZ3RoID09PSB1bmRlZmluZWQgPyBcIlwiIDogYCR7dGhpcy5sZW5ndGh9IGB9aXRlbXMgc2VwYXJhdGVkIGJ5IFwiJHt0aGlzLnNlcGFyYXRvcn1cIiAoZWc6IFxcYGZvbyR7dGhpcy5zZXBhcmF0b3J9IGJhciR7dGhpcy5zZXBhcmF0b3J9IGJhelxcYClgO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBOdW1iZXJlZExpc3RPdXRwdXRQYXJzZXIgZXh0ZW5kcyBMaXN0T3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcIm91dHB1dF9wYXJzZXJzXCIsIFwibGlzdFwiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogL1xcZCtcXC5cXHMoW15cXG5dKykvZ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIk51bWJlcmVkTGlzdE91dHB1dFBhcnNlclwiO1xuICAgIH1cbiAgICBnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBgWW91ciByZXNwb25zZSBzaG91bGQgYmUgYSBudW1iZXJlZCBsaXN0IHdpdGggZWFjaCBpdGVtIG9uIGEgbmV3IGxpbmUuIEZvciBleGFtcGxlOiBcXG5cXG4xLiBmb29cXG5cXG4yLiBiYXJcXG5cXG4zLiBiYXpgO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZSh0ZXh0KSB7XG4gICAgICAgIHJldHVybiBbLi4uKHRleHQubWF0Y2hBbGwodGhpcy5yZSkgPz8gW10pXS5tYXAoKG0pID0+IG1bMV0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNYXJrZG93bkxpc3RPdXRwdXRQYXJzZXIgZXh0ZW5kcyBMaXN0T3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcIm91dHB1dF9wYXJzZXJzXCIsIFwibGlzdFwiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogL15cXHMqWy0qXVxccyhbXlxcbl0rKSQvZ21cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJOdW1iZXJlZExpc3RPdXRwdXRQYXJzZXJcIjtcbiAgICB9XG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gYFlvdXIgcmVzcG9uc2Ugc2hvdWxkIGJlIGEgbnVtYmVyZWQgbGlzdCB3aXRoIGVhY2ggaXRlbSBvbiBhIG5ldyBsaW5lLiBGb3IgZXhhbXBsZTogXFxuXFxuMS4gZm9vXFxuXFxuMi4gYmFyXFxuXFxuMy4gYmF6YDtcbiAgICB9XG4gICAgYXN5bmMgcGFyc2UodGV4dCkge1xuICAgICAgICByZXR1cm4gWy4uLih0ZXh0Lm1hdGNoQWxsKHRoaXMucmUpID8/IFtdKV0ubWFwKChtKSA9PiBtWzFdKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiT3V0cHV0UGFyc2VyRXhjZXB0aW9uIiwiQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciIsIkxpc3RPdXRwdXRQYXJzZXIiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJfdHJhbnNmb3JtIiwiaW5wdXRHZW5lcmF0b3IiLCJidWZmZXIiLCJpbnB1dCIsImNvbnRlbnQiLCJyZSIsInBhcnRzIiwicGFyc2UiLCJsZW5ndGgiLCJwYXJ0Iiwic2xpY2UiLCJtYXRjaGVzIiwibWF0Y2hBbGwiLCJkb25lSWR4IiwibWF0Y2giLCJpbmRleCIsIkNvbW1hU2VwYXJhdGVkTGlzdE91dHB1dFBhcnNlciIsImxjX25hbWUiLCJ0ZXh0IiwidHJpbSIsInNwbGl0IiwibWFwIiwicyIsImUiLCJnZXRGb3JtYXRJbnN0cnVjdGlvbnMiLCJDdXN0b21MaXN0T3V0cHV0UGFyc2VyIiwic2VwYXJhdG9yIiwiaXRlbXMiLCJ1bmRlZmluZWQiLCJnZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIk51bWJlcmVkTGlzdE91dHB1dFBhcnNlciIsIm0iLCJNYXJrZG93bkxpc3RPdXRwdXRQYXJzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/list.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/string.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/string.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StringOutputParser: () => (/* binding */ StringOutputParser)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n/**\n * OutputParser that parses LLMResult into the top likely string.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n *\n * const chain = RunnableSequence.from([\n *   promptTemplate,\n *   new ChatOpenAI({ model: \"gpt-4o-mini\" }),\n *   new StringOutputParser(),\n * ]);\n *\n * const result = await chain.invoke({ topic: \"bears\" });\n * console.log(\"What do you call a bear with no teeth? A gummy bear!\");\n * ```\n */ class StringOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"string\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"StrOutputParser\";\n    }\n    /**\n     * Parses a string output from an LLM call. This method is meant to be\n     * implemented by subclasses to define how a string output from an LLM\n     * should be parsed.\n     * @param text The string output from an LLM call.\n     * @param callbacks Optional callbacks.\n     * @returns A promise of the parsed output.\n     */ parse(text) {\n        return Promise.resolve(text);\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n    _textContentToString(content) {\n        return content.text;\n    }\n    _imageUrlContentToString(_content) {\n        throw new Error(`Cannot coerce a multimodal \"image_url\" message part into a string.`);\n    }\n    _messageContentComplexToString(content) {\n        switch(content.type){\n            case \"text\":\n            case \"text_delta\":\n                if (\"text\" in content) {\n                    // Type guard for MessageContentText\n                    return this._textContentToString(content);\n                }\n                break;\n            case \"image_url\":\n                if (\"image_url\" in content) {\n                    // Type guard for MessageContentImageUrl\n                    return this._imageUrlContentToString(content);\n                }\n                break;\n            default:\n                throw new Error(`Cannot coerce \"${content.type}\" message part into a string.`);\n        }\n        throw new Error(`Invalid content type: ${content.type}`);\n    }\n    _baseMessageContentToString(content) {\n        return content.reduce((acc, item)=>acc + this._messageContentComplexToString(item), \"\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RyaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJEO0FBQzNEOzs7Ozs7Ozs7Ozs7Ozs7OztDQWlCQyxHQUNNLE1BQU1DLDJCQUEyQkQsb0VBQXlCQTtJQUM3REUsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWtCO2dCQUFrQjthQUFTO1FBQ3pEO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7SUFDSjtJQUNBLE9BQU9DLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQTs7Ozs7OztLQU9DLEdBQ0RDLE1BQU1DLElBQUksRUFBRTtRQUNSLE9BQU9DLFFBQVFDLE9BQU8sQ0FBQ0Y7SUFDM0I7SUFDQUcsd0JBQXdCO1FBQ3BCLE9BQU87SUFDWDtJQUNBQyxxQkFBcUJDLE9BQU8sRUFBRTtRQUMxQixPQUFPQSxRQUFRTCxJQUFJO0lBQ3ZCO0lBQ0FNLHlCQUF5QkMsUUFBUSxFQUFFO1FBQy9CLE1BQU0sSUFBSUMsTUFBTSxDQUFDLGtFQUFrRSxDQUFDO0lBQ3hGO0lBQ0FDLCtCQUErQkosT0FBTyxFQUFFO1FBQ3BDLE9BQVFBLFFBQVFLLElBQUk7WUFDaEIsS0FBSztZQUNMLEtBQUs7Z0JBQ0QsSUFBSSxVQUFVTCxTQUFTO29CQUNuQixvQ0FBb0M7b0JBQ3BDLE9BQU8sSUFBSSxDQUFDRCxvQkFBb0IsQ0FBQ0M7Z0JBQ3JDO2dCQUNBO1lBQ0osS0FBSztnQkFDRCxJQUFJLGVBQWVBLFNBQVM7b0JBQ3hCLHdDQUF3QztvQkFDeEMsT0FBTyxJQUFJLENBQUNDLHdCQUF3QixDQUFDRDtnQkFDekM7Z0JBQ0E7WUFDSjtnQkFDSSxNQUFNLElBQUlHLE1BQU0sQ0FBQyxlQUFlLEVBQUVILFFBQVFLLElBQUksQ0FBQyw2QkFBNkIsQ0FBQztRQUNyRjtRQUNBLE1BQU0sSUFBSUYsTUFBTSxDQUFDLHNCQUFzQixFQUFFSCxRQUFRSyxJQUFJLENBQUMsQ0FBQztJQUMzRDtJQUNBQyw0QkFBNEJOLE9BQU8sRUFBRTtRQUNqQyxPQUFPQSxRQUFRTyxNQUFNLENBQUMsQ0FBQ0MsS0FBS0MsT0FBU0QsTUFBTSxJQUFJLENBQUNKLDhCQUE4QixDQUFDSyxPQUFPO0lBQzFGO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL3N0cmluZy5qcz82YjI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXIgfSBmcm9tIFwiLi90cmFuc2Zvcm0uanNcIjtcbi8qKlxuICogT3V0cHV0UGFyc2VyIHRoYXQgcGFyc2VzIExMTVJlc3VsdCBpbnRvIHRoZSB0b3AgbGlrZWx5IHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBwcm9tcHRUZW1wbGF0ZSA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShcbiAqICAgXCJUZWxsIG1lIGEgam9rZSBhYm91dCB7dG9waWN9XCIsXG4gKiApO1xuICpcbiAqIGNvbnN0IGNoYWluID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtcbiAqICAgcHJvbXB0VGVtcGxhdGUsXG4gKiAgIG5ldyBDaGF0T3BlbkFJKHsgbW9kZWw6IFwiZ3B0LTRvLW1pbmlcIiB9KSxcbiAqICAgbmV3IFN0cmluZ091dHB1dFBhcnNlcigpLFxuICogXSk7XG4gKlxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uaW52b2tlKHsgdG9waWM6IFwiYmVhcnNcIiB9KTtcbiAqIGNvbnNvbGUubG9nKFwiV2hhdCBkbyB5b3UgY2FsbCBhIGJlYXIgd2l0aCBubyB0ZWV0aD8gQSBndW1teSBiZWFyIVwiKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgU3RyaW5nT3V0cHV0UGFyc2VyIGV4dGVuZHMgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJvdXRwdXRfcGFyc2Vyc1wiLCBcInN0cmluZ1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3RyT3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIHN0cmluZyBvdXRwdXQgZnJvbSBhbiBMTE0gY2FsbC4gVGhpcyBtZXRob2QgaXMgbWVhbnQgdG8gYmVcbiAgICAgKiBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzIHRvIGRlZmluZSBob3cgYSBzdHJpbmcgb3V0cHV0IGZyb20gYW4gTExNXG4gICAgICogc2hvdWxkIGJlIHBhcnNlZC5cbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgc3RyaW5nIG91dHB1dCBmcm9tIGFuIExMTSBjYWxsLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgT3B0aW9uYWwgY2FsbGJhY2tzLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgcGFyc2VkIG91dHB1dC5cbiAgICAgKi9cbiAgICBwYXJzZSh0ZXh0KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGV4dCk7XG4gICAgfVxuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIF90ZXh0Q29udGVudFRvU3RyaW5nKGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQudGV4dDtcbiAgICB9XG4gICAgX2ltYWdlVXJsQ29udGVudFRvU3RyaW5nKF9jb250ZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvZXJjZSBhIG11bHRpbW9kYWwgXCJpbWFnZV91cmxcIiBtZXNzYWdlIHBhcnQgaW50byBhIHN0cmluZy5gKTtcbiAgICB9XG4gICAgX21lc3NhZ2VDb250ZW50Q29tcGxleFRvU3RyaW5nKGNvbnRlbnQpIHtcbiAgICAgICAgc3dpdGNoIChjb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgICAgICBjYXNlIFwidGV4dF9kZWx0YVwiOlxuICAgICAgICAgICAgICAgIGlmIChcInRleHRcIiBpbiBjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFR5cGUgZ3VhcmQgZm9yIE1lc3NhZ2VDb250ZW50VGV4dFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdGV4dENvbnRlbnRUb1N0cmluZyhjb250ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiaW1hZ2VfdXJsXCI6XG4gICAgICAgICAgICAgICAgaWYgKFwiaW1hZ2VfdXJsXCIgaW4gY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUeXBlIGd1YXJkIGZvciBNZXNzYWdlQ29udGVudEltYWdlVXJsXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbWFnZVVybENvbnRlbnRUb1N0cmluZyhjb250ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvZXJjZSBcIiR7Y29udGVudC50eXBlfVwiIG1lc3NhZ2UgcGFydCBpbnRvIGEgc3RyaW5nLmApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjb250ZW50IHR5cGU6ICR7Y29udGVudC50eXBlfWApO1xuICAgIH1cbiAgICBfYmFzZU1lc3NhZ2VDb250ZW50VG9TdHJpbmcoY29udGVudCkge1xuICAgICAgICByZXR1cm4gY29udGVudC5yZWR1Y2UoKGFjYywgaXRlbSkgPT4gYWNjICsgdGhpcy5fbWVzc2FnZUNvbnRlbnRDb21wbGV4VG9TdHJpbmcoaXRlbSksIFwiXCIpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIiwiU3RyaW5nT3V0cHV0UGFyc2VyIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibGNfbmFtZSIsInBhcnNlIiwidGV4dCIsIlByb21pc2UiLCJyZXNvbHZlIiwiZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zIiwiX3RleHRDb250ZW50VG9TdHJpbmciLCJjb250ZW50IiwiX2ltYWdlVXJsQ29udGVudFRvU3RyaW5nIiwiX2NvbnRlbnQiLCJFcnJvciIsIl9tZXNzYWdlQ29udGVudENvbXBsZXhUb1N0cmluZyIsInR5cGUiLCJfYmFzZU1lc3NhZ2VDb250ZW50VG9TdHJpbmciLCJyZWR1Y2UiLCJhY2MiLCJpdGVtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/string.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/structured.js":
/*!************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/structured.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* binding */ AsymmetricStructuredOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* binding */ JsonMarkdownStructuredOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* binding */ StructuredOutputParser)\n/* harmony export */ });\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _utils_types_zod_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/types/zod.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n/* harmony import */ var _utils_json_schema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/json_schema.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n\n\n\n\nclass StructuredOutputParser extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseOutputParser {\n    static lc_name() {\n        return \"StructuredOutputParser\";\n    }\n    toJSON() {\n        return this.toJSONNotImplemented();\n    }\n    constructor(schema){\n        super(schema);\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: schema\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"output_parsers\",\n                \"structured\"\n            ]\n        });\n    }\n    /**\n     * Creates a new StructuredOutputParser from a Zod schema.\n     * @param schema The Zod schema which the output should match\n     * @returns A new instance of StructuredOutputParser.\n     */ static fromZodSchema(schema) {\n        return new this(schema);\n    }\n    /**\n     * Creates a new StructuredOutputParser from a set of names and\n     * descriptions.\n     * @param schemas An object where each key is a name and each value is a description\n     * @returns A new instance of StructuredOutputParser.\n     */ static fromNamesAndDescriptions(schemas) {\n        const zodSchema = zod_v3__WEBPACK_IMPORTED_MODULE_3__.object(Object.fromEntries(Object.entries(schemas).map(([name, description])=>[\n                name,\n                zod_v3__WEBPACK_IMPORTED_MODULE_3__.string().describe(description)\n            ])));\n        return new this(zodSchema);\n    }\n    /**\n     * Returns a markdown code snippet with a JSON object formatted according\n     * to the schema.\n     * @param options Optional. The options for formatting the instructions\n     * @returns A markdown code snippet with a JSON object formatted according to the schema.\n     */ getFormatInstructions() {\n        return `You must format your output as a JSON value that adheres to a given \"JSON Schema\" instance.\n\n\"JSON Schema\" is a declarative language that allows you to annotate and validate JSON documents.\n\nFor example, the example \"JSON Schema\" instance {{\"properties\": {{\"foo\": {{\"description\": \"a list of test words\", \"type\": \"array\", \"items\": {{\"type\": \"string\"}}}}}}, \"required\": [\"foo\"]}}\nwould match an object with one required property, \"foo\". The \"type\" property specifies \"foo\" must be an \"array\", and the \"description\" property semantically describes it as \"a list of test words\". The items within \"foo\" must be strings.\nThus, the object {{\"foo\": [\"bar\", \"baz\"]}} is a well-formatted instance of this example \"JSON Schema\". The object {{\"properties\": {{\"foo\": [\"bar\", \"baz\"]}}}} is not well-formatted.\n\nYour output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!\n\nHere is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:\n\\`\\`\\`json\n${JSON.stringify((0,_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(this.schema))}\n\\`\\`\\`\n`;\n    }\n    /**\n     * Parses the given text according to the schema.\n     * @param text The text to parse\n     * @returns The parsed output.\n     */ async parse(text) {\n        try {\n            const trimmedText = text.trim();\n            const json = // first case: if back ticks appear at the start of the text\n            trimmedText.match(/^```(?:json)?\\s*([\\s\\S]*?)```/)?.[1] || // second case: if back ticks with `json` appear anywhere in the text\n            trimmedText.match(/```json\\s*([\\s\\S]*?)```/)?.[1] || // otherwise, return the trimmed text\n            trimmedText;\n            const escapedJson = json.replace(/\"([^\"\\\\]*(\\\\.[^\"\\\\]*)*)\"/g, (_match, capturedGroup)=>{\n                const escapedInsideQuotes = capturedGroup.replace(/\\n/g, \"\\\\n\");\n                return `\"${escapedInsideQuotes}\"`;\n            }).replace(/\\n/g, \"\");\n            return await (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_1__.interopParseAsync)(this.schema, JSON.parse(escapedJson));\n        } catch (e) {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n        }\n    }\n}\n/**\n * A specific type of `StructuredOutputParser` that parses JSON data\n * formatted as a markdown code snippet.\n */ class JsonMarkdownStructuredOutputParser extends StructuredOutputParser {\n    static lc_name() {\n        return \"JsonMarkdownStructuredOutputParser\";\n    }\n    getFormatInstructions(options) {\n        const interpolationDepth = options?.interpolationDepth ?? 1;\n        if (interpolationDepth < 1) {\n            throw new Error(\"f string interpolation depth must be at least 1\");\n        }\n        return `Return a markdown code snippet with a JSON object formatted to look like:\\n\\`\\`\\`json\\n${this._schemaToInstruction((0,_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(this.schema)).replaceAll(\"{\", \"{\".repeat(interpolationDepth)).replaceAll(\"}\", \"}\".repeat(interpolationDepth))}\\n\\`\\`\\``;\n    }\n    _schemaToInstruction(schemaInput, indent = 2) {\n        const schema = schemaInput;\n        if (\"type\" in schema) {\n            let nullable = false;\n            let type;\n            if (Array.isArray(schema.type)) {\n                const nullIdx = schema.type.findIndex((type)=>type === \"null\");\n                if (nullIdx !== -1) {\n                    nullable = true;\n                    schema.type.splice(nullIdx, 1);\n                }\n                type = schema.type.join(\" | \");\n            } else {\n                type = schema.type;\n            }\n            if (schema.type === \"object\" && schema.properties) {\n                const description = schema.description ? ` // ${schema.description}` : \"\";\n                const properties = Object.entries(schema.properties).map(([key, value])=>{\n                    const isOptional = schema.required?.includes(key) ? \"\" : \" (optional)\";\n                    return `${\" \".repeat(indent)}\"${key}\": ${this._schemaToInstruction(value, indent + 2)}${isOptional}`;\n                }).join(\"\\n\");\n                return `{\\n${properties}\\n${\" \".repeat(indent - 2)}}${description}`;\n            }\n            if (schema.type === \"array\" && schema.items) {\n                const description = schema.description ? ` // ${schema.description}` : \"\";\n                return `array[\\n${\" \".repeat(indent)}${this._schemaToInstruction(schema.items, indent + 2)}\\n${\" \".repeat(indent - 2)}] ${description}`;\n            }\n            const isNullable = nullable ? \" (nullable)\" : \"\";\n            const description = schema.description ? ` // ${schema.description}` : \"\";\n            return `${type}${description}${isNullable}`;\n        }\n        if (\"anyOf\" in schema) {\n            return schema.anyOf.map((s)=>this._schemaToInstruction(s, indent)).join(`\\n${\" \".repeat(indent - 2)}`);\n        }\n        throw new Error(\"unsupported schema type\");\n    }\n    static fromZodSchema(schema) {\n        return new this(schema);\n    }\n    static fromNamesAndDescriptions(schemas) {\n        const zodSchema = zod_v3__WEBPACK_IMPORTED_MODULE_3__.object(Object.fromEntries(Object.entries(schemas).map(([name, description])=>[\n                name,\n                zod_v3__WEBPACK_IMPORTED_MODULE_3__.string().describe(description)\n            ])));\n        return new this(zodSchema);\n    }\n}\n/**\n * A type of `StructuredOutputParser` that handles asymmetric input and\n * output schemas.\n */ class AsymmetricStructuredOutputParser extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseOutputParser {\n    constructor({ inputSchema }){\n        super(...arguments);\n        Object.defineProperty(this, \"structuredInputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.structuredInputParser = new JsonMarkdownStructuredOutputParser(inputSchema);\n    }\n    async parse(text) {\n        let parsedInput;\n        try {\n            parsedInput = await this.structuredInputParser.parse(text);\n        } catch (e) {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n        }\n        return this.outputProcessor(parsedInput);\n    }\n    getFormatInstructions() {\n        return this.structuredInputParser.getFormatInstructions();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RydWN0dXJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJCO0FBQzBDO0FBQ1Y7QUFDSDtBQUNqRCxNQUFNSywrQkFBK0JKLHNEQUFnQkE7SUFDeEQsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxTQUFTO1FBQ0wsT0FBTyxJQUFJLENBQUNDLG9CQUFvQjtJQUNwQztJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9OO1FBQ1g7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWE7Z0JBQWtCO2FBQWE7UUFDeEQ7SUFDSjtJQUNBOzs7O0tBSUMsR0FDRCxPQUFPQyxjQUFjUCxNQUFNLEVBQUU7UUFDekIsT0FBTyxJQUFJLElBQUksQ0FBQ0E7SUFDcEI7SUFDQTs7Ozs7S0FLQyxHQUNELE9BQU9RLHlCQUF5QkMsT0FBTyxFQUFFO1FBQ3JDLE1BQU1DLFlBQVlwQiwwQ0FBUSxDQUFDVyxPQUFPVyxXQUFXLENBQUNYLE9BQU9ZLE9BQU8sQ0FBQ0osU0FBU0ssR0FBRyxDQUFDLENBQUMsQ0FBQ0MsTUFBTUMsWUFBWSxHQUFLO2dCQUFDRDtnQkFBTXpCLDBDQUFRLEdBQUc0QixRQUFRLENBQUNGO2FBQWE7UUFDM0ksT0FBTyxJQUFJLElBQUksQ0FBQ047SUFDcEI7SUFDQTs7Ozs7S0FLQyxHQUNEUyx3QkFBd0I7UUFDcEIsT0FBTyxDQUFDOzs7Ozs7Ozs7Ozs7QUFZaEIsRUFBRUMsS0FBS0MsU0FBUyxDQUFDM0IsbUVBQVlBLENBQUMsSUFBSSxDQUFDTSxNQUFN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LENBQUNYLE9BQU9ZLE9BQU8sQ0FBQ0osU0FBU0ssR0FBRyxDQUFDLENBQUMsQ0FBQ0MsTUFBTUMsWUFBWSxHQUFLO2dCQUFDRDtnQkFBTXpCLDBDQUFRLEdBQUc0QixRQUFRLENBQUNGO2FBQWE7UUFDM0ksT0FBTyxJQUFJLElBQUksQ0FBQ047SUFDcEI7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1rRCx5Q0FBeUNyRSxzREFBZ0JBO0lBQ2xFUSxZQUFZLEVBQUU4RCxXQUFXLEVBQUUsQ0FBRTtRQUN6QixLQUFLLElBQUlDO1FBQ1Q3RCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHlCQUF5QjtZQUNqREMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDeUQscUJBQXFCLEdBQUcsSUFBSTdCLG1DQUFtQzJCO0lBQ3hFO0lBQ0EsTUFBTXZDLE1BQU1DLElBQUksRUFBRTtRQUNkLElBQUl5QztRQUNKLElBQUk7WUFDQUEsY0FBYyxNQUFNLElBQUksQ0FBQ0QscUJBQXFCLENBQUN6QyxLQUFLLENBQUNDO1FBQ3pELEVBQ0EsT0FBT1UsR0FBRztZQUNOLE1BQU0sSUFBSXpDLDJEQUFxQkEsQ0FBQyxDQUFDLHdCQUF3QixFQUFFK0IsS0FBSyxVQUFVLEVBQUVVLEVBQUUsQ0FBQyxFQUFFVjtRQUNyRjtRQUNBLE9BQU8sSUFBSSxDQUFDMEMsZUFBZSxDQUFDRDtJQUNoQztJQUNBN0Msd0JBQXdCO1FBQ3BCLE9BQU8sSUFBSSxDQUFDNEMscUJBQXFCLENBQUM1QyxxQkFBcUI7SUFDM0Q7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RydWN0dXJlZC5qcz80ZjUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kL3YzXCI7XG5pbXBvcnQgeyBCYXNlT3V0cHV0UGFyc2VyLCBPdXRwdXRQYXJzZXJFeGNlcHRpb24sIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgaW50ZXJvcFBhcnNlQXN5bmMsIH0gZnJvbSBcIi4uL3V0aWxzL3R5cGVzL3pvZC5qc1wiO1xuaW1wb3J0IHsgdG9Kc29uU2NoZW1hLCB9IGZyb20gXCIuLi91dGlscy9qc29uX3NjaGVtYS5qc1wiO1xuZXhwb3J0IGNsYXNzIFN0cnVjdHVyZWRPdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlT3V0cHV0UGFyc2VyIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3RydWN0dXJlZE91dHB1dFBhcnNlclwiO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvSlNPTk5vdEltcGxlbWVudGVkKCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHNjaGVtYSkge1xuICAgICAgICBzdXBlcihzY2hlbWEpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzY2hlbWFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHNjaGVtYVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJvdXRwdXRfcGFyc2Vyc1wiLCBcInN0cnVjdHVyZWRcIl1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU3RydWN0dXJlZE91dHB1dFBhcnNlciBmcm9tIGEgWm9kIHNjaGVtYS5cbiAgICAgKiBAcGFyYW0gc2NoZW1hIFRoZSBab2Qgc2NoZW1hIHdoaWNoIHRoZSBvdXRwdXQgc2hvdWxkIG1hdGNoXG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgU3RydWN0dXJlZE91dHB1dFBhcnNlci5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVpvZFNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKHNjaGVtYSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU3RydWN0dXJlZE91dHB1dFBhcnNlciBmcm9tIGEgc2V0IG9mIG5hbWVzIGFuZFxuICAgICAqIGRlc2NyaXB0aW9ucy5cbiAgICAgKiBAcGFyYW0gc2NoZW1hcyBBbiBvYmplY3Qgd2hlcmUgZWFjaCBrZXkgaXMgYSBuYW1lIGFuZCBlYWNoIHZhbHVlIGlzIGEgZGVzY3JpcHRpb25cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tTmFtZXNBbmREZXNjcmlwdGlvbnMoc2NoZW1hcykge1xuICAgICAgICBjb25zdCB6b2RTY2hlbWEgPSB6Lm9iamVjdChPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoc2NoZW1hcykubWFwKChbbmFtZSwgZGVzY3JpcHRpb25dKSA9PiBbbmFtZSwgei5zdHJpbmcoKS5kZXNjcmliZShkZXNjcmlwdGlvbildKSkpO1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoem9kU2NoZW1hKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG1hcmtkb3duIGNvZGUgc25pcHBldCB3aXRoIGEgSlNPTiBvYmplY3QgZm9ybWF0dGVkIGFjY29yZGluZ1xuICAgICAqIHRvIHRoZSBzY2hlbWEuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwuIFRoZSBvcHRpb25zIGZvciBmb3JtYXR0aW5nIHRoZSBpbnN0cnVjdGlvbnNcbiAgICAgKiBAcmV0dXJucyBBIG1hcmtkb3duIGNvZGUgc25pcHBldCB3aXRoIGEgSlNPTiBvYmplY3QgZm9ybWF0dGVkIGFjY29yZGluZyB0byB0aGUgc2NoZW1hLlxuICAgICAqL1xuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIGBZb3UgbXVzdCBmb3JtYXQgeW91ciBvdXRwdXQgYXMgYSBKU09OIHZhbHVlIHRoYXQgYWRoZXJlcyB0byBhIGdpdmVuIFwiSlNPTiBTY2hlbWFcIiBpbnN0YW5jZS5cblxuXCJKU09OIFNjaGVtYVwiIGlzIGEgZGVjbGFyYXRpdmUgbGFuZ3VhZ2UgdGhhdCBhbGxvd3MgeW91IHRvIGFubm90YXRlIGFuZCB2YWxpZGF0ZSBKU09OIGRvY3VtZW50cy5cblxuRm9yIGV4YW1wbGUsIHRoZSBleGFtcGxlIFwiSlNPTiBTY2hlbWFcIiBpbnN0YW5jZSB7e1wicHJvcGVydGllc1wiOiB7e1wiZm9vXCI6IHt7XCJkZXNjcmlwdGlvblwiOiBcImEgbGlzdCBvZiB0ZXN0IHdvcmRzXCIsIFwidHlwZVwiOiBcImFycmF5XCIsIFwiaXRlbXNcIjoge3tcInR5cGVcIjogXCJzdHJpbmdcIn19fX19fSwgXCJyZXF1aXJlZFwiOiBbXCJmb29cIl19fVxud291bGQgbWF0Y2ggYW4gb2JqZWN0IHdpdGggb25lIHJlcXVpcmVkIHByb3BlcnR5LCBcImZvb1wiLiBUaGUgXCJ0eXBlXCIgcHJvcGVydHkgc3BlY2lmaWVzIFwiZm9vXCIgbXVzdCBiZSBhbiBcImFycmF5XCIsIGFuZCB0aGUgXCJkZXNjcmlwdGlvblwiIHByb3BlcnR5IHNlbWFudGljYWxseSBkZXNjcmliZXMgaXQgYXMgXCJhIGxpc3Qgb2YgdGVzdCB3b3Jkc1wiLiBUaGUgaXRlbXMgd2l0aGluIFwiZm9vXCIgbXVzdCBiZSBzdHJpbmdzLlxuVGh1cywgdGhlIG9iamVjdCB7e1wiZm9vXCI6IFtcImJhclwiLCBcImJhelwiXX19IGlzIGEgd2VsbC1mb3JtYXR0ZWQgaW5zdGFuY2Ugb2YgdGhpcyBleGFtcGxlIFwiSlNPTiBTY2hlbWFcIi4gVGhlIG9iamVjdCB7e1wicHJvcGVydGllc1wiOiB7e1wiZm9vXCI6IFtcImJhclwiLCBcImJhelwiXX19fX0gaXMgbm90IHdlbGwtZm9ybWF0dGVkLlxuXG5Zb3VyIG91dHB1dCB3aWxsIGJlIHBhcnNlZCBhbmQgdHlwZS1jaGVja2VkIGFjY29yZGluZyB0byB0aGUgcHJvdmlkZWQgc2NoZW1hIGluc3RhbmNlLCBzbyBtYWtlIHN1cmUgYWxsIGZpZWxkcyBpbiB5b3VyIG91dHB1dCBtYXRjaCB0aGUgc2NoZW1hIGV4YWN0bHkgYW5kIHRoZXJlIGFyZSBubyB0cmFpbGluZyBjb21tYXMhXG5cbkhlcmUgaXMgdGhlIEpTT04gU2NoZW1hIGluc3RhbmNlIHlvdXIgb3V0cHV0IG11c3QgYWRoZXJlIHRvLiBJbmNsdWRlIHRoZSBlbmNsb3NpbmcgbWFya2Rvd24gY29kZWJsb2NrOlxuXFxgXFxgXFxganNvblxuJHtKU09OLnN0cmluZ2lmeSh0b0pzb25TY2hlbWEodGhpcy5zY2hlbWEpKX1cblxcYFxcYFxcYFxuYDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBnaXZlbiB0ZXh0IGFjY29yZGluZyB0byB0aGUgc2NoZW1hLlxuICAgICAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IHRvIHBhcnNlXG4gICAgICogQHJldHVybnMgVGhlIHBhcnNlZCBvdXRwdXQuXG4gICAgICovXG4gICAgYXN5bmMgcGFyc2UodGV4dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdHJpbW1lZFRleHQgPSB0ZXh0LnRyaW0oKTtcbiAgICAgICAgICAgIGNvbnN0IGpzb24gPSBcbiAgICAgICAgICAgIC8vIGZpcnN0IGNhc2U6IGlmIGJhY2sgdGlja3MgYXBwZWFyIGF0IHRoZSBzdGFydCBvZiB0aGUgdGV4dFxuICAgICAgICAgICAgdHJpbW1lZFRleHQubWF0Y2goL15gYGAoPzpqc29uKT9cXHMqKFtcXHNcXFNdKj8pYGBgLyk/LlsxXSB8fFxuICAgICAgICAgICAgICAgIC8vIHNlY29uZCBjYXNlOiBpZiBiYWNrIHRpY2tzIHdpdGggYGpzb25gIGFwcGVhciBhbnl3aGVyZSBpbiB0aGUgdGV4dFxuICAgICAgICAgICAgICAgIHRyaW1tZWRUZXh0Lm1hdGNoKC9gYGBqc29uXFxzKihbXFxzXFxTXSo/KWBgYC8pPy5bMV0gfHxcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UsIHJldHVybiB0aGUgdHJpbW1lZCB0ZXh0XG4gICAgICAgICAgICAgICAgdHJpbW1lZFRleHQ7XG4gICAgICAgICAgICBjb25zdCBlc2NhcGVkSnNvbiA9IGpzb25cbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXCIoW15cIlxcXFxdKihcXFxcLlteXCJcXFxcXSopKilcIi9nLCAoX21hdGNoLCBjYXB0dXJlZEdyb3VwKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXNjYXBlZEluc2lkZVF1b3RlcyA9IGNhcHR1cmVkR3JvdXAucmVwbGFjZSgvXFxuL2csIFwiXFxcXG5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBcIiR7ZXNjYXBlZEluc2lkZVF1b3Rlc31cImA7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXG4vZywgXCJcIik7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgaW50ZXJvcFBhcnNlQXN5bmModGhpcy5zY2hlbWEsIEpTT04ucGFyc2UoZXNjYXBlZEpzb24pKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgRmFpbGVkIHRvIHBhcnNlLiBUZXh0OiBcIiR7dGV4dH1cIi4gRXJyb3I6ICR7ZX1gLCB0ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQSBzcGVjaWZpYyB0eXBlIG9mIGBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyYCB0aGF0IHBhcnNlcyBKU09OIGRhdGFcbiAqIGZvcm1hdHRlZCBhcyBhIG1hcmtkb3duIGNvZGUgc25pcHBldC5cbiAqL1xuZXhwb3J0IGNsYXNzIEpzb25NYXJrZG93blN0cnVjdHVyZWRPdXRwdXRQYXJzZXIgZXh0ZW5kcyBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSnNvbk1hcmtkb3duU3RydWN0dXJlZE91dHB1dFBhcnNlclwiO1xuICAgIH1cbiAgICBnZXRGb3JtYXRJbnN0cnVjdGlvbnMob3B0aW9ucykge1xuICAgICAgICBjb25zdCBpbnRlcnBvbGF0aW9uRGVwdGggPSBvcHRpb25zPy5pbnRlcnBvbGF0aW9uRGVwdGggPz8gMTtcbiAgICAgICAgaWYgKGludGVycG9sYXRpb25EZXB0aCA8IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImYgc3RyaW5nIGludGVycG9sYXRpb24gZGVwdGggbXVzdCBiZSBhdCBsZWFzdCAxXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgUmV0dXJuIGEgbWFya2Rvd24gY29kZSBzbmlwcGV0IHdpdGggYSBKU09OIG9iamVjdCBmb3JtYXR0ZWQgdG8gbG9vayBsaWtlOlxcblxcYFxcYFxcYGpzb25cXG4ke3RoaXMuX3NjaGVtYVRvSW5zdHJ1Y3Rpb24odG9Kc29uU2NoZW1hKHRoaXMuc2NoZW1hKSlcbiAgICAgICAgICAgIC5yZXBsYWNlQWxsKFwie1wiLCBcIntcIi5yZXBlYXQoaW50ZXJwb2xhdGlvbkRlcHRoKSlcbiAgICAgICAgICAgIC5yZXBsYWNlQWxsKFwifVwiLCBcIn1cIi5yZXBlYXQoaW50ZXJwb2xhdGlvbkRlcHRoKSl9XFxuXFxgXFxgXFxgYDtcbiAgICB9XG4gICAgX3NjaGVtYVRvSW5zdHJ1Y3Rpb24oc2NoZW1hSW5wdXQsIGluZGVudCA9IDIpIHtcbiAgICAgICAgY29uc3Qgc2NoZW1hID0gc2NoZW1hSW5wdXQ7XG4gICAgICAgIGlmIChcInR5cGVcIiBpbiBzY2hlbWEpIHtcbiAgICAgICAgICAgIGxldCBudWxsYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHR5cGU7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzY2hlbWEudHlwZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBudWxsSWR4ID0gc2NoZW1hLnR5cGUuZmluZEluZGV4KCh0eXBlKSA9PiB0eXBlID09PSBcIm51bGxcIik7XG4gICAgICAgICAgICAgICAgaWYgKG51bGxJZHggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG51bGxhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hLnR5cGUuc3BsaWNlKG51bGxJZHgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0eXBlID0gc2NoZW1hLnR5cGUuam9pbihcIiB8IFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHR5cGUgPSBzY2hlbWEudHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzY2hlbWEudHlwZSA9PT0gXCJvYmplY3RcIiAmJiBzY2hlbWEucHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gc2NoZW1hLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgID8gYCAvLyAke3NjaGVtYS5kZXNjcmlwdGlvbn1gXG4gICAgICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gT2JqZWN0LmVudHJpZXMoc2NoZW1hLnByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc09wdGlvbmFsID0gc2NoZW1hLnJlcXVpcmVkPy5pbmNsdWRlcyhrZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCIgKG9wdGlvbmFsKVwiO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7XCIgXCIucmVwZWF0KGluZGVudCl9XCIke2tleX1cIjogJHt0aGlzLl9zY2hlbWFUb0luc3RydWN0aW9uKHZhbHVlLCBpbmRlbnQgKyAyKX0ke2lzT3B0aW9uYWx9YDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYHtcXG4ke3Byb3BlcnRpZXN9XFxuJHtcIiBcIi5yZXBlYXQoaW5kZW50IC0gMil9fSR7ZGVzY3JpcHRpb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzY2hlbWEudHlwZSA9PT0gXCJhcnJheVwiICYmIHNjaGVtYS5pdGVtcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gc2NoZW1hLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgID8gYCAvLyAke3NjaGVtYS5kZXNjcmlwdGlvbn1gXG4gICAgICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gYGFycmF5W1xcbiR7XCIgXCIucmVwZWF0KGluZGVudCl9JHt0aGlzLl9zY2hlbWFUb0luc3RydWN0aW9uKHNjaGVtYS5pdGVtcywgaW5kZW50ICsgMil9XFxuJHtcIiBcIi5yZXBlYXQoaW5kZW50IC0gMil9XSAke2Rlc2NyaXB0aW9ufWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpc051bGxhYmxlID0gbnVsbGFibGUgPyBcIiAobnVsbGFibGUpXCIgOiBcIlwiO1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBzY2hlbWEuZGVzY3JpcHRpb24gPyBgIC8vICR7c2NoZW1hLmRlc2NyaXB0aW9ufWAgOiBcIlwiO1xuICAgICAgICAgICAgcmV0dXJuIGAke3R5cGV9JHtkZXNjcmlwdGlvbn0ke2lzTnVsbGFibGV9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJhbnlPZlwiIGluIHNjaGVtYSkge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVtYS5hbnlPZlxuICAgICAgICAgICAgICAgIC5tYXAoKHMpID0+IHRoaXMuX3NjaGVtYVRvSW5zdHJ1Y3Rpb24ocywgaW5kZW50KSlcbiAgICAgICAgICAgICAgICAuam9pbihgXFxuJHtcIiBcIi5yZXBlYXQoaW5kZW50IC0gMil9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgc2NoZW1hIHR5cGVcIik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tWm9kU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoc2NoZW1hKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21OYW1lc0FuZERlc2NyaXB0aW9ucyhzY2hlbWFzKSB7XG4gICAgICAgIGNvbnN0IHpvZFNjaGVtYSA9IHoub2JqZWN0KE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhzY2hlbWFzKS5tYXAoKFtuYW1lLCBkZXNjcmlwdGlvbl0pID0+IFtuYW1lLCB6LnN0cmluZygpLmRlc2NyaWJlKGRlc2NyaXB0aW9uKV0pKSk7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyh6b2RTY2hlbWEpO1xuICAgIH1cbn1cbi8qKlxuICogQSB0eXBlIG9mIGBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyYCB0aGF0IGhhbmRsZXMgYXN5bW1ldHJpYyBpbnB1dCBhbmRcbiAqIG91dHB1dCBzY2hlbWFzLlxuICovXG5leHBvcnQgY2xhc3MgQXN5bW1ldHJpY1N0cnVjdHVyZWRPdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlT3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGlucHV0U2NoZW1hIH0pIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RydWN0dXJlZElucHV0UGFyc2VyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RydWN0dXJlZElucHV0UGFyc2VyID0gbmV3IEpzb25NYXJrZG93blN0cnVjdHVyZWRPdXRwdXRQYXJzZXIoaW5wdXRTY2hlbWEpO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZSh0ZXh0KSB7XG4gICAgICAgIGxldCBwYXJzZWRJbnB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBhcnNlZElucHV0ID0gYXdhaXQgdGhpcy5zdHJ1Y3R1cmVkSW5wdXRQYXJzZXIucGFyc2UodGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRQYXJzZXJFeGNlcHRpb24oYEZhaWxlZCB0byBwYXJzZS4gVGV4dDogXCIke3RleHR9XCIuIEVycm9yOiAke2V9YCwgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0UHJvY2Vzc29yKHBhcnNlZElucHV0KTtcbiAgICB9XG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkSW5wdXRQYXJzZXIuZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInoiLCJCYXNlT3V0cHV0UGFyc2VyIiwiT3V0cHV0UGFyc2VyRXhjZXB0aW9uIiwiaW50ZXJvcFBhcnNlQXN5bmMiLCJ0b0pzb25TY2hlbWEiLCJTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIiwibGNfbmFtZSIsInRvSlNPTiIsInRvSlNPTk5vdEltcGxlbWVudGVkIiwiY29uc3RydWN0b3IiLCJzY2hlbWEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZnJvbVpvZFNjaGVtYSIsImZyb21OYW1lc0FuZERlc2NyaXB0aW9ucyIsInNjaGVtYXMiLCJ6b2RTY2hlbWEiLCJvYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJtYXAiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJzdHJpbmciLCJkZXNjcmliZSIsImdldEZvcm1hdEluc3RydWN0aW9ucyIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsInRleHQiLCJ0cmltbWVkVGV4dCIsInRyaW0iLCJqc29uIiwibWF0Y2giLCJlc2NhcGVkSnNvbiIsInJlcGxhY2UiLCJfbWF0Y2giLCJjYXB0dXJlZEdyb3VwIiwiZXNjYXBlZEluc2lkZVF1b3RlcyIsImUiLCJKc29uTWFya2Rvd25TdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIiwib3B0aW9ucyIsImludGVycG9sYXRpb25EZXB0aCIsIkVycm9yIiwiX3NjaGVtYVRvSW5zdHJ1Y3Rpb24iLCJyZXBsYWNlQWxsIiwicmVwZWF0Iiwic2NoZW1hSW5wdXQiLCJpbmRlbnQiLCJudWxsYWJsZSIsInR5cGUiLCJBcnJheSIsImlzQXJyYXkiLCJudWxsSWR4IiwiZmluZEluZGV4Iiwic3BsaWNlIiwiam9pbiIsInByb3BlcnRpZXMiLCJrZXkiLCJpc09wdGlvbmFsIiwicmVxdWlyZWQiLCJpbmNsdWRlcyIsIml0ZW1zIiwiaXNOdWxsYWJsZSIsImFueU9mIiwicyIsIkFzeW1tZXRyaWNTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIiwiaW5wdXRTY2hlbWEiLCJhcmd1bWVudHMiLCJzdHJ1Y3R1cmVkSW5wdXRQYXJzZXIiLCJwYXJzZWRJbnB1dCIsIm91dHB1dFByb2Nlc3NvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/structured.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/transform.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* binding */ BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* binding */ BaseTransformOutputParser)\n/* harmony export */ });\n/* harmony import */ var _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @cfworker/json-schema */ \"(rsc)/./node_modules/@cfworker/json-schema/dist/esm/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _messages_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n\n\n\n\n\n/**\n * Class to parse the output of an LLM call that also allows streaming inputs.\n */ class BaseTransformOutputParser extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseOutputParser {\n    async *_transform(inputGenerator) {\n        for await (const chunk of inputGenerator){\n            if (typeof chunk === \"string\") {\n                yield this.parseResult([\n                    {\n                        text: chunk\n                    }\n                ]);\n            } else {\n                yield this.parseResult([\n                    {\n                        message: chunk,\n                        text: this._baseMessageToString(chunk)\n                    }\n                ]);\n            }\n        }\n    }\n    /**\n     * Transforms an asynchronous generator of input into an asynchronous\n     * generator of parsed output.\n     * @param inputGenerator An asynchronous generator of input.\n     * @param options A configuration object.\n     * @returns An asynchronous generator of parsed output.\n     */ async *transform(inputGenerator, options) {\n        yield* this._transformStreamWithConfig(inputGenerator, this._transform.bind(this), {\n            ...options,\n            runType: \"parser\"\n        });\n    }\n}\n/**\n * A base class for output parsers that can handle streaming input. It\n * extends the `BaseTransformOutputParser` class and provides a method for\n * converting parsed outputs into a diff format.\n */ class BaseCumulativeTransformOutputParser extends BaseTransformOutputParser {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"diff\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.diff = fields?.diff ?? this.diff;\n    }\n    async *_transform(inputGenerator) {\n        let prevParsed;\n        let accGen;\n        for await (const chunk of inputGenerator){\n            if (typeof chunk !== \"string\" && typeof chunk.content !== \"string\") {\n                throw new Error(\"Cannot handle non-string output.\");\n            }\n            let chunkGen;\n            if ((0,_messages_base_js__WEBPACK_IMPORTED_MODULE_2__.isBaseMessageChunk)(chunk)) {\n                if (typeof chunk.content !== \"string\") {\n                    throw new Error(\"Cannot handle non-string message output.\");\n                }\n                chunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_4__.ChatGenerationChunk({\n                    message: chunk,\n                    text: chunk.content\n                });\n            } else if ((0,_messages_base_js__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(chunk)) {\n                if (typeof chunk.content !== \"string\") {\n                    throw new Error(\"Cannot handle non-string message output.\");\n                }\n                chunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_4__.ChatGenerationChunk({\n                    message: (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_3__.convertToChunk)(chunk),\n                    text: chunk.content\n                });\n            } else {\n                chunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_4__.GenerationChunk({\n                    text: chunk\n                });\n            }\n            if (accGen === undefined) {\n                accGen = chunkGen;\n            } else {\n                accGen = accGen.concat(chunkGen);\n            }\n            const parsed = await this.parsePartialResult([\n                accGen\n            ]);\n            if (parsed !== undefined && parsed !== null && !(0,_cfworker_json_schema__WEBPACK_IMPORTED_MODULE_0__.deepCompareStrict)(parsed, prevParsed)) {\n                if (this.diff) {\n                    yield this._diff(prevParsed, parsed);\n                } else {\n                    yield parsed;\n                }\n                prevParsed = parsed;\n            }\n        }\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvdHJhbnNmb3JtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEQ7QUFDYjtBQUM0QjtBQUNuQjtBQUNnQjtBQUN0RTs7Q0FFQyxHQUNNLE1BQU1PLGtDQUFrQ04sc0RBQWdCQTtJQUMzRCxPQUFPTyxXQUFXQyxjQUFjLEVBQUU7UUFDOUIsV0FBVyxNQUFNQyxTQUFTRCxlQUFnQjtZQUN0QyxJQUFJLE9BQU9DLFVBQVUsVUFBVTtnQkFDM0IsTUFBTSxJQUFJLENBQUNDLFdBQVcsQ0FBQztvQkFBQzt3QkFBRUMsTUFBTUY7b0JBQU07aUJBQUU7WUFDNUMsT0FDSztnQkFDRCxNQUFNLElBQUksQ0FBQ0MsV0FBVyxDQUFDO29CQUNuQjt3QkFDSUUsU0FBU0g7d0JBQ1RFLE1BQU0sSUFBSSxDQUFDRSxvQkFBb0IsQ0FBQ0o7b0JBQ3BDO2lCQUNIO1lBQ0w7UUFDSjtJQUNKO0lBQ0E7Ozs7OztLQU1DLEdBQ0QsT0FBT0ssVUFBVU4sY0FBYyxFQUFFTyxPQUFPLEVBQUU7UUFDdEMsT0FBTyxJQUFJLENBQUNDLDBCQUEwQixDQUFDUixnQkFBZ0IsSUFBSSxDQUFDRCxVQUFVLENBQUNVLElBQUksQ0FBQyxJQUFJLEdBQUc7WUFDL0UsR0FBR0YsT0FBTztZQUNWRyxTQUFTO1FBQ2I7SUFDSjtBQUNKO0FBQ0E7Ozs7Q0FJQyxHQUNNLE1BQU1DLDRDQUE0Q2I7SUFDckRjLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsSUFBSSxDQUFDQyxJQUFJLEdBQUdQLFFBQVFPLFFBQVEsSUFBSSxDQUFDQSxJQUFJO0lBQ3pDO0lBQ0EsT0FBT3JCLFdBQVdDLGNBQWMsRUFBRTtRQUM5QixJQUFJcUI7UUFDSixJQUFJQztRQUNKLFdBQVcsTUFBTXJCLFNBQVNELGVBQWdCO1lBQ3RDLElBQUksT0FBT0MsVUFBVSxZQUFZLE9BQU9BLE1BQU1zQixPQUFPLEtBQUssVUFBVTtnQkFDaEUsTUFBTSxJQUFJQyxNQUFNO1lBQ3BCO1lBQ0EsSUFBSUM7WUFDSixJQUFJL0IscUVBQWtCQSxDQUFDTyxRQUFRO2dCQUMzQixJQUFJLE9BQU9BLE1BQU1zQixPQUFPLEtBQUssVUFBVTtvQkFDbkMsTUFBTSxJQUFJQyxNQUFNO2dCQUNwQjtnQkFDQUMsV0FBVyxJQUFJNUIsNERBQW1CQSxDQUFDO29CQUMvQk8sU0FBU0g7b0JBQ1RFLE1BQU1GLE1BQU1zQixPQUFPO2dCQUN2QjtZQUNKLE9BQ0ssSUFBSTlCLGdFQUFhQSxDQUFDUSxRQUFRO2dCQUMzQixJQUFJLE9BQU9BLE1BQU1zQixPQUFPLEtBQUssVUFBVTtvQkFDbkMsTUFBTSxJQUFJQyxNQUFNO2dCQUNwQjtnQkFDQUMsV0FBVyxJQUFJNUIsNERBQW1CQSxDQUFDO29CQUMvQk8sU0FBU1Qsa0VBQWNBLENBQUNNO29CQUN4QkUsTUFBTUYsTUFBTXNCLE9BQU87Z0JBQ3ZCO1lBQ0osT0FDSztnQkFDREUsV0FBVyxJQUFJN0Isd0RBQWVBLENBQUM7b0JBQUVPLE1BQU1GO2dCQUFNO1lBQ2pEO1lBQ0EsSUFBSXFCLFdBQVdJLFdBQVc7Z0JBQ3RCSixTQUFTRztZQUNiLE9BQ0s7Z0JBQ0RILFNBQVNBLE9BQU9LLE1BQU0sQ0FBQ0Y7WUFDM0I7WUFDQSxNQUFNRyxTQUFTLE1BQU0sSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQztnQkFBQ1A7YUFBTztZQUNyRCxJQUFJTSxXQUFXRixhQUNYRSxXQUFXLFFBQ1gsQ0FBQ3JDLHdFQUFpQkEsQ0FBQ3FDLFFBQVFQLGFBQWE7Z0JBQ3hDLElBQUksSUFBSSxDQUFDRCxJQUFJLEVBQUU7b0JBQ1gsTUFBTSxJQUFJLENBQUNVLEtBQUssQ0FBQ1QsWUFBWU87Z0JBQ2pDLE9BQ0s7b0JBQ0QsTUFBTUE7Z0JBQ1Y7Z0JBQ0FQLGFBQWFPO1lBQ2pCO1FBQ0o7SUFDSjtJQUNBRyx3QkFBd0I7UUFDcEIsT0FBTztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL3RyYW5zZm9ybS5qcz9mMTU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZXBDb21wYXJlU3RyaWN0IH0gZnJvbSBcIkBjZndvcmtlci9qc29uLXNjaGVtYVwiO1xuaW1wb3J0IHsgQmFzZU91dHB1dFBhcnNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IGlzQmFzZU1lc3NhZ2UsIGlzQmFzZU1lc3NhZ2VDaHVuaywgfSBmcm9tIFwiLi4vbWVzc2FnZXMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgY29udmVydFRvQ2h1bmsgfSBmcm9tIFwiLi4vbWVzc2FnZXMvdXRpbHMuanNcIjtcbmltcG9ydCB7IEdlbmVyYXRpb25DaHVuaywgQ2hhdEdlbmVyYXRpb25DaHVuaywgfSBmcm9tIFwiLi4vb3V0cHV0cy5qc1wiO1xuLyoqXG4gKiBDbGFzcyB0byBwYXJzZSB0aGUgb3V0cHV0IG9mIGFuIExMTSBjYWxsIHRoYXQgYWxzbyBhbGxvd3Mgc3RyZWFtaW5nIGlucHV0cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlT3V0cHV0UGFyc2VyIHtcbiAgICBhc3luYyAqX3RyYW5zZm9ybShpbnB1dEdlbmVyYXRvcikge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNodW5rID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wYXJzZVJlc3VsdChbeyB0ZXh0OiBjaHVuayB9XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnBhcnNlUmVzdWx0KFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLl9iYXNlTWVzc2FnZVRvU3RyaW5nKGNodW5rKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm1zIGFuIGFzeW5jaHJvbm91cyBnZW5lcmF0b3Igb2YgaW5wdXQgaW50byBhbiBhc3luY2hyb25vdXNcbiAgICAgKiBnZW5lcmF0b3Igb2YgcGFyc2VkIG91dHB1dC5cbiAgICAgKiBAcGFyYW0gaW5wdXRHZW5lcmF0b3IgQW4gYXN5bmNocm9ub3VzIGdlbmVyYXRvciBvZiBpbnB1dC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBIGNvbmZpZ3VyYXRpb24gb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIEFuIGFzeW5jaHJvbm91cyBnZW5lcmF0b3Igb2YgcGFyc2VkIG91dHB1dC5cbiAgICAgKi9cbiAgICBhc3luYyAqdHJhbnNmb3JtKGlucHV0R2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHlpZWxkKiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGlucHV0R2VuZXJhdG9yLCB0aGlzLl90cmFuc2Zvcm0uYmluZCh0aGlzKSwge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIHJ1blR5cGU6IFwicGFyc2VyXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQSBiYXNlIGNsYXNzIGZvciBvdXRwdXQgcGFyc2VycyB0aGF0IGNhbiBoYW5kbGUgc3RyZWFtaW5nIGlucHV0LiBJdFxuICogZXh0ZW5kcyB0aGUgYEJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXJgIGNsYXNzIGFuZCBwcm92aWRlcyBhIG1ldGhvZCBmb3JcbiAqIGNvbnZlcnRpbmcgcGFyc2VkIG91dHB1dHMgaW50byBhIGRpZmYgZm9ybWF0LlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUN1bXVsYXRpdmVUcmFuc2Zvcm1PdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZGlmZlwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGlmZiA9IGZpZWxkcz8uZGlmZiA/PyB0aGlzLmRpZmY7XG4gICAgfVxuICAgIGFzeW5jICpfdHJhbnNmb3JtKGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgIGxldCBwcmV2UGFyc2VkO1xuICAgICAgICBsZXQgYWNjR2VuO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNodW5rICE9PSBcInN0cmluZ1wiICYmIHR5cGVvZiBjaHVuay5jb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhbmRsZSBub24tc3RyaW5nIG91dHB1dC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY2h1bmtHZW47XG4gICAgICAgICAgICBpZiAoaXNCYXNlTWVzc2FnZUNodW5rKGNodW5rKSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2h1bmsuY29udGVudCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaGFuZGxlIG5vbi1zdHJpbmcgbWVzc2FnZSBvdXRwdXQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaHVua0dlbiA9IG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2h1bmssXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGNodW5rLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0Jhc2VNZXNzYWdlKGNodW5rKSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2h1bmsuY29udGVudCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaGFuZGxlIG5vbi1zdHJpbmcgbWVzc2FnZSBvdXRwdXQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaHVua0dlbiA9IG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY29udmVydFRvQ2h1bmsoY2h1bmspLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjaHVuay5jb250ZW50LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2h1bmtHZW4gPSBuZXcgR2VuZXJhdGlvbkNodW5rKHsgdGV4dDogY2h1bmsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWNjR2VuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBhY2NHZW4gPSBjaHVua0dlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFjY0dlbiA9IGFjY0dlbi5jb25jYXQoY2h1bmtHZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gYXdhaXQgdGhpcy5wYXJzZVBhcnRpYWxSZXN1bHQoW2FjY0dlbl0pO1xuICAgICAgICAgICAgaWYgKHBhcnNlZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgcGFyc2VkICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgIWRlZXBDb21wYXJlU3RyaWN0KHBhcnNlZCwgcHJldlBhcnNlZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaWZmKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuX2RpZmYocHJldlBhcnNlZCwgcGFyc2VkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHBhcnNlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJldlBhcnNlZCA9IHBhcnNlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJkZWVwQ29tcGFyZVN0cmljdCIsIkJhc2VPdXRwdXRQYXJzZXIiLCJpc0Jhc2VNZXNzYWdlIiwiaXNCYXNlTWVzc2FnZUNodW5rIiwiY29udmVydFRvQ2h1bmsiLCJHZW5lcmF0aW9uQ2h1bmsiLCJDaGF0R2VuZXJhdGlvbkNodW5rIiwiQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciIsIl90cmFuc2Zvcm0iLCJpbnB1dEdlbmVyYXRvciIsImNodW5rIiwicGFyc2VSZXN1bHQiLCJ0ZXh0IiwibWVzc2FnZSIsIl9iYXNlTWVzc2FnZVRvU3RyaW5nIiwidHJhbnNmb3JtIiwib3B0aW9ucyIsIl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnIiwiYmluZCIsInJ1blR5cGUiLCJCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImRpZmYiLCJwcmV2UGFyc2VkIiwiYWNjR2VuIiwiY29udGVudCIsIkVycm9yIiwiY2h1bmtHZW4iLCJ1bmRlZmluZWQiLCJjb25jYXQiLCJwYXJzZWQiLCJwYXJzZVBhcnRpYWxSZXN1bHQiLCJfZGlmZiIsImdldEZvcm1hdEluc3RydWN0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/xml.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/xml.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XMLOutputParser: () => (/* binding */ XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* binding */ XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   parseXMLMarkdown: () => (/* binding */ parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/json_patch.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n/* harmony import */ var _utils_sax_js_sax_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/sax-js/sax.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js\");\n\n\n\nconst XML_FORMAT_INSTRUCTIONS = `The output should be formatted as a XML file.\n1. Output should conform to the tags below. \n2. If tags are not given, make them on your own.\n3. Remember to always open and close all the tags.\n\nAs an example, for the tags [\"foo\", \"bar\", \"baz\"]:\n1. String \"<foo>\\n   <bar>\\n      <baz></baz>\\n   </bar>\\n</foo>\" is a well-formatted instance of the schema. \n2. String \"<foo>\\n   <bar>\\n   </foo>\" is a badly-formatted instance.\n3. String \"<foo>\\n   <tag>\\n   </tag>\\n</foo>\" is a badly-formatted instance.\n\nHere are the output tags:\n\\`\\`\\`\n{tags}\n\\`\\`\\``;\nclass XMLOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseCumulativeTransformOutputParser {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.tags = fields?.tags;\n    }\n    static lc_name() {\n        return \"XMLOutputParser\";\n    }\n    _diff(prev, next) {\n        if (!next) {\n            return undefined;\n        }\n        if (!prev) {\n            return [\n                {\n                    op: \"replace\",\n                    path: \"\",\n                    value: next\n                }\n            ];\n        }\n        return (0,_utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__.compare)(prev, next);\n    }\n    async parsePartialResult(generations) {\n        return parseXMLMarkdown(generations[0].text);\n    }\n    async parse(text) {\n        return parseXMLMarkdown(text);\n    }\n    getFormatInstructions() {\n        const withTags = !!(this.tags && this.tags.length > 0);\n        return withTags ? XML_FORMAT_INSTRUCTIONS.replace(\"{tags}\", this.tags?.join(\", \") ?? \"\") : XML_FORMAT_INSTRUCTIONS;\n    }\n}\nconst strip = (text)=>text.split(\"\\n\").map((line)=>line.replace(/^\\s+/, \"\")).join(\"\\n\").trim();\nconst parseParsedResult = (input)=>{\n    if (Object.keys(input).length === 0) {\n        return {};\n    }\n    const result = {};\n    if (input.children.length > 0) {\n        result[input.name] = input.children.map(parseParsedResult);\n        return result;\n    } else {\n        result[input.name] = input.text ?? undefined;\n        return result;\n    }\n};\nfunction parseXMLMarkdown(s) {\n    const cleanedString = strip(s);\n    const parser = _utils_sax_js_sax_js__WEBPACK_IMPORTED_MODULE_2__.sax.parser(true);\n    let parsedResult = {};\n    const elementStack = [];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.onopentag = (node)=>{\n        const element = {\n            name: node.name,\n            attributes: node.attributes,\n            children: [],\n            text: \"\",\n            isSelfClosing: node.isSelfClosing\n        };\n        if (elementStack.length > 0) {\n            const parentElement = elementStack[elementStack.length - 1];\n            parentElement.children.push(element);\n        } else {\n            parsedResult = element;\n        }\n        if (!node.isSelfClosing) {\n            elementStack.push(element);\n        }\n    };\n    parser.onclosetag = ()=>{\n        if (elementStack.length > 0) {\n            const lastElement = elementStack.pop();\n            if (elementStack.length === 0 && lastElement) {\n                parsedResult = lastElement;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.ontext = (text)=>{\n        if (elementStack.length > 0) {\n            const currentElement = elementStack[elementStack.length - 1];\n            currentElement.text += text;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.onattribute = (attr)=>{\n        if (elementStack.length > 0) {\n            const currentElement = elementStack[elementStack.length - 1];\n            currentElement.attributes[attr.name] = attr.value;\n        }\n    };\n    // Try to find XML string within triple backticks.\n    const match = /```(xml)?(.*)```/s.exec(cleanedString);\n    const xmlString = match ? match[2] : cleanedString;\n    parser.write(xmlString).close();\n    // Remove the XML declaration if present\n    if (parsedResult && parsedResult.name === \"?xml\") {\n        parsedResult = parsedResult.children[0];\n    }\n    return parseParsedResult(parsedResult);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMveG1sLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFzRTtBQUNyQjtBQUNKO0FBQ3RDLE1BQU1HLDBCQUEwQixDQUFDOzs7Ozs7Ozs7Ozs7O01BYWxDLENBQUMsQ0FBQztBQUNELE1BQU1DLHdCQUF3QkosOEVBQW1DQTtJQUNwRUssWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQWlCO1FBQy9DO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSxJQUFJLENBQUNDLElBQUksR0FBR1AsUUFBUU87SUFDeEI7SUFDQSxPQUFPQyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLE1BQU1DLElBQUksRUFBRUMsSUFBSSxFQUFFO1FBQ2QsSUFBSSxDQUFDQSxNQUFNO1lBQ1AsT0FBT0M7UUFDWDtRQUNBLElBQUksQ0FBQ0YsTUFBTTtZQUNQLE9BQU87Z0JBQUM7b0JBQUVHLElBQUk7b0JBQVdDLE1BQU07b0JBQUlSLE9BQU9LO2dCQUFLO2FBQUU7UUFDckQ7UUFDQSxPQUFPaEIsNkRBQU9BLENBQUNlLE1BQU1DO0lBQ3pCO0lBQ0EsTUFBTUksbUJBQW1CQyxXQUFXLEVBQUU7UUFDbEMsT0FBT0MsaUJBQWlCRCxXQUFXLENBQUMsRUFBRSxDQUFDRSxJQUFJO0lBQy9DO0lBQ0EsTUFBTUMsTUFBTUQs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S0FBSyxDQUFDLEVBQUUsR0FBR2xCO0lBQ3JDQyxPQUFPb0IsS0FBSyxDQUFDRCxXQUFXRSxLQUFLO0lBQzdCLHdDQUF3QztJQUN4QyxJQUFJcEIsZ0JBQWdCQSxhQUFhSixJQUFJLEtBQUssUUFBUTtRQUM5Q0ksZUFBZUEsYUFBYUwsUUFBUSxDQUFDLEVBQUU7SUFDM0M7SUFDQSxPQUFPSixrQkFBa0JTO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy94bWwuanM/ZGQ0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciwgfSBmcm9tIFwiLi90cmFuc2Zvcm0uanNcIjtcbmltcG9ydCB7IGNvbXBhcmUgfSBmcm9tIFwiLi4vdXRpbHMvanNvbl9wYXRjaC5qc1wiO1xuaW1wb3J0IHsgc2F4IH0gZnJvbSBcIi4uL3V0aWxzL3NheC1qcy9zYXguanNcIjtcbmV4cG9ydCBjb25zdCBYTUxfRk9STUFUX0lOU1RSVUNUSU9OUyA9IGBUaGUgb3V0cHV0IHNob3VsZCBiZSBmb3JtYXR0ZWQgYXMgYSBYTUwgZmlsZS5cbjEuIE91dHB1dCBzaG91bGQgY29uZm9ybSB0byB0aGUgdGFncyBiZWxvdy4gXG4yLiBJZiB0YWdzIGFyZSBub3QgZ2l2ZW4sIG1ha2UgdGhlbSBvbiB5b3VyIG93bi5cbjMuIFJlbWVtYmVyIHRvIGFsd2F5cyBvcGVuIGFuZCBjbG9zZSBhbGwgdGhlIHRhZ3MuXG5cbkFzIGFuIGV4YW1wbGUsIGZvciB0aGUgdGFncyBbXCJmb29cIiwgXCJiYXJcIiwgXCJiYXpcIl06XG4xLiBTdHJpbmcgXCI8Zm9vPlxcbiAgIDxiYXI+XFxuICAgICAgPGJhej48L2Jhej5cXG4gICA8L2Jhcj5cXG48L2Zvbz5cIiBpcyBhIHdlbGwtZm9ybWF0dGVkIGluc3RhbmNlIG9mIHRoZSBzY2hlbWEuIFxuMi4gU3RyaW5nIFwiPGZvbz5cXG4gICA8YmFyPlxcbiAgIDwvZm9vPlwiIGlzIGEgYmFkbHktZm9ybWF0dGVkIGluc3RhbmNlLlxuMy4gU3RyaW5nIFwiPGZvbz5cXG4gICA8dGFnPlxcbiAgIDwvdGFnPlxcbjwvZm9vPlwiIGlzIGEgYmFkbHktZm9ybWF0dGVkIGluc3RhbmNlLlxuXG5IZXJlIGFyZSB0aGUgb3V0cHV0IHRhZ3M6XG5cXGBcXGBcXGBcbnt0YWdzfVxuXFxgXFxgXFxgYDtcbmV4cG9ydCBjbGFzcyBYTUxPdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcIm91dHB1dF9wYXJzZXJzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGFncyA9IGZpZWxkcz8udGFncztcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlhNTE91dHB1dFBhcnNlclwiO1xuICAgIH1cbiAgICBfZGlmZihwcmV2LCBuZXh0KSB7XG4gICAgICAgIGlmICghbmV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByZXYpIHtcbiAgICAgICAgICAgIHJldHVybiBbeyBvcDogXCJyZXBsYWNlXCIsIHBhdGg6IFwiXCIsIHZhbHVlOiBuZXh0IH1dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wYXJlKHByZXYsIG5leHQpO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZVBhcnRpYWxSZXN1bHQoZ2VuZXJhdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlWE1MTWFya2Rvd24oZ2VuZXJhdGlvbnNbMF0udGV4dCk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlWE1MTWFya2Rvd24odGV4dCk7XG4gICAgfVxuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgY29uc3Qgd2l0aFRhZ3MgPSAhISh0aGlzLnRhZ3MgJiYgdGhpcy50YWdzLmxlbmd0aCA+IDApO1xuICAgICAgICByZXR1cm4gd2l0aFRhZ3NcbiAgICAgICAgICAgID8gWE1MX0ZPUk1BVF9JTlNUUlVDVElPTlMucmVwbGFjZShcInt0YWdzfVwiLCB0aGlzLnRhZ3M/LmpvaW4oXCIsIFwiKSA/PyBcIlwiKVxuICAgICAgICAgICAgOiBYTUxfRk9STUFUX0lOU1RSVUNUSU9OUztcbiAgICB9XG59XG5jb25zdCBzdHJpcCA9ICh0ZXh0KSA9PiB0ZXh0XG4gICAgLnNwbGl0KFwiXFxuXCIpXG4gICAgLm1hcCgobGluZSkgPT4gbGluZS5yZXBsYWNlKC9eXFxzKy8sIFwiXCIpKVxuICAgIC5qb2luKFwiXFxuXCIpXG4gICAgLnRyaW0oKTtcbmNvbnN0IHBhcnNlUGFyc2VkUmVzdWx0ID0gKGlucHV0KSA9PiB7XG4gICAgaWYgKE9iamVjdC5rZXlzKGlucHV0KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBpZiAoaW5wdXQuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICByZXN1bHRbaW5wdXQubmFtZV0gPSBpbnB1dC5jaGlsZHJlbi5tYXAocGFyc2VQYXJzZWRSZXN1bHQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2lucHV0Lm5hbWVdID0gaW5wdXQudGV4dCA/PyB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVhNTE1hcmtkb3duKHMpIHtcbiAgICBjb25zdCBjbGVhbmVkU3RyaW5nID0gc3RyaXAocyk7XG4gICAgY29uc3QgcGFyc2VyID0gc2F4LnBhcnNlcih0cnVlKTtcbiAgICBsZXQgcGFyc2VkUmVzdWx0ID0ge307XG4gICAgY29uc3QgZWxlbWVudFN0YWNrID0gW107XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBwYXJzZXIub25vcGVudGFnID0gKG5vZGUpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5vZGUubmFtZSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IG5vZGUuYXR0cmlidXRlcyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICBpc1NlbGZDbG9zaW5nOiBub2RlLmlzU2VsZkNsb3NpbmcsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlbGVtZW50U3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50RWxlbWVudCA9IGVsZW1lbnRTdGFja1tlbGVtZW50U3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBwYXJlbnRFbGVtZW50LmNoaWxkcmVuLnB1c2goZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJzZWRSZXN1bHQgPSBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICghbm9kZS5pc1NlbGZDbG9zaW5nKSB7XG4gICAgICAgICAgICBlbGVtZW50U3RhY2sucHVzaChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcGFyc2VyLm9uY2xvc2V0YWcgPSAoKSA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50U3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgbGFzdEVsZW1lbnQgPSBlbGVtZW50U3RhY2sucG9wKCk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudFN0YWNrLmxlbmd0aCA9PT0gMCAmJiBsYXN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHBhcnNlZFJlc3VsdCA9IGxhc3RFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHBhcnNlci5vbnRleHQgPSAodGV4dCkgPT4ge1xuICAgICAgICBpZiAoZWxlbWVudFN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFbGVtZW50ID0gZWxlbWVudFN0YWNrW2VsZW1lbnRTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50LnRleHQgKz0gdGV4dDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBwYXJzZXIub25hdHRyaWJ1dGUgPSAoYXR0cikgPT4ge1xuICAgICAgICBpZiAoZWxlbWVudFN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFbGVtZW50ID0gZWxlbWVudFN0YWNrW2VsZW1lbnRTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50LmF0dHJpYnV0ZXNbYXR0ci5uYW1lXSA9IGF0dHIudmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIFRyeSB0byBmaW5kIFhNTCBzdHJpbmcgd2l0aGluIHRyaXBsZSBiYWNrdGlja3MuXG4gICAgY29uc3QgbWF0Y2ggPSAvYGBgKHhtbCk/KC4qKWBgYC9zLmV4ZWMoY2xlYW5lZFN0cmluZyk7XG4gICAgY29uc3QgeG1sU3RyaW5nID0gbWF0Y2ggPyBtYXRjaFsyXSA6IGNsZWFuZWRTdHJpbmc7XG4gICAgcGFyc2VyLndyaXRlKHhtbFN0cmluZykuY2xvc2UoKTtcbiAgICAvLyBSZW1vdmUgdGhlIFhNTCBkZWNsYXJhdGlvbiBpZiBwcmVzZW50XG4gICAgaWYgKHBhcnNlZFJlc3VsdCAmJiBwYXJzZWRSZXN1bHQubmFtZSA9PT0gXCI/eG1sXCIpIHtcbiAgICAgICAgcGFyc2VkUmVzdWx0ID0gcGFyc2VkUmVzdWx0LmNoaWxkcmVuWzBdO1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VQYXJzZWRSZXN1bHQocGFyc2VkUmVzdWx0KTtcbn1cbiJdLCJuYW1lcyI6WyJCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciIsImNvbXBhcmUiLCJzYXgiLCJYTUxfRk9STUFUX0lOU1RSVUNUSU9OUyIsIlhNTE91dHB1dFBhcnNlciIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInRhZ3MiLCJsY19uYW1lIiwiX2RpZmYiLCJwcmV2IiwibmV4dCIsInVuZGVmaW5lZCIsIm9wIiwicGF0aCIsInBhcnNlUGFydGlhbFJlc3VsdCIsImdlbmVyYXRpb25zIiwicGFyc2VYTUxNYXJrZG93biIsInRleHQiLCJwYXJzZSIsImdldEZvcm1hdEluc3RydWN0aW9ucyIsIndpdGhUYWdzIiwibGVuZ3RoIiwicmVwbGFjZSIsImpvaW4iLCJzdHJpcCIsInNwbGl0IiwibWFwIiwibGluZSIsInRyaW0iLCJwYXJzZVBhcnNlZFJlc3VsdCIsImlucHV0Iiwia2V5cyIsInJlc3VsdCIsImNoaWxkcmVuIiwibmFtZSIsInMiLCJjbGVhbmVkU3RyaW5nIiwicGFyc2VyIiwicGFyc2VkUmVzdWx0IiwiZWxlbWVudFN0YWNrIiwib25vcGVudGFnIiwibm9kZSIsImVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwiaXNTZWxmQ2xvc2luZyIsInBhcmVudEVsZW1lbnQiLCJwdXNoIiwib25jbG9zZXRhZyIsImxhc3RFbGVtZW50IiwicG9wIiwib250ZXh0IiwiY3VycmVudEVsZW1lbnQiLCJvbmF0dHJpYnV0ZSIsImF0dHIiLCJtYXRjaCIsImV4ZWMiLCJ4bWxTdHJpbmciLCJ3cml0ZSIsImNsb3NlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/xml.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/outputs.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/core/dist/outputs.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* binding */ ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* binding */ GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* binding */ RUN_KEY)\n/* harmony export */ });\nconst RUN_KEY = \"__run\";\n/**\n * Chunk of a single generation. Used for streaming.\n */ class GenerationChunk {\n    constructor(fields){\n        Object.defineProperty(this, \"text\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"generationInfo\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.text = fields.text;\n        this.generationInfo = fields.generationInfo;\n    }\n    concat(chunk) {\n        return new GenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            }\n        });\n    }\n}\nclass ChatGenerationChunk extends GenerationChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"message\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.message = fields.message;\n    }\n    concat(chunk) {\n        return new ChatGenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            },\n            message: this.message.concat(chunk.message)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxVQUFVLFFBQVE7QUFDL0I7O0NBRUMsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsOERBQThEO1FBQzlETCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGtCQUFrQjtZQUMxQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxJQUFJLEdBQUdQLE9BQU9PLElBQUk7UUFDdkIsSUFBSSxDQUFDQyxjQUFjLEdBQUdSLE9BQU9RLGNBQWM7SUFDL0M7SUFDQUMsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJWixnQkFBZ0I7WUFDdkJTLE1BQU0sSUFBSSxDQUFDQSxJQUFJLEdBQUdHLE1BQU1ILElBQUk7WUFDNUJDLGdCQUFnQjtnQkFDWixHQUFHLElBQUksQ0FBQ0EsY0FBYztnQkFDdEIsR0FBR0UsTUFBTUYsY0FBYztZQUMzQjtRQUNKO0lBQ0o7QUFDSjtBQUNPLE1BQU1HLDRCQUE0QmI7SUFDckNDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTSxPQUFPLEdBQUdaLE9BQU9ZLE9BQU87SUFDakM7SUFDQUgsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJQyxvQkFBb0I7WUFDM0JKLE1BQU0sSUFBSSxDQUFDQSxJQUFJLEdBQUdHLE1BQU1ILElBQUk7WUFDNUJDLGdCQUFnQjtnQkFDWixHQUFHLElBQUksQ0FBQ0EsY0FBYztnQkFDdEIsR0FBR0UsTUFBTUYsY0FBYztZQUMzQjtZQUNBSSxTQUFTLElBQUksQ0FBQ0EsT0FBTyxDQUFDSCxNQUFNLENBQUNDLE1BQU1FLE9BQU87UUFDOUM7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRzLmpzP2Q3ODAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFJVTl9LRVkgPSBcIl9fcnVuXCI7XG4vKipcbiAqIENodW5rIG9mIGEgc2luZ2xlIGdlbmVyYXRpb24uIFVzZWQgZm9yIHN0cmVhbWluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIEdlbmVyYXRpb25DaHVuayB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRleHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2VuZXJhdGlvbkluZm9cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50ZXh0ID0gZmllbGRzLnRleHQ7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGlvbkluZm8gPSBmaWVsZHMuZ2VuZXJhdGlvbkluZm87XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgICAgICB0ZXh0OiB0aGlzLnRleHQgKyBjaHVuay50ZXh0LFxuICAgICAgICAgICAgZ2VuZXJhdGlvbkluZm86IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgIC4uLmNodW5rLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENoYXRHZW5lcmF0aW9uQ2h1bmsgZXh0ZW5kcyBHZW5lcmF0aW9uQ2h1bmsge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGZpZWxkcy5tZXNzYWdlO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dCArIGNodW5rLnRleHQsXG4gICAgICAgICAgICBnZW5lcmF0aW9uSW5mbzoge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgLi4uY2h1bmsuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLmNvbmNhdChjaHVuay5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlJVTl9LRVkiLCJHZW5lcmF0aW9uQ2h1bmsiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJ0ZXh0IiwiZ2VuZXJhdGlvbkluZm8iLCJjb25jYXQiLCJjaHVuayIsIkNoYXRHZW5lcmF0aW9uQ2h1bmsiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompt_values.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompt_values.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptValue: () => (/* binding */ BasePromptValue),\n/* harmony export */   ChatPromptValue: () => (/* binding */ ChatPromptValue),\n/* harmony export */   ImagePromptValue: () => (/* binding */ ImagePromptValue),\n/* harmony export */   StringPromptValue: () => (/* binding */ StringPromptValue)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _messages_human_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/human.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./messages/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n\n\n\n/**\n * Base PromptValue class. All prompt values should extend this class.\n */ class BasePromptValue extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n}\n/**\n * Represents a prompt value as a string. It extends the BasePromptValue\n * class and overrides the toString and toChatMessages methods.\n */ class StringPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"StringPromptValue\";\n    }\n    constructor(value){\n        super({\n            value\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    toChatMessages() {\n        return [\n            new _messages_human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(this.value)\n        ];\n    }\n}\n/**\n * Class that represents a chat prompt value. It extends the\n * BasePromptValue and includes an array of BaseMessage instances.\n */ class ChatPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ChatPromptValue\";\n    }\n    constructor(fields){\n        if (Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                messages: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"messages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.messages = fields.messages;\n    }\n    toString() {\n        return (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_2__.getBufferString)(this.messages);\n    }\n    toChatMessages() {\n        return this.messages;\n    }\n}\n/**\n * Class that represents an image prompt value. It extends the\n * BasePromptValue and includes an ImageURL instance.\n */ class ImagePromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ImagePromptValue\";\n    }\n    constructor(fields){\n        if (!(\"imageUrl\" in fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                imageUrl: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"imageUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @ignore */ Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.imageUrl = fields.imageUrl;\n    }\n    toString() {\n        return this.imageUrl.url;\n    }\n    toChatMessages() {\n        return [\n            new _messages_human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage({\n                content: [\n                    {\n                        type: \"image_url\",\n                        image_url: {\n                            detail: this.imageUrl.detail,\n                            url: this.imageUrl.url\n                        }\n                    }\n                ]\n            })\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0X3ZhbHVlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXNEO0FBQ0g7QUFDRztBQUN0RDs7Q0FFQyxHQUNNLE1BQU1HLHdCQUF3QkgsK0RBQVlBO0FBQ2pEO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUksMEJBQTBCRDtJQUNuQyxPQUFPRSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUssQ0FBQztZQUFFQTtRQUFNO1FBQ2RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQSxLQUFLLEdBQUdBO0lBQ2pCO0lBQ0FNLFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQ04sS0FBSztJQUNyQjtJQUNBTyxpQkFBaUI7UUFDYixPQUFPO1lBQUMsSUFBSWIsNERBQVlBLENBQUMsSUFBSSxDQUFDTSxLQUFLO1NBQUU7SUFDekM7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1RLHdCQUF3Qlo7SUFDakMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZVSxNQUFNLENBQUU7UUFDaEIsSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixTQUFTO1lBQ3ZCLDZDQUE2QztZQUM3Q0EsU0FBUztnQkFBRUcsVUFBVUg7WUFBTztRQUNoQztRQUNBLEtBQUssQ0FBQ0E7UUFDTlIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQWdCO1FBQzlDO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO1FBQ1g7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNZLFFBQVEsR0FBR0gsT0FBT0csUUFBUTtJQUNuQztJQUNBTixXQUFXO1FBQ1AsT0FBT1gsbUVBQWVBLENBQUMsSUFBSSxDQUFDaUIsUUFBUTtJQUN4QztJQUNBTCxpQkFBaUI7UUFDYixPQUFPLElBQUksQ0FBQ0ssUUFBUTtJQUN4QjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUMseUJBQXlCakI7SUFDbEMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZVSxNQUFNLENBQUU7UUFDaEIsSUFBSSxDQUFFLGVBQWNBLE1BQUssR0FBSTtZQUN6Qiw2Q0FBNkM7WUFDN0NBLFNBQVM7Z0JBQUVLLFVBQVVMO1lBQU87UUFDaEM7UUFDQSxLQUFLLENBQUNBO1FBQ05SLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsWUFBWSxHQUNaQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ2MsUUFBUSxHQUFHTCxPQUFPSyxRQUFRO0lBQ25DO0lBQ0FSLFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQ1EsUUFBUSxDQUFDQyxHQUFHO0lBQzVCO0lBQ0FSLGlCQUFpQjtRQUNiLE9BQU87WUFDSCxJQUFJYiw0REFBWUEsQ0FBQztnQkFDYnNCLFNBQVM7b0JBQ0w7d0JBQ0lDLE1BQU07d0JBQ05DLFdBQVc7NEJBQ1BDLFFBQVEsSUFBSSxDQUFDTCxRQUFRLENBQUNLLE1BQU07NEJBQzVCSixLQUFLLElBQUksQ0FBQ0QsUUFBUSxDQUFDQyxHQUFHO3dCQUMxQjtvQkFDSjtpQkFDSDtZQUNMO1NBQ0g7SUFDTDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRfdmFsdWVzLmpzPzAzMjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmltcG9ydCB7IEh1bWFuTWVzc2FnZSB9IGZyb20gXCIuL21lc3NhZ2VzL2h1bWFuLmpzXCI7XG5pbXBvcnQgeyBnZXRCdWZmZXJTdHJpbmcgfSBmcm9tIFwiLi9tZXNzYWdlcy91dGlscy5qc1wiO1xuLyoqXG4gKiBCYXNlIFByb21wdFZhbHVlIGNsYXNzLiBBbGwgcHJvbXB0IHZhbHVlcyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUHJvbXB0VmFsdWUgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcHJvbXB0IHZhbHVlIGFzIGEgc3RyaW5nLiBJdCBleHRlbmRzIHRoZSBCYXNlUHJvbXB0VmFsdWVcbiAqIGNsYXNzIGFuZCBvdmVycmlkZXMgdGhlIHRvU3RyaW5nIGFuZCB0b0NoYXRNZXNzYWdlcyBtZXRob2RzLlxuICovXG5leHBvcnQgY2xhc3MgU3RyaW5nUHJvbXB0VmFsdWUgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTdHJpbmdQcm9tcHRWYWx1ZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xuICAgICAgICBzdXBlcih7IHZhbHVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicHJvbXB0X3ZhbHVlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG4gICAgdG9DaGF0TWVzc2FnZXMoKSB7XG4gICAgICAgIHJldHVybiBbbmV3IEh1bWFuTWVzc2FnZSh0aGlzLnZhbHVlKV07XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBjaGF0IHByb21wdCB2YWx1ZS4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VQcm9tcHRWYWx1ZSBhbmQgaW5jbHVkZXMgYW4gYXJyYXkgb2YgQmFzZU1lc3NhZ2UgaW5zdGFuY2VzLlxuICovXG5leHBvcnQgY2xhc3MgQ2hhdFByb21wdFZhbHVlIGV4dGVuZHMgQmFzZVByb21wdFZhbHVlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hhdFByb21wdFZhbHVlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZHMpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgbWVzc2FnZXM6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRfdmFsdWVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1lc3NhZ2VzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWVzc2FnZXMgPSBmaWVsZHMubWVzc2FnZXM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gZ2V0QnVmZmVyU3RyaW5nKHRoaXMubWVzc2FnZXMpO1xuICAgIH1cbiAgICB0b0NoYXRNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXM7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2UgcHJvbXB0IHZhbHVlLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZVByb21wdFZhbHVlIGFuZCBpbmNsdWRlcyBhbiBJbWFnZVVSTCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEltYWdlUHJvbXB0VmFsdWUgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJJbWFnZVByb21wdFZhbHVlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAoIShcImltYWdlVXJsXCIgaW4gZmllbGRzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGltYWdlVXJsOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicHJvbXB0X3ZhbHVlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbWFnZVVybFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogQGlnbm9yZSAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gZmllbGRzLmltYWdlVXJsO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VVcmwudXJsO1xuICAgIH1cbiAgICB0b0NoYXRNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG5ldyBIdW1hbk1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDogdGhpcy5pbWFnZVVybC5kZXRhaWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLmltYWdlVXJsLnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJTZXJpYWxpemFibGUiLCJIdW1hbk1lc3NhZ2UiLCJnZXRCdWZmZXJTdHJpbmciLCJCYXNlUHJvbXB0VmFsdWUiLCJTdHJpbmdQcm9tcHRWYWx1ZSIsImxjX25hbWUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ0b1N0cmluZyIsInRvQ2hhdE1lc3NhZ2VzIiwiQ2hhdFByb21wdFZhbHVlIiwiZmllbGRzIiwiQXJyYXkiLCJpc0FycmF5IiwibWVzc2FnZXMiLCJJbWFnZVByb21wdFZhbHVlIiwiaW1hZ2VVcmwiLCJ1cmwiLCJjb250ZW50IiwidHlwZSIsImltYWdlX3VybCIsImRldGFpbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/base.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/base.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptTemplate: () => (/* binding */ BasePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\n\n/**\n * Base class for prompt templates. Exposes a format method that returns a\n * string prompt given a set of input values.\n */ class BasePromptTemplate extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    get lc_attributes() {\n        return {\n            partialVariables: undefined\n        };\n    }\n    constructor(input){\n        super(input);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompts\",\n                this._getPromptType()\n            ]\n        });\n        Object.defineProperty(this, \"inputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"partialVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Metadata to be used for tracing.\n         */ Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Tags to be used for tracing. */ Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { inputVariables } = input;\n        if (inputVariables.includes(\"stop\")) {\n            throw new Error(\"Cannot have an input variable named 'stop', as it is used internally, please rename.\");\n        }\n        Object.assign(this, input);\n    }\n    /**\n     * Merges partial variables and user variables.\n     * @param userVariables The user variables to merge with the partial variables.\n     * @returns A Promise that resolves to an object containing the merged variables.\n     */ async mergePartialAndUserVariables(userVariables) {\n        const partialVariables = this.partialVariables ?? {};\n        const partialValues = {};\n        for (const [key, value] of Object.entries(partialVariables)){\n            if (typeof value === \"string\") {\n                partialValues[key] = value;\n            } else {\n                partialValues[key] = await value();\n            }\n        }\n        const allKwargs = {\n            ...partialValues,\n            ...userVariables\n        };\n        return allKwargs;\n    }\n    /**\n     * Invokes the prompt template with the given input and options.\n     * @param input The input to invoke the prompt template with.\n     * @param options Optional configuration for the callback.\n     * @returns A Promise that resolves to the output of the prompt template.\n     */ async invoke(input, options) {\n        const metadata = {\n            ...this.metadata,\n            ...options?.metadata\n        };\n        const tags = [\n            ...this.tags ?? [],\n            ...options?.tags ?? []\n        ];\n        return this._callWithConfig((input)=>this.formatPromptValue(input), input, {\n            ...options,\n            tags,\n            metadata,\n            runType: \"prompt\"\n        });\n    }\n    /**\n     * Return a json-like object representing this prompt template.\n     * @deprecated\n     */ serialize() {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n    /**\n     * @deprecated\n     * Load a prompt template from a json-like object describing it.\n     *\n     * @remarks\n     * Deserializing needs to be async because templates (e.g. {@link FewShotPromptTemplate}) can\n     * reference remote resources that we read asynchronously with a web\n     * request.\n     */ static async deserialize(data) {\n        switch(data._type){\n            case \"prompt\":\n                {\n                    const { PromptTemplate } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./prompt.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\"));\n                    return PromptTemplate.deserialize(data);\n                }\n            case undefined:\n                {\n                    const { PromptTemplate } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./prompt.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\"));\n                    return PromptTemplate.deserialize({\n                        ...data,\n                        _type: \"prompt\"\n                    });\n                }\n            case \"few_shot\":\n                {\n                    const { FewShotPromptTemplate } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./few_shot.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/few_shot.js\"));\n                    return FewShotPromptTemplate.deserialize(data);\n                }\n            default:\n                throw new Error(`Invalid prompt type in config: ${data._type}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsZ0VBQWdFO0FBQ2hFLHdFQUF3RTtBQUN4QjtBQUNoRDs7O0NBR0MsR0FDTSxNQUFNQywyQkFBMkJELHdEQUFRQTtJQUM1QyxJQUFJRSxnQkFBZ0I7UUFDaEIsT0FBTztZQUNIQyxrQkFBa0JDO1FBQ3RCO0lBQ0o7SUFDQUMsWUFBWUMsS0FBSyxDQUFFO1FBQ2YsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjtnQkFBVyxJQUFJLENBQUNDLGNBQWM7YUFBRztRQUMvRDtRQUNBTixPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGtCQUFrQjtZQUMxQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxvQkFBb0I7WUFDNUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBOztTQUVDLEdBQ0RMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsaUNBQWlDLEdBQ2pDTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLE1BQU0sRUFBRUUsY0FBYyxFQUFFLEdBQUdSO1FBQzNCLElBQUlRLGVBQWVDLFFBQVEsQ0FBQyxTQUFTO1lBQ2pDLE1BQU0sSUFBSUMsTUFBTTtRQUNwQjtRQUNBVCxPQUFPVSxNQUFNLENBQUMsSUFBSSxFQUFFWDtJQUN4QjtJQUNBOzs7O0tBSUMsR0FDRCxNQUFNWSw2QkFBNkJDLGFBQWEsRUFBRTtRQUM5QyxNQUFNaEIsbUJBQW1CLElBQUksQ0FBQ0EsZ0JBQWdCLElBQUksQ0FBQztRQUNuRCxNQUFNaUIsZ0JBQWdCLENBQUM7UUFDdkIsS0FBSyxNQUFNLENBQUNDLEtBQUtULE1BQU0sSUFBSUwsT0FBT2UsT0FBTyxDQUFDbkIsa0JBQW1CO1lBQ3pELElBQUksT0FBT1MsVUFBVSxVQUFVO2dCQUMzQlEsYUFBYSxDQUFDQyxJQUFJLEdBQUdUO1lBQ3pCLE9BQ0s7Z0JBQ0RRLGFBQWEsQ0FBQ0MsSUFBSSxHQUFHLE1BQU1UO1lBQy9CO1FBQ0o7UUFDQSxNQUFNVyxZQUFZO1lBQ2QsR0FBR0gsYUFBYTtZQUNoQixHQUFHRCxhQUFhO1FBQ3BCO1FBQ0EsT0FBT0k7SUFDWDtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTUMsT0FBT2xCLEtBQUssRUFBRW1CLE9BQU8sRUFBRTtRQUN6QixNQUFNQyxXQUFXO1lBQ2IsR0FBRyxJQUFJLENBQUNBLFFBQVE7WUFDaEIsR0FBR0QsU0FBU0MsUUFBUTtRQUN4QjtRQUNBLE1BQU1DLE9BQU87ZUFBSyxJQUFJLENBQUNBLElBQUksSUFBSSxFQUFFO2VBQU9GLFNBQVNFLFFBQVEsRUFBRTtTQUFFO1FBQzdELE9BQU8sSUFBSSxDQUFDQyxlQUFlLENBQUMsQ0FBQ3RCLFFBQVUsSUFBSSxDQUFDdUIsaUJBQWlCLENBQUN2QixRQUFRQSxPQUFPO1lBQUUsR0FBR21CLE9BQU87WUFBRUU7WUFBTUQ7WUFBVUksU0FBUztRQUFTO0lBQ2pJO0lBQ0E7OztLQUdDLEdBQ0RDLFlBQVk7UUFDUixNQUFNLElBQUlmLE1BQU07SUFDcEI7SUFDQTs7Ozs7Ozs7S0FRQyxHQUNELGFBQWFnQixZQUFZQyxJQUFJLEVBQUU7UUFDM0IsT0FBUUEsS0FBS0MsS0FBSztZQUNkLEtBQUs7Z0JBQVU7b0JBQ1gsTUFBTSxFQUFFQyxjQUFjLEVBQUUsR0FBRyxNQUFNLHNLQUFxQjtvQkFDdEQsT0FBT0EsZUFBZUgsV0FBVyxDQUFDQztnQkFDdEM7WUFDQSxLQUFLN0I7Z0JBQVc7b0JBQ1osTUFBTSxFQUFFK0IsY0FBYyxFQUFFLEdBQUcsTUFBTSxzS0FBcUI7b0JBQ3RELE9BQU9BLGVBQWVILFdBQVcsQ0FBQzt3QkFBRSxHQUFHQyxJQUFJO3dCQUFFQyxPQUFPO29CQUFTO2dCQUNqRTtZQUNBLEtBQUs7Z0JBQVk7b0JBQ2IsTUFBTSxFQUFFRSxxQkFBcUIsRUFBRSxHQUFHLE1BQU0sMEtBQXVCO29CQUMvRCxPQUFPQSxzQkFBc0JKLFdBQVcsQ0FBQ0M7Z0JBQzdDO1lBQ0E7Z0JBQ0ksTUFBTSxJQUFJakIsTUFBTSxDQUFDLCtCQUErQixFQUFFaUIsS0FBS0MsS0FBSyxDQUFDLENBQUM7UUFDdEU7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRzL2Jhc2UuanM/YjhhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZWZhdWx0IGdlbmVyaWMgXCJhbnlcIiB2YWx1ZXMgYXJlIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbi8vIFJlcGxhY2Ugd2l0aCBcInN0cmluZ1wiIHdoZW4gd2UgYXJlIGNvbWZvcnRhYmxlIHdpdGggYSBicmVha2luZyBjaGFuZ2UuXG5pbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBwcm9tcHQgdGVtcGxhdGVzLiBFeHBvc2VzIGEgZm9ybWF0IG1ldGhvZCB0aGF0IHJldHVybnMgYVxuICogc3RyaW5nIHByb21wdCBnaXZlbiBhIHNldCBvZiBpbnB1dCB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXJ0aWFsVmFyaWFibGVzOiB1bmRlZmluZWQsIC8vIHB5dGhvbiBkb2Vzbid0IHN1cHBvcnQgdGhpcyB5ZXRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoaW5wdXQpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRzXCIsIHRoaXMuX2dldFByb21wdFR5cGUoKV1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlucHV0VmFyaWFibGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm91dHB1dFBhcnNlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYXJ0aWFsVmFyaWFibGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNZXRhZGF0YSB0byBiZSB1c2VkIGZvciB0cmFjaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRhZ3MgdG8gYmUgdXNlZCBmb3IgdHJhY2luZy4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IGlucHV0VmFyaWFibGVzIH0gPSBpbnB1dDtcbiAgICAgICAgaWYgKGlucHV0VmFyaWFibGVzLmluY2x1ZGVzKFwic3RvcFwiKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhdmUgYW4gaW5wdXQgdmFyaWFibGUgbmFtZWQgJ3N0b3AnLCBhcyBpdCBpcyB1c2VkIGludGVybmFsbHksIHBsZWFzZSByZW5hbWUuXCIpO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgaW5wdXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXJnZXMgcGFydGlhbCB2YXJpYWJsZXMgYW5kIHVzZXIgdmFyaWFibGVzLlxuICAgICAqIEBwYXJhbSB1c2VyVmFyaWFibGVzIFRoZSB1c2VyIHZhcmlhYmxlcyB0byBtZXJnZSB3aXRoIHRoZSBwYXJ0aWFsIHZhcmlhYmxlcy5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgbWVyZ2VkIHZhcmlhYmxlcy5cbiAgICAgKi9cbiAgICBhc3luYyBtZXJnZVBhcnRpYWxBbmRVc2VyVmFyaWFibGVzKHVzZXJWYXJpYWJsZXMpIHtcbiAgICAgICAgY29uc3QgcGFydGlhbFZhcmlhYmxlcyA9IHRoaXMucGFydGlhbFZhcmlhYmxlcyA/PyB7fTtcbiAgICAgICAgY29uc3QgcGFydGlhbFZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwYXJ0aWFsVmFyaWFibGVzKSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHBhcnRpYWxWYWx1ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFydGlhbFZhbHVlc1trZXldID0gYXdhaXQgdmFsdWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGxLd2FyZ3MgPSB7XG4gICAgICAgICAgICAuLi5wYXJ0aWFsVmFsdWVzLFxuICAgICAgICAgICAgLi4udXNlclZhcmlhYmxlcyxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGFsbEt3YXJncztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgcHJvbXB0IHRlbXBsYXRlIHdpdGggdGhlIGdpdmVuIGlucHV0IGFuZCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gaW52b2tlIHRoZSBwcm9tcHQgdGVtcGxhdGUgd2l0aC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGUgY2FsbGJhY2suXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcHJvbXB0IHRlbXBsYXRlLlxuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMubWV0YWRhdGEsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5tZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdGFncyA9IFsuLi4odGhpcy50YWdzID8/IFtdKSwgLi4uKG9wdGlvbnM/LnRhZ3MgPz8gW10pXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKChpbnB1dCkgPT4gdGhpcy5mb3JtYXRQcm9tcHRWYWx1ZShpbnB1dCksIGlucHV0LCB7IC4uLm9wdGlvbnMsIHRhZ3MsIG1ldGFkYXRhLCBydW5UeXBlOiBcInByb21wdFwiIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBqc29uLWxpa2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGlzIHByb21wdCB0ZW1wbGF0ZS5cbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlIC50b0pTT04oKSBpbnN0ZWFkXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIExvYWQgYSBwcm9tcHQgdGVtcGxhdGUgZnJvbSBhIGpzb24tbGlrZSBvYmplY3QgZGVzY3JpYmluZyBpdC5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogRGVzZXJpYWxpemluZyBuZWVkcyB0byBiZSBhc3luYyBiZWNhdXNlIHRlbXBsYXRlcyAoZS5nLiB7QGxpbmsgRmV3U2hvdFByb21wdFRlbXBsYXRlfSkgY2FuXG4gICAgICogcmVmZXJlbmNlIHJlbW90ZSByZXNvdXJjZXMgdGhhdCB3ZSByZWFkIGFzeW5jaHJvbm91c2x5IHdpdGggYSB3ZWJcbiAgICAgKiByZXF1ZXN0LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShkYXRhKSB7XG4gICAgICAgIHN3aXRjaCAoZGF0YS5fdHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInByb21wdFwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBQcm9tcHRUZW1wbGF0ZSB9ID0gYXdhaXQgaW1wb3J0KFwiLi9wcm9tcHQuanNcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21wdFRlbXBsYXRlLmRlc2VyaWFsaXplKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSB1bmRlZmluZWQ6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IFByb21wdFRlbXBsYXRlIH0gPSBhd2FpdCBpbXBvcnQoXCIuL3Byb21wdC5qc1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbXB0VGVtcGxhdGUuZGVzZXJpYWxpemUoeyAuLi5kYXRhLCBfdHlwZTogXCJwcm9tcHRcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJmZXdfc2hvdFwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBGZXdTaG90UHJvbXB0VGVtcGxhdGUgfSA9IGF3YWl0IGltcG9ydChcIi4vZmV3X3Nob3QuanNcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEZld1Nob3RQcm9tcHRUZW1wbGF0ZS5kZXNlcmlhbGl6ZShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHByb21wdCB0eXBlIGluIGNvbmZpZzogJHtkYXRhLl90eXBlfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlJ1bm5hYmxlIiwiQmFzZVByb21wdFRlbXBsYXRlIiwibGNfYXR0cmlidXRlcyIsInBhcnRpYWxWYXJpYWJsZXMiLCJ1bmRlZmluZWQiLCJjb25zdHJ1Y3RvciIsImlucHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl9nZXRQcm9tcHRUeXBlIiwiaW5wdXRWYXJpYWJsZXMiLCJpbmNsdWRlcyIsIkVycm9yIiwiYXNzaWduIiwibWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyIsInVzZXJWYXJpYWJsZXMiLCJwYXJ0aWFsVmFsdWVzIiwia2V5IiwiZW50cmllcyIsImFsbEt3YXJncyIsImludm9rZSIsIm9wdGlvbnMiLCJtZXRhZGF0YSIsInRhZ3MiLCJfY2FsbFdpdGhDb25maWciLCJmb3JtYXRQcm9tcHRWYWx1ZSIsInJ1blR5cGUiLCJzZXJpYWxpemUiLCJkZXNlcmlhbGl6ZSIsImRhdGEiLCJfdHlwZSIsIlByb21wdFRlbXBsYXRlIiwiRmV3U2hvdFByb21wdFRlbXBsYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/chat.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessagePromptTemplate: () => (/* binding */ AIMessagePromptTemplate),\n/* harmony export */   BaseChatPromptTemplate: () => (/* binding */ BaseChatPromptTemplate),\n/* harmony export */   BaseMessagePromptTemplate: () => (/* binding */ BaseMessagePromptTemplate),\n/* harmony export */   BaseMessageStringPromptTemplate: () => (/* binding */ BaseMessageStringPromptTemplate),\n/* harmony export */   ChatMessagePromptTemplate: () => (/* binding */ ChatMessagePromptTemplate),\n/* harmony export */   ChatPromptTemplate: () => (/* binding */ ChatPromptTemplate),\n/* harmony export */   HumanMessagePromptTemplate: () => (/* binding */ HumanMessagePromptTemplate),\n/* harmony export */   MessagesPlaceholder: () => (/* binding */ MessagesPlaceholder),\n/* harmony export */   SystemMessagePromptTemplate: () => (/* binding */ SystemMessagePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _prompt_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./prompt.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\");\n/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./image.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/image.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/errors/index.js\");\n/* harmony import */ var _dict_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./dict.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/dict.js\");\n// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\n\n\n\n\n\n\n\n\n\n\n/**\n * Abstract class that serves as a base for creating message prompt\n * templates. It defines how to format messages for different roles in a\n * conversation.\n */ class BaseMessagePromptTemplate extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_2__.Runnable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompts\",\n                \"chat\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    /**\n     * Calls the formatMessages method with the provided input and options.\n     * @param input Input for the formatMessages method\n     * @param options Optional BaseCallbackConfig\n     * @returns Formatted output messages\n     */ async invoke(input, options) {\n        return this._callWithConfig((input)=>this.formatMessages(input), input, {\n            ...options,\n            runType: \"prompt\"\n        });\n    }\n}\n/**\n * Class that represents a placeholder for messages in a chat prompt. It\n * extends the BaseMessagePromptTemplate.\n */ class MessagesPlaceholder extends BaseMessagePromptTemplate {\n    static lc_name() {\n        return \"MessagesPlaceholder\";\n    }\n    constructor(fields){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                variableName: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"variableName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"optional\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.variableName = fields.variableName;\n        this.optional = fields.optional ?? false;\n    }\n    get inputVariables() {\n        return [\n            this.variableName\n        ];\n    }\n    async formatMessages(values) {\n        const input = values[this.variableName];\n        if (this.optional && !input) {\n            return [];\n        } else if (!input) {\n            const error = new Error(`Field \"${this.variableName}\" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);\n            error.name = \"InputFormatError\";\n            throw error;\n        }\n        let formattedMessages;\n        try {\n            if (Array.isArray(input)) {\n                formattedMessages = input.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage);\n            } else {\n                formattedMessages = [\n                    (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage)(input)\n                ];\n            }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        } catch (e) {\n            const readableInput = typeof input === \"string\" ? input : JSON.stringify(input, null, 2);\n            const error = new Error([\n                `Field \"${this.variableName}\" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,\n                `Received value: ${readableInput}`,\n                `Additional message: ${e.message}`\n            ].join(\"\\n\\n\"));\n            error.name = \"InputFormatError\";\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            error.lc_error_code = e.lc_error_code;\n            throw error;\n        }\n        return formattedMessages;\n    }\n}\n/**\n * Abstract class that serves as a base for creating message string prompt\n * templates. It extends the BaseMessagePromptTemplate.\n */ class BaseMessageStringPromptTemplate extends BaseMessagePromptTemplate {\n    constructor(fields){\n        if (!(\"prompt\" in fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                prompt: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"prompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.prompt = fields.prompt;\n    }\n    get inputVariables() {\n        return this.prompt.inputVariables;\n    }\n    async formatMessages(values) {\n        return [\n            await this.format(values)\n        ];\n    }\n}\n/**\n * Abstract class that serves as a base for creating chat prompt\n * templates. It extends the BasePromptTemplate.\n */ class BaseChatPromptTemplate extends _base_js__WEBPACK_IMPORTED_MODULE_4__.BasePromptTemplate {\n    constructor(input){\n        super(input);\n    }\n    async format(values) {\n        return (await this.formatPromptValue(values)).toString();\n    }\n    async formatPromptValue(values) {\n        const resultMessages = await this.formatMessages(values);\n        return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptValue(resultMessages);\n    }\n}\n/**\n * Class that represents a chat message prompt template. It extends the\n * BaseMessageStringPromptTemplate.\n */ class ChatMessagePromptTemplate extends BaseMessageStringPromptTemplate {\n    static lc_name() {\n        return \"ChatMessagePromptTemplate\";\n    }\n    constructor(fields, role){\n        if (!(\"prompt\" in fields)) {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                prompt: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    async format(values) {\n        return new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessage(await this.prompt.format(values), this.role);\n    }\n    static fromTemplate(template, role, options) {\n        return new this(_prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(template, {\n            templateFormat: options?.templateFormat\n        }), role);\n    }\n}\nfunction isTextTemplateParam(param) {\n    if (param === null || typeof param !== \"object\" || Array.isArray(param)) {\n        return false;\n    }\n    return Object.keys(param).length === 1 && \"text\" in param && typeof param.text === \"string\";\n}\nfunction isImageTemplateParam(param) {\n    if (param === null || typeof param !== \"object\" || Array.isArray(param)) {\n        return false;\n    }\n    return \"image_url\" in param && (typeof param.image_url === \"string\" || typeof param.image_url === \"object\" && param.image_url !== null && \"url\" in param.image_url && typeof param.image_url.url === \"string\");\n}\nclass _StringImageMessagePromptTemplate extends BaseMessagePromptTemplate {\n    static _messageClass() {\n        throw new Error(\"Can not invoke _messageClass from inside _StringImageMessagePromptTemplate\");\n    }\n    constructor(/** @TODO When we come up with a better way to type prompt templates, fix this */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    fields, additionalOptions){\n        if (!(\"prompt\" in fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                prompt: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompts\",\n                \"chat\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"inputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"additionalOptions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"prompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"messageClass\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // ChatMessage contains role field, others don't.\n        // Because of this, we have a separate class property for ChatMessage.\n        Object.defineProperty(this, \"chatMessageClass\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.prompt = fields.prompt;\n        if (Array.isArray(this.prompt)) {\n            let inputVariables = [];\n            this.prompt.forEach((prompt)=>{\n                if (\"inputVariables\" in prompt) {\n                    inputVariables = inputVariables.concat(prompt.inputVariables);\n                }\n            });\n            this.inputVariables = inputVariables;\n        } else {\n            this.inputVariables = this.prompt.inputVariables;\n        }\n        this.additionalOptions = additionalOptions ?? this.additionalOptions;\n    }\n    createMessage(content) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const constructor = this.constructor;\n        if (constructor._messageClass()) {\n            const MsgClass = constructor._messageClass();\n            return new MsgClass({\n                content\n            });\n        } else if (constructor.chatMessageClass) {\n            const MsgClass = constructor.chatMessageClass();\n            // Assuming ChatMessage constructor also takes a content argument\n            return new MsgClass({\n                content,\n                role: this.getRoleFromMessageClass(MsgClass.lc_name())\n            });\n        } else {\n            throw new Error(\"No message class defined\");\n        }\n    }\n    getRoleFromMessageClass(name) {\n        switch(name){\n            case \"HumanMessage\":\n                return \"human\";\n            case \"AIMessage\":\n                return \"ai\";\n            case \"SystemMessage\":\n                return \"system\";\n            case \"ChatMessage\":\n                return \"chat\";\n            default:\n                throw new Error(\"Invalid message class name\");\n        }\n    }\n    static fromTemplate(template, additionalOptions) {\n        if (typeof template === \"string\") {\n            return new this(_prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(template, additionalOptions));\n        }\n        const prompt = [];\n        for (const item of template){\n            // handle string cases\n            if (typeof item === \"string\") {\n                prompt.push(_prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(item, additionalOptions));\n            } else if (item === null) {\n            // pass\n            } else if (isTextTemplateParam(item)) {\n                let text = \"\";\n                if (typeof item.text === \"string\") {\n                    text = item.text ?? \"\";\n                }\n                const options = {\n                    ...additionalOptions,\n                    additionalContentFields: item\n                };\n                prompt.push(_prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(text, options));\n            } else if (isImageTemplateParam(item)) {\n                let imgTemplate = item.image_url ?? \"\";\n                let imgTemplateObject;\n                let inputVariables = [];\n                if (typeof imgTemplate === \"string\") {\n                    let parsedTemplate;\n                    if (additionalOptions?.templateFormat === \"mustache\") {\n                        parsedTemplate = (0,_template_js__WEBPACK_IMPORTED_MODULE_7__.parseMustache)(imgTemplate);\n                    } else {\n                        parsedTemplate = (0,_template_js__WEBPACK_IMPORTED_MODULE_7__.parseFString)(imgTemplate);\n                    }\n                    const variables = parsedTemplate.flatMap((item)=>item.type === \"variable\" ? [\n                            item.name\n                        ] : []);\n                    if ((variables?.length ?? 0) > 0) {\n                        if (variables.length > 1) {\n                            throw new Error(`Only one format variable allowed per image template.\\nGot: ${variables}\\nFrom: ${imgTemplate}`);\n                        }\n                        inputVariables = [\n                            variables[0]\n                        ];\n                    } else {\n                        inputVariables = [];\n                    }\n                    imgTemplate = {\n                        url: imgTemplate\n                    };\n                    imgTemplateObject = new _image_js__WEBPACK_IMPORTED_MODULE_6__.ImagePromptTemplate({\n                        template: imgTemplate,\n                        inputVariables,\n                        templateFormat: additionalOptions?.templateFormat,\n                        additionalContentFields: item\n                    });\n                } else if (typeof imgTemplate === \"object\") {\n                    if (\"url\" in imgTemplate) {\n                        let parsedTemplate;\n                        if (additionalOptions?.templateFormat === \"mustache\") {\n                            parsedTemplate = (0,_template_js__WEBPACK_IMPORTED_MODULE_7__.parseMustache)(imgTemplate.url);\n                        } else {\n                            parsedTemplate = (0,_template_js__WEBPACK_IMPORTED_MODULE_7__.parseFString)(imgTemplate.url);\n                        }\n                        inputVariables = parsedTemplate.flatMap((item)=>item.type === \"variable\" ? [\n                                item.name\n                            ] : []);\n                    } else {\n                        inputVariables = [];\n                    }\n                    imgTemplateObject = new _image_js__WEBPACK_IMPORTED_MODULE_6__.ImagePromptTemplate({\n                        template: imgTemplate,\n                        inputVariables,\n                        templateFormat: additionalOptions?.templateFormat,\n                        additionalContentFields: item\n                    });\n                } else {\n                    throw new Error(\"Invalid image template\");\n                }\n                prompt.push(imgTemplateObject);\n            } else if (typeof item === \"object\") {\n                prompt.push(new _dict_js__WEBPACK_IMPORTED_MODULE_9__.DictPromptTemplate({\n                    template: item,\n                    templateFormat: additionalOptions?.templateFormat\n                }));\n            }\n        }\n        return new this({\n            prompt,\n            additionalOptions\n        });\n    }\n    async format(input) {\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (this.prompt instanceof _string_js__WEBPACK_IMPORTED_MODULE_3__.BaseStringPromptTemplate) {\n            const text = await this.prompt.format(input);\n            return this.createMessage(text);\n        } else {\n            const content = [];\n            for (const prompt of this.prompt){\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                let inputs = {};\n                if (!(\"inputVariables\" in prompt)) {\n                    throw new Error(`Prompt ${prompt} does not have inputVariables defined.`);\n                }\n                for (const item of prompt.inputVariables){\n                    if (!inputs) {\n                        inputs = {\n                            [item]: input[item]\n                        };\n                    }\n                    inputs = {\n                        ...inputs,\n                        [item]: input[item]\n                    };\n                }\n                // eslint-disable-next-line no-instanceof/no-instanceof\n                if (prompt instanceof _string_js__WEBPACK_IMPORTED_MODULE_3__.BaseStringPromptTemplate) {\n                    const formatted = await prompt.format(inputs);\n                    let additionalContentFields;\n                    if (\"additionalContentFields\" in prompt) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        additionalContentFields = prompt.additionalContentFields;\n                    }\n                    if (formatted !== \"\") {\n                        content.push({\n                            ...additionalContentFields,\n                            type: \"text\",\n                            text: formatted\n                        });\n                    }\n                /** @TODO replace this */ // eslint-disable-next-line no-instanceof/no-instanceof\n                } else if (prompt instanceof _image_js__WEBPACK_IMPORTED_MODULE_6__.ImagePromptTemplate) {\n                    const formatted = await prompt.format(inputs);\n                    let additionalContentFields;\n                    if (\"additionalContentFields\" in prompt) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        additionalContentFields = prompt.additionalContentFields;\n                    }\n                    content.push({\n                        ...additionalContentFields,\n                        type: \"image_url\",\n                        image_url: formatted\n                    });\n                // eslint-disable-next-line no-instanceof/no-instanceof\n                } else if (prompt instanceof _dict_js__WEBPACK_IMPORTED_MODULE_9__.DictPromptTemplate) {\n                    const formatted = await prompt.format(inputs);\n                    let additionalContentFields;\n                    if (\"additionalContentFields\" in prompt) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        additionalContentFields = prompt.additionalContentFields;\n                    }\n                    content.push({\n                        ...additionalContentFields,\n                        ...formatted\n                    });\n                }\n            }\n            return this.createMessage(content);\n        }\n    }\n    async formatMessages(values) {\n        return [\n            await this.format(values)\n        ];\n    }\n}\n/**\n * Class that represents a human message prompt template. It extends the\n * BaseMessageStringPromptTemplate.\n * @example\n * ```typescript\n * const message = HumanMessagePromptTemplate.fromTemplate(\"{text}\");\n * const formatted = await message.format({ text: \"Hello world!\" });\n *\n * const chatPrompt = ChatPromptTemplate.fromMessages([message]);\n * const formattedChatPrompt = await chatPrompt.invoke({\n *   text: \"Hello world!\",\n * });\n * ```\n */ class HumanMessagePromptTemplate extends _StringImageMessagePromptTemplate {\n    static _messageClass() {\n        return _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage;\n    }\n    static lc_name() {\n        return \"HumanMessagePromptTemplate\";\n    }\n}\n/**\n * Class that represents an AI message prompt template. It extends the\n * BaseMessageStringPromptTemplate.\n */ class AIMessagePromptTemplate extends _StringImageMessagePromptTemplate {\n    static _messageClass() {\n        return _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage;\n    }\n    static lc_name() {\n        return \"AIMessagePromptTemplate\";\n    }\n}\n/**\n * Class that represents a system message prompt template. It extends the\n * BaseMessageStringPromptTemplate.\n * @example\n * ```typescript\n * const message = SystemMessagePromptTemplate.fromTemplate(\"{text}\");\n * const formatted = await message.format({ text: \"Hello world!\" });\n *\n * const chatPrompt = ChatPromptTemplate.fromMessages([message]);\n * const formattedChatPrompt = await chatPrompt.invoke({\n *   text: \"Hello world!\",\n * });\n * ```\n */ class SystemMessagePromptTemplate extends _StringImageMessagePromptTemplate {\n    static _messageClass() {\n        return _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessage;\n    }\n    static lc_name() {\n        return \"SystemMessagePromptTemplate\";\n    }\n}\nfunction _isBaseMessagePromptTemplate(baseMessagePromptTemplateLike) {\n    return typeof baseMessagePromptTemplateLike.formatMessages === \"function\";\n}\nfunction _coerceMessagePromptTemplateLike(messagePromptTemplateLike, extra) {\n    if (_isBaseMessagePromptTemplate(messagePromptTemplateLike) || (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(messagePromptTemplateLike)) {\n        return messagePromptTemplateLike;\n    }\n    if (Array.isArray(messagePromptTemplateLike) && messagePromptTemplateLike[0] === \"placeholder\") {\n        const messageContent = messagePromptTemplateLike[1];\n        if (extra?.templateFormat === \"mustache\" && typeof messageContent === \"string\" && messageContent.slice(0, 2) === \"{{\" && messageContent.slice(-2) === \"}}\") {\n            const variableName = messageContent.slice(2, -2);\n            return new MessagesPlaceholder({\n                variableName,\n                optional: true\n            });\n        } else if (typeof messageContent === \"string\" && messageContent[0] === \"{\" && messageContent[messageContent.length - 1] === \"}\") {\n            const variableName = messageContent.slice(1, -1);\n            return new MessagesPlaceholder({\n                variableName,\n                optional: true\n            });\n        }\n        throw new Error(`Invalid placeholder template for format ${extra?.templateFormat ?? `\"f-string\"`}: \"${messagePromptTemplateLike[1]}\". Expected a variable name surrounded by ${extra?.templateFormat === \"mustache\" ? \"double\" : \"single\"} curly braces.`);\n    }\n    const message = (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage)(messagePromptTemplateLike);\n    let templateData;\n    if (typeof message.content === \"string\") {\n        templateData = message.content;\n    } else {\n        // Assuming message.content is an array of complex objects, transform it.\n        templateData = message.content.map((item)=>{\n            if (\"text\" in item) {\n                return {\n                    ...item,\n                    text: item.text\n                };\n            } else if (\"image_url\" in item) {\n                return {\n                    ...item,\n                    image_url: item.image_url\n                };\n            } else {\n                return item;\n            }\n        });\n    }\n    if (message._getType() === \"human\") {\n        return HumanMessagePromptTemplate.fromTemplate(templateData, extra);\n    } else if (message._getType() === \"ai\") {\n        return AIMessagePromptTemplate.fromTemplate(templateData, extra);\n    } else if (message._getType() === \"system\") {\n        return SystemMessagePromptTemplate.fromTemplate(templateData, extra);\n    } else if (_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessage.isInstance(message)) {\n        return ChatMessagePromptTemplate.fromTemplate(message.content, message.role, extra);\n    } else {\n        throw new Error(`Could not coerce message prompt template from input. Received message type: \"${message._getType()}\".`);\n    }\n}\nfunction isMessagesPlaceholder(x) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return x.constructor.lc_name() === \"MessagesPlaceholder\";\n}\n/**\n * Class that represents a chat prompt. It extends the\n * BaseChatPromptTemplate and uses an array of BaseMessagePromptTemplate\n * instances to format a series of messages for a conversation.\n * @example\n * ```typescript\n * const message = SystemMessagePromptTemplate.fromTemplate(\"{text}\");\n * const chatPrompt = ChatPromptTemplate.fromMessages([\n *   [\"ai\", \"You are a helpful assistant.\"],\n *   message,\n * ]);\n * const formattedChatPrompt = await chatPrompt.invoke({\n *   text: \"Hello world!\",\n * });\n * ```\n */ class ChatPromptTemplate extends BaseChatPromptTemplate {\n    static lc_name() {\n        return \"ChatPromptTemplate\";\n    }\n    get lc_aliases() {\n        return {\n            promptMessages: \"messages\"\n        };\n    }\n    constructor(input){\n        super(input);\n        Object.defineProperty(this, \"promptMessages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"f-string\"\n        });\n        // If input is mustache and validateTemplate is not defined, set it to false\n        if (input.templateFormat === \"mustache\" && input.validateTemplate === undefined) {\n            this.validateTemplate = false;\n        }\n        Object.assign(this, input);\n        if (this.validateTemplate) {\n            const inputVariablesMessages = new Set();\n            for (const promptMessage of this.promptMessages){\n                // eslint-disable-next-line no-instanceof/no-instanceof\n                if (promptMessage instanceof _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage) continue;\n                for (const inputVariable of promptMessage.inputVariables){\n                    inputVariablesMessages.add(inputVariable);\n                }\n            }\n            const totalInputVariables = this.inputVariables;\n            const inputVariablesInstance = new Set(this.partialVariables ? totalInputVariables.concat(Object.keys(this.partialVariables)) : totalInputVariables);\n            const difference = new Set([\n                ...inputVariablesInstance\n            ].filter((x)=>!inputVariablesMessages.has(x)));\n            if (difference.size > 0) {\n                throw new Error(`Input variables \\`${[\n                    ...difference\n                ]}\\` are not used in any of the prompt messages.`);\n            }\n            const otherDifference = new Set([\n                ...inputVariablesMessages\n            ].filter((x)=>!inputVariablesInstance.has(x)));\n            if (otherDifference.size > 0) {\n                throw new Error(`Input variables \\`${[\n                    ...otherDifference\n                ]}\\` are used in prompt messages but not in the prompt template.`);\n            }\n        }\n    }\n    _getPromptType() {\n        return \"chat\";\n    }\n    async _parseImagePrompts(message, inputValues) {\n        if (typeof message.content === \"string\") {\n            return message;\n        }\n        const formattedMessageContent = await Promise.all(message.content.map(async (item)=>{\n            if (item.type !== \"image_url\") {\n                return item;\n            }\n            let imageUrl = \"\";\n            if (typeof item.image_url === \"string\") {\n                imageUrl = item.image_url;\n            } else {\n                imageUrl = item.image_url.url;\n            }\n            const promptTemplatePlaceholder = _prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(imageUrl, {\n                templateFormat: this.templateFormat\n            });\n            const formattedUrl = await promptTemplatePlaceholder.format(inputValues);\n            if (typeof item.image_url !== \"string\" && \"url\" in item.image_url) {\n                // eslint-disable-next-line no-param-reassign\n                item.image_url.url = formattedUrl;\n            } else {\n                // eslint-disable-next-line no-param-reassign\n                item.image_url = formattedUrl;\n            }\n            return item;\n        }));\n        // eslint-disable-next-line no-param-reassign\n        message.content = formattedMessageContent;\n        return message;\n    }\n    async formatMessages(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        let resultMessages = [];\n        for (const promptMessage of this.promptMessages){\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            if (promptMessage instanceof _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage) {\n                resultMessages.push(await this._parseImagePrompts(promptMessage, allValues));\n            } else {\n                let inputValues;\n                if (this.templateFormat === \"mustache\") {\n                    inputValues = {\n                        ...allValues\n                    };\n                } else {\n                    inputValues = promptMessage.inputVariables.reduce((acc, inputVariable)=>{\n                        if (!(inputVariable in allValues) && !(isMessagesPlaceholder(promptMessage) && promptMessage.optional)) {\n                            const error = (0,_errors_index_js__WEBPACK_IMPORTED_MODULE_8__.addLangChainErrorFields)(new Error(`Missing value for input variable \\`${inputVariable.toString()}\\``), \"INVALID_PROMPT_INPUT\");\n                            throw error;\n                        }\n                        acc[inputVariable] = allValues[inputVariable];\n                        return acc;\n                    }, {});\n                }\n                const message = await promptMessage.formatMessages(inputValues);\n                resultMessages = resultMessages.concat(message);\n            }\n        }\n        return resultMessages;\n    }\n    async partial(values) {\n        // This is implemented in a way it doesn't require making\n        // BaseMessagePromptTemplate aware of .partial()\n        const newInputVariables = this.inputVariables.filter((iv)=>!(iv in values));\n        const newPartialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables\n        };\n        return new ChatPromptTemplate(promptDict);\n    }\n    static fromTemplate(template, options) {\n        const prompt = _prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(template, options);\n        const humanTemplate = new HumanMessagePromptTemplate({\n            prompt\n        });\n        return this.fromMessages([\n            humanTemplate\n        ]);\n    }\n    /**\n     * Create a chat model-specific prompt from individual chat messages\n     * or message-like tuples.\n     * @param promptMessages Messages to be passed to the chat model\n     * @returns A new ChatPromptTemplate\n     */ static fromMessages(promptMessages, extra) {\n        const flattenedMessages = promptMessages.reduce((acc, promptMessage)=>acc.concat(// eslint-disable-next-line no-instanceof/no-instanceof\n            promptMessage instanceof ChatPromptTemplate ? promptMessage.promptMessages : [\n                _coerceMessagePromptTemplateLike(promptMessage, extra)\n            ]), []);\n        const flattenedPartialVariables = promptMessages.reduce((acc, promptMessage)=>// eslint-disable-next-line no-instanceof/no-instanceof\n            promptMessage instanceof ChatPromptTemplate ? Object.assign(acc, promptMessage.partialVariables) : acc, Object.create(null));\n        const inputVariables = new Set();\n        for (const promptMessage of flattenedMessages){\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            if (promptMessage instanceof _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage) continue;\n            for (const inputVariable of promptMessage.inputVariables){\n                if (inputVariable in flattenedPartialVariables) {\n                    continue;\n                }\n                inputVariables.add(inputVariable);\n            }\n        }\n        return new this({\n            ...extra,\n            inputVariables: [\n                ...inputVariables\n            ],\n            promptMessages: flattenedMessages,\n            partialVariables: flattenedPartialVariables,\n            templateFormat: extra?.templateFormat\n        });\n    }\n    /** @deprecated Renamed to .fromMessages */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static fromPromptMessages(promptMessages) {\n        return this.fromMessages(promptMessages);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9jaGF0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxnRUFBZ0U7QUFDaEUsd0VBQXdFO0FBQzRFO0FBQzdGO0FBQ1A7QUFDTztBQUNQO0FBQ0Y7QUFDRztBQUNZO0FBQ0E7QUFDZDtBQUMvQzs7OztDQUlDLEdBQ00sTUFBTWlCLGtDQUFrQ1Qsd0RBQVFBO0lBQ25EVSxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7Z0JBQVc7YUFBTztRQUNoRDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO0lBQ0o7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1DLE9BQU9DLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLE9BQU8sSUFBSSxDQUFDQyxlQUFlLENBQUMsQ0FBQ0YsUUFBVSxJQUFJLENBQUNHLGNBQWMsQ0FBQ0gsUUFBUUEsT0FBTztZQUFFLEdBQUdDLE9BQU87WUFBRUcsU0FBUztRQUFTO0lBQzlHO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNQyw0QkFBNEJmO0lBQ3JDLE9BQU9nQixVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FmLFlBQVlnQixNQUFNLENBQUU7UUFDaEIsSUFBSSxPQUFPQSxXQUFXLFVBQVU7WUFDNUIsNkNBQTZDO1lBQzdDQSxTQUFTO2dCQUFFQyxjQUFjRDtZQUFPO1FBQ3BDO1FBQ0EsS0FBSyxDQUFDQTtRQUNOZCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FB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Q2pEa0IsS0FBS3hILE9BQU9rSSxNQUFNLENBQUM7UUFDekIsTUFBTWpILGlCQUFpQixJQUFJK0U7UUFDM0IsS0FBSyxNQUFNQyxpQkFBaUIrQixrQkFBbUI7WUFDM0MsdURBQXVEO1lBQ3ZELElBQUkvQix5QkFBeUJsSCwyREFBV0EsRUFDcEM7WUFDSixLQUFLLE1BQU1tSCxpQkFBaUJELGNBQWNoRixjQUFjLENBQUU7Z0JBQ3RELElBQUlpRixpQkFBaUIrQiwyQkFBMkI7b0JBQzVDO2dCQUNKO2dCQUNBaEgsZUFBZWtGLEdBQUcsQ0FBQ0Q7WUFDdkI7UUFDSjtRQUNBLE9BQU8sSUFBSSxJQUFJLENBQUM7WUFDWixHQUFHakIsS0FBSztZQUNSaEUsZ0JBQWdCO21CQUFJQTthQUFlO1lBQ25DMEUsZ0JBQWdCcUM7WUFDaEIxQixrQkFBa0IyQjtZQUNsQnJGLGdCQUFnQnFDLE9BQU9yQztRQUMzQjtJQUNKO0lBQ0EseUNBQXlDLEdBQ3pDLDhEQUE4RDtJQUM5RCxPQUFPdUYsbUJBQW1CeEMsY0FBYyxFQUFFO1FBQ3RDLE9BQU8sSUFBSSxDQUFDb0MsWUFBWSxDQUFDcEM7SUFDN0I7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9jaGF0LmpzPzczMDIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRGVmYXVsdCBnZW5lcmljIFwiYW55XCIgdmFsdWVzIGFyZSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4vLyBSZXBsYWNlIHdpdGggXCJzdHJpbmdcIiB3aGVuIHdlIGFyZSBjb21mb3J0YWJsZSB3aXRoIGEgYnJlYWtpbmcgY2hhbmdlLlxuaW1wb3J0IHsgQUlNZXNzYWdlLCBIdW1hbk1lc3NhZ2UsIFN5c3RlbU1lc3NhZ2UsIEJhc2VNZXNzYWdlLCBDaGF0TWVzc2FnZSwgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UsIGlzQmFzZU1lc3NhZ2UsIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBDaGF0UHJvbXB0VmFsdWUsIH0gZnJvbSBcIi4uL3Byb21wdF92YWx1ZXMuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9zdHJpbmcuanNcIjtcbmltcG9ydCB7IEJhc2VQcm9tcHRUZW1wbGF0ZSwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBQcm9tcHRUZW1wbGF0ZSwgfSBmcm9tIFwiLi9wcm9tcHQuanNcIjtcbmltcG9ydCB7IEltYWdlUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9pbWFnZS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VGU3RyaW5nLCBwYXJzZU11c3RhY2hlLCB9IGZyb20gXCIuL3RlbXBsYXRlLmpzXCI7XG5pbXBvcnQgeyBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyB9IGZyb20gXCIuLi9lcnJvcnMvaW5kZXguanNcIjtcbmltcG9ydCB7IERpY3RQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL2RpY3QuanNcIjtcbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYSBiYXNlIGZvciBjcmVhdGluZyBtZXNzYWdlIHByb21wdFxuICogdGVtcGxhdGVzLiBJdCBkZWZpbmVzIGhvdyB0byBmb3JtYXQgbWVzc2FnZXMgZm9yIGRpZmZlcmVudCByb2xlcyBpbiBhXG4gKiBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgUnVubmFibGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicHJvbXB0c1wiLCBcImNoYXRcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIGZvcm1hdE1lc3NhZ2VzIG1ldGhvZCB3aXRoIHRoZSBwcm92aWRlZCBpbnB1dCBhbmQgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgZm9yIHRoZSBmb3JtYXRNZXNzYWdlcyBtZXRob2RcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25hbCBCYXNlQ2FsbGJhY2tDb25maWdcbiAgICAgKiBAcmV0dXJucyBGb3JtYXR0ZWQgb3V0cHV0IG1lc3NhZ2VzXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZygoaW5wdXQpID0+IHRoaXMuZm9ybWF0TWVzc2FnZXMoaW5wdXQpLCBpbnB1dCwgeyAuLi5vcHRpb25zLCBydW5UeXBlOiBcInByb21wdFwiIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgcGxhY2Vob2xkZXIgZm9yIG1lc3NhZ2VzIGluIGEgY2hhdCBwcm9tcHQuIEl0XG4gKiBleHRlbmRzIHRoZSBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlLlxuICovXG5leHBvcnQgY2xhc3MgTWVzc2FnZXNQbGFjZWhvbGRlciBleHRlbmRzIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJNZXNzYWdlc1BsYWNlaG9sZGVyXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IHZhcmlhYmxlTmFtZTogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFyaWFibGVOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wdGlvbmFsXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudmFyaWFibGVOYW1lID0gZmllbGRzLnZhcmlhYmxlTmFtZTtcbiAgICAgICAgdGhpcy5vcHRpb25hbCA9IGZpZWxkcy5vcHRpb25hbCA/PyBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGlucHV0VmFyaWFibGVzKCkge1xuICAgICAgICByZXR1cm4gW3RoaXMudmFyaWFibGVOYW1lXTtcbiAgICB9XG4gICAgYXN5bmMgZm9ybWF0TWVzc2FnZXModmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gdmFsdWVzW3RoaXMudmFyaWFibGVOYW1lXTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9uYWwgJiYgIWlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWlucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgRmllbGQgXCIke3RoaXMudmFyaWFibGVOYW1lfVwiIGluIHByb21wdCB1c2VzIGEgTWVzc2FnZXNQbGFjZWhvbGRlciwgd2hpY2ggZXhwZWN0cyBhbiBhcnJheSBvZiBCYXNlTWVzc2FnZXMgYXMgYW4gaW5wdXQgdmFsdWUuIFJlY2VpdmVkOiB1bmRlZmluZWRgKTtcbiAgICAgICAgICAgIGVycm9yLm5hbWUgPSBcIklucHV0Rm9ybWF0RXJyb3JcIjtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmb3JtYXR0ZWRNZXNzYWdlcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZE1lc3NhZ2VzID0gaW5wdXQubWFwKGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZE1lc3NhZ2VzID0gW2NvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKGlucHV0KV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zdCByZWFkYWJsZUlucHV0ID0gdHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiID8gaW5wdXQgOiBKU09OLnN0cmluZ2lmeShpbnB1dCwgbnVsbCwgMik7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihbXG4gICAgICAgICAgICAgICAgYEZpZWxkIFwiJHt0aGlzLnZhcmlhYmxlTmFtZX1cIiBpbiBwcm9tcHQgdXNlcyBhIE1lc3NhZ2VzUGxhY2Vob2xkZXIsIHdoaWNoIGV4cGVjdHMgYW4gYXJyYXkgb2YgQmFzZU1lc3NhZ2VzIG9yIGNvZXJjZWFibGUgdmFsdWVzIGFzIGlucHV0LmAsXG4gICAgICAgICAgICAgICAgYFJlY2VpdmVkIHZhbHVlOiAke3JlYWRhYmxlSW5wdXR9YCxcbiAgICAgICAgICAgICAgICBgQWRkaXRpb25hbCBtZXNzYWdlOiAke2UubWVzc2FnZX1gLFxuICAgICAgICAgICAgXS5qb2luKFwiXFxuXFxuXCIpKTtcbiAgICAgICAgICAgIGVycm9yLm5hbWUgPSBcIklucHV0Rm9ybWF0RXJyb3JcIjtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBlcnJvci5sY19lcnJvcl9jb2RlID0gZS5sY19lcnJvcl9jb2RlO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZE1lc3NhZ2VzO1xuICAgIH1cbn1cbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYSBiYXNlIGZvciBjcmVhdGluZyBtZXNzYWdlIHN0cmluZyBwcm9tcHRcbiAqIHRlbXBsYXRlcy4gSXQgZXh0ZW5kcyB0aGUgQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VNZXNzYWdlU3RyaW5nUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgaWYgKCEoXCJwcm9tcHRcIiBpbiBmaWVsZHMpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgcHJvbXB0OiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9tcHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9tcHQgPSBmaWVsZHMucHJvbXB0O1xuICAgIH1cbiAgICBnZXQgaW5wdXRWYXJpYWJsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb21wdC5pbnB1dFZhcmlhYmxlcztcbiAgICB9XG4gICAgYXN5bmMgZm9ybWF0TWVzc2FnZXModmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBbYXdhaXQgdGhpcy5mb3JtYXQodmFsdWVzKV07XG4gICAgfVxufVxuLyoqXG4gKiBBYnN0cmFjdCBjbGFzcyB0aGF0IHNlcnZlcyBhcyBhIGJhc2UgZm9yIGNyZWF0aW5nIGNoYXQgcHJvbXB0XG4gKiB0ZW1wbGF0ZXMuIEl0IGV4dGVuZHMgdGhlIEJhc2VQcm9tcHRUZW1wbGF0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDaGF0UHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlUHJvbXB0VGVtcGxhdGUge1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIHN1cGVyKGlucHV0KTtcbiAgICB9XG4gICAgYXN5bmMgZm9ybWF0KHZhbHVlcykge1xuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuZm9ybWF0UHJvbXB0VmFsdWUodmFsdWVzKSkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgYXN5bmMgZm9ybWF0UHJvbXB0VmFsdWUodmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdE1lc3NhZ2VzID0gYXdhaXQgdGhpcy5mb3JtYXRNZXNzYWdlcyh2YWx1ZXMpO1xuICAgICAgICByZXR1cm4gbmV3IENoYXRQcm9tcHRWYWx1ZShyZXN1bHRNZXNzYWdlcyk7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBjaGF0IG1lc3NhZ2UgcHJvbXB0IHRlbXBsYXRlLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZU1lc3NhZ2VTdHJpbmdQcm9tcHRUZW1wbGF0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hhdE1lc3NhZ2VQcm9tcHRUZW1wbGF0ZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIHJvbGUpIHtcbiAgICAgICAgaWYgKCEoXCJwcm9tcHRcIiBpbiBmaWVsZHMpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgcHJvbXB0OiBmaWVsZHMsIHJvbGU6IHJvbGUgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb2xlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucm9sZSA9IGZpZWxkcy5yb2xlO1xuICAgIH1cbiAgICBhc3luYyBmb3JtYXQodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdE1lc3NhZ2UoYXdhaXQgdGhpcy5wcm9tcHQuZm9ybWF0KHZhbHVlcyksIHRoaXMucm9sZSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVGVtcGxhdGUodGVtcGxhdGUsIHJvbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwge1xuICAgICAgICAgICAgdGVtcGxhdGVGb3JtYXQ6IG9wdGlvbnM/LnRlbXBsYXRlRm9ybWF0LFxuICAgICAgICB9KSwgcm9sZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNUZXh0VGVtcGxhdGVQYXJhbShwYXJhbSkge1xuICAgIGlmIChwYXJhbSA9PT0gbnVsbCB8fCB0eXBlb2YgcGFyYW0gIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShwYXJhbSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gKE9iamVjdC5rZXlzKHBhcmFtKS5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgXCJ0ZXh0XCIgaW4gcGFyYW0gJiZcbiAgICAgICAgdHlwZW9mIHBhcmFtLnRleHQgPT09IFwic3RyaW5nXCIpO1xufVxuZnVuY3Rpb24gaXNJbWFnZVRlbXBsYXRlUGFyYW0ocGFyYW0pIHtcbiAgICBpZiAocGFyYW0gPT09IG51bGwgfHwgdHlwZW9mIHBhcmFtICE9PSBcIm9iamVjdFwiIHx8IEFycmF5LmlzQXJyYXkocGFyYW0pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIChcImltYWdlX3VybFwiIGluIHBhcmFtICYmXG4gICAgICAgICh0eXBlb2YgcGFyYW0uaW1hZ2VfdXJsID09PSBcInN0cmluZ1wiIHx8XG4gICAgICAgICAgICAodHlwZW9mIHBhcmFtLmltYWdlX3VybCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIHBhcmFtLmltYWdlX3VybCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIFwidXJsXCIgaW4gcGFyYW0uaW1hZ2VfdXJsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHBhcmFtLmltYWdlX3VybC51cmwgPT09IFwic3RyaW5nXCIpKSk7XG59XG5jbGFzcyBfU3RyaW5nSW1hZ2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgX21lc3NhZ2VDbGFzcygpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuIG5vdCBpbnZva2UgX21lc3NhZ2VDbGFzcyBmcm9tIGluc2lkZSBfU3RyaW5nSW1hZ2VNZXNzYWdlUHJvbXB0VGVtcGxhdGVcIik7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBAVE9ETyBXaGVuIHdlIGNvbWUgdXAgd2l0aCBhIGJldHRlciB3YXkgdG8gdHlwZSBwcm9tcHQgdGVtcGxhdGVzLCBmaXggdGhpcyAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZmllbGRzLCBhZGRpdGlvbmFsT3B0aW9ucykge1xuICAgICAgICBpZiAoIShcInByb21wdFwiIGluIGZpZWxkcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBwcm9tcHQ6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRzXCIsIFwiY2hhdFwiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnB1dFZhcmlhYmxlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFkZGl0aW9uYWxPcHRpb25zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvbXB0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1lc3NhZ2VDbGFzc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDaGF0TWVzc2FnZSBjb250YWlucyByb2xlIGZpZWxkLCBvdGhlcnMgZG9uJ3QuXG4gICAgICAgIC8vIEJlY2F1c2Ugb2YgdGhpcywgd2UgaGF2ZSBhIHNlcGFyYXRlIGNsYXNzIHByb3BlcnR5IGZvciBDaGF0TWVzc2FnZS5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hhdE1lc3NhZ2VDbGFzc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByb21wdCA9IGZpZWxkcy5wcm9tcHQ7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMucHJvbXB0KSkge1xuICAgICAgICAgICAgbGV0IGlucHV0VmFyaWFibGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnByb21wdC5mb3JFYWNoKChwcm9tcHQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXCJpbnB1dFZhcmlhYmxlc1wiIGluIHByb21wdCkge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcyA9IGlucHV0VmFyaWFibGVzLmNvbmNhdChwcm9tcHQuaW5wdXRWYXJpYWJsZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFZhcmlhYmxlcyA9IGlucHV0VmFyaWFibGVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnB1dFZhcmlhYmxlcyA9IHRoaXMucHJvbXB0LmlucHV0VmFyaWFibGVzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkaXRpb25hbE9wdGlvbnMgPSBhZGRpdGlvbmFsT3B0aW9ucyA/PyB0aGlzLmFkZGl0aW9uYWxPcHRpb25zO1xuICAgIH1cbiAgICBjcmVhdGVNZXNzYWdlKGNvbnRlbnQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgY29uc3RydWN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBpZiAoY29uc3RydWN0b3IuX21lc3NhZ2VDbGFzcygpKSB7XG4gICAgICAgICAgICBjb25zdCBNc2dDbGFzcyA9IGNvbnN0cnVjdG9yLl9tZXNzYWdlQ2xhc3MoKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTXNnQ2xhc3MoeyBjb250ZW50IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbnN0cnVjdG9yLmNoYXRNZXNzYWdlQ2xhc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IE1zZ0NsYXNzID0gY29uc3RydWN0b3IuY2hhdE1lc3NhZ2VDbGFzcygpO1xuICAgICAgICAgICAgLy8gQXNzdW1pbmcgQ2hhdE1lc3NhZ2UgY29uc3RydWN0b3IgYWxzbyB0YWtlcyBhIGNvbnRlbnQgYXJndW1lbnRcbiAgICAgICAgICAgIHJldHVybiBuZXcgTXNnQ2xhc3Moe1xuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgcm9sZTogdGhpcy5nZXRSb2xlRnJvbU1lc3NhZ2VDbGFzcyhNc2dDbGFzcy5sY19uYW1lKCkpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBtZXNzYWdlIGNsYXNzIGRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Um9sZUZyb21NZXNzYWdlQ2xhc3MobmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJIdW1hbk1lc3NhZ2VcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJodW1hblwiO1xuICAgICAgICAgICAgY2FzZSBcIkFJTWVzc2FnZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgICAgICAgICBjYXNlIFwiU3lzdGVtTWVzc2FnZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgICAgICAgICAgY2FzZSBcIkNoYXRNZXNzYWdlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2hhdFwiO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG1lc3NhZ2UgY2xhc3MgbmFtZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRlbXBsYXRlKHRlbXBsYXRlLCBhZGRpdGlvbmFsT3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMoUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKHRlbXBsYXRlLCBhZGRpdGlvbmFsT3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21wdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGVtcGxhdGUpIHtcbiAgICAgICAgICAgIC8vIGhhbmRsZSBzdHJpbmcgY2FzZXNcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHByb21wdC5wdXNoKFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShpdGVtLCBhZGRpdGlvbmFsT3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXRlbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIHBhc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzVGV4dFRlbXBsYXRlUGFyYW0oaXRlbSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IGl0ZW0udGV4dCA/PyBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5hZGRpdGlvbmFsT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbENvbnRlbnRGaWVsZHM6IGl0ZW0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBwcm9tcHQucHVzaChQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUodGV4dCwgb3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNJbWFnZVRlbXBsYXRlUGFyYW0oaXRlbSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW1nVGVtcGxhdGUgPSBpdGVtLmltYWdlX3VybCA/PyBcIlwiO1xuICAgICAgICAgICAgICAgIGxldCBpbWdUZW1wbGF0ZU9iamVjdDtcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXRWYXJpYWJsZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGltZ1RlbXBsYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJzZWRUZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxPcHRpb25zPy50ZW1wbGF0ZUZvcm1hdCA9PT0gXCJtdXN0YWNoZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRUZW1wbGF0ZSA9IHBhcnNlTXVzdGFjaGUoaW1nVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkVGVtcGxhdGUgPSBwYXJzZUZTdHJpbmcoaW1nVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhYmxlcyA9IHBhcnNlZFRlbXBsYXRlLmZsYXRNYXAoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gXCJ2YXJpYWJsZVwiID8gW2l0ZW0ubmFtZV0gOiBbXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgodmFyaWFibGVzPy5sZW5ndGggPz8gMCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWFibGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9ubHkgb25lIGZvcm1hdCB2YXJpYWJsZSBhbGxvd2VkIHBlciBpbWFnZSB0ZW1wbGF0ZS5cXG5Hb3Q6ICR7dmFyaWFibGVzfVxcbkZyb206ICR7aW1nVGVtcGxhdGV9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcyA9IFt2YXJpYWJsZXNbMF1dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbWdUZW1wbGF0ZSA9IHsgdXJsOiBpbWdUZW1wbGF0ZSB9O1xuICAgICAgICAgICAgICAgICAgICBpbWdUZW1wbGF0ZU9iamVjdCA9IG5ldyBJbWFnZVByb21wdFRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBpbWdUZW1wbGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGb3JtYXQ6IGFkZGl0aW9uYWxPcHRpb25zPy50ZW1wbGF0ZUZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxDb250ZW50RmllbGRzOiBpdGVtLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGltZ1RlbXBsYXRlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcInVybFwiIGluIGltZ1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyc2VkVGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbE9wdGlvbnM/LnRlbXBsYXRlRm9ybWF0ID09PSBcIm11c3RhY2hlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRUZW1wbGF0ZSA9IHBhcnNlTXVzdGFjaGUoaW1nVGVtcGxhdGUudXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFRlbXBsYXRlID0gcGFyc2VGU3RyaW5nKGltZ1RlbXBsYXRlLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcyA9IHBhcnNlZFRlbXBsYXRlLmZsYXRNYXAoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gXCJ2YXJpYWJsZVwiID8gW2l0ZW0ubmFtZV0gOiBbXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGltZ1RlbXBsYXRlT2JqZWN0ID0gbmV3IEltYWdlUHJvbXB0VGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGltZ1RlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZvcm1hdDogYWRkaXRpb25hbE9wdGlvbnM/LnRlbXBsYXRlRm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbENvbnRlbnRGaWVsZHM6IGl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbWFnZSB0ZW1wbGF0ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvbXB0LnB1c2goaW1nVGVtcGxhdGVPYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBwcm9tcHQucHVzaChuZXcgRGljdFByb21wdFRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm9ybWF0OiBhZGRpdGlvbmFsT3B0aW9ucz8udGVtcGxhdGVGb3JtYXQsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyh7IHByb21wdCwgYWRkaXRpb25hbE9wdGlvbnMgfSk7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdChpbnB1dCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIGlmICh0aGlzLnByb21wdCBpbnN0YW5jZW9mIEJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHRoaXMucHJvbXB0LmZvcm1hdChpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVNZXNzYWdlKHRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9tcHQgb2YgdGhpcy5wcm9tcHQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGxldCBpbnB1dHMgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoIShcImlucHV0VmFyaWFibGVzXCIgaW4gcHJvbXB0KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb21wdCAke3Byb21wdH0gZG9lcyBub3QgaGF2ZSBpbnB1dFZhcmlhYmxlcyBkZWZpbmVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcHJvbXB0LmlucHV0VmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dHMgPSB7IFtpdGVtXTogaW5wdXRbaXRlbV0gfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dHMgPSB7IC4uLmlucHV0cywgW2l0ZW1dOiBpbnB1dFtpdGVtXSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICAgICAgaWYgKHByb21wdCBpbnN0YW5jZW9mIEJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWQgPSBhd2FpdCBwcm9tcHQuZm9ybWF0KGlucHV0cyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhZGRpdGlvbmFsQ29udGVudEZpZWxkcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiYWRkaXRpb25hbENvbnRlbnRGaWVsZHNcIiBpbiBwcm9tcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsQ29udGVudEZpZWxkcyA9IHByb21wdC5hZGRpdGlvbmFsQ29udGVudEZpZWxkcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0dGVkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmFkZGl0aW9uYWxDb250ZW50RmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdHRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKiBAVE9ETyByZXBsYWNlIHRoaXMgKi9cbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9tcHQgaW5zdGFuY2VvZiBJbWFnZVByb21wdFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IGF3YWl0IHByb21wdC5mb3JtYXQoaW5wdXRzKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZGl0aW9uYWxDb250ZW50RmllbGRzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJhZGRpdGlvbmFsQ29udGVudEZpZWxkc1wiIGluIHByb21wdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxDb250ZW50RmllbGRzID0gcHJvbXB0LmFkZGl0aW9uYWxDb250ZW50RmllbGRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5hZGRpdGlvbmFsQ29udGVudEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VfdXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGZvcm1hdHRlZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvbXB0IGluc3RhbmNlb2YgRGljdFByb21wdFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IGF3YWl0IHByb21wdC5mb3JtYXQoaW5wdXRzKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZGl0aW9uYWxDb250ZW50RmllbGRzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJhZGRpdGlvbmFsQ29udGVudEZpZWxkc1wiIGluIHByb21wdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxDb250ZW50RmllbGRzID0gcHJvbXB0LmFkZGl0aW9uYWxDb250ZW50RmllbGRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5hZGRpdGlvbmFsQ29udGVudEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZvcm1hdHRlZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlTWVzc2FnZShjb250ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmb3JtYXRNZXNzYWdlcyh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIFthd2FpdCB0aGlzLmZvcm1hdCh2YWx1ZXMpXTtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIGh1bWFuIG1lc3NhZ2UgcHJvbXB0IHRlbXBsYXRlLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZU1lc3NhZ2VTdHJpbmdQcm9tcHRUZW1wbGF0ZS5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBtZXNzYWdlID0gSHVtYW5NZXNzYWdlUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwie3RleHR9XCIpO1xuICogY29uc3QgZm9ybWF0dGVkID0gYXdhaXQgbWVzc2FnZS5mb3JtYXQoeyB0ZXh0OiBcIkhlbGxvIHdvcmxkIVwiIH0pO1xuICpcbiAqIGNvbnN0IGNoYXRQcm9tcHQgPSBDaGF0UHJvbXB0VGVtcGxhdGUuZnJvbU1lc3NhZ2VzKFttZXNzYWdlXSk7XG4gKiBjb25zdCBmb3JtYXR0ZWRDaGF0UHJvbXB0ID0gYXdhaXQgY2hhdFByb21wdC5pbnZva2Uoe1xuICogICB0ZXh0OiBcIkhlbGxvIHdvcmxkIVwiLFxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgX1N0cmluZ0ltYWdlTWVzc2FnZVByb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgX21lc3NhZ2VDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIEh1bWFuTWVzc2FnZTtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlXCI7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYW4gQUkgbWVzc2FnZSBwcm9tcHQgdGVtcGxhdGUuIEl0IGV4dGVuZHMgdGhlXG4gKiBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlLlxuICovXG5leHBvcnQgY2xhc3MgQUlNZXNzYWdlUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBfU3RyaW5nSW1hZ2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUge1xuICAgIHN0YXRpYyBfbWVzc2FnZUNsYXNzKCkge1xuICAgICAgICByZXR1cm4gQUlNZXNzYWdlO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQUlNZXNzYWdlUHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHN5c3RlbSBtZXNzYWdlIHByb21wdCB0ZW1wbGF0ZS4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VNZXNzYWdlU3RyaW5nUHJvbXB0VGVtcGxhdGUuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbWVzc2FnZSA9IFN5c3RlbU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJ7dGV4dH1cIik7XG4gKiBjb25zdCBmb3JtYXR0ZWQgPSBhd2FpdCBtZXNzYWdlLmZvcm1hdCh7IHRleHQ6IFwiSGVsbG8gd29ybGQhXCIgfSk7XG4gKlxuICogY29uc3QgY2hhdFByb21wdCA9IENoYXRQcm9tcHRUZW1wbGF0ZS5mcm9tTWVzc2FnZXMoW21lc3NhZ2VdKTtcbiAqIGNvbnN0IGZvcm1hdHRlZENoYXRQcm9tcHQgPSBhd2FpdCBjaGF0UHJvbXB0Lmludm9rZSh7XG4gKiAgIHRleHQ6IFwiSGVsbG8gd29ybGQhXCIsXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgU3lzdGVtTWVzc2FnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgX1N0cmluZ0ltYWdlTWVzc2FnZVByb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgX21lc3NhZ2VDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIFN5c3RlbU1lc3NhZ2U7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTeXN0ZW1NZXNzYWdlUHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG59XG5mdW5jdGlvbiBfaXNCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlKGJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgYmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2VcbiAgICAgICAgLmZvcm1hdE1lc3NhZ2VzID09PSBcImZ1bmN0aW9uXCIpO1xufVxuZnVuY3Rpb24gX2NvZXJjZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UobWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZSwgZXh0cmEpIHtcbiAgICBpZiAoX2lzQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZShtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlKSB8fFxuICAgICAgICBpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlKSAmJlxuICAgICAgICBtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlWzBdID09PSBcInBsYWNlaG9sZGVyXCIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRlbnQgPSBtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlWzFdO1xuICAgICAgICBpZiAoZXh0cmE/LnRlbXBsYXRlRm9ybWF0ID09PSBcIm11c3RhY2hlXCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiBtZXNzYWdlQ29udGVudCA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgbWVzc2FnZUNvbnRlbnQuc2xpY2UoMCwgMikgPT09IFwie3tcIiAmJlxuICAgICAgICAgICAgbWVzc2FnZUNvbnRlbnQuc2xpY2UoLTIpID09PSBcIn19XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhcmlhYmxlTmFtZSA9IG1lc3NhZ2VDb250ZW50LnNsaWNlKDIsIC0yKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWVzc2FnZXNQbGFjZWhvbGRlcih7IHZhcmlhYmxlTmFtZSwgb3B0aW9uYWw6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2VDb250ZW50ID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICBtZXNzYWdlQ29udGVudFswXSA9PT0gXCJ7XCIgJiZcbiAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50W21lc3NhZ2VDb250ZW50Lmxlbmd0aCAtIDFdID09PSBcIn1cIikge1xuICAgICAgICAgICAgY29uc3QgdmFyaWFibGVOYW1lID0gbWVzc2FnZUNvbnRlbnQuc2xpY2UoMSwgLTEpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlc1BsYWNlaG9sZGVyKHsgdmFyaWFibGVOYW1lLCBvcHRpb25hbDogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcGxhY2Vob2xkZXIgdGVtcGxhdGUgZm9yIGZvcm1hdCAke2V4dHJhPy50ZW1wbGF0ZUZvcm1hdCA/PyBgXCJmLXN0cmluZ1wiYH06IFwiJHttZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlWzFdfVwiLiBFeHBlY3RlZCBhIHZhcmlhYmxlIG5hbWUgc3Vycm91bmRlZCBieSAke2V4dHJhPy50ZW1wbGF0ZUZvcm1hdCA9PT0gXCJtdXN0YWNoZVwiID8gXCJkb3VibGVcIiA6IFwic2luZ2xlXCJ9IGN1cmx5IGJyYWNlcy5gKTtcbiAgICB9XG4gICAgY29uc3QgbWVzc2FnZSA9IGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKG1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UpO1xuICAgIGxldCB0ZW1wbGF0ZURhdGE7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGVtcGxhdGVEYXRhID0gbWVzc2FnZS5jb250ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQXNzdW1pbmcgbWVzc2FnZS5jb250ZW50IGlzIGFuIGFycmF5IG9mIGNvbXBsZXggb2JqZWN0cywgdHJhbnNmb3JtIGl0LlxuICAgICAgICB0ZW1wbGF0ZURhdGEgPSBtZXNzYWdlLmNvbnRlbnQubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoXCJ0ZXh0XCIgaW4gaXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLml0ZW0sIHRleHQ6IGl0ZW0udGV4dCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoXCJpbWFnZV91cmxcIiBpbiBpdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uaXRlbSwgaW1hZ2VfdXJsOiBpdGVtLmltYWdlX3VybCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImh1bWFuXCIpIHtcbiAgICAgICAgcmV0dXJuIEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZSh0ZW1wbGF0ZURhdGEsIGV4dHJhKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImFpXCIpIHtcbiAgICAgICAgcmV0dXJuIEFJTWVzc2FnZVByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZSh0ZW1wbGF0ZURhdGEsIGV4dHJhKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgIHJldHVybiBTeXN0ZW1NZXNzYWdlUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKHRlbXBsYXRlRGF0YSwgZXh0cmEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChDaGF0TWVzc2FnZS5pc0luc3RhbmNlKG1lc3NhZ2UpKSB7XG4gICAgICAgIHJldHVybiBDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShtZXNzYWdlLmNvbnRlbnQsIG1lc3NhZ2Uucm9sZSwgZXh0cmEpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgY29lcmNlIG1lc3NhZ2UgcHJvbXB0IHRlbXBsYXRlIGZyb20gaW5wdXQuIFJlY2VpdmVkIG1lc3NhZ2UgdHlwZTogXCIke21lc3NhZ2UuX2dldFR5cGUoKX1cIi5gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc01lc3NhZ2VzUGxhY2Vob2xkZXIoeCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcmV0dXJuIHguY29uc3RydWN0b3IubGNfbmFtZSgpID09PSBcIk1lc3NhZ2VzUGxhY2Vob2xkZXJcIjtcbn1cbi8qKlxuICogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgY2hhdCBwcm9tcHQuIEl0IGV4dGVuZHMgdGhlXG4gKiBCYXNlQ2hhdFByb21wdFRlbXBsYXRlIGFuZCB1c2VzIGFuIGFycmF5IG9mIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGVcbiAqIGluc3RhbmNlcyB0byBmb3JtYXQgYSBzZXJpZXMgb2YgbWVzc2FnZXMgZm9yIGEgY29udmVyc2F0aW9uLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IG1lc3NhZ2UgPSBTeXN0ZW1NZXNzYWdlUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwie3RleHR9XCIpO1xuICogY29uc3QgY2hhdFByb21wdCA9IENoYXRQcm9tcHRUZW1wbGF0ZS5mcm9tTWVzc2FnZXMoW1xuICogICBbXCJhaVwiLCBcIllvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC5cIl0sXG4gKiAgIG1lc3NhZ2UsXG4gKiBdKTtcbiAqIGNvbnN0IGZvcm1hdHRlZENoYXRQcm9tcHQgPSBhd2FpdCBjaGF0UHJvbXB0Lmludm9rZSh7XG4gKiAgIHRleHQ6IFwiSGVsbG8gd29ybGQhXCIsXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ2hhdFByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZUNoYXRQcm9tcHRUZW1wbGF0ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRQcm9tcHRUZW1wbGF0ZVwiO1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByb21wdE1lc3NhZ2VzOiBcIm1lc3NhZ2VzXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIHN1cGVyKGlucHV0KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvbXB0TWVzc2FnZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsaWRhdGVUZW1wbGF0ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGVtcGxhdGVGb3JtYXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiZi1zdHJpbmdcIlxuICAgICAgICB9KTtcbiAgICAgICAgLy8gSWYgaW5wdXQgaXMgbXVzdGFjaGUgYW5kIHZhbGlkYXRlVGVtcGxhdGUgaXMgbm90IGRlZmluZWQsIHNldCBpdCB0byBmYWxzZVxuICAgICAgICBpZiAoaW5wdXQudGVtcGxhdGVGb3JtYXQgPT09IFwibXVzdGFjaGVcIiAmJlxuICAgICAgICAgICAgaW5wdXQudmFsaWRhdGVUZW1wbGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlVGVtcGxhdGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGlucHV0KTtcbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVUZW1wbGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRWYXJpYWJsZXNNZXNzYWdlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvbXB0TWVzc2FnZSBvZiB0aGlzLnByb21wdE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgICAgIGlmIChwcm9tcHRNZXNzYWdlIGluc3RhbmNlb2YgQmFzZU1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaW5wdXRWYXJpYWJsZSBvZiBwcm9tcHRNZXNzYWdlLmlucHV0VmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0VmFyaWFibGVzTWVzc2FnZXMuYWRkKGlucHV0VmFyaWFibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRvdGFsSW5wdXRWYXJpYWJsZXMgPSB0aGlzLmlucHV0VmFyaWFibGVzO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRWYXJpYWJsZXNJbnN0YW5jZSA9IG5ldyBTZXQodGhpcy5wYXJ0aWFsVmFyaWFibGVzXG4gICAgICAgICAgICAgICAgPyB0b3RhbElucHV0VmFyaWFibGVzLmNvbmNhdChPYmplY3Qua2V5cyh0aGlzLnBhcnRpYWxWYXJpYWJsZXMpKVxuICAgICAgICAgICAgICAgIDogdG90YWxJbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgICAgICBjb25zdCBkaWZmZXJlbmNlID0gbmV3IFNldChbLi4uaW5wdXRWYXJpYWJsZXNJbnN0YW5jZV0uZmlsdGVyKCh4KSA9PiAhaW5wdXRWYXJpYWJsZXNNZXNzYWdlcy5oYXMoeCkpKTtcbiAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnB1dCB2YXJpYWJsZXMgXFxgJHtbXG4gICAgICAgICAgICAgICAgICAgIC4uLmRpZmZlcmVuY2UsXG4gICAgICAgICAgICAgICAgXX1cXGAgYXJlIG5vdCB1c2VkIGluIGFueSBvZiB0aGUgcHJvbXB0IG1lc3NhZ2VzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3RoZXJEaWZmZXJlbmNlID0gbmV3IFNldChbLi4uaW5wdXRWYXJpYWJsZXNNZXNzYWdlc10uZmlsdGVyKCh4KSA9PiAhaW5wdXRWYXJpYWJsZXNJbnN0YW5jZS5oYXMoeCkpKTtcbiAgICAgICAgICAgIGlmIChvdGhlckRpZmZlcmVuY2Uuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYElucHV0IHZhcmlhYmxlcyBcXGAke1tcbiAgICAgICAgICAgICAgICAgICAgLi4ub3RoZXJEaWZmZXJlbmNlLFxuICAgICAgICAgICAgICAgIF19XFxgIGFyZSB1c2VkIGluIHByb21wdCBtZXNzYWdlcyBidXQgbm90IGluIHRoZSBwcm9tcHQgdGVtcGxhdGUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2dldFByb21wdFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImNoYXRcIjtcbiAgICB9XG4gICAgYXN5bmMgX3BhcnNlSW1hZ2VQcm9tcHRzKG1lc3NhZ2UsIGlucHV0VmFsdWVzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlQ29udGVudCA9IGF3YWl0IFByb21pc2UuYWxsKG1lc3NhZ2UuY29udGVudC5tYXAoYXN5bmMgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgIT09IFwiaW1hZ2VfdXJsXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpbWFnZVVybCA9IFwiXCI7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0uaW1hZ2VfdXJsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBpdGVtLmltYWdlX3VybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGltYWdlVXJsID0gaXRlbS5pbWFnZV91cmwudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJvbXB0VGVtcGxhdGVQbGFjZWhvbGRlciA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShpbWFnZVVybCwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlRm9ybWF0OiB0aGlzLnRlbXBsYXRlRm9ybWF0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRVcmwgPSBhd2FpdCBwcm9tcHRUZW1wbGF0ZVBsYWNlaG9sZGVyLmZvcm1hdChpbnB1dFZhbHVlcyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0uaW1hZ2VfdXJsICE9PSBcInN0cmluZ1wiICYmIFwidXJsXCIgaW4gaXRlbS5pbWFnZV91cmwpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICBpdGVtLmltYWdlX3VybC51cmwgPSBmb3JtYXR0ZWRVcmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICBpdGVtLmltYWdlX3VybCA9IGZvcm1hdHRlZFVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBtZXNzYWdlLmNvbnRlbnQgPSBmb3JtYXR0ZWRNZXNzYWdlQ29udGVudDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdE1lc3NhZ2VzKHZhbHVlcykge1xuICAgICAgICBjb25zdCBhbGxWYWx1ZXMgPSBhd2FpdCB0aGlzLm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXModmFsdWVzKTtcbiAgICAgICAgbGV0IHJlc3VsdE1lc3NhZ2VzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcHJvbXB0TWVzc2FnZSBvZiB0aGlzLnByb21wdE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICBpZiAocHJvbXB0TWVzc2FnZSBpbnN0YW5jZW9mIEJhc2VNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0TWVzc2FnZXMucHVzaChhd2FpdCB0aGlzLl9wYXJzZUltYWdlUHJvbXB0cyhwcm9tcHRNZXNzYWdlLCBhbGxWYWx1ZXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBpbnB1dFZhbHVlcztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZUZvcm1hdCA9PT0gXCJtdXN0YWNoZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWVzID0geyAuLi5hbGxWYWx1ZXMgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWVzID0gcHJvbXB0TWVzc2FnZS5pbnB1dFZhcmlhYmxlcy5yZWR1Y2UoKGFjYywgaW5wdXRWYXJpYWJsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaW5wdXRWYXJpYWJsZSBpbiBhbGxWYWx1ZXMpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIShpc01lc3NhZ2VzUGxhY2Vob2xkZXIocHJvbXB0TWVzc2FnZSkgJiYgcHJvbXB0TWVzc2FnZS5vcHRpb25hbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGFkZExhbmdDaGFpbkVycm9yRmllbGRzKG5ldyBFcnJvcihgTWlzc2luZyB2YWx1ZSBmb3IgaW5wdXQgdmFyaWFibGUgXFxgJHtpbnB1dFZhcmlhYmxlLnRvU3RyaW5nKCl9XFxgYCksIFwiSU5WQUxJRF9QUk9NUFRfSU5QVVRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NbaW5wdXRWYXJpYWJsZV0gPSBhbGxWYWx1ZXNbaW5wdXRWYXJpYWJsZV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBwcm9tcHRNZXNzYWdlLmZvcm1hdE1lc3NhZ2VzKGlucHV0VmFsdWVzKTtcbiAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlcyA9IHJlc3VsdE1lc3NhZ2VzLmNvbmNhdChtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0TWVzc2FnZXM7XG4gICAgfVxuICAgIGFzeW5jIHBhcnRpYWwodmFsdWVzKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgaW1wbGVtZW50ZWQgaW4gYSB3YXkgaXQgZG9lc24ndCByZXF1aXJlIG1ha2luZ1xuICAgICAgICAvLyBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlIGF3YXJlIG9mIC5wYXJ0aWFsKClcbiAgICAgICAgY29uc3QgbmV3SW5wdXRWYXJpYWJsZXMgPSB0aGlzLmlucHV0VmFyaWFibGVzLmZpbHRlcigoaXYpID0+ICEoaXYgaW4gdmFsdWVzKSk7XG4gICAgICAgIGNvbnN0IG5ld1BhcnRpYWxWYXJpYWJsZXMgPSB7XG4gICAgICAgICAgICAuLi4odGhpcy5wYXJ0aWFsVmFyaWFibGVzID8/IHt9KSxcbiAgICAgICAgICAgIC4uLnZhbHVlcyxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcHJvbXB0RGljdCA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMsXG4gICAgICAgICAgICBpbnB1dFZhcmlhYmxlczogbmV3SW5wdXRWYXJpYWJsZXMsXG4gICAgICAgICAgICBwYXJ0aWFsVmFyaWFibGVzOiBuZXdQYXJ0aWFsVmFyaWFibGVzLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IENoYXRQcm9tcHRUZW1wbGF0ZShwcm9tcHREaWN0KTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcm9tcHQgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUodGVtcGxhdGUsIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBodW1hblRlbXBsYXRlID0gbmV3IEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlKHsgcHJvbXB0IH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tTWVzc2FnZXMoW2h1bWFuVGVtcGxhdGVdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY2hhdCBtb2RlbC1zcGVjaWZpYyBwcm9tcHQgZnJvbSBpbmRpdmlkdWFsIGNoYXQgbWVzc2FnZXNcbiAgICAgKiBvciBtZXNzYWdlLWxpa2UgdHVwbGVzLlxuICAgICAqIEBwYXJhbSBwcm9tcHRNZXNzYWdlcyBNZXNzYWdlcyB0byBiZSBwYXNzZWQgdG8gdGhlIGNoYXQgbW9kZWxcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBDaGF0UHJvbXB0VGVtcGxhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbU1lc3NhZ2VzKHByb21wdE1lc3NhZ2VzLCBleHRyYSkge1xuICAgICAgICBjb25zdCBmbGF0dGVuZWRNZXNzYWdlcyA9IHByb21wdE1lc3NhZ2VzLnJlZHVjZSgoYWNjLCBwcm9tcHRNZXNzYWdlKSA9PiBhY2MuY29uY2F0KFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIHByb21wdE1lc3NhZ2UgaW5zdGFuY2VvZiBDaGF0UHJvbXB0VGVtcGxhdGVcbiAgICAgICAgICAgID8gcHJvbXB0TWVzc2FnZS5wcm9tcHRNZXNzYWdlc1xuICAgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgX2NvZXJjZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UocHJvbXB0TWVzc2FnZSwgZXh0cmEpLFxuICAgICAgICAgICAgXSksIFtdKTtcbiAgICAgICAgY29uc3QgZmxhdHRlbmVkUGFydGlhbFZhcmlhYmxlcyA9IHByb21wdE1lc3NhZ2VzLnJlZHVjZSgoYWNjLCBwcm9tcHRNZXNzYWdlKSA9PiBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICBwcm9tcHRNZXNzYWdlIGluc3RhbmNlb2YgQ2hhdFByb21wdFRlbXBsYXRlXG4gICAgICAgICAgICA/IE9iamVjdC5hc3NpZ24oYWNjLCBwcm9tcHRNZXNzYWdlLnBhcnRpYWxWYXJpYWJsZXMpXG4gICAgICAgICAgICA6IGFjYywgT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gICAgICAgIGNvbnN0IGlucHV0VmFyaWFibGVzID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IHByb21wdE1lc3NhZ2Ugb2YgZmxhdHRlbmVkTWVzc2FnZXMpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgIGlmIChwcm9tcHRNZXNzYWdlIGluc3RhbmNlb2YgQmFzZU1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlucHV0VmFyaWFibGUgb2YgcHJvbXB0TWVzc2FnZS5pbnB1dFZhcmlhYmxlcykge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dFZhcmlhYmxlIGluIGZsYXR0ZW5lZFBhcnRpYWxWYXJpYWJsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlucHV0VmFyaWFibGVzLmFkZChpbnB1dFZhcmlhYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMoe1xuICAgICAgICAgICAgLi4uZXh0cmEsXG4gICAgICAgICAgICBpbnB1dFZhcmlhYmxlczogWy4uLmlucHV0VmFyaWFibGVzXSxcbiAgICAgICAgICAgIHByb21wdE1lc3NhZ2VzOiBmbGF0dGVuZWRNZXNzYWdlcyxcbiAgICAgICAgICAgIHBhcnRpYWxWYXJpYWJsZXM6IGZsYXR0ZW5lZFBhcnRpYWxWYXJpYWJsZXMsXG4gICAgICAgICAgICB0ZW1wbGF0ZUZvcm1hdDogZXh0cmE/LnRlbXBsYXRlRm9ybWF0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFJlbmFtZWQgdG8gLmZyb21NZXNzYWdlcyAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgc3RhdGljIGZyb21Qcm9tcHRNZXNzYWdlcyhwcm9tcHRNZXNzYWdlcykge1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tTWVzc2FnZXMocHJvbXB0TWVzc2FnZXMpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJBSU1lc3NhZ2UiLCJIdW1hbk1lc3NhZ2UiLCJTeXN0ZW1NZXNzYWdlIiwiQmFzZU1lc3NhZ2UiLCJDaGF0TWVzc2FnZSIsImNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlIiwiaXNCYXNlTWVzc2FnZSIsIkNoYXRQcm9tcHRWYWx1ZSIsIlJ1bm5hYmxlIiwiQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlIiwiQmFzZVByb21wdFRlbXBsYXRlIiwiUHJvbXB0VGVtcGxhdGUiLCJJbWFnZVByb21wdFRlbXBsYXRlIiwicGFyc2VGU3RyaW5nIiwicGFyc2VNdXN0YWNoZSIsImFkZExhbmdDaGFpbkVycm9yRmllbGRzIiwiRGljdFByb21wdFRlbXBsYXRlIiwiQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImludm9rZSIsImlucHV0Iiwib3B0aW9ucyIsIl9jYWxsV2l0aENvbmZpZyIsImZvcm1hdE1lc3NhZ2VzIiwicnVuVHlwZSIsIk1lc3NhZ2VzUGxhY2Vob2xkZXIiLCJsY19uYW1lIiwiZmllbGRzIiwidmFyaWFibGVOYW1lIiwib3B0aW9uYWwiLCJpbnB1dFZhcmlhYmxlcyIsInZhbHVlcyIsImVycm9yIiwiRXJyb3IiLCJuYW1lIiwiZm9ybWF0dGVkTWVzc2FnZXMiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJlIiwicmVhZGFibGVJbnB1dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJtZXNzYWdlIiwiam9pbiIsImxjX2Vycm9yX2NvZGUiLCJCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlIiwicHJvbXB0IiwiZm9ybWF0IiwiQmFzZUNoYXRQcm9tcHRUZW1wbGF0ZSIsImZvcm1hdFByb21wdFZhbHVlIiwidG9TdHJpbmciLCJyZXN1bHRNZXNzYWdlcyIsIkNoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUiLCJyb2xlIiwiZnJvbVRlbXBsYXRlIiwidGVtcGxhdGUiLCJ0ZW1wbGF0ZUZvcm1hdCIsImlzVGV4dFRlbXBsYXRlUGFyYW0iLCJwYXJhbSIsImtleXMiLCJsZW5ndGgiLCJ0ZXh0IiwiaXNJbWFnZVRlbXBsYXRlUGFyYW0iLCJpbWFnZV91cmwiLCJ1cmwiLCJfU3RyaW5nSW1hZ2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUiLCJfbWVzc2FnZUNsYXNzIiwiYWRkaXRpb25hbE9wdGlvbnMiLCJmb3JFYWNoIiwiY29uY2F0IiwiY3JlYXRlTWVzc2FnZSIsImNvbnRlbnQiLCJNc2dDbGFzcyIsImNoYXRNZXNzYWdlQ2xhc3MiLCJnZXRSb2xlRnJvbU1lc3NhZ2VDbGFzcyIsIml0ZW0iLCJwdXNoIiwiYWRkaXRpb25hbENvbnRlbnRGaWVsZHMiLCJpbWdUZW1wbGF0ZSIsImltZ1RlbXBsYXRlT2JqZWN0IiwicGFyc2VkVGVtcGxhdGUiLCJ2YXJpYWJsZXMiLCJmbGF0TWFwIiwidHlwZSIsImlucHV0cyIsImZvcm1hdHRlZCIsIkh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlIiwiQUlNZXNzYWdlUHJvbXB0VGVtcGxhdGUiLCJTeXN0ZW1NZXNzYWdlUHJvbXB0VGVtcGxhdGUiLCJfaXNCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlIiwiYmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UiLCJfY29lcmNlTWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZSIsIm1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UiLCJleHRyYSIsIm1lc3NhZ2VDb250ZW50Iiwic2xpY2UiLCJ0ZW1wbGF0ZURhdGEiLCJfZ2V0VHlwZSIsImlzSW5zdGFuY2UiLCJpc01lc3NhZ2VzUGxhY2Vob2xkZXIiLCJ4IiwiQ2hhdFByb21wdFRlbXBsYXRlIiwibGNfYWxpYXNlcyIsInByb21wdE1lc3NhZ2VzIiwidmFsaWRhdGVUZW1wbGF0ZSIsInVuZGVmaW5lZCIsImFzc2lnbiIsImlucHV0VmFyaWFibGVzTWVzc2FnZXMiLCJTZXQiLCJwcm9tcHRNZXNzYWdlIiwiaW5wdXRWYXJpYWJsZSIsImFkZCIsInRvdGFsSW5wdXRWYXJpYWJsZXMiLCJpbnB1dFZhcmlhYmxlc0luc3RhbmNlIiwicGFydGlhbFZhcmlhYmxlcyIsImRpZmZlcmVuY2UiLCJmaWx0ZXIiLCJoYXMiLCJzaXplIiwib3RoZXJEaWZmZXJlbmNlIiwiX2dldFByb21wdFR5cGUiLCJfcGFyc2VJbWFnZVByb21wdHMiLCJpbnB1dFZhbHVlcyIsImZvcm1hdHRlZE1lc3NhZ2VDb250ZW50IiwiUHJvbWlzZSIsImFsbCIsImltYWdlVXJsIiwicHJvbXB0VGVtcGxhdGVQbGFjZWhvbGRlciIsImZvcm1hdHRlZFVybCIsImFsbFZhbHVlcyIsIm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXMiLCJyZWR1Y2UiLCJhY2MiLCJwYXJ0aWFsIiwibmV3SW5wdXRWYXJpYWJsZXMiLCJpdiIsIm5ld1BhcnRpYWxWYXJpYWJsZXMiLCJwcm9tcHREaWN0IiwiaHVtYW5UZW1wbGF0ZSIsImZyb21NZXNzYWdlcyIsImZsYXR0ZW5lZE1lc3NhZ2VzIiwiZmxhdHRlbmVkUGFydGlhbFZhcmlhYmxlcyIsImNyZWF0ZSIsImZyb21Qcm9tcHRNZXNzYWdlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/dict.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/dict.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DictPromptTemplate: () => (/* binding */ DictPromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n\n\nclass DictPromptTemplate extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    static lc_name() {\n        return \"DictPromptTemplate\";\n    }\n    constructor(fields){\n        const templateFormat = fields.templateFormat ?? \"f-string\";\n        const inputVariables = _getInputVariables(fields.template, templateFormat);\n        super({\n            inputVariables,\n            ...fields\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompts\",\n                \"dict\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"template\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.template = fields.template;\n        this.templateFormat = templateFormat;\n        this.inputVariables = inputVariables;\n    }\n    async format(values) {\n        return _insertInputVariables(this.template, values, this.templateFormat);\n    }\n    async invoke(values) {\n        return await this._callWithConfig(this.format.bind(this), values, {\n            runType: \"prompt\"\n        });\n    }\n}\nfunction _getInputVariables(template, templateFormat) {\n    const inputVariables = [];\n    for (const v of Object.values(template)){\n        if (typeof v === \"string\") {\n            (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.parseTemplate)(v, templateFormat).forEach((t)=>{\n                if (t.type === \"variable\") {\n                    inputVariables.push(t.name);\n                }\n            });\n        } else if (Array.isArray(v)) {\n            for (const x of v){\n                if (typeof x === \"string\") {\n                    (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.parseTemplate)(x, templateFormat).forEach((t)=>{\n                        if (t.type === \"variable\") {\n                            inputVariables.push(t.name);\n                        }\n                    });\n                } else if (typeof x === \"object\") {\n                    inputVariables.push(..._getInputVariables(x, templateFormat));\n                }\n            }\n        } else if (typeof v === \"object\" && v !== null) {\n            inputVariables.push(..._getInputVariables(v, templateFormat));\n        }\n    }\n    return Array.from(new Set(inputVariables));\n}\nfunction _insertInputVariables(template, inputs, templateFormat) {\n    const formatted = {};\n    for (const [k, v] of Object.entries(template)){\n        if (typeof v === \"string\") {\n            formatted[k] = (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(v, templateFormat, inputs);\n        } else if (Array.isArray(v)) {\n            const formattedV = [];\n            for (const x of v){\n                if (typeof x === \"string\") {\n                    formattedV.push((0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(x, templateFormat, inputs));\n                } else if (typeof x === \"object\") {\n                    formattedV.push(_insertInputVariables(x, inputs, templateFormat));\n                }\n            }\n            formatted[k] = formattedV;\n        } else if (typeof v === \"object\" && v !== null) {\n            formatted[k] = _insertInputVariables(v, inputs, templateFormat);\n        } else {\n            formatted[k] = v;\n        }\n    }\n    return formatted;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9kaWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRDtBQUNjO0FBQ3ZELE1BQU1HLDJCQUEyQkgsd0RBQVFBO0lBQzVDLE9BQU9JLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLE1BQU1DLGlCQUFpQkQsT0FBT0MsY0FBYyxJQUFJO1FBQ2hELE1BQU1DLGlCQUFpQkMsbUJBQW1CSCxPQUFPSSxRQUFRLEVBQUVIO1FBQzNELEtBQUssQ0FBQztZQUFFQztZQUFnQixHQUFHRixNQUFNO1FBQUM7UUFDbENLLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjtnQkFBVzthQUFPO1FBQ2hEO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxrQkFBa0I7WUFDMUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGtCQUFrQjtZQUMxQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTixRQUFRLEdBQUdKLE9BQU9JLFFBQVE7UUFDL0IsSUFBSSxDQUFDSCxjQUFjLEdBQUdBO1FBQ3RCLElBQUksQ0FBQ0MsY0FBYyxHQUFHQTtJQUMxQjtJQUNBLE1BQU1TLE9BQU9DLE1BQU0sRUFBRTtRQUNqQixPQUFPQyxzQkFBc0IsSUFBSSxDQUFDVCxRQUFRLEVBQUVRLFFBQVEsSUFBSSxDQUFDWCxjQUFjO0lBQzNFO0lBQ0EsTUFBTWEsT0FBT0YsTUFBTSxFQUFFO1FBQ2pCLE9BQU8sTUFBTSxJQUFJLENBQUNHLGVBQWUsQ0FBQyxJQUFJLENBQUNKLE1BQU0sQ0FBQ0ssSUFBSSxDQUFDLElBQUksR0FBR0osUUFBUTtZQUM5REssU0FBUztRQUNiO0lBQ0o7QUFDSjtBQUNBLFNBQVNkLG1CQUFtQkMsUUFBUSxFQUFFSCxjQUFjO0lBQ2hELE1BQU1DLGlCQUFpQixFQUFFO0lBQ3pCLEtBQUssTUFBTWdCLEtBQUtiLE9BQU9PLE1BQU0sQ0FBQ1IsVUFBVztRQUNyQyxJQUFJLE9BQU9jLE1BQU0sVUFBVTtZQUN2QnZCLDJEQUFhQSxDQUFDdUIsR0FBR2pCLGdCQUFnQmtCLE9BQU8sQ0FBQyxDQUFDQztnQkFDdEMsSUFBSUEsRUFBRUMsSUFBSSxLQUFLLFlBQVk7b0JBQ3ZCbkIsZUFBZW9CLElBQUksQ0FBQ0YsRUFBRUcsSUFBSTtnQkFDOUI7WUFDSjtRQUNKLE9BQ0ssSUFBSUMsTUFBTUMsT0FBTyxDQUFDUCxJQUFJO1lBQ3ZCLEtBQUssTUFBTVEsS0FBS1IsRUFBRztnQkFDZixJQUFJLE9BQU9RLE1BQU0sVUFBVTtvQkFDdkIvQiwyREFBYUEsQ0FBQytCLEdBQUd6QixnQkFBZ0JrQixPQUFPLENBQUMsQ0FBQ0M7d0JBQ3RDLElBQUlBLEVBQUVDLElBQUksS0FBSyxZQUFZOzRCQUN2Qm5CLGVBQWVvQixJQUFJLENBQUNGLEVBQUVHLElBQUk7d0JBQzlCO29CQUNKO2dCQUNKLE9BQ0ssSUFBSSxPQUFPRyxNQUFNLFVBQVU7b0JBQzVCeEIsZUFBZW9CLElBQUksSUFBSW5CLG1CQUFtQnVCLEdBQUd6QjtnQkFDakQ7WUFDSjtRQUNKLE9BQ0ssSUFBSSxPQUFPaUIsTUFBTSxZQUFZQSxNQUFNLE1BQU07WUFDMUNoQixlQUFlb0IsSUFBSSxJQUFJbkIsbUJBQW1CZSxHQUFHakI7UUFDakQ7SUFDSjtJQUNBLE9BQU91QixNQUFNRyxJQUFJLENBQUMsSUFBSUMsSUFBSTFCO0FBQzlCO0FBQ0EsU0FBU1csc0JBQXNCVCxRQUFRLEVBQUV5QixNQUFNLEVBQUU1QixjQUFjO0lBQzNELE1BQU02QixZQUFZLENBQUM7SUFDbkIsS0FBSyxNQUFNLENBQUNDLEdBQUdiLEVBQUUsSUFBSWIsT0FBTzJCLE9BQU8sQ0FBQzVCLFVBQVc7UUFDM0MsSUFBSSxPQUFPYyxNQUFNLFVBQVU7WUFDdkJZLFNBQVMsQ0FBQ0MsRUFBRSxHQUFHbkMsNERBQWNBLENBQUNzQixHQUFHakIsZ0JBQWdCNEI7UUFDckQsT0FDSyxJQUFJTCxNQUFNQyxPQUFPLENBQUNQLElBQUk7WUFDdkIsTUFBTWUsYUFBYSxFQUFFO1lBQ3JCLEtBQUssTUFBTVAsS0FBS1IsRUFBRztnQkFDZixJQUFJLE9BQU9RLE1BQU0sVUFBVTtvQkFDdkJPLFdBQVdYLElBQUksQ0FBQzFCLDREQUFjQSxDQUFDOEIsR0FBR3pCLGdCQUFnQjRCO2dCQUN0RCxPQUNLLElBQUksT0FBT0gsTUFBTSxVQUFVO29CQUM1Qk8sV0FBV1gsSUFBSSxDQUFDVCxzQkFBc0JhLEdBQUdHLFFBQVE1QjtnQkFDckQ7WUFDSjtZQUNBNkIsU0FBUyxDQUFDQyxFQUFFLEdBQUdFO1FBQ25CLE9BQ0ssSUFBSSxPQUFPZixNQUFNLFlBQVlBLE1BQU0sTUFBTTtZQUMxQ1ksU0FBUyxDQUFDQyxFQUFFLEdBQUdsQixzQkFBc0JLLEdBQUdXLFFBQVE1QjtRQUNwRCxPQUNLO1lBQ0Q2QixTQUFTLENBQUNDLEVBQUUsR0FBR2I7UUFDbkI7SUFDSjtJQUNBLE9BQU9ZO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdHMvZGljdC5qcz85NzcwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVRlbXBsYXRlLCByZW5kZXJUZW1wbGF0ZSB9IGZyb20gXCIuL3RlbXBsYXRlLmpzXCI7XG5leHBvcnQgY2xhc3MgRGljdFByb21wdFRlbXBsYXRlIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJEaWN0UHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRm9ybWF0ID0gZmllbGRzLnRlbXBsYXRlRm9ybWF0ID8/IFwiZi1zdHJpbmdcIjtcbiAgICAgICAgY29uc3QgaW5wdXRWYXJpYWJsZXMgPSBfZ2V0SW5wdXRWYXJpYWJsZXMoZmllbGRzLnRlbXBsYXRlLCB0ZW1wbGF0ZUZvcm1hdCk7XG4gICAgICAgIHN1cGVyKHsgaW5wdXRWYXJpYWJsZXMsIC4uLmZpZWxkcyB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInByb21wdHNcIiwgXCJkaWN0XCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBsYXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBsYXRlRm9ybWF0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlucHV0VmFyaWFibGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBmaWVsZHMudGVtcGxhdGU7XG4gICAgICAgIHRoaXMudGVtcGxhdGVGb3JtYXQgPSB0ZW1wbGF0ZUZvcm1hdDtcbiAgICAgICAgdGhpcy5pbnB1dFZhcmlhYmxlcyA9IGlucHV0VmFyaWFibGVzO1xuICAgIH1cbiAgICBhc3luYyBmb3JtYXQodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBfaW5zZXJ0SW5wdXRWYXJpYWJsZXModGhpcy50ZW1wbGF0ZSwgdmFsdWVzLCB0aGlzLnRlbXBsYXRlRm9ybWF0KTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKHZhbHVlcykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5mb3JtYXQuYmluZCh0aGlzKSwgdmFsdWVzLCB7XG4gICAgICAgICAgICBydW5UeXBlOiBcInByb21wdFwiLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBfZ2V0SW5wdXRWYXJpYWJsZXModGVtcGxhdGUsIHRlbXBsYXRlRm9ybWF0KSB7XG4gICAgY29uc3QgaW5wdXRWYXJpYWJsZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHYgb2YgT2JqZWN0LnZhbHVlcyh0ZW1wbGF0ZSkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBwYXJzZVRlbXBsYXRlKHYsIHRlbXBsYXRlRm9ybWF0KS5mb3JFYWNoKCh0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHQudHlwZSA9PT0gXCJ2YXJpYWJsZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0VmFyaWFibGVzLnB1c2godC5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHggb2Ygdikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgeCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZVRlbXBsYXRlKHgsIHRlbXBsYXRlRm9ybWF0KS5mb3JFYWNoKCh0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodC50eXBlID09PSBcInZhcmlhYmxlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcy5wdXNoKHQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgeCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcy5wdXNoKC4uLl9nZXRJbnB1dFZhcmlhYmxlcyh4LCB0ZW1wbGF0ZUZvcm1hdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJiB2ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpbnB1dFZhcmlhYmxlcy5wdXNoKC4uLl9nZXRJbnB1dFZhcmlhYmxlcyh2LCB0ZW1wbGF0ZUZvcm1hdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQoaW5wdXRWYXJpYWJsZXMpKTtcbn1cbmZ1bmN0aW9uIF9pbnNlcnRJbnB1dFZhcmlhYmxlcyh0ZW1wbGF0ZSwgaW5wdXRzLCB0ZW1wbGF0ZUZvcm1hdCkge1xuICAgIGNvbnN0IGZvcm1hdHRlZCA9IHt9O1xuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHRlbXBsYXRlKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFtrXSA9IHJlbmRlclRlbXBsYXRlKHYsIHRlbXBsYXRlRm9ybWF0LCBpbnB1dHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZFYgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgeCBvZiB2KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB4ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFYucHVzaChyZW5kZXJUZW1wbGF0ZSh4LCB0ZW1wbGF0ZUZvcm1hdCwgaW5wdXRzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB4ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFYucHVzaChfaW5zZXJ0SW5wdXRWYXJpYWJsZXMoeCwgaW5wdXRzLCB0ZW1wbGF0ZUZvcm1hdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcm1hdHRlZFtrXSA9IGZvcm1hdHRlZFY7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZm9ybWF0dGVkW2tdID0gX2luc2VydElucHV0VmFyaWFibGVzKHYsIGlucHV0cywgdGVtcGxhdGVGb3JtYXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9ybWF0dGVkW2tdID0gdjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0dGVkO1xufVxuIl0sIm5hbWVzIjpbIlJ1bm5hYmxlIiwicGFyc2VUZW1wbGF0ZSIsInJlbmRlclRlbXBsYXRlIiwiRGljdFByb21wdFRlbXBsYXRlIiwibGNfbmFtZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwidGVtcGxhdGVGb3JtYXQiLCJpbnB1dFZhcmlhYmxlcyIsIl9nZXRJbnB1dFZhcmlhYmxlcyIsInRlbXBsYXRlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImZvcm1hdCIsInZhbHVlcyIsIl9pbnNlcnRJbnB1dFZhcmlhYmxlcyIsImludm9rZSIsIl9jYWxsV2l0aENvbmZpZyIsImJpbmQiLCJydW5UeXBlIiwidiIsImZvckVhY2giLCJ0IiwidHlwZSIsInB1c2giLCJuYW1lIiwiQXJyYXkiLCJpc0FycmF5IiwieCIsImZyb20iLCJTZXQiLCJpbnB1dHMiLCJmb3JtYXR0ZWQiLCJrIiwiZW50cmllcyIsImZvcm1hdHRlZFYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/dict.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/few_shot.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/few_shot.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FewShotChatMessagePromptTemplate: () => (/* binding */ FewShotChatMessagePromptTemplate),\n/* harmony export */   FewShotPromptTemplate: () => (/* binding */ FewShotPromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n/* harmony import */ var _prompt_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./prompt.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n\n\n\n\n/**\n * Prompt template that contains few-shot examples.\n * @augments BasePromptTemplate\n * @augments FewShotPromptTemplateInput\n * @example\n * ```typescript\n * const examplePrompt = PromptTemplate.fromTemplate(\n *   \"Input: {input}\\nOutput: {output}\",\n * );\n *\n * const exampleSelector = await SemanticSimilarityExampleSelector.fromExamples(\n *   [\n *     { input: \"happy\", output: \"sad\" },\n *     { input: \"tall\", output: \"short\" },\n *     { input: \"energetic\", output: \"lethargic\" },\n *     { input: \"sunny\", output: \"gloomy\" },\n *     { input: \"windy\", output: \"calm\" },\n *   ],\n *   new OpenAIEmbeddings(),\n *   HNSWLib,\n *   { k: 1 },\n * );\n *\n * const dynamicPrompt = new FewShotPromptTemplate({\n *   exampleSelector,\n *   examplePrompt,\n *   prefix: \"Give the antonym of every input\",\n *   suffix: \"Input: {adjective}\\nOutput:\",\n *   inputVariables: [\"adjective\"],\n * });\n *\n * // Format the dynamic prompt with the input 'rainy'\n * console.log(await dynamicPrompt.format({ adjective: \"rainy\" }));\n *\n * ```\n */ class FewShotPromptTemplate extends _string_js__WEBPACK_IMPORTED_MODULE_0__.BaseStringPromptTemplate {\n    constructor(input){\n        super(input);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"examples\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleSelector\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"examplePrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"suffix\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\"\n        });\n        Object.defineProperty(this, \"exampleSeparator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\\n\\n\"\n        });\n        Object.defineProperty(this, \"prefix\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\"\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"f-string\"\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.assign(this, input);\n        if (this.examples !== undefined && this.exampleSelector !== undefined) {\n            throw new Error(\"Only one of 'examples' and 'example_selector' should be provided\");\n        }\n        if (this.examples === undefined && this.exampleSelector === undefined) {\n            throw new Error(\"One of 'examples' and 'example_selector' should be provided\");\n        }\n        if (this.validateTemplate) {\n            let totalInputVariables = this.inputVariables;\n            if (this.partialVariables) {\n                totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n            }\n            (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.checkValidTemplate)(this.prefix + this.suffix, this.templateFormat, totalInputVariables);\n        }\n    }\n    _getPromptType() {\n        return \"few_shot\";\n    }\n    static lc_name() {\n        return \"FewShotPromptTemplate\";\n    }\n    async getExamples(inputVariables) {\n        if (this.examples !== undefined) {\n            return this.examples;\n        }\n        if (this.exampleSelector !== undefined) {\n            return this.exampleSelector.selectExamples(inputVariables);\n        }\n        throw new Error(\"One of 'examples' and 'example_selector' should be provided\");\n    }\n    async partial(values) {\n        const newInputVariables = this.inputVariables.filter((iv)=>!(iv in values));\n        const newPartialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables\n        };\n        return new FewShotPromptTemplate(promptDict);\n    }\n    /**\n     * Formats the prompt with the given values.\n     * @param values The values to format the prompt with.\n     * @returns A promise that resolves to a string representing the formatted prompt.\n     */ async format(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        const examples = await this.getExamples(allValues);\n        const exampleStrings = await Promise.all(examples.map((example)=>this.examplePrompt.format(example)));\n        const template = [\n            this.prefix,\n            ...exampleStrings,\n            this.suffix\n        ].join(this.exampleSeparator);\n        return (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(template, this.templateFormat, allValues);\n    }\n    serialize() {\n        if (this.exampleSelector || !this.examples) {\n            throw new Error(\"Serializing an example selector is not currently supported\");\n        }\n        if (this.outputParser !== undefined) {\n            throw new Error(\"Serializing an output parser is not currently supported\");\n        }\n        return {\n            _type: this._getPromptType(),\n            input_variables: this.inputVariables,\n            example_prompt: this.examplePrompt.serialize(),\n            example_separator: this.exampleSeparator,\n            suffix: this.suffix,\n            prefix: this.prefix,\n            template_format: this.templateFormat,\n            examples: this.examples\n        };\n    }\n    static async deserialize(data) {\n        const { example_prompt } = data;\n        if (!example_prompt) {\n            throw new Error(\"Missing example prompt\");\n        }\n        const examplePrompt = await _prompt_js__WEBPACK_IMPORTED_MODULE_2__.PromptTemplate.deserialize(example_prompt);\n        let examples;\n        if (Array.isArray(data.examples)) {\n            examples = data.examples;\n        } else {\n            throw new Error(\"Invalid examples format. Only list or string are supported.\");\n        }\n        return new FewShotPromptTemplate({\n            inputVariables: data.input_variables,\n            examplePrompt,\n            examples,\n            exampleSeparator: data.example_separator,\n            prefix: data.prefix,\n            suffix: data.suffix,\n            templateFormat: data.template_format\n        });\n    }\n}\n/**\n * Chat prompt template that contains few-shot examples.\n * @augments BasePromptTemplateInput\n * @augments FewShotChatMessagePromptTemplateInput\n */ class FewShotChatMessagePromptTemplate extends _chat_js__WEBPACK_IMPORTED_MODULE_3__.BaseChatPromptTemplate {\n    _getPromptType() {\n        return \"few_shot_chat\";\n    }\n    static lc_name() {\n        return \"FewShotChatMessagePromptTemplate\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"examples\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleSelector\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"examplePrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"suffix\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\"\n        });\n        Object.defineProperty(this, \"exampleSeparator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\\n\\n\"\n        });\n        Object.defineProperty(this, \"prefix\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\"\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"f-string\"\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.examples = fields.examples;\n        this.examplePrompt = fields.examplePrompt;\n        this.exampleSeparator = fields.exampleSeparator ?? \"\\n\\n\";\n        this.exampleSelector = fields.exampleSelector;\n        this.prefix = fields.prefix ?? \"\";\n        this.suffix = fields.suffix ?? \"\";\n        this.templateFormat = fields.templateFormat ?? \"f-string\";\n        this.validateTemplate = fields.validateTemplate ?? true;\n        if (this.examples !== undefined && this.exampleSelector !== undefined) {\n            throw new Error(\"Only one of 'examples' and 'example_selector' should be provided\");\n        }\n        if (this.examples === undefined && this.exampleSelector === undefined) {\n            throw new Error(\"One of 'examples' and 'example_selector' should be provided\");\n        }\n        if (this.validateTemplate) {\n            let totalInputVariables = this.inputVariables;\n            if (this.partialVariables) {\n                totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n            }\n            (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.checkValidTemplate)(this.prefix + this.suffix, this.templateFormat, totalInputVariables);\n        }\n    }\n    async getExamples(inputVariables) {\n        if (this.examples !== undefined) {\n            return this.examples;\n        }\n        if (this.exampleSelector !== undefined) {\n            return this.exampleSelector.selectExamples(inputVariables);\n        }\n        throw new Error(\"One of 'examples' and 'example_selector' should be provided\");\n    }\n    /**\n     * Formats the list of values and returns a list of formatted messages.\n     * @param values The values to format the prompt with.\n     * @returns A promise that resolves to a string representing the formatted prompt.\n     */ async formatMessages(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        let examples = await this.getExamples(allValues);\n        examples = examples.map((example)=>{\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const result = {};\n            this.examplePrompt.inputVariables.forEach((inputVariable)=>{\n                result[inputVariable] = example[inputVariable];\n            });\n            return result;\n        });\n        const messages = [];\n        for (const example of examples){\n            const exampleMessages = await this.examplePrompt.formatMessages(example);\n            messages.push(...exampleMessages);\n        }\n        return messages;\n    }\n    /**\n     * Formats the prompt with the given values.\n     * @param values The values to format the prompt with.\n     * @returns A promise that resolves to a string representing the formatted prompt.\n     */ async format(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        const examples = await this.getExamples(allValues);\n        const exampleMessages = await Promise.all(examples.map((example)=>this.examplePrompt.formatMessages(example)));\n        const exampleStrings = exampleMessages.flat().map((message)=>message.content);\n        const template = [\n            this.prefix,\n            ...exampleStrings,\n            this.suffix\n        ].join(this.exampleSeparator);\n        return (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(template, this.templateFormat, allValues);\n    }\n    /**\n     * Partially formats the prompt with the given values.\n     * @param values The values to partially format the prompt with.\n     * @returns A promise that resolves to an instance of `FewShotChatMessagePromptTemplate` with the given values partially formatted.\n     */ async partial(values) {\n        const newInputVariables = this.inputVariables.filter((variable)=>!(variable in values));\n        const newPartialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables\n        };\n        return new FewShotChatMessagePromptTemplate(promptDict);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9mZXdfc2hvdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUQ7QUFDYTtBQUN2QjtBQUNPO0FBQ3BEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW1DQyxHQUNNLE1BQU1LLDhCQUE4QkwsZ0VBQXdCQTtJQUMvRE0sWUFBWUMsS0FBSyxDQUFFO1FBQ2YsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxpQkFBaUI7WUFDekNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG9CQUFvQjtZQUM1Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJ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LENBQUN1QixJQUFJLENBQUMsSUFBSSxDQUFDQyxnQkFBZ0I7UUFDekYsT0FBT2hELDREQUFjQSxDQUFDOEMsVUFBVSxJQUFJLENBQUNyQixjQUFjLEVBQUVhO0lBQ3pEO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1SLFFBQVFDLE1BQU0sRUFBRTtRQUNsQixNQUFNQyxvQkFBb0IsSUFBSSxDQUFDYixjQUFjLENBQUNjLE1BQU0sQ0FBQyxDQUFDdUMsV0FBYSxDQUFFQSxDQUFBQSxZQUFZekMsTUFBSztRQUN0RixNQUFNSSxzQkFBc0I7WUFDeEIsR0FBSSxJQUFJLENBQUNmLGdCQUFnQixJQUFJLENBQUMsQ0FBQztZQUMvQixHQUFHVyxNQUFNO1FBQ2I7UUFDQSxNQUFNSyxhQUFhO1lBQ2YsR0FBRyxJQUFJO1lBQ1BqQixnQkFBZ0JhO1lBQ2hCWixrQkFBa0JlO1FBQ3RCO1FBQ0EsT0FBTyxJQUFJeUIsaUNBQWlDeEI7SUFDaEQ7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9mZXdfc2hvdC5qcz85YzRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL3N0cmluZy5qc1wiO1xuaW1wb3J0IHsgY2hlY2tWYWxpZFRlbXBsYXRlLCByZW5kZXJUZW1wbGF0ZSwgfSBmcm9tIFwiLi90ZW1wbGF0ZS5qc1wiO1xuaW1wb3J0IHsgUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9wcm9tcHQuanNcIjtcbmltcG9ydCB7IEJhc2VDaGF0UHJvbXB0VGVtcGxhdGUsIH0gZnJvbSBcIi4vY2hhdC5qc1wiO1xuLyoqXG4gKiBQcm9tcHQgdGVtcGxhdGUgdGhhdCBjb250YWlucyBmZXctc2hvdCBleGFtcGxlcy5cbiAqIEBhdWdtZW50cyBCYXNlUHJvbXB0VGVtcGxhdGVcbiAqIEBhdWdtZW50cyBGZXdTaG90UHJvbXB0VGVtcGxhdGVJbnB1dFxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGV4YW1wbGVQcm9tcHQgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4gKiAgIFwiSW5wdXQ6IHtpbnB1dH1cXG5PdXRwdXQ6IHtvdXRwdXR9XCIsXG4gKiApO1xuICpcbiAqIGNvbnN0IGV4YW1wbGVTZWxlY3RvciA9IGF3YWl0IFNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3Rvci5mcm9tRXhhbXBsZXMoXG4gKiAgIFtcbiAqICAgICB7IGlucHV0OiBcImhhcHB5XCIsIG91dHB1dDogXCJzYWRcIiB9LFxuICogICAgIHsgaW5wdXQ6IFwidGFsbFwiLCBvdXRwdXQ6IFwic2hvcnRcIiB9LFxuICogICAgIHsgaW5wdXQ6IFwiZW5lcmdldGljXCIsIG91dHB1dDogXCJsZXRoYXJnaWNcIiB9LFxuICogICAgIHsgaW5wdXQ6IFwic3VubnlcIiwgb3V0cHV0OiBcImdsb29teVwiIH0sXG4gKiAgICAgeyBpbnB1dDogXCJ3aW5keVwiLCBvdXRwdXQ6IFwiY2FsbVwiIH0sXG4gKiAgIF0sXG4gKiAgIG5ldyBPcGVuQUlFbWJlZGRpbmdzKCksXG4gKiAgIEhOU1dMaWIsXG4gKiAgIHsgazogMSB9LFxuICogKTtcbiAqXG4gKiBjb25zdCBkeW5hbWljUHJvbXB0ID0gbmV3IEZld1Nob3RQcm9tcHRUZW1wbGF0ZSh7XG4gKiAgIGV4YW1wbGVTZWxlY3RvcixcbiAqICAgZXhhbXBsZVByb21wdCxcbiAqICAgcHJlZml4OiBcIkdpdmUgdGhlIGFudG9ueW0gb2YgZXZlcnkgaW5wdXRcIixcbiAqICAgc3VmZml4OiBcIklucHV0OiB7YWRqZWN0aXZlfVxcbk91dHB1dDpcIixcbiAqICAgaW5wdXRWYXJpYWJsZXM6IFtcImFkamVjdGl2ZVwiXSxcbiAqIH0pO1xuICpcbiAqIC8vIEZvcm1hdCB0aGUgZHluYW1pYyBwcm9tcHQgd2l0aCB0aGUgaW5wdXQgJ3JhaW55J1xuICogY29uc29sZS5sb2coYXdhaXQgZHluYW1pY1Byb21wdC5mb3JtYXQoeyBhZGplY3RpdmU6IFwicmFpbnlcIiB9KSk7XG4gKlxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBGZXdTaG90UHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUge1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIHN1cGVyKGlucHV0KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhhbXBsZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhhbXBsZVNlbGVjdG9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4YW1wbGVQcm9tcHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3VmZml4XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIlwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlU2VwYXJhdG9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIlxcblxcblwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcmVmaXhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBsYXRlRm9ybWF0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImYtc3RyaW5nXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbGlkYXRlVGVtcGxhdGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgaW5wdXQpO1xuICAgICAgICBpZiAodGhpcy5leGFtcGxlcyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuZXhhbXBsZVNlbGVjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9ubHkgb25lIG9mICdleGFtcGxlcycgYW5kICdleGFtcGxlX3NlbGVjdG9yJyBzaG91bGQgYmUgcHJvdmlkZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhhbXBsZXMgPT09IHVuZGVmaW5lZCAmJiB0aGlzLmV4YW1wbGVTZWxlY3RvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPbmUgb2YgJ2V4YW1wbGVzJyBhbmQgJ2V4YW1wbGVfc2VsZWN0b3InIHNob3VsZCBiZSBwcm92aWRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWxpZGF0ZVRlbXBsYXRlKSB7XG4gICAgICAgICAgICBsZXQgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJ0aWFsVmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRvdGFsSW5wdXRWYXJpYWJsZXMuY29uY2F0KE9iamVjdC5rZXlzKHRoaXMucGFydGlhbFZhcmlhYmxlcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2tWYWxpZFRlbXBsYXRlKHRoaXMucHJlZml4ICsgdGhpcy5zdWZmaXgsIHRoaXMudGVtcGxhdGVGb3JtYXQsIHRvdGFsSW5wdXRWYXJpYWJsZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRQcm9tcHRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJmZXdfc2hvdFwiO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRmV3U2hvdFByb21wdFRlbXBsYXRlXCI7XG4gICAgfVxuICAgIGFzeW5jIGdldEV4YW1wbGVzKGlucHV0VmFyaWFibGVzKSB7XG4gICAgICAgIGlmICh0aGlzLmV4YW1wbGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4YW1wbGVzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4YW1wbGVTZWxlY3RvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGFtcGxlU2VsZWN0b3Iuc2VsZWN0RXhhbXBsZXMoaW5wdXRWYXJpYWJsZXMpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9uZSBvZiAnZXhhbXBsZXMnIGFuZCAnZXhhbXBsZV9zZWxlY3Rvcicgc2hvdWxkIGJlIHByb3ZpZGVkXCIpO1xuICAgIH1cbiAgICBhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuICAgICAgICBjb25zdCBuZXdJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXMuZmlsdGVyKChpdikgPT4gIShpdiBpbiB2YWx1ZXMpKTtcbiAgICAgICAgY29uc3QgbmV3UGFydGlhbFZhcmlhYmxlcyA9IHtcbiAgICAgICAgICAgIC4uLih0aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30pLFxuICAgICAgICAgICAgLi4udmFsdWVzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwcm9tcHREaWN0ID0ge1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIGlucHV0VmFyaWFibGVzOiBuZXdJbnB1dFZhcmlhYmxlcyxcbiAgICAgICAgICAgIHBhcnRpYWxWYXJpYWJsZXM6IG5ld1BhcnRpYWxWYXJpYWJsZXMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgRmV3U2hvdFByb21wdFRlbXBsYXRlKHByb21wdERpY3QpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIHRoZSBwcm9tcHQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzLlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBmb3JtYXQgdGhlIHByb21wdCB3aXRoLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZm9ybWF0dGVkIHByb21wdC5cbiAgICAgKi9cbiAgICBhc3luYyBmb3JtYXQodmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IGFsbFZhbHVlcyA9IGF3YWl0IHRoaXMubWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyh2YWx1ZXMpO1xuICAgICAgICBjb25zdCBleGFtcGxlcyA9IGF3YWl0IHRoaXMuZ2V0RXhhbXBsZXMoYWxsVmFsdWVzKTtcbiAgICAgICAgY29uc3QgZXhhbXBsZVN0cmluZ3MgPSBhd2FpdCBQcm9taXNlLmFsbChleGFtcGxlcy5tYXAoKGV4YW1wbGUpID0+IHRoaXMuZXhhbXBsZVByb21wdC5mb3JtYXQoZXhhbXBsZSkpKTtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBbdGhpcy5wcmVmaXgsIC4uLmV4YW1wbGVTdHJpbmdzLCB0aGlzLnN1ZmZpeF0uam9pbih0aGlzLmV4YW1wbGVTZXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMudGVtcGxhdGVGb3JtYXQsIGFsbFZhbHVlcyk7XG4gICAgfVxuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZXhhbXBsZVNlbGVjdG9yIHx8ICF0aGlzLmV4YW1wbGVzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZXJpYWxpemluZyBhbiBleGFtcGxlIHNlbGVjdG9yIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFBhcnNlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZXJpYWxpemluZyBhbiBvdXRwdXQgcGFyc2VyIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fZ2V0UHJvbXB0VHlwZSgpLFxuICAgICAgICAgICAgaW5wdXRfdmFyaWFibGVzOiB0aGlzLmlucHV0VmFyaWFibGVzLFxuICAgICAgICAgICAgZXhhbXBsZV9wcm9tcHQ6IHRoaXMuZXhhbXBsZVByb21wdC5zZXJpYWxpemUoKSxcbiAgICAgICAgICAgIGV4YW1wbGVfc2VwYXJhdG9yOiB0aGlzLmV4YW1wbGVTZXBhcmF0b3IsXG4gICAgICAgICAgICBzdWZmaXg6IHRoaXMuc3VmZml4LFxuICAgICAgICAgICAgcHJlZml4OiB0aGlzLnByZWZpeCxcbiAgICAgICAgICAgIHRlbXBsYXRlX2Zvcm1hdDogdGhpcy50ZW1wbGF0ZUZvcm1hdCxcbiAgICAgICAgICAgIGV4YW1wbGVzOiB0aGlzLmV4YW1wbGVzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoZGF0YSkge1xuICAgICAgICBjb25zdCB7IGV4YW1wbGVfcHJvbXB0IH0gPSBkYXRhO1xuICAgICAgICBpZiAoIWV4YW1wbGVfcHJvbXB0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGV4YW1wbGUgcHJvbXB0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4YW1wbGVQcm9tcHQgPSBhd2FpdCBQcm9tcHRUZW1wbGF0ZS5kZXNlcmlhbGl6ZShleGFtcGxlX3Byb21wdCk7XG4gICAgICAgIGxldCBleGFtcGxlcztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YS5leGFtcGxlcykpIHtcbiAgICAgICAgICAgIGV4YW1wbGVzID0gZGF0YS5leGFtcGxlcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZXhhbXBsZXMgZm9ybWF0LiBPbmx5IGxpc3Qgb3Igc3RyaW5nIGFyZSBzdXBwb3J0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRmV3U2hvdFByb21wdFRlbXBsYXRlKHtcbiAgICAgICAgICAgIGlucHV0VmFyaWFibGVzOiBkYXRhLmlucHV0X3ZhcmlhYmxlcyxcbiAgICAgICAgICAgIGV4YW1wbGVQcm9tcHQsXG4gICAgICAgICAgICBleGFtcGxlcyxcbiAgICAgICAgICAgIGV4YW1wbGVTZXBhcmF0b3I6IGRhdGEuZXhhbXBsZV9zZXBhcmF0b3IsXG4gICAgICAgICAgICBwcmVmaXg6IGRhdGEucHJlZml4LFxuICAgICAgICAgICAgc3VmZml4OiBkYXRhLnN1ZmZpeCxcbiAgICAgICAgICAgIHRlbXBsYXRlRm9ybWF0OiBkYXRhLnRlbXBsYXRlX2Zvcm1hdCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBDaGF0IHByb21wdCB0ZW1wbGF0ZSB0aGF0IGNvbnRhaW5zIGZldy1zaG90IGV4YW1wbGVzLlxuICogQGF1Z21lbnRzIEJhc2VQcm9tcHRUZW1wbGF0ZUlucHV0XG4gKiBAYXVnbWVudHMgRmV3U2hvdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGVJbnB1dFxuICovXG5leHBvcnQgY2xhc3MgRmV3U2hvdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlQ2hhdFByb21wdFRlbXBsYXRlIHtcbiAgICBfZ2V0UHJvbXB0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZmV3X3Nob3RfY2hhdFwiO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRmV3U2hvdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhhbXBsZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhhbXBsZVNlbGVjdG9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4YW1wbGVQcm9tcHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3VmZml4XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIlwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlU2VwYXJhdG9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIlxcblxcblwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcmVmaXhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBsYXRlRm9ybWF0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImYtc3RyaW5nXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbGlkYXRlVGVtcGxhdGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhhbXBsZXMgPSBmaWVsZHMuZXhhbXBsZXM7XG4gICAgICAgIHRoaXMuZXhhbXBsZVByb21wdCA9IGZpZWxkcy5leGFtcGxlUHJvbXB0O1xuICAgICAgICB0aGlzLmV4YW1wbGVTZXBhcmF0b3IgPSBmaWVsZHMuZXhhbXBsZVNlcGFyYXRvciA/PyBcIlxcblxcblwiO1xuICAgICAgICB0aGlzLmV4YW1wbGVTZWxlY3RvciA9IGZpZWxkcy5leGFtcGxlU2VsZWN0b3I7XG4gICAgICAgIHRoaXMucHJlZml4ID0gZmllbGRzLnByZWZpeCA/PyBcIlwiO1xuICAgICAgICB0aGlzLnN1ZmZpeCA9IGZpZWxkcy5zdWZmaXggPz8gXCJcIjtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUZvcm1hdCA9IGZpZWxkcy50ZW1wbGF0ZUZvcm1hdCA/PyBcImYtc3RyaW5nXCI7XG4gICAgICAgIHRoaXMudmFsaWRhdGVUZW1wbGF0ZSA9IGZpZWxkcy52YWxpZGF0ZVRlbXBsYXRlID8/IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmV4YW1wbGVzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5leGFtcGxlU2VsZWN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT25seSBvbmUgb2YgJ2V4YW1wbGVzJyBhbmQgJ2V4YW1wbGVfc2VsZWN0b3InIHNob3VsZCBiZSBwcm92aWRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGFtcGxlcyA9PT0gdW5kZWZpbmVkICYmIHRoaXMuZXhhbXBsZVNlbGVjdG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9uZSBvZiAnZXhhbXBsZXMnIGFuZCAnZXhhbXBsZV9zZWxlY3Rvcicgc2hvdWxkIGJlIHByb3ZpZGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbGlkYXRlVGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGxldCB0b3RhbElucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcztcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcnRpYWxWYXJpYWJsZXMpIHtcbiAgICAgICAgICAgICAgICB0b3RhbElucHV0VmFyaWFibGVzID0gdG90YWxJbnB1dFZhcmlhYmxlcy5jb25jYXQoT2JqZWN0LmtleXModGhpcy5wYXJ0aWFsVmFyaWFibGVzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVja1ZhbGlkVGVtcGxhdGUodGhpcy5wcmVmaXggKyB0aGlzLnN1ZmZpeCwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgdG90YWxJbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZ2V0RXhhbXBsZXMoaW5wdXRWYXJpYWJsZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuZXhhbXBsZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhhbXBsZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhhbXBsZVNlbGVjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4YW1wbGVTZWxlY3Rvci5zZWxlY3RFeGFtcGxlcyhpbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT25lIG9mICdleGFtcGxlcycgYW5kICdleGFtcGxlX3NlbGVjdG9yJyBzaG91bGQgYmUgcHJvdmlkZWRcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgdGhlIGxpc3Qgb2YgdmFsdWVzIGFuZCByZXR1cm5zIGEgbGlzdCBvZiBmb3JtYXR0ZWQgbWVzc2FnZXMuXG4gICAgICogQHBhcmFtIHZhbHVlcyBUaGUgdmFsdWVzIHRvIGZvcm1hdCB0aGUgcHJvbXB0IHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBmb3JtYXR0ZWQgcHJvbXB0LlxuICAgICAqL1xuICAgIGFzeW5jIGZvcm1hdE1lc3NhZ2VzKHZhbHVlcykge1xuICAgICAgICBjb25zdCBhbGxWYWx1ZXMgPSBhd2FpdCB0aGlzLm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXModmFsdWVzKTtcbiAgICAgICAgbGV0IGV4YW1wbGVzID0gYXdhaXQgdGhpcy5nZXRFeGFtcGxlcyhhbGxWYWx1ZXMpO1xuICAgICAgICBleGFtcGxlcyA9IGV4YW1wbGVzLm1hcCgoZXhhbXBsZSkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgICAgICAgdGhpcy5leGFtcGxlUHJvbXB0LmlucHV0VmFyaWFibGVzLmZvckVhY2goKGlucHV0VmFyaWFibGUpID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHRbaW5wdXRWYXJpYWJsZV0gPSBleGFtcGxlW2lucHV0VmFyaWFibGVdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBleGFtcGxlIG9mIGV4YW1wbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBleGFtcGxlTWVzc2FnZXMgPSBhd2FpdCB0aGlzLmV4YW1wbGVQcm9tcHQuZm9ybWF0TWVzc2FnZXMoZXhhbXBsZSk7XG4gICAgICAgICAgICBtZXNzYWdlcy5wdXNoKC4uLmV4YW1wbGVNZXNzYWdlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIHRoZSBwcm9tcHQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzLlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBmb3JtYXQgdGhlIHByb21wdCB3aXRoLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZm9ybWF0dGVkIHByb21wdC5cbiAgICAgKi9cbiAgICBhc3luYyBmb3JtYXQodmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IGFsbFZhbHVlcyA9IGF3YWl0IHRoaXMubWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyh2YWx1ZXMpO1xuICAgICAgICBjb25zdCBleGFtcGxlcyA9IGF3YWl0IHRoaXMuZ2V0RXhhbXBsZXMoYWxsVmFsdWVzKTtcbiAgICAgICAgY29uc3QgZXhhbXBsZU1lc3NhZ2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoZXhhbXBsZXMubWFwKChleGFtcGxlKSA9PiB0aGlzLmV4YW1wbGVQcm9tcHQuZm9ybWF0TWVzc2FnZXMoZXhhbXBsZSkpKTtcbiAgICAgICAgY29uc3QgZXhhbXBsZVN0cmluZ3MgPSBleGFtcGxlTWVzc2FnZXNcbiAgICAgICAgICAgIC5mbGF0KClcbiAgICAgICAgICAgIC5tYXAoKG1lc3NhZ2UpID0+IG1lc3NhZ2UuY29udGVudCk7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gW3RoaXMucHJlZml4LCAuLi5leGFtcGxlU3RyaW5ncywgdGhpcy5zdWZmaXhdLmpvaW4odGhpcy5leGFtcGxlU2VwYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzLnRlbXBsYXRlRm9ybWF0LCBhbGxWYWx1ZXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJ0aWFsbHkgZm9ybWF0cyB0aGUgcHJvbXB0IHdpdGggdGhlIGdpdmVuIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gcGFydGlhbGx5IGZvcm1hdCB0aGUgcHJvbXB0IHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gaW5zdGFuY2Ugb2YgYEZld1Nob3RDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlYCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMgcGFydGlhbGx5IGZvcm1hdHRlZC5cbiAgICAgKi9cbiAgICBhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuICAgICAgICBjb25zdCBuZXdJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXMuZmlsdGVyKCh2YXJpYWJsZSkgPT4gISh2YXJpYWJsZSBpbiB2YWx1ZXMpKTtcbiAgICAgICAgY29uc3QgbmV3UGFydGlhbFZhcmlhYmxlcyA9IHtcbiAgICAgICAgICAgIC4uLih0aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30pLFxuICAgICAgICAgICAgLi4udmFsdWVzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwcm9tcHREaWN0ID0ge1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIGlucHV0VmFyaWFibGVzOiBuZXdJbnB1dFZhcmlhYmxlcyxcbiAgICAgICAgICAgIHBhcnRpYWxWYXJpYWJsZXM6IG5ld1BhcnRpYWxWYXJpYWJsZXMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgRmV3U2hvdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUocHJvbXB0RGljdCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSIsImNoZWNrVmFsaWRUZW1wbGF0ZSIsInJlbmRlclRlbXBsYXRlIiwiUHJvbXB0VGVtcGxhdGUiLCJCYXNlQ2hhdFByb21wdFRlbXBsYXRlIiwiRmV3U2hvdFByb21wdFRlbXBsYXRlIiwiY29uc3RydWN0b3IiLCJpbnB1dCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJhc3NpZ24iLCJleGFtcGxlcyIsInVuZGVmaW5lZCIsImV4YW1wbGVTZWxlY3RvciIsIkVycm9yIiwidmFsaWRhdGVUZW1wbGF0ZSIsInRvdGFsSW5wdXRWYXJpYWJsZXMiLCJpbnB1dFZhcmlhYmxlcyIsInBhcnRpYWxWYXJpYWJsZXMiLCJjb25jYXQiLCJrZXlzIiwicHJlZml4Iiwic3VmZml4IiwidGVtcGxhdGVGb3JtYXQiLCJfZ2V0UHJvbXB0VHlwZSIsImxjX25hbWUiLCJnZXRFeGFtcGxlcyIsInNlbGVjdEV4YW1wbGVzIiwicGFydGlhbCIsInZhbHVlcyIsIm5ld0lucHV0VmFyaWFibGVzIiwiZmlsdGVyIiwiaXYiLCJuZXdQYXJ0aWFsVmFyaWFibGVzIiwicHJvbXB0RGljdCIsImZvcm1hdCIsImFsbFZhbHVlcyIsIm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXMiLCJleGFtcGxlU3RyaW5ncyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJleGFtcGxlIiwiZXhhbXBsZVByb21wdCIsInRlbXBsYXRlIiwiam9pbiIsImV4YW1wbGVTZXBhcmF0b3IiLCJzZXJpYWxpemUiLCJvdXRwdXRQYXJzZXIiLCJfdHlwZSIsImlucHV0X3ZhcmlhYmxlcyIsImV4YW1wbGVfcHJvbXB0IiwiZXhhbXBsZV9zZXBhcmF0b3IiLCJ0ZW1wbGF0ZV9mb3JtYXQiLCJkZXNlcmlhbGl6ZSIsImRhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJGZXdTaG90Q2hhdE1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSIsImZpZWxkcyIsImZvcm1hdE1lc3NhZ2VzIiwicmVzdWx0IiwiZm9yRWFjaCIsImlucHV0VmFyaWFibGUiLCJtZXNzYWdlcyIsImV4YW1wbGVNZXNzYWdlcyIsInB1c2giLCJmbGF0IiwibWVzc2FnZSIsImNvbnRlbnQiLCJ2YXJpYWJsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/few_shot.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/image.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/image.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImagePromptTemplate: () => (/* binding */ ImagePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n\n\n\n/**\n * An image prompt template for a multimodal model.\n */ class ImagePromptTemplate extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BasePromptTemplate {\n    static lc_name() {\n        return \"ImagePromptTemplate\";\n    }\n    constructor(input){\n        super(input);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompts\",\n                \"image\"\n            ]\n        });\n        Object.defineProperty(this, \"template\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"f-string\"\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /**\n         * Additional fields which should be included inside\n         * the message content array if using a complex message\n         * content.\n         */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"additionalContentFields\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.template = input.template;\n        this.templateFormat = input.templateFormat ?? this.templateFormat;\n        this.validateTemplate = input.validateTemplate ?? this.validateTemplate;\n        this.additionalContentFields = input.additionalContentFields;\n        if (this.validateTemplate) {\n            let totalInputVariables = this.inputVariables;\n            if (this.partialVariables) {\n                totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n            }\n            (0,_template_js__WEBPACK_IMPORTED_MODULE_2__.checkValidTemplate)([\n                {\n                    type: \"image_url\",\n                    image_url: this.template\n                }\n            ], this.templateFormat, totalInputVariables);\n        }\n    }\n    _getPromptType() {\n        return \"prompt\";\n    }\n    /**\n     * Partially applies values to the prompt template.\n     * @param values The values to be partially applied to the prompt template.\n     * @returns A new instance of ImagePromptTemplate with the partially applied values.\n     */ async partial(values) {\n        const newInputVariables = this.inputVariables.filter((iv)=>!(iv in values));\n        const newPartialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables\n        };\n        return new ImagePromptTemplate(promptDict);\n    }\n    /**\n     * Formats the prompt template with the provided values.\n     * @param values The values to be used to format the prompt template.\n     * @returns A promise that resolves to a string which is the formatted prompt.\n     */ async format(values) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const formatted = {};\n        for (const [key, value] of Object.entries(this.template)){\n            if (typeof value === \"string\") {\n                formatted[key] = (0,_template_js__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)(value, this.templateFormat, values);\n            } else {\n                formatted[key] = value;\n            }\n        }\n        const url = values.url || formatted.url;\n        const detail = values.detail || formatted.detail;\n        if (!url) {\n            throw new Error(\"Must provide either an image URL.\");\n        }\n        if (typeof url !== \"string\") {\n            throw new Error(\"url must be a string.\");\n        }\n        const output = {\n            url\n        };\n        if (detail) {\n            output.detail = detail;\n        }\n        return output;\n    }\n    /**\n     * Formats the prompt given the input values and returns a formatted\n     * prompt value.\n     * @param values The input values to format the prompt.\n     * @returns A Promise that resolves to a formatted prompt value.\n     */ async formatPromptValue(values) {\n        const formattedPrompt = await this.format(values);\n        return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__.ImagePromptValue(formattedPrompt);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9pbWFnZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVEO0FBQ1A7QUFDb0I7QUFDcEU7O0NBRUMsR0FDTSxNQUFNSSw0QkFBNEJILHdEQUFrQkE7SUFDdkQsT0FBT0ksVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxLQUFLLENBQUU7UUFDZixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjtnQkFBVzthQUFRO1FBQ2pEO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxvQkFBb0I7WUFDNUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBOzs7O1NBSUMsR0FDRCw4REFBOEQ7UUFDOURMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsMkJBQTJCO1lBQ25EQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFFBQVEsR0FBR1AsTUFBTU8sUUFBUTtRQUM5QixJQUFJLENBQUNDLGNBQWMsR0FBR1IsTUFBTVEsY0FBYyxJQUFJLElBQUksQ0FBQ0EsY0FBYztRQUNqRSxJQUFJLENBQUNDLGdCQUFnQixHQUFHVCxNQUFNUyxnQkFBZ0IsSUFBSSxJQUFJLENBQUNBLGdCQUFnQjtRQUN2RSxJQUFJLENBQUNDLHVCQUF1QixHQUFHVixNQUFNVSx1QkFBdUI7UUFDNUQsSUFBSSxJQUFJLENBQUNELGdCQUFnQixFQUFFO1lBQ3ZCLElBQUlFLHNCQUFzQixJQUFJLENBQUNDLGNBQWM7WUFDN0MsSUFBSSxJQUFJLENBQUNDLGdCQUFnQixFQUFFO2dCQUN2QkYsc0JBQXNCQSxvQkFBb0JHLE1BQU0sQ0FBQ2IsT0FBT2MsSUFBSSxDQUFDLElBQUksQ0FBQ0YsZ0JBQWdCO1lBQ3RGO1lBQ0FsQixnRUFBa0JBLENBQUM7Z0JBQ2Y7b0JBQUVxQixNQUFNO29CQUFhQyxXQUFXLElBQUksQ0FBQ1YsUUFBUTtnQkFBQzthQUNqRCxFQUFFLElBQUksQ0FBQ0MsY0FBYyxFQUFFRztRQUM1QjtJQUNKO0lBQ0FPLGlCQUFpQjtRQUNiLE9BQU87SUFDWDtJQUNBOzs7O0tBSUMsR0FDRCxNQUFNQyxRQUFRQyxNQUFNLEVBQUU7UUFDbEIsTUFBTUMsb0JBQW9CLElBQUksQ0FBQ1QsY0FBYyxDQUFDVSxNQUFNLENBQUMsQ0FBQ0MsS0FBTyxDQUFFQSxDQUFBQSxNQUFNSCxNQUFLO1FBQzFFLE1BQU1JLHNCQUFzQjtZQUN4QixHQUFJLElBQUksQ0FBQ1gsZ0JBQWdCLElBQUksQ0FBQyxDQUFDO1lBQy9CLEdBQUdPLE1BQU07UUFDYjtRQUNBLE1BQU1LLGFBQWE7WUFDZixHQUFHLElBQUk7WUFDUGIsZ0JBQWdCUztZQUNoQlIsa0JBQWtCVztRQUN0QjtRQUNBLE9BQU8sSUFBSTNCLG9CQUFvQjRCO0lBQ25DO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1DLE9BQU9OLE1BQU0sRUFBRTtRQUNqQiw4REFBOEQ7UUFDOUQsTUFBTU8sWUFBWSxDQUFDO1FBQ25CLEtBQUssTUFBTSxDQUFDQyxLQUFLdEIsTUFBTSxJQUFJTCxPQUFPNEIsT0FBTyxDQUFDLElBQUksQ0FBQ3RCLFFBQVEsRUFBRztZQUN0RCxJQUFJLE9BQU9ELFVBQVUsVUFBVTtnQkFDM0JxQixTQUFTLENBQUNDLElBQUksR0FBR2hDLDREQUFjQSxDQUFDVSxPQUFPLElBQUksQ0FBQ0UsY0FBYyxFQUFFWTtZQUNoRSxPQUNLO2dCQUNETyxTQUFTLENBQUNDLElBQUksR0FBR3RCO1lBQ3JCO1FBQ0o7UUFDQSxNQUFNd0IsTUFBTVYsT0FBT1UsR0FBRyxJQUFJSCxVQUFVRyxHQUFHO1FBQ3ZDLE1BQU1DLFNBQVNYLE9BQU9XLE1BQU0sSUFBSUosVUFBVUksTUFBTTtRQUNoRCxJQUFJLENBQUNELEtBQUs7WUFDTixNQUFNLElBQUlFLE1BQU07UUFDcEI7UUFDQSxJQUFJLE9BQU9GLFFBQVEsVUFBVTtZQUN6QixNQUFNLElBQUlFLE1BQU07UUFDcEI7UUFDQSxNQUFNQyxTQUFTO1lBQUVIO1FBQUk7UUFDckIsSUFBSUMsUUFBUTtZQUNSRSxPQUFPRixNQUFNLEdBQUdBO1FBQ3BCO1FBQ0EsT0FBT0U7SUFDWDtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTUMsa0JBQWtCZCxNQUFNLEVBQUU7UUFDNUIsTUFBTWUsa0JBQWtCLE1BQU0sSUFBSSxDQUFDVCxNQUFNLENBQUNOO1FBQzFDLE9BQU8sSUFBSTNCLCtEQUFnQkEsQ0FBQzBDO0lBQ2hDO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdHMvaW1hZ2UuanM/ZTlmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbWFnZVByb21wdFZhbHVlIH0gZnJvbSBcIi4uL3Byb21wdF92YWx1ZXMuanNcIjtcbmltcG9ydCB7IEJhc2VQcm9tcHRUZW1wbGF0ZSwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBjaGVja1ZhbGlkVGVtcGxhdGUsIHJlbmRlclRlbXBsYXRlLCB9IGZyb20gXCIuL3RlbXBsYXRlLmpzXCI7XG4vKipcbiAqIEFuIGltYWdlIHByb21wdCB0ZW1wbGF0ZSBmb3IgYSBtdWx0aW1vZGFsIG1vZGVsLlxuICovXG5leHBvcnQgY2xhc3MgSW1hZ2VQcm9tcHRUZW1wbGF0ZSBleHRlbmRzIEJhc2VQcm9tcHRUZW1wbGF0ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkltYWdlUHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoaW5wdXQpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicHJvbXB0c1wiLCBcImltYWdlXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZW1wbGF0ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZW1wbGF0ZUZvcm1hdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJmLXN0cmluZ1wiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWxpZGF0ZVRlbXBsYXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQWRkaXRpb25hbCBmaWVsZHMgd2hpY2ggc2hvdWxkIGJlIGluY2x1ZGVkIGluc2lkZVxuICAgICAgICAgKiB0aGUgbWVzc2FnZSBjb250ZW50IGFycmF5IGlmIHVzaW5nIGEgY29tcGxleCBtZXNzYWdlXG4gICAgICAgICAqIGNvbnRlbnQuXG4gICAgICAgICAqL1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhZGRpdGlvbmFsQ29udGVudEZpZWxkc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gaW5wdXQudGVtcGxhdGU7XG4gICAgICAgIHRoaXMudGVtcGxhdGVGb3JtYXQgPSBpbnB1dC50ZW1wbGF0ZUZvcm1hdCA/PyB0aGlzLnRlbXBsYXRlRm9ybWF0O1xuICAgICAgICB0aGlzLnZhbGlkYXRlVGVtcGxhdGUgPSBpbnB1dC52YWxpZGF0ZVRlbXBsYXRlID8/IHRoaXMudmFsaWRhdGVUZW1wbGF0ZTtcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsQ29udGVudEZpZWxkcyA9IGlucHV0LmFkZGl0aW9uYWxDb250ZW50RmllbGRzO1xuICAgICAgICBpZiAodGhpcy52YWxpZGF0ZVRlbXBsYXRlKSB7XG4gICAgICAgICAgICBsZXQgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJ0aWFsVmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRvdGFsSW5wdXRWYXJpYWJsZXMuY29uY2F0KE9iamVjdC5rZXlzKHRoaXMucGFydGlhbFZhcmlhYmxlcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2tWYWxpZFRlbXBsYXRlKFtcbiAgICAgICAgICAgICAgICB7IHR5cGU6IFwiaW1hZ2VfdXJsXCIsIGltYWdlX3VybDogdGhpcy50ZW1wbGF0ZSB9LFxuICAgICAgICAgICAgXSwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgdG90YWxJbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2dldFByb21wdFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInByb21wdFwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJ0aWFsbHkgYXBwbGllcyB2YWx1ZXMgdG8gdGhlIHByb21wdCB0ZW1wbGF0ZS5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQgdG8gdGhlIHByb21wdCB0ZW1wbGF0ZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBJbWFnZVByb21wdFRlbXBsYXRlIHdpdGggdGhlIHBhcnRpYWxseSBhcHBsaWVkIHZhbHVlcy5cbiAgICAgKi9cbiAgICBhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuICAgICAgICBjb25zdCBuZXdJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXMuZmlsdGVyKChpdikgPT4gIShpdiBpbiB2YWx1ZXMpKTtcbiAgICAgICAgY29uc3QgbmV3UGFydGlhbFZhcmlhYmxlcyA9IHtcbiAgICAgICAgICAgIC4uLih0aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30pLFxuICAgICAgICAgICAgLi4udmFsdWVzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwcm9tcHREaWN0ID0ge1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIGlucHV0VmFyaWFibGVzOiBuZXdJbnB1dFZhcmlhYmxlcyxcbiAgICAgICAgICAgIHBhcnRpYWxWYXJpYWJsZXM6IG5ld1BhcnRpYWxWYXJpYWJsZXMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgSW1hZ2VQcm9tcHRUZW1wbGF0ZShwcm9tcHREaWN0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0cyB0aGUgcHJvbXB0IHRlbXBsYXRlIHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gYmUgdXNlZCB0byBmb3JtYXQgdGhlIHByb21wdCB0ZW1wbGF0ZS5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHN0cmluZyB3aGljaCBpcyB0aGUgZm9ybWF0dGVkIHByb21wdC5cbiAgICAgKi9cbiAgICBhc3luYyBmb3JtYXQodmFsdWVzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnRlbXBsYXRlKSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFtrZXldID0gcmVuZGVyVGVtcGxhdGUodmFsdWUsIHRoaXMudGVtcGxhdGVGb3JtYXQsIHZhbHVlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVybCA9IHZhbHVlcy51cmwgfHwgZm9ybWF0dGVkLnVybDtcbiAgICAgICAgY29uc3QgZGV0YWlsID0gdmFsdWVzLmRldGFpbCB8fCBmb3JtYXR0ZWQuZGV0YWlsO1xuICAgICAgICBpZiAoIXVybCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGVpdGhlciBhbiBpbWFnZSBVUkwuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1cmwgbXVzdCBiZSBhIHN0cmluZy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0geyB1cmwgfTtcbiAgICAgICAgaWYgKGRldGFpbCkge1xuICAgICAgICAgICAgb3V0cHV0LmRldGFpbCA9IGRldGFpbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIHRoZSBwcm9tcHQgZ2l2ZW4gdGhlIGlucHV0IHZhbHVlcyBhbmQgcmV0dXJucyBhIGZvcm1hdHRlZFxuICAgICAqIHByb21wdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSBpbnB1dCB2YWx1ZXMgdG8gZm9ybWF0IHRoZSBwcm9tcHQuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBmb3JtYXR0ZWQgcHJvbXB0IHZhbHVlLlxuICAgICAqL1xuICAgIGFzeW5jIGZvcm1hdFByb21wdFZhbHVlKHZhbHVlcykge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQcm9tcHQgPSBhd2FpdCB0aGlzLmZvcm1hdCh2YWx1ZXMpO1xuICAgICAgICByZXR1cm4gbmV3IEltYWdlUHJvbXB0VmFsdWUoZm9ybWF0dGVkUHJvbXB0KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiSW1hZ2VQcm9tcHRWYWx1ZSIsIkJhc2VQcm9tcHRUZW1wbGF0ZSIsImNoZWNrVmFsaWRUZW1wbGF0ZSIsInJlbmRlclRlbXBsYXRlIiwiSW1hZ2VQcm9tcHRUZW1wbGF0ZSIsImxjX25hbWUiLCJjb25zdHJ1Y3RvciIsImlucHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInRlbXBsYXRlIiwidGVtcGxhdGVGb3JtYXQiLCJ2YWxpZGF0ZVRlbXBsYXRlIiwiYWRkaXRpb25hbENvbnRlbnRGaWVsZHMiLCJ0b3RhbElucHV0VmFyaWFibGVzIiwiaW5wdXRWYXJpYWJsZXMiLCJwYXJ0aWFsVmFyaWFibGVzIiwiY29uY2F0Iiwia2V5cyIsInR5cGUiLCJpbWFnZV91cmwiLCJfZ2V0UHJvbXB0VHlwZSIsInBhcnRpYWwiLCJ2YWx1ZXMiLCJuZXdJbnB1dFZhcmlhYmxlcyIsImZpbHRlciIsIml2IiwibmV3UGFydGlhbFZhcmlhYmxlcyIsInByb21wdERpY3QiLCJmb3JtYXQiLCJmb3JtYXR0ZWQiLCJrZXkiLCJlbnRyaWVzIiwidXJsIiwiZGV0YWlsIiwiRXJyb3IiLCJvdXRwdXQiLCJmb3JtYXRQcm9tcHRWYWx1ZSIsImZvcm1hdHRlZFByb21wdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/image.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/index.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.AIMessagePromptTemplate),\n/* harmony export */   BaseChatPromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.BaseChatPromptTemplate),\n/* harmony export */   BaseMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessagePromptTemplate),\n/* harmony export */   BaseMessageStringPromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageStringPromptTemplate),\n/* harmony export */   BasePromptTemplate: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BasePromptTemplate),\n/* harmony export */   BaseStringPromptTemplate: () => (/* reexport safe */ _string_js__WEBPACK_IMPORTED_MODULE_6__.BaseStringPromptTemplate),\n/* harmony export */   ChatMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.ChatMessagePromptTemplate),\n/* harmony export */   ChatPromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptTemplate),\n/* harmony export */   DEFAULT_FORMATTER_MAPPING: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_FORMATTER_MAPPING),\n/* harmony export */   DEFAULT_PARSER_MAPPING: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_PARSER_MAPPING),\n/* harmony export */   DictPromptTemplate: () => (/* reexport safe */ _dict_js__WEBPACK_IMPORTED_MODULE_10__.DictPromptTemplate),\n/* harmony export */   FewShotChatMessagePromptTemplate: () => (/* reexport safe */ _few_shot_js__WEBPACK_IMPORTED_MODULE_2__.FewShotChatMessagePromptTemplate),\n/* harmony export */   FewShotPromptTemplate: () => (/* reexport safe */ _few_shot_js__WEBPACK_IMPORTED_MODULE_2__.FewShotPromptTemplate),\n/* harmony export */   HumanMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessagePromptTemplate),\n/* harmony export */   ImagePromptTemplate: () => (/* reexport safe */ _image_js__WEBPACK_IMPORTED_MODULE_8__.ImagePromptTemplate),\n/* harmony export */   MessagesPlaceholder: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.MessagesPlaceholder),\n/* harmony export */   PipelinePromptTemplate: () => (/* reexport safe */ _pipeline_js__WEBPACK_IMPORTED_MODULE_3__.PipelinePromptTemplate),\n/* harmony export */   PromptTemplate: () => (/* reexport safe */ _prompt_js__WEBPACK_IMPORTED_MODULE_4__.PromptTemplate),\n/* harmony export */   StructuredPrompt: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_9__.StructuredPrompt),\n/* harmony export */   SystemMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.SystemMessagePromptTemplate),\n/* harmony export */   checkValidTemplate: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.checkValidTemplate),\n/* harmony export */   interpolateFString: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.interpolateFString),\n/* harmony export */   interpolateMustache: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.interpolateMustache),\n/* harmony export */   parseFString: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.parseFString),\n/* harmony export */   parseMustache: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.parseMustache),\n/* harmony export */   parseTemplate: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.parseTemplate),\n/* harmony export */   renderTemplate: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.renderTemplate)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n/* harmony import */ var _few_shot_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./few_shot.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/few_shot.js\");\n/* harmony import */ var _pipeline_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pipeline.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/pipeline.js\");\n/* harmony import */ var _prompt_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./prompt.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\");\n/* harmony import */ var _serde_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./serde.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/serde.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./image.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/image.js\");\n/* harmony import */ var _structured_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./structured.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/structured.js\");\n/* harmony import */ var _dict_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./dict.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/dict.js\");\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwQjtBQUNBO0FBQ0k7QUFDQTtBQUNGO0FBQ0Q7QUFDQztBQUNFO0FBQ0g7QUFDSztBQUNOIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRzL2luZGV4LmpzP2QyMjkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY2hhdC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZmV3X3Nob3QuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3BpcGVsaW5lLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wcm9tcHQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NlcmRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zdHJpbmcuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RlbXBsYXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9pbWFnZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3RydWN0dXJlZC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGljdC5qc1wiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/pipeline.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/pipeline.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PipelinePromptTemplate: () => (/* binding */ PipelinePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n\n\n/**\n * Class that handles a sequence of prompts, each of which may require\n * different input variables. Includes methods for formatting these\n * prompts, extracting required input values, and handling partial\n * prompts.\n * @example\n * ```typescript\n * const composedPrompt = new PipelinePromptTemplate({\n *   pipelinePrompts: [\n *     {\n *       name: \"introduction\",\n *       prompt: PromptTemplate.fromTemplate(`You are impersonating {person}.`),\n *     },\n *     {\n *       name: \"example\",\n *       prompt: PromptTemplate.fromTemplate(\n *         `Here's an example of an interaction:\n * Q: {example_q}\n * A: {example_a}`,\n *       ),\n *     },\n *     {\n *       name: \"start\",\n *       prompt: PromptTemplate.fromTemplate(\n *         `Now, do this for real!\n * Q: {input}\n * A:`,\n *       ),\n *     },\n *   ],\n *   finalPrompt: PromptTemplate.fromTemplate(\n *     `{introduction}\n * {example}\n * {start}`,\n *   ),\n * });\n *\n * const formattedPrompt = await composedPrompt.format({\n *   person: \"Elon Musk\",\n *   example_q: `What's your favorite car?`,\n *   example_a: \"Tesla\",\n *   input: `What's your favorite social media site?`,\n * });\n * ```\n */ class PipelinePromptTemplate extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BasePromptTemplate {\n    static lc_name() {\n        return \"PipelinePromptTemplate\";\n    }\n    constructor(input){\n        super({\n            ...input,\n            inputVariables: []\n        });\n        Object.defineProperty(this, \"pipelinePrompts\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"finalPrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pipelinePrompts = input.pipelinePrompts;\n        this.finalPrompt = input.finalPrompt;\n        this.inputVariables = this.computeInputValues();\n    }\n    /**\n     * Computes the input values required by the pipeline prompts.\n     * @returns Array of input values required by the pipeline prompts.\n     */ computeInputValues() {\n        const intermediateValues = this.pipelinePrompts.map((pipelinePrompt)=>pipelinePrompt.name);\n        const inputValues = this.pipelinePrompts.map((pipelinePrompt)=>pipelinePrompt.prompt.inputVariables.filter((inputValue)=>!intermediateValues.includes(inputValue))).flat();\n        return [\n            ...new Set(inputValues)\n        ];\n    }\n    static extractRequiredInputValues(allValues, requiredValueNames) {\n        return requiredValueNames.reduce((requiredValues, valueName)=>{\n            // eslint-disable-next-line no-param-reassign\n            requiredValues[valueName] = allValues[valueName];\n            return requiredValues;\n        }, {});\n    }\n    /**\n     * Formats the pipeline prompts based on the provided input values.\n     * @param values Input values to format the pipeline prompts.\n     * @returns Promise that resolves with the formatted input values.\n     */ async formatPipelinePrompts(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        for (const { name: pipelinePromptName, prompt: pipelinePrompt } of this.pipelinePrompts){\n            const pipelinePromptInputValues = PipelinePromptTemplate.extractRequiredInputValues(allValues, pipelinePrompt.inputVariables);\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            if (pipelinePrompt instanceof _chat_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptTemplate) {\n                allValues[pipelinePromptName] = await pipelinePrompt.formatMessages(pipelinePromptInputValues);\n            } else {\n                allValues[pipelinePromptName] = await pipelinePrompt.format(pipelinePromptInputValues);\n            }\n        }\n        return PipelinePromptTemplate.extractRequiredInputValues(allValues, this.finalPrompt.inputVariables);\n    }\n    /**\n     * Formats the final prompt value based on the provided input values.\n     * @param values Input values to format the final prompt value.\n     * @returns Promise that resolves with the formatted final prompt value.\n     */ async formatPromptValue(values) {\n        return this.finalPrompt.formatPromptValue(await this.formatPipelinePrompts(values));\n    }\n    async format(values) {\n        return this.finalPrompt.format(await this.formatPipelinePrompts(values));\n    }\n    /**\n     * Handles partial prompts, which are prompts that have been partially\n     * filled with input values.\n     * @param values Partial input values.\n     * @returns Promise that resolves with a new PipelinePromptTemplate instance with updated input variables.\n     */ async partial(values) {\n        const promptDict = {\n            ...this\n        };\n        promptDict.inputVariables = this.inputVariables.filter((iv)=>!(iv in values));\n        promptDict.partialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        return new PipelinePromptTemplate(promptDict);\n    }\n    serialize() {\n        throw new Error(\"Not implemented.\");\n    }\n    _getPromptType() {\n        return \"pipeline\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9waXBlbGluZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0M7QUFDQTtBQUMvQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E0Q0MsR0FDTSxNQUFNRSwrQkFBK0JGLHdEQUFrQkE7SUFDMUQsT0FBT0csVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxLQUFLLENBQUU7UUFDZixLQUFLLENBQUM7WUFBRSxHQUFHQSxLQUFLO1lBQUVDLGdCQUFnQixFQUFFO1FBQUM7UUFDckNDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLGVBQWUsR0FBR1IsTUFBTVEsZUFBZTtRQUM1QyxJQUFJLENBQUNDLFdBQVcsR0FBR1QsTUFBTVMsV0FBVztRQUNwQyxJQUFJLENBQUNSLGNBQWMsR0FBRyxJQUFJLENBQUNTLGtCQUFrQjtJQUNqRDtJQUNBOzs7S0FHQyxHQUNEQSxxQkFBcUI7UUFDakIsTUFBTUMscUJBQXFCLElBQUksQ0FBQ0gsZUFBZSxDQUFDSSxHQUFHLENBQUMsQ0FBQ0MsaUJBQW1CQSxlQUFlQyxJQUFJO1FBQzNGLE1BQU1DLGNBQWMsSUFBSSxDQUFDUCxlQUFlLENBQ25DSSxHQUFHLENBQUMsQ0FBQ0MsaUJBQW1CQSxlQUFlRyxNQUFNLENBQUNmLGNBQWMsQ0FBQ2dCLE1BQU0sQ0FBQyxDQUFDQyxhQUFlLENBQUNQLG1CQUFtQlEsUUFBUSxDQUFDRCxjQUNqSEUsSUFBSTtRQUNULE9BQU87ZUFBSSxJQUFJQyxJQUFJTjtTQUFhO0lBQ3BDO0lBQ0EsT0FBT08sMkJBQTJCQyxTQUFTLEVBQUVDLGtCQUFrQixFQUFFO1FBQzdELE9BQU9BLG1CQUFtQkMsTUFBTSxDQUFDLENBQUNDLGdCQUFnQkM7WUFDOUMsNkNBQTZDO1lBQzdDRCxjQUFjLENBQUNDLFVBQVUsR0FBR0osU0FBUyxDQUFDSSxVQUFVO1lBQ2hELE9BQU9EO1FBQ1gsR0FBRyxDQUFDO0lBQ1I7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTUUsc0JBQXNCQyxNQUFNLEVBQUU7UUFDaEMsTUFBTU4sWUFBWSxNQUFNLElBQUksQ0FBQ08sNEJBQTRCLENBQUNEO1FBQzFELEtBQUssTUFBTSxFQUFFZixNQUFNaUIsa0JBQWtCLEVBQUVmLFFBQVFILGNBQWMsRUFBRSxJQUFJLElBQUksQ0FDbEVMLGVBQWUsQ0FBRTtZQUNsQixNQUFNd0IsNEJBQTRCbkMsdUJBQXVCeUIsMEJBQTBCLENBQUNDLFdBQVdWLGVBQWVaLGNBQWM7WUFDNUgsdURBQXVEO1lBQ3ZELElBQUlZLDBCQUEwQmpCLHdEQUFrQkEsRUFBRTtnQkFDOUMyQixTQUFTLENBQUNRLG1CQUFtQixHQUFHLE1BQU1sQixlQUFlb0IsY0FBYyxDQUFDRDtZQUN4RSxPQUNLO2dCQUNEVCxTQUFTLENBQUNRLG1CQUFtQixHQUFHLE1BQU1sQixlQUFlcUIsTUFBTSxDQUFDRjtZQUNoRTtRQUNKO1FBQ0EsT0FBT25DLHVCQUF1QnlCLDBCQUEwQixDQUFDQyxXQUFXLElBQUksQ0FBQ2QsV0FBVyxDQUFDUixjQUFjO0lBQ3ZHO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1rQyxrQkFBa0JOLE1BQU0sRUFBRTtRQUM1QixPQUFPLElBQUksQ0FBQ3BCLFdBQVcsQ0FBQzBCLGlCQUFpQixDQUFDLE1BQU0sSUFBSSxDQUFDUCxxQkFBcUIsQ0FBQ0M7SUFDL0U7SUFDQSxNQUFNSyxPQUFPTCxNQUFNLEVBQUU7UUFDakIsT0FBTyxJQUFJLENBQUNwQixXQUFXLENBQUN5QixNQUFNLENBQUMsTUFBTSxJQUFJLENBQUNOLHFCQUFxQixDQUFDQztJQUNwRTtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTU8sUUFBUVAsTUFBTSxFQUFFO1FBQ2xCLE1BQU1RLGFBQWE7WUFBRSxHQUFHLElBQUk7UUFBQztRQUM3QkEsV0FBV3BDLGNBQWMsR0FBRyxJQUFJLENBQUNBLGNBQWMsQ0FBQ2dCLE1BQU0sQ0FBQyxDQUFDcUIsS0FBTyxDQUFFQSxDQUFBQSxNQUFNVCxNQUFLO1FBQzVFUSxXQUFXRSxnQkFBZ0IsR0FBRztZQUMxQixHQUFJLElBQUksQ0FBQ0EsZ0JBQWdCLElBQUksQ0FBQyxDQUFDO1lBQy9CLEdBQUdWLE1BQU07UUFDYjtRQUNBLE9BQU8sSUFBSWhDLHVCQUF1QndDO0lBQ3RDO0lBQ0FHLFlBQVk7UUFDUixNQUFNLElBQUlDLE1BQU07SUFDcEI7SUFDQUMsaUJBQWlCO1FBQ2IsT0FBTztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdHMvcGlwZWxpbmUuanM/NzFiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDaGF0UHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9jaGF0LmpzXCI7XG4vKipcbiAqIENsYXNzIHRoYXQgaGFuZGxlcyBhIHNlcXVlbmNlIG9mIHByb21wdHMsIGVhY2ggb2Ygd2hpY2ggbWF5IHJlcXVpcmVcbiAqIGRpZmZlcmVudCBpbnB1dCB2YXJpYWJsZXMuIEluY2x1ZGVzIG1ldGhvZHMgZm9yIGZvcm1hdHRpbmcgdGhlc2VcbiAqIHByb21wdHMsIGV4dHJhY3RpbmcgcmVxdWlyZWQgaW5wdXQgdmFsdWVzLCBhbmQgaGFuZGxpbmcgcGFydGlhbFxuICogcHJvbXB0cy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBjb21wb3NlZFByb21wdCA9IG5ldyBQaXBlbGluZVByb21wdFRlbXBsYXRlKHtcbiAqICAgcGlwZWxpbmVQcm9tcHRzOiBbXG4gKiAgICAge1xuICogICAgICAgbmFtZTogXCJpbnRyb2R1Y3Rpb25cIixcbiAqICAgICAgIHByb21wdDogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKGBZb3UgYXJlIGltcGVyc29uYXRpbmcge3BlcnNvbn0uYCksXG4gKiAgICAgfSxcbiAqICAgICB7XG4gKiAgICAgICBuYW1lOiBcImV4YW1wbGVcIixcbiAqICAgICAgIHByb21wdDogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFxuICogICAgICAgICBgSGVyZSdzIGFuIGV4YW1wbGUgb2YgYW4gaW50ZXJhY3Rpb246XG4gKiBROiB7ZXhhbXBsZV9xfVxuICogQToge2V4YW1wbGVfYX1gLFxuICogICAgICAgKSxcbiAqICAgICB9LFxuICogICAgIHtcbiAqICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAqICAgICAgIHByb21wdDogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFxuICogICAgICAgICBgTm93LCBkbyB0aGlzIGZvciByZWFsIVxuICogUToge2lucHV0fVxuICogQTpgLFxuICogICAgICAgKSxcbiAqICAgICB9LFxuICogICBdLFxuICogICBmaW5hbFByb21wdDogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFxuICogICAgIGB7aW50cm9kdWN0aW9ufVxuICoge2V4YW1wbGV9XG4gKiB7c3RhcnR9YCxcbiAqICAgKSxcbiAqIH0pO1xuICpcbiAqIGNvbnN0IGZvcm1hdHRlZFByb21wdCA9IGF3YWl0IGNvbXBvc2VkUHJvbXB0LmZvcm1hdCh7XG4gKiAgIHBlcnNvbjogXCJFbG9uIE11c2tcIixcbiAqICAgZXhhbXBsZV9xOiBgV2hhdCdzIHlvdXIgZmF2b3JpdGUgY2FyP2AsXG4gKiAgIGV4YW1wbGVfYTogXCJUZXNsYVwiLFxuICogICBpbnB1dDogYFdoYXQncyB5b3VyIGZhdm9yaXRlIHNvY2lhbCBtZWRpYSBzaXRlP2AsXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUGlwZWxpbmVQcm9tcHRUZW1wbGF0ZSBleHRlbmRzIEJhc2VQcm9tcHRUZW1wbGF0ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlBpcGVsaW5lUHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoeyAuLi5pbnB1dCwgaW5wdXRWYXJpYWJsZXM6IFtdIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwaXBlbGluZVByb21wdHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmluYWxQcm9tcHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5waXBlbGluZVByb21wdHMgPSBpbnB1dC5waXBlbGluZVByb21wdHM7XG4gICAgICAgIHRoaXMuZmluYWxQcm9tcHQgPSBpbnB1dC5maW5hbFByb21wdDtcbiAgICAgICAgdGhpcy5pbnB1dFZhcmlhYmxlcyA9IHRoaXMuY29tcHV0ZUlucHV0VmFsdWVzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBpbnB1dCB2YWx1ZXMgcmVxdWlyZWQgYnkgdGhlIHBpcGVsaW5lIHByb21wdHMuXG4gICAgICogQHJldHVybnMgQXJyYXkgb2YgaW5wdXQgdmFsdWVzIHJlcXVpcmVkIGJ5IHRoZSBwaXBlbGluZSBwcm9tcHRzLlxuICAgICAqL1xuICAgIGNvbXB1dGVJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgaW50ZXJtZWRpYXRlVmFsdWVzID0gdGhpcy5waXBlbGluZVByb21wdHMubWFwKChwaXBlbGluZVByb21wdCkgPT4gcGlwZWxpbmVQcm9tcHQubmFtZSk7XG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5waXBlbGluZVByb21wdHNcbiAgICAgICAgICAgIC5tYXAoKHBpcGVsaW5lUHJvbXB0KSA9PiBwaXBlbGluZVByb21wdC5wcm9tcHQuaW5wdXRWYXJpYWJsZXMuZmlsdGVyKChpbnB1dFZhbHVlKSA9PiAhaW50ZXJtZWRpYXRlVmFsdWVzLmluY2x1ZGVzKGlucHV0VmFsdWUpKSlcbiAgICAgICAgICAgIC5mbGF0KCk7XG4gICAgICAgIHJldHVybiBbLi4ubmV3IFNldChpbnB1dFZhbHVlcyldO1xuICAgIH1cbiAgICBzdGF0aWMgZXh0cmFjdFJlcXVpcmVkSW5wdXRWYWx1ZXMoYWxsVmFsdWVzLCByZXF1aXJlZFZhbHVlTmFtZXMpIHtcbiAgICAgICAgcmV0dXJuIHJlcXVpcmVkVmFsdWVOYW1lcy5yZWR1Y2UoKHJlcXVpcmVkVmFsdWVzLCB2YWx1ZU5hbWUpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgcmVxdWlyZWRWYWx1ZXNbdmFsdWVOYW1lXSA9IGFsbFZhbHVlc1t2YWx1ZU5hbWVdO1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmVkVmFsdWVzO1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgdGhlIHBpcGVsaW5lIHByb21wdHMgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGlucHV0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIElucHV0IHZhbHVlcyB0byBmb3JtYXQgdGhlIHBpcGVsaW5lIHByb21wdHMuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGZvcm1hdHRlZCBpbnB1dCB2YWx1ZXMuXG4gICAgICovXG4gICAgYXN5bmMgZm9ybWF0UGlwZWxpbmVQcm9tcHRzKHZhbHVlcykge1xuICAgICAgICBjb25zdCBhbGxWYWx1ZXMgPSBhd2FpdCB0aGlzLm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXModmFsdWVzKTtcbiAgICAgICAgZm9yIChjb25zdCB7IG5hbWU6IHBpcGVsaW5lUHJvbXB0TmFtZSwgcHJvbXB0OiBwaXBlbGluZVByb21wdCB9IG9mIHRoaXNcbiAgICAgICAgICAgIC5waXBlbGluZVByb21wdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBpcGVsaW5lUHJvbXB0SW5wdXRWYWx1ZXMgPSBQaXBlbGluZVByb21wdFRlbXBsYXRlLmV4dHJhY3RSZXF1aXJlZElucHV0VmFsdWVzKGFsbFZhbHVlcywgcGlwZWxpbmVQcm9tcHQuaW5wdXRWYXJpYWJsZXMpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgaWYgKHBpcGVsaW5lUHJvbXB0IGluc3RhbmNlb2YgQ2hhdFByb21wdFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgYWxsVmFsdWVzW3BpcGVsaW5lUHJvbXB0TmFtZV0gPSBhd2FpdCBwaXBlbGluZVByb21wdC5mb3JtYXRNZXNzYWdlcyhwaXBlbGluZVByb21wdElucHV0VmFsdWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFsbFZhbHVlc1twaXBlbGluZVByb21wdE5hbWVdID0gYXdhaXQgcGlwZWxpbmVQcm9tcHQuZm9ybWF0KHBpcGVsaW5lUHJvbXB0SW5wdXRWYWx1ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQaXBlbGluZVByb21wdFRlbXBsYXRlLmV4dHJhY3RSZXF1aXJlZElucHV0VmFsdWVzKGFsbFZhbHVlcywgdGhpcy5maW5hbFByb21wdC5pbnB1dFZhcmlhYmxlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgdGhlIGZpbmFsIHByb21wdCB2YWx1ZSBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgaW5wdXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgSW5wdXQgdmFsdWVzIHRvIGZvcm1hdCB0aGUgZmluYWwgcHJvbXB0IHZhbHVlLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBmb3JtYXR0ZWQgZmluYWwgcHJvbXB0IHZhbHVlLlxuICAgICAqL1xuICAgIGFzeW5jIGZvcm1hdFByb21wdFZhbHVlKHZhbHVlcykge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5hbFByb21wdC5mb3JtYXRQcm9tcHRWYWx1ZShhd2FpdCB0aGlzLmZvcm1hdFBpcGVsaW5lUHJvbXB0cyh2YWx1ZXMpKTtcbiAgICB9XG4gICAgYXN5bmMgZm9ybWF0KHZhbHVlcykge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5hbFByb21wdC5mb3JtYXQoYXdhaXQgdGhpcy5mb3JtYXRQaXBlbGluZVByb21wdHModmFsdWVzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgcGFydGlhbCBwcm9tcHRzLCB3aGljaCBhcmUgcHJvbXB0cyB0aGF0IGhhdmUgYmVlbiBwYXJ0aWFsbHlcbiAgICAgKiBmaWxsZWQgd2l0aCBpbnB1dCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHZhbHVlcyBQYXJ0aWFsIGlucHV0IHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIG5ldyBQaXBlbGluZVByb21wdFRlbXBsYXRlIGluc3RhbmNlIHdpdGggdXBkYXRlZCBpbnB1dCB2YXJpYWJsZXMuXG4gICAgICovXG4gICAgYXN5bmMgcGFydGlhbCh2YWx1ZXMpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0RGljdCA9IHsgLi4udGhpcyB9O1xuICAgICAgICBwcm9tcHREaWN0LmlucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcy5maWx0ZXIoKGl2KSA9PiAhKGl2IGluIHZhbHVlcykpO1xuICAgICAgICBwcm9tcHREaWN0LnBhcnRpYWxWYXJpYWJsZXMgPSB7XG4gICAgICAgICAgICAuLi4odGhpcy5wYXJ0aWFsVmFyaWFibGVzID8/IHt9KSxcbiAgICAgICAgICAgIC4uLnZhbHVlcyxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBQaXBlbGluZVByb21wdFRlbXBsYXRlKHByb21wdERpY3QpO1xuICAgIH1cbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuICAgIF9nZXRQcm9tcHRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJwaXBlbGluZVwiO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlUHJvbXB0VGVtcGxhdGUiLCJDaGF0UHJvbXB0VGVtcGxhdGUiLCJQaXBlbGluZVByb21wdFRlbXBsYXRlIiwibGNfbmFtZSIsImNvbnN0cnVjdG9yIiwiaW5wdXQiLCJpbnB1dFZhcmlhYmxlcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJwaXBlbGluZVByb21wdHMiLCJmaW5hbFByb21wdCIsImNvbXB1dGVJbnB1dFZhbHVlcyIsImludGVybWVkaWF0ZVZhbHVlcyIsIm1hcCIsInBpcGVsaW5lUHJvbXB0IiwibmFtZSIsImlucHV0VmFsdWVzIiwicHJvbXB0IiwiZmlsdGVyIiwiaW5wdXRWYWx1ZSIsImluY2x1ZGVzIiwiZmxhdCIsIlNldCIsImV4dHJhY3RSZXF1aXJlZElucHV0VmFsdWVzIiwiYWxsVmFsdWVzIiwicmVxdWlyZWRWYWx1ZU5hbWVzIiwicmVkdWNlIiwicmVxdWlyZWRWYWx1ZXMiLCJ2YWx1ZU5hbWUiLCJmb3JtYXRQaXBlbGluZVByb21wdHMiLCJ2YWx1ZXMiLCJtZXJnZVBhcnRpYWxBbmRVc2VyVmFyaWFibGVzIiwicGlwZWxpbmVQcm9tcHROYW1lIiwicGlwZWxpbmVQcm9tcHRJbnB1dFZhbHVlcyIsImZvcm1hdE1lc3NhZ2VzIiwiZm9ybWF0IiwiZm9ybWF0UHJvbXB0VmFsdWUiLCJwYXJ0aWFsIiwicHJvbXB0RGljdCIsIml2IiwicGFydGlhbFZhcmlhYmxlcyIsInNlcmlhbGl6ZSIsIkVycm9yIiwiX2dldFByb21wdFR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/pipeline.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/prompt.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PromptTemplate: () => (/* binding */ PromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\n\n\n/**\n * Schema to represent a basic prompt for an LLM.\n * @augments BasePromptTemplate\n * @augments PromptTemplateInput\n *\n * @example\n * ```ts\n * import { PromptTemplate } from \"langchain/prompts\";\n *\n * const prompt = new PromptTemplate({\n *   inputVariables: [\"foo\"],\n *   template: \"Say {foo}\",\n * });\n * ```\n */ class PromptTemplate extends _string_js__WEBPACK_IMPORTED_MODULE_0__.BaseStringPromptTemplate {\n    static lc_name() {\n        return \"PromptTemplate\";\n    }\n    constructor(input){\n        super(input);\n        Object.defineProperty(this, \"template\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"f-string\"\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /**\n         * Additional fields which should be included inside\n         * the message content array if using a complex message\n         * content.\n         */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"additionalContentFields\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // If input is mustache and validateTemplate is not defined, set it to false\n        if (input.templateFormat === \"mustache\" && input.validateTemplate === undefined) {\n            this.validateTemplate = false;\n        }\n        Object.assign(this, input);\n        if (this.validateTemplate) {\n            if (this.templateFormat === \"mustache\") {\n                throw new Error(\"Mustache templates cannot be validated.\");\n            }\n            let totalInputVariables = this.inputVariables;\n            if (this.partialVariables) {\n                totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n            }\n            (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.checkValidTemplate)(this.template, this.templateFormat, totalInputVariables);\n        }\n    }\n    _getPromptType() {\n        return \"prompt\";\n    }\n    /**\n     * Formats the prompt template with the provided values.\n     * @param values The values to be used to format the prompt template.\n     * @returns A promise that resolves to a string which is the formatted prompt.\n     */ async format(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        return (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(this.template, this.templateFormat, allValues);\n    }\n    /**\n     * Take examples in list format with prefix and suffix to create a prompt.\n     *\n     * Intended to be used a a way to dynamically create a prompt from examples.\n     *\n     * @param examples - List of examples to use in the prompt.\n     * @param suffix - String to go after the list of examples. Should generally set up the user's input.\n     * @param inputVariables - A list of variable names the final prompt template will expect\n     * @param exampleSeparator - The separator to use in between examples\n     * @param prefix - String that should go before any examples. Generally includes examples.\n     *\n     * @returns The final prompt template generated.\n     */ static fromExamples(examples, suffix, inputVariables, exampleSeparator = \"\\n\\n\", prefix = \"\") {\n        const template = [\n            prefix,\n            ...examples,\n            suffix\n        ].join(exampleSeparator);\n        return new PromptTemplate({\n            inputVariables,\n            template\n        });\n    }\n    static fromTemplate(template, options) {\n        const { templateFormat = \"f-string\", ...rest } = options ?? {};\n        const names = new Set();\n        (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.parseTemplate)(template, templateFormat).forEach((node)=>{\n            if (node.type === \"variable\") {\n                names.add(node.name);\n            }\n        });\n        return new PromptTemplate({\n            // Rely on extracted types\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            inputVariables: [\n                ...names\n            ],\n            templateFormat,\n            template,\n            ...rest\n        });\n    }\n    /**\n     * Partially applies values to the prompt template.\n     * @param values The values to be partially applied to the prompt template.\n     * @returns A new instance of PromptTemplate with the partially applied values.\n     */ async partial(values) {\n        const newInputVariables = this.inputVariables.filter((iv)=>!(iv in values));\n        const newPartialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables\n        };\n        return new PromptTemplate(promptDict);\n    }\n    serialize() {\n        if (this.outputParser !== undefined) {\n            throw new Error(\"Cannot serialize a prompt template with an output parser\");\n        }\n        return {\n            _type: this._getPromptType(),\n            input_variables: this.inputVariables,\n            template: this.template,\n            template_format: this.templateFormat\n        };\n    }\n    static async deserialize(data) {\n        if (!data.template) {\n            throw new Error(\"Prompt template must have a template\");\n        }\n        const res = new PromptTemplate({\n            inputVariables: data.input_variables,\n            template: data.template,\n            templateFormat: data.template_format\n        });\n        return res;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9wcm9tcHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsZ0VBQWdFO0FBQ2hFLHdFQUF3RTtBQUNqQjtBQUM0QjtBQUNuRjs7Ozs7Ozs7Ozs7Ozs7Q0FjQyxHQUNNLE1BQU1JLHVCQUF1QkosZ0VBQXdCQTtJQUN4RCxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxrQkFBa0I7WUFDMUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG9CQUFvQjtZQUM1Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0E7Ozs7U0FJQyxHQUNELDhEQUE4RDtRQUM5REwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSwyQkFBMkI7WUFDbkRDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLDRFQUE0RTtRQUM1RSxJQUFJTixNQUFNTyxjQUFjLEtBQUssY0FDekJQLE1BQU1RLGdCQUFnQixLQUFLQyxXQUFXO1lBQ3RDLElBQUksQ0FBQ0QsZ0JBQWdCLEdBQUc7UUFDNUI7UUFDQVAsT0FBT1MsTUFBTSxDQUFDLElBQUksRUFBRVY7UUFDcEIsSUFBSSxJQUFJLENBQUNRLGdCQUFnQixFQUFFO1lBQ3ZCLElBQUksSUFBSSxDQUFDRCxjQUFjLEtBQUssWUFBWTtnQkFDcEMsTUFBTSxJQUFJSSxNQUFNO1lBQ3BCO1lBQ0EsSUFBSUMs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aGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9wcm9tcHQuanM/MzAxNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZWZhdWx0IGdlbmVyaWMgXCJhbnlcIiB2YWx1ZXMgYXJlIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbi8vIFJlcGxhY2Ugd2l0aCBcInN0cmluZ1wiIHdoZW4gd2UgYXJlIGNvbWZvcnRhYmxlIHdpdGggYSBicmVha2luZyBjaGFuZ2UuXG5pbXBvcnQgeyBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9zdHJpbmcuanNcIjtcbmltcG9ydCB7IGNoZWNrVmFsaWRUZW1wbGF0ZSwgcGFyc2VUZW1wbGF0ZSwgcmVuZGVyVGVtcGxhdGUsIH0gZnJvbSBcIi4vdGVtcGxhdGUuanNcIjtcbi8qKlxuICogU2NoZW1hIHRvIHJlcHJlc2VudCBhIGJhc2ljIHByb21wdCBmb3IgYW4gTExNLlxuICogQGF1Z21lbnRzIEJhc2VQcm9tcHRUZW1wbGF0ZVxuICogQGF1Z21lbnRzIFByb21wdFRlbXBsYXRlSW5wdXRcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGltcG9ydCB7IFByb21wdFRlbXBsYXRlIH0gZnJvbSBcImxhbmdjaGFpbi9wcm9tcHRzXCI7XG4gKlxuICogY29uc3QgcHJvbXB0ID0gbmV3IFByb21wdFRlbXBsYXRlKHtcbiAqICAgaW5wdXRWYXJpYWJsZXM6IFtcImZvb1wiXSxcbiAqICAgdGVtcGxhdGU6IFwiU2F5IHtmb299XCIsXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJQcm9tcHRUZW1wbGF0ZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBzdXBlcihpbnB1dCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBsYXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBsYXRlRm9ybWF0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImYtc3RyaW5nXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbGlkYXRlVGVtcGxhdGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRpdGlvbmFsIGZpZWxkcyB3aGljaCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zaWRlXG4gICAgICAgICAqIHRoZSBtZXNzYWdlIGNvbnRlbnQgYXJyYXkgaWYgdXNpbmcgYSBjb21wbGV4IG1lc3NhZ2VcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFkZGl0aW9uYWxDb250ZW50RmllbGRzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIElmIGlucHV0IGlzIG11c3RhY2hlIGFuZCB2YWxpZGF0ZVRlbXBsYXRlIGlzIG5vdCBkZWZpbmVkLCBzZXQgaXQgdG8gZmFsc2VcbiAgICAgICAgaWYgKGlucHV0LnRlbXBsYXRlRm9ybWF0ID09PSBcIm11c3RhY2hlXCIgJiZcbiAgICAgICAgICAgIGlucHV0LnZhbGlkYXRlVGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVRlbXBsYXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBpbnB1dCk7XG4gICAgICAgIGlmICh0aGlzLnZhbGlkYXRlVGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRlbXBsYXRlRm9ybWF0ID09PSBcIm11c3RhY2hlXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0YWNoZSB0ZW1wbGF0ZXMgY2Fubm90IGJlIHZhbGlkYXRlZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJ0aWFsVmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRvdGFsSW5wdXRWYXJpYWJsZXMuY29uY2F0KE9iamVjdC5rZXlzKHRoaXMucGFydGlhbFZhcmlhYmxlcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2tWYWxpZFRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMudGVtcGxhdGVGb3JtYXQsIHRvdGFsSW5wdXRWYXJpYWJsZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRQcm9tcHRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJwcm9tcHRcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0cyB0aGUgcHJvbXB0IHRlbXBsYXRlIHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gYmUgdXNlZCB0byBmb3JtYXQgdGhlIHByb21wdCB0ZW1wbGF0ZS5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHN0cmluZyB3aGljaCBpcyB0aGUgZm9ybWF0dGVkIHByb21wdC5cbiAgICAgKi9cbiAgICBhc3luYyBmb3JtYXQodmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IGFsbFZhbHVlcyA9IGF3YWl0IHRoaXMubWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyh2YWx1ZXMpO1xuICAgICAgICByZXR1cm4gcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgYWxsVmFsdWVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGFrZSBleGFtcGxlcyBpbiBsaXN0IGZvcm1hdCB3aXRoIHByZWZpeCBhbmQgc3VmZml4IHRvIGNyZWF0ZSBhIHByb21wdC5cbiAgICAgKlxuICAgICAqIEludGVuZGVkIHRvIGJlIHVzZWQgYSBhIHdheSB0byBkeW5hbWljYWxseSBjcmVhdGUgYSBwcm9tcHQgZnJvbSBleGFtcGxlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBleGFtcGxlcyAtIExpc3Qgb2YgZXhhbXBsZXMgdG8gdXNlIGluIHRoZSBwcm9tcHQuXG4gICAgICogQHBhcmFtIHN1ZmZpeCAtIFN0cmluZyB0byBnbyBhZnRlciB0aGUgbGlzdCBvZiBleGFtcGxlcy4gU2hvdWxkIGdlbmVyYWxseSBzZXQgdXAgdGhlIHVzZXIncyBpbnB1dC5cbiAgICAgKiBAcGFyYW0gaW5wdXRWYXJpYWJsZXMgLSBBIGxpc3Qgb2YgdmFyaWFibGUgbmFtZXMgdGhlIGZpbmFsIHByb21wdCB0ZW1wbGF0ZSB3aWxsIGV4cGVjdFxuICAgICAqIEBwYXJhbSBleGFtcGxlU2VwYXJhdG9yIC0gVGhlIHNlcGFyYXRvciB0byB1c2UgaW4gYmV0d2VlbiBleGFtcGxlc1xuICAgICAqIEBwYXJhbSBwcmVmaXggLSBTdHJpbmcgdGhhdCBzaG91bGQgZ28gYmVmb3JlIGFueSBleGFtcGxlcy4gR2VuZXJhbGx5IGluY2x1ZGVzIGV4YW1wbGVzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGZpbmFsIHByb21wdCB0ZW1wbGF0ZSBnZW5lcmF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21FeGFtcGxlcyhleGFtcGxlcywgc3VmZml4LCBpbnB1dFZhcmlhYmxlcywgZXhhbXBsZVNlcGFyYXRvciA9IFwiXFxuXFxuXCIsIHByZWZpeCA9IFwiXCIpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBbcHJlZml4LCAuLi5leGFtcGxlcywgc3VmZml4XS5qb2luKGV4YW1wbGVTZXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21wdFRlbXBsYXRlKHtcbiAgICAgICAgICAgIGlucHV0VmFyaWFibGVzLFxuICAgICAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRlbXBsYXRlKHRlbXBsYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgdGVtcGxhdGVGb3JtYXQgPSBcImYtc3RyaW5nXCIsIC4uLnJlc3QgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGNvbnN0IG5hbWVzID0gbmV3IFNldCgpO1xuICAgICAgICBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCB0ZW1wbGF0ZUZvcm1hdCkuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gXCJ2YXJpYWJsZVwiKSB7XG4gICAgICAgICAgICAgICAgbmFtZXMuYWRkKG5vZGUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IFByb21wdFRlbXBsYXRlKHtcbiAgICAgICAgICAgIC8vIFJlbHkgb24gZXh0cmFjdGVkIHR5cGVzXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXM6IFsuLi5uYW1lc10sXG4gICAgICAgICAgICB0ZW1wbGF0ZUZvcm1hdCxcbiAgICAgICAgICAgIHRlbXBsYXRlLFxuICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnRpYWxseSBhcHBsaWVzIHZhbHVlcyB0byB0aGUgcHJvbXB0IHRlbXBsYXRlLlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZCB0byB0aGUgcHJvbXB0IHRlbXBsYXRlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIFByb21wdFRlbXBsYXRlIHdpdGggdGhlIHBhcnRpYWxseSBhcHBsaWVkIHZhbHVlcy5cbiAgICAgKi9cbiAgICBhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuICAgICAgICBjb25zdCBuZXdJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXMuZmlsdGVyKChpdikgPT4gIShpdiBpbiB2YWx1ZXMpKTtcbiAgICAgICAgY29uc3QgbmV3UGFydGlhbFZhcmlhYmxlcyA9IHtcbiAgICAgICAgICAgIC4uLih0aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30pLFxuICAgICAgICAgICAgLi4udmFsdWVzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwcm9tcHREaWN0ID0ge1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIGlucHV0VmFyaWFibGVzOiBuZXdJbnB1dFZhcmlhYmxlcyxcbiAgICAgICAgICAgIHBhcnRpYWxWYXJpYWJsZXM6IG5ld1BhcnRpYWxWYXJpYWJsZXMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgUHJvbXB0VGVtcGxhdGUocHJvbXB0RGljdCk7XG4gICAgfVxuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0UGFyc2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzZXJpYWxpemUgYSBwcm9tcHQgdGVtcGxhdGUgd2l0aCBhbiBvdXRwdXQgcGFyc2VyXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fZ2V0UHJvbXB0VHlwZSgpLFxuICAgICAgICAgICAgaW5wdXRfdmFyaWFibGVzOiB0aGlzLmlucHV0VmFyaWFibGVzLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRoaXMudGVtcGxhdGUsXG4gICAgICAgICAgICB0ZW1wbGF0ZV9mb3JtYXQ6IHRoaXMudGVtcGxhdGVGb3JtYXQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShkYXRhKSB7XG4gICAgICAgIGlmICghZGF0YS50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvbXB0IHRlbXBsYXRlIG11c3QgaGF2ZSBhIHRlbXBsYXRlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IG5ldyBQcm9tcHRUZW1wbGF0ZSh7XG4gICAgICAgICAgICBpbnB1dFZhcmlhYmxlczogZGF0YS5pbnB1dF92YXJpYWJsZXMsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogZGF0YS50ZW1wbGF0ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlRm9ybWF0OiBkYXRhLnRlbXBsYXRlX2Zvcm1hdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSIsImNoZWNrVmFsaWRUZW1wbGF0ZSIsInBhcnNlVGVtcGxhdGUiLCJyZW5kZXJUZW1wbGF0ZSIsIlByb21wdFRlbXBsYXRlIiwibGNfbmFtZSIsImNvbnN0cnVjdG9yIiwiaW5wdXQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGVtcGxhdGVGb3JtYXQiLCJ2YWxpZGF0ZVRlbXBsYXRlIiwidW5kZWZpbmVkIiwiYXNzaWduIiwiRXJyb3IiLCJ0b3RhbElucHV0VmFyaWFibGVzIiwiaW5wdXRWYXJpYWJsZXMiLCJwYXJ0aWFsVmFyaWFibGVzIiwiY29uY2F0Iiwia2V5cyIsInRlbXBsYXRlIiwiX2dldFByb21wdFR5cGUiLCJmb3JtYXQiLCJ2YWx1ZXMiLCJhbGxWYWx1ZXMiLCJtZXJnZVBhcnRpYWxBbmRVc2VyVmFyaWFibGVzIiwiZnJvbUV4YW1wbGVzIiwiZXhhbXBsZXMiLCJzdWZmaXgiLCJleGFtcGxlU2VwYXJhdG9yIiwicHJlZml4Iiwiam9pbiIsImZyb21UZW1wbGF0ZSIsIm9wdGlvbnMiLCJyZXN0IiwibmFtZXMiLCJTZXQiLCJmb3JFYWNoIiwibm9kZSIsInR5cGUiLCJhZGQiLCJuYW1lIiwicGFydGlhbCIsIm5ld0lucHV0VmFyaWFibGVzIiwiZmlsdGVyIiwiaXYiLCJuZXdQYXJ0aWFsVmFyaWFibGVzIiwicHJvbXB0RGljdCIsInNlcmlhbGl6ZSIsIm91dHB1dFBhcnNlciIsIl90eXBlIiwiaW5wdXRfdmFyaWFibGVzIiwidGVtcGxhdGVfZm9ybWF0IiwiZGVzZXJpYWxpemUiLCJkYXRhIiwicmVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/serde.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/serde.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zZXJkZS5qcyIsIm1hcHBpbmdzIjoiO0FBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdHMvc2VyZGUuanM/MDQ2NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQge307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/serde.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/string.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/string.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseStringPromptTemplate: () => (/* binding */ BaseStringPromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\");\n// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\n\n\n/**\n * Base class for string prompt templates. It extends the\n * BasePromptTemplate class and overrides the formatPromptValue method to\n * return a StringPromptValue.\n */ class BaseStringPromptTemplate extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BasePromptTemplate {\n    /**\n     * Formats the prompt given the input values and returns a formatted\n     * prompt value.\n     * @param values The input values to format the prompt.\n     * @returns A Promise that resolves to a formatted prompt value.\n     */ async formatPromptValue(values) {\n        const formattedPrompt = await this.format(values);\n        return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__.StringPromptValue(formattedPrompt);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zdHJpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsZ0VBQWdFO0FBQ2hFLHdFQUF3RTtBQUNmO0FBQ1Y7QUFDL0M7Ozs7Q0FJQyxHQUNNLE1BQU1FLGlDQUFpQ0Qsd0RBQWtCQTtJQUM1RDs7Ozs7S0FLQyxHQUNELE1BQU1FLGtCQUFrQkMsTUFBTSxFQUFFO1FBQzVCLE1BQU1DLGtCQUFrQixNQUFNLElBQUksQ0FBQ0MsTUFBTSxDQUFDRjtRQUMxQyxPQUFPLElBQUlKLGdFQUFpQkEsQ0FBQ0s7SUFDakM7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zdHJpbmcuanM/MGQxYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZWZhdWx0IGdlbmVyaWMgXCJhbnlcIiB2YWx1ZXMgYXJlIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbi8vIFJlcGxhY2Ugd2l0aCBcInN0cmluZ1wiIHdoZW4gd2UgYXJlIGNvbWZvcnRhYmxlIHdpdGggYSBicmVha2luZyBjaGFuZ2UuXG5pbXBvcnQgeyBTdHJpbmdQcm9tcHRWYWx1ZSwgfSBmcm9tIFwiLi4vcHJvbXB0X3ZhbHVlcy5qc1wiO1xuaW1wb3J0IHsgQmFzZVByb21wdFRlbXBsYXRlIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBzdHJpbmcgcHJvbXB0IHRlbXBsYXRlcy4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VQcm9tcHRUZW1wbGF0ZSBjbGFzcyBhbmQgb3ZlcnJpZGVzIHRoZSBmb3JtYXRQcm9tcHRWYWx1ZSBtZXRob2QgdG9cbiAqIHJldHVybiBhIFN0cmluZ1Byb21wdFZhbHVlLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZVByb21wdFRlbXBsYXRlIHtcbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIHRoZSBwcm9tcHQgZ2l2ZW4gdGhlIGlucHV0IHZhbHVlcyBhbmQgcmV0dXJucyBhIGZvcm1hdHRlZFxuICAgICAqIHByb21wdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSBpbnB1dCB2YWx1ZXMgdG8gZm9ybWF0IHRoZSBwcm9tcHQuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBmb3JtYXR0ZWQgcHJvbXB0IHZhbHVlLlxuICAgICAqL1xuICAgIGFzeW5jIGZvcm1hdFByb21wdFZhbHVlKHZhbHVlcykge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQcm9tcHQgPSBhd2FpdCB0aGlzLmZvcm1hdCh2YWx1ZXMpO1xuICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1Byb21wdFZhbHVlKGZvcm1hdHRlZFByb21wdCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlN0cmluZ1Byb21wdFZhbHVlIiwiQmFzZVByb21wdFRlbXBsYXRlIiwiQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlIiwiZm9ybWF0UHJvbXB0VmFsdWUiLCJ2YWx1ZXMiLCJmb3JtYXR0ZWRQcm9tcHQiLCJmb3JtYXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/string.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/structured.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/structured.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StructuredPrompt: () => (/* binding */ StructuredPrompt)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n\n\nfunction isWithStructuredOutput(x) {\n    return typeof x === \"object\" && x != null && \"withStructuredOutput\" in x && typeof x.withStructuredOutput === \"function\";\n}\nfunction isRunnableBinding(x) {\n    return typeof x === \"object\" && x != null && \"lc_id\" in x && Array.isArray(x.lc_id) && x.lc_id.join(\"/\") === \"langchain_core/runnables/RunnableBinding\";\n}\nclass StructuredPrompt extends _chat_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptTemplate {\n    get lc_aliases() {\n        return {\n            ...super.lc_aliases,\n            schema: \"schema_\"\n        };\n    }\n    constructor(input){\n        super(input);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"method\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompts\",\n                \"structured\"\n            ]\n        });\n        this.schema = input.schema;\n        this.method = input.method;\n    }\n    pipe(coerceable) {\n        if (isWithStructuredOutput(coerceable)) {\n            return super.pipe(coerceable.withStructuredOutput(this.schema));\n        }\n        if (isRunnableBinding(coerceable) && isWithStructuredOutput(coerceable.bound)) {\n            return super.pipe(new _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBinding({\n                bound: coerceable.bound.withStructuredOutput(this.schema, ...this.method ? [\n                    {\n                        method: this.method\n                    }\n                ] : []),\n                kwargs: coerceable.kwargs ?? {},\n                config: coerceable.config,\n                configFactories: coerceable.configFactories\n            }));\n        }\n        throw new Error(`Structured prompts need to be piped to a language model that supports the \"withStructuredOutput()\" method.`);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static fromMessagesAndSchema(promptMessages, schema, method) {\n        return StructuredPrompt.fromMessages(promptMessages, {\n            schema,\n            method\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zdHJ1Y3R1cmVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RDtBQUNQO0FBQ2hELFNBQVNFLHVCQUF1QkMsQ0FBQztJQUc3QixPQUFRLE9BQU9BLE1BQU0sWUFDakJBLEtBQUssUUFDTCwwQkFBMEJBLEtBQzFCLE9BQU9BLEVBQUVDLG9CQUFvQixLQUFLO0FBQzFDO0FBQ0EsU0FBU0Msa0JBQWtCRixDQUFDO0lBQ3hCLE9BQVEsT0FBT0EsTUFBTSxZQUNqQkEsS0FBSyxRQUNMLFdBQVdBLEtBQ1hHLE1BQU1DLE9BQU8sQ0FBQ0osRUFBRUssS0FBSyxLQUNyQkwsRUFBRUssS0FBSyxDQUFDQyxJQUFJLENBQUMsU0FBUztBQUM5QjtBQUNPLE1BQU1DLHlCQUF5QlQsd0RBQWtCQTtJQUNwRCxJQUFJVSxhQUFhO1FBQ2IsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxVQUFVO1lBQ25CQyxRQUFRO1FBQ1o7SUFDSjtJQUNBQyxZQUFZQyxLQUFLLENBQUU7UUFDZixLQUFLLENBQUNBO1FBQ04sOERBQThEO1FBQzlEQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7Z0JBQVc7YUFBYTtRQUN0RDtRQUNBLElBQUksQ0FBQ1IsTUFBTSxHQUFHRSxNQUFNRixNQUFNO1FBQzFCLElBQUksQ0FBQ1MsTUFBTSxHQUFHUCxNQUFNTyxNQUFNO0lBQzlCO0lBQ0FDLEtBQUtDLFVBQVUsRUFBRTtRQUNiLElBQUlyQix1QkFBdUJxQixhQUFhO1lBQ3BDLE9BQU8sS0FBSyxDQUFDRCxLQUFLQyxXQUFXbkIsb0JBQW9CLENBQUMsSUFBSSxDQUFDUSxNQUFNO1FBQ2pFO1FBQ0EsSUFBSVAsa0JBQWtCa0IsZUFDbEJyQix1QkFBdUJxQixXQUFXQyxLQUFLLEdBQUc7WUFDMUMsT0FBTyxLQUFLLENBQUNGLEtBQUssSUFBSXRCLCtEQUFlQSxDQUFDO2dCQUNsQ3dCLE9BQU9ELFdBQVdDLEtBQUssQ0FBQ3BCLG9CQUFvQixDQUFDLElBQUksQ0FBQ1EsTUFBTSxLQUFNLElBQUksQ0FBQ1MsTUFBTSxHQUFHO29CQUFDO3dCQUFFQSxRQUFRLElBQUksQ0FBQ0EsTUFBTTtvQkFBQztpQkFBRSxHQUFHLEVBQUU7Z0JBQzFHSSxRQUFRRixXQUFXRSxNQUFNLElBQUksQ0FBQztnQkFDOUJDLFFBQVFILFdBQVdHLE1BQU07Z0JBQ3pCQyxpQkFBaUJKLFdBQVdJLGVBQWU7WUFDL0M7UUFDSjtRQUNBLE1BQU0sSUFBSUMsTUFBTSxDQUFDLDBHQUEwRyxDQUFDO0lBQ2hJO0lBQ0EsOERBQThEO0lBQzlELE9BQU9DLHNCQUFzQkMsY0FBYyxFQUFFbEIsTUFBTSxFQUFFUyxNQUFNLEVBRXpEO1FBQ0UsT0FBT1gsaUJBQWlCcUIsWUFBWSxDQUFDRCxnQkFBZ0I7WUFBRWxCO1lBQVFTO1FBQU87SUFDMUU7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zdHJ1Y3R1cmVkLmpzP2JlNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUnVubmFibGVCaW5kaW5nIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDaGF0UHJvbXB0VGVtcGxhdGUsIH0gZnJvbSBcIi4vY2hhdC5qc1wiO1xuZnVuY3Rpb24gaXNXaXRoU3RydWN0dXJlZE91dHB1dCh4XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICB4ICE9IG51bGwgJiZcbiAgICAgICAgXCJ3aXRoU3RydWN0dXJlZE91dHB1dFwiIGluIHggJiZcbiAgICAgICAgdHlwZW9mIHgud2l0aFN0cnVjdHVyZWRPdXRwdXQgPT09IFwiZnVuY3Rpb25cIik7XG59XG5mdW5jdGlvbiBpc1J1bm5hYmxlQmluZGluZyh4KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICB4ICE9IG51bGwgJiZcbiAgICAgICAgXCJsY19pZFwiIGluIHggJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheSh4LmxjX2lkKSAmJlxuICAgICAgICB4LmxjX2lkLmpvaW4oXCIvXCIpID09PSBcImxhbmdjaGFpbl9jb3JlL3J1bm5hYmxlcy9SdW5uYWJsZUJpbmRpbmdcIik7XG59XG5leHBvcnQgY2xhc3MgU3RydWN0dXJlZFByb21wdCBleHRlbmRzIENoYXRQcm9tcHRUZW1wbGF0ZSB7XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci5sY19hbGlhc2VzLFxuICAgICAgICAgICAgc2NoZW1hOiBcInNjaGVtYV9cIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoaW5wdXQpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzY2hlbWFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0aG9kXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRzXCIsIFwic3RydWN0dXJlZFwiXVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBpbnB1dC5zY2hlbWE7XG4gICAgICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kO1xuICAgIH1cbiAgICBwaXBlKGNvZXJjZWFibGUpIHtcbiAgICAgICAgaWYgKGlzV2l0aFN0cnVjdHVyZWRPdXRwdXQoY29lcmNlYWJsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5waXBlKGNvZXJjZWFibGUud2l0aFN0cnVjdHVyZWRPdXRwdXQodGhpcy5zY2hlbWEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNSdW5uYWJsZUJpbmRpbmcoY29lcmNlYWJsZSkgJiZcbiAgICAgICAgICAgIGlzV2l0aFN0cnVjdHVyZWRPdXRwdXQoY29lcmNlYWJsZS5ib3VuZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5waXBlKG5ldyBSdW5uYWJsZUJpbmRpbmcoe1xuICAgICAgICAgICAgICAgIGJvdW5kOiBjb2VyY2VhYmxlLmJvdW5kLndpdGhTdHJ1Y3R1cmVkT3V0cHV0KHRoaXMuc2NoZW1hLCAuLi4odGhpcy5tZXRob2QgPyBbeyBtZXRob2Q6IHRoaXMubWV0aG9kIH1dIDogW10pKSxcbiAgICAgICAgICAgICAgICBrd2FyZ3M6IGNvZXJjZWFibGUua3dhcmdzID8/IHt9LFxuICAgICAgICAgICAgICAgIGNvbmZpZzogY29lcmNlYWJsZS5jb25maWcsXG4gICAgICAgICAgICAgICAgY29uZmlnRmFjdG9yaWVzOiBjb2VyY2VhYmxlLmNvbmZpZ0ZhY3RvcmllcyxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFN0cnVjdHVyZWQgcHJvbXB0cyBuZWVkIHRvIGJlIHBpcGVkIHRvIGEgbGFuZ3VhZ2UgbW9kZWwgdGhhdCBzdXBwb3J0cyB0aGUgXCJ3aXRoU3RydWN0dXJlZE91dHB1dCgpXCIgbWV0aG9kLmApO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBmcm9tTWVzc2FnZXNBbmRTY2hlbWEocHJvbXB0TWVzc2FnZXMsIHNjaGVtYSwgbWV0aG9kXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIFN0cnVjdHVyZWRQcm9tcHQuZnJvbU1lc3NhZ2VzKHByb21wdE1lc3NhZ2VzLCB7IHNjaGVtYSwgbWV0aG9kIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJSdW5uYWJsZUJpbmRpbmciLCJDaGF0UHJvbXB0VGVtcGxhdGUiLCJpc1dpdGhTdHJ1Y3R1cmVkT3V0cHV0IiwieCIsIndpdGhTdHJ1Y3R1cmVkT3V0cHV0IiwiaXNSdW5uYWJsZUJpbmRpbmciLCJBcnJheSIsImlzQXJyYXkiLCJsY19pZCIsImpvaW4iLCJTdHJ1Y3R1cmVkUHJvbXB0IiwibGNfYWxpYXNlcyIsInNjaGVtYSIsImNvbnN0cnVjdG9yIiwiaW5wdXQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibWV0aG9kIiwicGlwZSIsImNvZXJjZWFibGUiLCJib3VuZCIsImt3YXJncyIsImNvbmZpZyIsImNvbmZpZ0ZhY3RvcmllcyIsIkVycm9yIiwiZnJvbU1lc3NhZ2VzQW5kU2NoZW1hIiwicHJvbXB0TWVzc2FnZXMiLCJmcm9tTWVzc2FnZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/structured.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/template.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/template.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_FORMATTER_MAPPING: () => (/* binding */ DEFAULT_FORMATTER_MAPPING),\n/* harmony export */   DEFAULT_PARSER_MAPPING: () => (/* binding */ DEFAULT_PARSER_MAPPING),\n/* harmony export */   checkValidTemplate: () => (/* binding */ checkValidTemplate),\n/* harmony export */   interpolateFString: () => (/* binding */ interpolateFString),\n/* harmony export */   interpolateMustache: () => (/* binding */ interpolateMustache),\n/* harmony export */   parseFString: () => (/* binding */ parseFString),\n/* harmony export */   parseMustache: () => (/* binding */ parseMustache),\n/* harmony export */   parseTemplate: () => (/* binding */ parseTemplate),\n/* harmony export */   renderTemplate: () => (/* binding */ renderTemplate)\n/* harmony export */ });\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mustache */ \"(rsc)/./node_modules/mustache/mustache.mjs\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/errors/index.js\");\n\n\nfunction configureMustache() {\n    // Use unescaped HTML\n    // https://github.com/janl/mustache.js?tab=readme-ov-file#variables\n    mustache__WEBPACK_IMPORTED_MODULE_0__[\"default\"].escape = (text)=>text;\n}\nconst parseFString = (template)=>{\n    // Core logic replicated from internals of pythons built in Formatter class.\n    // https://github.com/python/cpython/blob/135ec7cefbaffd516b77362ad2b2ad1025af462e/Objects/stringlib/unicode_format.h#L700-L706\n    const chars = template.split(\"\");\n    const nodes = [];\n    const nextBracket = (bracket, start)=>{\n        for(let i = start; i < chars.length; i += 1){\n            if (bracket.includes(chars[i])) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    let i = 0;\n    while(i < chars.length){\n        if (chars[i] === \"{\" && i + 1 < chars.length && chars[i + 1] === \"{\") {\n            nodes.push({\n                type: \"literal\",\n                text: \"{\"\n            });\n            i += 2;\n        } else if (chars[i] === \"}\" && i + 1 < chars.length && chars[i + 1] === \"}\") {\n            nodes.push({\n                type: \"literal\",\n                text: \"}\"\n            });\n            i += 2;\n        } else if (chars[i] === \"{\") {\n            const j = nextBracket(\"}\", i);\n            if (j < 0) {\n                throw new Error(\"Unclosed '{' in template.\");\n            }\n            nodes.push({\n                type: \"variable\",\n                name: chars.slice(i + 1, j).join(\"\")\n            });\n            i = j + 1;\n        } else if (chars[i] === \"}\") {\n            throw new Error(\"Single '}' in template.\");\n        } else {\n            const next = nextBracket(\"{}\", i);\n            const text = (next < 0 ? chars.slice(i) : chars.slice(i, next)).join(\"\");\n            nodes.push({\n                type: \"literal\",\n                text\n            });\n            i = next < 0 ? chars.length : next;\n        }\n    }\n    return nodes;\n};\n/**\n * Convert the result of mustache.parse into an array of ParsedTemplateNode,\n * to make it compatible with other LangChain string parsing template formats.\n *\n * @param {mustache.TemplateSpans} template The result of parsing a mustache template with the mustache.js library.\n * @param {string[]} context Array of section variable names for nested context\n * @returns {ParsedTemplateNode[]}\n */ const mustacheTemplateToNodes = (template, context = [])=>{\n    const nodes = [];\n    for (const temp of template){\n        if (temp[0] === \"name\") {\n            const name = temp[1].includes(\".\") ? temp[1].split(\".\")[0] : temp[1];\n            nodes.push({\n                type: \"variable\",\n                name\n            });\n        } else if ([\n            \"#\",\n            \"&\",\n            \"^\",\n            \">\"\n        ].includes(temp[0])) {\n            // # represents a section, \"&\" represents an unescaped variable.\n            // These should both be considered variables.\n            nodes.push({\n                type: \"variable\",\n                name: temp[1]\n            });\n            // If this is a section with nested content, recursively process it\n            if (temp[0] === \"#\" && temp.length > 4 && Array.isArray(temp[4])) {\n                const newContext = [\n                    ...context,\n                    temp[1]\n                ];\n                const nestedNodes = mustacheTemplateToNodes(temp[4], newContext);\n                nodes.push(...nestedNodes);\n            }\n        } else {\n            nodes.push({\n                type: \"literal\",\n                text: temp[1]\n            });\n        }\n    }\n    return nodes;\n};\nconst parseMustache = (template)=>{\n    configureMustache();\n    const parsed = mustache__WEBPACK_IMPORTED_MODULE_0__[\"default\"].parse(template);\n    return mustacheTemplateToNodes(parsed);\n};\nconst interpolateFString = (template, values)=>{\n    return parseFString(template).reduce((res, node)=>{\n        if (node.type === \"variable\") {\n            if (node.name in values) {\n                const stringValue = typeof values[node.name] === \"string\" ? values[node.name] : JSON.stringify(values[node.name]);\n                return res + stringValue;\n            }\n            throw new Error(`(f-string) Missing value for input ${node.name}`);\n        }\n        return res + node.text;\n    }, \"\");\n};\nconst interpolateMustache = (template, values)=>{\n    configureMustache();\n    return mustache__WEBPACK_IMPORTED_MODULE_0__[\"default\"].render(template, values);\n};\nconst DEFAULT_FORMATTER_MAPPING = {\n    \"f-string\": interpolateFString,\n    mustache: interpolateMustache\n};\nconst DEFAULT_PARSER_MAPPING = {\n    \"f-string\": parseFString,\n    mustache: parseMustache\n};\nconst renderTemplate = (template, templateFormat, inputValues)=>{\n    try {\n        return DEFAULT_FORMATTER_MAPPING[templateFormat](template, inputValues);\n    } catch (e) {\n        const error = (0,_errors_index_js__WEBPACK_IMPORTED_MODULE_1__.addLangChainErrorFields)(e, \"INVALID_PROMPT_INPUT\");\n        throw error;\n    }\n};\nconst parseTemplate = (template, templateFormat)=>DEFAULT_PARSER_MAPPING[templateFormat](template);\nconst checkValidTemplate = (template, templateFormat, inputVariables)=>{\n    if (!(templateFormat in DEFAULT_FORMATTER_MAPPING)) {\n        const validFormats = Object.keys(DEFAULT_FORMATTER_MAPPING);\n        throw new Error(`Invalid template format. Got \\`${templateFormat}\\`;\n                         should be one of ${validFormats}`);\n    }\n    try {\n        const dummyInputs = inputVariables.reduce((acc, v)=>{\n            acc[v] = \"foo\";\n            return acc;\n        }, {});\n        if (Array.isArray(template)) {\n            template.forEach((message)=>{\n                if (message.type === \"text\") {\n                    renderTemplate(message.text, templateFormat, dummyInputs);\n                } else if (message.type === \"image_url\") {\n                    if (typeof message.image_url === \"string\") {\n                        renderTemplate(message.image_url, templateFormat, dummyInputs);\n                    } else {\n                        const imageUrl = message.image_url.url;\n                        renderTemplate(imageUrl, templateFormat, dummyInputs);\n                    }\n                } else {\n                    throw new Error(`Invalid message template received. ${JSON.stringify(message, null, 2)}`);\n                }\n            });\n        } else {\n            renderTemplate(template, templateFormat, dummyInputs);\n        }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } catch (e) {\n        throw new Error(`Invalid prompt schema: ${e.message}`);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy90ZW1wbGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFnQztBQUM2QjtBQUM3RCxTQUFTRTtJQUNMLHFCQUFxQjtJQUNyQixtRUFBbUU7SUFDbkVGLGdEQUFRQSxDQUFDRyxNQUFNLEdBQUcsQ0FBQ0MsT0FBU0E7QUFDaEM7QUFDTyxNQUFNQyxlQUFlLENBQUNDO0lBQ3pCLDRFQUE0RTtJQUM1RSwrSEFBK0g7SUFDL0gsTUFBTUMsUUFBUUQsU0FBU0UsS0FBSyxDQUFDO0lBQzdCLE1BQU1DLFFBQVEsRUFBRTtJQUNoQixNQUFNQyxjQUFjLENBQUNDLFNBQVNDO1FBQzFCLElBQUssSUFBSUMsSUFBSUQsT0FBT0MsSUFBSU4sTUFBTU8sTUFBTSxFQUFFRCxLQUFLLEVBQUc7WUFDMUMsSUFBSUYsUUFBUUksUUFBUSxDQUFDUixLQUFLLENBQUNNLEVBQUUsR0FBRztnQkFDNUIsT0FBT0E7WUFDWDtRQUNKO1FBQ0EsT0FBTyxDQUFDO0lBQ1o7SUFDQSxJQUFJQSxJQUFJO0lBQ1IsTUFBT0EsSUFBSU4sTUFBTU8sTUFBTSxDQUFFO1FBQ3JCLElBQUlQLEtBQUssQ0FBQ00sRUFBRSxLQUFLLE9BQU9BLElBQUksSUFBSU4sTUFBTU8sTUFBTSxJQUFJUCxLQUFLLENBQUNNLElBQUksRUFBRSxLQUFLLEtBQUs7WUFDbEVKLE1BQU1PLElBQUksQ0FBQztnQkFBRUMsTUFBTTtnQkFBV2IsTUFBTTtZQUFJO1lBQ3hDUyxLQUFLO1FBQ1QsT0FDSyxJQUFJTixLQUFLLENBQUNNLEVBQUUsS0FBSyxPQUNsQkEsSUFBSSxJQUFJTixNQUFNTyxNQUFNLElBQ3BCUCxLQUFLLENBQUNNLElBQUksRUFBRSxLQUFLLEtBQUs7WUFDdEJKLE1BQU1PLElBQUksQ0FBQztnQkFBRUMsTUFBTTtnQkFBV2IsTUFBTTtZQUFJO1lBQ3hDUyxLQUFLO1FBQ1QsT0FDSyxJQUFJTixLQUFLLENBQUNN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QUkvQixNQUFNQyxPQUFPLENBQUN0QixXQUFXO1lBQ3pCQSxTQUFTc0QsT0FBTyxDQUFDLENBQUNDO2dCQUNkLElBQUlBLFFBQVE1QyxJQUFJLEtBQUssUUFBUTtvQkFDekI2QixlQUFlZSxRQUFRekQsSUFBSSxFQUFFMkMsZ0JBQWdCVTtnQkFDakQsT0FDSyxJQUFJSSxRQUFRNUMsSUFBSSxLQUFLLGFBQWE7b0JBQ25DLElBQUksT0FBTzRDLFFBQVFDLFNBQVMsS0FBSyxVQUFVO3dCQUN2Q2hCLGVBQWVlLFFBQVFDLFNBQVMsRUFBRWYsZ0JBQWdCVTtvQkFDdEQsT0FDSzt3QkFDRCxNQUFNTSxXQUFXRixRQUFRQyxTQUFTLENBQUNFLEdBQUc7d0JBQ3RDbEIsZUFBZWlCLFVBQVVoQixnQkFBZ0JVO29CQUM3QztnQkFDSixPQUNLO29CQUNELE1BQU0sSUFBSXRDLE1BQU0sQ0FBQyxtQ0FBbUMsRUFBRXFCLEtBQUtDLFNBQVMsQ0FBQ29CLFNBQVMsTUFBTSxHQUFHLENBQUM7Z0JBQzVGO1lBQ0o7UUFDSixPQUNLO1lBQ0RmLGVBQWV4QyxVQUFVeUMsZ0JBQWdCVTtRQUM3QztJQUNBLDhEQUE4RDtJQUNsRSxFQUNBLE9BQU9SLEdBQUc7UUFDTixNQUFNLElBQUk5QixNQUFNLENBQUMsdUJBQXVCLEVBQUU4QixFQUFFWSxPQUFPLENBQUMsQ0FBQztJQUN6RDtBQUNKLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdHMvdGVtcGxhdGUuanM/NmM2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbXVzdGFjaGUgZnJvbSBcIm11c3RhY2hlXCI7XG5pbXBvcnQgeyBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyB9IGZyb20gXCIuLi9lcnJvcnMvaW5kZXguanNcIjtcbmZ1bmN0aW9uIGNvbmZpZ3VyZU11c3RhY2hlKCkge1xuICAgIC8vIFVzZSB1bmVzY2FwZWQgSFRNTFxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qYW5sL211c3RhY2hlLmpzP3RhYj1yZWFkbWUtb3YtZmlsZSN2YXJpYWJsZXNcbiAgICBtdXN0YWNoZS5lc2NhcGUgPSAodGV4dCkgPT4gdGV4dDtcbn1cbmV4cG9ydCBjb25zdCBwYXJzZUZTdHJpbmcgPSAodGVtcGxhdGUpID0+IHtcbiAgICAvLyBDb3JlIGxvZ2ljIHJlcGxpY2F0ZWQgZnJvbSBpbnRlcm5hbHMgb2YgcHl0aG9ucyBidWlsdCBpbiBGb3JtYXR0ZXIgY2xhc3MuXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3B5dGhvbi9jcHl0aG9uL2Jsb2IvMTM1ZWM3Y2VmYmFmZmQ1MTZiNzczNjJhZDJiMmFkMTAyNWFmNDYyZS9PYmplY3RzL3N0cmluZ2xpYi91bmljb2RlX2Zvcm1hdC5oI0w3MDAtTDcwNlxuICAgIGNvbnN0IGNoYXJzID0gdGVtcGxhdGUuc3BsaXQoXCJcIik7XG4gICAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgICBjb25zdCBuZXh0QnJhY2tldCA9IChicmFja2V0LCBzdGFydCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBjaGFycy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaWYgKGJyYWNrZXQuaW5jbHVkZXMoY2hhcnNbaV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgY2hhcnMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChjaGFyc1tpXSA9PT0gXCJ7XCIgJiYgaSArIDEgPCBjaGFycy5sZW5ndGggJiYgY2hhcnNbaSArIDFdID09PSBcIntcIikge1xuICAgICAgICAgICAgbm9kZXMucHVzaCh7IHR5cGU6IFwibGl0ZXJhbFwiLCB0ZXh0OiBcIntcIiB9KTtcbiAgICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaGFyc1tpXSA9PT0gXCJ9XCIgJiZcbiAgICAgICAgICAgIGkgKyAxIDwgY2hhcnMubGVuZ3RoICYmXG4gICAgICAgICAgICBjaGFyc1tpICsgMV0gPT09IFwifVwiKSB7XG4gICAgICAgICAgICBub2Rlcy5wdXNoKHsgdHlwZTogXCJsaXRlcmFsXCIsIHRleHQ6IFwifVwiIH0pO1xuICAgICAgICAgICAgaSArPSAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNoYXJzW2ldID09PSBcIntcIikge1xuICAgICAgICAgICAgY29uc3QgaiA9IG5leHRCcmFja2V0KFwifVwiLCBpKTtcbiAgICAgICAgICAgIGlmIChqIDwgMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuY2xvc2VkICd7JyBpbiB0ZW1wbGF0ZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2Rlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInZhcmlhYmxlXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogY2hhcnMuc2xpY2UoaSArIDEsIGopLmpvaW4oXCJcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGkgPSBqICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaGFyc1tpXSA9PT0gXCJ9XCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpbmdsZSAnfScgaW4gdGVtcGxhdGUuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5leHRCcmFja2V0KFwie31cIiwgaSk7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gKG5leHQgPCAwID8gY2hhcnMuc2xpY2UoaSkgOiBjaGFycy5zbGljZShpLCBuZXh0KSkuam9pbihcIlwiKTtcbiAgICAgICAgICAgIG5vZGVzLnB1c2goeyB0eXBlOiBcImxpdGVyYWxcIiwgdGV4dCB9KTtcbiAgICAgICAgICAgIGkgPSBuZXh0IDwgMCA/IGNoYXJzLmxlbmd0aCA6IG5leHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGVzO1xufTtcbi8qKlxuICogQ29udmVydCB0aGUgcmVzdWx0IG9mIG11c3RhY2hlLnBhcnNlIGludG8gYW4gYXJyYXkgb2YgUGFyc2VkVGVtcGxhdGVOb2RlLFxuICogdG8gbWFrZSBpdCBjb21wYXRpYmxlIHdpdGggb3RoZXIgTGFuZ0NoYWluIHN0cmluZyBwYXJzaW5nIHRlbXBsYXRlIGZvcm1hdHMuXG4gKlxuICogQHBhcmFtIHttdXN0YWNoZS5UZW1wbGF0ZVNwYW5zfSB0ZW1wbGF0ZSBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgYSBtdXN0YWNoZSB0ZW1wbGF0ZSB3aXRoIHRoZSBtdXN0YWNoZS5qcyBsaWJyYXJ5LlxuICogQHBhcmFtIHtzdHJpbmdbXX0gY29udGV4dCBBcnJheSBvZiBzZWN0aW9uIHZhcmlhYmxlIG5hbWVzIGZvciBuZXN0ZWQgY29udGV4dFxuICogQHJldHVybnMge1BhcnNlZFRlbXBsYXRlTm9kZVtdfVxuICovXG5jb25zdCBtdXN0YWNoZVRlbXBsYXRlVG9Ob2RlcyA9ICh0ZW1wbGF0ZSwgY29udGV4dCA9IFtdKSA9PiB7XG4gICAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHRlbXAgb2YgdGVtcGxhdGUpIHtcbiAgICAgICAgaWYgKHRlbXBbMF0gPT09IFwibmFtZVwiKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gdGVtcFsxXS5pbmNsdWRlcyhcIi5cIikgPyB0ZW1wWzFdLnNwbGl0KFwiLlwiKVswXSA6IHRlbXBbMV07XG4gICAgICAgICAgICBub2Rlcy5wdXNoKHsgdHlwZTogXCJ2YXJpYWJsZVwiLCBuYW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFtcIiNcIiwgXCImXCIsIFwiXlwiLCBcIj5cIl0uaW5jbHVkZXModGVtcFswXSkpIHtcbiAgICAgICAgICAgIC8vICMgcmVwcmVzZW50cyBhIHNlY3Rpb24sIFwiJlwiIHJlcHJlc2VudHMgYW4gdW5lc2NhcGVkIHZhcmlhYmxlLlxuICAgICAgICAgICAgLy8gVGhlc2Ugc2hvdWxkIGJvdGggYmUgY29uc2lkZXJlZCB2YXJpYWJsZXMuXG4gICAgICAgICAgICBub2Rlcy5wdXNoKHsgdHlwZTogXCJ2YXJpYWJsZVwiLCBuYW1lOiB0ZW1wWzFdIH0pO1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHNlY3Rpb24gd2l0aCBuZXN0ZWQgY29udGVudCwgcmVjdXJzaXZlbHkgcHJvY2VzcyBpdFxuICAgICAgICAgICAgaWYgKHRlbXBbMF0gPT09IFwiI1wiICYmIHRlbXAubGVuZ3RoID4gNCAmJiBBcnJheS5pc0FycmF5KHRlbXBbNF0pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q29udGV4dCA9IFsuLi5jb250ZXh0LCB0ZW1wWzFdXTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXN0ZWROb2RlcyA9IG11c3RhY2hlVGVtcGxhdGVUb05vZGVzKHRlbXBbNF0sIG5ld0NvbnRleHQpO1xuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2goLi4ubmVzdGVkTm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9kZXMucHVzaCh7IHR5cGU6IFwibGl0ZXJhbFwiLCB0ZXh0OiB0ZW1wWzFdIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub2Rlcztcbn07XG5leHBvcnQgY29uc3QgcGFyc2VNdXN0YWNoZSA9ICh0ZW1wbGF0ZSkgPT4ge1xuICAgIGNvbmZpZ3VyZU11c3RhY2hlKCk7XG4gICAgY29uc3QgcGFyc2VkID0gbXVzdGFjaGUucGFyc2UodGVtcGxhdGUpO1xuICAgIHJldHVybiBtdXN0YWNoZVRlbXBsYXRlVG9Ob2RlcyhwYXJzZWQpO1xufTtcbmV4cG9ydCBjb25zdCBpbnRlcnBvbGF0ZUZTdHJpbmcgPSAodGVtcGxhdGUsIHZhbHVlcykgPT4ge1xuICAgIHJldHVybiBwYXJzZUZTdHJpbmcodGVtcGxhdGUpLnJlZHVjZSgocmVzLCBub2RlKSA9PiB7XG4gICAgICAgIGlmIChub2RlLnR5cGUgPT09IFwidmFyaWFibGVcIikge1xuICAgICAgICAgICAgaWYgKG5vZGUubmFtZSBpbiB2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdWYWx1ZSA9IHR5cGVvZiB2YWx1ZXNbbm9kZS5uYW1lXSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICA/IHZhbHVlc1tub2RlLm5hbWVdXG4gICAgICAgICAgICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkodmFsdWVzW25vZGUubmFtZV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMgKyBzdHJpbmdWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgKGYtc3RyaW5nKSBNaXNzaW5nIHZhbHVlIGZvciBpbnB1dCAke25vZGUubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzICsgbm9kZS50ZXh0O1xuICAgIH0sIFwiXCIpO1xufTtcbmV4cG9ydCBjb25zdCBpbnRlcnBvbGF0ZU11c3RhY2hlID0gKHRlbXBsYXRlLCB2YWx1ZXMpID0+IHtcbiAgICBjb25maWd1cmVNdXN0YWNoZSgpO1xuICAgIHJldHVybiBtdXN0YWNoZS5yZW5kZXIodGVtcGxhdGUsIHZhbHVlcyk7XG59O1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfRk9STUFUVEVSX01BUFBJTkcgPSB7XG4gICAgXCJmLXN0cmluZ1wiOiBpbnRlcnBvbGF0ZUZTdHJpbmcsXG4gICAgbXVzdGFjaGU6IGludGVycG9sYXRlTXVzdGFjaGUsXG59O1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfUEFSU0VSX01BUFBJTkcgPSB7XG4gICAgXCJmLXN0cmluZ1wiOiBwYXJzZUZTdHJpbmcsXG4gICAgbXVzdGFjaGU6IHBhcnNlTXVzdGFjaGUsXG59O1xuZXhwb3J0IGNvbnN0IHJlbmRlclRlbXBsYXRlID0gKHRlbXBsYXRlLCB0ZW1wbGF0ZUZvcm1hdCwgaW5wdXRWYWx1ZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gREVGQVVMVF9GT1JNQVRURVJfTUFQUElOR1t0ZW1wbGF0ZUZvcm1hdF0odGVtcGxhdGUsIGlucHV0VmFsdWVzKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyhlLCBcIklOVkFMSURfUFJPTVBUX0lOUFVUXCIpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHBhcnNlVGVtcGxhdGUgPSAodGVtcGxhdGUsIHRlbXBsYXRlRm9ybWF0KSA9PiBERUZBVUxUX1BBUlNFUl9NQVBQSU5HW3RlbXBsYXRlRm9ybWF0XSh0ZW1wbGF0ZSk7XG5leHBvcnQgY29uc3QgY2hlY2tWYWxpZFRlbXBsYXRlID0gKHRlbXBsYXRlLCB0ZW1wbGF0ZUZvcm1hdCwgaW5wdXRWYXJpYWJsZXMpID0+IHtcbiAgICBpZiAoISh0ZW1wbGF0ZUZvcm1hdCBpbiBERUZBVUxUX0ZPUk1BVFRFUl9NQVBQSU5HKSkge1xuICAgICAgICBjb25zdCB2YWxpZEZvcm1hdHMgPSBPYmplY3Qua2V5cyhERUZBVUxUX0ZPUk1BVFRFUl9NQVBQSU5HKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRlbXBsYXRlIGZvcm1hdC4gR290IFxcYCR7dGVtcGxhdGVGb3JtYXR9XFxgO1xuICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZCBiZSBvbmUgb2YgJHt2YWxpZEZvcm1hdHN9YCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGR1bW15SW5wdXRzID0gaW5wdXRWYXJpYWJsZXMucmVkdWNlKChhY2MsIHYpID0+IHtcbiAgICAgICAgICAgIGFjY1t2XSA9IFwiZm9vXCI7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRlbXBsYXRlKSkge1xuICAgICAgICAgICAgdGVtcGxhdGUuZm9yRWFjaCgobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IFwidGV4dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlclRlbXBsYXRlKG1lc3NhZ2UudGV4dCwgdGVtcGxhdGVGb3JtYXQsIGR1bW15SW5wdXRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSBcImltYWdlX3VybFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5pbWFnZV91cmwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlclRlbXBsYXRlKG1lc3NhZ2UuaW1hZ2VfdXJsLCB0ZW1wbGF0ZUZvcm1hdCwgZHVtbXlJbnB1dHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VVcmwgPSBtZXNzYWdlLmltYWdlX3VybC51cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJUZW1wbGF0ZShpbWFnZVVybCwgdGVtcGxhdGVGb3JtYXQsIGR1bW15SW5wdXRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1lc3NhZ2UgdGVtcGxhdGUgcmVjZWl2ZWQuICR7SlNPTi5zdHJpbmdpZnkobWVzc2FnZSwgbnVsbCwgMil9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGVtcGxhdGVGb3JtYXQsIGR1bW15SW5wdXRzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcHJvbXB0IHNjaGVtYTogJHtlLm1lc3NhZ2V9YCk7XG4gICAgfVxufTtcbiJdLCJuYW1lcyI6WyJtdXN0YWNoZSIsImFkZExhbmdDaGFpbkVycm9yRmllbGRzIiwiY29uZmlndXJlTXVzdGFjaGUiLCJlc2NhcGUiLCJ0ZXh0IiwicGFyc2VGU3RyaW5nIiwidGVtcGxhdGUiLCJjaGFycyIsInNwbGl0Iiwibm9kZXMiLCJuZXh0QnJhY2tldCIsImJyYWNrZXQiLCJzdGFydCIsImkiLCJsZW5ndGgiLCJpbmNsdWRlcyIsInB1c2giLCJ0eXBlIiwiaiIsIkVycm9yIiwibmFtZSIsInNsaWNlIiwiam9pbiIsIm5leHQiLCJtdXN0YWNoZVRlbXBsYXRlVG9Ob2RlcyIsImNvbnRleHQiLCJ0ZW1wIiwiQXJyYXkiLCJpc0FycmF5IiwibmV3Q29udGV4dCIsIm5lc3RlZE5vZGVzIiwicGFyc2VNdXN0YWNoZSIsInBhcnNlZCIsInBhcnNlIiwiaW50ZXJwb2xhdGVGU3RyaW5nIiwidmFsdWVzIiwicmVkdWNlIiwicmVzIiwibm9kZSIsInN0cmluZ1ZhbHVlIiwiSlNPTiIsInN0cmluZ2lmeSIsImludGVycG9sYXRlTXVzdGFjaGUiLCJyZW5kZXIiLCJERUZBVUxUX0ZPUk1BVFRFUl9NQVBQSU5HIiwiREVGQVVMVF9QQVJTRVJfTUFQUElORyIsInJlbmRlclRlbXBsYXRlIiwidGVtcGxhdGVGb3JtYXQiLCJpbnB1dFZhbHVlcyIsImUiLCJlcnJvciIsInBhcnNlVGVtcGxhdGUiLCJjaGVja1ZhbGlkVGVtcGxhdGUiLCJpbnB1dFZhcmlhYmxlcyIsInZhbGlkRm9ybWF0cyIsIk9iamVjdCIsImtleXMiLCJkdW1teUlucHV0cyIsImFjYyIsInYiLCJmb3JFYWNoIiwibWVzc2FnZSIsImltYWdlX3VybCIsImltYWdlVXJsIiwidXJsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/retrievers/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/retrievers/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseRetriever: () => (/* binding */ BaseRetriever)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _runnables_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runnables/config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n\n/**\n * Abstract base class for a document retrieval system, designed to\n * process string queries and return the most relevant documents from a source.\n *\n * `BaseRetriever` provides common properties and methods for derived retrievers,\n * such as callbacks, tagging, and verbose logging. Custom retrieval systems\n * should extend this class and implement `_getRelevantDocuments` to define\n * the specific retrieval logic.\n *\n * @template Metadata - The type of metadata associated with each document,\n *                      defaulting to `Record<string, any>`.\n */ class BaseRetriever extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__.Runnable {\n    /**\n     * Constructs a new `BaseRetriever` instance with optional configuration fields.\n     *\n     * @param fields - Optional input configuration that can include `callbacks`,\n     *                 `tags`, `metadata`, and `verbose` settings for custom retriever behavior.\n     */ constructor(fields){\n        super(fields);\n        /**\n         * Optional callbacks to handle various events in the retrieval process.\n         */ Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Tags to label or categorize the retrieval operation.\n         */ Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Metadata to provide additional context or information about the retrieval\n         * operation.\n         */ Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * If set to `true`, enables verbose logging for the retrieval process.\n         */ Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callbacks = fields?.callbacks;\n        this.tags = fields?.tags ?? [];\n        this.metadata = fields?.metadata ?? {};\n        this.verbose = fields?.verbose ?? false;\n    }\n    /**\n     * TODO: This should be an abstract method, but we'd like to avoid breaking\n     * changes to people currently using subclassed custom retrievers.\n     * Change it on next major release.\n     */ /**\n     * Placeholder method for retrieving relevant documents based on a query.\n     *\n     * This method is intended to be implemented by subclasses and will be\n     * converted to an abstract method in the next major release. Currently, it\n     * throws an error if not implemented, ensuring that custom retrievers define\n     * the specific retrieval logic.\n     *\n     * @param _query - The query string used to search for relevant documents.\n     * @param _callbacks - (optional) Callback manager for managing callbacks\n     *                     during retrieval.\n     * @returns A promise resolving to an array of `DocumentInterface` instances relevant to the query.\n     * @throws {Error} Throws an error indicating the method is not implemented.\n     */ _getRelevantDocuments(_query, _callbacks) {\n        throw new Error(\"Not implemented!\");\n    }\n    /**\n     * Executes a retrieval operation.\n     *\n     * @param input - The query string used to search for relevant documents.\n     * @param options - (optional) Configuration options for the retrieval run,\n     *                  which may include callbacks, tags, and metadata.\n     * @returns A promise that resolves to an array of `DocumentInterface` instances\n     *          representing the most relevant documents to the query.\n     */ async invoke(input, options) {\n        return this.getRelevantDocuments(input, (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(options));\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     *\n     * Main method used to retrieve relevant documents. It takes a query\n     * string and an optional configuration object, and returns a promise that\n     * resolves to an array of `Document` objects. This method handles the\n     * retrieval process, including starting and ending callbacks, and error\n     * handling.\n     * @param query The query string to retrieve relevant documents for.\n     * @param config Optional configuration object for the retrieval process.\n     * @returns A promise that resolves to an array of `Document` objects.\n     */ async getRelevantDocuments(query, config) {\n        const parsedConfig = (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.parseCallbackConfigArg)(config));\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager.configure(parsedConfig.callbacks, this.callbacks, parsedConfig.tags, this.tags, parsedConfig.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const runManager = await callbackManager_?.handleRetrieverStart(this.toJSON(), query, parsedConfig.runId, undefined, undefined, undefined, parsedConfig.runName);\n        try {\n            const results = await this._getRelevantDocuments(query, runManager);\n            await runManager?.handleRetrieverEnd(results);\n            return results;\n        } catch (error) {\n            await runManager?.handleRetrieverError(error);\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcmV0cmlldmVycy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW1GO0FBQ25DO0FBQ007QUFDdEQ7Ozs7Ozs7Ozs7O0NBV0MsR0FDTSxNQUFNSSxzQkFBc0JGLHdEQUFRQTtJQUN2Qzs7Ozs7S0FLQyxHQUNERyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOOztTQUVDLEdBQ0RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0E7O1NBRUMsR0FDREwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQTs7O1NBR0MsR0FDREwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQTs7U0FFQyxHQUNETCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsU0FBUyxHQUFHUCxRQUFRTztRQUN6QixJQUFJLENBQUNDLElBQUksR0FBR1IsUUFBUVEsUUFBUSxFQUFFO1FBQzlCLElBQUksQ0FBQ0MsUUFBUSxHQUFHVCxRQUFRUyxZQUFZLENBQUM7UUFDckMsSUFBSSxDQUFDQyxPQUFPLEdBQUdWLFFBQVFVLFdBQVc7SUFDdEM7SUFDQTs7OztLQUlDLEdBQ0Q7Ozs7Ozs7Ozs7Ozs7S0FhQyxHQUNEQyxzQkFBc0JDLE1BQU0sRUFBRUMsVUFBVSxFQUFFO1FBQ3RDLE1BQU0sSUFBSUMsTUFBTTtJQUNwQjtJQUNBOzs7Ozs7OztLQVFDLEdBQ0QsTUFBTUMsT0FBT0MsS0FBSyxFQUFFQyxPQUFPLEVBQUU7UUFDekIsT0FBTyxJQUFJLENBQUNDLG9CQUFvQixDQUFDRixPQUFPbkIsa0VBQVlBLENBQUNvQjtJQUN6RDtJQUNBOzs7Ozs7Ozs7OztLQVdDLEdBQ0QsTUFBTUMscUJBQXFCQyxLQUFLLEVBQUVDLE1BQU0sRUFBRTtRQUN0QyxNQUFNQyxlQUFleEIsa0VBQVlBLENBQUNGLDZFQUFzQkEsQ0FBQ3lCO1FBQ3pELE1BQU1FLG1CQUFtQixNQUFNNUIsa0VBQWVBLENBQUM2QixTQUFTLENBQUNGLGFBQWFkLFNBQVMsRUFBRSxJQUFJLENBQUNBLFNBQVMsRUFBRWMsYUFBYWIsSUFBSSxFQUFFLElBQUksQ0FBQ0EsSUFBSSxFQUFFYSxhQUFhWixRQUFRLEVBQUUsSUFBSSxDQUFDQSxRQUFRLEVBQUU7WUFBRUMsU0FBUyxJQUFJLENBQUNBLE9BQU87UUFBQztRQUM3TCxNQUFNYyxhQUFhLE1BQU1GLGtCQUFrQkcscUJBQXFCLElBQUksQ0FBQ0MsTUFBTSxJQUFJUCxPQUFPRSxhQUFhTSxLQUFLLEVBQUVDLFdBQVdBLFdBQVdBLFdBQVdQLGFBQWFRLE9BQU87UUFDL0osSUFBSTtZQUNBLE1BQU1DLFVBQVUsTUFBTSxJQUFJLENBQUNuQixxQkFBcUIsQ0FBQ1EsT0FBT0s7WUFDeEQsTUFBTUEsWUFBWU8sbUJBQW1CRDtZQUNyQyxPQUFPQTtRQUNYLEVBQ0EsT0FBT0UsT0FBTztZQUNWLE1BQU1SLFlBQVlTLHFCQUFxQkQ7WUFDdkMsTUFBTUE7UUFDVjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3JldHJpZXZlcnMvaW5kZXguanM/OGRkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYWxsYmFja01hbmFnZXIsIHBhcnNlQ2FsbGJhY2tDb25maWdBcmcsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgZW5zdXJlQ29uZmlnIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9jb25maWcuanNcIjtcbi8qKlxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgYSBkb2N1bWVudCByZXRyaWV2YWwgc3lzdGVtLCBkZXNpZ25lZCB0b1xuICogcHJvY2VzcyBzdHJpbmcgcXVlcmllcyBhbmQgcmV0dXJuIHRoZSBtb3N0IHJlbGV2YW50IGRvY3VtZW50cyBmcm9tIGEgc291cmNlLlxuICpcbiAqIGBCYXNlUmV0cmlldmVyYCBwcm92aWRlcyBjb21tb24gcHJvcGVydGllcyBhbmQgbWV0aG9kcyBmb3IgZGVyaXZlZCByZXRyaWV2ZXJzLFxuICogc3VjaCBhcyBjYWxsYmFja3MsIHRhZ2dpbmcsIGFuZCB2ZXJib3NlIGxvZ2dpbmcuIEN1c3RvbSByZXRyaWV2YWwgc3lzdGVtc1xuICogc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzIGFuZCBpbXBsZW1lbnQgYF9nZXRSZWxldmFudERvY3VtZW50c2AgdG8gZGVmaW5lXG4gKiB0aGUgc3BlY2lmaWMgcmV0cmlldmFsIGxvZ2ljLlxuICpcbiAqIEB0ZW1wbGF0ZSBNZXRhZGF0YSAtIFRoZSB0eXBlIG9mIG1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCBlYWNoIGRvY3VtZW50LFxuICogICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGluZyB0byBgUmVjb3JkPHN0cmluZywgYW55PmAuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUmV0cmlldmVyIGV4dGVuZHMgUnVubmFibGUge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgYEJhc2VSZXRyaWV2ZXJgIGluc3RhbmNlIHdpdGggb3B0aW9uYWwgY29uZmlndXJhdGlvbiBmaWVsZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRzIC0gT3B0aW9uYWwgaW5wdXQgY29uZmlndXJhdGlvbiB0aGF0IGNhbiBpbmNsdWRlIGBjYWxsYmFja3NgLFxuICAgICAqICAgICAgICAgICAgICAgICBgdGFnc2AsIGBtZXRhZGF0YWAsIGFuZCBgdmVyYm9zZWAgc2V0dGluZ3MgZm9yIGN1c3RvbSByZXRyaWV2ZXIgYmVoYXZpb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcHRpb25hbCBjYWxsYmFja3MgdG8gaGFuZGxlIHZhcmlvdXMgZXZlbnRzIGluIHRoZSByZXRyaWV2YWwgcHJvY2Vzcy5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxiYWNrc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGFncyB0byBsYWJlbCBvciBjYXRlZ29yaXplIHRoZSByZXRyaWV2YWwgb3BlcmF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogTWV0YWRhdGEgdG8gcHJvdmlkZSBhZGRpdGlvbmFsIGNvbnRleHQgb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJldHJpZXZhbFxuICAgICAgICAgKiBvcGVyYXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgc2V0IHRvIGB0cnVlYCwgZW5hYmxlcyB2ZXJib3NlIGxvZ2dpbmcgZm9yIHRoZSByZXRyaWV2YWwgcHJvY2Vzcy5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcmJvc2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSBmaWVsZHM/LmNhbGxiYWNrcztcbiAgICAgICAgdGhpcy50YWdzID0gZmllbGRzPy50YWdzID8/IFtdO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gZmllbGRzPy5tZXRhZGF0YSA/PyB7fTtcbiAgICAgICAgdGhpcy52ZXJib3NlID0gZmllbGRzPy52ZXJib3NlID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUT0RPOiBUaGlzIHNob3VsZCBiZSBhbiBhYnN0cmFjdCBtZXRob2QsIGJ1dCB3ZSdkIGxpa2UgdG8gYXZvaWQgYnJlYWtpbmdcbiAgICAgKiBjaGFuZ2VzIHRvIHBlb3BsZSBjdXJyZW50bHkgdXNpbmcgc3ViY2xhc3NlZCBjdXN0b20gcmV0cmlldmVycy5cbiAgICAgKiBDaGFuZ2UgaXQgb24gbmV4dCBtYWpvciByZWxlYXNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIFBsYWNlaG9sZGVyIG1ldGhvZCBmb3IgcmV0cmlldmluZyByZWxldmFudCBkb2N1bWVudHMgYmFzZWQgb24gYSBxdWVyeS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIHRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzZXMgYW5kIHdpbGwgYmVcbiAgICAgKiBjb252ZXJ0ZWQgdG8gYW4gYWJzdHJhY3QgbWV0aG9kIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuIEN1cnJlbnRseSwgaXRcbiAgICAgKiB0aHJvd3MgYW4gZXJyb3IgaWYgbm90IGltcGxlbWVudGVkLCBlbnN1cmluZyB0aGF0IGN1c3RvbSByZXRyaWV2ZXJzIGRlZmluZVxuICAgICAqIHRoZSBzcGVjaWZpYyByZXRyaWV2YWwgbG9naWMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX3F1ZXJ5IC0gVGhlIHF1ZXJ5IHN0cmluZyB1c2VkIHRvIHNlYXJjaCBmb3IgcmVsZXZhbnQgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBfY2FsbGJhY2tzIC0gKG9wdGlvbmFsKSBDYWxsYmFjayBtYW5hZ2VyIGZvciBtYW5hZ2luZyBjYWxsYmFja3NcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIGR1cmluZyByZXRyaWV2YWwuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiBgRG9jdW1lbnRJbnRlcmZhY2VgIGluc3RhbmNlcyByZWxldmFudCB0byB0aGUgcXVlcnkuXG4gICAgICogQHRocm93cyB7RXJyb3J9IFRocm93cyBhbiBlcnJvciBpbmRpY2F0aW5nIHRoZSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlxuICAgICAqL1xuICAgIF9nZXRSZWxldmFudERvY3VtZW50cyhfcXVlcnksIF9jYWxsYmFja3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkIVwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgYSByZXRyaWV2YWwgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlucHV0IC0gVGhlIHF1ZXJ5IHN0cmluZyB1c2VkIHRvIHNlYXJjaCBmb3IgcmVsZXZhbnQgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gKG9wdGlvbmFsKSBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSByZXRyaWV2YWwgcnVuLFxuICAgICAqICAgICAgICAgICAgICAgICAgd2hpY2ggbWF5IGluY2x1ZGUgY2FsbGJhY2tzLCB0YWdzLCBhbmQgbWV0YWRhdGEuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2YgYERvY3VtZW50SW50ZXJmYWNlYCBpbnN0YW5jZXNcbiAgICAgKiAgICAgICAgICByZXByZXNlbnRpbmcgdGhlIG1vc3QgcmVsZXZhbnQgZG9jdW1lbnRzIHRvIHRoZSBxdWVyeS5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVsZXZhbnREb2N1bWVudHMoaW5wdXQsIGVuc3VyZUNvbmZpZyhvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMy4wLlxuICAgICAqXG4gICAgICogTWFpbiBtZXRob2QgdXNlZCB0byByZXRyaWV2ZSByZWxldmFudCBkb2N1bWVudHMuIEl0IHRha2VzIGEgcXVlcnlcbiAgICAgKiBzdHJpbmcgYW5kIGFuIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LCBhbmQgcmV0dXJucyBhIHByb21pc2UgdGhhdFxuICAgICAqIHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIGBEb2N1bWVudGAgb2JqZWN0cy4gVGhpcyBtZXRob2QgaGFuZGxlcyB0aGVcbiAgICAgKiByZXRyaWV2YWwgcHJvY2VzcywgaW5jbHVkaW5nIHN0YXJ0aW5nIGFuZCBlbmRpbmcgY2FsbGJhY2tzLCBhbmQgZXJyb3JcbiAgICAgKiBoYW5kbGluZy5cbiAgICAgKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHN0cmluZyB0byByZXRyaWV2ZSByZWxldmFudCBkb2N1bWVudHMgZm9yLlxuICAgICAqIEBwYXJhbSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHRoZSByZXRyaWV2YWwgcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBhcnJheSBvZiBgRG9jdW1lbnRgIG9iamVjdHMuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0UmVsZXZhbnREb2N1bWVudHMocXVlcnksIGNvbmZpZykge1xuICAgICAgICBjb25zdCBwYXJzZWRDb25maWcgPSBlbnN1cmVDb25maWcocGFyc2VDYWxsYmFja0NvbmZpZ0FyZyhjb25maWcpKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUocGFyc2VkQ29uZmlnLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIHBhcnNlZENvbmZpZy50YWdzLCB0aGlzLnRhZ3MsIHBhcnNlZENvbmZpZy5tZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVSZXRyaWV2ZXJTdGFydCh0aGlzLnRvSlNPTigpLCBxdWVyeSwgcGFyc2VkQ29uZmlnLnJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBwYXJzZWRDb25maWcucnVuTmFtZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5fZ2V0UmVsZXZhbnREb2N1bWVudHMocXVlcnksIHJ1bk1hbmFnZXIpO1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlUmV0cmlldmVyRW5kKHJlc3VsdHMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVSZXRyaWV2ZXJFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJDYWxsYmFja01hbmFnZXIiLCJwYXJzZUNhbGxiYWNrQ29uZmlnQXJnIiwiUnVubmFibGUiLCJlbnN1cmVDb25maWciLCJCYXNlUmV0cmlldmVyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiY2FsbGJhY2tzIiwidGFncyIsIm1ldGFkYXRhIiwidmVyYm9zZSIsIl9nZXRSZWxldmFudERvY3VtZW50cyIsIl9xdWVyeSIsIl9jYWxsYmFja3MiLCJFcnJvciIsImludm9rZSIsImlucHV0Iiwib3B0aW9ucyIsImdldFJlbGV2YW50RG9jdW1lbnRzIiwicXVlcnkiLCJjb25maWciLCJwYXJzZWRDb25maWciLCJjYWxsYmFja01hbmFnZXJfIiwiY29uZmlndXJlIiwicnVuTWFuYWdlciIsImhhbmRsZVJldHJpZXZlclN0YXJ0IiwidG9KU09OIiwicnVuSWQiLCJ1bmRlZmluZWQiLCJydW5OYW1lIiwicmVzdWx0cyIsImhhbmRsZVJldHJpZXZlckVuZCIsImVycm9yIiwiaGFuZGxlUmV0cmlldmVyRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/retrievers/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Runnable: () => (/* binding */ Runnable),\n/* harmony export */   RunnableAssign: () => (/* binding */ RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* binding */ RunnableBinding),\n/* harmony export */   RunnableEach: () => (/* binding */ RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* binding */ RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* binding */ RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* binding */ RunnableParallel),\n/* harmony export */   RunnablePick: () => (/* binding */ RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* binding */ RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* binding */ RunnableSequence),\n/* harmony export */   RunnableToolLike: () => (/* binding */ RunnableToolLike),\n/* harmony export */   RunnableTraceable: () => (/* binding */ RunnableTraceable),\n/* harmony export */   RunnableWithFallbacks: () => (/* binding */ RunnableWithFallbacks),\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   _coerceToRunnable: () => (/* binding */ _coerceToRunnable),\n/* harmony export */   convertRunnableToTool: () => (/* binding */ convertRunnableToTool)\n/* harmony export */ });\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! langsmith/singletons/traceable */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/singletons/traceable.js\");\n/* harmony import */ var _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/log_stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js\");\n/* harmony import */ var _tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tracers/event_stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/event_stream.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _utils_signal_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/signal.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/signal.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../tracers/root_listener.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./graph.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js\");\n/* harmony import */ var _wrappers_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./wrappers.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/wrappers.js\");\n/* harmony import */ var _iter_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./iter.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/iter.js\");\n/* harmony import */ var _tools_utils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../tools/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/tools/utils.js\");\n/* harmony import */ var _utils_types_zod_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../utils/types/zod.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && // eslint-disable-next-line no-instanceof/no-instanceof\n    !(value instanceof Date) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n/**\n * A Runnable is a generic unit of work that can be invoked, batched, streamed, and/or\n * transformed.\n */ class Runnable extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_4__.Serializable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    getName(suffix) {\n        const name = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.name ?? this.constructor.lc_name() ?? this.constructor.name;\n        return suffix ? `${name}${suffix}` : name;\n    }\n    /**\n     * Bind arguments to a Runnable, returning a new Runnable.\n     * @param kwargs\n     * @returns A new RunnableBinding that, when invoked, will apply the bound args.\n     *\n     * @deprecated Use {@link withConfig} instead. This will be removed in the next breaking release.\n     */ bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            kwargs,\n            config: {}\n        });\n    }\n    /**\n     * Return a new Runnable that maps a list of inputs to a list of outputs,\n     * by calling invoke() with each input.\n     *\n     * @deprecated This will be removed in the next breaking release.\n     */ map() {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableEach({\n            bound: this\n        });\n    }\n    /**\n     * Add retry logic to an existing runnable.\n     * @param fields.stopAfterAttempt The number of attempts to retry.\n     * @param fields.onFailedAttempt A function that is called when a retry fails.\n     * @returns A new RunnableRetry that, when invoked, will retry according to the parameters.\n     */ withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableRetry({\n            bound: this,\n            kwargs: {},\n            config: {},\n            maxAttemptNumber: fields?.stopAfterAttempt,\n            ...fields\n        });\n    }\n    /**\n     * Bind config to a Runnable, returning a new Runnable.\n     * @param config New configuration parameters to attach to the new runnable.\n     * @returns A new RunnableBinding with a config matching what's passed.\n     */ withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config,\n            kwargs: {}\n        });\n    }\n    /**\n     * Create a new runnable from the current one that will try invoking\n     * other passed fallback runnables if the initial invocation fails.\n     * @param fields.fallbacks Other runnables to call if the runnable errors.\n     * @returns A new RunnableWithFallbacks.\n     */ withFallbacks(fields) {\n        const fallbacks = Array.isArray(fields) ? fields : fields.fallbacks;\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableWithFallbacks({\n            runnable: this,\n            fallbacks\n        });\n    }\n    _getOptionsList(options, length = 0) {\n        if (Array.isArray(options) && options.length !== length) {\n            throw new Error(`Passed \"options\" must be an array with the same length as the inputs, but got ${options.length} options for ${length} inputs`);\n        }\n        if (Array.isArray(options)) {\n            return options.map(_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig);\n        }\n        if (length > 1 && !Array.isArray(options) && options.runId) {\n            console.warn(\"Provided runId will be used only for the first element of the batch.\");\n            const subsequent = Object.fromEntries(Object.entries(options).filter(([key])=>key !== \"runId\"));\n            return Array.from({\n                length\n            }, (_, i)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(i === 0 ? options : subsequent));\n        }\n        return Array.from({\n            length\n        }, ()=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = configList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_8__.AsyncCaller({\n            maxConcurrency,\n            onFailedAttempt: (e)=>{\n                throw e;\n            }\n        });\n        const batchCalls = inputs.map((input, i)=>caller.call(async ()=>{\n                try {\n                    const result = await this.invoke(input, configList[i]);\n                    return result;\n                } catch (e) {\n                    if (batchOptions?.returnExceptions) {\n                        return e;\n                    }\n                    throw e;\n                }\n            }));\n        return Promise.all(batchCalls);\n    }\n    /**\n     * Default streaming implementation.\n     * Subclasses should override this method if they support streaming output.\n     * @param input\n     * @param options\n     */ async *_streamIterator(input, options) {\n        yield this.invoke(input, options);\n    }\n    /**\n     * Stream output in chunks.\n     * @param input\n     * @param options\n     * @returns A readable stream that is also an iterable.\n     */ async stream(input, options) {\n        // Buffer the first streamed chunk to allow for initial errors\n        // to surface immediately.\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this._streamIterator(input, config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n    _separateRunnableConfigFromCallOptions(options) {\n        let runnableConfig;\n        if (options === undefined) {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        } else {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)({\n                callbacks: options.callbacks,\n                tags: options.tags,\n                metadata: options.metadata,\n                runName: options.runName,\n                configurable: options.configurable,\n                recursionLimit: options.recursionLimit,\n                maxConcurrency: options.maxConcurrency,\n                runId: options.runId,\n                timeout: options.timeout,\n                signal: options.signal\n            });\n        }\n        const callOptions = {\n            ...options\n        };\n        delete callOptions.callbacks;\n        delete callOptions.tags;\n        delete callOptions.metadata;\n        delete callOptions.runName;\n        delete callOptions.configurable;\n        delete callOptions.recursionLimit;\n        delete callOptions.maxConcurrency;\n        delete callOptions.runId;\n        delete callOptions.timeout;\n        delete callOptions.signal;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    async _callWithConfig(func, input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, config?.runType, undefined, undefined, config?.runName ?? this.getName());\n        delete config.runId;\n        let output;\n        try {\n            const promise = func.call(this, input, config, runManager);\n            output = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, options?.signal);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n        return output;\n    }\n    /**\n     * Internal method that handles batching and configuration for a runnable\n     * It takes a function, input values, and optional configuration, and\n     * returns a promise that resolves to the output values.\n     * @param func The function to be executed for each input value.\n     * @param input The input values to be processed.\n     * @param config Optional configuration for the function execution.\n     * @returns A promise that resolves to the output values.\n     */ async _batchWithConfig(func, inputs, options, batchOptions) {\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(optionsList.map(_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), optionsList[i].runId, optionsList[i].runType, undefined, undefined, optionsList[i].runName ?? this.getName());\n            delete optionsList[i].runId;\n            return handleStartRes;\n        }));\n        let outputs;\n        try {\n            const promise = func.call(this, inputs, optionsList, runManagers, batchOptions);\n            outputs = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, optionsList?.[0]?.signal);\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(outputs, \"output\"))));\n        return outputs;\n    }\n    /** @internal */ _concatOutputChunks(first, second) {\n        return (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(first, second);\n    }\n    /**\n     * Helper method to transform an Iterator of Input values into an Iterator of\n     * Output values, with callbacks.\n     * Use this to implement `stream()` or `transform()` in Runnable subclasses.\n     */ async *_transformStreamWithConfig(inputGenerator, transformer, options) {\n        let finalInput;\n        let finalInputSupported = true;\n        let finalOutput;\n        let finalOutputSupported = true;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const outerThis = this;\n        async function* wrapInputForTracing() {\n            for await (const chunk of inputGenerator){\n                if (finalInputSupported) {\n                    if (finalInput === undefined) {\n                        finalInput = chunk;\n                    } else {\n                        try {\n                            finalInput = outerThis._concatOutputChunks(finalInput, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            chunk);\n                        } catch  {\n                            finalInput = undefined;\n                            finalInputSupported = false;\n                        }\n                    }\n                }\n                yield chunk;\n            }\n        }\n        let runManager;\n        try {\n            const pipe = await (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.pipeGeneratorWithSetup)(transformer.bind(this), wrapInputForTracing(), async ()=>callbackManager_?.handleChainStart(this.toJSON(), {\n                    input: \"\"\n                }, config.runId, config.runType, undefined, undefined, config.runName ?? this.getName()), options?.signal, config);\n            delete config.runId;\n            runManager = pipe.setup;\n            const streamEventsHandler = runManager?.handlers.find(_tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_3__.isStreamEventsHandler);\n            let iterator = pipe.output;\n            if (streamEventsHandler !== undefined && runManager !== undefined) {\n                iterator = streamEventsHandler.tapOutputIterable(runManager.runId, iterator);\n            }\n            const streamLogHandler = runManager?.handlers.find(_tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.isLogStreamHandler);\n            if (streamLogHandler !== undefined && runManager !== undefined) {\n                iterator = streamLogHandler.tapOutputIterable(runManager.runId, iterator);\n            }\n            for await (const chunk of iterator){\n                yield chunk;\n                if (finalOutputSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            finalOutput = this._concatOutputChunks(finalOutput, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            chunk);\n                        } catch  {\n                            finalOutput = undefined;\n                            finalOutputSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e, undefined, undefined, undefined, {\n                inputs: _coerceToDict(finalInput, \"input\")\n            });\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {}, undefined, undefined, undefined, {\n            inputs: _coerceToDict(finalInput, \"input\")\n        });\n    }\n    getGraph(_) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_12__.Graph();\n        // TODO: Add input schema for runnables\n        const inputNode = graph.addNode({\n            name: `${this.getName()}Input`,\n            schema: zod_v3__WEBPACK_IMPORTED_MODULE_17__.any()\n        });\n        const runnableNode = graph.addNode(this);\n        // TODO: Add output schemas for runnables\n        const outputNode = graph.addNode({\n            name: `${this.getName()}Output`,\n            schema: zod_v3__WEBPACK_IMPORTED_MODULE_17__.any()\n        });\n        graph.addEdge(inputNode, runnableNode);\n        graph.addEdge(runnableNode, outputNode);\n        return graph;\n    }\n    /**\n     * Create a new runnable sequence that runs each individual runnable in series,\n     * piping the output of one runnable into another runnable or runnable-like.\n     * @param coerceable A runnable, function, or object whose values are functions or runnables.\n     * @returns A new runnable sequence.\n     */ pipe(coerceable) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableSequence({\n            first: this,\n            last: _coerceToRunnable(coerceable)\n        });\n    }\n    /**\n     * Pick keys from the dict output of this runnable. Returns a new runnable.\n     */ pick(keys) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return this.pipe(new RunnablePick(keys));\n    }\n    /**\n     * Assigns new fields to the dict output of this runnable. Returns a new runnable.\n     */ assign(mapping) {\n        return this.pipe(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableAssign(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableMap({\n            steps: mapping\n        })));\n    }\n    /**\n     * Default implementation of transform, which buffers input and then calls stream.\n     * Subclasses should override this method if they can start producing output while\n     * input is still being generated.\n     * @param generator\n     * @param options\n     */ async *transform(generator, options) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                // This method should throw an error if gathering fails.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                finalChunk = this._concatOutputChunks(finalChunk, chunk);\n            }\n        }\n        yield* this._streamIterator(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options));\n    }\n    /**\n     * Stream all output from a runnable, as reported to the callback system.\n     * This includes all inner runs of LLMs, Retrievers, Tools, etc.\n     * Output is streamed as Log objects, which include a list of\n     * jsonpatch ops that describe how the state of the run has changed in each\n     * step, and the final state of the run.\n     * The jsonpatch ops can be applied in order to construct state.\n     * @param input\n     * @param options\n     * @param streamOptions\n     */ async *streamLog(input, options, streamOptions) {\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"original\"\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        yield* this._streamLog(input, logStreamCallbackHandler, config);\n    }\n    async *_streamLog(input, logStreamCallbackHandler, config) {\n        const { callbacks } = config;\n        if (callbacks === undefined) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = [\n                logStreamCallbackHandler\n            ];\n        } else if (Array.isArray(callbacks)) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = callbacks.concat([\n                logStreamCallbackHandler\n            ]);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.addHandler(logStreamCallbackHandler, true);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        const runnableStreamPromise = this.stream(input, config);\n        async function consumeRunnableStream() {\n            try {\n                const runnableStream = await runnableStreamPromise;\n                for await (const chunk of runnableStream){\n                    const patch = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: \"/streamed_output/-\",\n                                value: chunk\n                            }\n                        ]\n                    });\n                    await logStreamCallbackHandler.writer.write(patch);\n                }\n            } finally{\n                await logStreamCallbackHandler.writer.close();\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        try {\n            for await (const log of logStreamCallbackHandler){\n                yield log;\n            }\n        } finally{\n            await runnableStreamConsumePromise;\n        }\n    }\n    streamEvents(input, options, streamOptions) {\n        let stream;\n        if (options.version === \"v1\") {\n            stream = this._streamEventsV1(input, options, streamOptions);\n        } else if (options.version === \"v2\") {\n            stream = this._streamEventsV2(input, options, streamOptions);\n        } else {\n            throw new Error(`Only versions \"v1\" and \"v2\" of the schema are currently supported.`);\n        }\n        if (options.encoding === \"text/event-stream\") {\n            return (0,_wrappers_js__WEBPACK_IMPORTED_MODULE_13__.convertToHttpEventStream)(stream);\n        } else {\n            return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(stream);\n        }\n    }\n    async *_streamEventsV2(input, options, streamOptions) {\n        const eventStreamer = new _tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_3__.EventStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const runId = config.runId ?? (0,uuid__WEBPACK_IMPORTED_MODULE_18__[\"default\"])();\n        config.runId = runId;\n        const callbacks = config.callbacks;\n        if (callbacks === undefined) {\n            config.callbacks = [\n                eventStreamer\n            ];\n        } else if (Array.isArray(callbacks)) {\n            config.callbacks = callbacks.concat(eventStreamer);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.addHandler(eventStreamer, true);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        const abortController = new AbortController();\n        // Call the runnable in streaming mode,\n        // add each chunk to the output stream\n        const outerThis = this;\n        async function consumeRunnableStream() {\n            let signal;\n            let listener = null;\n            try {\n                if (options?.signal) {\n                    if (\"any\" in AbortSignal) {\n                        // Use native AbortSignal.any() if available (Node 19+)\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        signal = AbortSignal.any([\n                            abortController.signal,\n                            options.signal\n                        ]);\n                    } else {\n                        // Fallback for Node 18 and below - just use the provided signal\n                        signal = options.signal;\n                        // Ensure we still abort our controller when the parent signal aborts\n                        listener = ()=>{\n                            abortController.abort();\n                        };\n                        options.signal.addEventListener(\"abort\", listener, {\n                            once: true\n                        });\n                    }\n                } else {\n                    signal = abortController.signal;\n                }\n                const runnableStream = await outerThis.stream(input, {\n                    ...config,\n                    signal\n                });\n                const tappedStream = eventStreamer.tapOutputIterable(runId, runnableStream);\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                for await (const _ of tappedStream){\n                    // Just iterate so that the callback handler picks up events\n                    if (abortController.signal.aborted) break;\n                }\n            } finally{\n                await eventStreamer.finish();\n                if (signal && listener) {\n                    signal.removeEventListener(\"abort\", listener);\n                }\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        let firstEventSent = false;\n        let firstEventRunId;\n        try {\n            for await (const event of eventStreamer){\n                // This is a work-around an issue where the inputs into the\n                // chain are not available until the entire input is consumed.\n                // As a temporary solution, we'll modify the input to be the input\n                // that was passed into the chain.\n                if (!firstEventSent) {\n                    event.data.input = input;\n                    firstEventSent = true;\n                    firstEventRunId = event.run_id;\n                    yield event;\n                    continue;\n                }\n                if (event.run_id === firstEventRunId && event.event.endsWith(\"_end\")) {\n                    // If it's the end event corresponding to the root runnable\n                    // we dont include the input in the event since it's guaranteed\n                    // to be included in the first event.\n                    if (event.data?.input) {\n                        delete event.data.input;\n                    }\n                }\n                yield event;\n            }\n        } finally{\n            abortController.abort();\n            await runnableStreamConsumePromise;\n        }\n    }\n    async *_streamEventsV1(input, options, streamOptions) {\n        let runLog;\n        let hasEncounteredStartEvent = false;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const rootTags = config.tags ?? [];\n        const rootMetadata = config.metadata ?? {};\n        const rootName = config.runName ?? this.getName();\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"streaming_events\"\n        });\n        const rootEventFilter = new _utils_js__WEBPACK_IMPORTED_MODULE_10__._RootEventFilter({\n            ...streamOptions\n        });\n        const logStream = this._streamLog(input, logStreamCallbackHandler, config);\n        for await (const log of logStream){\n            if (!runLog) {\n                runLog = _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLog.fromRunLogPatch(log);\n            } else {\n                runLog = runLog.concat(log);\n            }\n            if (runLog.state === undefined) {\n                throw new Error(`Internal error: \"streamEvents\" state is missing. Please open a bug report.`);\n            }\n            // Yield the start event for the root runnable if it hasn't been seen.\n            // The root run is never filtered out\n            if (!hasEncounteredStartEvent) {\n                hasEncounteredStartEvent = true;\n                const state = {\n                    ...runLog.state\n                };\n                const event = {\n                    run_id: state.id,\n                    event: `on_${state.type}_start`,\n                    name: rootName,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    data: {\n                        input\n                    }\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n            const paths = log.ops.filter((op)=>op.path.startsWith(\"/logs/\")).map((op)=>op.path.split(\"/\")[2]);\n            const dedupedPaths = [\n                ...new Set(paths)\n            ];\n            for (const path of dedupedPaths){\n                let eventType;\n                let data = {};\n                const logEntry = runLog.state.logs[path];\n                if (logEntry.end_time === undefined) {\n                    if (logEntry.streamed_output.length > 0) {\n                        eventType = \"stream\";\n                    } else {\n                        eventType = \"start\";\n                    }\n                } else {\n                    eventType = \"end\";\n                }\n                if (eventType === \"start\") {\n                    // Include the inputs with the start event if they are available.\n                    // Usually they will NOT be available for components that operate\n                    // on streams, since those components stream the input and\n                    // don't know its final value until the end of the stream.\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                } else if (eventType === \"end\") {\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                    data.output = logEntry.final_output;\n                } else if (eventType === \"stream\") {\n                    const chunkCount = logEntry.streamed_output.length;\n                    if (chunkCount !== 1) {\n                        throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${logEntry.name}\"`);\n                    }\n                    data = {\n                        chunk: logEntry.streamed_output[0]\n                    };\n                    // Clean up the stream, we don't need it anymore.\n                    // And this avoids duplicates as well!\n                    logEntry.streamed_output = [];\n                }\n                yield {\n                    event: `on_${logEntry.type}_${eventType}`,\n                    name: logEntry.name,\n                    run_id: logEntry.id,\n                    tags: logEntry.tags,\n                    metadata: logEntry.metadata,\n                    data\n                };\n            }\n            // Finally, we take care of the streaming output from the root chain\n            // if there is any.\n            const { state } = runLog;\n            if (state.streamed_output.length > 0) {\n                const chunkCount = state.streamed_output.length;\n                if (chunkCount !== 1) {\n                    throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${state.name}\"`);\n                }\n                const data = {\n                    chunk: state.streamed_output[0]\n                };\n                // Clean up the stream, we don't need it anymore.\n                state.streamed_output = [];\n                const event = {\n                    event: `on_${state.type}_stream`,\n                    run_id: state.id,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    name: rootName,\n                    data\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n        }\n        const state = runLog?.state;\n        if (state !== undefined) {\n            // Finally, yield the end event for the root runnable.\n            const event = {\n                event: `on_${state.type}_end`,\n                name: rootName,\n                run_id: state.id,\n                tags: rootTags,\n                metadata: rootMetadata,\n                data: {\n                    output: state.final_output\n                }\n            };\n            if (rootEventFilter.includeEvent(event, state.type)) yield event;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnable(thing) {\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_10__.isRunnableInterface)(thing);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config: {},\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_9__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n    /**\n     * Convert a runnable to a tool. Return a new instance of `RunnableToolLike`\n     * which contains the runnable, name, description and schema.\n     *\n     * @template {T extends RunInput = RunInput} RunInput - The input type of the runnable. Should be the same as the `RunInput` type of the runnable.\n     *\n     * @param fields\n     * @param {string | undefined} [fields.name] The name of the tool. If not provided, it will default to the name of the runnable.\n     * @param {string | undefined} [fields.description] The description of the tool. Falls back to the description on the Zod schema if not provided, or undefined if neither are provided.\n     * @param {z.ZodType<T>} [fields.schema] The Zod schema for the input of the tool. Infers the Zod type from the input type of the runnable.\n     * @returns {RunnableToolLike<z.ZodType<T>, RunOutput>} An instance of `RunnableToolLike` which is a runnable that can be used as a tool.\n     */ asTool(fields) {\n        return convertRunnableToTool(this, fields);\n    }\n}\n/**\n * Wraps a runnable and applies partial config upon invocation.\n *\n * @example\n * ```typescript\n * import {\n *   type RunnableConfig,\n *   RunnableLambda,\n * } from \"@langchain/core/runnables\";\n *\n * const enhanceProfile = (\n *   profile: Record<string, any>,\n *   config?: RunnableConfig\n * ) => {\n *   if (config?.configurable?.role) {\n *     return { ...profile, role: config.configurable.role };\n *   }\n *   return profile;\n * };\n *\n * const runnable = RunnableLambda.from(enhanceProfile);\n *\n * // Bind configuration to the runnable to set the user's role dynamically\n * const adminRunnable = runnable.bind({ configurable: { role: \"Admin\" } });\n * const userRunnable = runnable.bind({ configurable: { role: \"User\" } });\n *\n * const result1 = await adminRunnable.invoke({\n *   name: \"Alice\",\n *   email: \"alice@example.com\"\n * });\n *\n * // { name: \"Alice\", email: \"alice@example.com\", role: \"Admin\" }\n *\n * const result2 = await userRunnable.invoke({\n *   name: \"Bob\",\n *   email: \"bob@example.com\"\n * });\n *\n * // { name: \"Bob\", email: \"bob@example.com\", role: \"User\" }\n * ```\n */ class RunnableBinding extends Runnable {\n    static lc_name() {\n        return \"RunnableBinding\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"configFactories\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n        this.kwargs = fields.kwargs;\n        this.config = fields.config;\n        this.configFactories = fields.configFactories;\n    }\n    getName(suffix) {\n        return this.bound.getName(suffix);\n    }\n    async _mergeConfig(...options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.mergeConfigs)(this.config, ...options);\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.mergeConfigs)(config, ...this.configFactories ? await Promise.all(this.configFactories.map(async (configFactory)=>await configFactory(config))) : []);\n    }\n    /**\n     * Binds the runnable with the specified arguments.\n     * @param kwargs The arguments to bind the runnable with.\n     * @returns A new instance of the `RunnableBinding` class that is bound with the specified arguments.\n     *\n     * @deprecated Use {@link withConfig} instead. This will be removed in the next breaking release.\n     */ bind(kwargs) {\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: {\n                ...this.kwargs,\n                ...kwargs\n            },\n            config: this.config\n        });\n    }\n    withConfig(config) {\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: {\n                ...this.config,\n                ...config\n            }\n        });\n    }\n    withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableRetry({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: this.config,\n            maxAttemptNumber: fields?.stopAfterAttempt,\n            ...fields\n        });\n    }\n    async invoke(input, options) {\n        return this.bound.invoke(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    async batch(inputs, options, batchOptions) {\n        const mergedOptions = Array.isArray(options) ? await Promise.all(options.map(async (individualOption)=>this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(individualOption), this.kwargs))) : await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs);\n        return this.bound.batch(inputs, mergedOptions, batchOptions);\n    }\n    /** @internal */ _concatOutputChunks(first, second) {\n        return this.bound._concatOutputChunks(first, second);\n    }\n    async *_streamIterator(input, options) {\n        yield* this.bound._streamIterator(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    async stream(input, options) {\n        return this.bound.stream(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    async *transform(generator, options) {\n        yield* this.bound.transform(generator, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    streamEvents(input, options, streamOptions) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const outerThis = this;\n        const generator = async function*() {\n            yield* outerThis.bound.streamEvents(input, {\n                ...await outerThis._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), outerThis.kwargs),\n                version: options.version\n            }, streamOptions);\n        };\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(generator());\n    }\n    static isRunnableBinding(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    thing) {\n        return thing.bound && Runnable.isRunnable(thing.bound);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableBinding({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: this.config,\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_9__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable\n * with each element of the input sequence.\n * @example\n * ```typescript\n * import { RunnableEach, RunnableLambda } from \"@langchain/core/runnables\";\n *\n * const toUpperCase = (input: string): string => input.toUpperCase();\n * const addGreeting = (input: string): string => `Hello, ${input}!`;\n *\n * const upperCaseLambda = RunnableLambda.from(toUpperCase);\n * const greetingLambda = RunnableLambda.from(addGreeting);\n *\n * const chain = new RunnableEach({\n *   bound: upperCaseLambda.pipe(greetingLambda),\n * });\n *\n * const result = await chain.invoke([\"alice\", \"bob\", \"carol\"])\n *\n * // [\"Hello, ALICE!\", \"Hello, BOB!\", \"Hello, CAROL!\"]\n * ```\n *\n * @deprecated This will be removed in the next breaking release.\n */ class RunnableEach extends Runnable {\n    static lc_name() {\n        return \"RunnableEach\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n    }\n    /**\n     * Binds the runnable with the specified arguments.\n     * @param kwargs The arguments to bind the runnable with.\n     * @returns A new instance of the `RunnableEach` class that is bound with the specified arguments.\n     *\n     * @deprecated Use {@link withConfig} instead. This will be removed in the next breaking release.\n     */ bind(kwargs) {\n        return new RunnableEach({\n            bound: this.bound.bind(kwargs)\n        });\n    }\n    /**\n     * Invokes the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(inputs, config) {\n        return this._callWithConfig(this._invoke.bind(this), inputs, config);\n    }\n    /**\n     * A helper method that is used to invoke the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async _invoke(inputs, config, runManager) {\n        return this.bound.batch(inputs, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks: runManager?.getChild()\n        }));\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableEach({\n            bound: this.bound.withListeners({\n                onStart,\n                onEnd,\n                onError\n            })\n        });\n    }\n}\n/**\n * Base class for runnables that can be retried a\n * specified number of times.\n * @example\n * ```typescript\n * import {\n *   RunnableLambda,\n *   RunnableRetry,\n * } from \"@langchain/core/runnables\";\n *\n * // Simulate an API call that fails\n * const simulateApiCall = (input: string): string => {\n *   console.log(`Attempting API call with input: ${input}`);\n *   throw new Error(\"API call failed due to network issue\");\n * };\n *\n * const apiCallLambda = RunnableLambda.from(simulateApiCall);\n *\n * // Apply retry logic using the .withRetry() method\n * const apiCallWithRetry = apiCallLambda.withRetry({ stopAfterAttempt: 3 });\n *\n * // Alternatively, create a RunnableRetry instance manually\n * const manualRetry = new RunnableRetry({\n *   bound: apiCallLambda,\n *   maxAttemptNumber: 3,\n *   config: {},\n * });\n *\n * // Example invocation using the .withRetry() method\n * const res = await apiCallWithRetry\n *   .invoke(\"Request 1\")\n *   .catch((error) => {\n *     console.error(\"Failed after multiple retries:\", error.message);\n *   });\n *\n * // Example invocation using the manual retry instance\n * const res2 = await manualRetry\n *   .invoke(\"Request 2\")\n *   .catch((error) => {\n *     console.error(\"Failed after multiple retries:\", error.message);\n *   });\n * ```\n */ class RunnableRetry extends RunnableBinding {\n    static lc_name() {\n        return \"RunnableRetry\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"maxAttemptNumber\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 3\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ()=>{}\n        });\n        this.maxAttemptNumber = fields.maxAttemptNumber ?? this.maxAttemptNumber;\n        this.onFailedAttempt = fields.onFailedAttempt ?? this.onFailedAttempt;\n    }\n    _patchConfigForRetry(attempt, config, runManager) {\n        const tag = attempt > 1 ? `retry:attempt:${attempt}` : undefined;\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks: runManager?.getChild(tag)\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return p_retry__WEBPACK_IMPORTED_MODULE_0__((attemptNumber)=>super.invoke(input, this._patchConfigForRetry(attemptNumber, config, runManager)), {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            onFailedAttempt: (error)=>this.onFailedAttempt(error, input),\n            retries: Math.max(this.maxAttemptNumber - 1, 0),\n            randomize: true\n        });\n    }\n    /**\n     * Method that invokes the runnable with the specified input, run manager,\n     * and config. It handles the retry logic by catching any errors and\n     * recursively invoking itself with the updated config for the next retry\n     * attempt.\n     * @param input The input for the runnable.\n     * @param runManager The run manager for the runnable.\n     * @param config The config for the runnable.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(input, config) {\n        return this._callWithConfig(this._invoke.bind(this), input, config);\n    }\n    async _batch(inputs, configs, runManagers, batchOptions) {\n        const resultsMap = {};\n        try {\n            await p_retry__WEBPACK_IMPORTED_MODULE_0__(async (attemptNumber)=>{\n                const remainingIndexes = inputs.map((_, i)=>i).filter((i)=>resultsMap[i.toString()] === undefined || // eslint-disable-next-line no-instanceof/no-instanceof\n                    resultsMap[i.toString()] instanceof Error);\n                const remainingInputs = remainingIndexes.map((i)=>inputs[i]);\n                const patchedConfigs = remainingIndexes.map((i)=>this._patchConfigForRetry(attemptNumber, configs?.[i], runManagers?.[i]));\n                const results = await super.batch(remainingInputs, patchedConfigs, {\n                    ...batchOptions,\n                    returnExceptions: true\n                });\n                let firstException;\n                for(let i = 0; i < results.length; i += 1){\n                    const result = results[i];\n                    const resultMapIndex = remainingIndexes[i];\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (result instanceof Error) {\n                        if (firstException === undefined) {\n                            firstException = result;\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            firstException.input = remainingInputs[i];\n                        }\n                    }\n                    resultsMap[resultMapIndex.toString()] = result;\n                }\n                if (firstException) {\n                    throw firstException;\n                }\n                return results;\n            }, {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                onFailedAttempt: (error)=>this.onFailedAttempt(error, error.input),\n                retries: Math.max(this.maxAttemptNumber - 1, 0),\n                randomize: true\n            });\n        } catch (e) {\n            if (batchOptions?.returnExceptions !== true) {\n                throw e;\n            }\n        }\n        return Object.keys(resultsMap).sort((a, b)=>parseInt(a, 10) - parseInt(b, 10)).map((key)=>resultsMap[parseInt(key, 10)]);\n    }\n    async batch(inputs, options, batchOptions) {\n        return this._batchWithConfig(this._batch.bind(this), inputs, options, batchOptions);\n    }\n}\n/**\n * A sequence of runnables, where the output of each is the input of the next.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n * const chain = RunnableSequence.from([promptTemplate, new ChatOpenAI({ model: \"gpt-4o-mini\" })]);\n * const result = await chain.invoke({ topic: \"bears\" });\n * ```\n */ class RunnableSequence extends Runnable {\n    static lc_name() {\n        return \"RunnableSequence\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"first\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"middle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"last\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"omitSequenceTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        this.first = fields.first;\n        this.middle = fields.middle ?? this.middle;\n        this.last = fields.last;\n        this.name = fields.name;\n        this.omitSequenceTags = fields.omitSequenceTags ?? this.omitSequenceTags;\n    }\n    get steps() {\n        return [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        let nextStepInput = input;\n        let finalOutput;\n        try {\n            const initialSteps = [\n                this.first,\n                ...this.middle\n            ];\n            for(let i = 0; i < initialSteps.length; i += 1){\n                const step = initialSteps[i];\n                const promise = step.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(this.omitSequenceTags ? undefined : `seq:step:${i + 1}`)\n                }));\n                nextStepInput = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, options?.signal);\n            }\n            // TypeScript can't detect that the last output of the sequence returns RunOutput, so call it out of the loop here\n            if (options?.signal?.aborted) {\n                throw new Error(\"Aborted\");\n            }\n            finalOutput = await this.last.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                callbacks: runManager?.getChild(this.omitSequenceTags ? undefined : `seq:step:${this.steps.length}`)\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n        return finalOutput;\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map(_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let nextStepInputs = inputs;\n        try {\n            for(let i = 0; i < this.steps.length; i += 1){\n                const step = this.steps[i];\n                const promise = step.batch(nextStepInputs, runManagers.map((runManager, j)=>{\n                    const childRunManager = runManager?.getChild(this.omitSequenceTags ? undefined : `seq:step:${i + 1}`);\n                    return (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(configList[j], {\n                        callbacks: childRunManager\n                    });\n                }), batchOptions);\n                nextStepInputs = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, configList[0]?.signal);\n            }\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(nextStepInputs, \"output\"))));\n        return nextStepInputs;\n    }\n    /** @internal */ _concatOutputChunks(first, second) {\n        return this.last._concatOutputChunks(first, second);\n    }\n    async *_streamIterator(input, options) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(options);\n        const { runId, ...otherOptions } = options ?? {};\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherOptions?.runName);\n        const steps = [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n        let concatSupported = true;\n        let finalOutput;\n        async function* inputGenerator() {\n            yield input;\n        }\n        try {\n            let finalGenerator = steps[0].transform(inputGenerator(), (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherOptions, {\n                callbacks: runManager?.getChild(this.omitSequenceTags ? undefined : `seq:step:1`)\n            }));\n            for(let i = 1; i < steps.length; i += 1){\n                const step = steps[i];\n                finalGenerator = await step.transform(finalGenerator, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherOptions, {\n                    callbacks: runManager?.getChild(this.omitSequenceTags ? undefined : `seq:step:${i + 1}`)\n                }));\n            }\n            for await (const chunk of finalGenerator){\n                options?.signal?.throwIfAborted();\n                yield chunk;\n                if (concatSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = this._concatOutputChunks(finalOutput, chunk);\n                        } catch (e) {\n                            finalOutput = undefined;\n                            concatSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n    }\n    getGraph(config) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_12__.Graph();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let currentLastNode = null;\n        this.steps.forEach((step, index)=>{\n            const stepGraph = step.getGraph(config);\n            if (index !== 0) {\n                stepGraph.trimFirstNode();\n            }\n            if (index !== this.steps.length - 1) {\n                stepGraph.trimLastNode();\n            }\n            graph.extend(stepGraph);\n            const stepFirstNode = stepGraph.firstNode();\n            if (!stepFirstNode) {\n                throw new Error(`Runnable ${step} has no first node`);\n            }\n            if (currentLastNode) {\n                graph.addEdge(currentLastNode, stepFirstNode);\n            }\n            currentLastNode = stepGraph.lastNode();\n        });\n        return graph;\n    }\n    pipe(coerceable) {\n        if (RunnableSequence.isRunnableSequence(coerceable)) {\n            return new RunnableSequence({\n                first: this.first,\n                middle: this.middle.concat([\n                    this.last,\n                    coerceable.first,\n                    ...coerceable.middle\n                ]),\n                last: coerceable.last,\n                name: this.name ?? coerceable.name\n            });\n        } else {\n            return new RunnableSequence({\n                first: this.first,\n                middle: [\n                    ...this.middle,\n                    this.last\n                ],\n                last: _coerceToRunnable(coerceable),\n                name: this.name\n            });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnableSequence(thing) {\n        return Array.isArray(thing.middle) && Runnable.isRunnable(thing);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from([first, ...runnables], nameOrFields) {\n        let extra = {};\n        if (typeof nameOrFields === \"string\") {\n            extra.name = nameOrFields;\n        } else if (nameOrFields !== undefined) {\n            extra = nameOrFields;\n        }\n        return new RunnableSequence({\n            ...extra,\n            first: _coerceToRunnable(first),\n            middle: runnables.slice(0, -1).map(_coerceToRunnable),\n            last: _coerceToRunnable(runnables[runnables.length - 1])\n        });\n    }\n}\n/**\n * A runnable that runs a mapping of runnables in parallel,\n * and returns a mapping of their outputs.\n * @example\n * ```typescript\n * const mapChain = RunnableMap.from({\n *   joke: PromptTemplate.fromTemplate(\"Tell me a joke about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n *   poem: PromptTemplate.fromTemplate(\"write a 2-line poem about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n * });\n * const result = await mapChain.invoke({ topic: \"bear\" });\n * ```\n */ class RunnableMap extends Runnable {\n    static lc_name() {\n        return \"RunnableMap\";\n    }\n    getStepsKeys() {\n        return Object.keys(this.steps);\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"steps\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.steps = {};\n        for (const [key, value] of Object.entries(fields.steps)){\n            this.steps[key] = _coerceToRunnable(value);\n        }\n    }\n    static from(steps) {\n        return new RunnableMap({\n            steps\n        });\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), {\n            input\n        }, config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const output = {};\n        try {\n            const promises = Object.entries(this.steps).map(async ([key, runnable])=>{\n                output[key] = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`map:key:${key}`)\n                }));\n            });\n            await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(Promise.all(promises), options?.signal);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(output);\n        return output;\n    }\n    async *_transform(generator, runManager, options) {\n        // shallow copy steps to ignore changes while iterating\n        const steps = {\n            ...this.steps\n        };\n        // each step gets a copy of the input iterator\n        const inputCopies = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.atee)(generator, Object.keys(steps).length);\n        // start the first iteration of each output iterator\n        const tasks = new Map(Object.entries(steps).map(([key, runnable], i)=>{\n            const gen = runnable.transform(inputCopies[i], (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(options, {\n                callbacks: runManager?.getChild(`map:key:${key}`)\n            }));\n            return [\n                key,\n                gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    }))\n            ];\n        }));\n        // yield chunks as they become available,\n        // starting new iterations as needed,\n        // until all iterators are done\n        while(tasks.size){\n            const promise = Promise.race(tasks.values());\n            const { key, result, gen } = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, options?.signal);\n            tasks.delete(key);\n            if (!result.done) {\n                yield {\n                    [key]: result.value\n                };\n                tasks.set(key, gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    })));\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that wraps a traced LangSmith function.\n */ class RunnableTraceable extends Runnable {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (!(0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__.isTraceableFunction)(fields.func)) {\n            throw new Error(\"RunnableTraceable requires a function that is wrapped in traceable higher-order function\");\n        }\n        this.func = fields.func;\n    }\n    async invoke(input, options) {\n        const [config] = this._getOptionsList(options ?? {}, 1);\n        const callbacks = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const promise = this.func((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks\n        }), input);\n        return (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, config?.signal);\n    }\n    async *_streamIterator(input, options) {\n        const [config] = this._getOptionsList(options ?? {}, 1);\n        const result = await this.invoke(input, options);\n        if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isAsyncIterable)(result)) {\n            for await (const item of result){\n                config?.signal?.throwIfAborted();\n                yield item;\n            }\n            return;\n        }\n        if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isIterator)(result)) {\n            while(true){\n                config?.signal?.throwIfAborted();\n                const state = result.next();\n                if (state.done) break;\n                yield state.value;\n            }\n            return;\n        }\n        yield result;\n    }\n    static from(func) {\n        return new RunnableTraceable({\n            func\n        });\n    }\n}\nfunction assertNonTraceableFunction(func) {\n    if ((0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__.isTraceableFunction)(func)) {\n        throw new Error(\"RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.\");\n    }\n}\n/**\n * A runnable that wraps an arbitrary function that takes a single argument.\n * @example\n * ```typescript\n * import { RunnableLambda } from \"@langchain/core/runnables\";\n *\n * const add = (input: { x: number; y: number }) => input.x + input.y;\n *\n * const multiply = (input: { value: number; multiplier: number }) =>\n *   input.value * input.multiplier;\n *\n * // Create runnables for the functions\n * const addLambda = RunnableLambda.from(add);\n * const multiplyLambda = RunnableLambda.from(multiply);\n *\n * // Chain the lambdas for a mathematical operation\n * const chainedLambda = addLambda.pipe((result) =>\n *   multiplyLambda.invoke({ value: result, multiplier: 2 })\n * );\n *\n * // Example invocation of the chainedLambda\n * const result = await chainedLambda.invoke({ x: 2, y: 3 });\n *\n * // Will log \"10\" (since (2 + 3) * 2 = 10)\n * ```\n */ class RunnableLambda extends Runnable {\n    static lc_name() {\n        return \"RunnableLambda\";\n    }\n    constructor(fields){\n        if ((0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__.isTraceableFunction)(fields.func)) {\n            // eslint-disable-next-line no-constructor-return\n            return RunnableTraceable.from(fields.func);\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        assertNonTraceableFunction(fields.func);\n        this.func = fields.func;\n    }\n    static from(func) {\n        return new RunnableLambda({\n            func\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return new Promise((resolve, reject)=>{\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_RECURSION_LIMIT) - 1\n            });\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.pickRunnableConfigKeys)(childConfig), async ()=>{\n                try {\n                    let output = await this.func(input, {\n                        ...childConfig\n                    });\n                    if (output && Runnable.isRunnable(output)) {\n                        if (config?.recursionLimit === 0) {\n                            throw new Error(\"Recursion limit reached.\");\n                        }\n                        output = await output.invoke(input, {\n                            ...childConfig,\n                            recursionLimit: (childConfig.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_RECURSION_LIMIT) - 1\n                        });\n                    } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isAsyncIterable)(output)) {\n                        let finalOutput;\n                        for await (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeAsyncIterableInContext)(childConfig, output)){\n                            config?.signal?.throwIfAborted();\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                // Make a best effort to gather, for any type that supports concat.\n                                try {\n                                    finalOutput = this._concatOutputChunks(finalOutput, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    chunk);\n                                } catch (e) {\n                                    finalOutput = chunk;\n                                }\n                            }\n                        }\n                        output = finalOutput;\n                    } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isIterableIterator)(output)) {\n                        let finalOutput;\n                        for (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeIteratorInContext)(childConfig, output)){\n                            config?.signal?.throwIfAborted();\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                // Make a best effort to gather, for any type that supports concat.\n                                try {\n                                    finalOutput = this._concatOutputChunks(finalOutput, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    chunk);\n                                } catch (e) {\n                                    finalOutput = chunk;\n                                }\n                            }\n                        }\n                        output = finalOutput;\n                    }\n                    resolve(output);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._invoke.bind(this), input, options);\n    }\n    async *_transform(generator, runManager, config) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                try {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    finalChunk = this._concatOutputChunks(finalChunk, chunk);\n                } catch (e) {\n                    finalChunk = chunk;\n                }\n            }\n        }\n        const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks: runManager?.getChild(),\n            recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_RECURSION_LIMIT) - 1\n        });\n        const output = await new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.pickRunnableConfigKeys)(childConfig), async ()=>{\n                try {\n                    const res = await this.func(finalChunk, {\n                        ...childConfig,\n                        config: childConfig\n                    });\n                    resolve(res);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n        if (output && Runnable.isRunnable(output)) {\n            if (config?.recursionLimit === 0) {\n                throw new Error(\"Recursion limit reached.\");\n            }\n            const stream = await output.stream(finalChunk, childConfig);\n            for await (const chunk of stream){\n                yield chunk;\n            }\n        } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isAsyncIterable)(output)) {\n            for await (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeAsyncIterableInContext)(childConfig, output)){\n                config?.signal?.throwIfAborted();\n                yield chunk;\n            }\n        } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isIterableIterator)(output)) {\n            for (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeIteratorInContext)(childConfig, output)){\n                config?.signal?.throwIfAborted();\n                yield chunk;\n            }\n        } else {\n            yield output;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that runs a mapping of runnables in parallel,\n * and returns a mapping of their outputs.\n * @example\n * ```typescript\n * import {\n *   RunnableLambda,\n *   RunnableParallel,\n * } from \"@langchain/core/runnables\";\n *\n * const addYears = (age: number): number => age + 5;\n * const yearsToFifty = (age: number): number => 50 - age;\n * const yearsToHundred = (age: number): number => 100 - age;\n *\n * const addYearsLambda = RunnableLambda.from(addYears);\n * const milestoneFiftyLambda = RunnableLambda.from(yearsToFifty);\n * const milestoneHundredLambda = RunnableLambda.from(yearsToHundred);\n *\n * // Pipe will coerce objects into RunnableParallel by default, but we\n * // explicitly instantiate one here to demonstrate\n * const sequence = addYearsLambda.pipe(\n *   RunnableParallel.from({\n *     years_to_fifty: milestoneFiftyLambda,\n *     years_to_hundred: milestoneHundredLambda,\n *   })\n * );\n *\n * // Invoke the sequence with a single age input\n * const res = await sequence.invoke(25);\n *\n * // { years_to_fifty: 20, years_to_hundred: 70 }\n * ```\n */ class RunnableParallel extends RunnableMap {\n}\n/**\n * A Runnable that can fallback to other Runnables if it fails.\n * External APIs (e.g., APIs for a language model) may at times experience\n * degraded performance or even downtime.\n *\n * In these cases, it can be useful to have a fallback Runnable that can be\n * used in place of the original Runnable (e.g., fallback to another LLM provider).\n *\n * Fallbacks can be defined at the level of a single Runnable, or at the level\n * of a chain of Runnables. Fallbacks are tried in order until one succeeds or\n * all fail.\n *\n * While you can instantiate a `RunnableWithFallbacks` directly, it is usually\n * more convenient to use the `withFallbacks` method on an existing Runnable.\n *\n * When streaming, fallbacks will only be called on failures during the initial\n * stream creation. Errors that occur after a stream starts will not fallback\n * to the next Runnable.\n *\n * @example\n * ```typescript\n * import {\n *   RunnableLambda,\n *   RunnableWithFallbacks,\n * } from \"@langchain/core/runnables\";\n *\n * const primaryOperation = (input: string): string => {\n *   if (input !== \"safe\") {\n *     throw new Error(\"Primary operation failed due to unsafe input\");\n *   }\n *   return `Processed: ${input}`;\n * };\n *\n * // Define a fallback operation that processes the input differently\n * const fallbackOperation = (input: string): string =>\n *   `Fallback processed: ${input}`;\n *\n * const primaryRunnable = RunnableLambda.from(primaryOperation);\n * const fallbackRunnable = RunnableLambda.from(fallbackOperation);\n *\n * // Apply the fallback logic using the .withFallbacks() method\n * const runnableWithFallback = primaryRunnable.withFallbacks([fallbackRunnable]);\n *\n * // Alternatively, create a RunnableWithFallbacks instance manually\n * const manualFallbackChain = new RunnableWithFallbacks({\n *   runnable: primaryRunnable,\n *   fallbacks: [fallbackRunnable],\n * });\n *\n * // Example invocation using .withFallbacks()\n * const res = await runnableWithFallback\n *   .invoke(\"unsafe input\")\n *   .catch((error) => {\n *     console.error(\"Failed after all attempts:\", error.message);\n *   });\n *\n * // \"Fallback processed: unsafe input\"\n *\n * // Example invocation using manual instantiation\n * const res = await manualFallbackChain\n *   .invoke(\"safe\")\n *   .catch((error) => {\n *     console.error(\"Failed after all attempts:\", error.message);\n *   });\n *\n * // \"Processed: safe\"\n * ```\n */ class RunnableWithFallbacks extends Runnable {\n    static lc_name() {\n        return \"RunnableWithFallbacks\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fallbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.fallbacks = fields.fallbacks;\n    }\n    *runnables() {\n        yield this.runnable;\n        for (const fallback of this.fallbacks){\n            yield fallback;\n        }\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const { runId, ...otherConfigFields } = config;\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherConfigFields?.runName);\n        const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherConfigFields, {\n            callbacks: runManager?.getChild()\n        });\n        const res = await _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__.AsyncLocalStorageProviderSingleton.runWithConfig(childConfig, async ()=>{\n            let firstError;\n            for (const runnable of this.runnables()){\n                config?.signal?.throwIfAborted();\n                try {\n                    const output = await runnable.invoke(input, childConfig);\n                    await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n                    return output;\n                } catch (e) {\n                    if (firstError === undefined) {\n                        firstError = e;\n                    }\n                }\n            }\n            if (firstError === undefined) {\n                throw new Error(\"No error stored at end of fallback.\");\n            }\n            await runManager?.handleChainError(firstError);\n            throw firstError;\n        });\n        return res;\n    }\n    async *_streamIterator(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const { runId, ...otherConfigFields } = config;\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherConfigFields?.runName);\n        let firstError;\n        let stream;\n        for (const runnable of this.runnables()){\n            config?.signal?.throwIfAborted();\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherConfigFields, {\n                callbacks: runManager?.getChild()\n            });\n            try {\n                const originalStream = await runnable.stream(input, childConfig);\n                stream = (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeAsyncIterableInContext)(childConfig, originalStream);\n                break;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (stream === undefined) {\n            const error = firstError ?? new Error(\"No error stored at end of fallback.\");\n            await runManager?.handleChainError(error);\n            throw error;\n        }\n        let output;\n        try {\n            for await (const chunk of stream){\n                yield chunk;\n                try {\n                    output = output === undefined ? output : this._concatOutputChunks(output, chunk);\n                } catch (e) {\n                    output = undefined;\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n    }\n    async batch(inputs, options, batchOptions) {\n        if (batchOptions?.returnExceptions) {\n            throw new Error(\"Not implemented.\");\n        }\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map((config)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config)));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let firstError;\n        for (const runnable of this.runnables()){\n            configList[0].signal?.throwIfAborted();\n            try {\n                const outputs = await runnable.batch(inputs, runManagers.map((runManager, j)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(configList[j], {\n                        callbacks: runManager?.getChild()\n                    })), batchOptions);\n                await Promise.all(runManagers.map((runManager, i)=>runManager?.handleChainEnd(_coerceToDict(outputs[i], \"output\"))));\n                return outputs;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (!firstError) {\n            throw new Error(\"No error stored at end of fallbacks.\");\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(firstError)));\n        throw firstError;\n    }\n}\n// TODO: Figure out why the compiler needs help eliminating Error as a RunOutput type\nfunction _coerceToRunnable(coerceable) {\n    if (typeof coerceable === \"function\") {\n        return new RunnableLambda({\n            func: coerceable\n        });\n    } else if (Runnable.isRunnable(coerceable)) {\n        return coerceable;\n    } else if (!Array.isArray(coerceable) && typeof coerceable === \"object\") {\n        const runnables = {};\n        for (const [key, value] of Object.entries(coerceable)){\n            runnables[key] = _coerceToRunnable(value);\n        }\n        return new RunnableMap({\n            steps: runnables\n        });\n    } else {\n        throw new Error(`Expected a Runnable, function or object.\\nInstead got an unsupported type.`);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n * @example\n * ```typescript\n * import {\n *   RunnableAssign,\n *   RunnableLambda,\n *   RunnableParallel,\n * } from \"@langchain/core/runnables\";\n *\n * const calculateAge = (x: { birthYear: number }): { age: number } => {\n *   const currentYear = new Date().getFullYear();\n *   return { age: currentYear - x.birthYear };\n * };\n *\n * const createGreeting = (x: { name: string }): { greeting: string } => {\n *   return { greeting: `Hello, ${x.name}!` };\n * };\n *\n * const mapper = RunnableParallel.from({\n *   age_step: RunnableLambda.from(calculateAge),\n *   greeting_step: RunnableLambda.from(createGreeting),\n * });\n *\n * const runnableAssign = new RunnableAssign({ mapper });\n *\n * const res = await runnableAssign.invoke({ name: \"Alice\", birthYear: 1990 });\n *\n * // { name: \"Alice\", birthYear: 1990, age_step: { age: 34 }, greeting_step: { greeting: \"Hello, Alice!\" } }\n * ```\n */ class RunnableAssign extends Runnable {\n    static lc_name() {\n        return \"RunnableAssign\";\n    }\n    constructor(fields){\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (fields instanceof RunnableMap) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                mapper: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"mapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.mapper = fields.mapper;\n    }\n    async invoke(input, options) {\n        const mapperResult = await this.mapper.invoke(input, options);\n        return {\n            ...input,\n            ...mapperResult\n        };\n    }\n    async *_transform(generator, runManager, options) {\n        // collect mapper keys\n        const mapperKeys = this.mapper.getStepsKeys();\n        // create two input gens, one for the mapper, one for the input\n        const [forPassthrough, forMapper] = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.atee)(generator);\n        // create mapper output gen\n        const mapperOutput = this.mapper.transform(forMapper, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(options, {\n            callbacks: runManager?.getChild()\n        }));\n        // start the mapper\n        const firstMapperChunkPromise = mapperOutput.next();\n        // yield the passthrough\n        for await (const chunk of forPassthrough){\n            if (typeof chunk !== \"object\" || Array.isArray(chunk)) {\n                throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof chunk}`);\n            }\n            const filtered = Object.fromEntries(Object.entries(chunk).filter(([key])=>!mapperKeys.includes(key)));\n            if (Object.keys(filtered).length > 0) {\n                yield filtered;\n            }\n        }\n        // yield the mapper output\n        yield (await firstMapperChunkPromise).value;\n        for await (const chunk of mapperOutput){\n            yield chunk;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n * Useful for streaming, can be automatically created and chained by calling `runnable.pick();`.\n * @example\n * ```typescript\n * import { RunnablePick } from \"@langchain/core/runnables\";\n *\n * const inputData = {\n *   name: \"John\",\n *   age: 30,\n *   city: \"New York\",\n *   country: \"USA\",\n *   email: \"john.doe@example.com\",\n *   phone: \"+1234567890\",\n * };\n *\n * const basicInfoRunnable = new RunnablePick([\"name\", \"city\"]);\n *\n * // Example invocation\n * const res = await basicInfoRunnable.invoke(inputData);\n *\n * // { name: 'John', city: 'New York' }\n * ```\n */ class RunnablePick extends Runnable {\n    static lc_name() {\n        return \"RunnablePick\";\n    }\n    constructor(fields){\n        if (typeof fields === \"string\" || Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                keys: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"keys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keys = fields.keys;\n    }\n    async _pick(input) {\n        if (typeof this.keys === \"string\") {\n            return input[this.keys];\n        } else {\n            const picked = this.keys.map((key)=>[\n                    key,\n                    input[key]\n                ]).filter((v)=>v[1] !== undefined);\n            return picked.length === 0 ? undefined : Object.fromEntries(picked);\n        }\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._pick.bind(this), input, options);\n    }\n    async *_transform(generator) {\n        for await (const chunk of generator){\n            const picked = await this._pick(chunk);\n            if (picked !== undefined) {\n                yield picked;\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\nclass RunnableToolLike extends RunnableBinding {\n    constructor(fields){\n        const sequence = RunnableSequence.from([\n            RunnableLambda.from(async (input)=>{\n                let toolInput;\n                if ((0,_tools_utils_js__WEBPACK_IMPORTED_MODULE_15__._isToolCall)(input)) {\n                    try {\n                        toolInput = await (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_16__.interopParseAsync)(this.schema, input.args);\n                    } catch (e) {\n                        throw new _tools_utils_js__WEBPACK_IMPORTED_MODULE_15__.ToolInputParsingException(`Received tool input did not match expected schema`, JSON.stringify(input.args));\n                    }\n                } else {\n                    toolInput = input;\n                }\n                return toolInput;\n            }).withConfig({\n                runName: `${fields.name}:parse_input`\n            }),\n            fields.bound\n        ]).withConfig({\n            runName: fields.name\n        });\n        super({\n            bound: sequence,\n            config: fields.config ?? {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.description = fields.description;\n        this.schema = fields.schema;\n    }\n    static lc_name() {\n        return \"RunnableToolLike\";\n    }\n}\n/**\n * Given a runnable and a Zod schema, convert the runnable to a tool.\n *\n * @template RunInput The input type for the runnable.\n * @template RunOutput The output type for the runnable.\n *\n * @param {Runnable<RunInput, RunOutput>} runnable The runnable to convert to a tool.\n * @param fields\n * @param {string | undefined} [fields.name] The name of the tool. If not provided, it will default to the name of the runnable.\n * @param {string | undefined} [fields.description] The description of the tool. Falls back to the description on the Zod schema if not provided, or undefined if neither are provided.\n * @param {InteropZodType<RunInput>} [fields.schema] The Zod schema for the input of the tool. Infers the Zod type from the input type of the runnable.\n * @returns {RunnableToolLike<InteropZodType<RunInput>, RunOutput>} An instance of `RunnableToolLike` which is a runnable that can be used as a tool.\n */ function convertRunnableToTool(runnable, fields) {\n    const name = fields.name ?? runnable.getName();\n    const description = fields.description ?? (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_16__.getSchemaDescription)(fields.schema);\n    if ((0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_16__.isSimpleStringZodSchema)(fields.schema)) {\n        return new RunnableToolLike({\n            name,\n            description,\n            schema: zod_v3__WEBPACK_IMPORTED_MODULE_17__.object({\n                input: zod_v3__WEBPACK_IMPORTED_MODULE_17__.string()\n            }).transform((input)=>input.input),\n            bound: runnable\n        });\n    }\n    return new RunnableToolLike({\n        name,\n        description,\n        schema: fields.schema,\n        bound: runnable\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkI7QUFDRTtBQUNPO0FBQ2tDO0FBQ3dDO0FBQ2Q7QUFDekM7QUFDcUU7QUFDeEU7QUFDaUc7QUFDOUY7QUFDVztBQUNDO0FBQ1M7QUFDekM7QUFDc0I7QUFDNkU7QUFDM0Q7QUFDK0I7QUFDMUcsOERBQThEO0FBQ3ZELFNBQVN5QyxjQUFjQyxLQUFLLEVBQUVDLFVBQVU7SUFDM0MsT0FBT0QsU0FDSCxDQUFDRSxNQUFNQyxPQUFPLENBQUNILFVBQ2YsdURBQXVEO0lBQ3ZELENBQUVBLENBQUFBLGlCQUFpQkksSUFBRyxLQUN0QixPQUFPSixVQUFVLFdBQ2ZBLFFBQ0E7UUFBRSxDQUFDQyxXQUFXLEVBQUVEO0lBQU07QUFDaEM7QUFDQTs7O0NBR0MsR0FDTSxNQUFNSyxpQkFBaUJwQywrREFBWUE7SUFDdENxQyxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87UUFDWDtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtJQUNKO0lBQ0FhLFFBQVFDLE1BQU0sRUFBRTtRQUNaLE1BQU1DLE9BQ04sOERBQThEO1FBQzlELElBQUksQ0FBQ0EsSUFBSSxJQUFJLElBQUksQ0FBQ1QsV0FBVyxDQUFDVSxPQUFPLE1BQU0sSUFBSSxDQUFDVixXQUFXLENBQUNTLElBQUk7UUFDaEUsT0FBT0QsU0FBUyxDQUFDLEVBQUVDLEtBQUssRUFBRUQsT0FBTyxDQUFDLEdBQUdDO0lBQ3pDO0lBQ0E7Ozs7OztLQU1DLEdBQ0RFLEtB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QUFzQjFMLFFBQVEsRUFBRVIsTUFBTTtJQUNsRCxNQUFNVixPQUFPVSxPQUFPVixJQUFJLElBQUlrQixTQUFTcEIsT0FBTztJQUM1QyxNQUFNdVQsY0FBYzNTLE9BQU8yUyxXQUFXLElBQUl4VSwwRUFBb0JBLENBQUM2QixPQUFPbUcsTUFBTTtJQUM1RSxJQUFJOUgsNkVBQXVCQSxDQUFDMkIsT0FBT21HLE1BQU0sR0FBRztRQUN4QyxPQUFPLElBQUlrTSxpQkFBaUI7WUFDeEIvUztZQUNBcVQ7WUFDQXhNLFFBQVF0SywyQ0FDRyxDQUFDO2dCQUFFb0csT0FBT3BHLDJDQUFRO1lBQUcsR0FDM0J1TCxTQUFTLENBQUMsQ0FBQ25GLFFBQVVBLE1BQU1BLEtBQUs7WUFDckN0QyxPQUFPYTtRQUNYO0lBQ0o7SUFDQSxPQUFPLElBQUk2UixpQkFBaUI7UUFDeEIvUztRQUNBcVQ7UUFDQXhNLFFBQVFuRyxPQUFPbUcsTUFBTTtRQUNyQnhHLE9BQU9hO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2Jhc2UuanM/NDU2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92M1wiO1xuaW1wb3J0IHBSZXRyeSBmcm9tIFwicC1yZXRyeVwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IGlzVHJhY2VhYmxlRnVuY3Rpb24sIH0gZnJvbSBcImxhbmdzbWl0aC9zaW5nbGV0b25zL3RyYWNlYWJsZVwiO1xuaW1wb3J0IHsgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBSdW5Mb2csIFJ1bkxvZ1BhdGNoLCBpc0xvZ1N0cmVhbUhhbmRsZXIsIH0gZnJvbSBcIi4uL3RyYWNlcnMvbG9nX3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgRXZlbnRTdHJlYW1DYWxsYmFja0hhbmRsZXIsIGlzU3RyZWFtRXZlbnRzSGFuZGxlciwgfSBmcm9tIFwiLi4vdHJhY2Vycy9ldmVudF9zdHJlYW0uanNcIjtcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSwgY29uY2F0LCBhdGVlLCBwaXBlR2VuZXJhdG9yV2l0aFNldHVwLCBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCwgfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyByYWNlV2l0aFNpZ25hbCB9IGZyb20gXCIuLi91dGlscy9zaWduYWwuanNcIjtcbmltcG9ydCB7IERFRkFVTFRfUkVDVVJTSU9OX0xJTUlULCBlbnN1cmVDb25maWcsIGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZywgbWVyZ2VDb25maWdzLCBwYXRjaENvbmZpZywgcGlja1J1bm5hYmxlQ29uZmlnS2V5cywgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcbmltcG9ydCB7IEFzeW5jQ2FsbGVyIH0gZnJvbSBcIi4uL3V0aWxzL2FzeW5jX2NhbGxlci5qc1wiO1xuaW1wb3J0IHsgUm9vdExpc3RlbmVyc1RyYWNlciB9IGZyb20gXCIuLi90cmFjZXJzL3Jvb3RfbGlzdGVuZXIuanNcIjtcbmltcG9ydCB7IF9Sb290RXZlbnRGaWx0ZXIsIGlzUnVubmFibGVJbnRlcmZhY2UgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBHcmFwaCB9IGZyb20gXCIuL2dyYXBoLmpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9IdHRwRXZlbnRTdHJlYW0gfSBmcm9tIFwiLi93cmFwcGVycy5qc1wiO1xuaW1wb3J0IHsgY29uc3VtZUFzeW5jSXRlcmFibGVJbkNvbnRleHQsIGNvbnN1bWVJdGVyYXRvckluQ29udGV4dCwgaXNBc3luY0l0ZXJhYmxlLCBpc0l0ZXJhYmxlSXRlcmF0b3IsIGlzSXRlcmF0b3IsIH0gZnJvbSBcIi4vaXRlci5qc1wiO1xuaW1wb3J0IHsgX2lzVG9vbENhbGwsIFRvb2xJbnB1dFBhcnNpbmdFeGNlcHRpb24gfSBmcm9tIFwiLi4vdG9vbHMvdXRpbHMuanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYURlc2NyaXB0aW9uLCBpbnRlcm9wUGFyc2VBc3luYywgaXNTaW1wbGVTdHJpbmdab2RTY2hlbWEsIH0gZnJvbSBcIi4uL3V0aWxzL3R5cGVzL3pvZC5qc1wiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiBfY29lcmNlVG9EaWN0KHZhbHVlLCBkZWZhdWx0S2V5KSB7XG4gICAgcmV0dXJuIHZhbHVlICYmXG4gICAgICAgICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICEodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgPyB2YWx1ZVxuICAgICAgICA6IHsgW2RlZmF1bHRLZXldOiB2YWx1ZSB9O1xufVxuLyoqXG4gKiBBIFJ1bm5hYmxlIGlzIGEgZ2VuZXJpYyB1bml0IG9mIHdvcmsgdGhhdCBjYW4gYmUgaW52b2tlZCwgYmF0Y2hlZCwgc3RyZWFtZWQsIGFuZC9vclxuICogdHJhbnNmb3JtZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZSBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3J1bm5hYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldE5hbWUoc3VmZml4KSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdGhpcy5uYW1lID8/IHRoaXMuY29uc3RydWN0b3IubGNfbmFtZSgpID8/IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgcmV0dXJuIHN1ZmZpeCA/IGAke25hbWV9JHtzdWZmaXh9YCA6IG5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgYXJndW1lbnRzIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBAcGFyYW0ga3dhcmdzXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVCaW5kaW5nIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBhcHBseSB0aGUgYm91bmQgYXJncy5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgd2l0aENvbmZpZ30gaW5zdGVhZC4gVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgYnJlYWtpbmcgcmVsZWFzZS5cbiAgICAgKi9cbiAgICBiaW5kKGt3YXJncykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHsgYm91bmQ6IHRoaXMsIGt3YXJncywgY29uZmlnOiB7fSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgbmV3IFJ1bm5hYmxlIHRoYXQgbWFwcyBhIGxpc3Qgb2YgaW5wdXRzIHRvIGEgbGlzdCBvZiBvdXRwdXRzLFxuICAgICAqIGJ5IGNhbGxpbmcgaW52b2tlKCkgd2l0aCBlYWNoIGlucHV0LlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgYnJlYWtpbmcgcmVsZWFzZS5cbiAgICAgKi9cbiAgICBtYXAoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUVhY2goeyBib3VuZDogdGhpcyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIHJldHJ5IGxvZ2ljIHRvIGFuIGV4aXN0aW5nIHJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBmaWVsZHMuc3RvcEFmdGVyQXR0ZW1wdCBUaGUgbnVtYmVyIG9mIGF0dGVtcHRzIHRvIHJldHJ5LlxuICAgICAqIEBwYXJhbSBmaWVsZHMub25GYWlsZWRBdHRlbXB0IEEgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHJldHJ5IGZhaWxzLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFJ1bm5hYmxlUmV0cnkgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIHJldHJ5IGFjY29yZGluZyB0byB0aGUgcGFyYW1ldGVycy5cbiAgICAgKi9cbiAgICB3aXRoUmV0cnkoZmllbGRzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVJldHJ5KHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLFxuICAgICAgICAgICAga3dhcmdzOiB7fSxcbiAgICAgICAgICAgIGNvbmZpZzoge30sXG4gICAgICAgICAgICBtYXhBdHRlbXB0TnVtYmVyOiBmaWVsZHM/LnN0b3BBZnRlckF0dGVtcHQsXG4gICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGNvbmZpZyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogQHBhcmFtIGNvbmZpZyBOZXcgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIHRvIGF0dGFjaCB0byB0aGUgbmV3IHJ1bm5hYmxlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFJ1bm5hYmxlQmluZGluZyB3aXRoIGEgY29uZmlnIG1hdGNoaW5nIHdoYXQncyBwYXNzZWQuXG4gICAgICovXG4gICAgd2l0aENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG4gICAgICAgICAgICBib3VuZDogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgIGt3YXJnczoge30sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgcnVubmFibGUgZnJvbSB0aGUgY3VycmVudCBvbmUgdGhhdCB3aWxsIHRyeSBpbnZva2luZ1xuICAgICAqIG90aGVyIHBhc3NlZCBmYWxsYmFjayBydW5uYWJsZXMgaWYgdGhlIGluaXRpYWwgaW52b2NhdGlvbiBmYWlscy5cbiAgICAgKiBAcGFyYW0gZmllbGRzLmZhbGxiYWNrcyBPdGhlciBydW5uYWJsZXMgdG8gY2FsbCBpZiB0aGUgcnVubmFibGUgZXJyb3JzLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFJ1bm5hYmxlV2l0aEZhbGxiYWNrcy5cbiAgICAgKi9cbiAgICB3aXRoRmFsbGJhY2tzKGZpZWxkcykge1xuICAgICAgICBjb25zdCBmYWxsYmFja3MgPSBBcnJheS5pc0FycmF5KGZpZWxkcykgPyBmaWVsZHMgOiBmaWVsZHMuZmFsbGJhY2tzO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVXaXRoRmFsbGJhY2tzKHtcbiAgICAgICAgICAgIHJ1bm5hYmxlOiB0aGlzLFxuICAgICAgICAgICAgZmFsbGJhY2tzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMsIGxlbmd0aCA9IDApIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykgJiYgb3B0aW9ucy5sZW5ndGggIT09IGxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQYXNzZWQgXCJvcHRpb25zXCIgbXVzdCBiZSBhbiBhcnJheSB3aXRoIHRoZSBzYW1lIGxlbmd0aCBhcyB0aGUgaW5wdXRzLCBidXQgZ290ICR7b3B0aW9ucy5sZW5ndGh9IG9wdGlvbnMgZm9yICR7bGVuZ3RofSBpbnB1dHNgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMubWFwKGVuc3VyZUNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aCA+IDEgJiYgIUFycmF5LmlzQXJyYXkob3B0aW9ucykgJiYgb3B0aW9ucy5ydW5JZCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiUHJvdmlkZWQgcnVuSWQgd2lsbCBiZSB1c2VkIG9ubHkgZm9yIHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBiYXRjaC5cIik7XG4gICAgICAgICAgICBjb25zdCBzdWJzZXF1ZW50ID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLmZpbHRlcigoW2tleV0pID0+IGtleSAhPT0gXCJydW5JZFwiKSk7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoXywgaSkgPT4gZW5zdXJlQ29uZmlnKGkgPT09IDAgPyBvcHRpb25zIDogc3Vic2VxdWVudCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sICgpID0+IGVuc3VyZUNvbmZpZyhvcHRpb25zKSk7XG4gICAgfVxuICAgIGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgbWF4Q29uY3VycmVuY3kgPSBjb25maWdMaXN0WzBdPy5tYXhDb25jdXJyZW5jeSA/PyBiYXRjaE9wdGlvbnM/Lm1heENvbmN1cnJlbmN5O1xuICAgICAgICBjb25zdCBjYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIoe1xuICAgICAgICAgICAgbWF4Q29uY3VycmVuY3ksXG4gICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBiYXRjaENhbGxzID0gaW5wdXRzLm1hcCgoaW5wdXQsIGkpID0+IGNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbnZva2UoaW5wdXQsIGNvbmZpZ0xpc3RbaV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChiYXRjaE9wdGlvbnM/LnJldHVybkV4Y2VwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGJhdGNoQ2FsbHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IHN0cmVhbWluZyBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB0aGV5IHN1cHBvcnQgc3RyZWFtaW5nIG91dHB1dC5cbiAgICAgKiBAcGFyYW0gaW5wdXRcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgeWllbGQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdHJlYW0gb3V0cHV0IGluIGNodW5rcy5cbiAgICAgKiBAcGFyYW0gaW5wdXRcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIEEgcmVhZGFibGUgc3RyZWFtIHRoYXQgaXMgYWxzbyBhbiBpdGVyYWJsZS5cbiAgICAgKi9cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQnVmZmVyIHRoZSBmaXJzdCBzdHJlYW1lZCBjaHVuayB0byBhbGxvdyBmb3IgaW5pdGlhbCBlcnJvcnNcbiAgICAgICAgLy8gdG8gc3VyZmFjZSBpbW1lZGlhdGVseS5cbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHtcbiAgICAgICAgICAgIGdlbmVyYXRvcjogdGhpcy5fc3RyZWFtSXRlcmF0b3IoaW5wdXQsIGNvbmZpZyksXG4gICAgICAgICAgICBjb25maWcsXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB3cmFwcGVkR2VuZXJhdG9yLnNldHVwO1xuICAgICAgICByZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG4gICAgfVxuICAgIF9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHJ1bm5hYmxlQ29uZmlnO1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBydW5uYWJsZUNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJ1bm5hYmxlQ29uZmlnID0gZW5zdXJlQ29uZmlnKHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IG9wdGlvbnMuY2FsbGJhY2tzLFxuICAgICAgICAgICAgICAgIHRhZ3M6IG9wdGlvbnMudGFncyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogb3B0aW9ucy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICBydW5OYW1lOiBvcHRpb25zLnJ1bk5hbWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBvcHRpb25zLmNvbmZpZ3VyYWJsZSxcbiAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogb3B0aW9ucy5yZWN1cnNpb25MaW1pdCxcbiAgICAgICAgICAgICAgICBtYXhDb25jdXJyZW5jeTogb3B0aW9ucy5tYXhDb25jdXJyZW5jeSxcbiAgICAgICAgICAgICAgICBydW5JZDogb3B0aW9ucy5ydW5JZCxcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiBvcHRpb25zLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhbGxPcHRpb25zID0geyAuLi5vcHRpb25zIH07XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5jYWxsYmFja3M7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy50YWdzO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMubWV0YWRhdGE7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5ydW5OYW1lO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMuY29uZmlndXJhYmxlO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMucmVjdXJzaW9uTGltaXQ7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5tYXhDb25jdXJyZW5jeTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLnJ1bklkO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMudGltZW91dDtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLnNpZ25hbDtcbiAgICAgICAgcmV0dXJuIFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdO1xuICAgIH1cbiAgICBhc3luYyBfY2FsbFdpdGhDb25maWcoZnVuYywgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIGNvbmZpZy5ydW5JZCwgY29uZmlnPy5ydW5UeXBlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKTtcbiAgICAgICAgZGVsZXRlIGNvbmZpZy5ydW5JZDtcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBmdW5jLmNhbGwodGhpcywgaW5wdXQsIGNvbmZpZywgcnVuTWFuYWdlcik7XG4gICAgICAgICAgICBvdXRwdXQgPSBhd2FpdCByYWNlV2l0aFNpZ25hbChwcm9taXNlLCBvcHRpb25zPy5zaWduYWwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBtZXRob2QgdGhhdCBoYW5kbGVzIGJhdGNoaW5nIGFuZCBjb25maWd1cmF0aW9uIGZvciBhIHJ1bm5hYmxlXG4gICAgICogSXQgdGFrZXMgYSBmdW5jdGlvbiwgaW5wdXQgdmFsdWVzLCBhbmQgb3B0aW9uYWwgY29uZmlndXJhdGlvbiwgYW5kXG4gICAgICogcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgZm9yIGVhY2ggaW5wdXQgdmFsdWUuXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB2YWx1ZXMgdG8gYmUgcHJvY2Vzc2VkLlxuICAgICAqIEBwYXJhbSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIGZ1bmN0aW9uIGV4ZWN1dGlvbi5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IHZhbHVlcy5cbiAgICAgKi9cbiAgICBhc3luYyBfYmF0Y2hXaXRoQ29uZmlnKGZ1bmMsIGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnNMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChvcHRpb25zTGlzdC5tYXAoZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tNYW5hZ2Vycy5tYXAoYXN5bmMgKGNhbGxiYWNrTWFuYWdlciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlU3RhcnRSZXMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXI/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dHNbaV0sIFwiaW5wdXRcIiksIG9wdGlvbnNMaXN0W2ldLnJ1bklkLCBvcHRpb25zTGlzdFtpXS5ydW5UeXBlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3B0aW9uc0xpc3RbaV0ucnVuTmFtZSA/PyB0aGlzLmdldE5hbWUoKSk7XG4gICAgICAgICAgICBkZWxldGUgb3B0aW9uc0xpc3RbaV0ucnVuSWQ7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlU3RhcnRSZXM7XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IG91dHB1dHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gZnVuYy5jYWxsKHRoaXMsIGlucHV0cywgb3B0aW9uc0xpc3QsIHJ1bk1hbmFnZXJzLCBiYXRjaE9wdGlvbnMpO1xuICAgICAgICAgICAgb3V0cHV0cyA9IGF3YWl0IHJhY2VXaXRoU2lnbmFsKHByb21pc2UsIG9wdGlvbnNMaXN0Py5bMF0/LnNpZ25hbCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKSkpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0cywgXCJvdXRwdXRcIikpKSk7XG4gICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2NvbmNhdE91dHB1dENodW5rcyhmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBjb25jYXQoZmlyc3QsIHNlY29uZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gdHJhbnNmb3JtIGFuIEl0ZXJhdG9yIG9mIElucHV0IHZhbHVlcyBpbnRvIGFuIEl0ZXJhdG9yIG9mXG4gICAgICogT3V0cHV0IHZhbHVlcywgd2l0aCBjYWxsYmFja3MuXG4gICAgICogVXNlIHRoaXMgdG8gaW1wbGVtZW50IGBzdHJlYW0oKWAgb3IgYHRyYW5zZm9ybSgpYCBpbiBSdW5uYWJsZSBzdWJjbGFzc2VzLlxuICAgICAqL1xuICAgIGFzeW5jICpfdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhpbnB1dEdlbmVyYXRvciwgdHJhbnNmb3JtZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGZpbmFsSW5wdXQ7XG4gICAgICAgIGxldCBmaW5hbElucHV0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3Qgb3V0ZXJUaGlzID0gdGhpcztcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIHdyYXBJbnB1dEZvclRyYWNpbmcoKSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsSW5wdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsSW5wdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbElucHV0ID0gb3V0ZXJUaGlzLl9jb25jYXRPdXRwdXRDaHVua3MoZmluYWxJbnB1dCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbElucHV0U3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJ1bk1hbmFnZXI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwaXBlID0gYXdhaXQgcGlwZUdlbmVyYXRvcldpdGhTZXR1cCh0cmFuc2Zvcm1lci5iaW5kKHRoaXMpLCB3cmFwSW5wdXRGb3JUcmFjaW5nKCksIGFzeW5jICgpID0+IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgeyBpbnB1dDogXCJcIiB9LCBjb25maWcucnVuSWQsIGNvbmZpZy5ydW5UeXBlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnLnJ1bk5hbWUgPz8gdGhpcy5nZXROYW1lKCkpLCBvcHRpb25zPy5zaWduYWwsIGNvbmZpZyk7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnLnJ1bklkO1xuICAgICAgICAgICAgcnVuTWFuYWdlciA9IHBpcGUuc2V0dXA7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW1FdmVudHNIYW5kbGVyID0gcnVuTWFuYWdlcj8uaGFuZGxlcnMuZmluZChpc1N0cmVhbUV2ZW50c0hhbmRsZXIpO1xuICAgICAgICAgICAgbGV0IGl0ZXJhdG9yID0gcGlwZS5vdXRwdXQ7XG4gICAgICAgICAgICBpZiAoc3RyZWFtRXZlbnRzSGFuZGxlciAhPT0gdW5kZWZpbmVkICYmIHJ1bk1hbmFnZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gc3RyZWFtRXZlbnRzSGFuZGxlci50YXBPdXRwdXRJdGVyYWJsZShydW5NYW5hZ2VyLnJ1bklkLCBpdGVyYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdHJlYW1Mb2dIYW5kbGVyID0gcnVuTWFuYWdlcj8uaGFuZGxlcnMuZmluZChpc0xvZ1N0cmVhbUhhbmRsZXIpO1xuICAgICAgICAgICAgaWYgKHN0cmVhbUxvZ0hhbmRsZXIgIT09IHVuZGVmaW5lZCAmJiBydW5NYW5hZ2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvciA9IHN0cmVhbUxvZ0hhbmRsZXIudGFwT3V0cHV0SXRlcmFibGUocnVuTWFuYWdlci5ydW5JZCwgaXRlcmF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpdGVyYXRvcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSB0aGlzLl9jb25jYXRPdXRwdXRDaHVua3MoZmluYWxPdXRwdXQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwge1xuICAgICAgICAgICAgICAgIGlucHV0czogX2NvZXJjZVRvRGljdChmaW5hbElucHV0LCBcImlucHV0XCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKGZpbmFsT3V0cHV0ID8/IHt9LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7IGlucHV0czogX2NvZXJjZVRvRGljdChmaW5hbElucHV0LCBcImlucHV0XCIpIH0pO1xuICAgIH1cbiAgICBnZXRHcmFwaChfKSB7XG4gICAgICAgIGNvbnN0IGdyYXBoID0gbmV3IEdyYXBoKCk7XG4gICAgICAgIC8vIFRPRE86IEFkZCBpbnB1dCBzY2hlbWEgZm9yIHJ1bm5hYmxlc1xuICAgICAgICBjb25zdCBpbnB1dE5vZGUgPSBncmFwaC5hZGROb2RlKHtcbiAgICAgICAgICAgIG5hbWU6IGAke3RoaXMuZ2V0TmFtZSgpfUlucHV0YCxcbiAgICAgICAgICAgIHNjaGVtYTogei5hbnkoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJ1bm5hYmxlTm9kZSA9IGdyYXBoLmFkZE5vZGUodGhpcyk7XG4gICAgICAgIC8vIFRPRE86IEFkZCBvdXRwdXQgc2NoZW1hcyBmb3IgcnVubmFibGVzXG4gICAgICAgIGNvbnN0IG91dHB1dE5vZGUgPSBncmFwaC5hZGROb2RlKHtcbiAgICAgICAgICAgIG5hbWU6IGAke3RoaXMuZ2V0TmFtZSgpfU91dHB1dGAsXG4gICAgICAgICAgICBzY2hlbWE6IHouYW55KCksXG4gICAgICAgIH0pO1xuICAgICAgICBncmFwaC5hZGRFZGdlKGlucHV0Tm9kZSwgcnVubmFibGVOb2RlKTtcbiAgICAgICAgZ3JhcGguYWRkRWRnZShydW5uYWJsZU5vZGUsIG91dHB1dE5vZGUpO1xuICAgICAgICByZXR1cm4gZ3JhcGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBydW5uYWJsZSBzZXF1ZW5jZSB0aGF0IHJ1bnMgZWFjaCBpbmRpdmlkdWFsIHJ1bm5hYmxlIGluIHNlcmllcyxcbiAgICAgKiBwaXBpbmcgdGhlIG91dHB1dCBvZiBvbmUgcnVubmFibGUgaW50byBhbm90aGVyIHJ1bm5hYmxlIG9yIHJ1bm5hYmxlLWxpa2UuXG4gICAgICogQHBhcmFtIGNvZXJjZWFibGUgQSBydW5uYWJsZSwgZnVuY3Rpb24sIG9yIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGZ1bmN0aW9ucyBvciBydW5uYWJsZXMuXG4gICAgICogQHJldHVybnMgQSBuZXcgcnVubmFibGUgc2VxdWVuY2UuXG4gICAgICovXG4gICAgcGlwZShjb2VyY2VhYmxlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgIGZpcnN0OiB0aGlzLFxuICAgICAgICAgICAgbGFzdDogX2NvZXJjZVRvUnVubmFibGUoY29lcmNlYWJsZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQaWNrIGtleXMgZnJvbSB0aGUgZGljdCBvdXRwdXQgb2YgdGhpcyBydW5uYWJsZS4gUmV0dXJucyBhIG5ldyBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBwaWNrKGtleXMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gdGhpcy5waXBlKG5ldyBSdW5uYWJsZVBpY2soa2V5cykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBc3NpZ25zIG5ldyBmaWVsZHMgdG8gdGhlIGRpY3Qgb3V0cHV0IG9mIHRoaXMgcnVubmFibGUuIFJldHVybnMgYSBuZXcgcnVubmFibGUuXG4gICAgICovXG4gICAgYXNzaWduKG1hcHBpbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGlwZShcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBuZXcgUnVubmFibGVBc3NpZ24oXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgbmV3IFJ1bm5hYmxlTWFwKHsgc3RlcHM6IG1hcHBpbmcgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB0cmFuc2Zvcm0sIHdoaWNoIGJ1ZmZlcnMgaW5wdXQgYW5kIHRoZW4gY2FsbHMgc3RyZWFtLlxuICAgICAqIFN1YmNsYXNzZXMgc2hvdWxkIG92ZXJyaWRlIHRoaXMgbWV0aG9kIGlmIHRoZXkgY2FuIHN0YXJ0IHByb2R1Y2luZyBvdXRwdXQgd2hpbGVcbiAgICAgKiBpbnB1dCBpcyBzdGlsbCBiZWluZyBnZW5lcmF0ZWQuXG4gICAgICogQHBhcmFtIGdlbmVyYXRvclxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICovXG4gICAgYXN5bmMgKnRyYW5zZm9ybShnZW5lcmF0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGZpbmFsQ2h1bms7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAoZmluYWxDaHVuayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBhIGJlc3QgZWZmb3J0IHRvIGdhdGhlciwgZm9yIGFueSB0eXBlIHRoYXQgc3VwcG9ydHMgY29uY2F0LlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCB0aHJvdyBhbiBlcnJvciBpZiBnYXRoZXJpbmcgZmFpbHMuXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gdGhpcy5fY29uY2F0T3V0cHV0Q2h1bmtzKGZpbmFsQ2h1bmssIGNodW5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB5aWVsZCogdGhpcy5fc3RyZWFtSXRlcmF0b3IoZmluYWxDaHVuaywgZW5zdXJlQ29uZmlnKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RyZWFtIGFsbCBvdXRwdXQgZnJvbSBhIHJ1bm5hYmxlLCBhcyByZXBvcnRlZCB0byB0aGUgY2FsbGJhY2sgc3lzdGVtLlxuICAgICAqIFRoaXMgaW5jbHVkZXMgYWxsIGlubmVyIHJ1bnMgb2YgTExNcywgUmV0cmlldmVycywgVG9vbHMsIGV0Yy5cbiAgICAgKiBPdXRwdXQgaXMgc3RyZWFtZWQgYXMgTG9nIG9iamVjdHMsIHdoaWNoIGluY2x1ZGUgYSBsaXN0IG9mXG4gICAgICoganNvbnBhdGNoIG9wcyB0aGF0IGRlc2NyaWJlIGhvdyB0aGUgc3RhdGUgb2YgdGhlIHJ1biBoYXMgY2hhbmdlZCBpbiBlYWNoXG4gICAgICogc3RlcCwgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgcnVuLlxuICAgICAqIFRoZSBqc29ucGF0Y2ggb3BzIGNhbiBiZSBhcHBsaWVkIGluIG9yZGVyIHRvIGNvbnN0cnVjdCBzdGF0ZS5cbiAgICAgKiBAcGFyYW0gaW5wdXRcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSBzdHJlYW1PcHRpb25zXG4gICAgICovXG4gICAgYXN5bmMgKnN0cmVhbUxvZyhpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICBjb25zdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIgPSBuZXcgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKHtcbiAgICAgICAgICAgIC4uLnN0cmVhbU9wdGlvbnMsXG4gICAgICAgICAgICBhdXRvQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgX3NjaGVtYUZvcm1hdDogXCJvcmlnaW5hbFwiLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICB5aWVsZCogdGhpcy5fc3RyZWFtTG9nKGlucHV0LCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsIGNvbmZpZyk7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtTG9nKGlucHV0LCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsIGNvbmZpZykge1xuICAgICAgICBjb25zdCB7IGNhbGxiYWNrcyB9ID0gY29uZmlnO1xuICAgICAgICBpZiAoY2FsbGJhY2tzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IFtsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXJdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBjb25maWcuY2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvbmNhdChbbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjb3BpZWRDYWxsYmFja3MgPSBjYWxsYmFja3MuY29weSgpO1xuICAgICAgICAgICAgY29waWVkQ2FsbGJhY2tzLmFkZEhhbmRsZXIobG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNvcGllZENhbGxiYWNrcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbVByb21pc2UgPSB0aGlzLnN0cmVhbShpbnB1dCwgY29uZmlnKTtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gY29uc3VtZVJ1bm5hYmxlU3RyZWFtKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbSA9IGF3YWl0IHJ1bm5hYmxlU3RyZWFtUHJvbWlzZTtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHJ1bm5hYmxlU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiL3N0cmVhbWVkX291dHB1dC8tXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjaHVuayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlci53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlci53cml0ZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbUNvbnN1bWVQcm9taXNlID0gY29uc3VtZVJ1bm5hYmxlU3RyZWFtKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGxvZyBvZiBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBsb2c7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBhd2FpdCBydW5uYWJsZVN0cmVhbUNvbnN1bWVQcm9taXNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0cmVhbUV2ZW50cyhpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICBsZXQgc3RyZWFtO1xuICAgICAgICBpZiAob3B0aW9ucy52ZXJzaW9uID09PSBcInYxXCIpIHtcbiAgICAgICAgICAgIHN0cmVhbSA9IHRoaXMuX3N0cmVhbUV2ZW50c1YxKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnZlcnNpb24gPT09IFwidjJcIikge1xuICAgICAgICAgICAgc3RyZWFtID0gdGhpcy5fc3RyZWFtRXZlbnRzVjIoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPbmx5IHZlcnNpb25zIFwidjFcIiBhbmQgXCJ2MlwiIG9mIHRoZSBzY2hlbWEgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuZW5jb2RpbmcgPT09IFwidGV4dC9ldmVudC1zdHJlYW1cIikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRUb0h0dHBFdmVudFN0cmVhbShzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHN0cmVhbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1FdmVudHNWMihpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICBjb25zdCBldmVudFN0cmVhbWVyID0gbmV3IEV2ZW50U3RyZWFtQ2FsbGJhY2tIYW5kbGVyKHtcbiAgICAgICAgICAgIC4uLnN0cmVhbU9wdGlvbnMsXG4gICAgICAgICAgICBhdXRvQ2xvc2U6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBydW5JZCA9IGNvbmZpZy5ydW5JZCA/PyB1dWlkdjQoKTtcbiAgICAgICAgY29uZmlnLnJ1bklkID0gcnVuSWQ7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNvbmZpZy5jYWxsYmFja3M7XG4gICAgICAgIGlmIChjYWxsYmFja3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IFtldmVudFN0cmVhbWVyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBjYWxsYmFja3MuY29uY2F0KGV2ZW50U3RyZWFtZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29waWVkQ2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgIGNvcGllZENhbGxiYWNrcy5hZGRIYW5kbGVyKGV2ZW50U3RyZWFtZXIsIHRydWUpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBjb25maWcuY2FsbGJhY2tzID0gY29waWVkQ2FsbGJhY2tzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgLy8gQ2FsbCB0aGUgcnVubmFibGUgaW4gc3RyZWFtaW5nIG1vZGUsXG4gICAgICAgIC8vIGFkZCBlYWNoIGNodW5rIHRvIHRoZSBvdXRwdXQgc3RyZWFtXG4gICAgICAgIGNvbnN0IG91dGVyVGhpcyA9IHRoaXM7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpIHtcbiAgICAgICAgICAgIGxldCBzaWduYWw7XG4gICAgICAgICAgICBsZXQgbGlzdGVuZXIgPSBudWxsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucz8uc2lnbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcImFueVwiIGluIEFib3J0U2lnbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgbmF0aXZlIEFib3J0U2lnbmFsLmFueSgpIGlmIGF2YWlsYWJsZSAoTm9kZSAxOSspXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsID0gQWJvcnRTaWduYWwuYW55KFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBmb3IgTm9kZSAxOCBhbmQgYmVsb3cgLSBqdXN0IHVzZSB0aGUgcHJvdmlkZWQgc2lnbmFsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYWwgPSBvcHRpb25zLnNpZ25hbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB3ZSBzdGlsbCBhYm9ydCBvdXIgY29udHJvbGxlciB3aGVuIHRoZSBwYXJlbnQgc2lnbmFsIGFib3J0c1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGxpc3RlbmVyLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbCA9IGFib3J0Q29udHJvbGxlci5zaWduYWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bm5hYmxlU3RyZWFtID0gYXdhaXQgb3V0ZXJUaGlzLnN0cmVhbShpbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXBwZWRTdHJlYW0gPSBldmVudFN0cmVhbWVyLnRhcE91dHB1dEl0ZXJhYmxlKHJ1bklkLCBydW5uYWJsZVN0cmVhbSk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgXyBvZiB0YXBwZWRTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCBpdGVyYXRlIHNvIHRoYXQgdGhlIGNhbGxiYWNrIGhhbmRsZXIgcGlja3MgdXAgZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgIGlmIChhYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBldmVudFN0cmVhbWVyLmZpbmlzaCgpO1xuICAgICAgICAgICAgICAgIGlmIChzaWduYWwgJiYgbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2UgPSBjb25zdW1lUnVubmFibGVTdHJlYW0oKTtcbiAgICAgICAgbGV0IGZpcnN0RXZlbnRTZW50ID0gZmFsc2U7XG4gICAgICAgIGxldCBmaXJzdEV2ZW50UnVuSWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIGV2ZW50U3RyZWFtZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgd29yay1hcm91bmQgYW4gaXNzdWUgd2hlcmUgdGhlIGlucHV0cyBpbnRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNoYWluIGFyZSBub3QgYXZhaWxhYmxlIHVudGlsIHRoZSBlbnRpcmUgaW5wdXQgaXMgY29uc3VtZWQuXG4gICAgICAgICAgICAgICAgLy8gQXMgYSB0ZW1wb3Jhcnkgc29sdXRpb24sIHdlJ2xsIG1vZGlmeSB0aGUgaW5wdXQgdG8gYmUgdGhlIGlucHV0XG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3YXMgcGFzc2VkIGludG8gdGhlIGNoYWluLlxuICAgICAgICAgICAgICAgIGlmICghZmlyc3RFdmVudFNlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbnB1dCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEV2ZW50U2VudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RXZlbnRSdW5JZCA9IGV2ZW50LnJ1bl9pZDtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQucnVuX2lkID09PSBmaXJzdEV2ZW50UnVuSWQgJiYgZXZlbnQuZXZlbnQuZW5kc1dpdGgoXCJfZW5kXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgdGhlIGVuZCBldmVudCBjb3JyZXNwb25kaW5nIHRvIHRoZSByb290IHJ1bm5hYmxlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGRvbnQgaW5jbHVkZSB0aGUgaW5wdXQgaW4gdGhlIGV2ZW50IHNpbmNlIGl0J3MgZ3VhcmFudGVlZFxuICAgICAgICAgICAgICAgICAgICAvLyB0byBiZSBpbmNsdWRlZCBpbiB0aGUgZmlyc3QgZXZlbnQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhPy5pbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGV2ZW50LmRhdGEuaW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgICAgIGF3YWl0IHJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1FdmVudHNWMShpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICBsZXQgcnVuTG9nO1xuICAgICAgICBsZXQgaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgcm9vdFRhZ3MgPSBjb25maWcudGFncyA/PyBbXTtcbiAgICAgICAgY29uc3Qgcm9vdE1ldGFkYXRhID0gY29uZmlnLm1ldGFkYXRhID8/IHt9O1xuICAgICAgICBjb25zdCByb290TmFtZSA9IGNvbmZpZy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpO1xuICAgICAgICBjb25zdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIgPSBuZXcgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKHtcbiAgICAgICAgICAgIC4uLnN0cmVhbU9wdGlvbnMsXG4gICAgICAgICAgICBhdXRvQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgX3NjaGVtYUZvcm1hdDogXCJzdHJlYW1pbmdfZXZlbnRzXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByb290RXZlbnRGaWx0ZXIgPSBuZXcgX1Jvb3RFdmVudEZpbHRlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtID0gdGhpcy5fc3RyZWFtTG9nKGlucHV0LCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsIGNvbmZpZyk7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgbG9nIG9mIGxvZ1N0cmVhbSkge1xuICAgICAgICAgICAgaWYgKCFydW5Mb2cpIHtcbiAgICAgICAgICAgICAgICBydW5Mb2cgPSBSdW5Mb2cuZnJvbVJ1bkxvZ1BhdGNoKGxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBydW5Mb2cgPSBydW5Mb2cuY29uY2F0KGxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVuTG9nLnN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludGVybmFsIGVycm9yOiBcInN0cmVhbUV2ZW50c1wiIHN0YXRlIGlzIG1pc3NpbmcuIFBsZWFzZSBvcGVuIGEgYnVnIHJlcG9ydC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFlpZWxkIHRoZSBzdGFydCBldmVudCBmb3IgdGhlIHJvb3QgcnVubmFibGUgaWYgaXQgaGFzbid0IGJlZW4gc2Vlbi5cbiAgICAgICAgICAgIC8vIFRoZSByb290IHJ1biBpcyBuZXZlciBmaWx0ZXJlZCBvdXRcbiAgICAgICAgICAgIGlmICghaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHsgLi4ucnVuTG9nLnN0YXRlIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBgb25fJHtzdGF0ZS50eXBlfV9zdGFydGAsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvb3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICB0YWdzOiByb290VGFncyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJvb3RNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocm9vdEV2ZW50RmlsdGVyLmluY2x1ZGVFdmVudChldmVudCwgc3RhdGUudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGF0aHMgPSBsb2cub3BzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigob3ApID0+IG9wLnBhdGguc3RhcnRzV2l0aChcIi9sb2dzL1wiKSlcbiAgICAgICAgICAgICAgICAubWFwKChvcCkgPT4gb3AucGF0aC5zcGxpdChcIi9cIilbMl0pO1xuICAgICAgICAgICAgY29uc3QgZGVkdXBlZFBhdGhzID0gWy4uLm5ldyBTZXQocGF0aHMpXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGF0aCBvZiBkZWR1cGVkUGF0aHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRUeXBlO1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nRW50cnkgPSBydW5Mb2cuc3RhdGUubG9nc1twYXRoXTtcbiAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuZW5kX3RpbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwic3RyZWFtXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFR5cGUgPSBcInN0YXJ0XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwiZW5kXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChldmVudFR5cGUgPT09IFwic3RhcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIHRoZSBpbnB1dHMgd2l0aCB0aGUgc3RhcnQgZXZlbnQgaWYgdGhleSBhcmUgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICAgICAgICAvLyBVc3VhbGx5IHRoZXkgd2lsbCBOT1QgYmUgYXZhaWxhYmxlIGZvciBjb21wb25lbnRzIHRoYXQgb3BlcmF0ZVxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBzdHJlYW1zLCBzaW5jZSB0aG9zZSBjb21wb25lbnRzIHN0cmVhbSB0aGUgaW5wdXQgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGtub3cgaXRzIGZpbmFsIHZhbHVlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN0cmVhbS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ0VudHJ5LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlucHV0ID0gbG9nRW50cnkuaW5wdXRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJlbmRcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5wdXQgPSBsb2dFbnRyeS5pbnB1dHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5vdXRwdXQgPSBsb2dFbnRyeS5maW5hbF9vdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJzdHJlYW1cIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua0NvdW50ID0gbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rQ291bnQgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXhhY3RseSBvbmUgY2h1bmsgb2Ygc3RyZWFtZWQgb3V0cHV0LCBnb3QgJHtjaHVua0NvdW50fSBpbnN0ZWFkLiBFbmNvdW50ZXJlZCBpbjogXCIke2xvZ0VudHJ5Lm5hbWV9XCJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkYXRhID0geyBjaHVuazogbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0WzBdIH07XG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJlYW0sIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gQW5kIHRoaXMgYXZvaWRzIGR1cGxpY2F0ZXMgYXMgd2VsbCFcbiAgICAgICAgICAgICAgICAgICAgbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0ID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke2xvZ0VudHJ5LnR5cGV9XyR7ZXZlbnRUeXBlfWAsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGxvZ0VudHJ5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogbG9nRW50cnkuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IGxvZ0VudHJ5LnRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBsb2dFbnRyeS5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluYWxseSwgd2UgdGFrZSBjYXJlIG9mIHRoZSBzdHJlYW1pbmcgb3V0cHV0IGZyb20gdGhlIHJvb3QgY2hhaW5cbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFueS5cbiAgICAgICAgICAgIGNvbnN0IHsgc3RhdGUgfSA9IHJ1bkxvZztcbiAgICAgICAgICAgIGlmIChzdGF0ZS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rQ291bnQgPSBzdGF0ZS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChjaHVua0NvdW50ICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXhhY3RseSBvbmUgY2h1bmsgb2Ygc3RyZWFtZWQgb3V0cHV0LCBnb3QgJHtjaHVua0NvdW50fSBpbnN0ZWFkLiBFbmNvdW50ZXJlZCBpbjogXCIke3N0YXRlLm5hbWV9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsgY2h1bms6IHN0YXRlLnN0cmVhbWVkX291dHB1dFswXSB9O1xuICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJlYW0sIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgICBzdGF0ZS5zdHJlYW1lZF9vdXRwdXQgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3N0YXRlLnR5cGV9X3N0cmVhbWAsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogcm9vdE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBydW5Mb2c/LnN0YXRlO1xuICAgICAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gRmluYWxseSwgeWllbGQgdGhlIGVuZCBldmVudCBmb3IgdGhlIHJvb3QgcnVubmFibGUuXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7c3RhdGUudHlwZX1fZW5kYCxcbiAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICBydW5faWQ6IHN0YXRlLmlkLFxuICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiByb290TWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHN0YXRlLmZpbmFsX291dHB1dCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSlcbiAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlKHRoaW5nKSB7XG4gICAgICAgIHJldHVybiBpc1J1bm5hYmxlSW50ZXJmYWNlKHRoaW5nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBsaWZlY3ljbGUgbGlzdGVuZXJzIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBUaGUgUnVuIG9iamVjdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcnVuLCBpbmNsdWRpbmcgaXRzIGlkLFxuICAgICAqIHR5cGUsIGlucHV0LCBvdXRwdXQsIGVycm9yLCBzdGFydFRpbWUsIGVuZFRpbWUsIGFuZCBhbnkgdGFncyBvciBtZXRhZGF0YVxuICAgICAqIGFkZGVkIHRvIHRoZSBydW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vblN0YXJ0IC0gQ2FsbGVkIGJlZm9yZSB0aGUgcnVubmFibGUgc3RhcnRzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVuZCAtIENhbGxlZCBhZnRlciB0aGUgcnVubmFibGUgZmluaXNoZXMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRXJyb3IgLSBDYWxsZWQgaWYgdGhlIHJ1bm5hYmxlIHRocm93cyBhbiBlcnJvciwgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKi9cbiAgICB3aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IsIH0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG4gICAgICAgICAgICBib3VuZDogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZzoge30sXG4gICAgICAgICAgICBjb25maWdGYWN0b3JpZXM6IFtcbiAgICAgICAgICAgICAgICAoY29uZmlnKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSb290TGlzdGVuZXJzVHJhY2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIHJ1bm5hYmxlIHRvIGEgdG9vbC4gUmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIGBSdW5uYWJsZVRvb2xMaWtlYFxuICAgICAqIHdoaWNoIGNvbnRhaW5zIHRoZSBydW5uYWJsZSwgbmFtZSwgZGVzY3JpcHRpb24gYW5kIHNjaGVtYS5cbiAgICAgKlxuICAgICAqIEB0ZW1wbGF0ZSB7VCBleHRlbmRzIFJ1bklucHV0ID0gUnVuSW5wdXR9IFJ1bklucHV0IC0gVGhlIGlucHV0IHR5cGUgb2YgdGhlIHJ1bm5hYmxlLiBTaG91bGQgYmUgdGhlIHNhbWUgYXMgdGhlIGBSdW5JbnB1dGAgdHlwZSBvZiB0aGUgcnVubmFibGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRzXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IFtmaWVsZHMubmFtZV0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuIElmIG5vdCBwcm92aWRlZCwgaXQgd2lsbCBkZWZhdWx0IHRvIHRoZSBuYW1lIG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IHVuZGVmaW5lZH0gW2ZpZWxkcy5kZXNjcmlwdGlvbl0gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLiBGYWxscyBiYWNrIHRvIHRoZSBkZXNjcmlwdGlvbiBvbiB0aGUgWm9kIHNjaGVtYSBpZiBub3QgcHJvdmlkZWQsIG9yIHVuZGVmaW5lZCBpZiBuZWl0aGVyIGFyZSBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge3ouWm9kVHlwZTxUPn0gW2ZpZWxkcy5zY2hlbWFdIFRoZSBab2Qgc2NoZW1hIGZvciB0aGUgaW5wdXQgb2YgdGhlIHRvb2wuIEluZmVycyB0aGUgWm9kIHR5cGUgZnJvbSB0aGUgaW5wdXQgdHlwZSBvZiB0aGUgcnVubmFibGUuXG4gICAgICogQHJldHVybnMge1J1bm5hYmxlVG9vbExpa2U8ei5ab2RUeXBlPFQ+LCBSdW5PdXRwdXQ+fSBBbiBpbnN0YW5jZSBvZiBgUnVubmFibGVUb29sTGlrZWAgd2hpY2ggaXMgYSBydW5uYWJsZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdG9vbC5cbiAgICAgKi9cbiAgICBhc1Rvb2woZmllbGRzKSB7XG4gICAgICAgIHJldHVybiBjb252ZXJ0UnVubmFibGVUb1Rvb2wodGhpcywgZmllbGRzKTtcbiAgICB9XG59XG4vKipcbiAqIFdyYXBzIGEgcnVubmFibGUgYW5kIGFwcGxpZXMgcGFydGlhbCBjb25maWcgdXBvbiBpbnZvY2F0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1xuICogICB0eXBlIFJ1bm5hYmxlQ29uZmlnLFxuICogICBSdW5uYWJsZUxhbWJkYSxcbiAqIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqXG4gKiBjb25zdCBlbmhhbmNlUHJvZmlsZSA9IChcbiAqICAgcHJvZmlsZTogUmVjb3JkPHN0cmluZywgYW55PixcbiAqICAgY29uZmlnPzogUnVubmFibGVDb25maWdcbiAqICkgPT4ge1xuICogICBpZiAoY29uZmlnPy5jb25maWd1cmFibGU/LnJvbGUpIHtcbiAqICAgICByZXR1cm4geyAuLi5wcm9maWxlLCByb2xlOiBjb25maWcuY29uZmlndXJhYmxlLnJvbGUgfTtcbiAqICAgfVxuICogICByZXR1cm4gcHJvZmlsZTtcbiAqIH07XG4gKlxuICogY29uc3QgcnVubmFibGUgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKGVuaGFuY2VQcm9maWxlKTtcbiAqXG4gKiAvLyBCaW5kIGNvbmZpZ3VyYXRpb24gdG8gdGhlIHJ1bm5hYmxlIHRvIHNldCB0aGUgdXNlcidzIHJvbGUgZHluYW1pY2FsbHlcbiAqIGNvbnN0IGFkbWluUnVubmFibGUgPSBydW5uYWJsZS5iaW5kKHsgY29uZmlndXJhYmxlOiB7IHJvbGU6IFwiQWRtaW5cIiB9IH0pO1xuICogY29uc3QgdXNlclJ1bm5hYmxlID0gcnVubmFibGUuYmluZCh7IGNvbmZpZ3VyYWJsZTogeyByb2xlOiBcIlVzZXJcIiB9IH0pO1xuICpcbiAqIGNvbnN0IHJlc3VsdDEgPSBhd2FpdCBhZG1pblJ1bm5hYmxlLmludm9rZSh7XG4gKiAgIG5hbWU6IFwiQWxpY2VcIixcbiAqICAgZW1haWw6IFwiYWxpY2VAZXhhbXBsZS5jb21cIlxuICogfSk7XG4gKlxuICogLy8geyBuYW1lOiBcIkFsaWNlXCIsIGVtYWlsOiBcImFsaWNlQGV4YW1wbGUuY29tXCIsIHJvbGU6IFwiQWRtaW5cIiB9XG4gKlxuICogY29uc3QgcmVzdWx0MiA9IGF3YWl0IHVzZXJSdW5uYWJsZS5pbnZva2Uoe1xuICogICBuYW1lOiBcIkJvYlwiLFxuICogICBlbWFpbDogXCJib2JAZXhhbXBsZS5jb21cIlxuICogfSk7XG4gKlxuICogLy8geyBuYW1lOiBcIkJvYlwiLCBlbWFpbDogXCJib2JAZXhhbXBsZS5jb21cIiwgcm9sZTogXCJVc2VyXCIgfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUJpbmRpbmcgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlQmluZGluZ1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJib3VuZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ0ZhY3Rvcmllc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJvdW5kID0gZmllbGRzLmJvdW5kO1xuICAgICAgICB0aGlzLmt3YXJncyA9IGZpZWxkcy5rd2FyZ3M7XG4gICAgICAgIHRoaXMuY29uZmlnID0gZmllbGRzLmNvbmZpZztcbiAgICAgICAgdGhpcy5jb25maWdGYWN0b3JpZXMgPSBmaWVsZHMuY29uZmlnRmFjdG9yaWVzO1xuICAgIH1cbiAgICBnZXROYW1lKHN1ZmZpeCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5nZXROYW1lKHN1ZmZpeCk7XG4gICAgfVxuICAgIGFzeW5jIF9tZXJnZUNvbmZpZyguLi5vcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IG1lcmdlQ29uZmlncyh0aGlzLmNvbmZpZywgLi4ub3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBtZXJnZUNvbmZpZ3MoY29uZmlnLCAuLi4odGhpcy5jb25maWdGYWN0b3JpZXNcbiAgICAgICAgICAgID8gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5jb25maWdGYWN0b3JpZXMubWFwKGFzeW5jIChjb25maWdGYWN0b3J5KSA9PiBhd2FpdCBjb25maWdGYWN0b3J5KGNvbmZpZykpKVxuICAgICAgICAgICAgOiBbXSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kcyB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0ga3dhcmdzIFRoZSBhcmd1bWVudHMgdG8gYmluZCB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiB0aGUgYFJ1bm5hYmxlQmluZGluZ2AgY2xhc3MgdGhhdCBpcyBib3VuZCB3aXRoIHRoZSBzcGVjaWZpZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayB3aXRoQ29uZmlnfSBpbnN0ZWFkLiBUaGlzIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBicmVha2luZyByZWxlYXNlLlxuICAgICAqL1xuICAgIGJpbmQoa3dhcmdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgIGt3YXJnczogeyAuLi50aGlzLmt3YXJncywgLi4ua3dhcmdzIH0sXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgd2l0aENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLFxuICAgICAgICAgICAga3dhcmdzOiB0aGlzLmt3YXJncyxcbiAgICAgICAgICAgIGNvbmZpZzogeyAuLi50aGlzLmNvbmZpZywgLi4uY29uZmlnIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB3aXRoUmV0cnkoZmllbGRzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVJldHJ5KHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLFxuICAgICAgICAgICAga3dhcmdzOiB0aGlzLmt3YXJncyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgICAgICBtYXhBdHRlbXB0TnVtYmVyOiBmaWVsZHM/LnN0b3BBZnRlckF0dGVtcHQsXG4gICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuaW52b2tlKGlucHV0LCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1lcmdlZE9wdGlvbnMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMpXG4gICAgICAgICAgICA/IGF3YWl0IFByb21pc2UuYWxsKG9wdGlvbnMubWFwKGFzeW5jIChpbmRpdmlkdWFsT3B0aW9uKSA9PiB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcoaW5kaXZpZHVhbE9wdGlvbiksIHRoaXMua3dhcmdzKSkpXG4gICAgICAgICAgICA6IGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5iYXRjaChpbnB1dHMsIG1lcmdlZE9wdGlvbnMsIGJhdGNoT3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfY29uY2F0T3V0cHV0Q2h1bmtzKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuX2NvbmNhdE91dHB1dENodW5rcyhmaXJzdCwgc2Vjb25kKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCogdGhpcy5ib3VuZC5fc3RyZWFtSXRlcmF0b3IoaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLnN0cmVhbShpbnB1dCwgYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyAqdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCogdGhpcy5ib3VuZC50cmFuc2Zvcm0oZ2VuZXJhdG9yLCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIHN0cmVhbUV2ZW50cyhpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgY29uc3Qgb3V0ZXJUaGlzID0gdGhpcztcbiAgICAgICAgY29uc3QgZ2VuZXJhdG9yID0gYXN5bmMgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkKiBvdXRlclRoaXMuYm91bmQuc3RyZWFtRXZlbnRzKGlucHV0LCB7XG4gICAgICAgICAgICAgICAgLi4uKGF3YWl0IG91dGVyVGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCBvdXRlclRoaXMua3dhcmdzKSksXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogb3B0aW9ucy52ZXJzaW9uLFxuICAgICAgICAgICAgfSwgc3RyZWFtT3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcihnZW5lcmF0b3IoKSk7XG4gICAgfVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlQmluZGluZyhcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHRoaW5nXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaW5nLmJvdW5kICYmIFJ1bm5hYmxlLmlzUnVubmFibGUodGhpbmcuYm91bmQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG4gICAgICogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG4gICAgICogYWRkZWQgdG8gdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqL1xuICAgIHdpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgIGt3YXJnczogdGhpcy5rd2FyZ3MsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgY29uZmlnRmFjdG9yaWVzOiBbXG4gICAgICAgICAgICAgICAgKGNvbmZpZykgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUm9vdExpc3RlbmVyc1RyYWNlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgZGVsZWdhdGVzIGNhbGxzIHRvIGFub3RoZXIgcnVubmFibGVcbiAqIHdpdGggZWFjaCBlbGVtZW50IG9mIHRoZSBpbnB1dCBzZXF1ZW5jZS5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBSdW5uYWJsZUVhY2gsIFJ1bm5hYmxlTGFtYmRhIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqXG4gKiBjb25zdCB0b1VwcGVyQ2FzZSA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IGlucHV0LnRvVXBwZXJDYXNlKCk7XG4gKiBjb25zdCBhZGRHcmVldGluZyA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IGBIZWxsbywgJHtpbnB1dH0hYDtcbiAqXG4gKiBjb25zdCB1cHBlckNhc2VMYW1iZGEgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKHRvVXBwZXJDYXNlKTtcbiAqIGNvbnN0IGdyZWV0aW5nTGFtYmRhID0gUnVubmFibGVMYW1iZGEuZnJvbShhZGRHcmVldGluZyk7XG4gKlxuICogY29uc3QgY2hhaW4gPSBuZXcgUnVubmFibGVFYWNoKHtcbiAqICAgYm91bmQ6IHVwcGVyQ2FzZUxhbWJkYS5waXBlKGdyZWV0aW5nTGFtYmRhKSxcbiAqIH0pO1xuICpcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoYWluLmludm9rZShbXCJhbGljZVwiLCBcImJvYlwiLCBcImNhcm9sXCJdKVxuICpcbiAqIC8vIFtcIkhlbGxvLCBBTElDRSFcIiwgXCJIZWxsbywgQk9CIVwiLCBcIkhlbGxvLCBDQVJPTCFcIl1cbiAqIGBgYFxuICpcbiAqIEBkZXByZWNhdGVkIFRoaXMgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IGJyZWFraW5nIHJlbGVhc2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUVhY2ggZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlRWFjaFwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJib3VuZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJvdW5kID0gZmllbGRzLmJvdW5kO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kcyB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0ga3dhcmdzIFRoZSBhcmd1bWVudHMgdG8gYmluZCB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiB0aGUgYFJ1bm5hYmxlRWFjaGAgY2xhc3MgdGhhdCBpcyBib3VuZCB3aXRoIHRoZSBzcGVjaWZpZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayB3aXRoQ29uZmlnfSBpbnN0ZWFkLiBUaGlzIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBicmVha2luZyByZWxlYXNlLlxuICAgICAqL1xuICAgIGJpbmQoa3dhcmdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVFYWNoKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLmJpbmQoa3dhcmdzKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBpbnB1dCBhbmQgY29uZmlndXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWd1cmF0aW9uIHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXRzLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX2ludm9rZS5iaW5kKHRoaXMpLCBpbnB1dHMsIGNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW5wdXQgYW5kIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlndXJhdGlvbiB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcnVubmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgX2ludm9rZShpbnB1dHMsIGNvbmZpZywgcnVuTWFuYWdlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5iYXRjaChpbnB1dHMsIHBhdGNoQ29uZmlnKGNvbmZpZywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG4gICAgICogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG4gICAgICogYWRkZWQgdG8gdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqL1xuICAgIHdpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlRWFjaCh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZC53aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IgfSksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcnVubmFibGVzIHRoYXQgY2FuIGJlIHJldHJpZWQgYVxuICogc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1xuICogICBSdW5uYWJsZUxhbWJkYSxcbiAqICAgUnVubmFibGVSZXRyeSxcbiAqIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqXG4gKiAvLyBTaW11bGF0ZSBhbiBBUEkgY2FsbCB0aGF0IGZhaWxzXG4gKiBjb25zdCBzaW11bGF0ZUFwaUNhbGwgPSAoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gKiAgIGNvbnNvbGUubG9nKGBBdHRlbXB0aW5nIEFQSSBjYWxsIHdpdGggaW5wdXQ6ICR7aW5wdXR9YCk7XG4gKiAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBjYWxsIGZhaWxlZCBkdWUgdG8gbmV0d29yayBpc3N1ZVwiKTtcbiAqIH07XG4gKlxuICogY29uc3QgYXBpQ2FsbExhbWJkYSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oc2ltdWxhdGVBcGlDYWxsKTtcbiAqXG4gKiAvLyBBcHBseSByZXRyeSBsb2dpYyB1c2luZyB0aGUgLndpdGhSZXRyeSgpIG1ldGhvZFxuICogY29uc3QgYXBpQ2FsbFdpdGhSZXRyeSA9IGFwaUNhbGxMYW1iZGEud2l0aFJldHJ5KHsgc3RvcEFmdGVyQXR0ZW1wdDogMyB9KTtcbiAqXG4gKiAvLyBBbHRlcm5hdGl2ZWx5LCBjcmVhdGUgYSBSdW5uYWJsZVJldHJ5IGluc3RhbmNlIG1hbnVhbGx5XG4gKiBjb25zdCBtYW51YWxSZXRyeSA9IG5ldyBSdW5uYWJsZVJldHJ5KHtcbiAqICAgYm91bmQ6IGFwaUNhbGxMYW1iZGEsXG4gKiAgIG1heEF0dGVtcHROdW1iZXI6IDMsXG4gKiAgIGNvbmZpZzoge30sXG4gKiB9KTtcbiAqXG4gKiAvLyBFeGFtcGxlIGludm9jYXRpb24gdXNpbmcgdGhlIC53aXRoUmV0cnkoKSBtZXRob2RcbiAqIGNvbnN0IHJlcyA9IGF3YWl0IGFwaUNhbGxXaXRoUmV0cnlcbiAqICAgLmludm9rZShcIlJlcXVlc3QgMVwiKVxuICogICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gKiAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCBhZnRlciBtdWx0aXBsZSByZXRyaWVzOlwiLCBlcnJvci5tZXNzYWdlKTtcbiAqICAgfSk7XG4gKlxuICogLy8gRXhhbXBsZSBpbnZvY2F0aW9uIHVzaW5nIHRoZSBtYW51YWwgcmV0cnkgaW5zdGFuY2VcbiAqIGNvbnN0IHJlczIgPSBhd2FpdCBtYW51YWxSZXRyeVxuICogICAuaW52b2tlKFwiUmVxdWVzdCAyXCIpXG4gKiAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAqICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIGFmdGVyIG11bHRpcGxlIHJldHJpZXM6XCIsIGVycm9yLm1lc3NhZ2UpO1xuICogICB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVSZXRyeSBleHRlbmRzIFJ1bm5hYmxlQmluZGluZyB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlUmV0cnlcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heEF0dGVtcHROdW1iZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDNcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRmFpbGVkQXR0ZW1wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogKCkgPT4geyB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heEF0dGVtcHROdW1iZXIgPSBmaWVsZHMubWF4QXR0ZW1wdE51bWJlciA/PyB0aGlzLm1heEF0dGVtcHROdW1iZXI7XG4gICAgICAgIHRoaXMub25GYWlsZWRBdHRlbXB0ID0gZmllbGRzLm9uRmFpbGVkQXR0ZW1wdCA/PyB0aGlzLm9uRmFpbGVkQXR0ZW1wdDtcbiAgICB9XG4gICAgX3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IHRhZyA9IGF0dGVtcHQgPiAxID8gYHJldHJ5OmF0dGVtcHQ6JHthdHRlbXB0fWAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCh0YWcpIH0pO1xuICAgIH1cbiAgICBhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIHBSZXRyeSgoYXR0ZW1wdE51bWJlcikgPT4gc3VwZXIuaW52b2tlKGlucHV0LCB0aGlzLl9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHROdW1iZXIsIGNvbmZpZywgcnVuTWFuYWdlcikpLCB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiAoZXJyb3IpID0+IHRoaXMub25GYWlsZWRBdHRlbXB0KGVycm9yLCBpbnB1dCksXG4gICAgICAgICAgICByZXRyaWVzOiBNYXRoLm1heCh0aGlzLm1heEF0dGVtcHROdW1iZXIgLSAxLCAwKSxcbiAgICAgICAgICAgIHJhbmRvbWl6ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0aGF0IGludm9rZXMgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBpbnB1dCwgcnVuIG1hbmFnZXIsXG4gICAgICogYW5kIGNvbmZpZy4gSXQgaGFuZGxlcyB0aGUgcmV0cnkgbG9naWMgYnkgY2F0Y2hpbmcgYW55IGVycm9ycyBhbmRcbiAgICAgKiByZWN1cnNpdmVseSBpbnZva2luZyBpdHNlbGYgd2l0aCB0aGUgdXBkYXRlZCBjb25maWcgZm9yIHRoZSBuZXh0IHJldHJ5XG4gICAgICogYXR0ZW1wdC5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IGZvciB0aGUgcnVubmFibGUuXG4gICAgICogQHBhcmFtIHJ1bk1hbmFnZXIgVGhlIHJ1biBtYW5hZ2VyIGZvciB0aGUgcnVubmFibGUuXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlnIGZvciB0aGUgcnVubmFibGUuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcnVubmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX2ludm9rZS5iaW5kKHRoaXMpLCBpbnB1dCwgY29uZmlnKTtcbiAgICB9XG4gICAgYXN5bmMgX2JhdGNoKGlucHV0cywgY29uZmlncywgcnVuTWFuYWdlcnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXN1bHRzTWFwID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBwUmV0cnkoYXN5bmMgKGF0dGVtcHROdW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdJbmRleGVzID0gaW5wdXRzXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKF8sIGkpID0+IGkpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGkpID0+IHJlc3VsdHNNYXBbaS50b1N0cmluZygpXSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01hcFtpLnRvU3RyaW5nKCldIGluc3RhbmNlb2YgRXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0lucHV0cyA9IHJlbWFpbmluZ0luZGV4ZXMubWFwKChpKSA9PiBpbnB1dHNbaV0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoZWRDb25maWdzID0gcmVtYWluaW5nSW5kZXhlcy5tYXAoKGkpID0+IHRoaXMuX3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdE51bWJlciwgY29uZmlncz8uW2ldLCBydW5NYW5hZ2Vycz8uW2ldKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHN1cGVyLmJhdGNoKHJlbWFpbmluZ0lucHV0cywgcGF0Y2hlZENvbmZpZ3MsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYmF0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5FeGNlcHRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxldCBmaXJzdEV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzdWx0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0TWFwSW5kZXggPSByZW1haW5pbmdJbmRleGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0RXhjZXB0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEV4Y2VwdGlvbiA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0RXhjZXB0aW9uLmlucHV0ID0gcmVtYWluaW5nSW5wdXRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNYXBbcmVzdWx0TWFwSW5kZXgudG9TdHJpbmcoKV0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaXJzdEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBmaXJzdEV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IChlcnJvcikgPT4gdGhpcy5vbkZhaWxlZEF0dGVtcHQoZXJyb3IsIGVycm9yLmlucHV0KSxcbiAgICAgICAgICAgICAgICByZXRyaWVzOiBNYXRoLm1heCh0aGlzLm1heEF0dGVtcHROdW1iZXIgLSAxLCAwKSxcbiAgICAgICAgICAgICAgICByYW5kb21pemU6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGJhdGNoT3B0aW9ucz8ucmV0dXJuRXhjZXB0aW9ucyAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHJlc3VsdHNNYXApXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gcGFyc2VJbnQoYSwgMTApIC0gcGFyc2VJbnQoYiwgMTApKVxuICAgICAgICAgICAgLm1hcCgoa2V5KSA9PiByZXN1bHRzTWFwW3BhcnNlSW50KGtleSwgMTApXSk7XG4gICAgfVxuICAgIGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYXRjaFdpdGhDb25maWcodGhpcy5fYmF0Y2guYmluZCh0aGlzKSwgaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpO1xuICAgIH1cbn1cbi8qKlxuICogQSBzZXF1ZW5jZSBvZiBydW5uYWJsZXMsIHdoZXJlIHRoZSBvdXRwdXQgb2YgZWFjaCBpcyB0aGUgaW5wdXQgb2YgdGhlIG5leHQuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcHJvbXB0VGVtcGxhdGUgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4gKiAgIFwiVGVsbCBtZSBhIGpva2UgYWJvdXQge3RvcGljfVwiLFxuICogKTtcbiAqIGNvbnN0IGNoYWluID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtwcm9tcHRUZW1wbGF0ZSwgbmV3IENoYXRPcGVuQUkoeyBtb2RlbDogXCJncHQtNG8tbWluaVwiIH0pXSk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5pbnZva2UoeyB0b3BpYzogXCJiZWFyc1wiIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVNlcXVlbmNlIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVNlcXVlbmNlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaXJzdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtaWRkbGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYXN0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9taXRTZXF1ZW5jZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZmlyc3QgPSBmaWVsZHMuZmlyc3Q7XG4gICAgICAgIHRoaXMubWlkZGxlID0gZmllbGRzLm1pZGRsZSA/PyB0aGlzLm1pZGRsZTtcbiAgICAgICAgdGhpcy5sYXN0ID0gZmllbGRzLmxhc3Q7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgICAgICB0aGlzLm9taXRTZXF1ZW5jZVRhZ3MgPSBmaWVsZHMub21pdFNlcXVlbmNlVGFncyA/PyB0aGlzLm9taXRTZXF1ZW5jZVRhZ3M7XG4gICAgfVxuICAgIGdldCBzdGVwcygpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLmZpcnN0LCAuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBjb25maWcucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSk7XG4gICAgICAgIGRlbGV0ZSBjb25maWcucnVuSWQ7XG4gICAgICAgIGxldCBuZXh0U3RlcElucHV0ID0gaW5wdXQ7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxTdGVwcyA9IFt0aGlzLmZpcnN0LCAuLi50aGlzLm1pZGRsZV07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluaXRpYWxTdGVwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSBpbml0aWFsU3RlcHNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHN0ZXAuaW52b2tlKG5leHRTdGVwSW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKHRoaXMub21pdFNlcXVlbmNlVGFncyA/IHVuZGVmaW5lZCA6IGBzZXE6c3RlcDoke2kgKyAxfWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBuZXh0U3RlcElucHV0ID0gYXdhaXQgcmFjZVdpdGhTaWduYWwocHJvbWlzZSwgb3B0aW9ucz8uc2lnbmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFR5cGVTY3JpcHQgY2FuJ3QgZGV0ZWN0IHRoYXQgdGhlIGxhc3Qgb3V0cHV0IG9mIHRoZSBzZXF1ZW5jZSByZXR1cm5zIFJ1bk91dHB1dCwgc28gY2FsbCBpdCBvdXQgb2YgdGhlIGxvb3AgaGVyZVxuICAgICAgICAgICAgaWYgKG9wdGlvbnM/LnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFib3J0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbE91dHB1dCA9IGF3YWl0IHRoaXMubGFzdC5pbnZva2UobmV4dFN0ZXBJbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCh0aGlzLm9taXRTZXF1ZW5jZVRhZ3MgPyB1bmRlZmluZWQgOiBgc2VxOnN0ZXA6JHt0aGlzLnN0ZXBzLmxlbmd0aH1gKSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChmaW5hbE91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgICAgICByZXR1cm4gZmluYWxPdXRwdXQ7XG4gICAgfVxuICAgIGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNvbmZpZ0xpc3QubWFwKGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZykpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrTWFuYWdlcnMubWFwKGFzeW5jIChjYWxsYmFja01hbmFnZXIsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVN0YXJ0UmVzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXRzW2ldLCBcImlucHV0XCIpLCBjb25maWdMaXN0W2ldLnJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWdMaXN0W2ldLnJ1bk5hbWUpO1xuICAgICAgICAgICAgZGVsZXRlIGNvbmZpZ0xpc3RbaV0ucnVuSWQ7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlU3RhcnRSZXM7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IG5leHRTdGVwSW5wdXRzID0gaW5wdXRzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0ZXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcCA9IHRoaXMuc3RlcHNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHN0ZXAuYmF0Y2gobmV4dFN0ZXBJbnB1dHMsIHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlciwgaikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFJ1bk1hbmFnZXIgPSBydW5NYW5hZ2VyPy5nZXRDaGlsZCh0aGlzLm9taXRTZXF1ZW5jZVRhZ3MgPyB1bmRlZmluZWQgOiBgc2VxOnN0ZXA6JHtpICsgMX1gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGNoQ29uZmlnKGNvbmZpZ0xpc3Rbal0sIHsgY2FsbGJhY2tzOiBjaGlsZFJ1bk1hbmFnZXIgfSk7XG4gICAgICAgICAgICAgICAgfSksIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgbmV4dFN0ZXBJbnB1dHMgPSBhd2FpdCByYWNlV2l0aFNpZ25hbChwcm9taXNlLCBjb25maWdMaXN0WzBdPy5zaWduYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSkpKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG5leHRTdGVwSW5wdXRzLCBcIm91dHB1dFwiKSkpKTtcbiAgICAgICAgcmV0dXJuIG5leHRTdGVwSW5wdXRzO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2NvbmNhdE91dHB1dENodW5rcyhmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhc3QuX2NvbmNhdE91dHB1dENodW5rcyhmaXJzdCwgc2Vjb25kKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7IHJ1bklkLCAuLi5vdGhlck9wdGlvbnMgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvdGhlck9wdGlvbnM/LnJ1bk5hbWUpO1xuICAgICAgICBjb25zdCBzdGVwcyA9IFt0aGlzLmZpcnN0LCAuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XTtcbiAgICAgICAgbGV0IGNvbmNhdFN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGlucHV0R2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgeWllbGQgaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBmaW5hbEdlbmVyYXRvciA9IHN0ZXBzWzBdLnRyYW5zZm9ybShpbnB1dEdlbmVyYXRvcigpLCBwYXRjaENvbmZpZyhvdGhlck9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKHRoaXMub21pdFNlcXVlbmNlVGFncyA/IHVuZGVmaW5lZCA6IGBzZXE6c3RlcDoxYCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHN0ZXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcCA9IHN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIGZpbmFsR2VuZXJhdG9yID0gYXdhaXQgc3RlcC50cmFuc2Zvcm0oZmluYWxHZW5lcmF0b3IsIHBhdGNoQ29uZmlnKG90aGVyT3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKHRoaXMub21pdFNlcXVlbmNlVGFncyA/IHVuZGVmaW5lZCA6IGBzZXE6c3RlcDoke2kgKyAxfWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZmluYWxHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmNhdFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHRoaXMuX2NvbmNhdE91dHB1dENodW5rcyhmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jYXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChmaW5hbE91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgIH1cbiAgICBnZXRHcmFwaChjb25maWcpIHtcbiAgICAgICAgY29uc3QgZ3JhcGggPSBuZXcgR3JhcGgoKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IGN1cnJlbnRMYXN0Tm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RlcHMuZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXBHcmFwaCA9IHN0ZXAuZ2V0R3JhcGgoY29uZmlnKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltRmlyc3ROb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IHRoaXMuc3RlcHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltTGFzdE5vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdyYXBoLmV4dGVuZChzdGVwR3JhcGgpO1xuICAgICAgICAgICAgY29uc3Qgc3RlcEZpcnN0Tm9kZSA9IHN0ZXBHcmFwaC5maXJzdE5vZGUoKTtcbiAgICAgICAgICAgIGlmICghc3RlcEZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUnVubmFibGUgJHtzdGVwfSBoYXMgbm8gZmlyc3Qgbm9kZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMYXN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIGdyYXBoLmFkZEVkZ2UoY3VycmVudExhc3ROb2RlLCBzdGVwRmlyc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRMYXN0Tm9kZSA9IHN0ZXBHcmFwaC5sYXN0Tm9kZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICBwaXBlKGNvZXJjZWFibGUpIHtcbiAgICAgICAgaWYgKFJ1bm5hYmxlU2VxdWVuY2UuaXNSdW5uYWJsZVNlcXVlbmNlKGNvZXJjZWFibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIGZpcnN0OiB0aGlzLmZpcnN0LFxuICAgICAgICAgICAgICAgIG1pZGRsZTogdGhpcy5taWRkbGUuY29uY2F0KFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0LFxuICAgICAgICAgICAgICAgICAgICBjb2VyY2VhYmxlLmZpcnN0LFxuICAgICAgICAgICAgICAgICAgICAuLi5jb2VyY2VhYmxlLm1pZGRsZSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBsYXN0OiBjb2VyY2VhYmxlLmxhc3QsXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lID8/IGNvZXJjZWFibGUubmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICBmaXJzdDogdGhpcy5maXJzdCxcbiAgICAgICAgICAgICAgICBtaWRkbGU6IFsuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XSxcbiAgICAgICAgICAgICAgICBsYXN0OiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSxcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlU2VxdWVuY2UodGhpbmcpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpbmcubWlkZGxlKSAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKHRoaW5nKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgZnJvbShbZmlyc3QsIC4uLnJ1bm5hYmxlc10sIG5hbWVPckZpZWxkcykge1xuICAgICAgICBsZXQgZXh0cmEgPSB7fTtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lT3JGaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGV4dHJhLm5hbWUgPSBuYW1lT3JGaWVsZHM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmFtZU9yRmllbGRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4dHJhID0gbmFtZU9yRmllbGRzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG4gICAgICAgICAgICAuLi5leHRyYSxcbiAgICAgICAgICAgIGZpcnN0OiBfY29lcmNlVG9SdW5uYWJsZShmaXJzdCksXG4gICAgICAgICAgICBtaWRkbGU6IHJ1bm5hYmxlcy5zbGljZSgwLCAtMSkubWFwKF9jb2VyY2VUb1J1bm5hYmxlKSxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKHJ1bm5hYmxlc1tydW5uYWJsZXMubGVuZ3RoIC0gMV0pLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBydW5zIGEgbWFwcGluZyBvZiBydW5uYWJsZXMgaW4gcGFyYWxsZWwsXG4gKiBhbmQgcmV0dXJucyBhIG1hcHBpbmcgb2YgdGhlaXIgb3V0cHV0cy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBtYXBDaGFpbiA9IFJ1bm5hYmxlTWFwLmZyb20oe1xuICogICBqb2tlOiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJUZWxsIG1lIGEgam9rZSBhYm91dCB7dG9waWN9XCIpLnBpcGUoXG4gKiAgICAgbmV3IENoYXRBbnRocm9waWMoe30pLFxuICogICApLFxuICogICBwb2VtOiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJ3cml0ZSBhIDItbGluZSBwb2VtIGFib3V0IHt0b3BpY31cIikucGlwZShcbiAqICAgICBuZXcgQ2hhdEFudGhyb3BpYyh7fSksXG4gKiAgICksXG4gKiB9KTtcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hcENoYWluLmludm9rZSh7IHRvcGljOiBcImJlYXJcIiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVNYXAgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlTWFwXCI7XG4gICAgfVxuICAgIGdldFN0ZXBzS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuc3RlcHMpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGVwc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0ZXBzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkcy5zdGVwcykpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcHNba2V5XSA9IF9jb2VyY2VUb1J1bm5hYmxlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZnJvbShzdGVwcykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTWFwKHsgc3RlcHMgfSk7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwge1xuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgIH0sIGNvbmZpZy5ydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lKTtcbiAgICAgICAgZGVsZXRlIGNvbmZpZy5ydW5JZDtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuc3RlcHMpLm1hcChhc3luYyAoW2tleSwgcnVubmFibGVdKSA9PiB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W2tleV0gPSBhd2FpdCBydW5uYWJsZS5pbnZva2UoaW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBtYXA6a2V5OiR7a2V5fWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFjZVdpdGhTaWduYWwoUHJvbWlzZS5hbGwocHJvbWlzZXMpLCBvcHRpb25zPy5zaWduYWwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChvdXRwdXQpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gc2hhbGxvdyBjb3B5IHN0ZXBzIHRvIGlnbm9yZSBjaGFuZ2VzIHdoaWxlIGl0ZXJhdGluZ1xuICAgICAgICBjb25zdCBzdGVwcyA9IHsgLi4udGhpcy5zdGVwcyB9O1xuICAgICAgICAvLyBlYWNoIHN0ZXAgZ2V0cyBhIGNvcHkgb2YgdGhlIGlucHV0IGl0ZXJhdG9yXG4gICAgICAgIGNvbnN0IGlucHV0Q29waWVzID0gYXRlZShnZW5lcmF0b3IsIE9iamVjdC5rZXlzKHN0ZXBzKS5sZW5ndGgpO1xuICAgICAgICAvLyBzdGFydCB0aGUgZmlyc3QgaXRlcmF0aW9uIG9mIGVhY2ggb3V0cHV0IGl0ZXJhdG9yXG4gICAgICAgIGNvbnN0IHRhc2tzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhzdGVwcykubWFwKChba2V5LCBydW5uYWJsZV0sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdlbiA9IHJ1bm5hYmxlLnRyYW5zZm9ybShpbnB1dENvcGllc1tpXSwgcGF0Y2hDb25maWcob3B0aW9ucywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYG1hcDprZXk6JHtrZXl9YCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gW2tleSwgZ2VuLm5leHQoKS50aGVuKChyZXN1bHQpID0+ICh7IGtleSwgZ2VuLCByZXN1bHQgfSkpXTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyB5aWVsZCBjaHVua3MgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLFxuICAgICAgICAvLyBzdGFydGluZyBuZXcgaXRlcmF0aW9ucyBhcyBuZWVkZWQsXG4gICAgICAgIC8vIHVudGlsIGFsbCBpdGVyYXRvcnMgYXJlIGRvbmVcbiAgICAgICAgd2hpbGUgKHRhc2tzLnNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJhY2UodGFza3MudmFsdWVzKCkpO1xuICAgICAgICAgICAgY29uc3QgeyBrZXksIHJlc3VsdCwgZ2VuIH0gPSBhd2FpdCByYWNlV2l0aFNpZ25hbChwcm9taXNlLCBvcHRpb25zPy5zaWduYWwpO1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgeyBba2V5XTogcmVzdWx0LnZhbHVlIH07XG4gICAgICAgICAgICAgICAgdGFza3Muc2V0KGtleSwgZ2VuLm5leHQoKS50aGVuKChyZXN1bHQpID0+ICh7IGtleSwgZ2VuLCByZXN1bHQgfSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh7XG4gICAgICAgICAgICBnZW5lcmF0b3I6IHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBjb25maWcpLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IHdyYXBzIGEgdHJhY2VkIExhbmdTbWl0aCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlVHJhY2VhYmxlIGV4dGVuZHMgUnVubmFibGUge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmdW5jXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghaXNUcmFjZWFibGVGdW5jdGlvbihmaWVsZHMuZnVuYykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJ1bm5hYmxlVHJhY2VhYmxlIHJlcXVpcmVzIGEgZnVuY3Rpb24gdGhhdCBpcyB3cmFwcGVkIGluIHRyYWNlYWJsZSBoaWdoZXItb3JkZXIgZnVuY3Rpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBbY29uZmlnXSA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIDEpO1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuZnVuYyhwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzIH0pLCBpbnB1dCk7XG4gICAgICAgIHJldHVybiByYWNlV2l0aFNpZ25hbChwcm9taXNlLCBjb25maWc/LnNpZ25hbCk7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgW2NvbmZpZ10gPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCAxKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoaXNBc3luY0l0ZXJhYmxlKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25maWc/LnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBpdGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0l0ZXJhdG9yKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSByZXN1bHQubmV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5kb25lKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB5aWVsZCBzdGF0ZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB5aWVsZCByZXN1bHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVRyYWNlYWJsZSh7IGZ1bmMgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gYXNzZXJ0Tm9uVHJhY2VhYmxlRnVuY3Rpb24oZnVuYykge1xuICAgIGlmIChpc1RyYWNlYWJsZUZ1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJ1bm5hYmxlTGFtYmRhIHJlcXVpcmVzIGEgZnVuY3Rpb24gdGhhdCBpcyBub3Qgd3JhcHBlZCBpbiB0cmFjZWFibGUgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uLiBUaGlzIHNob3VsZG4ndCBoYXBwZW4uXCIpO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IHdyYXBzIGFuIGFyYml0cmFyeSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgc2luZ2xlIGFyZ3VtZW50LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IFJ1bm5hYmxlTGFtYmRhIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqXG4gKiBjb25zdCBhZGQgPSAoaW5wdXQ6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSkgPT4gaW5wdXQueCArIGlucHV0Lnk7XG4gKlxuICogY29uc3QgbXVsdGlwbHkgPSAoaW5wdXQ6IHsgdmFsdWU6IG51bWJlcjsgbXVsdGlwbGllcjogbnVtYmVyIH0pID0+XG4gKiAgIGlucHV0LnZhbHVlICogaW5wdXQubXVsdGlwbGllcjtcbiAqXG4gKiAvLyBDcmVhdGUgcnVubmFibGVzIGZvciB0aGUgZnVuY3Rpb25zXG4gKiBjb25zdCBhZGRMYW1iZGEgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKGFkZCk7XG4gKiBjb25zdCBtdWx0aXBseUxhbWJkYSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20obXVsdGlwbHkpO1xuICpcbiAqIC8vIENoYWluIHRoZSBsYW1iZGFzIGZvciBhIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25cbiAqIGNvbnN0IGNoYWluZWRMYW1iZGEgPSBhZGRMYW1iZGEucGlwZSgocmVzdWx0KSA9PlxuICogICBtdWx0aXBseUxhbWJkYS5pbnZva2UoeyB2YWx1ZTogcmVzdWx0LCBtdWx0aXBsaWVyOiAyIH0pXG4gKiApO1xuICpcbiAqIC8vIEV4YW1wbGUgaW52b2NhdGlvbiBvZiB0aGUgY2hhaW5lZExhbWJkYVxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW5lZExhbWJkYS5pbnZva2UoeyB4OiAyLCB5OiAzIH0pO1xuICpcbiAqIC8vIFdpbGwgbG9nIFwiMTBcIiAoc2luY2UgKDIgKyAzKSAqIDIgPSAxMClcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVMYW1iZGEgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlTGFtYmRhXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAoaXNUcmFjZWFibGVGdW5jdGlvbihmaWVsZHMuZnVuYykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdHJ1Y3Rvci1yZXR1cm5cbiAgICAgICAgICAgIHJldHVybiBSdW5uYWJsZVRyYWNlYWJsZS5mcm9tKGZpZWxkcy5mdW5jKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmdW5jXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGFzc2VydE5vblRyYWNlYWJsZUZ1bmN0aW9uKGZpZWxkcy5mdW5jKTtcbiAgICAgICAgdGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUxhbWJkYSh7XG4gICAgICAgICAgICBmdW5jLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgX2ludm9rZShpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZENvbmZpZyA9IHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdm9pZCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcocGlja1J1bm5hYmxlQ29uZmlnS2V5cyhjaGlsZENvbmZpZyksIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3V0cHV0ID0gYXdhaXQgdGhpcy5mdW5jKGlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGlsZENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXQgJiYgUnVubmFibGUuaXNSdW5uYWJsZShvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlY3Vyc2lvbiBsaW1pdCByZWFjaGVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IG91dHB1dC5pbnZva2UoaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGlsZENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNoaWxkQ29uZmlnLnJlY3Vyc2lvbkxpbWl0ID8/IERFRkFVTFRfUkVDVVJTSU9OX0xJTUlUKSAtIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FzeW5jSXRlcmFibGUob3V0cHV0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBjb25zdW1lQXN5bmNJdGVyYWJsZUluQ29udGV4dChjaGlsZENvbmZpZywgb3V0cHV0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIGEgYmVzdCBlZmZvcnQgdG8gZ2F0aGVyLCBmb3IgYW55IHR5cGUgdGhhdCBzdXBwb3J0cyBjb25jYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHRoaXMuX2NvbmNhdE91dHB1dENodW5rcyhmaW5hbE91dHB1dCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gZmluYWxPdXRwdXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNJdGVyYWJsZUl0ZXJhdG9yKG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0KGNoaWxkQ29uZmlnLCBvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgYSBiZXN0IGVmZm9ydCB0byBnYXRoZXIsIGZvciBhbnkgdHlwZSB0aGF0IHN1cHBvcnRzIGNvbmNhdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gdGhpcy5fY29uY2F0T3V0cHV0Q2h1bmtzKGZpbmFsT3V0cHV0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBmaW5hbE91dHB1dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG91dHB1dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5faW52b2tlLmJpbmQodGhpcyksIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yLCBydW5NYW5hZ2VyLCBjb25maWcpIHtcbiAgICAgICAgbGV0IGZpbmFsQ2h1bms7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAoZmluYWxDaHVuayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBhIGJlc3QgZWZmb3J0IHRvIGdhdGhlciwgZm9yIGFueSB0eXBlIHRoYXQgc3VwcG9ydHMgY29uY2F0LlxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSB0aGlzLl9jb25jYXRPdXRwdXRDaHVua3MoZmluYWxDaHVuaywgY2h1bmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gY2h1bms7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoaWxkQ29uZmlnID0gcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCksXG4gICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHZvaWQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMoY2hpbGRDb25maWcpLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5mdW5jKGZpbmFsQ2h1bmssIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoaWxkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBjaGlsZENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG91dHB1dCAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKG91dHB1dCkpIHtcbiAgICAgICAgICAgIGlmIChjb25maWc/LnJlY3Vyc2lvbkxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVjdXJzaW9uIGxpbWl0IHJlYWNoZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgb3V0cHV0LnN0cmVhbShmaW5hbENodW5rLCBjaGlsZENvbmZpZyk7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQXN5bmNJdGVyYWJsZShvdXRwdXQpKSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0KGNoaWxkQ29uZmlnLCBvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNJdGVyYWJsZUl0ZXJhdG9yKG91dHB1dCkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0KGNoaWxkQ29uZmlnLCBvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB5aWVsZCBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoe1xuICAgICAgICAgICAgZ2VuZXJhdG9yOiB0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgY29uZmlnKSxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBydW5zIGEgbWFwcGluZyBvZiBydW5uYWJsZXMgaW4gcGFyYWxsZWwsXG4gKiBhbmQgcmV0dXJucyBhIG1hcHBpbmcgb2YgdGhlaXIgb3V0cHV0cy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1xuICogICBSdW5uYWJsZUxhbWJkYSxcbiAqICAgUnVubmFibGVQYXJhbGxlbCxcbiAqIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqXG4gKiBjb25zdCBhZGRZZWFycyA9IChhZ2U6IG51bWJlcik6IG51bWJlciA9PiBhZ2UgKyA1O1xuICogY29uc3QgeWVhcnNUb0ZpZnR5ID0gKGFnZTogbnVtYmVyKTogbnVtYmVyID0+IDUwIC0gYWdlO1xuICogY29uc3QgeWVhcnNUb0h1bmRyZWQgPSAoYWdlOiBudW1iZXIpOiBudW1iZXIgPT4gMTAwIC0gYWdlO1xuICpcbiAqIGNvbnN0IGFkZFllYXJzTGFtYmRhID0gUnVubmFibGVMYW1iZGEuZnJvbShhZGRZZWFycyk7XG4gKiBjb25zdCBtaWxlc3RvbmVGaWZ0eUxhbWJkYSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oeWVhcnNUb0ZpZnR5KTtcbiAqIGNvbnN0IG1pbGVzdG9uZUh1bmRyZWRMYW1iZGEgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKHllYXJzVG9IdW5kcmVkKTtcbiAqXG4gKiAvLyBQaXBlIHdpbGwgY29lcmNlIG9iamVjdHMgaW50byBSdW5uYWJsZVBhcmFsbGVsIGJ5IGRlZmF1bHQsIGJ1dCB3ZVxuICogLy8gZXhwbGljaXRseSBpbnN0YW50aWF0ZSBvbmUgaGVyZSB0byBkZW1vbnN0cmF0ZVxuICogY29uc3Qgc2VxdWVuY2UgPSBhZGRZZWFyc0xhbWJkYS5waXBlKFxuICogICBSdW5uYWJsZVBhcmFsbGVsLmZyb20oe1xuICogICAgIHllYXJzX3RvX2ZpZnR5OiBtaWxlc3RvbmVGaWZ0eUxhbWJkYSxcbiAqICAgICB5ZWFyc190b19odW5kcmVkOiBtaWxlc3RvbmVIdW5kcmVkTGFtYmRhLFxuICogICB9KVxuICogKTtcbiAqXG4gKiAvLyBJbnZva2UgdGhlIHNlcXVlbmNlIHdpdGggYSBzaW5nbGUgYWdlIGlucHV0XG4gKiBjb25zdCByZXMgPSBhd2FpdCBzZXF1ZW5jZS5pbnZva2UoMjUpO1xuICpcbiAqIC8vIHsgeWVhcnNfdG9fZmlmdHk6IDIwLCB5ZWFyc190b19odW5kcmVkOiA3MCB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlUGFyYWxsZWwgZXh0ZW5kcyBSdW5uYWJsZU1hcCB7XG59XG4vKipcbiAqIEEgUnVubmFibGUgdGhhdCBjYW4gZmFsbGJhY2sgdG8gb3RoZXIgUnVubmFibGVzIGlmIGl0IGZhaWxzLlxuICogRXh0ZXJuYWwgQVBJcyAoZS5nLiwgQVBJcyBmb3IgYSBsYW5ndWFnZSBtb2RlbCkgbWF5IGF0IHRpbWVzIGV4cGVyaWVuY2VcbiAqIGRlZ3JhZGVkIHBlcmZvcm1hbmNlIG9yIGV2ZW4gZG93bnRpbWUuXG4gKlxuICogSW4gdGhlc2UgY2FzZXMsIGl0IGNhbiBiZSB1c2VmdWwgdG8gaGF2ZSBhIGZhbGxiYWNrIFJ1bm5hYmxlIHRoYXQgY2FuIGJlXG4gKiB1c2VkIGluIHBsYWNlIG9mIHRoZSBvcmlnaW5hbCBSdW5uYWJsZSAoZS5nLiwgZmFsbGJhY2sgdG8gYW5vdGhlciBMTE0gcHJvdmlkZXIpLlxuICpcbiAqIEZhbGxiYWNrcyBjYW4gYmUgZGVmaW5lZCBhdCB0aGUgbGV2ZWwgb2YgYSBzaW5nbGUgUnVubmFibGUsIG9yIGF0IHRoZSBsZXZlbFxuICogb2YgYSBjaGFpbiBvZiBSdW5uYWJsZXMuIEZhbGxiYWNrcyBhcmUgdHJpZWQgaW4gb3JkZXIgdW50aWwgb25lIHN1Y2NlZWRzIG9yXG4gKiBhbGwgZmFpbC5cbiAqXG4gKiBXaGlsZSB5b3UgY2FuIGluc3RhbnRpYXRlIGEgYFJ1bm5hYmxlV2l0aEZhbGxiYWNrc2AgZGlyZWN0bHksIGl0IGlzIHVzdWFsbHlcbiAqIG1vcmUgY29udmVuaWVudCB0byB1c2UgdGhlIGB3aXRoRmFsbGJhY2tzYCBtZXRob2Qgb24gYW4gZXhpc3RpbmcgUnVubmFibGUuXG4gKlxuICogV2hlbiBzdHJlYW1pbmcsIGZhbGxiYWNrcyB3aWxsIG9ubHkgYmUgY2FsbGVkIG9uIGZhaWx1cmVzIGR1cmluZyB0aGUgaW5pdGlhbFxuICogc3RyZWFtIGNyZWF0aW9uLiBFcnJvcnMgdGhhdCBvY2N1ciBhZnRlciBhIHN0cmVhbSBzdGFydHMgd2lsbCBub3QgZmFsbGJhY2tcbiAqIHRvIHRoZSBuZXh0IFJ1bm5hYmxlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1xuICogICBSdW5uYWJsZUxhbWJkYSxcbiAqICAgUnVubmFibGVXaXRoRmFsbGJhY2tzLFxuICogfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuICpcbiAqIGNvbnN0IHByaW1hcnlPcGVyYXRpb24gPSAoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gKiAgIGlmIChpbnB1dCAhPT0gXCJzYWZlXCIpIHtcbiAqICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcmltYXJ5IG9wZXJhdGlvbiBmYWlsZWQgZHVlIHRvIHVuc2FmZSBpbnB1dFwiKTtcbiAqICAgfVxuICogICByZXR1cm4gYFByb2Nlc3NlZDogJHtpbnB1dH1gO1xuICogfTtcbiAqXG4gKiAvLyBEZWZpbmUgYSBmYWxsYmFjayBvcGVyYXRpb24gdGhhdCBwcm9jZXNzZXMgdGhlIGlucHV0IGRpZmZlcmVudGx5XG4gKiBjb25zdCBmYWxsYmFja09wZXJhdGlvbiA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+XG4gKiAgIGBGYWxsYmFjayBwcm9jZXNzZWQ6ICR7aW5wdXR9YDtcbiAqXG4gKiBjb25zdCBwcmltYXJ5UnVubmFibGUgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKHByaW1hcnlPcGVyYXRpb24pO1xuICogY29uc3QgZmFsbGJhY2tSdW5uYWJsZSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oZmFsbGJhY2tPcGVyYXRpb24pO1xuICpcbiAqIC8vIEFwcGx5IHRoZSBmYWxsYmFjayBsb2dpYyB1c2luZyB0aGUgLndpdGhGYWxsYmFja3MoKSBtZXRob2RcbiAqIGNvbnN0IHJ1bm5hYmxlV2l0aEZhbGxiYWNrID0gcHJpbWFyeVJ1bm5hYmxlLndpdGhGYWxsYmFja3MoW2ZhbGxiYWNrUnVubmFibGVdKTtcbiAqXG4gKiAvLyBBbHRlcm5hdGl2ZWx5LCBjcmVhdGUgYSBSdW5uYWJsZVdpdGhGYWxsYmFja3MgaW5zdGFuY2UgbWFudWFsbHlcbiAqIGNvbnN0IG1hbnVhbEZhbGxiYWNrQ2hhaW4gPSBuZXcgUnVubmFibGVXaXRoRmFsbGJhY2tzKHtcbiAqICAgcnVubmFibGU6IHByaW1hcnlSdW5uYWJsZSxcbiAqICAgZmFsbGJhY2tzOiBbZmFsbGJhY2tSdW5uYWJsZV0sXG4gKiB9KTtcbiAqXG4gKiAvLyBFeGFtcGxlIGludm9jYXRpb24gdXNpbmcgLndpdGhGYWxsYmFja3MoKVxuICogY29uc3QgcmVzID0gYXdhaXQgcnVubmFibGVXaXRoRmFsbGJhY2tcbiAqICAgLmludm9rZShcInVuc2FmZSBpbnB1dFwiKVxuICogICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gKiAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCBhZnRlciBhbGwgYXR0ZW1wdHM6XCIsIGVycm9yLm1lc3NhZ2UpO1xuICogICB9KTtcbiAqXG4gKiAvLyBcIkZhbGxiYWNrIHByb2Nlc3NlZDogdW5zYWZlIGlucHV0XCJcbiAqXG4gKiAvLyBFeGFtcGxlIGludm9jYXRpb24gdXNpbmcgbWFudWFsIGluc3RhbnRpYXRpb25cbiAqIGNvbnN0IHJlcyA9IGF3YWl0IG1hbnVhbEZhbGxiYWNrQ2hhaW5cbiAqICAgLmludm9rZShcInNhZmVcIilcbiAqICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICogICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgYWZ0ZXIgYWxsIGF0dGVtcHRzOlwiLCBlcnJvci5tZXNzYWdlKTtcbiAqICAgfSk7XG4gKlxuICogLy8gXCJQcm9jZXNzZWQ6IHNhZmVcIlxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVdpdGhGYWxsYmFja3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlV2l0aEZhbGxiYWNrc1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5uYWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmYWxsYmFja3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ydW5uYWJsZSA9IGZpZWxkcy5ydW5uYWJsZTtcbiAgICAgICAgdGhpcy5mYWxsYmFja3MgPSBmaWVsZHMuZmFsbGJhY2tzO1xuICAgIH1cbiAgICAqcnVubmFibGVzKCkge1xuICAgICAgICB5aWVsZCB0aGlzLnJ1bm5hYmxlO1xuICAgICAgICBmb3IgKGNvbnN0IGZhbGxiYWNrIG9mIHRoaXMuZmFsbGJhY2tzKSB7XG4gICAgICAgICAgICB5aWVsZCBmYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHsgcnVuSWQsIC4uLm90aGVyQ29uZmlnRmllbGRzIH0gPSBjb25maWc7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvdGhlckNvbmZpZ0ZpZWxkcz8ucnVuTmFtZSk7XG4gICAgICAgIGNvbnN0IGNoaWxkQ29uZmlnID0gcGF0Y2hDb25maWcob3RoZXJDb25maWdGaWVsZHMsIHtcbiAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24ucnVuV2l0aENvbmZpZyhjaGlsZENvbmZpZywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGZpcnN0RXJyb3I7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJ1bm5hYmxlIG9mIHRoaXMucnVubmFibGVzKCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWc/LnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCBydW5uYWJsZS5pbnZva2UoaW5wdXQsIGNoaWxkQ29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RFcnJvciA9IGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFjay5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGZpcnN0RXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZmlyc3RFcnJvcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHsgcnVuSWQsIC4uLm90aGVyQ29uZmlnRmllbGRzIH0gPSBjb25maWc7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvdGhlckNvbmZpZ0ZpZWxkcz8ucnVuTmFtZSk7XG4gICAgICAgIGxldCBmaXJzdEVycm9yO1xuICAgICAgICBsZXQgc3RyZWFtO1xuICAgICAgICBmb3IgKGNvbnN0IHJ1bm5hYmxlIG9mIHRoaXMucnVubmFibGVzKCkpIHtcbiAgICAgICAgICAgIGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgY29uc3QgY2hpbGRDb25maWcgPSBwYXRjaENvbmZpZyhvdGhlckNvbmZpZ0ZpZWxkcywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFN0cmVhbSA9IGF3YWl0IHJ1bm5hYmxlLnN0cmVhbShpbnB1dCwgY2hpbGRDb25maWcpO1xuICAgICAgICAgICAgICAgIHN0cmVhbSA9IGNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0KGNoaWxkQ29uZmlnLCBvcmlnaW5hbFN0cmVhbSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdEVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RFcnJvciA9IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJlYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBmaXJzdEVycm9yID8/IG5ldyBFcnJvcihcIk5vIGVycm9yIHN0b3JlZCBhdCBlbmQgb2YgZmFsbGJhY2suXCIpO1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG91dHB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fY29uY2F0T3V0cHV0Q2h1bmtzKG91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBpZiAoYmF0Y2hPcHRpb25zPy5yZXR1cm5FeGNlcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNvbmZpZ0xpc3QubWFwKChjb25maWcpID0+IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpKSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tNYW5hZ2Vycy5tYXAoYXN5bmMgKGNhbGxiYWNrTWFuYWdlciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlU3RhcnRSZXMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXI/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dHNbaV0sIFwiaW5wdXRcIiksIGNvbmZpZ0xpc3RbaV0ucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZ0xpc3RbaV0ucnVuTmFtZSk7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnTGlzdFtpXS5ydW5JZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVTdGFydFJlcztcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgZmlyc3RFcnJvcjtcbiAgICAgICAgZm9yIChjb25zdCBydW5uYWJsZSBvZiB0aGlzLnJ1bm5hYmxlcygpKSB7XG4gICAgICAgICAgICBjb25maWdMaXN0WzBdLnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0cyA9IGF3YWl0IHJ1bm5hYmxlLmJhdGNoKGlucHV0cywgcnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBqKSA9PiBwYXRjaENvbmZpZyhjb25maWdMaXN0W2pdLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICB9KSksIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBpKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dHNbaV0sIFwib3V0cHV0XCIpKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RXJyb3IgPSBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpcnN0RXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGVycm9yIHN0b3JlZCBhdCBlbmQgb2YgZmFsbGJhY2tzLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZmlyc3RFcnJvcikpKTtcbiAgICAgICAgdGhyb3cgZmlyc3RFcnJvcjtcbiAgICB9XG59XG4vLyBUT0RPOiBGaWd1cmUgb3V0IHdoeSB0aGUgY29tcGlsZXIgbmVlZHMgaGVscCBlbGltaW5hdGluZyBFcnJvciBhcyBhIFJ1bk91dHB1dCB0eXBlXG5leHBvcnQgZnVuY3Rpb24gX2NvZXJjZVRvUnVubmFibGUoY29lcmNlYWJsZSkge1xuICAgIGlmICh0eXBlb2YgY29lcmNlYWJsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVMYW1iZGEoeyBmdW5jOiBjb2VyY2VhYmxlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChSdW5uYWJsZS5pc1J1bm5hYmxlKGNvZXJjZWFibGUpKSB7XG4gICAgICAgIHJldHVybiBjb2VyY2VhYmxlO1xuICAgIH1cbiAgICBlbHNlIGlmICghQXJyYXkuaXNBcnJheShjb2VyY2VhYmxlKSAmJiB0eXBlb2YgY29lcmNlYWJsZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBjb25zdCBydW5uYWJsZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29lcmNlYWJsZSkpIHtcbiAgICAgICAgICAgIHJ1bm5hYmxlc1trZXldID0gX2NvZXJjZVRvUnVubmFibGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVNYXAoe1xuICAgICAgICAgICAgc3RlcHM6IHJ1bm5hYmxlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGEgUnVubmFibGUsIGZ1bmN0aW9uIG9yIG9iamVjdC5cXG5JbnN0ZWFkIGdvdCBhbiB1bnN1cHBvcnRlZCB0eXBlLmApO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IGFzc2lnbnMga2V5LXZhbHVlIHBhaXJzIHRvIGlucHV0cyBvZiB0eXBlIGBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPmAuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtcbiAqICAgUnVubmFibGVBc3NpZ24sXG4gKiAgIFJ1bm5hYmxlTGFtYmRhLFxuICogICBSdW5uYWJsZVBhcmFsbGVsLFxuICogfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuICpcbiAqIGNvbnN0IGNhbGN1bGF0ZUFnZSA9ICh4OiB7IGJpcnRoWWVhcjogbnVtYmVyIH0pOiB7IGFnZTogbnVtYmVyIH0gPT4ge1xuICogICBjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbiAqICAgcmV0dXJuIHsgYWdlOiBjdXJyZW50WWVhciAtIHguYmlydGhZZWFyIH07XG4gKiB9O1xuICpcbiAqIGNvbnN0IGNyZWF0ZUdyZWV0aW5nID0gKHg6IHsgbmFtZTogc3RyaW5nIH0pOiB7IGdyZWV0aW5nOiBzdHJpbmcgfSA9PiB7XG4gKiAgIHJldHVybiB7IGdyZWV0aW5nOiBgSGVsbG8sICR7eC5uYW1lfSFgIH07XG4gKiB9O1xuICpcbiAqIGNvbnN0IG1hcHBlciA9IFJ1bm5hYmxlUGFyYWxsZWwuZnJvbSh7XG4gKiAgIGFnZV9zdGVwOiBSdW5uYWJsZUxhbWJkYS5mcm9tKGNhbGN1bGF0ZUFnZSksXG4gKiAgIGdyZWV0aW5nX3N0ZXA6IFJ1bm5hYmxlTGFtYmRhLmZyb20oY3JlYXRlR3JlZXRpbmcpLFxuICogfSk7XG4gKlxuICogY29uc3QgcnVubmFibGVBc3NpZ24gPSBuZXcgUnVubmFibGVBc3NpZ24oeyBtYXBwZXIgfSk7XG4gKlxuICogY29uc3QgcmVzID0gYXdhaXQgcnVubmFibGVBc3NpZ24uaW52b2tlKHsgbmFtZTogXCJBbGljZVwiLCBiaXJ0aFllYXI6IDE5OTAgfSk7XG4gKlxuICogLy8geyBuYW1lOiBcIkFsaWNlXCIsIGJpcnRoWWVhcjogMTk5MCwgYWdlX3N0ZXA6IHsgYWdlOiAzNCB9LCBncmVldGluZ19zdGVwOiB7IGdyZWV0aW5nOiBcIkhlbGxvLCBBbGljZSFcIiB9IH1cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVBc3NpZ24gZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlQXNzaWduXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIGlmIChmaWVsZHMgaW5zdGFuY2VvZiBSdW5uYWJsZU1hcCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IG1hcHBlcjogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXBwZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXBwZXIgPSBmaWVsZHMubWFwcGVyO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyUmVzdWx0ID0gYXdhaXQgdGhpcy5tYXBwZXIuaW52b2tlKGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmlucHV0LFxuICAgICAgICAgICAgLi4ubWFwcGVyUmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gY29sbGVjdCBtYXBwZXIga2V5c1xuICAgICAgICBjb25zdCBtYXBwZXJLZXlzID0gdGhpcy5tYXBwZXIuZ2V0U3RlcHNLZXlzKCk7XG4gICAgICAgIC8vIGNyZWF0ZSB0d28gaW5wdXQgZ2Vucywgb25lIGZvciB0aGUgbWFwcGVyLCBvbmUgZm9yIHRoZSBpbnB1dFxuICAgICAgICBjb25zdCBbZm9yUGFzc3Rocm91Z2gsIGZvck1hcHBlcl0gPSBhdGVlKGdlbmVyYXRvcik7XG4gICAgICAgIC8vIGNyZWF0ZSBtYXBwZXIgb3V0cHV0IGdlblxuICAgICAgICBjb25zdCBtYXBwZXJPdXRwdXQgPSB0aGlzLm1hcHBlci50cmFuc2Zvcm0oZm9yTWFwcGVyLCBwYXRjaENvbmZpZyhvcHRpb25zLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG4gICAgICAgIC8vIHN0YXJ0IHRoZSBtYXBwZXJcbiAgICAgICAgY29uc3QgZmlyc3RNYXBwZXJDaHVua1Byb21pc2UgPSBtYXBwZXJPdXRwdXQubmV4dCgpO1xuICAgICAgICAvLyB5aWVsZCB0aGUgcGFzc3Rocm91Z2hcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBmb3JQYXNzdGhyb3VnaCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjaHVuayAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KGNodW5rKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUnVubmFibGVBc3NpZ24gY2FuIG9ubHkgYmUgdXNlZCB3aXRoIG9iamVjdHMgYXMgaW5wdXQsIGdvdCAke3R5cGVvZiBjaHVua31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNodW5rKS5maWx0ZXIoKFtrZXldKSA9PiAhbWFwcGVyS2V5cy5pbmNsdWRlcyhrZXkpKSk7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZmlsdGVyZWQpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBmaWx0ZXJlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB5aWVsZCB0aGUgbWFwcGVyIG91dHB1dFxuICAgICAgICB5aWVsZCAoYXdhaXQgZmlyc3RNYXBwZXJDaHVua1Byb21pc2UpLnZhbHVlO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG1hcHBlck91dHB1dCkge1xuICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoe1xuICAgICAgICAgICAgZ2VuZXJhdG9yOiB0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgY29uZmlnKSxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBhc3NpZ25zIGtleS12YWx1ZSBwYWlycyB0byBpbnB1dHMgb2YgdHlwZSBgUmVjb3JkPHN0cmluZywgdW5rbm93bj5gLlxuICogVXNlZnVsIGZvciBzdHJlYW1pbmcsIGNhbiBiZSBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgYW5kIGNoYWluZWQgYnkgY2FsbGluZyBgcnVubmFibGUucGljaygpO2AuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgUnVubmFibGVQaWNrIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqXG4gKiBjb25zdCBpbnB1dERhdGEgPSB7XG4gKiAgIG5hbWU6IFwiSm9oblwiLFxuICogICBhZ2U6IDMwLFxuICogICBjaXR5OiBcIk5ldyBZb3JrXCIsXG4gKiAgIGNvdW50cnk6IFwiVVNBXCIsXG4gKiAgIGVtYWlsOiBcImpvaG4uZG9lQGV4YW1wbGUuY29tXCIsXG4gKiAgIHBob25lOiBcIisxMjM0NTY3ODkwXCIsXG4gKiB9O1xuICpcbiAqIGNvbnN0IGJhc2ljSW5mb1J1bm5hYmxlID0gbmV3IFJ1bm5hYmxlUGljayhbXCJuYW1lXCIsIFwiY2l0eVwiXSk7XG4gKlxuICogLy8gRXhhbXBsZSBpbnZvY2F0aW9uXG4gKiBjb25zdCByZXMgPSBhd2FpdCBiYXNpY0luZm9SdW5uYWJsZS5pbnZva2UoaW5wdXREYXRhKTtcbiAqXG4gKiAvLyB7IG5hbWU6ICdKb2huJywgY2l0eTogJ05ldyBZb3JrJyB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlUGljayBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVQaWNrXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KGZpZWxkcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBrZXlzOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImtleXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5rZXlzID0gZmllbGRzLmtleXM7XG4gICAgfVxuICAgIGFzeW5jIF9waWNrKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5rZXlzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRbdGhpcy5rZXlzXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBpY2tlZCA9IHRoaXMua2V5c1xuICAgICAgICAgICAgICAgIC5tYXAoKGtleSkgPT4gW2tleSwgaW5wdXRba2V5XV0pXG4gICAgICAgICAgICAgICAgLmZpbHRlcigodikgPT4gdlsxXSAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHJldHVybiBwaWNrZWQubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA6IE9iamVjdC5mcm9tRW50cmllcyhwaWNrZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5fcGljay5iaW5kKHRoaXMpLCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jICpfdHJhbnNmb3JtKGdlbmVyYXRvcikge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGdlbmVyYXRvcikge1xuICAgICAgICAgICAgY29uc3QgcGlja2VkID0gYXdhaXQgdGhpcy5fcGljayhjaHVuayk7XG4gICAgICAgICAgICBpZiAocGlja2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBwaWNrZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoe1xuICAgICAgICAgICAgZ2VuZXJhdG9yOiB0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgY29uZmlnKSxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVubmFibGVUb29sTGlrZSBleHRlbmRzIFJ1bm5hYmxlQmluZGluZyB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGNvbnN0IHNlcXVlbmNlID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtcbiAgICAgICAgICAgIFJ1bm5hYmxlTGFtYmRhLmZyb20oYXN5bmMgKGlucHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHRvb2xJbnB1dDtcbiAgICAgICAgICAgICAgICBpZiAoX2lzVG9vbENhbGwoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sSW5wdXQgPSBhd2FpdCBpbnRlcm9wUGFyc2VBc3luYyh0aGlzLnNjaGVtYSwgaW5wdXQuYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUb29sSW5wdXRQYXJzaW5nRXhjZXB0aW9uKGBSZWNlaXZlZCB0b29sIGlucHV0IGRpZCBub3QgbWF0Y2ggZXhwZWN0ZWQgc2NoZW1hYCwgSlNPTi5zdHJpbmdpZnkoaW5wdXQuYXJncykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b29sSW5wdXQgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvb2xJbnB1dDtcbiAgICAgICAgICAgIH0pLndpdGhDb25maWcoeyBydW5OYW1lOiBgJHtmaWVsZHMubmFtZX06cGFyc2VfaW5wdXRgIH0pLFxuICAgICAgICAgICAgZmllbGRzLmJvdW5kLFxuICAgICAgICBdKS53aXRoQ29uZmlnKHsgcnVuTmFtZTogZmllbGRzLm5hbWUgfSk7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIGJvdW5kOiBzZXF1ZW5jZSxcbiAgICAgICAgICAgIGNvbmZpZzogZmllbGRzLmNvbmZpZyA/PyB7fSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZGVzY3JpcHRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2NoZW1hXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZmllbGRzLmRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnNjaGVtYSA9IGZpZWxkcy5zY2hlbWE7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVRvb2xMaWtlXCI7XG4gICAgfVxufVxuLyoqXG4gKiBHaXZlbiBhIHJ1bm5hYmxlIGFuZCBhIFpvZCBzY2hlbWEsIGNvbnZlcnQgdGhlIHJ1bm5hYmxlIHRvIGEgdG9vbC5cbiAqXG4gKiBAdGVtcGxhdGUgUnVuSW5wdXQgVGhlIGlucHV0IHR5cGUgZm9yIHRoZSBydW5uYWJsZS5cbiAqIEB0ZW1wbGF0ZSBSdW5PdXRwdXQgVGhlIG91dHB1dCB0eXBlIGZvciB0aGUgcnVubmFibGUuXG4gKlxuICogQHBhcmFtIHtSdW5uYWJsZTxSdW5JbnB1dCwgUnVuT3V0cHV0Pn0gcnVubmFibGUgVGhlIHJ1bm5hYmxlIHRvIGNvbnZlcnQgdG8gYSB0b29sLlxuICogQHBhcmFtIGZpZWxkc1xuICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IFtmaWVsZHMubmFtZV0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuIElmIG5vdCBwcm92aWRlZCwgaXQgd2lsbCBkZWZhdWx0IHRvIHRoZSBuYW1lIG9mIHRoZSBydW5uYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nIHwgdW5kZWZpbmVkfSBbZmllbGRzLmRlc2NyaXB0aW9uXSBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wuIEZhbGxzIGJhY2sgdG8gdGhlIGRlc2NyaXB0aW9uIG9uIHRoZSBab2Qgc2NoZW1hIGlmIG5vdCBwcm92aWRlZCwgb3IgdW5kZWZpbmVkIGlmIG5laXRoZXIgYXJlIHByb3ZpZGVkLlxuICogQHBhcmFtIHtJbnRlcm9wWm9kVHlwZTxSdW5JbnB1dD59IFtmaWVsZHMuc2NoZW1hXSBUaGUgWm9kIHNjaGVtYSBmb3IgdGhlIGlucHV0IG9mIHRoZSB0b29sLiBJbmZlcnMgdGhlIFpvZCB0eXBlIGZyb20gdGhlIGlucHV0IHR5cGUgb2YgdGhlIHJ1bm5hYmxlLlxuICogQHJldHVybnMge1J1bm5hYmxlVG9vbExpa2U8SW50ZXJvcFpvZFR5cGU8UnVuSW5wdXQ+LCBSdW5PdXRwdXQ+fSBBbiBpbnN0YW5jZSBvZiBgUnVubmFibGVUb29sTGlrZWAgd2hpY2ggaXMgYSBydW5uYWJsZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdG9vbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRSdW5uYWJsZVRvVG9vbChydW5uYWJsZSwgZmllbGRzKSB7XG4gICAgY29uc3QgbmFtZSA9IGZpZWxkcy5uYW1lID8/IHJ1bm5hYmxlLmdldE5hbWUoKTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGZpZWxkcy5kZXNjcmlwdGlvbiA/PyBnZXRTY2hlbWFEZXNjcmlwdGlvbihmaWVsZHMuc2NoZW1hKTtcbiAgICBpZiAoaXNTaW1wbGVTdHJpbmdab2RTY2hlbWEoZmllbGRzLnNjaGVtYSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVRvb2xMaWtlKHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHNjaGVtYTogelxuICAgICAgICAgICAgICAgIC5vYmplY3QoeyBpbnB1dDogei5zdHJpbmcoKSB9KVxuICAgICAgICAgICAgICAgIC50cmFuc2Zvcm0oKGlucHV0KSA9PiBpbnB1dC5pbnB1dCksXG4gICAgICAgICAgICBib3VuZDogcnVubmFibGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJ1bm5hYmxlVG9vbExpa2Uoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgc2NoZW1hOiBmaWVsZHMuc2NoZW1hLFxuICAgICAgICBib3VuZDogcnVubmFibGUsXG4gICAgfSk7XG59XG4iXSwibmFtZXMiOlsieiIsInBSZXRyeSIsInY0IiwidXVpZHY0IiwiaXNUcmFjZWFibGVGdW5jdGlvbiIsIkxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciIsIlJ1bkxvZyIsIlJ1bkxvZ1BhdGNoIiwiaXNMb2dTdHJlYW1IYW5kbGVyIiwiRXZlbnRTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJpc1N0cmVhbUV2ZW50c0hhbmRsZXIiLCJTZXJpYWxpemFibGUiLCJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiY29uY2F0IiwiYXRlZSIsInBpcGVHZW5lcmF0b3JXaXRoU2V0dXAiLCJBc3luY0dlbmVyYXRvcldpdGhTZXR1cCIsInJhY2VXaXRoU2lnbmFsIiwiREVGQVVMVF9SRUNVUlNJT05fTElNSVQiLCJlbnN1cmVDb25maWciLCJnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWciLCJtZXJnZUNvbmZpZ3MiLCJwYXRjaENvbmZpZyIsInBpY2tSdW5uYWJsZUNvbmZpZ0tleXMiLCJBc3luY0NhbGxlciIsIlJvb3RMaXN0ZW5lcnNUcmFjZXIiLCJfUm9vdEV2ZW50RmlsdGVyIiwiaXNSdW5uYWJsZUludGVyZmFjZSIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iLCJHcmFwaCIsImNvbnZlcnRUb0h0dHBFdmVudFN0cmVhbSIsImNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0IiwiY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0IiwiaXNBc3luY0l0ZXJhYmxlIiwiaXNJdGVyYWJsZUl0ZXJhdG9yIiwiaXNJdGVyYXRvciIsIl9pc1Rvb2xDYWxsIiwiVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiIsImdldFNjaGVtYURlc2NyaXB0aW9uIiwiaW50ZXJvcFBhcnNlQXN5bmMiLCJpc1NpbXBsZVN0cmluZ1pvZFNjaGVtYSIsIl9jb2VyY2VUb0RpY3QiLCJ2YWx1ZSIsImRlZmF1bHRLZXkiLCJBcnJheSIsImlzQXJyYXkiLCJEYXRlIiwiUnVubmFibGUiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZ2V0TmFtZSIsInN1ZmZpeCIsIm5hbWUiLCJsY19uYW1lIiwiYmluZCIsImt3YXJncyIsIlJ1bm5hYmxlQmluZGluZyIsImJvdW5kIiwiY29uZmlnIiwibWFwIiwiUnVubmFibGVFYWNoIiwid2l0aFJldHJ5IiwiZmllbGRzIiwiUnVubmFibGVSZXRyeSIsIm1heEF0dGVtcHROdW1iZXIiLCJzdG9wQWZ0ZXJBdHRlbXB0Iiwid2l0aENvbmZpZyIsIndpdGhGYWxsYmFja3MiLCJmYWxsYmFja3MiLCJSdW5uYWJsZVdpdGhGYWxsYmFja3MiLCJydW5uYWJsZSIsIl9nZXRPcHRpb25zTGlzdCIsIm9wdGlvbnMiLCJsZW5ndGgiLCJFcnJvciIsInJ1bklkIiwiY29uc29sZSIsIndhcm4iLCJzdWJzZXF1ZW50IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwiZmlsdGVyIiwia2V5IiwiZnJvbSIsIl8iLCJpIiwiYmF0Y2giLCJpbnB1dHMiLCJiYXRjaE9wdGlvbnMiLCJjb25maWdMaXN0IiwibWF4Q29uY3VycmVuY3kiLCJjYWxsZXIiLCJvbkZhaWxlZEF0dGVtcHQiLCJlIiwiYmF0Y2hDYWxscyIsImlucHV0IiwiY2FsbCIsInJlc3VsdCIsImludm9rZSIsInJldHVybkV4Y2VwdGlvbnMiLCJQcm9taXNlIiwiYWxsIiwiX3N0cmVhbUl0ZXJhdG9yIiwic3RyZWFtIiwid3JhcHBlZEdlbmVyYXRvciIsImdlbmVyYXRvciIsInNldHVwIiwiZnJvbUFzeW5jR2VuZXJhdG9yIiwiX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMiLCJydW5uYWJsZUNvbmZpZyIsInVuZGVmaW5lZCIsImNhbGxiYWNrcyIsInRhZ3MiLCJtZXRhZGF0YSIsInJ1bk5hbWUiLCJyZWN1cnNpb25MaW1pdCIsInRpbWVvdXQiLCJzaWduYWwiLCJjYWxsT3B0aW9ucyIsIl9jYWxsV2l0aENvbmZpZyIsImZ1bmMiLCJjYWxsYmFja01hbmFnZXJfIiwicnVuTWFuYWdlciIsImhhbmRsZUNoYWluU3RhcnQiLCJ0b0pTT04iLCJydW5UeXBlIiwib3V0cHV0IiwicHJvbWlzZSIsImhhbmRsZUNoYWluRXJyb3IiLCJoYW5kbGVDaGFpbkVuZCIsIl9iYXRjaFdpdGhDb25maWciLCJvcHRpb25zTGlzdCIsImNhbGxiYWNrTWFuYWdlcnMiLCJydW5NYW5hZ2VycyIsImNhbGxiYWNrTWFuYWdlciIsImhhbmRsZVN0YXJ0UmVzIiwib3V0cHV0cyIsIl9jb25jYXRPdXRwdXRDaHVua3MiLCJmaXJzdCIsInNlY29uZCIsIl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnIiwiaW5wdXRHZW5lcmF0b3IiLCJ0cmFuc2Zvcm1lciIsImZpbmFsSW5wdXQiLCJmaW5hbElucHV0U3VwcG9ydGVkIiwiZmluYWxPdXRwdXQiLCJmaW5hbE91dHB1dFN1cHBvcnRlZCIsIm91dGVyVGhpcyIsIndyYXBJbnB1dEZvclRyYWNpbmciLCJjaHVuayIsInBpcGUiLCJzdHJlYW1FdmVudHNIYW5kbGVyIiwiaGFuZGxlcnMiLCJmaW5kIiwiaXRlcmF0b3IiLCJ0YXBPdXRwdXRJdGVyYWJsZSIsInN0cmVhbUxvZ0hhbmRsZXIiLCJnZXRHcmFwaCIsImdyYXBoIiwiaW5wdXROb2RlIiwiYWRkTm9kZSIsInNjaGVtYSIsImFueSIsInJ1bm5hYmxlTm9kZSIsIm91dHB1dE5vZGUiLCJhZGRFZGdlIiwiY29lcmNlYWJsZSIsIlJ1bm5hYmxlU2VxdWVuY2UiLCJsYXN0IiwiX2NvZXJjZVRvUnVubmFibGUiLCJwaWNrIiwia2V5cyIsIlJ1bm5hYmxlUGljayIsImFzc2lnbiIsIm1hcHBpbmciLCJSdW5uYWJsZUFzc2lnbiIsIlJ1bm5hYmxlTWFwIiwic3RlcHMiLCJ0cmFuc2Zvcm0iLCJmaW5hbENodW5rIiwic3RyZWFtTG9nIiwic3RyZWFtT3B0aW9ucyIsImxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciIsImF1dG9DbG9zZSIsIl9zY2hlbWFGb3JtYXQiLCJfc3RyZWFtTG9nIiwiY29waWVkQ2FsbGJhY2tzIiwiY29weSIsImFkZEhhbmRsZXIiLCJydW5uYWJsZVN0cmVhbVByb21pc2UiLCJjb25zdW1lUnVubmFibGVTdHJlYW0iLCJydW5uYWJsZVN0cmVhbSIsInBhdGNoIiwib3BzIiwib3AiLCJwYXRoIiwid3JpdGVyIiwid3JpdGUiLCJjbG9zZSIsInJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2UiLCJsb2ciLCJzdHJlYW1FdmVudHMiLCJ2ZXJzaW9uIiwiX3N0cmVhbUV2ZW50c1YxIiwiX3N0cmVhbUV2ZW50c1YyIiwiZW5jb2RpbmciLCJldmVudFN0cmVhbWVyIiwiYWJvcnRDb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwibGlzdGVuZXIiLCJBYm9ydFNpZ25hbCIsImFib3J0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uY2UiLCJ0YXBwZWRTdHJlYW0iLCJhYm9ydGVkIiwiZmluaXNoIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImZpcnN0RXZlbnRTZW50IiwiZmlyc3RFdmVudFJ1bklkIiwiZXZlbnQiLCJkYXRhIiwicnVuX2lkIiwiZW5kc1dpdGgiLCJydW5Mb2ciLCJoYXNFbmNvdW50ZXJlZFN0YXJ0RXZlbnQiLCJyb290VGFncyIsInJvb3RNZXRhZGF0YSIsInJvb3ROYW1lIiwicm9vdEV2ZW50RmlsdGVyIiwibG9nU3RyZWFtIiwiZnJvbVJ1bkxvZ1BhdGNoIiwic3RhdGUiLCJpZCIsInR5cGUiLCJpbmNsdWRlRXZlbnQiLCJwYXRocyIsInN0YXJ0c1dpdGgiLCJzcGxpdCIsImRlZHVwZWRQYXRocyIsIlNldCIsImV2ZW50VHlwZSIsImxvZ0VudHJ5IiwibG9ncyIsImVuZF90aW1lIiwic3RyZWFtZWRfb3V0cHV0IiwiZmluYWxfb3V0cHV0IiwiY2h1bmtDb3VudCIsImlzUnVubmFibGUiLCJ0aGluZyIsIndpdGhMaXN0ZW5lcnMiLCJvblN0YXJ0Iiwib25FbmQiLCJvbkVycm9yIiwiY29uZmlnRmFjdG9yaWVzIiwiYXNUb29sIiwiY29udmVydFJ1bm5hYmxlVG9Ub29sIiwiX21lcmdlQ29uZmlnIiwiY29uZmlnRmFjdG9yeSIsIm1lcmdlZE9wdGlvbnMiLCJpbmRpdmlkdWFsT3B0aW9uIiwiaXNSdW5uYWJsZUJpbmRpbmciLCJfaW52b2tlIiwiZ2V0Q2hpbGQiLCJfcGF0Y2hDb25maWdGb3JSZXRyeSIsImF0dGVtcHQiLCJ0YWciLCJhdHRlbXB0TnVtYmVyIiwiZXJyb3IiLCJyZXRyaWVzIiwiTWF0aCIsIm1heCIsInJhbmRvbWl6ZSIsIl9iYXRjaCIsImNvbmZpZ3MiLCJyZXN1bHRzTWFwIiwicmVtYWluaW5nSW5kZXhlcyIsInRvU3RyaW5nIiwicmVtYWluaW5nSW5wdXRzIiwicGF0Y2hlZENvbmZpZ3MiLCJyZXN1bHRzIiwiZmlyc3RFeGNlcHRpb24iLCJyZXN1bHRNYXBJbmRleCIsInNvcnQiLCJhIiwiYiIsInBhcnNlSW50IiwibWlkZGxlIiwib21pdFNlcXVlbmNlVGFncyIsIm5leHRTdGVwSW5wdXQiLCJpbml0aWFsU3RlcHMiLCJzdGVwIiwibmV4dFN0ZXBJbnB1dHMiLCJqIiwiY2hpbGRSdW5NYW5hZ2VyIiwib3RoZXJPcHRpb25zIiwiY29uY2F0U3VwcG9ydGVkIiwiZmluYWxHZW5lcmF0b3IiLCJ0aHJvd0lmQWJvcnRlZCIsImN1cnJlbnRMYXN0Tm9kZSIsImZvckVhY2giLCJpbmRleCIsInN0ZXBHcmFwaCIsInRyaW1GaXJzdE5vZGUiLCJ0cmltTGFzdE5vZGUiLCJleHRlbmQiLCJzdGVwRmlyc3ROb2RlIiwiZmlyc3ROb2RlIiwibGFzdE5vZGUiLCJpc1J1bm5hYmxlU2VxdWVuY2UiLCJydW5uYWJsZXMiLCJuYW1lT3JGaWVsZHMiLCJleHRyYSIsInNsaWNlIiwiZ2V0U3RlcHNLZXlzIiwicHJvbWlzZXMiLCJfdHJhbnNmb3JtIiwiaW5wdXRDb3BpZXMiLCJ0YXNrcyIsIk1hcCIsImdlbiIsIm5leHQiLCJ0aGVuIiwic2l6ZSIsInJhY2UiLCJ2YWx1ZXMiLCJkZWxldGUiLCJkb25lIiwic2V0IiwiUnVubmFibGVUcmFjZWFibGUiLCJpdGVtIiwiYXNzZXJ0Tm9uVHJhY2VhYmxlRnVuY3Rpb24iLCJSdW5uYWJsZUxhbWJkYSIsInJlc29sdmUiLCJyZWplY3QiLCJjaGlsZENvbmZpZyIsInJ1bldpdGhDb25maWciLCJyZXMiLCJSdW5uYWJsZVBhcmFsbGVsIiwiZmFsbGJhY2siLCJvdGhlckNvbmZpZ0ZpZWxkcyIsImZpcnN0RXJyb3IiLCJvcmlnaW5hbFN0cmVhbSIsIm1hcHBlciIsIm1hcHBlclJlc3VsdCIsIm1hcHBlcktleXMiLCJmb3JQYXNzdGhyb3VnaCIsImZvck1hcHBlciIsIm1hcHBlck91dHB1dCIsImZpcnN0TWFwcGVyQ2h1bmtQcm9taXNlIiwiZmlsdGVyZWQiLCJpbmNsdWRlcyIsIl9waWNrIiwicGlja2VkIiwidiIsIlJ1bm5hYmxlVG9vbExpa2UiLCJzZXF1ZW5jZSIsInRvb2xJbnB1dCIsImFyZ3MiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVzY3JpcHRpb24iLCJvYmplY3QiLCJzdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/branch.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/branch.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnableBranch: () => (/* binding */ RunnableBranch)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n\n\n\n/**\n * Class that represents a runnable branch. The RunnableBranch is\n * initialized with an array of branches and a default branch. When invoked,\n * it evaluates the condition of each branch in order and executes the\n * corresponding branch if the condition is true. If none of the conditions\n * are true, it executes the default branch.\n * @example\n * ```typescript\n * const branch = RunnableBranch.from([\n *   [\n *     (x: { topic: string; question: string }) =>\n *       x.topic.toLowerCase().includes(\"anthropic\"),\n *     anthropicChain,\n *   ],\n *   [\n *     (x: { topic: string; question: string }) =>\n *       x.topic.toLowerCase().includes(\"langchain\"),\n *     langChainChain,\n *   ],\n *   generalChain,\n * ]);\n *\n * const fullChain = RunnableSequence.from([\n *   {\n *     topic: classificationChain,\n *     question: (input: { question: string }) => input.question,\n *   },\n *   branch,\n * ]);\n *\n * const result = await fullChain.invoke({\n *   question: \"how do I use LangChain?\",\n * });\n * ```\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass RunnableBranch extends _base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    static lc_name() {\n        return \"RunnableBranch\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"default\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"branches\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.branches = fields.branches;\n        this.default = fields.default;\n    }\n    /**\n     * Convenience method for instantiating a RunnableBranch from\n     * RunnableLikes (objects, functions, or Runnables).\n     *\n     * Each item in the input except for the last one should be a\n     * tuple with two items. The first is a \"condition\" RunnableLike that\n     * returns \"true\" if the second RunnableLike in the tuple should run.\n     *\n     * The final item in the input should be a RunnableLike that acts as a\n     * default branch if no other branches match.\n     *\n     * @example\n     * ```ts\n     * import { RunnableBranch } from \"@langchain/core/runnables\";\n     *\n     * const branch = RunnableBranch.from([\n     *   [(x: number) => x > 0, (x: number) => x + 1],\n     *   [(x: number) => x < 0, (x: number) => x - 1],\n     *   (x: number) => x\n     * ]);\n     * ```\n     * @param branches An array where the every item except the last is a tuple of [condition, runnable]\n     *   pairs. The last item is a default runnable which is invoked if no other condition matches.\n     * @returns A new RunnableBranch.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from(branches) {\n        if (branches.length < 1) {\n            throw new Error(\"RunnableBranch requires at least one branch\");\n        }\n        const branchLikes = branches.slice(0, -1);\n        const coercedBranches = branchLikes.map(([condition, runnable])=>[\n                (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(condition),\n                (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(runnable)\n            ]);\n        const defaultBranch = (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(branches[branches.length - 1]);\n        return new this({\n            branches: coercedBranches,\n            default: defaultBranch\n        });\n    }\n    async _invoke(input, config, runManager) {\n        let result;\n        for(let i = 0; i < this.branches.length; i += 1){\n            const [condition, branchRunnable] = this.branches[i];\n            const conditionValue = await condition.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                callbacks: runManager?.getChild(`condition:${i + 1}`)\n            }));\n            if (conditionValue) {\n                result = await branchRunnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`branch:${i + 1}`)\n                }));\n                break;\n            }\n        }\n        if (!result) {\n            result = await this.default.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                callbacks: runManager?.getChild(\"branch:default\")\n            }));\n        }\n        return result;\n    }\n    async invoke(input, config = {}) {\n        return this._callWithConfig(this._invoke, input, config);\n    }\n    async *_streamIterator(input, config) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToDict)(input, \"input\"), config?.runId, undefined, undefined, undefined, config?.runName);\n        let finalOutput;\n        let finalOutputSupported = true;\n        let stream;\n        try {\n            for(let i = 0; i < this.branches.length; i += 1){\n                const [condition, branchRunnable] = this.branches[i];\n                const conditionValue = await condition.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`condition:${i + 1}`)\n                }));\n                if (conditionValue) {\n                    stream = await branchRunnable.stream(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                        callbacks: runManager?.getChild(`branch:${i + 1}`)\n                    }));\n                    for await (const chunk of stream){\n                        yield chunk;\n                        if (finalOutputSupported) {\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                try {\n                                    finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.concat)(finalOutput, chunk);\n                                } catch (e) {\n                                    finalOutput = undefined;\n                                    finalOutputSupported = false;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                }\n            }\n            if (stream === undefined) {\n                stream = await this.default.stream(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(\"branch:default\")\n                }));\n                for await (const chunk of stream){\n                    yield chunk;\n                    if (finalOutputSupported) {\n                        if (finalOutput === undefined) {\n                            finalOutput = chunk;\n                        } else {\n                            try {\n                                finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.concat)(finalOutput, chunk);\n                            } catch (e) {\n                                finalOutput = undefined;\n                                finalOutputSupported = false;\n                            }\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {});\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2JyYW5jaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdFO0FBQ0E7QUFDNUI7QUFDNUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FrQ0MsR0FDRCw4REFBOEQ7QUFDdkQsTUFBTU0sdUJBQXVCTiw4Q0FBUUE7SUFDeEMsT0FBT08sVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7YUFBWTtRQUMxQztRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxRQUFRLEdBQUdQLE9BQU9PLFFBQVE7UUFDL0IsSUFBSSxDQUFDQyxPQUFPLEdBQUdSLE9BQU9RLE9BQU87SUFDakM7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBd0JDLEdBQ0QsOERBQThEO0lBQzlELE9BQU9DLEtBQUtGLFFBQVEsRUFBRTtRQUNsQixJQUFJQSxTQUFTRyxNQUFNLEdBQUcsR0FBRztZQUNyQixNQUFNLElBQUlDLE1BQU07UUFDcEI7UUFDQSxNQUFNQyxjQUFjTCxTQUFTTSxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQ3ZDLE1BQU1DLGtCQUFrQkYsWUFBWUcsR0FBRyxDQUFDLENBQUMsQ0FBQ0MsV0FBV0MsU0FBUyxHQUFLO2dCQUMvRHhCLDJEQUFpQkEsQ0FBQ3VCO2dCQUNsQnZCLDJEQUFpQkEsQ0FBQ3dCO2FBQ3JCO1FBQ0QsTUFBTUMsZ0JBQWdCekIsMkRBQWlCQSxDQUFDYyxRQUFRLENBQUNBLFNBQVNHLE1BQU0sR0FBRyxFQUFFO1FBQ3JFLE9BQU8sSUFBSSxJQUFJLENBQUM7WUFDWkgsVUFBVU87WUFDVk4sU0FBU1U7UUFDYjtJQUNKO0lBQ0EsTUFBTUMsUUFBUUMsS0FBSyxFQUFFQyxNQUFNLEVBQUVDLFVBQVUsRUFBRTtRQUNyQyxJQUFJQztRQUNKLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ0csTUFBTSxFQUFFYyxLQUFLLEVBQUc7WUFDOUMsTUFBTSxDQUFDUixXQUFXUyxlQUFlLEdBQUcsSUFBSSxDQUFDbEIsUUFBUSxDQUFDaUIsRUFBRTtZQUNwRCxNQUFNRSxpQkFBaUIsTUFBTVYsVUFBVVcsTUFBTSxDQUFDUCxPQUFPekIsdURBQVdBLENBQUMwQixRQUFRO2dCQUNyRU8sV0FBV04sWUFBWU8sU0FBUyxDQUFDLFVBQVUsRUFBRUwsSUFBSSxFQUFFLENBQUM7WUFDeEQ7WUFDQSxJQUFJRSxnQkFBZ0I7Z0JBQ2hCSCxTQUFTLE1BQU1FLGVBQWVFLE1BQU0sQ0FBQ1AsT0FBT3pCLHVEQUFXQSxDQUFDMEIsUUFBUTtvQkFDNURPLFdBQVdOLFlBQVlPLFNBQVMsQ0FBQyxPQUFPLEVBQUVMLElBQUksRUFBRSxDQUFDO2dCQUNyRDtnQkFDQTtZQUNKO1FBQ0o7UUFDQSxJQUFJLENBQUNELFFBQVE7WUFDVEEsU0FBUyxNQUFNLElBQUksQ0FBQ2YsT0FBTyxDQUFDbUIsTUFBTSxDQUFDUCxPQUFPekIsdURBQVdBLENBQUMwQixRQUFRO2dCQUMxRE8sV0FBV04sWUFBWU8sU0FBUztZQUNwQztRQUNKO1FBQ0EsT0FBT047SUFDWDtJQUNBLE1BQU1JLE9BQU9QLEtBQUssRUFBRUMsU0FBUyxDQUFDLENBQUMsRUFBRTtRQUM3QixPQUFPLElBQUksQ0FBQ1MsZUFBZSxDQUFDLElBQUksQ0FBQ1gsT0FBTyxFQUFFQyxPQUFPQztJQUNyRDtJQUNBLE9BQU9VLGdCQUFnQlgsS0FBSyxFQUFFQyxNQUFNLEVBQUU7UUFDbEMsTUFBTVcsbUJBQW1CLE1BQU10Qyx1RUFBMkJBLENBQUMyQjtRQUMzRCxNQUFNQyxhQUFhLE1BQU1VLGtCQUFrQkMsaUJBQWlCLElBQUksQ0FBQ0MsTUFBTSxJQUFJMUMsdURBQWFBLENBQUM0QixPQUFPLFVBQVVDLFFBQVFjLE9BQU9DLFdBQVdBLFdBQVdBLFdBQVdmLFFBQVFnQjtRQUNsSyxJQUFJQztRQUNKLElBQUlDLHVCQUF1QjtRQUMzQixJQUFJQztRQUNKLElBQUk7WUFDQSxJQUFLLElBQUloQixJQUFJLEdBQUdBLElBQUksSUFBSSxDQUFDakIsUUFBUSxDQUFDRyxNQUFNLEVBQUVjLEtBQUssRUFBRztnQkFDOUMsTUFBTSxDQUFDUixXQUFXUyxlQUFlLEdBQUcsSUFBSSxDQUFDbEIsUUFBUSxDQUFDaUIsRUFBRTtnQkFDcEQsTUFBTUUsaUJBQWlCLE1BQU1WLFVBQVVXLE1BQU0sQ0FBQ1AsT0FBT3pCLHVEQUFXQSxDQUFDMEIsUUFBUTtvQkFDckVPLFdBQVdOLFlBQVlPLFNBQVMsQ0FBQyxVQUFVLEVBQUVMLElBQUksRUFBRSxDQUFDO2dCQUN4RDtnQkFDQSxJQUFJRSxnQkFBZ0I7b0JBQ2hCYyxTQUFTLE1BQU1mLGVBQWVlLE1BQU0sQ0FBQ3BCLE9BQU96Qix1REFBV0EsQ0FBQzBCLFFBQVE7d0JBQzVETyxXQUFXTixZQUFZTyxTQUFTLENBQUMsT0FBTyxFQUFFTCxJQUFJLEVBQUUsQ0FBQztvQkFDckQ7b0JBQ0EsV0FBVyxNQUFNaUIsU0FBU0QsT0FBUTt3QkFDOUIsTUFBTUM7d0JBQ04sSUFBSUYsc0JBQXNCOzRCQUN0QixJQUFJRCxnQkFBZ0JGLFdBQVc7Z0NBQzNCRSxjQUFjRzs0QkFDbEIsT0FDSztnQ0FDRCxJQUFJO29DQUNBSCxjQUFjMUMsd0RBQU1BLENBQUMwQyxhQUFhRztnQ0FDdEMsRUFDQSxPQUFPQyxHQUFHO29DQUNOSixjQUFjRjtvQ0FDZEcsdUJBQXVCO2dDQUMzQjs0QkFDSjt3QkFDSjtvQkFDSjtvQkFDQTtnQkFDSjtZQUNKO1lBQ0EsSUFBSUMsV0FBV0osV0FBVztnQkFDdEJJLFNBQVMsTUFBTSxJQUFJLENBQUNoQyxPQUFPLENBQUNnQyxNQUFNLENBQUNwQixPQUFPekIsdURBQVdBLENBQUMwQixRQUFRO29CQUMxRE8sV0FBV04sWUFBWU8sU0FBUztnQkFDcEM7Z0JBQ0EsV0FBVyxNQUFNWSxTQUFTRCxPQUFRO29CQUM5QixNQUFNQztvQkFDTixJQUFJRixzQkFBc0I7d0JBQ3RCLElBQUlELGdCQUFnQkYsV0FBVzs0QkFDM0JFLGNBQWNHO3dCQUNsQixPQUNLOzRCQUNELElBQUk7Z0NBQ0FILGNBQWMxQyx3REFBTUEsQ0FBQzBDLGFBQWFHOzRCQUN0QyxFQUNBLE9BQU9DLEdBQUc7Z0NBQ05KLGNBQWNGO2dDQUNkRyx1QkFBdUI7NEJBQzNCO3dCQUNKO29CQUNKO2dCQUNKO1lBQ0o7UUFDSixFQUNBLE9BQU9HLEdBQUc7WUFDTixNQUFNcEIsWUFBWXFCLGlCQUFpQkQ7WUFDbkMsTUFBTUE7UUFDVjtRQUNBLE1BQU1wQixZQUFZc0IsZUFBZU4sZUFBZSxDQUFDO0lBQ3JEO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9icmFuY2guanM/NDRhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSwgX2NvZXJjZVRvRGljdCwgX2NvZXJjZVRvUnVubmFibGUsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnLCBwYXRjaENvbmZpZywgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcbmltcG9ydCB7IGNvbmNhdCB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbi8qKlxuICogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgcnVubmFibGUgYnJhbmNoLiBUaGUgUnVubmFibGVCcmFuY2ggaXNcbiAqIGluaXRpYWxpemVkIHdpdGggYW4gYXJyYXkgb2YgYnJhbmNoZXMgYW5kIGEgZGVmYXVsdCBicmFuY2guIFdoZW4gaW52b2tlZCxcbiAqIGl0IGV2YWx1YXRlcyB0aGUgY29uZGl0aW9uIG9mIGVhY2ggYnJhbmNoIGluIG9yZGVyIGFuZCBleGVjdXRlcyB0aGVcbiAqIGNvcnJlc3BvbmRpbmcgYnJhbmNoIGlmIHRoZSBjb25kaXRpb24gaXMgdHJ1ZS4gSWYgbm9uZSBvZiB0aGUgY29uZGl0aW9uc1xuICogYXJlIHRydWUsIGl0IGV4ZWN1dGVzIHRoZSBkZWZhdWx0IGJyYW5jaC5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBicmFuY2ggPSBSdW5uYWJsZUJyYW5jaC5mcm9tKFtcbiAqICAgW1xuICogICAgICh4OiB7IHRvcGljOiBzdHJpbmc7IHF1ZXN0aW9uOiBzdHJpbmcgfSkgPT5cbiAqICAgICAgIHgudG9waWMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImFudGhyb3BpY1wiKSxcbiAqICAgICBhbnRocm9waWNDaGFpbixcbiAqICAgXSxcbiAqICAgW1xuICogICAgICh4OiB7IHRvcGljOiBzdHJpbmc7IHF1ZXN0aW9uOiBzdHJpbmcgfSkgPT5cbiAqICAgICAgIHgudG9waWMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImxhbmdjaGFpblwiKSxcbiAqICAgICBsYW5nQ2hhaW5DaGFpbixcbiAqICAgXSxcbiAqICAgZ2VuZXJhbENoYWluLFxuICogXSk7XG4gKlxuICogY29uc3QgZnVsbENoYWluID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtcbiAqICAge1xuICogICAgIHRvcGljOiBjbGFzc2lmaWNhdGlvbkNoYWluLFxuICogICAgIHF1ZXN0aW9uOiAoaW5wdXQ6IHsgcXVlc3Rpb246IHN0cmluZyB9KSA9PiBpbnB1dC5xdWVzdGlvbixcbiAqICAgfSxcbiAqICAgYnJhbmNoLFxuICogXSk7XG4gKlxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZnVsbENoYWluLmludm9rZSh7XG4gKiAgIHF1ZXN0aW9uOiBcImhvdyBkbyBJIHVzZSBMYW5nQ2hhaW4/XCIsXG4gKiB9KTtcbiAqIGBgYFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlQnJhbmNoIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUJyYW5jaFwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZWZhdWx0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJyYW5jaGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYnJhbmNoZXMgPSBmaWVsZHMuYnJhbmNoZXM7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IGZpZWxkcy5kZWZhdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIGluc3RhbnRpYXRpbmcgYSBSdW5uYWJsZUJyYW5jaCBmcm9tXG4gICAgICogUnVubmFibGVMaWtlcyAob2JqZWN0cywgZnVuY3Rpb25zLCBvciBSdW5uYWJsZXMpLlxuICAgICAqXG4gICAgICogRWFjaCBpdGVtIGluIHRoZSBpbnB1dCBleGNlcHQgZm9yIHRoZSBsYXN0IG9uZSBzaG91bGQgYmUgYVxuICAgICAqIHR1cGxlIHdpdGggdHdvIGl0ZW1zLiBUaGUgZmlyc3QgaXMgYSBcImNvbmRpdGlvblwiIFJ1bm5hYmxlTGlrZSB0aGF0XG4gICAgICogcmV0dXJucyBcInRydWVcIiBpZiB0aGUgc2Vjb25kIFJ1bm5hYmxlTGlrZSBpbiB0aGUgdHVwbGUgc2hvdWxkIHJ1bi5cbiAgICAgKlxuICAgICAqIFRoZSBmaW5hbCBpdGVtIGluIHRoZSBpbnB1dCBzaG91bGQgYmUgYSBSdW5uYWJsZUxpa2UgdGhhdCBhY3RzIGFzIGFcbiAgICAgKiBkZWZhdWx0IGJyYW5jaCBpZiBubyBvdGhlciBicmFuY2hlcyBtYXRjaC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBpbXBvcnQgeyBSdW5uYWJsZUJyYW5jaCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG4gICAgICpcbiAgICAgKiBjb25zdCBicmFuY2ggPSBSdW5uYWJsZUJyYW5jaC5mcm9tKFtcbiAgICAgKiAgIFsoeDogbnVtYmVyKSA9PiB4ID4gMCwgKHg6IG51bWJlcikgPT4geCArIDFdLFxuICAgICAqICAgWyh4OiBudW1iZXIpID0+IHggPCAwLCAoeDogbnVtYmVyKSA9PiB4IC0gMV0sXG4gICAgICogICAoeDogbnVtYmVyKSA9PiB4XG4gICAgICogXSk7XG4gICAgICogYGBgXG4gICAgICogQHBhcmFtIGJyYW5jaGVzIEFuIGFycmF5IHdoZXJlIHRoZSBldmVyeSBpdGVtIGV4Y2VwdCB0aGUgbGFzdCBpcyBhIHR1cGxlIG9mIFtjb25kaXRpb24sIHJ1bm5hYmxlXVxuICAgICAqICAgcGFpcnMuIFRoZSBsYXN0IGl0ZW0gaXMgYSBkZWZhdWx0IHJ1bm5hYmxlIHdoaWNoIGlzIGludm9rZWQgaWYgbm8gb3RoZXIgY29uZGl0aW9uIG1hdGNoZXMuXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVCcmFuY2guXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgZnJvbShicmFuY2hlcykge1xuICAgICAgICBpZiAoYnJhbmNoZXMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUnVubmFibGVCcmFuY2ggcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGJyYW5jaFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBicmFuY2hMaWtlcyA9IGJyYW5jaGVzLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgY29uc3QgY29lcmNlZEJyYW5jaGVzID0gYnJhbmNoTGlrZXMubWFwKChbY29uZGl0aW9uLCBydW5uYWJsZV0pID0+IFtcbiAgICAgICAgICAgIF9jb2VyY2VUb1J1bm5hYmxlKGNvbmRpdGlvbiksXG4gICAgICAgICAgICBfY29lcmNlVG9SdW5uYWJsZShydW5uYWJsZSksXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBkZWZhdWx0QnJhbmNoID0gX2NvZXJjZVRvUnVubmFibGUoYnJhbmNoZXNbYnJhbmNoZXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoe1xuICAgICAgICAgICAgYnJhbmNoZXM6IGNvZXJjZWRCcmFuY2hlcyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IGRlZmF1bHRCcmFuY2gsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJyYW5jaGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBbY29uZGl0aW9uLCBicmFuY2hSdW5uYWJsZV0gPSB0aGlzLmJyYW5jaGVzW2ldO1xuICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uVmFsdWUgPSBhd2FpdCBjb25kaXRpb24uaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBjb25kaXRpb246JHtpICsgMX1gKSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmIChjb25kaXRpb25WYWx1ZSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGJyYW5jaFJ1bm5hYmxlLmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYGJyYW5jaDoke2kgKyAxfWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5kZWZhdWx0Lmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChcImJyYW5jaDpkZWZhdWx0XCIpLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgY29uZmlnID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX2ludm9rZSwgaW5wdXQsIGNvbmZpZyk7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIGNvbmZpZykge1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIGNvbmZpZz8ucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSk7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgbGV0IHN0cmVhbTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5icmFuY2hlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtjb25kaXRpb24sIGJyYW5jaFJ1bm5hYmxlXSA9IHRoaXMuYnJhbmNoZXNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uVmFsdWUgPSBhd2FpdCBjb25kaXRpb24uaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgY29uZGl0aW9uOiR7aSArIDF9YCksXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb25WYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0gPSBhd2FpdCBicmFuY2hSdW5uYWJsZS5zdHJlYW0oaW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgYnJhbmNoOiR7aSArIDF9YCksXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0cmVhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtID0gYXdhaXQgdGhpcy5kZWZhdWx0LnN0cmVhbShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoXCJicmFuY2g6ZGVmYXVsdFwiKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChmaW5hbE91dHB1dCA/PyB7fSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlJ1bm5hYmxlIiwiX2NvZXJjZVRvRGljdCIsIl9jb2VyY2VUb1J1bm5hYmxlIiwiZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnIiwicGF0Y2hDb25maWciLCJjb25jYXQiLCJSdW5uYWJsZUJyYW5jaCIsImxjX25hbWUiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJicmFuY2hlcyIsImRlZmF1bHQiLCJmcm9tIiwibGVuZ3RoIiwiRXJyb3IiLCJicmFuY2hMaWtlcyIsInNsaWNlIiwiY29lcmNlZEJyYW5jaGVzIiwibWFwIiwiY29uZGl0aW9uIiwicnVubmFibGUiLCJkZWZhdWx0QnJhbmNoIiwiX2ludm9rZSIsImlucHV0IiwiY29uZmlnIiwicnVuTWFuYWdlciIsInJlc3VsdCIsImkiLCJicmFuY2hSdW5uYWJsZSIsImNvbmRpdGlvblZhbHVlIiwiaW52b2tlIiwiY2FsbGJhY2tzIiwiZ2V0Q2hpbGQiLCJfY2FsbFdpdGhDb25maWciLCJfc3RyZWFtSXRlcmF0b3IiLCJjYWxsYmFja01hbmFnZXJfIiwiaGFuZGxlQ2hhaW5TdGFydCIsInRvSlNPTiIsInJ1bklkIiwidW5kZWZpbmVkIiwicnVuTmFtZSIsImZpbmFsT3V0cHV0IiwiZmluYWxPdXRwdXRTdXBwb3J0ZWQiLCJzdHJlYW0iLCJjaHVuayIsImUiLCJoYW5kbGVDaGFpbkVycm9yIiwiaGFuZGxlQ2hhaW5FbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/branch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/config.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/config.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_RECURSION_LIMIT: () => (/* binding */ DEFAULT_RECURSION_LIMIT),\n/* harmony export */   ensureConfig: () => (/* binding */ ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* binding */ getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* binding */ mergeConfigs),\n/* harmony export */   patchConfig: () => (/* binding */ patchConfig),\n/* harmony export */   pickRunnableConfigKeys: () => (/* binding */ pickRunnableConfigKeys)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\n\nconst DEFAULT_RECURSION_LIMIT = 25;\nasync function getCallbackManagerForConfig(config) {\n    return _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager._configureSync(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n}\nfunction mergeConfigs(...configs) {\n    // We do not want to call ensureConfig on the empty state here as this may cause\n    // double loading of callbacks if async local storage is being used.\n    const copy = {};\n    for (const options of configs.filter((c)=>!!c)){\n        for (const key of Object.keys(options)){\n            if (key === \"metadata\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"tags\") {\n                const baseKeys = copy[key] ?? [];\n                copy[key] = [\n                    ...new Set(baseKeys.concat(options[key] ?? []))\n                ];\n            } else if (key === \"configurable\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"timeout\") {\n                if (copy.timeout === undefined) {\n                    copy.timeout = options.timeout;\n                } else if (options.timeout !== undefined) {\n                    copy.timeout = Math.min(copy.timeout, options.timeout);\n                }\n            } else if (key === \"signal\") {\n                if (copy.signal === undefined) {\n                    copy.signal = options.signal;\n                } else if (options.signal !== undefined) {\n                    if (\"any\" in AbortSignal) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        copy.signal = AbortSignal.any([\n                            copy.signal,\n                            options.signal\n                        ]);\n                    } else {\n                        copy.signal = options.signal;\n                    }\n                }\n            } else if (key === \"callbacks\") {\n                const baseCallbacks = copy.callbacks;\n                const providedCallbacks = options.callbacks;\n                // callbacks can be either undefined, Array<handler> or manager\n                // so merging two callbacks values has 6 cases\n                if (Array.isArray(providedCallbacks)) {\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        copy.callbacks = baseCallbacks.concat(providedCallbacks);\n                    } else {\n                        // baseCallbacks is a manager\n                        const manager = baseCallbacks.copy();\n                        for (const callback of providedCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    }\n                } else if (providedCallbacks) {\n                    // providedCallbacks is a manager\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        const manager = providedCallbacks.copy();\n                        for (const callback of baseCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    } else {\n                        // baseCallbacks is also a manager\n                        copy.callbacks = new _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager(providedCallbacks._parentRunId, {\n                            handlers: baseCallbacks.handlers.concat(providedCallbacks.handlers),\n                            inheritableHandlers: baseCallbacks.inheritableHandlers.concat(providedCallbacks.inheritableHandlers),\n                            tags: Array.from(new Set(baseCallbacks.tags.concat(providedCallbacks.tags))),\n                            inheritableTags: Array.from(new Set(baseCallbacks.inheritableTags.concat(providedCallbacks.inheritableTags))),\n                            metadata: {\n                                ...baseCallbacks.metadata,\n                                ...providedCallbacks.metadata\n                            }\n                        });\n                    }\n                }\n            } else {\n                const typedKey = key;\n                copy[typedKey] = options[typedKey] ?? copy[typedKey];\n            }\n        }\n    }\n    return copy;\n}\nconst PRIMITIVES = new Set([\n    \"string\",\n    \"number\",\n    \"boolean\"\n]);\n/**\n * Ensure that a passed config is an object with all required keys present.\n */ function ensureConfig(config) {\n    const implicitConfig = _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n    let empty = {\n        tags: [],\n        metadata: {},\n        recursionLimit: 25,\n        runId: undefined\n    };\n    if (implicitConfig) {\n        // Don't allow runId and runName to be loaded implicitly, as this can cause\n        // child runs to improperly inherit their parents' run ids.\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { runId, runName, ...rest } = implicitConfig;\n        empty = Object.entries(rest).reduce(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (currentConfig, [key, value])=>{\n            if (value !== undefined) {\n                // eslint-disable-next-line no-param-reassign\n                currentConfig[key] = value;\n            }\n            return currentConfig;\n        }, empty);\n    }\n    if (config) {\n        empty = Object.entries(config).reduce(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (currentConfig, [key, value])=>{\n            if (value !== undefined) {\n                // eslint-disable-next-line no-param-reassign\n                currentConfig[key] = value;\n            }\n            return currentConfig;\n        }, empty);\n    }\n    if (empty?.configurable) {\n        for (const key of Object.keys(empty.configurable)){\n            if (PRIMITIVES.has(typeof empty.configurable[key]) && !empty.metadata?.[key]) {\n                if (!empty.metadata) {\n                    empty.metadata = {};\n                }\n                empty.metadata[key] = empty.configurable[key];\n            }\n        }\n    }\n    if (empty.timeout !== undefined) {\n        if (empty.timeout <= 0) {\n            throw new Error(\"Timeout must be a positive number\");\n        }\n        const timeoutSignal = AbortSignal.timeout(empty.timeout);\n        if (empty.signal !== undefined) {\n            if (\"any\" in AbortSignal) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                empty.signal = AbortSignal.any([\n                    empty.signal,\n                    timeoutSignal\n                ]);\n            }\n        } else {\n            empty.signal = timeoutSignal;\n        }\n        delete empty.timeout;\n    }\n    return empty;\n}\n/**\n * Helper function that patches runnable configs with updated properties.\n */ function patchConfig(config = {}, { callbacks, maxConcurrency, recursionLimit, runName, configurable, runId } = {}) {\n    const newConfig = ensureConfig(config);\n    if (callbacks !== undefined) {\n        /**\n         * If we're replacing callbacks we need to unset runName\n         * since that should apply only to the same run as the original callbacks\n         */ delete newConfig.runName;\n        newConfig.callbacks = callbacks;\n    }\n    if (recursionLimit !== undefined) {\n        newConfig.recursionLimit = recursionLimit;\n    }\n    if (maxConcurrency !== undefined) {\n        newConfig.maxConcurrency = maxConcurrency;\n    }\n    if (runName !== undefined) {\n        newConfig.runName = runName;\n    }\n    if (configurable !== undefined) {\n        newConfig.configurable = {\n            ...newConfig.configurable,\n            ...configurable\n        };\n    }\n    if (runId !== undefined) {\n        delete newConfig.runId;\n    }\n    return newConfig;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction pickRunnableConfigKeys(config) {\n    return config ? {\n        configurable: config.configurable,\n        recursionLimit: config.recursionLimit,\n        callbacks: config.callbacks,\n        tags: config.tags,\n        metadata: config.metadata,\n        maxConcurrency: config.maxConcurrency,\n        timeout: config.timeout,\n        signal: config.signal\n    } : undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2NvbmZpZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF5RTtBQUNHO0FBQ3JFLE1BQU1HLDBCQUEwQixHQUFHO0FBQ25DLGVBQWVDLDRCQUE0QkMsTUFBTTtJQUNwRCxPQUFPTCxrRUFBZUEsQ0FBQ00sY0FBYyxDQUFDRCxRQUFRRSxXQUFXQyxXQUFXSCxRQUFRSSxNQUFNRCxXQUFXSCxRQUFRSztBQUN6RztBQUNPLFNBQVNDLGFBQWEsR0FBR0MsT0FBTztJQUNuQyxnRkFBZ0Y7SUFDaEYsb0VBQW9FO0lBQ3BFLE1BQU1DLE9BQU8sQ0FBQztJQUNkLEtBQUssTUFBTUMsV0FBV0YsUUFBUUcsTUFBTSxDQUFDLENBQUNDLElBQU0sQ0FBQyxDQUFDQSxHQUFJO1FBQzlDLEtBQUssTUFBTUMsT0FBT0MsT0FBT0MsSUFBSSxDQUFDTCxTQUFVO1lBQ3BDLElBQUlHLFFBQVEsWUFBWTtnQkFDcEJKLElBQUksQ0FBQ0ksSUFBSSxHQUFHO29CQUFFLEdBQUdKLElBQUksQ0FBQ0ksSUFBSTtvQkFBRSxHQUFHSCxPQUFPLENBQUNHLElBQUk7Z0JBQUM7WUFDaEQsT0FDSyxJQUFJQSxRQUFRLFFBQVE7Z0JBQ3JCLE1BQU1HLFdBQVdQLElBQUksQ0FBQ0ksSUFBSSxJQUFJLEVBQUU7Z0JBQ2hDSixJQUFJLENBQUNJLElBQUksR0FBRzt1QkFBSSxJQUFJSSxJQUFJRCxTQUFTRSxNQUFNLENBQUNSLE9BQU8sQ0FBQ0csSUFBSSxJQUFJLEVBQUU7aUJBQUc7WUFDakUsT0FDSyxJQUFJQSxRQUFRLGdCQUFnQjtnQkFDN0JKLElBQUksQ0FBQ0ksSUFBSSxHQUFHO29CQUFFLEdBQUdKLElBQUksQ0FBQ0ksSUFBSTtvQkFBRSxHQUFHSCxPQUFPLENBQUNHLElBQUk7Z0JBQUM7WUFDaEQsT0FDSyxJQUFJQSxRQUFRLFdBQVc7Z0JBQ3hCLElBQUlKLEtBQUtVLE9BQU8sS0FBS2YsV0FBVztvQkFDNUJLLEtBQUtVLE9BQU8sR0FBR1QsUUFBUVMsT0FBTztnQkFDbEMsT0FDSyxJQUFJVCxRQUFRUyxPQUFPLEtBQUtmLFdBQVc7b0JBQ3BDSyxLQUFLVSxPQUFPLEdBQUdDLEtBQUtDLEdBQUcsQ0FBQ1osS0FBS1UsT0FBTyxFQUFFVCxRQUFRUyxPQUFPO2dCQUN6RDtZQUNKLE9BQ0ssSUFBSU4sUUFBUSxVQUFVO2dCQUN2QixJQUFJSixLQUFLYSxNQUFNLEtBQUtsQixXQUFXO29CQUMzQkssS0FBS2EsTUFBTSxHQUFHWixRQUFRWSxNQUFNO2dCQUNoQyxPQUNLLElBQUlaLFFBQVFZLE1BQU0sS0FBS2xCLFdBQVc7b0JBQ25DLElBQUksU0FBU21CLGFBQWE7d0JBQ3RCLDhEQUE4RDt3QkFDOURkLEtBQUthLE1BQU0sR0FBR0MsWUFBWUMsR0FBRyxDQUFDOzRCQUMxQmYsS0FBS2EsTUFBTTs0QkFDWFosUUFBUVksTUFBTTt5QkFDakI7b0JBQ0wsT0FDSzt3QkFDRGIsS0FBS2EsTUFBTSxHQUFHWixRQUFRWSxNQUFNO29CQUNoQztnQkFDSjtZQUNKLE9BQ0ssSUFBSVQsUUFBUSxhQUFhO2dCQUMxQixNQUFNWSxnQkFBZ0JoQixLQUFLTixTQUFTO2dCQUNwQyxNQUFNdUIsb0JBQW9CaEIsUUFBUVAsU0FBUztnQkFDM0MsK0RBQStEO2dCQUMvRCw4Q0FBOEM7Z0JBQzlDLElBQUl3QixNQUFNQyxPQUFPLENBQUNGLG9CQUFvQjtvQkFDbEMsSUFBSSxDQUFDRCxlQUFlO3dCQUNoQmhCLEtBQUtOLFNBQVMsR0FBR3VCO29CQUNyQixPQUNLLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0gsZ0JBQWdCO3dCQUNuQ2hCLEtBQUtOLFNBQVMsR0FBR3NCLGNBQWNQLE1BQU0sQ0FBQ1E7b0JBQzFDLE9BQ0s7d0JBQ0QsNkJBQTZCO3dCQUM3QixNQUFNRyxVQUFVSixjQUFjaEIsSUFBSTt3QkFDbEMsS0FBSyxNQUFNcUIsWUFBWUosa0JBQW1COzRCQUN0Q0csUUFBUUUsVUFBVSxDQUFDbEMsb0VBQWFBLENBQUNpQyxXQUFXO3dCQUNoRDt3QkFDQXJCLEtBQUtOLFNBQVMsR0FBRzBCO29CQUNyQjtnQkFDSixPQUNLLElBQUlILG1CQUFtQjtvQkFDeEIsaUNBQWlDO29CQUNqQyxJQUFJLENBQUNELGVBQWU7d0JBQ2hCaEIsS0FBS04sU0FBUyxHQUFHdUI7b0JBQ3JCLE9BQ0ssSUFBSUMsTUFBTUMsT0FBTyxDQUFDSCxnQkFBZ0I7d0JBQ25DLE1BQU1JLFVBQVVILGtCQUFrQmpCLElBQUk7d0JBQ3RDLEtBQUssTUFBTXFCLFlBQVlMLGNBQWU7NEJBQ2xDSSxRQUFRRSxVQUFVLENBQUNsQyxvRUFBYUEsQ0FBQ2lDLFdBQVc7d0JBQ2hEO3dCQUNBckIsS0FBS04sU0FBUyxHQUFHMEI7b0JBQ3JCLE9BQ0s7d0JBQ0Qsa0NBQWtDO3dCQUNsQ3BCLEtBQUtOLFNBQVMsR0FBRyxJQUFJUCxrRUFBZUEsQ0FBQzhCLGtCQUFrQk0sWUFBWSxFQUFFOzRCQUNqRUMsVUFBVVIsY0FBY1EsUUFBUSxDQUFDZixNQUFNLENBQUNRLGtCQUFrQk8sUUFBUTs0QkFDbEVDLHFCQUFxQlQsY0FBY1MsbUJBQW1CLENBQUNoQixNQUFNLENBQUNRLGtCQUFrQlEsbUJBQW1COzRCQUNuRzdCLE1BQU1zQixNQUFNUSxJQUFJLENBQUMsSUFBSWxCLElBQUlRLGNBQWNwQixJQUFJLENBQUNhLE1BQU0sQ0FBQ1Esa0JBQWtCckIsSUFBSTs0QkFDekUrQixpQkFBaUJULE1BQU1RLElBQUksQ0FBQyxJQUFJbEIsSUFBSVEsY0FBY1csZUFBZSxDQUFDbEIsTUFBTSxDQUFDUSxrQkFBa0JVLGVBQWU7NEJBQzFHOUIsVUFBVTtnQ0FDTixHQUFHbUIsY0FBY25CLFFBQVE7Z0NBQ3pCLEdBQUdvQixrQkFBa0JwQixRQUFROzRCQUNqQzt3QkFDSjtvQkFDSjtnQkFDSjtZQUNKLE9BQ0s7Z0JBQ0QsTUFBTStCLFdBQVd4QjtnQkFDakJKLElBQUksQ0FBQzRCLFNBQVMsR0FBRzNCLE9BQU8sQ0FBQzJCLFNBQVMsSUFBSTVCLElBQUksQ0FBQzRCLFNBQVM7WUFDeEQ7UUFDSjtJQUNKO0lBQ0EsT0FBTzVCO0FBQ1g7QUFDQSxNQUFNNkIsYUFBYSxJQUFJckIsSUFBSTtJQUFDO0lBQVU7SUFBVTtDQUFVO0FBQzFEOztDQUVDLEdBQ00sU0FBU3NCLGFBQWF0QyxNQUFNO0lBQy9CLE1BQU11QyxpQkFBaUIxQyxvRkFBa0NBLENBQUMyQyxpQkFBaUI7SUFDM0UsSUFBSUMsUUFBUTtRQUNSckMsTUFBTSxFQUFFO1FBQ1JDLFVBQVUsQ0FBQztRQUNYcUMsZ0JBQWdCO1FBQ2hCQyxPQUFPeEM7SUFDWDtJQUNBLElBQUlvQyxnQkFBZ0I7UUFDaEIsMkVBQTJFO1FBQzNFLDJEQUEyRDtRQUMzRCw2REFBNkQ7UUFDN0QsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLE9BQU8sRUFBRSxHQUFHQyxNQUFNLEdBQUdOO1FBQ3BDRSxRQUFRNUIsT0FBT2lDLE9BQU8sQ0FBQ0QsTUFBTUUsTUFBTSxDQUNuQyw4REFBOEQ7UUFDOUQsQ0FBQ0MsZUFBZSxDQUFDcEMsS0FBS3FDLE1BQU07WUFDeEIsSUFBSUEsVUFBVTlDLFdBQVc7Z0JBQ3JCLDZDQUE2QztnQkFDN0M2QyxhQUFhLENBQUNwQyxJQUFJLEdBQUdxQztZQUN6QjtZQUNBLE9BQU9EO1FBQ1gsR0FBR1A7SUFDUDtJQUNBLElBQUl6QyxRQUFRO1FBQ1J5QyxRQUFRNUIsT0FBT2lDLE9BQU8sQ0FBQzlDLFFBQVErQyxNQUFNLENBQ3JDLDhEQUE4RDtRQUM5RCxDQUFDQyxlQUFlLENBQUNwQyxLQUFLcUMsTUFBTTtZQUN4QixJQUFJQSxVQUFVOUMsV0FBVztnQkFDckIsNkNBQTZDO2dCQUM3QzZDLGFBQWEsQ0FBQ3BDLElBQUksR0FBR3FDO1lBQ3pCO1lBQ0EsT0FBT0Q7UUFDWCxHQUFHUDtJQUNQO0lBQ0EsSUFBSUEsT0FBT1MsY0FBYztRQUNyQixLQUFLLE1BQU10QyxPQUFPQyxPQUFPQyxJQUFJLENBQUMyQixNQUFNUyxZQUFZLEVBQUc7WUFDL0MsSUFBSWIsV0FBV2MsR0FBRyxDQUFDLE9BQU9WLE1BQU1TLFlBQVksQ0FBQ3RDLElBQUksS0FDN0MsQ0FBQzZCLE1BQU1wQyxRQUFRLEVBQUUsQ0FBQ08sSUFBSSxFQUFFO2dCQUN4QixJQUFJLENBQUM2QixNQUFNcEMsUUFBUSxFQUFFO29CQUNqQm9DLE1BQU1wQyxRQUFRLEdBQUcsQ0FBQztnQkFDdEI7Z0JBQ0FvQyxNQUFNcEMsUUFBUSxDQUFDTyxJQUFJLEdBQUc2QixNQUFNUyxZQUFZLENBQUN0QyxJQUFJO1lBQ2pEO1FBQ0o7SUFDSjtJQUNBLElBQUk2QixNQUFNdkIsT0FBTyxLQUFLZixXQUFXO1FBQzdCLElBQUlzQyxNQUFNdkIsT0FBTyxJQUFJLEdBQUc7WUFDcEIsTUFBTSxJQUFJa0MsTUFBTTtRQUNwQjtRQUNBLE1BQU1DLGdCQUFnQi9CLFlBQVlKLE9BQU8sQ0FBQ3VCLE1BQU12QixPQUFPO1FBQ3ZELElBQUl1QixNQUFNcEIsTUFBTSxLQUFLbEIsV0FBVztZQUM1QixJQUFJLFNBQVNtQixhQUFhO2dCQUN0Qiw4REFBOEQ7Z0JBQzlEbUIsTUFBTXBCLE1BQU0sR0FBR0MsWUFBWUMsR0FBRyxDQUFDO29CQUFDa0IsTUFBTXBCLE1BQU07b0JBQUVnQztpQkFBYztZQUNoRTtRQUNKLE9BQ0s7WUFDRFosTUFBTXBCLE1BQU0sR0FBR2dDO1FBQ25CO1FBQ0EsT0FBT1osTUFBTXZCLE9BQU87SUFDeEI7SUFDQSxPQUFPdUI7QUFDWDtBQUNBOztDQUVDLEdBQ00sU0FBU2EsWUFBWXRELFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRUUsU0FBUyxFQUFFcUQsY0FBYyxFQUFFYixjQUFjLEVBQUVFLE9BQU8sRUFBRU0sWUFBWSxFQUFFUCxLQUFLLEVBQUcsR0FBRyxDQUFDLENBQUM7SUFDdEgsTUFBTWEsWUFBWWxCLGFBQWF0QztJQUMvQixJQUFJRSxjQUFjQyxXQUFXO1FBQ3pCOzs7U0FHQyxHQUNELE9BQU9xRCxVQUFVWixPQUFPO1FBQ3hCWSxVQUFVdEQsU0FBUyxHQUFHQTtJQUMxQjtJQUNBLElBQUl3QyxtQkFBbUJ2QyxXQUFXO1FBQzlCcUQsVUFBVWQsY0FBYyxHQUFHQTtJQUMvQjtJQUNBLElBQUlhLG1CQUFtQnBELFdBQVc7UUFDOUJxRCxVQUFVRCxjQUFjLEdBQUdBO0lBQy9CO0lBQ0EsSUFBSVgsWUFBWXpDLFdBQVc7UUFDdkJxRCxVQUFVWixPQUFPLEdBQUdBO0lBQ3hCO0lBQ0EsSUFBSU0saUJBQWlCL0MsV0FBVztRQUM1QnFELFVBQVVOLFlBQVksR0FBRztZQUFFLEdBQUdNLFVBQVVOLFlBQVk7WUFBRSxHQUFHQSxZQUFZO1FBQUM7SUFDMUU7SUFDQSxJQUFJUCxVQUFVeEMsV0FBVztRQUNyQixPQUFPcUQsVUFBVWIsS0FBSztJQUMxQjtJQUNBLE9BQU9hO0FBQ1g7QUFDQSw4REFBOEQ7QUFDdkQsU0FBU0MsdUJBQXVCekQsTUFBTTtJQUN6QyxPQUFPQSxTQUNEO1FBQ0VrRCxjQUFjbEQsT0FBT2tELFlBQVk7UUFDakNSLGdCQUFnQjFDLE9BQU8wQyxjQUFjO1FBQ3JDeEMsV0FBV0YsT0FBT0UsU0FBUztRQUMzQkUsTUFBTUosT0FBT0ksSUFBSTtRQUNqQkMsVUFBVUwsT0FBT0ssUUFBUTtRQUN6QmtELGdCQUFnQnZELE9BQU91RCxjQUFjO1FBQ3JDckMsU0FBU2xCLE9BQU9rQixPQUFPO1FBQ3ZCRyxRQUFRckIsT0FBT3FCLE1BQU07SUFDekIsSUFDRWxCO0FBQ1YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9jb25maWcuanM/MjdlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYWxsYmFja01hbmFnZXIsIGVuc3VyZUhhbmRsZXIgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfUkVDVVJTSU9OX0xJTUlUID0gMjU7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZykge1xuICAgIHJldHVybiBDYWxsYmFja01hbmFnZXIuX2NvbmZpZ3VyZVN5bmMoY29uZmlnPy5jYWxsYmFja3MsIHVuZGVmaW5lZCwgY29uZmlnPy50YWdzLCB1bmRlZmluZWQsIGNvbmZpZz8ubWV0YWRhdGEpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlQ29uZmlncyguLi5jb25maWdzKSB7XG4gICAgLy8gV2UgZG8gbm90IHdhbnQgdG8gY2FsbCBlbnN1cmVDb25maWcgb24gdGhlIGVtcHR5IHN0YXRlIGhlcmUgYXMgdGhpcyBtYXkgY2F1c2VcbiAgICAvLyBkb3VibGUgbG9hZGluZyBvZiBjYWxsYmFja3MgaWYgYXN5bmMgbG9jYWwgc3RvcmFnZSBpcyBiZWluZyB1c2VkLlxuICAgIGNvbnN0IGNvcHkgPSB7fTtcbiAgICBmb3IgKGNvbnN0IG9wdGlvbnMgb2YgY29uZmlncy5maWx0ZXIoKGMpID0+ICEhYykpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwibWV0YWRhdGFcIikge1xuICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IHsgLi4uY29weVtrZXldLCAuLi5vcHRpb25zW2tleV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJ0YWdzXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlS2V5cyA9IGNvcHlba2V5XSA/PyBbXTtcbiAgICAgICAgICAgICAgICBjb3B5W2tleV0gPSBbLi4ubmV3IFNldChiYXNlS2V5cy5jb25jYXQob3B0aW9uc1trZXldID8/IFtdKSldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcImNvbmZpZ3VyYWJsZVwiKSB7XG4gICAgICAgICAgICAgICAgY29weVtrZXldID0geyAuLi5jb3B5W2tleV0sIC4uLm9wdGlvbnNba2V5XSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcInRpbWVvdXRcIikge1xuICAgICAgICAgICAgICAgIGlmIChjb3B5LnRpbWVvdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb3B5LnRpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMudGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvcHkudGltZW91dCA9IE1hdGgubWluKGNvcHkudGltZW91dCwgb3B0aW9ucy50aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwic2lnbmFsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29weS5zaWduYWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb3B5LnNpZ25hbCA9IG9wdGlvbnMuc2lnbmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnNpZ25hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcImFueVwiIGluIEFib3J0U2lnbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5zaWduYWwgPSBBYm9ydFNpZ25hbC5hbnkoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LnNpZ25hbCA9IG9wdGlvbnMuc2lnbmFsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcImNhbGxiYWNrc1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUNhbGxiYWNrcyA9IGNvcHkuY2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVkQ2FsbGJhY2tzID0gb3B0aW9ucy5jYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgLy8gY2FsbGJhY2tzIGNhbiBiZSBlaXRoZXIgdW5kZWZpbmVkLCBBcnJheTxoYW5kbGVyPiBvciBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgLy8gc28gbWVyZ2luZyB0d28gY2FsbGJhY2tzIHZhbHVlcyBoYXMgNiBjYXNlc1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3ZpZGVkQ2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJhc2VDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gcHJvdmlkZWRDYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShiYXNlQ2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBiYXNlQ2FsbGJhY2tzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYXNlQ2FsbGJhY2tzIGlzIGEgbWFuYWdlclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFuYWdlciA9IGJhc2VDYWxsYmFja3MuY29weSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBwcm92aWRlZENhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihlbnN1cmVIYW5kbGVyKGNhbGxiYWNrKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IG1hbmFnZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvdmlkZWRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJvdmlkZWRDYWxsYmFja3MgaXMgYSBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYmFzZUNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBwcm92aWRlZENhbGxiYWNrcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGJhc2VDYWxsYmFja3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYW5hZ2VyID0gcHJvdmlkZWRDYWxsYmFja3MuY29weSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBiYXNlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGVuc3VyZUhhbmRsZXIoY2FsbGJhY2spLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gbWFuYWdlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhc2VDYWxsYmFja3MgaXMgYWxzbyBhIG1hbmFnZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gbmV3IENhbGxiYWNrTWFuYWdlcihwcm92aWRlZENhbGxiYWNrcy5fcGFyZW50UnVuSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyczogYmFzZUNhbGxiYWNrcy5oYW5kbGVycy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaGFuZGxlcnMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRhYmxlSGFuZGxlcnM6IGJhc2VDYWxsYmFja3MuaW5oZXJpdGFibGVIYW5kbGVycy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaW5oZXJpdGFibGVIYW5kbGVycyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogQXJyYXkuZnJvbShuZXcgU2V0KGJhc2VDYWxsYmFja3MudGFncy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MudGFncykpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0YWJsZVRhZ3M6IEFycmF5LmZyb20obmV3IFNldChiYXNlQ2FsbGJhY2tzLmluaGVyaXRhYmxlVGFncy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaW5oZXJpdGFibGVUYWdzKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmJhc2VDYWxsYmFja3MubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3ZpZGVkQ2FsbGJhY2tzLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkS2V5ID0ga2V5O1xuICAgICAgICAgICAgICAgIGNvcHlbdHlwZWRLZXldID0gb3B0aW9uc1t0eXBlZEtleV0gPz8gY29weVt0eXBlZEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvcHk7XG59XG5jb25zdCBQUklNSVRJVkVTID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJib29sZWFuXCJdKTtcbi8qKlxuICogRW5zdXJlIHRoYXQgYSBwYXNzZWQgY29uZmlnIGlzIGFuIG9iamVjdCB3aXRoIGFsbCByZXF1aXJlZCBrZXlzIHByZXNlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVDb25maWcoY29uZmlnKSB7XG4gICAgY29uc3QgaW1wbGljaXRDb25maWcgPSBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldFJ1bm5hYmxlQ29uZmlnKCk7XG4gICAgbGV0IGVtcHR5ID0ge1xuICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgbWV0YWRhdGE6IHt9LFxuICAgICAgICByZWN1cnNpb25MaW1pdDogMjUsXG4gICAgICAgIHJ1bklkOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICBpZiAoaW1wbGljaXRDb25maWcpIHtcbiAgICAgICAgLy8gRG9uJ3QgYWxsb3cgcnVuSWQgYW5kIHJ1bk5hbWUgdG8gYmUgbG9hZGVkIGltcGxpY2l0bHksIGFzIHRoaXMgY2FuIGNhdXNlXG4gICAgICAgIC8vIGNoaWxkIHJ1bnMgdG8gaW1wcm9wZXJseSBpbmhlcml0IHRoZWlyIHBhcmVudHMnIHJ1biBpZHMuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgY29uc3QgeyBydW5JZCwgcnVuTmFtZSwgLi4ucmVzdCB9ID0gaW1wbGljaXRDb25maWc7XG4gICAgICAgIGVtcHR5ID0gT2JqZWN0LmVudHJpZXMocmVzdCkucmVkdWNlKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAoY3VycmVudENvbmZpZywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgICAgIGN1cnJlbnRDb25maWdba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRDb25maWc7XG4gICAgICAgIH0sIGVtcHR5KTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZykge1xuICAgICAgICBlbXB0eSA9IE9iamVjdC5lbnRyaWVzKGNvbmZpZykucmVkdWNlKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAoY3VycmVudENvbmZpZywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgICAgIGN1cnJlbnRDb25maWdba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRDb25maWc7XG4gICAgICAgIH0sIGVtcHR5KTtcbiAgICB9XG4gICAgaWYgKGVtcHR5Py5jb25maWd1cmFibGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoZW1wdHkuY29uZmlndXJhYmxlKSkge1xuICAgICAgICAgICAgaWYgKFBSSU1JVElWRVMuaGFzKHR5cGVvZiBlbXB0eS5jb25maWd1cmFibGVba2V5XSkgJiZcbiAgICAgICAgICAgICAgICAhZW1wdHkubWV0YWRhdGE/LltrZXldKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbXB0eS5tZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBlbXB0eS5tZXRhZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbXB0eS5tZXRhZGF0YVtrZXldID0gZW1wdHkuY29uZmlndXJhYmxlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVtcHR5LnRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoZW1wdHkudGltZW91dCA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaW1lb3V0IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGltZW91dFNpZ25hbCA9IEFib3J0U2lnbmFsLnRpbWVvdXQoZW1wdHkudGltZW91dCk7XG4gICAgICAgIGlmIChlbXB0eS5zaWduYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKFwiYW55XCIgaW4gQWJvcnRTaWduYWwpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGVtcHR5LnNpZ25hbCA9IEFib3J0U2lnbmFsLmFueShbZW1wdHkuc2lnbmFsLCB0aW1lb3V0U2lnbmFsXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbXB0eS5zaWduYWwgPSB0aW1lb3V0U2lnbmFsO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBlbXB0eS50aW1lb3V0O1xuICAgIH1cbiAgICByZXR1cm4gZW1wdHk7XG59XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHBhdGNoZXMgcnVubmFibGUgY29uZmlncyB3aXRoIHVwZGF0ZWQgcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhdGNoQ29uZmlnKGNvbmZpZyA9IHt9LCB7IGNhbGxiYWNrcywgbWF4Q29uY3VycmVuY3ksIHJlY3Vyc2lvbkxpbWl0LCBydW5OYW1lLCBjb25maWd1cmFibGUsIHJ1bklkLCB9ID0ge30pIHtcbiAgICBjb25zdCBuZXdDb25maWcgPSBlbnN1cmVDb25maWcoY29uZmlnKTtcbiAgICBpZiAoY2FsbGJhY2tzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHdlJ3JlIHJlcGxhY2luZyBjYWxsYmFja3Mgd2UgbmVlZCB0byB1bnNldCBydW5OYW1lXG4gICAgICAgICAqIHNpbmNlIHRoYXQgc2hvdWxkIGFwcGx5IG9ubHkgdG8gdGhlIHNhbWUgcnVuIGFzIHRoZSBvcmlnaW5hbCBjYWxsYmFja3NcbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZSBuZXdDb25maWcucnVuTmFtZTtcbiAgICAgICAgbmV3Q29uZmlnLmNhbGxiYWNrcyA9IGNhbGxiYWNrcztcbiAgICB9XG4gICAgaWYgKHJlY3Vyc2lvbkxpbWl0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLnJlY3Vyc2lvbkxpbWl0ID0gcmVjdXJzaW9uTGltaXQ7XG4gICAgfVxuICAgIGlmIChtYXhDb25jdXJyZW5jeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld0NvbmZpZy5tYXhDb25jdXJyZW5jeSA9IG1heENvbmN1cnJlbmN5O1xuICAgIH1cbiAgICBpZiAocnVuTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld0NvbmZpZy5ydW5OYW1lID0gcnVuTmFtZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZ3VyYWJsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld0NvbmZpZy5jb25maWd1cmFibGUgPSB7IC4uLm5ld0NvbmZpZy5jb25maWd1cmFibGUsIC4uLmNvbmZpZ3VyYWJsZSB9O1xuICAgIH1cbiAgICBpZiAocnVuSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWxldGUgbmV3Q29uZmlnLnJ1bklkO1xuICAgIH1cbiAgICByZXR1cm4gbmV3Q29uZmlnO1xufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiBwaWNrUnVubmFibGVDb25maWdLZXlzKGNvbmZpZykge1xuICAgIHJldHVybiBjb25maWdcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBjb25maWd1cmFibGU6IGNvbmZpZy5jb25maWd1cmFibGUsXG4gICAgICAgICAgICByZWN1cnNpb25MaW1pdDogY29uZmlnLnJlY3Vyc2lvbkxpbWl0LFxuICAgICAgICAgICAgY2FsbGJhY2tzOiBjb25maWcuY2FsbGJhY2tzLFxuICAgICAgICAgICAgdGFnczogY29uZmlnLnRhZ3MsXG4gICAgICAgICAgICBtZXRhZGF0YTogY29uZmlnLm1ldGFkYXRhLFxuICAgICAgICAgICAgbWF4Q29uY3VycmVuY3k6IGNvbmZpZy5tYXhDb25jdXJyZW5jeSxcbiAgICAgICAgICAgIHRpbWVvdXQ6IGNvbmZpZy50aW1lb3V0LFxuICAgICAgICAgICAgc2lnbmFsOiBjb25maWcuc2lnbmFsLFxuICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuIl0sIm5hbWVzIjpbIkNhbGxiYWNrTWFuYWdlciIsImVuc3VyZUhhbmRsZXIiLCJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIiwiREVGQVVMVF9SRUNVUlNJT05fTElNSVQiLCJnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWciLCJjb25maWciLCJfY29uZmlndXJlU3luYyIsImNhbGxiYWNrcyIsInVuZGVmaW5lZCIsInRhZ3MiLCJtZXRhZGF0YSIsIm1lcmdlQ29uZmlncyIsImNvbmZpZ3MiLCJjb3B5Iiwib3B0aW9ucyIsImZpbHRlciIsImMiLCJrZXkiLCJPYmplY3QiLCJrZXlzIiwiYmFzZUtleXMiLCJTZXQiLCJjb25jYXQiLCJ0aW1lb3V0IiwiTWF0aCIsIm1pbiIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwiYW55IiwiYmFzZUNhbGxiYWNrcyIsInByb3ZpZGVkQ2FsbGJhY2tzIiwiQXJyYXkiLCJpc0FycmF5IiwibWFuYWdlciIsImNhbGxiYWNrIiwiYWRkSGFuZGxlciIsIl9wYXJlbnRSdW5JZCIsImhhbmRsZXJzIiwiaW5oZXJpdGFibGVIYW5kbGVycyIsImZyb20iLCJpbmhlcml0YWJsZVRhZ3MiLCJ0eXBlZEtleSIsIlBSSU1JVElWRVMiLCJlbnN1cmVDb25maWciLCJpbXBsaWNpdENvbmZpZyIsImdldFJ1bm5hYmxlQ29uZmlnIiwiZW1wdHkiLCJyZWN1cnNpb25MaW1pdCIsInJ1bklkIiwicnVuTmFtZSIsInJlc3QiLCJlbnRyaWVzIiwicmVkdWNlIiwiY3VycmVudENvbmZpZyIsInZhbHVlIiwiY29uZmlndXJhYmxlIiwiaGFzIiwiRXJyb3IiLCJ0aW1lb3V0U2lnbmFsIiwicGF0Y2hDb25maWciLCJtYXhDb25jdXJyZW5jeSIsIm5ld0NvbmZpZyIsInBpY2tSdW5uYWJsZUNvbmZpZ0tleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/graph.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Graph: () => (/* binding */ Graph)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _graph_mermaid_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graph_mermaid.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/graph_mermaid.js\");\n/* harmony import */ var _utils_json_schema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/json_schema.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n\n\n\n\nfunction nodeDataStr(id, data) {\n    if (id !== undefined && !(0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(id)) {\n        return id;\n    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.isRunnableInterface)(data)) {\n        try {\n            let dataStr = data.getName();\n            dataStr = dataStr.startsWith(\"Runnable\") ? dataStr.slice(\"Runnable\".length) : dataStr;\n            return dataStr;\n        } catch (error) {\n            return data.getName();\n        }\n    } else {\n        return data.name ?? \"UnknownSchema\";\n    }\n}\nfunction nodeDataJson(node) {\n    // if node.data implements Runnable\n    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.isRunnableInterface)(node.data)) {\n        return {\n            type: \"runnable\",\n            data: {\n                id: node.data.lc_id,\n                name: node.data.getName()\n            }\n        };\n    } else {\n        return {\n            type: \"schema\",\n            data: {\n                ...(0,_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(node.data.schema),\n                title: node.data.name\n            }\n        };\n    }\n}\nclass Graph {\n    constructor(params){\n        Object.defineProperty(this, \"nodes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"edges\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.nodes = params?.nodes ?? this.nodes;\n        this.edges = params?.edges ?? this.edges;\n    }\n    // Convert the graph to a JSON-serializable format.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const stableNodeIds = {};\n        Object.values(this.nodes).forEach((node, i)=>{\n            stableNodeIds[node.id] = (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(node.id) ? i : node.id;\n        });\n        return {\n            nodes: Object.values(this.nodes).map((node)=>({\n                    id: stableNodeIds[node.id],\n                    ...nodeDataJson(node)\n                })),\n            edges: this.edges.map((edge)=>{\n                const item = {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target]\n                };\n                if (typeof edge.data !== \"undefined\") {\n                    item.data = edge.data;\n                }\n                if (typeof edge.conditional !== \"undefined\") {\n                    item.conditional = edge.conditional;\n                }\n                return item;\n            })\n        };\n    }\n    addNode(data, id, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    metadata) {\n        if (id !== undefined && this.nodes[id] !== undefined) {\n            throw new Error(`Node with id ${id} already exists`);\n        }\n        const nodeId = id ?? (0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n        const node = {\n            id: nodeId,\n            data,\n            name: nodeDataStr(id, data),\n            metadata\n        };\n        this.nodes[nodeId] = node;\n        return node;\n    }\n    removeNode(node) {\n        // Remove the node from the nodes map\n        delete this.nodes[node.id];\n        // Filter out edges connected to the node\n        this.edges = this.edges.filter((edge)=>edge.source !== node.id && edge.target !== node.id);\n    }\n    addEdge(source, target, data, conditional) {\n        if (this.nodes[source.id] === undefined) {\n            throw new Error(`Source node ${source.id} not in graph`);\n        }\n        if (this.nodes[target.id] === undefined) {\n            throw new Error(`Target node ${target.id} not in graph`);\n        }\n        const edge = {\n            source: source.id,\n            target: target.id,\n            data,\n            conditional\n        };\n        this.edges.push(edge);\n        return edge;\n    }\n    firstNode() {\n        return _firstNode(this);\n    }\n    lastNode() {\n        return _lastNode(this);\n    }\n    /**\n     * Add all nodes and edges from another graph.\n     * Note this doesn't check for duplicates, nor does it connect the graphs.\n     */ extend(graph, prefix = \"\") {\n        let finalPrefix = prefix;\n        const nodeIds = Object.values(graph.nodes).map((node)=>node.id);\n        if (nodeIds.every(uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])) {\n            finalPrefix = \"\";\n        }\n        const prefixed = (id)=>{\n            return finalPrefix ? `${finalPrefix}:${id}` : id;\n        };\n        Object.entries(graph.nodes).forEach(([key, value])=>{\n            this.nodes[prefixed(key)] = {\n                ...value,\n                id: prefixed(key)\n            };\n        });\n        const newEdges = graph.edges.map((edge)=>{\n            return {\n                ...edge,\n                source: prefixed(edge.source),\n                target: prefixed(edge.target)\n            };\n        });\n        // Add all edges from the other graph\n        this.edges = [\n            ...this.edges,\n            ...newEdges\n        ];\n        const first = graph.firstNode();\n        const last = graph.lastNode();\n        return [\n            first ? {\n                id: prefixed(first.id),\n                data: first.data\n            } : undefined,\n            last ? {\n                id: prefixed(last.id),\n                data: last.data\n            } : undefined\n        ];\n    }\n    trimFirstNode() {\n        const firstNode = this.firstNode();\n        if (firstNode && _firstNode(this, [\n            firstNode.id\n        ])) {\n            this.removeNode(firstNode);\n        }\n    }\n    trimLastNode() {\n        const lastNode = this.lastNode();\n        if (lastNode && _lastNode(this, [\n            lastNode.id\n        ])) {\n            this.removeNode(lastNode);\n        }\n    }\n    /**\n     * Return a new graph with all nodes re-identified,\n     * using their unique, readable names where possible.\n     */ reid() {\n        const nodeLabels = Object.fromEntries(Object.values(this.nodes).map((node)=>[\n                node.id,\n                node.name\n            ]));\n        const nodeLabelCounts = new Map();\n        Object.values(nodeLabels).forEach((label)=>{\n            nodeLabelCounts.set(label, (nodeLabelCounts.get(label) || 0) + 1);\n        });\n        const getNodeId = (nodeId)=>{\n            const label = nodeLabels[nodeId];\n            if ((0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(nodeId) && nodeLabelCounts.get(label) === 1) {\n                return label;\n            } else {\n                return nodeId;\n            }\n        };\n        return new Graph({\n            nodes: Object.fromEntries(Object.entries(this.nodes).map(([id, node])=>[\n                    getNodeId(id),\n                    {\n                        ...node,\n                        id: getNodeId(id)\n                    }\n                ])),\n            edges: this.edges.map((edge)=>({\n                    ...edge,\n                    source: getNodeId(edge.source),\n                    target: getNodeId(edge.target)\n                }))\n        });\n    }\n    drawMermaid(params) {\n        const { withStyles, curveStyle, nodeColors = {\n            default: \"fill:#f2f0ff,line-height:1.2\",\n            first: \"fill-opacity:0\",\n            last: \"fill:#bfb6fc\"\n        }, wrapLabelNWords } = params ?? {};\n        const graph = this.reid();\n        const firstNode = graph.firstNode();\n        const lastNode = graph.lastNode();\n        return (0,_graph_mermaid_js__WEBPACK_IMPORTED_MODULE_1__.drawMermaid)(graph.nodes, graph.edges, {\n            firstNode: firstNode?.id,\n            lastNode: lastNode?.id,\n            withStyles,\n            curveStyle,\n            nodeColors,\n            wrapLabelNWords\n        });\n    }\n    async drawMermaidPng(params) {\n        const mermaidSyntax = this.drawMermaid(params);\n        return (0,_graph_mermaid_js__WEBPACK_IMPORTED_MODULE_1__.drawMermaidPng)(mermaidSyntax, {\n            backgroundColor: params?.backgroundColor\n        });\n    }\n}\n/**\n * Find the single node that is not a target of any edge.\n * Exclude nodes/sources with ids in the exclude list.\n * If there is no such node, or there are multiple, return undefined.\n * When drawing the graph, this node would be the origin.\n */ function _firstNode(graph, exclude = []) {\n    const targets = new Set(graph.edges.filter((edge)=>!exclude.includes(edge.source)).map((edge)=>edge.target));\n    const found = [];\n    for (const node of Object.values(graph.nodes)){\n        if (!exclude.includes(node.id) && !targets.has(node.id)) {\n            found.push(node);\n        }\n    }\n    return found.length === 1 ? found[0] : undefined;\n}\n/**\n * Find the single node that is not a source of any edge.\n * Exclude nodes/targets with ids in the exclude list.\n * If there is no such node, or there are multiple, return undefined.\n * When drawing the graph, this node would be the destination.\n */ function _lastNode(graph, exclude = []) {\n    const sources = new Set(graph.edges.filter((edge)=>!exclude.includes(edge.target)).map((edge)=>edge.source));\n    const found = [];\n    for (const node of Object.values(graph.nodes)){\n        if (!exclude.includes(node.id) && !sources.has(node.id)) {\n            found.push(node);\n        }\n    }\n    return found.length === 1 ? found[0] : undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RDtBQUNQO0FBQ2dCO0FBQ1Y7QUFDdkQsU0FBU1EsWUFBWUMsRUFBRSxFQUFFQyxJQUFJO0lBQ3pCLElBQUlELE9BQU9FLGFBQWEsQ0FBQ1IsZ0RBQU1BLENBQUNNLEtBQUs7UUFDakMsT0FBT0E7SUFDWCxPQUNLLElBQUlMLDhEQUFtQkEsQ0FBQ00sT0FBTztRQUNoQyxJQUFJO1lBQ0EsSUFBSUUsVUFBVUYsS0FBS0csT0FBTztZQUMxQkQsVUFBVUEsUUFBUUUsVUFBVSxDQUFDLGNBQ3ZCRixRQUFRRyxLQUFLLENBQUMsV0FBV0MsTUFBTSxJQUMvQko7WUFDTixPQUFPQTtRQUNYLEVBQ0EsT0FBT0ssT0FBTztZQUNWLE9BQU9QLEtBQUtHLE9BQU87UUFDdkI7SUFDSixPQUNLO1FBQ0QsT0FBT0gsS0FBS1EsSUFBSSxJQUFJO0lBQ3hCO0FBQ0o7QUFDQSxTQUFTQyxhQUFhQyxJQUFJO0lBQ3RCLG1DQUFtQztJQUNuQyxJQUFJaEIsOERBQW1CQSxDQUFDZ0IsS0FBS1YsSUFBSSxHQUFHO1FBQ2hDLE9BQU87WUFDSFcsTUFBTTtZQUNOWCxNQUFNO2dCQUNGRCxJQUFJVyxLQUFLVixJQUFJLENBQUNZLEtBQUs7Z0JBQ25CSixNQUFNRSxLQUFLVixJQUFJLENBQUNHLE9BQU87WUFDM0I7UUFDSjtJQUNKLE9BQ0s7UUFDRCxPQUFPO1lBQ0hRLE1BQU07WUFDTlgsTUFBTTtnQkFBRSxHQUFHSCxtRUFBWUEsQ0FBQ2EsS0FBS1YsSUFBSSxDQUFDYSxNQUFNLENBQUM7Z0JBQUVDLE9BQU9KLEtBQUtWLElBQUksQ0FBQ1EsSUFBSTtZQUFDO1FBQ3JFO0lBQ0o7QUFDSjtBQUNPLE1BQU1PO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lB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QzlCLE1BQU1pRCxRQUFRLEVBQUU7SUFDaEIsS0FBSyxNQUFNekUsUUFBUVEsT0FBT1UsTUFBTSxDQUFDc0IsTUFBTTFCLEtBQUssRUFBRztRQUMzQyxJQUFJLENBQUN1RCxRQUFRRyxRQUFRLENBQUN4RSxLQUFLWCxFQUFFLEtBQUssQ0FBQ3NGLFFBQVFELEdBQUcsQ0FBQzFFLEtBQUtYLEVBQUUsR0FBRztZQUNyRG9GLE1BQU12QyxJQUFJLENBQUNsQztRQUNmO0lBQ0o7SUFDQSxPQUFPeUUsTUFBTTdFLE1BQU0sS0FBSyxJQUFJNkUsS0FBSyxDQUFDLEVBQUUsR0FBR2xGO0FBQzNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvZ3JhcGguanM/MzQxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2NCBhcyB1dWlkdjQsIHZhbGlkYXRlIGFzIGlzVXVpZCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBpc1J1bm5hYmxlSW50ZXJmYWNlIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IGRyYXdNZXJtYWlkLCBkcmF3TWVybWFpZFBuZyB9IGZyb20gXCIuL2dyYXBoX21lcm1haWQuanNcIjtcbmltcG9ydCB7IHRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi91dGlscy9qc29uX3NjaGVtYS5qc1wiO1xuZnVuY3Rpb24gbm9kZURhdGFTdHIoaWQsIGRhdGEpIHtcbiAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCAmJiAhaXNVdWlkKGlkKSkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUnVubmFibGVJbnRlcmZhY2UoZGF0YSkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBkYXRhU3RyID0gZGF0YS5nZXROYW1lKCk7XG4gICAgICAgICAgICBkYXRhU3RyID0gZGF0YVN0ci5zdGFydHNXaXRoKFwiUnVubmFibGVcIilcbiAgICAgICAgICAgICAgICA/IGRhdGFTdHIuc2xpY2UoXCJSdW5uYWJsZVwiLmxlbmd0aClcbiAgICAgICAgICAgICAgICA6IGRhdGFTdHI7XG4gICAgICAgICAgICByZXR1cm4gZGF0YVN0cjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhLmdldE5hbWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRhdGEubmFtZSA/PyBcIlVua25vd25TY2hlbWFcIjtcbiAgICB9XG59XG5mdW5jdGlvbiBub2RlRGF0YUpzb24obm9kZSkge1xuICAgIC8vIGlmIG5vZGUuZGF0YSBpbXBsZW1lbnRzIFJ1bm5hYmxlXG4gICAgaWYgKGlzUnVubmFibGVJbnRlcmZhY2Uobm9kZS5kYXRhKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJydW5uYWJsZVwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiBub2RlLmRhdGEubGNfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogbm9kZS5kYXRhLmdldE5hbWUoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJzY2hlbWFcIixcbiAgICAgICAgICAgIGRhdGE6IHsgLi4udG9Kc29uU2NoZW1hKG5vZGUuZGF0YS5zY2hlbWEpLCB0aXRsZTogbm9kZS5kYXRhLm5hbWUgfSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgR3JhcGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJub2Rlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVkZ2VzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ub2RlcyA9IHBhcmFtcz8ubm9kZXMgPz8gdGhpcy5ub2RlcztcbiAgICAgICAgdGhpcy5lZGdlcyA9IHBhcmFtcz8uZWRnZXMgPz8gdGhpcy5lZGdlcztcbiAgICB9XG4gICAgLy8gQ29udmVydCB0aGUgZ3JhcGggdG8gYSBKU09OLXNlcmlhbGl6YWJsZSBmb3JtYXQuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHN0YWJsZU5vZGVJZHMgPSB7fTtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKS5mb3JFYWNoKChub2RlLCBpKSA9PiB7XG4gICAgICAgICAgICBzdGFibGVOb2RlSWRzW25vZGUuaWRdID0gaXNVdWlkKG5vZGUuaWQpID8gaSA6IG5vZGUuaWQ7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbm9kZXM6IE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykubWFwKChub2RlKSA9PiAoe1xuICAgICAgICAgICAgICAgIGlkOiBzdGFibGVOb2RlSWRzW25vZGUuaWRdLFxuICAgICAgICAgICAgICAgIC4uLm5vZGVEYXRhSnNvbihub2RlKSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIGVkZ2VzOiB0aGlzLmVkZ2VzLm1hcCgoZWRnZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogc3RhYmxlTm9kZUlkc1tlZGdlLnNvdXJjZV0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogc3RhYmxlTm9kZUlkc1tlZGdlLnRhcmdldF0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVkZ2UuZGF0YSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmRhdGEgPSBlZGdlLmRhdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWRnZS5jb25kaXRpb25hbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbmRpdGlvbmFsID0gZWRnZS5jb25kaXRpb25hbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYWRkTm9kZShkYXRhLCBpZCwgXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBtZXRhZGF0YSkge1xuICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm5vZGVzW2lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vZGUgd2l0aCBpZCAke2lkfSBhbHJlYWR5IGV4aXN0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vZGVJZCA9IGlkID8/IHV1aWR2NCgpO1xuICAgICAgICBjb25zdCBub2RlID0ge1xuICAgICAgICAgICAgaWQ6IG5vZGVJZCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBuYW1lOiBub2RlRGF0YVN0cihpZCwgZGF0YSksXG4gICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ub2Rlc1tub2RlSWRdID0gbm9kZTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIHJlbW92ZU5vZGUobm9kZSkge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIG5vZGUgZnJvbSB0aGUgbm9kZXMgbWFwXG4gICAgICAgIGRlbGV0ZSB0aGlzLm5vZGVzW25vZGUuaWRdO1xuICAgICAgICAvLyBGaWx0ZXIgb3V0IGVkZ2VzIGNvbm5lY3RlZCB0byB0aGUgbm9kZVxuICAgICAgICB0aGlzLmVkZ2VzID0gdGhpcy5lZGdlcy5maWx0ZXIoKGVkZ2UpID0+IGVkZ2Uuc291cmNlICE9PSBub2RlLmlkICYmIGVkZ2UudGFyZ2V0ICE9PSBub2RlLmlkKTtcbiAgICB9XG4gICAgYWRkRWRnZShzb3VyY2UsIHRhcmdldCwgZGF0YSwgY29uZGl0aW9uYWwpIHtcbiAgICAgICAgaWYgKHRoaXMubm9kZXNbc291cmNlLmlkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNvdXJjZSBub2RlICR7c291cmNlLmlkfSBub3QgaW4gZ3JhcGhgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ub2Rlc1t0YXJnZXQuaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGFyZ2V0IG5vZGUgJHt0YXJnZXQuaWR9IG5vdCBpbiBncmFwaGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVkZ2UgPSB7XG4gICAgICAgICAgICBzb3VyY2U6IHNvdXJjZS5pZCxcbiAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LmlkLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIGNvbmRpdGlvbmFsLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVkZ2VzLnB1c2goZWRnZSk7XG4gICAgICAgIHJldHVybiBlZGdlO1xuICAgIH1cbiAgICBmaXJzdE5vZGUoKSB7XG4gICAgICAgIHJldHVybiBfZmlyc3ROb2RlKHRoaXMpO1xuICAgIH1cbiAgICBsYXN0Tm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIF9sYXN0Tm9kZSh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGFsbCBub2RlcyBhbmQgZWRnZXMgZnJvbSBhbm90aGVyIGdyYXBoLlxuICAgICAqIE5vdGUgdGhpcyBkb2Vzbid0IGNoZWNrIGZvciBkdXBsaWNhdGVzLCBub3IgZG9lcyBpdCBjb25uZWN0IHRoZSBncmFwaHMuXG4gICAgICovXG4gICAgZXh0ZW5kKGdyYXBoLCBwcmVmaXggPSBcIlwiKSB7XG4gICAgICAgIGxldCBmaW5hbFByZWZpeCA9IHByZWZpeDtcbiAgICAgICAgY29uc3Qgbm9kZUlkcyA9IE9iamVjdC52YWx1ZXMoZ3JhcGgubm9kZXMpLm1hcCgobm9kZSkgPT4gbm9kZS5pZCk7XG4gICAgICAgIGlmIChub2RlSWRzLmV2ZXJ5KGlzVXVpZCkpIHtcbiAgICAgICAgICAgIGZpbmFsUHJlZml4ID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmVmaXhlZCA9IChpZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsUHJlZml4ID8gYCR7ZmluYWxQcmVmaXh9OiR7aWR9YCA6IGlkO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZW50cmllcyhncmFwaC5ub2RlcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5vZGVzW3ByZWZpeGVkKGtleSldID0geyAuLi52YWx1ZSwgaWQ6IHByZWZpeGVkKGtleSkgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG5ld0VkZ2VzID0gZ3JhcGguZWRnZXMubWFwKChlZGdlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmVkZ2UsXG4gICAgICAgICAgICAgICAgc291cmNlOiBwcmVmaXhlZChlZGdlLnNvdXJjZSksXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBwcmVmaXhlZChlZGdlLnRhcmdldCksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQWRkIGFsbCBlZGdlcyBmcm9tIHRoZSBvdGhlciBncmFwaFxuICAgICAgICB0aGlzLmVkZ2VzID0gWy4uLnRoaXMuZWRnZXMsIC4uLm5ld0VkZ2VzXTtcbiAgICAgICAgY29uc3QgZmlyc3QgPSBncmFwaC5maXJzdE5vZGUoKTtcbiAgICAgICAgY29uc3QgbGFzdCA9IGdyYXBoLmxhc3ROb2RlKCk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBmaXJzdCA/IHsgaWQ6IHByZWZpeGVkKGZpcnN0LmlkKSwgZGF0YTogZmlyc3QuZGF0YSB9IDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbGFzdCA/IHsgaWQ6IHByZWZpeGVkKGxhc3QuaWQpLCBkYXRhOiBsYXN0LmRhdGEgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgdHJpbUZpcnN0Tm9kZSgpIHtcbiAgICAgICAgY29uc3QgZmlyc3ROb2RlID0gdGhpcy5maXJzdE5vZGUoKTtcbiAgICAgICAgaWYgKGZpcnN0Tm9kZSAmJiBfZmlyc3ROb2RlKHRoaXMsIFtmaXJzdE5vZGUuaWRdKSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVOb2RlKGZpcnN0Tm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJpbUxhc3ROb2RlKCkge1xuICAgICAgICBjb25zdCBsYXN0Tm9kZSA9IHRoaXMubGFzdE5vZGUoKTtcbiAgICAgICAgaWYgKGxhc3ROb2RlICYmIF9sYXN0Tm9kZSh0aGlzLCBbbGFzdE5vZGUuaWRdKSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVOb2RlKGxhc3ROb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBuZXcgZ3JhcGggd2l0aCBhbGwgbm9kZXMgcmUtaWRlbnRpZmllZCxcbiAgICAgKiB1c2luZyB0aGVpciB1bmlxdWUsIHJlYWRhYmxlIG5hbWVzIHdoZXJlIHBvc3NpYmxlLlxuICAgICAqL1xuICAgIHJlaWQoKSB7XG4gICAgICAgIGNvbnN0IG5vZGVMYWJlbHMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKS5tYXAoKG5vZGUpID0+IFtub2RlLmlkLCBub2RlLm5hbWVdKSk7XG4gICAgICAgIGNvbnN0IG5vZGVMYWJlbENvdW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhub2RlTGFiZWxzKS5mb3JFYWNoKChsYWJlbCkgPT4ge1xuICAgICAgICAgICAgbm9kZUxhYmVsQ291bnRzLnNldChsYWJlbCwgKG5vZGVMYWJlbENvdW50cy5nZXQobGFiZWwpIHx8IDApICsgMSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBnZXROb2RlSWQgPSAobm9kZUlkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IG5vZGVMYWJlbHNbbm9kZUlkXTtcbiAgICAgICAgICAgIGlmIChpc1V1aWQobm9kZUlkKSAmJiBub2RlTGFiZWxDb3VudHMuZ2V0KGxhYmVsKSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsYWJlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgR3JhcGgoe1xuICAgICAgICAgICAgbm9kZXM6IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyh0aGlzLm5vZGVzKS5tYXAoKFtpZCwgbm9kZV0pID0+IFtcbiAgICAgICAgICAgICAgICBnZXROb2RlSWQoaWQpLFxuICAgICAgICAgICAgICAgIHsgLi4ubm9kZSwgaWQ6IGdldE5vZGVJZChpZCkgfSxcbiAgICAgICAgICAgIF0pKSxcbiAgICAgICAgICAgIGVkZ2VzOiB0aGlzLmVkZ2VzLm1hcCgoZWRnZSkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5lZGdlLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogZ2V0Tm9kZUlkKGVkZ2Uuc291cmNlKSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGdldE5vZGVJZChlZGdlLnRhcmdldCksXG4gICAgICAgICAgICB9KSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkcmF3TWVybWFpZChwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB3aXRoU3R5bGVzLCBjdXJ2ZVN0eWxlLCBub2RlQ29sb3JzID0ge1xuICAgICAgICAgICAgZGVmYXVsdDogXCJmaWxsOiNmMmYwZmYsbGluZS1oZWlnaHQ6MS4yXCIsXG4gICAgICAgICAgICBmaXJzdDogXCJmaWxsLW9wYWNpdHk6MFwiLFxuICAgICAgICAgICAgbGFzdDogXCJmaWxsOiNiZmI2ZmNcIixcbiAgICAgICAgfSwgd3JhcExhYmVsTldvcmRzLCB9ID0gcGFyYW1zID8/IHt9O1xuICAgICAgICBjb25zdCBncmFwaCA9IHRoaXMucmVpZCgpO1xuICAgICAgICBjb25zdCBmaXJzdE5vZGUgPSBncmFwaC5maXJzdE5vZGUoKTtcbiAgICAgICAgY29uc3QgbGFzdE5vZGUgPSBncmFwaC5sYXN0Tm9kZSgpO1xuICAgICAgICByZXR1cm4gZHJhd01lcm1haWQoZ3JhcGgubm9kZXMsIGdyYXBoLmVkZ2VzLCB7XG4gICAgICAgICAgICBmaXJzdE5vZGU6IGZpcnN0Tm9kZT8uaWQsXG4gICAgICAgICAgICBsYXN0Tm9kZTogbGFzdE5vZGU/LmlkLFxuICAgICAgICAgICAgd2l0aFN0eWxlcyxcbiAgICAgICAgICAgIGN1cnZlU3R5bGUsXG4gICAgICAgICAgICBub2RlQ29sb3JzLFxuICAgICAgICAgICAgd3JhcExhYmVsTldvcmRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZHJhd01lcm1haWRQbmcocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IG1lcm1haWRTeW50YXggPSB0aGlzLmRyYXdNZXJtYWlkKHBhcmFtcyk7XG4gICAgICAgIHJldHVybiBkcmF3TWVybWFpZFBuZyhtZXJtYWlkU3ludGF4LCB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHBhcmFtcz8uYmFja2dyb3VuZENvbG9yLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEZpbmQgdGhlIHNpbmdsZSBub2RlIHRoYXQgaXMgbm90IGEgdGFyZ2V0IG9mIGFueSBlZGdlLlxuICogRXhjbHVkZSBub2Rlcy9zb3VyY2VzIHdpdGggaWRzIGluIHRoZSBleGNsdWRlIGxpc3QuXG4gKiBJZiB0aGVyZSBpcyBubyBzdWNoIG5vZGUsIG9yIHRoZXJlIGFyZSBtdWx0aXBsZSwgcmV0dXJuIHVuZGVmaW5lZC5cbiAqIFdoZW4gZHJhd2luZyB0aGUgZ3JhcGgsIHRoaXMgbm9kZSB3b3VsZCBiZSB0aGUgb3JpZ2luLlxuICovXG5mdW5jdGlvbiBfZmlyc3ROb2RlKGdyYXBoLCBleGNsdWRlID0gW10pIHtcbiAgICBjb25zdCB0YXJnZXRzID0gbmV3IFNldChncmFwaC5lZGdlc1xuICAgICAgICAuZmlsdGVyKChlZGdlKSA9PiAhZXhjbHVkZS5pbmNsdWRlcyhlZGdlLnNvdXJjZSkpXG4gICAgICAgIC5tYXAoKGVkZ2UpID0+IGVkZ2UudGFyZ2V0KSk7XG4gICAgY29uc3QgZm91bmQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG5vZGUgb2YgT2JqZWN0LnZhbHVlcyhncmFwaC5ub2RlcykpIHtcbiAgICAgICAgaWYgKCFleGNsdWRlLmluY2x1ZGVzKG5vZGUuaWQpICYmICF0YXJnZXRzLmhhcyhub2RlLmlkKSkge1xuICAgICAgICAgICAgZm91bmQucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZm91bmQubGVuZ3RoID09PSAxID8gZm91bmRbMF0gOiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIEZpbmQgdGhlIHNpbmdsZSBub2RlIHRoYXQgaXMgbm90IGEgc291cmNlIG9mIGFueSBlZGdlLlxuICogRXhjbHVkZSBub2Rlcy90YXJnZXRzIHdpdGggaWRzIGluIHRoZSBleGNsdWRlIGxpc3QuXG4gKiBJZiB0aGVyZSBpcyBubyBzdWNoIG5vZGUsIG9yIHRoZXJlIGFyZSBtdWx0aXBsZSwgcmV0dXJuIHVuZGVmaW5lZC5cbiAqIFdoZW4gZHJhd2luZyB0aGUgZ3JhcGgsIHRoaXMgbm9kZSB3b3VsZCBiZSB0aGUgZGVzdGluYXRpb24uXG4gKi9cbmZ1bmN0aW9uIF9sYXN0Tm9kZShncmFwaCwgZXhjbHVkZSA9IFtdKSB7XG4gICAgY29uc3Qgc291cmNlcyA9IG5ldyBTZXQoZ3JhcGguZWRnZXNcbiAgICAgICAgLmZpbHRlcigoZWRnZSkgPT4gIWV4Y2x1ZGUuaW5jbHVkZXMoZWRnZS50YXJnZXQpKVxuICAgICAgICAubWFwKChlZGdlKSA9PiBlZGdlLnNvdXJjZSkpO1xuICAgIGNvbnN0IGZvdW5kID0gW107XG4gICAgZm9yIChjb25zdCBub2RlIG9mIE9iamVjdC52YWx1ZXMoZ3JhcGgubm9kZXMpKSB7XG4gICAgICAgIGlmICghZXhjbHVkZS5pbmNsdWRlcyhub2RlLmlkKSAmJiAhc291cmNlcy5oYXMobm9kZS5pZCkpIHtcbiAgICAgICAgICAgIGZvdW5kLnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kLmxlbmd0aCA9PT0gMSA/IGZvdW5kWzBdIDogdW5kZWZpbmVkO1xufVxuIl0sIm5hbWVzIjpbInY0IiwidXVpZHY0IiwidmFsaWRhdGUiLCJpc1V1aWQiLCJpc1J1bm5hYmxlSW50ZXJmYWNlIiwiZHJhd01lcm1haWQiLCJkcmF3TWVybWFpZFBuZyIsInRvSnNvblNjaGVtYSIsIm5vZGVEYXRhU3RyIiwiaWQiLCJkYXRhIiwidW5kZWZpbmVkIiwiZGF0YVN0ciIsImdldE5hbWUiLCJzdGFydHNXaXRoIiwic2xpY2UiLCJsZW5ndGgiLCJlcnJvciIsIm5hbWUiLCJub2RlRGF0YUpzb24iLCJub2RlIiwidHlwZSIsImxjX2lkIiwic2NoZW1hIiwidGl0bGUiLCJHcmFwaCIsImNvbnN0cnVjdG9yIiwicGFyYW1zIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm5vZGVzIiwiZWRnZXMiLCJ0b0pTT04iLCJzdGFibGVOb2RlSWRzIiwidmFsdWVzIiwiZm9yRWFjaCIsImkiLCJtYXAiLCJlZGdlIiwiaXRlbSIsInNvdXJjZSIsInRhcmdldCIsImNvbmRpdGlvbmFsIiwiYWRkTm9kZSIsIm1ldGFkYXRhIiwiRXJyb3IiLCJub2RlSWQiLCJyZW1vdmVOb2RlIiwiZmlsdGVyIiwiYWRkRWRnZSIsInB1c2giLCJmaXJzdE5vZGUiLCJfZmlyc3ROb2RlIiwibGFzdE5vZGUiLCJfbGFzdE5vZGUiLCJleHRlbmQiLCJncmFwaCIsInByZWZpeCIsImZpbmFsUHJlZml4Iiwibm9kZUlkcyIsImV2ZXJ5IiwicHJlZml4ZWQiLCJlbnRyaWVzIiwia2V5IiwibmV3RWRnZXMiLCJmaXJzdCIsImxhc3QiLCJ0cmltRmlyc3ROb2RlIiwidHJpbUxhc3ROb2RlIiwicmVpZCIsIm5vZGVMYWJlbHMiLCJmcm9tRW50cmllcyIsIm5vZGVMYWJlbENvdW50cyIsIk1hcCIsImxhYmVsIiwic2V0IiwiZ2V0IiwiZ2V0Tm9kZUlkIiwid2l0aFN0eWxlcyIsImN1cnZlU3R5bGUiLCJub2RlQ29sb3JzIiwiZGVmYXVsdCIsIndyYXBMYWJlbE5Xb3JkcyIsIm1lcm1haWRTeW50YXgiLCJiYWNrZ3JvdW5kQ29sb3IiLCJleGNsdWRlIiwidGFyZ2V0cyIsIlNldCIsImluY2x1ZGVzIiwiZm91bmQiLCJoYXMiLCJzb3VyY2VzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/graph_mermaid.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/graph_mermaid.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   drawMermaid: () => (/* binding */ drawMermaid),\n/* harmony export */   drawMermaidImage: () => (/* binding */ drawMermaidImage),\n/* harmony export */   drawMermaidPng: () => (/* binding */ drawMermaidPng)\n/* harmony export */ });\nfunction _escapeNodeLabel(nodeLabel) {\n    // Escapes the node label for Mermaid syntax.\n    return nodeLabel.replace(/[^a-zA-Z-_0-9]/g, \"_\");\n}\nconst MARKDOWN_SPECIAL_CHARS = [\n    \"*\",\n    \"_\",\n    \"`\"\n];\nfunction _generateMermaidGraphStyles(nodeColors) {\n    let styles = \"\";\n    for (const [className, color] of Object.entries(nodeColors)){\n        styles += `\\tclassDef ${className} ${color};\\n`;\n    }\n    return styles;\n}\n/**\n * Draws a Mermaid graph using the provided graph data\n */ function drawMermaid(nodes, edges, config) {\n    const { firstNode, lastNode, nodeColors, withStyles = true, curveStyle = \"linear\", wrapLabelNWords = 9 } = config ?? {};\n    // Initialize Mermaid graph configuration\n    let mermaidGraph = withStyles ? `%%{init: {'flowchart': {'curve': '${curveStyle}'}}}%%\\ngraph TD;\\n` : \"graph TD;\\n\";\n    if (withStyles) {\n        // Node formatting templates\n        const defaultClassLabel = \"default\";\n        const formatDict = {\n            [defaultClassLabel]: \"{0}({1})\"\n        };\n        if (firstNode !== undefined) {\n            formatDict[firstNode] = \"{0}([{1}]):::first\";\n        }\n        if (lastNode !== undefined) {\n            formatDict[lastNode] = \"{0}([{1}]):::last\";\n        }\n        // Add nodes to the graph\n        for (const [key, node] of Object.entries(nodes)){\n            const nodeName = node.name.split(\":\").pop() ?? \"\";\n            const label = MARKDOWN_SPECIAL_CHARS.some((char)=>nodeName.startsWith(char) && nodeName.endsWith(char)) ? `<p>${nodeName}</p>` : nodeName;\n            let finalLabel = label;\n            if (Object.keys(node.metadata ?? {}).length) {\n                finalLabel += `<hr/><small><em>${Object.entries(node.metadata ?? {}).map(([k, v])=>`${k} = ${v}`).join(\"\\n\")}</em></small>`;\n            }\n            const nodeLabel = (formatDict[key] ?? formatDict[defaultClassLabel]).replace(\"{0}\", _escapeNodeLabel(key)).replace(\"{1}\", finalLabel);\n            mermaidGraph += `\\t${nodeLabel}\\n`;\n        }\n    }\n    // Group edges by their common prefixes\n    const edgeGroups = {};\n    for (const edge of edges){\n        const srcParts = edge.source.split(\":\");\n        const tgtParts = edge.target.split(\":\");\n        const commonPrefix = srcParts.filter((src, i)=>src === tgtParts[i]).join(\":\");\n        if (!edgeGroups[commonPrefix]) {\n            edgeGroups[commonPrefix] = [];\n        }\n        edgeGroups[commonPrefix].push(edge);\n    }\n    const seenSubgraphs = new Set();\n    function addSubgraph(edges, prefix) {\n        const selfLoop = edges.length === 1 && edges[0].source === edges[0].target;\n        if (prefix && !selfLoop) {\n            const subgraph = prefix.split(\":\").pop();\n            if (seenSubgraphs.has(subgraph)) {\n                throw new Error(`Found duplicate subgraph '${subgraph}' -- this likely means that ` + \"you're reusing a subgraph node with the same name. \" + \"Please adjust your graph to have subgraph nodes with unique names.\");\n            }\n            seenSubgraphs.add(subgraph);\n            mermaidGraph += `\\tsubgraph ${subgraph}\\n`;\n        }\n        for (const edge of edges){\n            const { source, target, data, conditional } = edge;\n            let edgeLabel = \"\";\n            if (data !== undefined) {\n                let edgeData = data;\n                const words = edgeData.split(\" \");\n                if (words.length > wrapLabelNWords) {\n                    edgeData = Array.from({\n                        length: Math.ceil(words.length / wrapLabelNWords)\n                    }, (_, i)=>words.slice(i * wrapLabelNWords, (i + 1) * wrapLabelNWords).join(\" \")).join(\"&nbsp;<br>&nbsp;\");\n                }\n                edgeLabel = conditional ? ` -. &nbsp;${edgeData}&nbsp; .-> ` : ` -- &nbsp;${edgeData}&nbsp; --> `;\n            } else {\n                edgeLabel = conditional ? \" -.-> \" : \" --> \";\n            }\n            mermaidGraph += `\\t${_escapeNodeLabel(source)}${edgeLabel}${_escapeNodeLabel(target)};\\n`;\n        }\n        // Recursively add nested subgraphs\n        for(const nestedPrefix in edgeGroups){\n            if (nestedPrefix.startsWith(`${prefix}:`) && nestedPrefix !== prefix) {\n                addSubgraph(edgeGroups[nestedPrefix], nestedPrefix);\n            }\n        }\n        if (prefix && !selfLoop) {\n            mermaidGraph += \"\tend\\n\";\n        }\n    }\n    // Start with the top-level edges (no common prefix)\n    addSubgraph(edgeGroups[\"\"] ?? [], \"\");\n    // Add remaining subgraphs\n    for(const prefix in edgeGroups){\n        if (!prefix.includes(\":\") && prefix !== \"\") {\n            addSubgraph(edgeGroups[prefix], prefix);\n        }\n    }\n    // Add custom styles for nodes\n    if (withStyles) {\n        mermaidGraph += _generateMermaidGraphStyles(nodeColors ?? {});\n    }\n    return mermaidGraph;\n}\n/**\n * @deprecated Use `drawMermaidImage` instead.\n */ async function drawMermaidPng(mermaidSyntax, config) {\n    return drawMermaidImage(mermaidSyntax, {\n        ...config,\n        imageType: \"png\"\n    });\n}\n/**\n * Renders Mermaid graph using the Mermaid.INK API.\n *\n * @example\n * ```javascript\n * const image = await drawMermaidImage(mermaidSyntax, {\n *   backgroundColor: \"white\",\n *   imageType: \"png\",\n * });\n * fs.writeFileSync(\"image.png\", image);\n * ```\n *\n * @param mermaidSyntax - The Mermaid syntax to render.\n * @param config - The configuration for the image.\n * @returns The image as a Blob.\n */ async function drawMermaidImage(mermaidSyntax, config) {\n    let backgroundColor = config?.backgroundColor ?? \"white\";\n    const imageType = config?.imageType ?? \"png\";\n    // Use btoa for compatibility, assume ASCII\n    const mermaidSyntaxEncoded = btoa(mermaidSyntax);\n    // Check if the background color is a hexadecimal color code using regex\n    if (backgroundColor !== undefined) {\n        const hexColorPattern = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n        if (!hexColorPattern.test(backgroundColor)) {\n            backgroundColor = `!${backgroundColor}`;\n        }\n    }\n    const imageUrl = `https://mermaid.ink/img/${mermaidSyntaxEncoded}?bgColor=${backgroundColor}&type=${imageType}`;\n    const res = await fetch(imageUrl);\n    if (!res.ok) {\n        throw new Error([\n            `Failed to render the graph using the Mermaid.INK API.`,\n            `Status code: ${res.status}`,\n            `Status text: ${res.statusText}`\n        ].join(\"\\n\"));\n    }\n    const content = await res.blob();\n    return content;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoX21lcm1haWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsU0FBU0EsaUJBQWlCQyxTQUFTO0lBQy9CLDZDQUE2QztJQUM3QyxPQUFPQSxVQUFVQyxPQUFPLENBQUMsbUJBQW1CO0FBQ2hEO0FBQ0EsTUFBTUMseUJBQXlCO0lBQUM7SUFBSztJQUFLO0NBQUk7QUFDOUMsU0FBU0MsNEJBQTRCQyxVQUFVO0lBQzNDLElBQUlDLFNBQVM7SUFDYixLQUFLLE1BQU0sQ0FBQ0MsV0FBV0MsTUFBTSxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLFlBQWE7UUFDekRDLFVBQVUsQ0FBQyxXQUFXLEVBQUVDLFVBQVUsQ0FBQyxFQUFFQyxNQUFNLEdBQUcsQ0FBQztJQUNuRDtJQUNBLE9BQU9GO0FBQ1g7QUFDQTs7Q0FFQyxHQUNNLFNBQVNLLFlBQVlDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxNQUFNO0lBQzVDLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxRQUFRLEVBQUVYLFVBQVUsRUFBRVksYUFBYSxJQUFJLEVBQUVDLGFBQWEsUUFBUSxFQUFFQyxrQkFBa0IsQ0FBQyxFQUFHLEdBQUdMLFVBQVUsQ0FBQztJQUN2SCx5Q0FBeUM7SUFDekMsSUFBSU0sZUFBZUgsYUFDYixDQUFDLGtDQUFrQyxFQUFFQyxXQUFXLG1CQUFtQixDQUFDLEdBQ3BFO0lBQ04sSUFBSUQsWUFBWTtRQUNaLDRCQUE0QjtRQUM1QixNQUFNSSxvQkFBb0I7UUFDMUIsTUFBTUMsYUFBYTtZQUNmLENBQUNELGtCQUFrQixFQUFFO1FBQ3pCO1FBQ0EsSUFBSU4sY0FBY1EsV0FBVztZQUN6QkQsVUFBVSxDQUFDUCxVQUFVLEdBQUc7UUFDNUI7UUFDQSxJQUFJQyxhQUFhTyxXQUFXO1lBQ3hCRCxVQUFVLENBQUNOLFNBQVMsR0FBRztRQUMzQjtRQUNBLHlCQUF5QjtRQUN6QixLQUFLLE1BQU0sQ0FBQ1EsS0FBS0MsS0FBSyxJQUFJaEIsT0FBT0MsT0FBTyxDQUFDRSxPQUFRO1lBQzdDLE1BQU1jLFdBQVdELEtBQUtFLElBQUksQ0FBQ0MsS0FBSyxDQUFDLEtBQUtDLEdBQUcsTUFBTTtZQUMvQyxNQUFNQyxRQUFRM0IsdUJBQXVCNEIsSUFBSSxDQUFDLENBQUNDLE9BQVNOLFNBQVNPLFVBQVUsQ0FBQ0QsU0FBU04sU0FBU1EsUUFBUSxDQUFDRixTQUM3RixDQUFDLEdBQUcsRUFBRU4sU0FBUyxJQUFJLENBQUMsR0FDcEJBO1lBQ04sSUFBSVMsYUFBYUw7WUFDakIsSUFBSXJCLE9BQU8yQixJQUFJLENBQUNYLEtBQUtZLFFBQVEsSUFBSSxDQUFDLEdBQUdDLE1BQU0sRUFBRTtnQkFDekNILGNBQWMsQ0FBQyxnQkFBZ0IsRUFBRTFCLE9BQU9DLE9BQU8sQ0FBQ2UsS0FBS1ksUUFBUSxJQUFJLENBQUMsR0FDN0RFLEdBQUcsQ0FBQyxDQUFDLENBQUNDLEdBQUdDLEVBQUUsR0FBSyxDQUFDLEVBQUVELEVBQUUsR0FBRyxFQUFFQyxFQUFFLENBQUMsRUFDN0JDLElBQUksQ0FBQyxNQUFNLGFBQWEsQ0FBQztZQUNsQztZQUNBLE1BQU16QyxZQUFZLENBQUNxQixVQUFVLENBQUNFLElBQUksSUFBSUYsVUFBVSxDQUFDRCxrQkFBa0IsRUFDOURuQixPQUFPLENBQUMsT0FBT0YsaUJBQWlCd0IsTUFDaEN0QixPQUFPLENBQUMsT0FBT2lDO1lBQ3BCZixnQkFBZ0IsQ0FBQyxFQUFFLEVBQUVuQixVQUFVLEVBQUUsQ0FBQztRQUN0QztJQUNKO0lBQ0EsdUNBQXVDO0lBQ3ZDLE1BQU0wQyxhQUFhLENBQUM7SUFDcEIsS0FBSyxNQUFNQyxRQUFRL0IsTUFBTztRQUN0QixNQUFNZ0MsV0FBV0QsS0FBS0UsTUFBTSxDQUFDbEIsS0FBSyxDQUFDO1FBQ25DLE1BQU1tQixXQUFXSCxLQUFLSSxNQUFNLENBQUNwQixLQUFLLENBQUM7UUFDbkMsTUFBTXFCLGVBQWVKLFNBQ2hCSyxNQUFNLENBQUMsQ0FBQ0MsS0FBS0MsSUFBTUQsUUFBUUosUUFBUSxDQUFDSyxFQUFFLEVBQ3RDVixJQUFJLENBQUM7UUFDVixJQUFJLENBQUNDLFVBQVUsQ0FBQ00sYUFBYSxFQUFFO1lBQzNCTixVQUFVLENBQUNNLGFBQWEsR0FBRyxFQUFFO1FBQ2pDO1FBQ0FOLFVBQVUsQ0FBQ00sYUFBYSxDQUFDSSxJQUFJLENBQUNUO0lBQ2xDO0lBQ0EsTUFBTVUsZ0JBQWdCLElBQUlDO0lBQzFCLFNBQVNDLFlBQVkzQyxLQUFLLEVBQUU0QyxNQUFNO1FBQzlCLE1BQU1DLFdBQVc3QyxNQUFNeUIsTUFBTSxLQUFLLEtBQUt6QixLQUFLLENBQUMsRUFBRSxDQUFDaUMsTUFBTSxLQUFLakMsS0FBSyxDQUFDLEVBQUUsQ0FBQ21DLE1BQU07UUFDMUUsSUFBSVMsVUFBVSxDQUFDQyxVQUFVO1lBQ3JCLE1BQU1DLFdBQVdGLE9BQU83QixLQUFLLENBQUMsS0FBS0MsR0FBRztZQUN0QyxJQUFJeUIsY0FBY00sR0FBRyxDQUFDRCxXQUFXO2dCQUM3QixNQUFNLElBQUlFLE1BQU0sQ0FBQywwQkFBMEIsRUFBRUYsU0FBUyw0QkFBNEIsQ0FBQyxHQUMvRSx3REFDQTtZQUNSO1lBQ0FMLGNBQWNRLEdBQUcsQ0FBQ0g7WUFDbEJ2QyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUV1QyxTQUFTLEVBQUUsQ0FBQztRQUM5QztRQUNBLEtBQUssTUFBTWYsUUFBUS9CLE1BQU87WUFDdEIsTUFBTSxFQUFFaUMsTUFBTSxFQUFFRSxNQUFNLEVBQUVlLElBQUksRUFBRUMsV0FBVyxFQUFFLEdBQUdwQjtZQUM5QyxJQUFJcUIsWUFBWTtZQUNoQixJQUFJRixTQUFTeEMsV0FBVztnQkFDcEIsSUFBSTJDLFdBQVdIO2dCQUNmLE1BQU1JLFFBQVFELFNBQVN0QyxLQUFLLENBQUM7Z0JBQzdCLElBQUl1QyxNQUFNN0IsTUFBTSxHQUFHbkIsaUJBQWlCO29CQUNoQytDLFdBQVdFLE1BQU1DLElBQUksQ0FBQzt3QkFBRS9CLFFBQVFnQyxLQUFLQyxJQUFJLENBQUNKLE1BQU03QixNQUFNLEdBQUduQjtvQkFBaUIsR0FBRyxDQUFDcUQsR0FBR3BCLElBQU1lLE1BQ2xGTSxLQUFLLENBQUNyQixJQUFJakMsaUJBQWlCLENBQUNpQyxJQUFJLEtBQUtqQyxpQkFDckN1QixJQUFJLENBQUMsTUFBTUEsSUFBSSxDQUFDO2dCQUN6QjtnQkFDQXVCLFlBQVlELGNBQ04sQ0FBQyxVQUFVLEVBQUVFLFNBQVMsV0FBVyxDQUFDLEdBQ2xDLENBQUMsVUFBVSxFQUFFQSxTQUFTLFdBQVcsQ0FBQztZQUM1QyxPQUNLO2dCQUNERCxZQUFZRCxjQUFjLFdBQVc7WUFDekM7WUFDQTVDLGdCQUFnQixDQUFDLEVBQUUsRUFBRXBCLGlCQUFpQjhDLFFBQVEsRUFBRW1CLFVBQVUsRUFBRWpFLGlCQUFpQmdELFFBQVEsR0FBRyxDQUFDO1FBQzdGO1FBQ0EsbUNBQW1DO1FBQ25DLElBQUssTUFBTTBCLGdCQUFnQi9CLFdBQVk7WUFDbkMsSUFBSStCLGFBQWF6QyxVQUFVLENBQUMsQ0FBQyxFQUFFd0IsT0FBTyxDQUFDLENBQUMsS0FBS2lCLGlCQUFpQmpCLFFBQVE7Z0JBQ2xFRCxZQUFZYixVQUFVLENBQUMrQixhQUFhLEVBQUVBO1lBQzFDO1FBQ0o7UUFDQSxJQUFJakIsVUFBVSxDQUFDQyxVQUFVO1lBQ3JCdEMsZ0JBQWdCO1FBQ3BCO0lBQ0o7SUFDQSxvREFBb0Q7SUFDcERvQyxZQUFZYixVQUFVLENBQUMsR0FBRyxJQUFJLEVBQUUsRUFBRTtJQUNsQywwQkFBMEI7SUFDMUIsSUFBSyxNQUFNYyxVQUFVZCxXQUFZO1FBQzdCLElBQUksQ0FBQ2MsT0FBT2tCLFFBQVEsQ0FBQyxRQUFRbEIsV0FBVyxJQUFJO1lBQ3hDRCxZQUFZYixVQUFVLENBQUNjLE9BQU8sRUFBRUE7UUFDcEM7SUFDSjtJQUNBLDhCQUE4QjtJQUM5QixJQUFJeEMsWUFBWTtRQUNaRyxnQkFBZ0JoQiw0QkFBNEJDLGNBQWMsQ0FBQztJQUMvRDtJQUNBLE9BQU9lO0FBQ1g7QUFDQTs7Q0FFQyxHQUNNLGVBQWV3RCxlQUFlQyxhQUFhLEVBQUUvRCxNQUFNO0lBQ3RELE9BQU9nRSxpQkFBaUJELGVBQWU7UUFDbkMsR0FBRy9ELE1BQU07UUFDVGlFLFdBQVc7SUFDZjtBQUNKO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztDQWVDLEdBQ00sZUFBZUQsaUJBQWlCRCxhQUFhLEVBQUUvRCxNQUFNO0lBQ3hELElBQUlrRSxrQkFBa0JsRSxRQUFRa0UsbUJBQW1CO0lBQ2pELE1BQU1ELFlBQVlqRSxRQUFRaUUsYUFBYTtJQUN2QywyQ0FBMkM7SUFDM0MsTUFBTUUsdUJBQXVCQyxLQUFLTDtJQUNsQyx3RUFBd0U7SUFDeEUsSUFBSUcsb0JBQW9CekQsV0FBVztRQUMvQixNQUFNNEQsa0JBQWtCO1FBQ3hCLElBQUksQ0FBQ0EsZ0JBQWdCQyxJQUFJLENBQUNKLGtCQUFrQjtZQUN4Q0Esa0JBQWtCLENBQUMsQ0FBQyxFQUFFQSxnQkFBZ0IsQ0FBQztRQUMzQztJQUNKO0lBQ0EsTUFBTUssV0FBVyxDQUFDLHdCQUF3QixFQUFFSixxQkFBcUIsU0FBUyxFQUFFRCxnQkFBZ0IsTUFBTSxFQUFFRCxVQUFVLENBQUM7SUFDL0csTUFBTU8sTUFBTSxNQUFNQyxNQUFNRjtJQUN4QixJQUFJLENBQUNDLElBQUlFLEVBQUUsRUFBRTtRQUNULE1BQU0sSUFBSTNCLE1BQU07WUFDWixDQUFDLHFEQUFxRCxDQUFDO1lBQ3ZELENBQUMsYUFBYSxFQUFFeUIsSUFBSUcsTUFBTSxDQUFDLENBQUM7WUFDNUIsQ0FBQyxhQUFhLEVBQUVILElBQUlJLFVBQVUsQ0FBQyxDQUFDO1NBQ25DLENBQUNoRCxJQUFJLENBQUM7SUFDWDtJQUNBLE1BQU1pRCxVQUFVLE1BQU1MLElBQUlNLElBQUk7SUFDOUIsT0FBT0Q7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoX21lcm1haWQuanM/NzEwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfZXNjYXBlTm9kZUxhYmVsKG5vZGVMYWJlbCkge1xuICAgIC8vIEVzY2FwZXMgdGhlIG5vZGUgbGFiZWwgZm9yIE1lcm1haWQgc3ludGF4LlxuICAgIHJldHVybiBub2RlTGFiZWwucmVwbGFjZSgvW15hLXpBLVotXzAtOV0vZywgXCJfXCIpO1xufVxuY29uc3QgTUFSS0RPV05fU1BFQ0lBTF9DSEFSUyA9IFtcIipcIiwgXCJfXCIsIFwiYFwiXTtcbmZ1bmN0aW9uIF9nZW5lcmF0ZU1lcm1haWRHcmFwaFN0eWxlcyhub2RlQ29sb3JzKSB7XG4gICAgbGV0IHN0eWxlcyA9IFwiXCI7XG4gICAgZm9yIChjb25zdCBbY2xhc3NOYW1lLCBjb2xvcl0gb2YgT2JqZWN0LmVudHJpZXMobm9kZUNvbG9ycykpIHtcbiAgICAgICAgc3R5bGVzICs9IGBcXHRjbGFzc0RlZiAke2NsYXNzTmFtZX0gJHtjb2xvcn07XFxuYDtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlcztcbn1cbi8qKlxuICogRHJhd3MgYSBNZXJtYWlkIGdyYXBoIHVzaW5nIHRoZSBwcm92aWRlZCBncmFwaCBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3TWVybWFpZChub2RlcywgZWRnZXMsIGNvbmZpZykge1xuICAgIGNvbnN0IHsgZmlyc3ROb2RlLCBsYXN0Tm9kZSwgbm9kZUNvbG9ycywgd2l0aFN0eWxlcyA9IHRydWUsIGN1cnZlU3R5bGUgPSBcImxpbmVhclwiLCB3cmFwTGFiZWxOV29yZHMgPSA5LCB9ID0gY29uZmlnID8/IHt9O1xuICAgIC8vIEluaXRpYWxpemUgTWVybWFpZCBncmFwaCBjb25maWd1cmF0aW9uXG4gICAgbGV0IG1lcm1haWRHcmFwaCA9IHdpdGhTdHlsZXNcbiAgICAgICAgPyBgJSV7aW5pdDogeydmbG93Y2hhcnQnOiB7J2N1cnZlJzogJyR7Y3VydmVTdHlsZX0nfX19JSVcXG5ncmFwaCBURDtcXG5gXG4gICAgICAgIDogXCJncmFwaCBURDtcXG5cIjtcbiAgICBpZiAod2l0aFN0eWxlcykge1xuICAgICAgICAvLyBOb2RlIGZvcm1hdHRpbmcgdGVtcGxhdGVzXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDbGFzc0xhYmVsID0gXCJkZWZhdWx0XCI7XG4gICAgICAgIGNvbnN0IGZvcm1hdERpY3QgPSB7XG4gICAgICAgICAgICBbZGVmYXVsdENsYXNzTGFiZWxdOiBcInswfSh7MX0pXCIsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmaXJzdE5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9ybWF0RGljdFtmaXJzdE5vZGVdID0gXCJ7MH0oW3sxfV0pOjo6Zmlyc3RcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdE5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9ybWF0RGljdFtsYXN0Tm9kZV0gPSBcInswfShbezF9XSk6OjpsYXN0XCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIG5vZGVzIHRvIHRoZSBncmFwaFxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIG5vZGVdIG9mIE9iamVjdC5lbnRyaWVzKG5vZGVzKSkge1xuICAgICAgICAgICAgY29uc3Qgbm9kZU5hbWUgPSBub2RlLm5hbWUuc3BsaXQoXCI6XCIpLnBvcCgpID8/IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IE1BUktET1dOX1NQRUNJQUxfQ0hBUlMuc29tZSgoY2hhcikgPT4gbm9kZU5hbWUuc3RhcnRzV2l0aChjaGFyKSAmJiBub2RlTmFtZS5lbmRzV2l0aChjaGFyKSlcbiAgICAgICAgICAgICAgICA/IGA8cD4ke25vZGVOYW1lfTwvcD5gXG4gICAgICAgICAgICAgICAgOiBub2RlTmFtZTtcbiAgICAgICAgICAgIGxldCBmaW5hbExhYmVsID0gbGFiZWw7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobm9kZS5tZXRhZGF0YSA/PyB7fSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZmluYWxMYWJlbCArPSBgPGhyLz48c21hbGw+PGVtPiR7T2JqZWN0LmVudHJpZXMobm9kZS5tZXRhZGF0YSA/PyB7fSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoW2ssIHZdKSA9PiBgJHtrfSA9ICR7dn1gKVxuICAgICAgICAgICAgICAgICAgICAuam9pbihcIlxcblwiKX08L2VtPjwvc21hbGw+YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5vZGVMYWJlbCA9IChmb3JtYXREaWN0W2tleV0gPz8gZm9ybWF0RGljdFtkZWZhdWx0Q2xhc3NMYWJlbF0pXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJ7MH1cIiwgX2VzY2FwZU5vZGVMYWJlbChrZXkpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiezF9XCIsIGZpbmFsTGFiZWwpO1xuICAgICAgICAgICAgbWVybWFpZEdyYXBoICs9IGBcXHQke25vZGVMYWJlbH1cXG5gO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEdyb3VwIGVkZ2VzIGJ5IHRoZWlyIGNvbW1vbiBwcmVmaXhlc1xuICAgIGNvbnN0IGVkZ2VHcm91cHMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGVkZ2Ugb2YgZWRnZXMpIHtcbiAgICAgICAgY29uc3Qgc3JjUGFydHMgPSBlZGdlLnNvdXJjZS5zcGxpdChcIjpcIik7XG4gICAgICAgIGNvbnN0IHRndFBhcnRzID0gZWRnZS50YXJnZXQuc3BsaXQoXCI6XCIpO1xuICAgICAgICBjb25zdCBjb21tb25QcmVmaXggPSBzcmNQYXJ0c1xuICAgICAgICAgICAgLmZpbHRlcigoc3JjLCBpKSA9PiBzcmMgPT09IHRndFBhcnRzW2ldKVxuICAgICAgICAgICAgLmpvaW4oXCI6XCIpO1xuICAgICAgICBpZiAoIWVkZ2VHcm91cHNbY29tbW9uUHJlZml4XSkge1xuICAgICAgICAgICAgZWRnZUdyb3Vwc1tjb21tb25QcmVmaXhdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZWRnZUdyb3Vwc1tjb21tb25QcmVmaXhdLnB1c2goZWRnZSk7XG4gICAgfVxuICAgIGNvbnN0IHNlZW5TdWJncmFwaHMgPSBuZXcgU2V0KCk7XG4gICAgZnVuY3Rpb24gYWRkU3ViZ3JhcGgoZWRnZXMsIHByZWZpeCkge1xuICAgICAgICBjb25zdCBzZWxmTG9vcCA9IGVkZ2VzLmxlbmd0aCA9PT0gMSAmJiBlZGdlc1swXS5zb3VyY2UgPT09IGVkZ2VzWzBdLnRhcmdldDtcbiAgICAgICAgaWYgKHByZWZpeCAmJiAhc2VsZkxvb3ApIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YmdyYXBoID0gcHJlZml4LnNwbGl0KFwiOlwiKS5wb3AoKTtcbiAgICAgICAgICAgIGlmIChzZWVuU3ViZ3JhcGhzLmhhcyhzdWJncmFwaCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZvdW5kIGR1cGxpY2F0ZSBzdWJncmFwaCAnJHtzdWJncmFwaH0nIC0tIHRoaXMgbGlrZWx5IG1lYW5zIHRoYXQgYCArXG4gICAgICAgICAgICAgICAgICAgIFwieW91J3JlIHJldXNpbmcgYSBzdWJncmFwaCBub2RlIHdpdGggdGhlIHNhbWUgbmFtZS4gXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIlBsZWFzZSBhZGp1c3QgeW91ciBncmFwaCB0byBoYXZlIHN1YmdyYXBoIG5vZGVzIHdpdGggdW5pcXVlIG5hbWVzLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlZW5TdWJncmFwaHMuYWRkKHN1YmdyYXBoKTtcbiAgICAgICAgICAgIG1lcm1haWRHcmFwaCArPSBgXFx0c3ViZ3JhcGggJHtzdWJncmFwaH1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZWRnZSBvZiBlZGdlcykge1xuICAgICAgICAgICAgY29uc3QgeyBzb3VyY2UsIHRhcmdldCwgZGF0YSwgY29uZGl0aW9uYWwgfSA9IGVkZ2U7XG4gICAgICAgICAgICBsZXQgZWRnZUxhYmVsID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZWRnZURhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmRzID0gZWRnZURhdGEuc3BsaXQoXCIgXCIpO1xuICAgICAgICAgICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPiB3cmFwTGFiZWxOV29yZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRnZURhdGEgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBNYXRoLmNlaWwod29yZHMubGVuZ3RoIC8gd3JhcExhYmVsTldvcmRzKSB9LCAoXywgaSkgPT4gd29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZShpICogd3JhcExhYmVsTldvcmRzLCAoaSArIDEpICogd3JhcExhYmVsTldvcmRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCIgXCIpKS5qb2luKFwiJm5ic3A7PGJyPiZuYnNwO1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWRnZUxhYmVsID0gY29uZGl0aW9uYWxcbiAgICAgICAgICAgICAgICAgICAgPyBgIC0uICZuYnNwOyR7ZWRnZURhdGF9Jm5ic3A7IC4tPiBgXG4gICAgICAgICAgICAgICAgICAgIDogYCAtLSAmbmJzcDske2VkZ2VEYXRhfSZuYnNwOyAtLT4gYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVkZ2VMYWJlbCA9IGNvbmRpdGlvbmFsID8gXCIgLS4tPiBcIiA6IFwiIC0tPiBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lcm1haWRHcmFwaCArPSBgXFx0JHtfZXNjYXBlTm9kZUxhYmVsKHNvdXJjZSl9JHtlZGdlTGFiZWx9JHtfZXNjYXBlTm9kZUxhYmVsKHRhcmdldCl9O1xcbmA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgYWRkIG5lc3RlZCBzdWJncmFwaHNcbiAgICAgICAgZm9yIChjb25zdCBuZXN0ZWRQcmVmaXggaW4gZWRnZUdyb3Vwcykge1xuICAgICAgICAgICAgaWYgKG5lc3RlZFByZWZpeC5zdGFydHNXaXRoKGAke3ByZWZpeH06YCkgJiYgbmVzdGVkUHJlZml4ICE9PSBwcmVmaXgpIHtcbiAgICAgICAgICAgICAgICBhZGRTdWJncmFwaChlZGdlR3JvdXBzW25lc3RlZFByZWZpeF0sIG5lc3RlZFByZWZpeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZWZpeCAmJiAhc2VsZkxvb3ApIHtcbiAgICAgICAgICAgIG1lcm1haWRHcmFwaCArPSBcIlxcdGVuZFxcblwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFN0YXJ0IHdpdGggdGhlIHRvcC1sZXZlbCBlZGdlcyAobm8gY29tbW9uIHByZWZpeClcbiAgICBhZGRTdWJncmFwaChlZGdlR3JvdXBzW1wiXCJdID8/IFtdLCBcIlwiKTtcbiAgICAvLyBBZGQgcmVtYWluaW5nIHN1YmdyYXBoc1xuICAgIGZvciAoY29uc3QgcHJlZml4IGluIGVkZ2VHcm91cHMpIHtcbiAgICAgICAgaWYgKCFwcmVmaXguaW5jbHVkZXMoXCI6XCIpICYmIHByZWZpeCAhPT0gXCJcIikge1xuICAgICAgICAgICAgYWRkU3ViZ3JhcGgoZWRnZUdyb3Vwc1twcmVmaXhdLCBwcmVmaXgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFkZCBjdXN0b20gc3R5bGVzIGZvciBub2Rlc1xuICAgIGlmICh3aXRoU3R5bGVzKSB7XG4gICAgICAgIG1lcm1haWRHcmFwaCArPSBfZ2VuZXJhdGVNZXJtYWlkR3JhcGhTdHlsZXMobm9kZUNvbG9ycyA/PyB7fSk7XG4gICAgfVxuICAgIHJldHVybiBtZXJtYWlkR3JhcGg7XG59XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBgZHJhd01lcm1haWRJbWFnZWAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRyYXdNZXJtYWlkUG5nKG1lcm1haWRTeW50YXgsIGNvbmZpZykge1xuICAgIHJldHVybiBkcmF3TWVybWFpZEltYWdlKG1lcm1haWRTeW50YXgsIHtcbiAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICBpbWFnZVR5cGU6IFwicG5nXCIsXG4gICAgfSk7XG59XG4vKipcbiAqIFJlbmRlcnMgTWVybWFpZCBncmFwaCB1c2luZyB0aGUgTWVybWFpZC5JTksgQVBJLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBjb25zdCBpbWFnZSA9IGF3YWl0IGRyYXdNZXJtYWlkSW1hZ2UobWVybWFpZFN5bnRheCwge1xuICogICBiYWNrZ3JvdW5kQ29sb3I6IFwid2hpdGVcIixcbiAqICAgaW1hZ2VUeXBlOiBcInBuZ1wiLFxuICogfSk7XG4gKiBmcy53cml0ZUZpbGVTeW5jKFwiaW1hZ2UucG5nXCIsIGltYWdlKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBtZXJtYWlkU3ludGF4IC0gVGhlIE1lcm1haWQgc3ludGF4IHRvIHJlbmRlci5cbiAqIEBwYXJhbSBjb25maWcgLSBUaGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIGltYWdlLlxuICogQHJldHVybnMgVGhlIGltYWdlIGFzIGEgQmxvYi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRyYXdNZXJtYWlkSW1hZ2UobWVybWFpZFN5bnRheCwgY29uZmlnKSB7XG4gICAgbGV0IGJhY2tncm91bmRDb2xvciA9IGNvbmZpZz8uYmFja2dyb3VuZENvbG9yID8/IFwid2hpdGVcIjtcbiAgICBjb25zdCBpbWFnZVR5cGUgPSBjb25maWc/LmltYWdlVHlwZSA/PyBcInBuZ1wiO1xuICAgIC8vIFVzZSBidG9hIGZvciBjb21wYXRpYmlsaXR5LCBhc3N1bWUgQVNDSUlcbiAgICBjb25zdCBtZXJtYWlkU3ludGF4RW5jb2RlZCA9IGJ0b2EobWVybWFpZFN5bnRheCk7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIGJhY2tncm91bmQgY29sb3IgaXMgYSBoZXhhZGVjaW1hbCBjb2xvciBjb2RlIHVzaW5nIHJlZ2V4XG4gICAgaWYgKGJhY2tncm91bmRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGhleENvbG9yUGF0dGVybiA9IC9eIyg/OlswLTlhLWZBLUZdezN9KXsxLDJ9JC87XG4gICAgICAgIGlmICghaGV4Q29sb3JQYXR0ZXJuLnRlc3QoYmFja2dyb3VuZENvbG9yKSkge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gYCEke2JhY2tncm91bmRDb2xvcn1gO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGltYWdlVXJsID0gYGh0dHBzOi8vbWVybWFpZC5pbmsvaW1nLyR7bWVybWFpZFN5bnRheEVuY29kZWR9P2JnQ29sb3I9JHtiYWNrZ3JvdW5kQ29sb3J9JnR5cGU9JHtpbWFnZVR5cGV9YDtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChpbWFnZVVybCk7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFtcbiAgICAgICAgICAgIGBGYWlsZWQgdG8gcmVuZGVyIHRoZSBncmFwaCB1c2luZyB0aGUgTWVybWFpZC5JTksgQVBJLmAsXG4gICAgICAgICAgICBgU3RhdHVzIGNvZGU6ICR7cmVzLnN0YXR1c31gLFxuICAgICAgICAgICAgYFN0YXR1cyB0ZXh0OiAke3Jlcy5zdGF0dXNUZXh0fWAsXG4gICAgICAgIF0uam9pbihcIlxcblwiKSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCByZXMuYmxvYigpO1xuICAgIHJldHVybiBjb250ZW50O1xufVxuIl0sIm5hbWVzIjpbIl9lc2NhcGVOb2RlTGFiZWwiLCJub2RlTGFiZWwiLCJyZXBsYWNlIiwiTUFSS0RPV05fU1BFQ0lBTF9DSEFSUyIsIl9nZW5lcmF0ZU1lcm1haWRHcmFwaFN0eWxlcyIsIm5vZGVDb2xvcnMiLCJzdHlsZXMiLCJjbGFzc05hbWUiLCJjb2xvciIsIk9iamVjdCIsImVudHJpZXMiLCJkcmF3TWVybWFpZCIsIm5vZGVzIiwiZWRnZXMiLCJjb25maWciLCJmaXJzdE5vZGUiLCJsYXN0Tm9kZSIsIndpdGhTdHlsZXMiLCJjdXJ2ZVN0eWxlIiwid3JhcExhYmVsTldvcmRzIiwibWVybWFpZEdyYXBoIiwiZGVmYXVsdENsYXNzTGFiZWwiLCJmb3JtYXREaWN0IiwidW5kZWZpbmVkIiwia2V5Iiwibm9kZSIsIm5vZGVOYW1lIiwibmFtZSIsInNwbGl0IiwicG9wIiwibGFiZWwiLCJzb21lIiwiY2hhciIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsImZpbmFsTGFiZWwiLCJrZXlzIiwibWV0YWRhdGEiLCJsZW5ndGgiLCJtYXAiLCJrIiwidiIsImpvaW4iLCJlZGdlR3JvdXBzIiwiZWRnZSIsInNyY1BhcnRzIiwic291cmNlIiwidGd0UGFydHMiLCJ0YXJnZXQiLCJjb21tb25QcmVmaXgiLCJmaWx0ZXIiLCJzcmMiLCJpIiwicHVzaCIsInNlZW5TdWJncmFwaHMiLCJTZXQiLCJhZGRTdWJncmFwaCIsInByZWZpeCIsInNlbGZMb29wIiwic3ViZ3JhcGgiLCJoYXMiLCJFcnJvciIsImFkZCIsImRhdGEiLCJjb25kaXRpb25hbCIsImVkZ2VMYWJlbCIsImVkZ2VEYXRhIiwid29yZHMiLCJBcnJheSIsImZyb20iLCJNYXRoIiwiY2VpbCIsIl8iLCJzbGljZSIsIm5lc3RlZFByZWZpeCIsImluY2x1ZGVzIiwiZHJhd01lcm1haWRQbmciLCJtZXJtYWlkU3ludGF4IiwiZHJhd01lcm1haWRJbWFnZSIsImltYWdlVHlwZSIsImJhY2tncm91bmRDb2xvciIsIm1lcm1haWRTeW50YXhFbmNvZGVkIiwiYnRvYSIsImhleENvbG9yUGF0dGVybiIsInRlc3QiLCJpbWFnZVVybCIsInJlcyIsImZldGNoIiwib2siLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiY29udGVudCIsImJsb2IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/graph_mermaid.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/history.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/history.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnableWithMessageHistory: () => (/* binding */ RunnableWithMessageHistory)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _passthrough_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./passthrough.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n\n\n\n/**\n * Wraps a LCEL chain and manages history. It appends input messages\n * and chain outputs as history, and adds the current history messages to\n * the chain input.\n * @example\n * ```typescript\n * // yarn add @langchain/anthropic @langchain/community @upstash/redis\n *\n * import {\n *   ChatPromptTemplate,\n *   MessagesPlaceholder,\n * } from \"@langchain/core/prompts\";\n * import { ChatAnthropic } from \"@langchain/anthropic\";\n * import { UpstashRedisChatMessageHistory } from \"@langchain/community/stores/message/upstash_redis\";\n * // For demos, you can also use an in-memory store:\n * // import { ChatMessageHistory } from \"langchain/stores/message/in_memory\";\n *\n * const prompt = ChatPromptTemplate.fromMessages([\n *   [\"system\", \"You're an assistant who's good at {ability}\"],\n *   new MessagesPlaceholder(\"history\"),\n *   [\"human\", \"{question}\"],\n * ]);\n *\n * const chain = prompt.pipe(new ChatAnthropic({}));\n *\n * const chainWithHistory = new RunnableWithMessageHistory({\n *   runnable: chain,\n *   getMessageHistory: (sessionId) =>\n *     new UpstashRedisChatMessageHistory({\n *       sessionId,\n *       config: {\n *         url: process.env.UPSTASH_REDIS_REST_URL!,\n *         token: process.env.UPSTASH_REDIS_REST_TOKEN!,\n *       },\n *     }),\n *   inputMessagesKey: \"question\",\n *   historyMessagesKey: \"history\",\n * });\n *\n * const result = await chainWithHistory.invoke(\n *   {\n *     ability: \"math\",\n *     question: \"What does cosine mean?\",\n *   },\n *   {\n *     configurable: {\n *       sessionId: \"some_string_identifying_a_user\",\n *     },\n *   }\n * );\n *\n * const result2 = await chainWithHistory.invoke(\n *   {\n *     ability: \"math\",\n *     question: \"What's its inverse?\",\n *   },\n *   {\n *     configurable: {\n *       sessionId: \"some_string_identifying_a_user\",\n *     },\n *   }\n * );\n * ```\n */ class RunnableWithMessageHistory extends _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableBinding {\n    constructor(fields){\n        let historyChain = _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableLambda.from((input, options)=>this._enterHistory(input, options ?? {})).withConfig({\n            runName: \"loadHistory\"\n        });\n        const messagesKey = fields.historyMessagesKey ?? fields.inputMessagesKey;\n        if (messagesKey) {\n            historyChain = _passthrough_js__WEBPACK_IMPORTED_MODULE_2__.RunnablePassthrough.assign({\n                [messagesKey]: historyChain\n            }).withConfig({\n                runName: \"insertHistory\"\n            });\n        }\n        const bound = historyChain.pipe(fields.runnable.withListeners({\n            onEnd: (run, config)=>this._exitHistory(run, config ?? {})\n        })).withConfig({\n            runName: \"RunnableWithMessageHistory\"\n        });\n        const config = fields.config ?? {};\n        super({\n            ...fields,\n            config,\n            bound\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"historyMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"getMessageHistory\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.getMessageHistory = fields.getMessageHistory;\n        this.inputMessagesKey = fields.inputMessagesKey;\n        this.outputMessagesKey = fields.outputMessagesKey;\n        this.historyMessagesKey = fields.historyMessagesKey;\n    }\n    _getInputMessages(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    inputValue) {\n        let parsedInputValue;\n        if (typeof inputValue === \"object\" && !Array.isArray(inputValue) && !(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(inputValue)) {\n            let key;\n            if (this.inputMessagesKey) {\n                key = this.inputMessagesKey;\n            } else if (Object.keys(inputValue).length === 1) {\n                key = Object.keys(inputValue)[0];\n            } else {\n                key = \"input\";\n            }\n            if (Array.isArray(inputValue[key]) && Array.isArray(inputValue[key][0])) {\n                parsedInputValue = inputValue[key][0];\n            } else {\n                parsedInputValue = inputValue[key];\n            }\n        } else {\n            parsedInputValue = inputValue;\n        }\n        if (typeof parsedInputValue === \"string\") {\n            return [\n                new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage(parsedInputValue)\n            ];\n        } else if (Array.isArray(parsedInputValue)) {\n            return parsedInputValue;\n        } else if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(parsedInputValue)) {\n            return [\n                parsedInputValue\n            ];\n        } else {\n            throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.\\nGot ${JSON.stringify(parsedInputValue, null, 2)}`);\n        }\n    }\n    _getOutputMessages(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    outputValue) {\n        let parsedOutputValue;\n        if (!Array.isArray(outputValue) && !(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(outputValue) && typeof outputValue !== \"string\") {\n            let key;\n            if (this.outputMessagesKey !== undefined) {\n                key = this.outputMessagesKey;\n            } else if (Object.keys(outputValue).length === 1) {\n                key = Object.keys(outputValue)[0];\n            } else {\n                key = \"output\";\n            }\n            // If you are wrapping a chat model directly\n            // The output is actually this weird generations object\n            if (outputValue.generations !== undefined) {\n                parsedOutputValue = outputValue.generations[0][0].message;\n            } else {\n                parsedOutputValue = outputValue[key];\n            }\n        } else {\n            parsedOutputValue = outputValue;\n        }\n        if (typeof parsedOutputValue === \"string\") {\n            return [\n                new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(parsedOutputValue)\n            ];\n        } else if (Array.isArray(parsedOutputValue)) {\n            return parsedOutputValue;\n        } else if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(parsedOutputValue)) {\n            return [\n                parsedOutputValue\n            ];\n        } else {\n            throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(parsedOutputValue, null, 2)}`);\n        }\n    }\n    async _enterHistory(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    input, kwargs) {\n        const history = kwargs?.configurable?.messageHistory;\n        const messages = await history.getMessages();\n        if (this.historyMessagesKey === undefined) {\n            return messages.concat(this._getInputMessages(input));\n        }\n        return messages;\n    }\n    async _exitHistory(run, config) {\n        const history = config.configurable?.messageHistory;\n        // Get input messages\n        let inputs;\n        // Chat model inputs are nested arrays\n        if (Array.isArray(run.inputs) && Array.isArray(run.inputs[0])) {\n            inputs = run.inputs[0];\n        } else {\n            inputs = run.inputs;\n        }\n        let inputMessages = this._getInputMessages(inputs);\n        // If historic messages were prepended to the input messages, remove them to\n        // avoid adding duplicate messages to history.\n        if (this.historyMessagesKey === undefined) {\n            const existingMessages = await history.getMessages();\n            inputMessages = inputMessages.slice(existingMessages.length);\n        }\n        // Get output messages\n        const outputValue = run.outputs;\n        if (!outputValue) {\n            throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(run, null, 2)}`);\n        }\n        const outputMessages = this._getOutputMessages(outputValue);\n        await history.addMessages([\n            ...inputMessages,\n            ...outputMessages\n        ]);\n    }\n    async _mergeConfig(...configs) {\n        const config = await super._mergeConfig(...configs);\n        // Extract sessionId\n        if (!config.configurable || !config.configurable.sessionId) {\n            const exampleInput = {\n                [this.inputMessagesKey ?? \"input\"]: \"foo\"\n            };\n            const exampleConfig = {\n                configurable: {\n                    sessionId: \"123\"\n                }\n            };\n            throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()\\n` + `eg. chain.invoke(${JSON.stringify(exampleInput)}, ${JSON.stringify(exampleConfig)})`);\n        }\n        // attach messageHistory\n        const { sessionId } = config.configurable;\n        config.configurable.messageHistory = await this.getMessageHistory(sessionId);\n        return config;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2hpc3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErRTtBQUNsQjtBQUNOO0FBQ3ZEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0ErREMsR0FDTSxNQUFNTSxtQ0FBbUNILHFEQUFlQTtJQUMzREksWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLElBQUlDLGVBQWVMLG9EQUFjQSxDQUFDTSxJQUFJLENBQUMsQ0FBQ0MsT0FBT0MsVUFBWSxJQUFJLENBQUNDLGFBQWEsQ0FBQ0YsT0FBT0MsV0FBVyxDQUFDLElBQUlFLFVBQVUsQ0FBQztZQUFFQyxTQUFTO1FBQWM7UUFDekksTUFBTUMsY0FBY1IsT0FBT1Msa0JBQWtCLElBQUlULE9BQU9VLGdCQUFnQjtRQUN4RSxJQUFJRixhQUFhO1lBQ2JQLGVBQWVKLGdFQUFtQkEsQ0FBQ2MsTUFBTSxDQUFDO2dCQUN0QyxDQUFDSCxZQUFZLEVBQUVQO1lBQ25CLEdBQUdLLFVBQVUsQ0FBQztnQkFBRUMsU0FBUztZQUFnQjtRQUM3QztRQUNBLE1BQU1LLFFBQVFYLGFBQ1RZLElBQUksQ0FBQ2IsT0FBT2MsUUFBUSxDQUFDQyxhQUFhLENBQUM7WUFDcENDLE9BQU8sQ0FBQ0MsS0FBS0MsU0FBVyxJQUFJLENBQUNDLFlBQVksQ0FBQ0YsS0FBS0MsVUFBVSxDQUFDO1FBQzlELElBQ0taLFVBQVUsQ0FBQztZQUFFQyxTQUFTO1FBQTZCO1FBQ3hELE1BQU1XLFNBQVNsQixPQUFPa0IsTUFBTSxJQUFJLENBQUM7UUFDakMsS0FBSyxDQUFDO1lBQ0YsR0FBR2xCLE1BQU07WUFDVGtCO1lBQ0FOO1FBQ0o7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFD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RUFBRSxFQUFFeEIsS0FBS0MsU0FBUyxDQUFDd0IsZUFBZSxDQUFDLENBQUM7UUFDN0Y7UUFDQSx3QkFBd0I7UUFDeEIsTUFBTSxFQUFFRixTQUFTLEVBQUUsR0FBRzFDLE9BQU9LLFlBQVk7UUFDekNMLE9BQU9LLFlBQVksQ0FBQ3dCLGNBQWMsR0FBRyxNQUFNLElBQUksQ0FBQ3JCLGlCQUFpQixDQUFDa0M7UUFDbEUsT0FBTzFDO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2hpc3RvcnkuanM/YmFmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBSU1lc3NhZ2UsIEh1bWFuTWVzc2FnZSwgaXNCYXNlTWVzc2FnZSwgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlQmluZGluZywgUnVubmFibGVMYW1iZGEsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVQYXNzdGhyb3VnaCB9IGZyb20gXCIuL3Bhc3N0aHJvdWdoLmpzXCI7XG4vKipcbiAqIFdyYXBzIGEgTENFTCBjaGFpbiBhbmQgbWFuYWdlcyBoaXN0b3J5LiBJdCBhcHBlbmRzIGlucHV0IG1lc3NhZ2VzXG4gKiBhbmQgY2hhaW4gb3V0cHV0cyBhcyBoaXN0b3J5LCBhbmQgYWRkcyB0aGUgY3VycmVudCBoaXN0b3J5IG1lc3NhZ2VzIHRvXG4gKiB0aGUgY2hhaW4gaW5wdXQuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogLy8geWFybiBhZGQgQGxhbmdjaGFpbi9hbnRocm9waWMgQGxhbmdjaGFpbi9jb21tdW5pdHkgQHVwc3Rhc2gvcmVkaXNcbiAqXG4gKiBpbXBvcnQge1xuICogICBDaGF0UHJvbXB0VGVtcGxhdGUsXG4gKiAgIE1lc3NhZ2VzUGxhY2Vob2xkZXIsXG4gKiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcHJvbXB0c1wiO1xuICogaW1wb3J0IHsgQ2hhdEFudGhyb3BpYyB9IGZyb20gXCJAbGFuZ2NoYWluL2FudGhyb3BpY1wiO1xuICogaW1wb3J0IHsgVXBzdGFzaFJlZGlzQ2hhdE1lc3NhZ2VIaXN0b3J5IH0gZnJvbSBcIkBsYW5nY2hhaW4vY29tbXVuaXR5L3N0b3Jlcy9tZXNzYWdlL3Vwc3Rhc2hfcmVkaXNcIjtcbiAqIC8vIEZvciBkZW1vcywgeW91IGNhbiBhbHNvIHVzZSBhbiBpbi1tZW1vcnkgc3RvcmU6XG4gKiAvLyBpbXBvcnQgeyBDaGF0TWVzc2FnZUhpc3RvcnkgfSBmcm9tIFwibGFuZ2NoYWluL3N0b3Jlcy9tZXNzYWdlL2luX21lbW9yeVwiO1xuICpcbiAqIGNvbnN0IHByb21wdCA9IENoYXRQcm9tcHRUZW1wbGF0ZS5mcm9tTWVzc2FnZXMoW1xuICogICBbXCJzeXN0ZW1cIiwgXCJZb3UncmUgYW4gYXNzaXN0YW50IHdobydzIGdvb2QgYXQge2FiaWxpdHl9XCJdLFxuICogICBuZXcgTWVzc2FnZXNQbGFjZWhvbGRlcihcImhpc3RvcnlcIiksXG4gKiAgIFtcImh1bWFuXCIsIFwie3F1ZXN0aW9ufVwiXSxcbiAqIF0pO1xuICpcbiAqIGNvbnN0IGNoYWluID0gcHJvbXB0LnBpcGUobmV3IENoYXRBbnRocm9waWMoe30pKTtcbiAqXG4gKiBjb25zdCBjaGFpbldpdGhIaXN0b3J5ID0gbmV3IFJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5KHtcbiAqICAgcnVubmFibGU6IGNoYWluLFxuICogICBnZXRNZXNzYWdlSGlzdG9yeTogKHNlc3Npb25JZCkgPT5cbiAqICAgICBuZXcgVXBzdGFzaFJlZGlzQ2hhdE1lc3NhZ2VIaXN0b3J5KHtcbiAqICAgICAgIHNlc3Npb25JZCxcbiAqICAgICAgIGNvbmZpZzoge1xuICogICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9VUkwhLFxuICogICAgICAgICB0b2tlbjogcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1RPS0VOISxcbiAqICAgICAgIH0sXG4gKiAgICAgfSksXG4gKiAgIGlucHV0TWVzc2FnZXNLZXk6IFwicXVlc3Rpb25cIixcbiAqICAgaGlzdG9yeU1lc3NhZ2VzS2V5OiBcImhpc3RvcnlcIixcbiAqIH0pO1xuICpcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoYWluV2l0aEhpc3RvcnkuaW52b2tlKFxuICogICB7XG4gKiAgICAgYWJpbGl0eTogXCJtYXRoXCIsXG4gKiAgICAgcXVlc3Rpb246IFwiV2hhdCBkb2VzIGNvc2luZSBtZWFuP1wiLFxuICogICB9LFxuICogICB7XG4gKiAgICAgY29uZmlndXJhYmxlOiB7XG4gKiAgICAgICBzZXNzaW9uSWQ6IFwic29tZV9zdHJpbmdfaWRlbnRpZnlpbmdfYV91c2VyXCIsXG4gKiAgICAgfSxcbiAqICAgfVxuICogKTtcbiAqXG4gKiBjb25zdCByZXN1bHQyID0gYXdhaXQgY2hhaW5XaXRoSGlzdG9yeS5pbnZva2UoXG4gKiAgIHtcbiAqICAgICBhYmlsaXR5OiBcIm1hdGhcIixcbiAqICAgICBxdWVzdGlvbjogXCJXaGF0J3MgaXRzIGludmVyc2U/XCIsXG4gKiAgIH0sXG4gKiAgIHtcbiAqICAgICBjb25maWd1cmFibGU6IHtcbiAqICAgICAgIHNlc3Npb25JZDogXCJzb21lX3N0cmluZ19pZGVudGlmeWluZ19hX3VzZXJcIixcbiAqICAgICB9LFxuICogICB9XG4gKiApO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVdpdGhNZXNzYWdlSGlzdG9yeSBleHRlbmRzIFJ1bm5hYmxlQmluZGluZyB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGxldCBoaXN0b3J5Q2hhaW4gPSBSdW5uYWJsZUxhbWJkYS5mcm9tKChpbnB1dCwgb3B0aW9ucykgPT4gdGhpcy5fZW50ZXJIaXN0b3J5KGlucHV0LCBvcHRpb25zID8/IHt9KSkud2l0aENvbmZpZyh7IHJ1bk5hbWU6IFwibG9hZEhpc3RvcnlcIiB9KTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXNLZXkgPSBmaWVsZHMuaGlzdG9yeU1lc3NhZ2VzS2V5ID8/IGZpZWxkcy5pbnB1dE1lc3NhZ2VzS2V5O1xuICAgICAgICBpZiAobWVzc2FnZXNLZXkpIHtcbiAgICAgICAgICAgIGhpc3RvcnlDaGFpbiA9IFJ1bm5hYmxlUGFzc3Rocm91Z2guYXNzaWduKHtcbiAgICAgICAgICAgICAgICBbbWVzc2FnZXNLZXldOiBoaXN0b3J5Q2hhaW4sXG4gICAgICAgICAgICB9KS53aXRoQ29uZmlnKHsgcnVuTmFtZTogXCJpbnNlcnRIaXN0b3J5XCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm91bmQgPSBoaXN0b3J5Q2hhaW5cbiAgICAgICAgICAgIC5waXBlKGZpZWxkcy5ydW5uYWJsZS53aXRoTGlzdGVuZXJzKHtcbiAgICAgICAgICAgIG9uRW5kOiAocnVuLCBjb25maWcpID0+IHRoaXMuX2V4aXRIaXN0b3J5KHJ1biwgY29uZmlnID8/IHt9KSxcbiAgICAgICAgfSkpXG4gICAgICAgICAgICAud2l0aENvbmZpZyh7IHJ1bk5hbWU6IFwiUnVubmFibGVXaXRoTWVzc2FnZUhpc3RvcnlcIiB9KTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZmllbGRzLmNvbmZpZyA/PyB7fTtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgYm91bmQsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5uYWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnB1dE1lc3NhZ2VzS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm91dHB1dE1lc3NhZ2VzS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhpc3RvcnlNZXNzYWdlc0tleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZXRNZXNzYWdlSGlzdG9yeVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJ1bm5hYmxlID0gZmllbGRzLnJ1bm5hYmxlO1xuICAgICAgICB0aGlzLmdldE1lc3NhZ2VIaXN0b3J5ID0gZmllbGRzLmdldE1lc3NhZ2VIaXN0b3J5O1xuICAgICAgICB0aGlzLmlucHV0TWVzc2FnZXNLZXkgPSBmaWVsZHMuaW5wdXRNZXNzYWdlc0tleTtcbiAgICAgICAgdGhpcy5vdXRwdXRNZXNzYWdlc0tleSA9IGZpZWxkcy5vdXRwdXRNZXNzYWdlc0tleTtcbiAgICAgICAgdGhpcy5oaXN0b3J5TWVzc2FnZXNLZXkgPSBmaWVsZHMuaGlzdG9yeU1lc3NhZ2VzS2V5O1xuICAgIH1cbiAgICBfZ2V0SW5wdXRNZXNzYWdlcyhcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlucHV0VmFsdWUpIHtcbiAgICAgICAgbGV0IHBhcnNlZElucHV0VmFsdWU7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXRWYWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgIUFycmF5LmlzQXJyYXkoaW5wdXRWYWx1ZSkgJiZcbiAgICAgICAgICAgICFpc0Jhc2VNZXNzYWdlKGlucHV0VmFsdWUpKSB7XG4gICAgICAgICAgICBsZXQga2V5O1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXRNZXNzYWdlc0tleSkge1xuICAgICAgICAgICAgICAgIGtleSA9IHRoaXMuaW5wdXRNZXNzYWdlc0tleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKE9iamVjdC5rZXlzKGlucHV0VmFsdWUpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGtleSA9IE9iamVjdC5rZXlzKGlucHV0VmFsdWUpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAga2V5ID0gXCJpbnB1dFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXRWYWx1ZVtrZXldKSAmJiBBcnJheS5pc0FycmF5KGlucHV0VmFsdWVba2V5XVswXSkpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRJbnB1dFZhbHVlID0gaW5wdXRWYWx1ZVtrZXldWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkSW5wdXRWYWx1ZSA9IGlucHV0VmFsdWVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZElucHV0VmFsdWUgPSBpbnB1dFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcGFyc2VkSW5wdXRWYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtuZXcgSHVtYW5NZXNzYWdlKHBhcnNlZElucHV0VmFsdWUpXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZElucHV0VmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkSW5wdXRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0Jhc2VNZXNzYWdlKHBhcnNlZElucHV0VmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3BhcnNlZElucHV0VmFsdWVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhIHN0cmluZywgQmFzZU1lc3NhZ2UsIG9yIGFycmF5IG9mIEJhc2VNZXNzYWdlcy5cXG5Hb3QgJHtKU09OLnN0cmluZ2lmeShwYXJzZWRJbnB1dFZhbHVlLCBudWxsLCAyKX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0T3V0cHV0TWVzc2FnZXMoXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBvdXRwdXRWYWx1ZSkge1xuICAgICAgICBsZXQgcGFyc2VkT3V0cHV0VmFsdWU7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvdXRwdXRWYWx1ZSkgJiZcbiAgICAgICAgICAgICFpc0Jhc2VNZXNzYWdlKG91dHB1dFZhbHVlKSAmJlxuICAgICAgICAgICAgdHlwZW9mIG91dHB1dFZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBsZXQga2V5O1xuICAgICAgICAgICAgaWYgKHRoaXMub3V0cHV0TWVzc2FnZXNLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGtleSA9IHRoaXMub3V0cHV0TWVzc2FnZXNLZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChPYmplY3Qua2V5cyhvdXRwdXRWYWx1ZSkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gT2JqZWN0LmtleXMob3V0cHV0VmFsdWUpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAga2V5ID0gXCJvdXRwdXRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHlvdSBhcmUgd3JhcHBpbmcgYSBjaGF0IG1vZGVsIGRpcmVjdGx5XG4gICAgICAgICAgICAvLyBUaGUgb3V0cHV0IGlzIGFjdHVhbGx5IHRoaXMgd2VpcmQgZ2VuZXJhdGlvbnMgb2JqZWN0XG4gICAgICAgICAgICBpZiAob3V0cHV0VmFsdWUuZ2VuZXJhdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcnNlZE91dHB1dFZhbHVlID0gb3V0cHV0VmFsdWUuZ2VuZXJhdGlvbnNbMF1bMF0ubWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlZE91dHB1dFZhbHVlID0gb3V0cHV0VmFsdWVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZE91dHB1dFZhbHVlID0gb3V0cHV0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBwYXJzZWRPdXRwdXRWYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtuZXcgQUlNZXNzYWdlKHBhcnNlZE91dHB1dFZhbHVlKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWRPdXRwdXRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWRPdXRwdXRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0Jhc2VNZXNzYWdlKHBhcnNlZE91dHB1dFZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIFtwYXJzZWRPdXRwdXRWYWx1ZV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGEgc3RyaW5nLCBCYXNlTWVzc2FnZSwgb3IgYXJyYXkgb2YgQmFzZU1lc3NhZ2VzLiBSZWNlaXZlZDogJHtKU09OLnN0cmluZ2lmeShwYXJzZWRPdXRwdXRWYWx1ZSwgbnVsbCwgMil9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgX2VudGVySGlzdG9yeShcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlucHV0LCBrd2FyZ3MpIHtcbiAgICAgICAgY29uc3QgaGlzdG9yeSA9IGt3YXJncz8uY29uZmlndXJhYmxlPy5tZXNzYWdlSGlzdG9yeTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBoaXN0b3J5LmdldE1lc3NhZ2VzKCk7XG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlNZXNzYWdlc0tleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZXMuY29uY2F0KHRoaXMuX2dldElucHV0TWVzc2FnZXMoaW5wdXQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZXM7XG4gICAgfVxuICAgIGFzeW5jIF9leGl0SGlzdG9yeShydW4sIGNvbmZpZykge1xuICAgICAgICBjb25zdCBoaXN0b3J5ID0gY29uZmlnLmNvbmZpZ3VyYWJsZT8ubWVzc2FnZUhpc3Rvcnk7XG4gICAgICAgIC8vIEdldCBpbnB1dCBtZXNzYWdlc1xuICAgICAgICBsZXQgaW5wdXRzO1xuICAgICAgICAvLyBDaGF0IG1vZGVsIGlucHV0cyBhcmUgbmVzdGVkIGFycmF5c1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShydW4uaW5wdXRzKSAmJiBBcnJheS5pc0FycmF5KHJ1bi5pbnB1dHNbMF0pKSB7XG4gICAgICAgICAgICBpbnB1dHMgPSBydW4uaW5wdXRzWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5wdXRzID0gcnVuLmlucHV0cztcbiAgICAgICAgfVxuICAgICAgICBsZXQgaW5wdXRNZXNzYWdlcyA9IHRoaXMuX2dldElucHV0TWVzc2FnZXMoaW5wdXRzKTtcbiAgICAgICAgLy8gSWYgaGlzdG9yaWMgbWVzc2FnZXMgd2VyZSBwcmVwZW5kZWQgdG8gdGhlIGlucHV0IG1lc3NhZ2VzLCByZW1vdmUgdGhlbSB0b1xuICAgICAgICAvLyBhdm9pZCBhZGRpbmcgZHVwbGljYXRlIG1lc3NhZ2VzIHRvIGhpc3RvcnkuXG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlNZXNzYWdlc0tleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ01lc3NhZ2VzID0gYXdhaXQgaGlzdG9yeS5nZXRNZXNzYWdlcygpO1xuICAgICAgICAgICAgaW5wdXRNZXNzYWdlcyA9IGlucHV0TWVzc2FnZXMuc2xpY2UoZXhpc3RpbmdNZXNzYWdlcy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEdldCBvdXRwdXQgbWVzc2FnZXNcbiAgICAgICAgY29uc3Qgb3V0cHV0VmFsdWUgPSBydW4ub3V0cHV0cztcbiAgICAgICAgaWYgKCFvdXRwdXRWYWx1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPdXRwdXQgdmFsdWVzIGZyb20gJ1J1bicgdW5kZWZpbmVkLiBSdW46ICR7SlNPTi5zdHJpbmdpZnkocnVuLCBudWxsLCAyKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvdXRwdXRNZXNzYWdlcyA9IHRoaXMuX2dldE91dHB1dE1lc3NhZ2VzKG91dHB1dFZhbHVlKTtcbiAgICAgICAgYXdhaXQgaGlzdG9yeS5hZGRNZXNzYWdlcyhbLi4uaW5wdXRNZXNzYWdlcywgLi4ub3V0cHV0TWVzc2FnZXNdKTtcbiAgICB9XG4gICAgYXN5bmMgX21lcmdlQ29uZmlnKC4uLmNvbmZpZ3MpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gYXdhaXQgc3VwZXIuX21lcmdlQ29uZmlnKC4uLmNvbmZpZ3MpO1xuICAgICAgICAvLyBFeHRyYWN0IHNlc3Npb25JZFxuICAgICAgICBpZiAoIWNvbmZpZy5jb25maWd1cmFibGUgfHwgIWNvbmZpZy5jb25maWd1cmFibGUuc2Vzc2lvbklkKSB7XG4gICAgICAgICAgICBjb25zdCBleGFtcGxlSW5wdXQgPSB7XG4gICAgICAgICAgICAgICAgW3RoaXMuaW5wdXRNZXNzYWdlc0tleSA/PyBcImlucHV0XCJdOiBcImZvb1wiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVDb25maWcgPSB7IGNvbmZpZ3VyYWJsZTogeyBzZXNzaW9uSWQ6IFwiMTIzXCIgfSB9O1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzZXNzaW9uSWQgaXMgcmVxdWlyZWQuIFBhc3MgaXQgaW4gYXMgcGFydCBvZiB0aGUgY29uZmlnIGFyZ3VtZW50IHRvIC5pbnZva2UoKSBvciAuc3RyZWFtKClcXG5gICtcbiAgICAgICAgICAgICAgICBgZWcuIGNoYWluLmludm9rZSgke0pTT04uc3RyaW5naWZ5KGV4YW1wbGVJbnB1dCl9LCAke0pTT04uc3RyaW5naWZ5KGV4YW1wbGVDb25maWcpfSlgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhdHRhY2ggbWVzc2FnZUhpc3RvcnlcbiAgICAgICAgY29uc3QgeyBzZXNzaW9uSWQgfSA9IGNvbmZpZy5jb25maWd1cmFibGU7XG4gICAgICAgIGNvbmZpZy5jb25maWd1cmFibGUubWVzc2FnZUhpc3RvcnkgPSBhd2FpdCB0aGlzLmdldE1lc3NhZ2VIaXN0b3J5KHNlc3Npb25JZCk7XG4gICAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkFJTWVzc2FnZSIsIkh1bWFuTWVzc2FnZSIsImlzQmFzZU1lc3NhZ2UiLCJSdW5uYWJsZUJpbmRpbmciLCJSdW5uYWJsZUxhbWJkYSIsIlJ1bm5hYmxlUGFzc3Rocm91Z2giLCJSdW5uYWJsZVdpdGhNZXNzYWdlSGlzdG9yeSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiaGlzdG9yeUNoYWluIiwiZnJvbSIsImlucHV0Iiwib3B0aW9ucyIsIl9lbnRlckhpc3RvcnkiLCJ3aXRoQ29uZmlnIiwicnVuTmFtZSIsIm1lc3NhZ2VzS2V5IiwiaGlzdG9yeU1lc3NhZ2VzS2V5IiwiaW5wdXRNZXNzYWdlc0tleSIsImFzc2lnbiIsImJvdW5kIiwicGlwZSIsInJ1bm5hYmxlIiwid2l0aExpc3RlbmVycyIsIm9uRW5kIiwicnVuIiwiY29uZmlnIiwiX2V4aXRIaXN0b3J5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImdldE1lc3NhZ2VIaXN0b3J5Iiwib3V0cHV0TWVzc2FnZXNLZXkiLCJfZ2V0SW5wdXRNZXNzYWdlcyIsImlucHV0VmFsdWUiLCJwYXJzZWRJbnB1dFZhbHVlIiwiQXJyYXkiLCJpc0FycmF5Iiwia2V5Iiwia2V5cyIsImxlbmd0aCIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsIl9nZXRPdXRwdXRNZXNzYWdlcyIsIm91dHB1dFZhbHVlIiwicGFyc2VkT3V0cHV0VmFsdWUiLCJ1bmRlZmluZWQiLCJnZW5lcmF0aW9ucyIsIm1lc3NhZ2UiLCJrd2FyZ3MiLCJoaXN0b3J5IiwibWVzc2FnZUhpc3RvcnkiLCJtZXNzYWdlcyIsImdldE1lc3NhZ2VzIiwiY29uY2F0IiwiaW5wdXRzIiwiaW5wdXRNZXNzYWdlcyIsImV4aXN0aW5nTWVzc2FnZXMiLCJzbGljZSIsIm91dHB1dHMiLCJvdXRwdXRNZXNzYWdlcyIsImFkZE1lc3NhZ2VzIiwiX21lcmdlQ29uZmlnIiwiY29uZmlncyIsInNlc3Npb25JZCIsImV4YW1wbGVJbnB1dCIsImV4YW1wbGVDb25maWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/history.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* reexport safe */ _router_js__WEBPACK_IMPORTED_MODULE_3__.RouterRunnable),\n/* harmony export */   Runnable: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable),\n/* harmony export */   RunnableAssign: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBinding),\n/* harmony export */   RunnableBranch: () => (/* reexport safe */ _branch_js__WEBPACK_IMPORTED_MODULE_4__.RunnableBranch),\n/* harmony export */   RunnableEach: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableParallel),\n/* harmony export */   RunnablePassthrough: () => (/* reexport safe */ _passthrough_js__WEBPACK_IMPORTED_MODULE_2__.RunnablePassthrough),\n/* harmony export */   RunnablePick: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence),\n/* harmony export */   RunnableToolLike: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableToolLike),\n/* harmony export */   RunnableWithFallbacks: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableWithFallbacks),\n/* harmony export */   RunnableWithMessageHistory: () => (/* reexport safe */ _history_js__WEBPACK_IMPORTED_MODULE_5__.RunnableWithMessageHistory),\n/* harmony export */   _coerceToRunnable: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable),\n/* harmony export */   ensureConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.mergeConfigs),\n/* harmony export */   patchConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig),\n/* harmony export */   pickRunnableConfigKeys: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.pickRunnableConfigKeys)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _passthrough_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./passthrough.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n/* harmony import */ var _router_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./router.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/router.js\");\n/* harmony import */ var _branch_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./branch.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/branch.js\");\n/* harmony import */ var _history_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./history.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/history.js\");\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK087QUFDbkg7QUFDckU7QUFDVjtBQUNBO0FBQ2MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9pbmRleC5qcz81NTY0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IFJ1bm5hYmxlLCBSdW5uYWJsZUJpbmRpbmcsIFJ1bm5hYmxlRWFjaCwgUnVubmFibGVSZXRyeSwgUnVubmFibGVTZXF1ZW5jZSwgUnVubmFibGVNYXAsIFJ1bm5hYmxlUGFyYWxsZWwsIFJ1bm5hYmxlTGFtYmRhLCBSdW5uYWJsZVdpdGhGYWxsYmFja3MsIFJ1bm5hYmxlQXNzaWduLCBSdW5uYWJsZVBpY2ssIF9jb2VyY2VUb1J1bm5hYmxlLCBSdW5uYWJsZVRvb2xMaWtlLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCB7IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZywgcGF0Y2hDb25maWcsIGVuc3VyZUNvbmZpZywgbWVyZ2VDb25maWdzLCBwaWNrUnVubmFibGVDb25maWdLZXlzLCB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuZXhwb3J0IHsgUnVubmFibGVQYXNzdGhyb3VnaCB9IGZyb20gXCIuL3Bhc3N0aHJvdWdoLmpzXCI7XG5leHBvcnQgeyBSb3V0ZXJSdW5uYWJsZSB9IGZyb20gXCIuL3JvdXRlci5qc1wiO1xuZXhwb3J0IHsgUnVubmFibGVCcmFuY2ggfSBmcm9tIFwiLi9icmFuY2guanNcIjtcbmV4cG9ydCB7IFJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5LCB9IGZyb20gXCIuL2hpc3RvcnkuanNcIjtcbiJdLCJuYW1lcyI6WyJSdW5uYWJsZSIsIlJ1bm5hYmxlQmluZGluZyIsIlJ1bm5hYmxlRWFjaCIsIlJ1bm5hYmxlUmV0cnkiLCJSdW5uYWJsZVNlcXVlbmNlIiwiUnVubmFibGVNYXAiLCJSdW5uYWJsZVBhcmFsbGVsIiwiUnVubmFibGVMYW1iZGEiLCJSdW5uYWJsZVdpdGhGYWxsYmFja3MiLCJSdW5uYWJsZUFzc2lnbiIsIlJ1bm5hYmxlUGljayIsIl9jb2VyY2VUb1J1bm5hYmxlIiwiUnVubmFibGVUb29sTGlrZSIsImdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyIsInBhdGNoQ29uZmlnIiwiZW5zdXJlQ29uZmlnIiwibWVyZ2VDb25maWdzIiwicGlja1J1bm5hYmxlQ29uZmlnS2V5cyIsIlJ1bm5hYmxlUGFzc3Rocm91Z2giLCJSb3V0ZXJSdW5uYWJsZSIsIlJ1bm5hYmxlQnJhbmNoIiwiUnVubmFibGVXaXRoTWVzc2FnZUhpc3RvcnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/iter.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/iter.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   consumeAsyncIterableInContext: () => (/* binding */ consumeAsyncIterableInContext),\n/* harmony export */   consumeIteratorInContext: () => (/* binding */ consumeIteratorInContext),\n/* harmony export */   isAsyncIterable: () => (/* binding */ isAsyncIterable),\n/* harmony export */   isIterableIterator: () => (/* binding */ isIterableIterator),\n/* harmony export */   isIterator: () => (/* binding */ isIterator)\n/* harmony export */ });\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\nfunction isIterableIterator(thing) {\n    return typeof thing === \"object\" && thing !== null && typeof thing[Symbol.iterator] === \"function\" && // avoid detecting array/set as iterator\n    typeof thing.next === \"function\";\n}\nconst isIterator = (x)=>x != null && typeof x === \"object\" && \"next\" in x && typeof x.next === \"function\";\nfunction isAsyncIterable(thing) {\n    return typeof thing === \"object\" && thing !== null && typeof thing[Symbol.asyncIterator] === \"function\";\n}\nfunction* consumeIteratorInContext(context, iter) {\n    while(true){\n        const { value, done } = _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_1__.pickRunnableConfigKeys)(context), iter.next.bind(iter), true);\n        if (done) {\n            break;\n        } else {\n            yield value;\n        }\n    }\n}\nasync function* consumeAsyncIterableInContext(context, iter) {\n    const iterator = iter[Symbol.asyncIterator]();\n    while(true){\n        const { value, done } = await _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_1__.pickRunnableConfigKeys)(context), iterator.next.bind(iter), true);\n        if (done) {\n            break;\n        } else {\n            yield value;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2l0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE0RTtBQUN2QjtBQUM5QyxTQUFTRSxtQkFBbUJDLEtBQUs7SUFDcEMsT0FBUSxPQUFPQSxVQUFVLFlBQ3JCQSxVQUFVLFFBQ1YsT0FBT0EsS0FBSyxDQUFDQyxPQUFPQyxRQUFRLENBQUMsS0FBSyxjQUNsQyx3Q0FBd0M7SUFDeEMsT0FBT0YsTUFBTUcsSUFBSSxLQUFLO0FBQzlCO0FBQ08sTUFBTUMsYUFBYSxDQUFDQyxJQUFNQSxLQUFLLFFBQ2xDLE9BQU9BLE1BQU0sWUFDYixVQUFVQSxLQUNWLE9BQU9BLEVBQUVGLElBQUksS0FBSyxXQUFXO0FBQzFCLFNBQVNHLGdCQUFnQk4sS0FBSztJQUNqQyxPQUFRLE9BQU9BLFVBQVUsWUFDckJBLFVBQVUsUUFDVixPQUFPQSxLQUFLLENBQUNDLE9BQU9NLGFBQWEsQ0FBQyxLQUM5QjtBQUNaO0FBQ08sVUFBVUMseUJBQXlCQyxPQUFPLEVBQUVDLElBQUk7SUFDbkQsTUFBTyxLQUFNO1FBQ1QsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLElBQUksRUFBRSxHQUFHZixvRkFBa0NBLENBQUNnQixhQUFhLENBQUNmLGtFQUFzQkEsQ0FBQ1csVUFBVUMsS0FBS1AsSUFBSSxDQUFDVyxJQUFJLENBQUNKLE9BQU87UUFDaEksSUFBSUUsTUFBTTtZQUNOO1FBQ0osT0FDSztZQUNELE1BQU1EO1FBQ1Y7SUFDSjtBQUNKO0FBQ08sZ0JBQWdCSSw4QkFBOEJOLE9BQU8sRUFBRUMsSUFBSTtJQUM5RCxNQUFNUixXQUFXUSxJQUFJLENBQUNULE9BQU9NLGFBQWEsQ0FBQztJQUMzQyxNQUFPLEtBQU07UUFDVCxNQUFNLEVBQUVJLEtBQUssRUFBRUMsSUFBSSxFQUFFLEdBQUcsTUFBTWYsb0ZBQWtDQSxDQUFDZ0IsYUFBYSxDQUFDZixrRUFBc0JBLENBQUNXLFVBQVVQLFNBQVNDLElBQUksQ0FBQ1csSUFBSSxDQUFDSixPQUFPO1FBQzFJLElBQUlFLE1BQU07WUFDTjtRQUNKLE9BQ0s7WUFDRCxNQUFNRDtRQUNWO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2l0ZXIuanM/ZWE1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcbmltcG9ydCB7IHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBpc0l0ZXJhYmxlSXRlcmF0b3IodGhpbmcpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB0aGluZyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICB0aGluZyAhPT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgdGhpbmdbU3ltYm9sLml0ZXJhdG9yXSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIC8vIGF2b2lkIGRldGVjdGluZyBhcnJheS9zZXQgYXMgaXRlcmF0b3JcbiAgICAgICAgdHlwZW9mIHRoaW5nLm5leHQgPT09IFwiZnVuY3Rpb25cIik7XG59XG5leHBvcnQgY29uc3QgaXNJdGVyYXRvciA9ICh4KSA9PiB4ICE9IG51bGwgJiZcbiAgICB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJlxuICAgIFwibmV4dFwiIGluIHggJiZcbiAgICB0eXBlb2YgeC5uZXh0ID09PSBcImZ1bmN0aW9uXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNBc3luY0l0ZXJhYmxlKHRoaW5nKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgdGhpbmcgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgdGhpbmcgIT09IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIHRoaW5nW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT1cbiAgICAgICAgICAgIFwiZnVuY3Rpb25cIik7XG59XG5leHBvcnQgZnVuY3Rpb24qIGNvbnN1bWVJdGVyYXRvckluQ29udGV4dChjb250ZXh0LCBpdGVyKSB7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMoY29udGV4dCksIGl0ZXIubmV4dC5iaW5kKGl0ZXIpLCB0cnVlKTtcbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24qIGNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0KGNvbnRleHQsIGl0ZXIpIHtcbiAgICBjb25zdCBpdGVyYXRvciA9IGl0ZXJbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMoY29udGV4dCksIGl0ZXJhdG9yLm5leHQuYmluZChpdGVyKSwgdHJ1ZSk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iLCJwaWNrUnVubmFibGVDb25maWdLZXlzIiwiaXNJdGVyYWJsZUl0ZXJhdG9yIiwidGhpbmciLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJpc0l0ZXJhdG9yIiwieCIsImlzQXN5bmNJdGVyYWJsZSIsImFzeW5jSXRlcmF0b3IiLCJjb25zdW1lSXRlcmF0b3JJbkNvbnRleHQiLCJjb250ZXh0IiwiaXRlciIsInZhbHVlIiwiZG9uZSIsInJ1bldpdGhDb25maWciLCJiaW5kIiwiY29uc3VtZUFzeW5jSXRlcmFibGVJbkNvbnRleHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/iter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/passthrough.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnablePassthrough: () => (/* binding */ RunnablePassthrough)\n/* harmony export */ });\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n\n/**\n * A runnable to passthrough inputs unchanged or with additional keys.\n *\n * This runnable behaves almost like the identity function, except that it\n * can be configured to add additional keys to the output, if the input is\n * an object.\n *\n * The example below demonstrates how to use `RunnablePassthrough to\n * passthrough the input from the `.invoke()`\n *\n * @example\n * ```typescript\n * const chain = RunnableSequence.from([\n *   {\n *     question: new RunnablePassthrough(),\n *     context: async () => loadContextFromStore(),\n *   },\n *   prompt,\n *   llm,\n *   outputParser,\n * ]);\n * const response = await chain.invoke(\n *   \"I can pass a single string instead of an object since I'm using `RunnablePassthrough`.\"\n * );\n * ```\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass RunnablePassthrough extends _base_js__WEBPACK_IMPORTED_MODULE_1__.Runnable {\n    static lc_name() {\n        return \"RunnablePassthrough\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (fields) {\n            this.func = fields.func;\n        }\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(options);\n        if (this.func) {\n            await this.func(input, config);\n        }\n        return this._callWithConfig((input)=>Promise.resolve(input), input, config);\n    }\n    async *transform(generator, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(options);\n        let finalOutput;\n        let finalOutputSupported = true;\n        for await (const chunk of this._transformStreamWithConfig(generator, (input)=>input, config)){\n            yield chunk;\n            if (finalOutputSupported) {\n                if (finalOutput === undefined) {\n                    finalOutput = chunk;\n                } else {\n                    try {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_0__.concat)(finalOutput, chunk);\n                    } catch  {\n                        finalOutput = undefined;\n                        finalOutputSupported = false;\n                    }\n                }\n            }\n        }\n        if (this.func && finalOutput !== undefined) {\n            await this.func(finalOutput, config);\n        }\n    }\n    /**\n     * A runnable that assigns key-value pairs to the input.\n     *\n     * The example below shows how you could use it with an inline function.\n     *\n     * @example\n     * ```typescript\n     * const prompt =\n     *   PromptTemplate.fromTemplate(`Write a SQL query to answer the question using the following schema: {schema}\n     * Question: {question}\n     * SQL Query:`);\n     *\n     * // The `RunnablePassthrough.assign()` is used here to passthrough the input from the `.invoke()`\n     * // call (in this example it's the question), along with any inputs passed to the `.assign()` method.\n     * // In this case, we're passing the schema.\n     * const sqlQueryGeneratorChain = RunnableSequence.from([\n     *   RunnablePassthrough.assign({\n     *     schema: async () => db.getTableInfo(),\n     *   }),\n     *   prompt,\n     *   new ChatOpenAI({ model: \"gpt-4o-mini\" }).withConfig({ stop: [\"\\nSQLResult:\"] }),\n     *   new StringOutputParser(),\n     * ]);\n     * const result = await sqlQueryGeneratorChain.invoke({\n     *   question: \"How many employees are there?\",\n     * });\n     * ```\n     */ static assign(mapping) {\n        return new _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableAssign(new _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableMap({\n            steps: mapping\n        }));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3Bhc3N0aHJvdWdoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEM7QUFDdUI7QUFDeEI7QUFDM0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0F5QkMsR0FDRCw4REFBOEQ7QUFDdkQsTUFBTUssNEJBQTRCSiw4Q0FBUUE7SUFDN0MsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7YUFBWTtRQUMxQztRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSU4sUUFBUTtZQUNSLElBQUksQ0FBQ08sSUFBSSxHQUFHUCxPQUFPTyxJQUFJO1FBQzNCO0lBQ0o7SUFDQSxNQUFNQyxPQUFPQyxLQUFLLEVBQUVDLE9BQU8sRUFBRTtRQUN6QixNQUFNQyxTQUFTZix3REFBWUEsQ0FBQ2M7UUFDNUIsSUFBSSxJQUFJLENBQUNILElBQUksRUFBRTtZQUNYLE1BQU0sSUFBSSxDQUFDQSxJQUFJLENBQUNFLE9BQU9FO1FBQzNCO1FBQ0EsT0FBTyxJQUFJLENBQUNDLGVBQWUsQ0FBQyxDQUFDSCxRQUFVSSxRQUFRQyxPQUFPLENBQUNMLFFBQVFBLE9BQU9FO0lBQzFFO0lBQ0EsT0FBT0ksVUFBVUMsU0FBUyxFQUFFTixPQUFPLEVBQUU7UUFDakMsTUFBTUMsU0FBU2Ysd0RBQVlBLENBQUNjO1FBQzVCLElBQUlPO1FBQ0osSUFBSUMsdUJBQXVCO1FBQzNCLFdBQVcsTUFBTUMsU0FBUyxJQUFJLENBQUNDLDBCQUEwQixDQUFDSixXQUFXLENBQUNQLFFBQVVBLE9BQU9FLFFBQVM7WUFDNUYsTUFBTVE7WUFDTixJQUFJRCxzQkFBc0I7Z0JBQ3RCLElBQUlELGdCQUFnQkksV0FBVztvQkFDM0JKLGNBQWNFO2dCQUNsQixPQUNLO29CQUNELElBQUk7d0JBQ0EsOERBQThEO3dCQUM5REYsY0FBY3pCLHdEQUFNQSxDQUFDeUIsYUFBYUU7b0JBQ3RDLEVBQ0EsT0FBTTt3QkFDRkYsY0FBY0k7d0JBQ2RILHVCQUF1QjtvQkFDM0I7Z0JBQ0o7WUFDSjtRQUNKO1FBQ0EsSUFBSSxJQUFJLENBQUNYLElBQUksSUFBSVUsZ0JBQWdCSSxXQUFXO1lBQ3hDLE1BQU0sSUFBSSxDQUFDZCxJQUFJLENBQUNVLGFBQWFOO1FBQ2pDO0lBQ0o7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBMkJDLEdBQ0QsT0FBT1csT0FBT0MsT0FBTyxFQUFFO1FBQ25CLE9BQU8sSUFBSTdCLG9EQUFjQSxDQUFDLElBQUlDLGlEQUFXQSxDQUFDO1lBQUU2QixPQUFPRDtRQUFRO0lBQy9EO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9wYXNzdGhyb3VnaC5qcz8zMzBkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbmNhdCB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlLCBSdW5uYWJsZUFzc2lnbiwgUnVubmFibGVNYXAsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgZW5zdXJlQ29uZmlnIH0gZnJvbSBcIi4vY29uZmlnLmpzXCI7XG4vKipcbiAqIEEgcnVubmFibGUgdG8gcGFzc3Rocm91Z2ggaW5wdXRzIHVuY2hhbmdlZCBvciB3aXRoIGFkZGl0aW9uYWwga2V5cy5cbiAqXG4gKiBUaGlzIHJ1bm5hYmxlIGJlaGF2ZXMgYWxtb3N0IGxpa2UgdGhlIGlkZW50aXR5IGZ1bmN0aW9uLCBleGNlcHQgdGhhdCBpdFxuICogY2FuIGJlIGNvbmZpZ3VyZWQgdG8gYWRkIGFkZGl0aW9uYWwga2V5cyB0byB0aGUgb3V0cHV0LCBpZiB0aGUgaW5wdXQgaXNcbiAqIGFuIG9iamVjdC5cbiAqXG4gKiBUaGUgZXhhbXBsZSBiZWxvdyBkZW1vbnN0cmF0ZXMgaG93IHRvIHVzZSBgUnVubmFibGVQYXNzdGhyb3VnaCB0b1xuICogcGFzc3Rocm91Z2ggdGhlIGlucHV0IGZyb20gdGhlIGAuaW52b2tlKClgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGNoYWluID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtcbiAqICAge1xuICogICAgIHF1ZXN0aW9uOiBuZXcgUnVubmFibGVQYXNzdGhyb3VnaCgpLFxuICogICAgIGNvbnRleHQ6IGFzeW5jICgpID0+IGxvYWRDb250ZXh0RnJvbVN0b3JlKCksXG4gKiAgIH0sXG4gKiAgIHByb21wdCxcbiAqICAgbGxtLFxuICogICBvdXRwdXRQYXJzZXIsXG4gKiBdKTtcbiAqIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hhaW4uaW52b2tlKFxuICogICBcIkkgY2FuIHBhc3MgYSBzaW5nbGUgc3RyaW5nIGluc3RlYWQgb2YgYW4gb2JqZWN0IHNpbmNlIEknbSB1c2luZyBgUnVubmFibGVQYXNzdGhyb3VnaGAuXCJcbiAqICk7XG4gKiBgYGBcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVBhc3N0aHJvdWdoIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVBhc3N0aHJvdWdoXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZ1bmNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGZpZWxkcykge1xuICAgICAgICAgICAgdGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgaWYgKHRoaXMuZnVuYykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5mdW5jKGlucHV0LCBjb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZygoaW5wdXQpID0+IFByb21pc2UucmVzb2x2ZShpbnB1dCksIGlucHV0LCBjb25maWcpO1xuICAgIH1cbiAgICBhc3luYyAqdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgKGlucHV0KSA9PiBpbnB1dCwgY29uZmlnKSkge1xuICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICBpZiAoZmluYWxPdXRwdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mdW5jICYmIGZpbmFsT3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZnVuYyhmaW5hbE91dHB1dCwgY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHJ1bm5hYmxlIHRoYXQgYXNzaWducyBrZXktdmFsdWUgcGFpcnMgdG8gdGhlIGlucHV0LlxuICAgICAqXG4gICAgICogVGhlIGV4YW1wbGUgYmVsb3cgc2hvd3MgaG93IHlvdSBjb3VsZCB1c2UgaXQgd2l0aCBhbiBpbmxpbmUgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBjb25zdCBwcm9tcHQgPVxuICAgICAqICAgUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKGBXcml0ZSBhIFNRTCBxdWVyeSB0byBhbnN3ZXIgdGhlIHF1ZXN0aW9uIHVzaW5nIHRoZSBmb2xsb3dpbmcgc2NoZW1hOiB7c2NoZW1hfVxuICAgICAqIFF1ZXN0aW9uOiB7cXVlc3Rpb259XG4gICAgICogU1FMIFF1ZXJ5OmApO1xuICAgICAqXG4gICAgICogLy8gVGhlIGBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbigpYCBpcyB1c2VkIGhlcmUgdG8gcGFzc3Rocm91Z2ggdGhlIGlucHV0IGZyb20gdGhlIGAuaW52b2tlKClgXG4gICAgICogLy8gY2FsbCAoaW4gdGhpcyBleGFtcGxlIGl0J3MgdGhlIHF1ZXN0aW9uKSwgYWxvbmcgd2l0aCBhbnkgaW5wdXRzIHBhc3NlZCB0byB0aGUgYC5hc3NpZ24oKWAgbWV0aG9kLlxuICAgICAqIC8vIEluIHRoaXMgY2FzZSwgd2UncmUgcGFzc2luZyB0aGUgc2NoZW1hLlxuICAgICAqIGNvbnN0IHNxbFF1ZXJ5R2VuZXJhdG9yQ2hhaW4gPSBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW1xuICAgICAqICAgUnVubmFibGVQYXNzdGhyb3VnaC5hc3NpZ24oe1xuICAgICAqICAgICBzY2hlbWE6IGFzeW5jICgpID0+IGRiLmdldFRhYmxlSW5mbygpLFxuICAgICAqICAgfSksXG4gICAgICogICBwcm9tcHQsXG4gICAgICogICBuZXcgQ2hhdE9wZW5BSSh7IG1vZGVsOiBcImdwdC00by1taW5pXCIgfSkud2l0aENvbmZpZyh7IHN0b3A6IFtcIlxcblNRTFJlc3VsdDpcIl0gfSksXG4gICAgICogICBuZXcgU3RyaW5nT3V0cHV0UGFyc2VyKCksXG4gICAgICogXSk7XG4gICAgICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsUXVlcnlHZW5lcmF0b3JDaGFpbi5pbnZva2Uoe1xuICAgICAqICAgcXVlc3Rpb246IFwiSG93IG1hbnkgZW1wbG95ZWVzIGFyZSB0aGVyZT9cIixcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzdGF0aWMgYXNzaWduKG1hcHBpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUFzc2lnbihuZXcgUnVubmFibGVNYXAoeyBzdGVwczogbWFwcGluZyB9KSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImNvbmNhdCIsIlJ1bm5hYmxlIiwiUnVubmFibGVBc3NpZ24iLCJSdW5uYWJsZU1hcCIsImVuc3VyZUNvbmZpZyIsIlJ1bm5hYmxlUGFzc3Rocm91Z2giLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZnVuYyIsImludm9rZSIsImlucHV0Iiwib3B0aW9ucyIsImNvbmZpZyIsIl9jYWxsV2l0aENvbmZpZyIsIlByb21pc2UiLCJyZXNvbHZlIiwidHJhbnNmb3JtIiwiZ2VuZXJhdG9yIiwiZmluYWxPdXRwdXQiLCJmaW5hbE91dHB1dFN1cHBvcnRlZCIsImNodW5rIiwiX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWciLCJ1bmRlZmluZWQiLCJhc3NpZ24iLCJtYXBwaW5nIiwic3RlcHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/router.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/router.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* binding */ RouterRunnable)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n/**\n * A runnable that routes to a set of runnables based on Input['key'].\n * Returns the output of the selected runnable.\n * @example\n * ```typescript\n * import { RouterRunnable, RunnableLambda } from \"@langchain/core/runnables\";\n *\n * const router = new RouterRunnable({\n *   runnables: {\n *     toUpperCase: RunnableLambda.from((text: string) => text.toUpperCase()),\n *     reverseText: RunnableLambda.from((text: string) =>\n *       text.split(\"\").reverse().join(\"\")\n *     ),\n *   },\n * });\n *\n * // Invoke the 'reverseText' runnable\n * const result1 = router.invoke({ key: \"reverseText\", input: \"Hello World\" });\n *\n * // \"dlroW olleH\"\n *\n * // Invoke the 'toUpperCase' runnable\n * const result2 = router.invoke({ key: \"toUpperCase\", input: \"Hello World\" });\n *\n * // \"HELLO WORLD\"\n * ```\n */ class RouterRunnable extends _base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    static lc_name() {\n        return \"RouterRunnable\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnables = fields.runnables;\n    }\n    async invoke(input, options) {\n        const { key, input: actualInput } = input;\n        const runnable = this.runnables[key];\n        if (runnable === undefined) {\n            throw new Error(`No runnable associated with key \"${key}\".`);\n        }\n        return runnable.invoke(actualInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const keys = inputs.map((input)=>input.key);\n        const actualInputs = inputs.map((input)=>input.input);\n        const missingKey = keys.find((key)=>this.runnables[key] === undefined);\n        if (missingKey !== undefined) {\n            throw new Error(`One or more keys do not have a corresponding runnable.`);\n        }\n        const runnables = keys.map((key)=>this.runnables[key]);\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = optionsList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const batchSize = maxConcurrency && maxConcurrency > 0 ? maxConcurrency : inputs.length;\n        const batchResults = [];\n        for(let i = 0; i < actualInputs.length; i += batchSize){\n            const batchPromises = actualInputs.slice(i, i + batchSize).map((actualInput, i)=>runnables[i].invoke(actualInput, optionsList[i]));\n            const batchResult = await Promise.all(batchPromises);\n            batchResults.push(batchResult);\n        }\n        return batchResults.flat();\n    }\n    async stream(input, options) {\n        const { key, input: actualInput } = input;\n        const runnable = this.runnables[key];\n        if (runnable === undefined) {\n            throw new Error(`No runnable associated with key \"${key}\".`);\n        }\n        return runnable.stream(actualInput, options);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3JvdXRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFDTTtBQUMzQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0EwQkMsR0FDTSxNQUFNRSx1QkFBdUJGLDhDQUFRQTtJQUN4QyxPQUFPRyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjthQUFZO1FBQzFDO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFNBQVMsR0FBR1AsT0FBT08sU0FBUztJQUNyQztJQUNBLE1BQU1DLE9BQU9DLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLE1BQU0sRUFBRUMsR0FBRyxFQUFFRixPQUFPRyxXQUFXLEVBQUUsR0FBR0g7UUFDcEMsTUFBTUksV0FBVyxJQUFJLENBQUNOLFNBQVMsQ0FBQ0ksSUFBSTtRQUNwQyxJQUFJRSxhQUFhQyxXQUFXO1lBQ3hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLGlDQUFpQyxFQUFFSixJQUFJLEVBQUUsQ0FBQztRQUMvRDtRQUNBLE9BQU9FLFNBQVNMLE1BQU0sQ0FBQ0ksYUFBYWhCLHdEQUFZQSxDQUFDYztJQUNyRDtJQUNBLE1BQU1NLE1BQU1DLE1BQU0sRUFBRVAsT0FBTyxFQUFFUSxZQUFZLEVBQUU7UUFDdkMsTUFBTUMsT0FBT0YsT0FBT0csR0FBRyxDQUFDLENBQUNYLFFBQVVBLE1BQU1FLEdBQUc7UUFDNUMsTUFBTVUsZUFBZUosT0FBT0csR0FBRyxDQUFDLENBQUNYLFFBQVVBLE1BQU1BLEtBQUs7UUFDdEQsTUFBTWEsYUFBYUgsS0FBS0ksSUFBSSxDQUFDLENBQUNaLE1BQVEsSUFBSSxDQUFDSixTQUFTLENBQUNJLElBQUksS0FBS0c7UUFDOUQsSUFBSVEsZUFBZVIsV0FBVztZQUMxQixNQUFNLElBQUlDLE1BQU0sQ0FBQyxzREFBc0QsQ0FBQztRQUM1RTtRQUNBLE1BQU1SLFlBQVlZLEtBQUtDLEdBQUcsQ0FBQyxDQUFDVCxNQUFRLElBQUksQ0FBQ0osU0FBUyxDQUFDSSxJQUFJO1FBQ3ZELE1BQU1hLGNBQWMsSUFBSSxDQUFDQyxlQUFlLENBQUNmLFdBQVcsQ0FBQyxHQUFHTyxPQUFPUyxNQUFNO1FBQ3JFLE1BQU1DLGlCQUFpQkgsV0FBVyxDQUFDLEVBQUUsRUFBRUcsa0JBQWtCVCxjQUFjUztRQUN2RSxNQUFNQyxZQUFZRCxrQkFBa0JBLGlCQUFpQixJQUFJQSxpQkFBaUJWLE9BQU9TLE1BQU07UUFDdkYsTUFBTUcsZUFBZSxFQUFFO1FBQ3ZCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJVCxhQUFhSyxNQUFNLEVBQUVJLEtBQUtGLFVBQVc7WUFDckQsTUFBTUcsZ0JBQWdCVixhQUNqQlcsS0FBSyxDQUFDRixHQUFHQSxJQUFJRixXQUNiUixHQUFHLENBQUMsQ0FBQ1IsYUFBYWtCLElBQU12QixTQUFTLENBQUN1QixFQUFFLENBQUN0QixNQUFNLENBQUNJLGFBQWFZLFdBQVcsQ0FBQ00sRUFBRTtZQUM1RSxNQUFNRyxjQUFjLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0o7WUFDdENGLGFBQWFPLElBQUksQ0FBQ0g7UUFDdEI7UUFDQSxPQUFPSixhQUFhUSxJQUFJO0lBQzVCO0lBQ0EsTUFBTUMsT0FBTzdCLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLE1BQU0sRUFBRUMsR0FBRyxFQUFFRixPQUFPRyxXQUFXLEVBQUUsR0FBR0g7UUFDcEMsTUFBTUksV0FBVyxJQUFJLENBQUNOLFNBQVMsQ0FBQ0ksSUFBSTtRQUNwQyxJQUFJRSxhQUFhQyxXQUFXO1lBQ3hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLGlDQUFpQyxFQUFFSixJQUFJLEVBQUUsQ0FBQztRQUMvRDtRQUNBLE9BQU9FLFNBQVN5QixNQUFNLENBQUMxQixhQUFhRjtJQUN4QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvcm91dGVyLmpzP2MyOGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUnVubmFibGUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBlbnN1cmVDb25maWcgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IHJvdXRlcyB0byBhIHNldCBvZiBydW5uYWJsZXMgYmFzZWQgb24gSW5wdXRbJ2tleSddLlxuICogUmV0dXJucyB0aGUgb3V0cHV0IG9mIHRoZSBzZWxlY3RlZCBydW5uYWJsZS5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBSb3V0ZXJSdW5uYWJsZSwgUnVubmFibGVMYW1iZGEgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuICpcbiAqIGNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXJSdW5uYWJsZSh7XG4gKiAgIHJ1bm5hYmxlczoge1xuICogICAgIHRvVXBwZXJDYXNlOiBSdW5uYWJsZUxhbWJkYS5mcm9tKCh0ZXh0OiBzdHJpbmcpID0+IHRleHQudG9VcHBlckNhc2UoKSksXG4gKiAgICAgcmV2ZXJzZVRleHQ6IFJ1bm5hYmxlTGFtYmRhLmZyb20oKHRleHQ6IHN0cmluZykgPT5cbiAqICAgICAgIHRleHQuc3BsaXQoXCJcIikucmV2ZXJzZSgpLmpvaW4oXCJcIilcbiAqICAgICApLFxuICogICB9LFxuICogfSk7XG4gKlxuICogLy8gSW52b2tlIHRoZSAncmV2ZXJzZVRleHQnIHJ1bm5hYmxlXG4gKiBjb25zdCByZXN1bHQxID0gcm91dGVyLmludm9rZSh7IGtleTogXCJyZXZlcnNlVGV4dFwiLCBpbnB1dDogXCJIZWxsbyBXb3JsZFwiIH0pO1xuICpcbiAqIC8vIFwiZGxyb1cgb2xsZUhcIlxuICpcbiAqIC8vIEludm9rZSB0aGUgJ3RvVXBwZXJDYXNlJyBydW5uYWJsZVxuICogY29uc3QgcmVzdWx0MiA9IHJvdXRlci5pbnZva2UoeyBrZXk6IFwidG9VcHBlckNhc2VcIiwgaW5wdXQ6IFwiSGVsbG8gV29ybGRcIiB9KTtcbiAqXG4gKiAvLyBcIkhFTExPIFdPUkxEXCJcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUm91dGVyUnVubmFibGUgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJvdXRlclJ1bm5hYmxlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bm5hYmxlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJ1bm5hYmxlcyA9IGZpZWxkcy5ydW5uYWJsZXM7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IGtleSwgaW5wdXQ6IGFjdHVhbElucHV0IH0gPSBpbnB1dDtcbiAgICAgICAgY29uc3QgcnVubmFibGUgPSB0aGlzLnJ1bm5hYmxlc1trZXldO1xuICAgICAgICBpZiAocnVubmFibGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBydW5uYWJsZSBhc3NvY2lhdGVkIHdpdGgga2V5IFwiJHtrZXl9XCIuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1bm5hYmxlLmludm9rZShhY3R1YWxJbnB1dCwgZW5zdXJlQ29uZmlnKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IGlucHV0cy5tYXAoKGlucHV0KSA9PiBpbnB1dC5rZXkpO1xuICAgICAgICBjb25zdCBhY3R1YWxJbnB1dHMgPSBpbnB1dHMubWFwKChpbnB1dCkgPT4gaW5wdXQuaW5wdXQpO1xuICAgICAgICBjb25zdCBtaXNzaW5nS2V5ID0ga2V5cy5maW5kKChrZXkpID0+IHRoaXMucnVubmFibGVzW2tleV0gPT09IHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChtaXNzaW5nS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgT25lIG9yIG1vcmUga2V5cyBkbyBub3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgcnVubmFibGUuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVzID0ga2V5cy5tYXAoKGtleSkgPT4gdGhpcy5ydW5uYWJsZXNba2V5XSk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnNMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IG1heENvbmN1cnJlbmN5ID0gb3B0aW9uc0xpc3RbMF0/Lm1heENvbmN1cnJlbmN5ID8/IGJhdGNoT3B0aW9ucz8ubWF4Q29uY3VycmVuY3k7XG4gICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IG1heENvbmN1cnJlbmN5ICYmIG1heENvbmN1cnJlbmN5ID4gMCA/IG1heENvbmN1cnJlbmN5IDogaW5wdXRzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYmF0Y2hSZXN1bHRzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWN0dWFsSW5wdXRzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoUHJvbWlzZXMgPSBhY3R1YWxJbnB1dHNcbiAgICAgICAgICAgICAgICAuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSlcbiAgICAgICAgICAgICAgICAubWFwKChhY3R1YWxJbnB1dCwgaSkgPT4gcnVubmFibGVzW2ldLmludm9rZShhY3R1YWxJbnB1dCwgb3B0aW9uc0xpc3RbaV0pKTtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoUmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5hbGwoYmF0Y2hQcm9taXNlcyk7XG4gICAgICAgICAgICBiYXRjaFJlc3VsdHMucHVzaChiYXRjaFJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhdGNoUmVzdWx0cy5mbGF0KCk7XG4gICAgfVxuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IGtleSwgaW5wdXQ6IGFjdHVhbElucHV0IH0gPSBpbnB1dDtcbiAgICAgICAgY29uc3QgcnVubmFibGUgPSB0aGlzLnJ1bm5hYmxlc1trZXldO1xuICAgICAgICBpZiAocnVubmFibGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBydW5uYWJsZSBhc3NvY2lhdGVkIHdpdGgga2V5IFwiJHtrZXl9XCIuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1bm5hYmxlLnN0cmVhbShhY3R1YWxJbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlJ1bm5hYmxlIiwiZW5zdXJlQ29uZmlnIiwiUm91dGVyUnVubmFibGUiLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwicnVubmFibGVzIiwiaW52b2tlIiwiaW5wdXQiLCJvcHRpb25zIiwia2V5IiwiYWN0dWFsSW5wdXQiLCJydW5uYWJsZSIsInVuZGVmaW5lZCIsIkVycm9yIiwiYmF0Y2giLCJpbnB1dHMiLCJiYXRjaE9wdGlvbnMiLCJrZXlzIiwibWFwIiwiYWN0dWFsSW5wdXRzIiwibWlzc2luZ0tleSIsImZpbmQiLCJvcHRpb25zTGlzdCIsIl9nZXRPcHRpb25zTGlzdCIsImxlbmd0aCIsIm1heENvbmN1cnJlbmN5IiwiYmF0Y2hTaXplIiwiYmF0Y2hSZXN1bHRzIiwiaSIsImJhdGNoUHJvbWlzZXMiLCJzbGljZSIsImJhdGNoUmVzdWx0IiwiUHJvbWlzZSIsImFsbCIsInB1c2giLCJmbGF0Iiwic3RyZWFtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/router.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/utils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _RootEventFilter: () => (/* binding */ _RootEventFilter),\n/* harmony export */   isRunnableInterface: () => (/* binding */ isRunnableInterface)\n/* harmony export */ });\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isRunnableInterface(thing) {\n    return thing ? thing.lc_runnable : false;\n}\n/**\n * Utility to filter the root event in the streamEvents implementation.\n * This is simply binding the arguments to the namespace to make save on\n * a bit of typing in the streamEvents implementation.\n *\n * TODO: Refactor and remove.\n */ class _RootEventFilter {\n    constructor(fields){\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.includeNames = fields.includeNames;\n        this.includeTypes = fields.includeTypes;\n        this.includeTags = fields.includeTags;\n        this.excludeNames = fields.excludeNames;\n        this.excludeTypes = fields.excludeTypes;\n        this.excludeTags = fields.excludeTags;\n    }\n    includeEvent(event, rootType) {\n        let include = this.includeNames === undefined && this.includeTypes === undefined && this.includeTags === undefined;\n        const eventTags = event.tags ?? [];\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(event.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(rootType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || eventTags.some((tag)=>this.includeTags?.includes(tag));\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(event.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(rootType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && eventTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsOERBQThEO0FBQ3ZELFNBQVNBLG9CQUFvQkMsS0FBSztJQUNyQyxPQUFPQSxRQUFRQSxNQUFNQyxXQUFXLEdBQUc7QUFDdkM7QUFDQTs7Ozs7O0NBTUMsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFlBQVksR0FBR1AsT0FBT08sWUFBWTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBR1IsT0FBT1EsWUFBWTtRQUN2QyxJQUFJLENBQUNDLFdBQVcsR0FBR1QsT0FBT1MsV0FBVztRQUNyQyxJQUFJLENBQUNDLFlBQVksR0FBR1YsT0FBT1UsWUFBWTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBR1gsT0FBT1csWUFBWTtRQUN2QyxJQUFJLENBQUNDLFdBQVcsR0FBR1osT0FBT1ksV0FBVztJQUN6QztJQUNBQyxhQUFhQyxLQUFLLEVBQUVDLFFBQVEsRUFBRTtRQUMxQixJQUFJQyxVQUFVLElBQUksQ0FBQ1QsWUFBWSxLQUFLVSxhQUNoQyxJQUFJLENBQUNULFlBQVksS0FBS1MsYUFDdEIsSUFBSSxDQUFDUixXQUFXLEtBQUtRO1FBQ3pCLE1BQU1DLFlBQVlKLE1BQU1LLElBQUksSUFBSSxFQUFFO1FBQ2xDLElBQUksSUFBSSxDQUFDWixZQUFZLEtBQUtVLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsSUFBSSxDQUFDVCxZQUFZLENBQUNhLFFBQVEsQ0FBQ04sTUFBTU8sSUFBSTtRQUM5RDtRQUNBLElBQUksSUFBSSxDQUFDYixZQUFZLEtBQUtTLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsSUFBSSxDQUFDUixZQUFZLENBQUNZLFFBQVEsQ0FBQ0w7UUFDcEQ7UUFDQSxJQUFJLElBQUksQ0FBQ04sV0FBVyxLQUFLUSxXQUFXO1lBQ2hDRCxVQUNJQSxXQUFXRSxVQUFVSSxJQUFJLENBQUMsQ0FBQ0MsTUFBUSxJQUFJLENBQUNkLFdBQVcsRUFBRVcsU0FBU0c7UUFDdEU7UUFDQSxJQUFJLElBQUksQ0FBQ2IsWUFBWSxLQUFLTyxXQUFXO1lBQ2pDRCxVQUFVQSxXQUFXLENBQUMsSUFBSSxDQUFDTixZQUFZLENBQUNVLFFBQVEsQ0FBQ04sTUFBTU8sSUFBSTtRQUMvRDtRQUNBLElBQUksSUFBSSxDQUFDVixZQUFZLEtBQUtNLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsQ0FBQyxJQUFJLENBQUNMLFlBQVksQ0FBQ1MsUUFBUSxDQUFDTDtRQUNyRDtRQUNBLElBQUksSUFBSSxDQUFDSCxXQUFXLEtBQUtLLFdBQVc7WUFDaENELFVBQ0lBLFdBQVdFLFVBQVVNLEtBQUssQ0FBQyxDQUFDRCxNQUFRLENBQUMsSUFBSSxDQUFDWCxXQUFXLEVBQUVRLFNBQVNHO1FBQ3hFO1FBQ0EsT0FBT1A7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvdXRpbHMuanM/ODFmYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIGlzUnVubmFibGVJbnRlcmZhY2UodGhpbmcpIHtcbiAgICByZXR1cm4gdGhpbmcgPyB0aGluZy5sY19ydW5uYWJsZSA6IGZhbHNlO1xufVxuLyoqXG4gKiBVdGlsaXR5IHRvIGZpbHRlciB0aGUgcm9vdCBldmVudCBpbiB0aGUgc3RyZWFtRXZlbnRzIGltcGxlbWVudGF0aW9uLlxuICogVGhpcyBpcyBzaW1wbHkgYmluZGluZyB0aGUgYXJndW1lbnRzIHRvIHRoZSBuYW1lc3BhY2UgdG8gbWFrZSBzYXZlIG9uXG4gKiBhIGJpdCBvZiB0eXBpbmcgaW4gdGhlIHN0cmVhbUV2ZW50cyBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBUT0RPOiBSZWZhY3RvciBhbmQgcmVtb3ZlLlxuICovXG5leHBvcnQgY2xhc3MgX1Jvb3RFdmVudEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluY2x1ZGVOYW1lcyA9IGZpZWxkcy5pbmNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID0gZmllbGRzLmluY2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9IGZpZWxkcy5pbmNsdWRlVGFncztcbiAgICAgICAgdGhpcy5leGNsdWRlTmFtZXMgPSBmaWVsZHMuZXhjbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUeXBlcyA9IGZpZWxkcy5leGNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVRhZ3MgPSBmaWVsZHMuZXhjbHVkZVRhZ3M7XG4gICAgfVxuICAgIGluY2x1ZGVFdmVudChldmVudCwgcm9vdFR5cGUpIHtcbiAgICAgICAgbGV0IGluY2x1ZGUgPSB0aGlzLmluY2x1ZGVOYW1lcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID09PSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGV2ZW50VGFncyA9IGV2ZW50LnRhZ3MgPz8gW107XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVOYW1lcy5pbmNsdWRlcyhldmVudC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlVHlwZXMuaW5jbHVkZXMocm9vdFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgfHwgZXZlbnRUYWdzLnNvbWUoKHRhZykgPT4gdGhpcy5pbmNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVOYW1lcy5pbmNsdWRlcyhldmVudC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZVR5cGVzLmluY2x1ZGVzKHJvb3RUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlICYmIGV2ZW50VGFncy5ldmVyeSgodGFnKSA9PiAhdGhpcy5leGNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImlzUnVubmFibGVJbnRlcmZhY2UiLCJ0aGluZyIsImxjX3J1bm5hYmxlIiwiX1Jvb3RFdmVudEZpbHRlciIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImluY2x1ZGVOYW1lcyIsImluY2x1ZGVUeXBlcyIsImluY2x1ZGVUYWdzIiwiZXhjbHVkZU5hbWVzIiwiZXhjbHVkZVR5cGVzIiwiZXhjbHVkZVRhZ3MiLCJpbmNsdWRlRXZlbnQiLCJldmVudCIsInJvb3RUeXBlIiwiaW5jbHVkZSIsInVuZGVmaW5lZCIsImV2ZW50VGFncyIsInRhZ3MiLCJpbmNsdWRlcyIsIm5hbWUiLCJzb21lIiwidGFnIiwiZXZlcnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/wrappers.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/wrappers.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToHttpEventStream: () => (/* binding */ convertToHttpEventStream)\n/* harmony export */ });\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n\nfunction convertToHttpEventStream(stream) {\n    const encoder = new TextEncoder();\n    const finalStream = new ReadableStream({\n        async start (controller) {\n            for await (const chunk of stream){\n                controller.enqueue(encoder.encode(`event: data\\ndata: ${JSON.stringify(chunk)}\\n\\n`));\n            }\n            controller.enqueue(encoder.encode(\"event: end\\n\\n\"));\n            controller.close();\n        }\n    });\n    return _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__.IterableReadableStream.fromReadableStream(finalStream);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3dyYXBwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTREO0FBQ3JELFNBQVNDLHlCQUF5QkMsTUFBTTtJQUMzQyxNQUFNQyxVQUFVLElBQUlDO0lBQ3BCLE1BQU1DLGNBQWMsSUFBSUMsZUFBZTtRQUNuQyxNQUFNQyxPQUFNQyxVQUFVO1lBQ2xCLFdBQVcsTUFBTUMsU0FBU1AsT0FBUTtnQkFDOUJNLFdBQVdFLE9BQU8sQ0FBQ1AsUUFBUVEsTUFBTSxDQUFDLENBQUMsbUJBQW1CLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQ0osT0FBTyxJQUFJLENBQUM7WUFDdkY7WUFDQUQsV0FBV0UsT0FBTyxDQUFDUCxRQUFRUSxNQUFNLENBQUM7WUFDbENILFdBQVdNLEtBQUs7UUFDcEI7SUFDSjtJQUNBLE9BQU9kLG9FQUFzQkEsQ0FBQ2Usa0JBQWtCLENBQUNWO0FBQ3JEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvd3JhcHBlcnMuanM/MDU5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb0h0dHBFdmVudFN0cmVhbShzdHJlYW0pIHtcbiAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgY29uc3QgZmluYWxTdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICBhc3luYyBzdGFydChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZShgZXZlbnQ6IGRhdGFcXG5kYXRhOiAke0pTT04uc3RyaW5naWZ5KGNodW5rKX1cXG5cXG5gKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoXCJldmVudDogZW5kXFxuXFxuXCIpKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW0oZmluYWxTdHJlYW0pO1xufVxuIl0sIm5hbWVzIjpbIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJjb252ZXJ0VG9IdHRwRXZlbnRTdHJlYW0iLCJzdHJlYW0iLCJlbmNvZGVyIiwiVGV4dEVuY29kZXIiLCJmaW5hbFN0cmVhbSIsIlJlYWRhYmxlU3RyZWFtIiwic3RhcnQiLCJjb250cm9sbGVyIiwiY2h1bmsiLCJlbnF1ZXVlIiwiZW5jb2RlIiwiSlNPTiIsInN0cmluZ2lmeSIsImNsb3NlIiwiZnJvbVJlYWRhYmxlU3RyZWFtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/wrappers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _getConfigureHooks: () => (/* binding */ _getConfigureHooks),\n/* harmony export */   getContextVariable: () => (/* binding */ getContextVariable),\n/* harmony export */   registerConfigureHook: () => (/* binding */ registerConfigureHook),\n/* harmony export */   setContextVariable: () => (/* binding */ setContextVariable)\n/* harmony export */ });\n/* harmony import */ var langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith/run_trees */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/run_trees.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n\n\n/**\n * Set a context variable. Context variables are scoped to any\n * child runnables called by the current runnable, or globally if set outside\n * of any runnable.\n *\n * @remarks\n * This function is only supported in environments that support AsyncLocalStorage,\n * including Node.js, Deno, and Cloudflare Workers.\n *\n * @example\n * ```ts\n * import { RunnableLambda } from \"@langchain/core/runnables\";\n * import {\n *   getContextVariable,\n *   setContextVariable\n * } from \"@langchain/core/context\";\n *\n * const nested = RunnableLambda.from(() => {\n *   // \"bar\" because it was set by a parent\n *   console.log(getContextVariable(\"foo\"));\n *\n *   // Override to \"baz\", but only for child runnables\n *   setContextVariable(\"foo\", \"baz\");\n *\n *   // Now \"baz\", but only for child runnables\n *   return getContextVariable(\"foo\");\n * });\n *\n * const runnable = RunnableLambda.from(async () => {\n *   // Set a context variable named \"foo\"\n *   setContextVariable(\"foo\", \"bar\");\n *\n *   const res = await nested.invoke({});\n *\n *   // Still \"bar\" since child changes do not affect parents\n *   console.log(getContextVariable(\"foo\"));\n *\n *   return res;\n * });\n *\n * // undefined, because context variable has not been set yet\n * console.log(getContextVariable(\"foo\"));\n *\n * // Final return value is \"baz\"\n * const result = await runnable.invoke({});\n * ```\n *\n * @param name The name of the context variable.\n * @param value The value to set.\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction setContextVariable(name, value) {\n    // Avoid using global singleton due to circuluar dependency issues\n    const asyncLocalStorageInstance = (0,_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)();\n    if (asyncLocalStorageInstance === undefined) {\n        throw new Error(`Internal error: Global shared async local storage instance has not been initialized.`);\n    }\n    const runTree = asyncLocalStorageInstance.getStore();\n    const contextVars = {\n        ...runTree?.[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY]\n    };\n    contextVars[name] = value;\n    let newValue = {};\n    if ((0,langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__.isRunTree)(runTree)) {\n        newValue = new langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__.RunTree(runTree);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    newValue[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY] = contextVars;\n    asyncLocalStorageInstance.enterWith(newValue);\n}\n/**\n * Get the value of a previously set context variable. Context variables\n * are scoped to any child runnables called by the current runnable,\n * or globally if set outside of any runnable.\n *\n * @remarks\n * This function is only supported in environments that support AsyncLocalStorage,\n * including Node.js, Deno, and Cloudflare Workers.\n *\n * @example\n * ```ts\n * import { RunnableLambda } from \"@langchain/core/runnables\";\n * import {\n *   getContextVariable,\n *   setContextVariable\n * } from \"@langchain/core/context\";\n *\n * const nested = RunnableLambda.from(() => {\n *   // \"bar\" because it was set by a parent\n *   console.log(getContextVariable(\"foo\"));\n *\n *   // Override to \"baz\", but only for child runnables\n *   setContextVariable(\"foo\", \"baz\");\n *\n *   // Now \"baz\", but only for child runnables\n *   return getContextVariable(\"foo\");\n * });\n *\n * const runnable = RunnableLambda.from(async () => {\n *   // Set a context variable named \"foo\"\n *   setContextVariable(\"foo\", \"bar\");\n *\n *   const res = await nested.invoke({});\n *\n *   // Still \"bar\" since child changes do not affect parents\n *   console.log(getContextVariable(\"foo\"));\n *\n *   return res;\n * });\n *\n * // undefined, because context variable has not been set yet\n * console.log(getContextVariable(\"foo\"));\n *\n * // Final return value is \"baz\"\n * const result = await runnable.invoke({});\n * ```\n *\n * @param name The name of the context variable.\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getContextVariable(name) {\n    // Avoid using global singleton due to circuluar dependency issues\n    const asyncLocalStorageInstance = (0,_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)();\n    if (asyncLocalStorageInstance === undefined) {\n        return undefined;\n    }\n    const runTree = asyncLocalStorageInstance.getStore();\n    return runTree?.[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY]?.[name];\n}\nconst LC_CONFIGURE_HOOKS_KEY = Symbol(\"lc:configure_hooks\");\nconst _getConfigureHooks = ()=>getContextVariable(LC_CONFIGURE_HOOKS_KEY) || [];\n/**\n * Register a callback configure hook to automatically add callback handlers to all runs.\n *\n * There are two ways to use this:\n *\n * 1. Using a context variable:\n *    - Set `contextVar` to specify the variable name\n *    - Use `setContextVariable()` to store your handler instance\n *\n * 2. Using an environment variable:\n *    - Set both `envVar` and `handlerClass`\n *    - The handler will be instantiated when the env var is set to \"true\".\n *\n * @example\n * ```typescript\n * // Method 1: Using context variable\n * import {\n *   registerConfigureHook,\n *   setContextVariable\n * } from \"@langchain/core/context\";\n *\n * const tracer = new MyCallbackHandler();\n * registerConfigureHook({\n *   contextVar: \"my_tracer\",\n * });\n * setContextVariable(\"my_tracer\", tracer);\n *\n * // ...run code here\n *\n * // Method 2: Using environment variable\n * registerConfigureHook({\n *   handlerClass: MyCallbackHandler,\n *   envVar: \"MY_TRACER_ENABLED\",\n * });\n * process.env.MY_TRACER_ENABLED = \"true\";\n *\n * // ...run code here\n * ```\n *\n * @param config Configuration object for the hook\n * @param config.contextVar Name of the context variable containing the handler instance\n * @param config.inheritable Whether child runs should inherit this handler\n * @param config.handlerClass Optional callback handler class (required if using envVar)\n * @param config.envVar Optional environment variable name to control handler activation\n */ const registerConfigureHook = (config)=>{\n    if (config.envVar && !config.handlerClass) {\n        throw new Error(\"If envVar is set, handlerClass must also be set to a non-None value.\");\n    }\n    setContextVariable(LC_CONFIGURE_HOOKS_KEY, [\n        ..._getConfigureHooks(),\n        config\n    ]);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2NvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXlEO0FBQ2tDO0FBQzNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBaURDLEdBQ0QsOERBQThEO0FBQ3ZELFNBQVNJLG1CQUFtQkMsSUFBSSxFQUFFQyxLQUFLO0lBQzFDLGtFQUFrRTtJQUNsRSxNQUFNQyw0QkFBNEJKLCtFQUFrQ0E7SUFDcEUsSUFBSUksOEJBQThCQyxXQUFXO1FBQ3pDLE1BQU0sSUFBSUMsTUFBTSxDQUFDLG9GQUFvRixDQUFDO0lBQzFHO0lBQ0EsTUFBTUMsVUFBVUgsMEJBQTBCSSxRQUFRO0lBQ2xELE1BQU1DLGNBQWM7UUFBRSxHQUFHRixTQUFTLENBQUNSLCtEQUFzQkEsQ0FBQztJQUFDO0lBQzNEVSxXQUFXLENBQUNQLEtBQUssR0FBR0M7SUFDcEIsSUFBSU8sV0FBVyxDQUFDO0lBQ2hCLElBQUliLDhEQUFTQSxDQUFDVSxVQUFVO1FBQ3BCRyxXQUFXLElBQUlaLHdEQUFPQSxDQUFDUztJQUMzQjtJQUNBLDhEQUE4RDtJQUM5REcsUUFBUSxDQUFDWCwrREFBc0JBLENBQUMsR0FBR1U7SUFDbkNMLDBCQUEwQk8sU0FBUyxDQUFDRDtBQUN4QztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FnREMsR0FDRCw4REFBOEQ7QUFDdkQsU0FBU0UsbUJBQW1CVixJQUFJO0lBQ25DLGtFQUFrRTtJQUNsRSxNQUFNRSw0QkFBNEJKLCtFQUFrQ0E7SUFDcEUsSUFBSUksOEJBQThCQyxXQUFXO1FBQ3pDLE9BQU9BO0lBQ1g7SUFDQSxNQUFNRSxVQUFVSCwwQkFBMEJJLFFBQVE7SUFDbEQsT0FBT0QsU0FBUyxDQUFDUiwrREFBc0JBLENBQUMsRUFBRSxDQUFDRyxLQUFLO0FBQ3BEO0FBQ0EsTUFBTVcseUJBQXlCQyxPQUFPO0FBQy9CLE1BQU1DLHFCQUFxQixJQUFNSCxtQkFBbUJDLDJCQUEyQixFQUFFLENBQUM7QUFDekY7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBNENDLEdBQ00sTUFBTUcsd0JBQXdCLENBQUNDO0lBQ2xDLElBQUlBLE9BQU9DLE1BQU0sSUFBSSxDQUFDRCxPQUFPRSxZQUFZLEVBQUU7UUFDdkMsTUFBTSxJQUFJYixNQUFNO0lBQ3BCO0lBQ0FMLG1CQUFtQlksd0JBQXdCO1dBQUlFO1FBQXNCRTtLQUFPO0FBQ2hGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3NpbmdsZXRvbnMvYXN5bmNfbG9jYWxfc3RvcmFnZS9jb250ZXh0LmpzP2E3ZTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNSdW5UcmVlLCBSdW5UcmVlIH0gZnJvbSBcImxhbmdzbWl0aC9ydW5fdHJlZXNcIjtcbmltcG9ydCB7IF9DT05URVhUX1ZBUklBQkxFU19LRVksIGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UsIH0gZnJvbSBcIi4vZ2xvYmFscy5qc1wiO1xuLyoqXG4gKiBTZXQgYSBjb250ZXh0IHZhcmlhYmxlLiBDb250ZXh0IHZhcmlhYmxlcyBhcmUgc2NvcGVkIHRvIGFueVxuICogY2hpbGQgcnVubmFibGVzIGNhbGxlZCBieSB0aGUgY3VycmVudCBydW5uYWJsZSwgb3IgZ2xvYmFsbHkgaWYgc2V0IG91dHNpZGVcbiAqIG9mIGFueSBydW5uYWJsZS5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhpcyBmdW5jdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBpbiBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IEFzeW5jTG9jYWxTdG9yYWdlLFxuICogaW5jbHVkaW5nIE5vZGUuanMsIERlbm8sIGFuZCBDbG91ZGZsYXJlIFdvcmtlcnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBSdW5uYWJsZUxhbWJkYSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG4gKiBpbXBvcnQge1xuICogICBnZXRDb250ZXh0VmFyaWFibGUsXG4gKiAgIHNldENvbnRleHRWYXJpYWJsZVxuICogfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2NvbnRleHRcIjtcbiAqXG4gKiBjb25zdCBuZXN0ZWQgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKCgpID0+IHtcbiAqICAgLy8gXCJiYXJcIiBiZWNhdXNlIGl0IHdhcyBzZXQgYnkgYSBwYXJlbnRcbiAqICAgY29uc29sZS5sb2coZ2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIpKTtcbiAqXG4gKiAgIC8vIE92ZXJyaWRlIHRvIFwiYmF6XCIsIGJ1dCBvbmx5IGZvciBjaGlsZCBydW5uYWJsZXNcbiAqICAgc2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIsIFwiYmF6XCIpO1xuICpcbiAqICAgLy8gTm93IFwiYmF6XCIsIGJ1dCBvbmx5IGZvciBjaGlsZCBydW5uYWJsZXNcbiAqICAgcmV0dXJuIGdldENvbnRleHRWYXJpYWJsZShcImZvb1wiKTtcbiAqIH0pO1xuICpcbiAqIGNvbnN0IHJ1bm5hYmxlID0gUnVubmFibGVMYW1iZGEuZnJvbShhc3luYyAoKSA9PiB7XG4gKiAgIC8vIFNldCBhIGNvbnRleHQgdmFyaWFibGUgbmFtZWQgXCJmb29cIlxuICogICBzZXRDb250ZXh0VmFyaWFibGUoXCJmb29cIiwgXCJiYXJcIik7XG4gKlxuICogICBjb25zdCByZXMgPSBhd2FpdCBuZXN0ZWQuaW52b2tlKHt9KTtcbiAqXG4gKiAgIC8vIFN0aWxsIFwiYmFyXCIgc2luY2UgY2hpbGQgY2hhbmdlcyBkbyBub3QgYWZmZWN0IHBhcmVudHNcbiAqICAgY29uc29sZS5sb2coZ2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIpKTtcbiAqXG4gKiAgIHJldHVybiByZXM7XG4gKiB9KTtcbiAqXG4gKiAvLyB1bmRlZmluZWQsIGJlY2F1c2UgY29udGV4dCB2YXJpYWJsZSBoYXMgbm90IGJlZW4gc2V0IHlldFxuICogY29uc29sZS5sb2coZ2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIpKTtcbiAqXG4gKiAvLyBGaW5hbCByZXR1cm4gdmFsdWUgaXMgXCJiYXpcIlxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgcnVubmFibGUuaW52b2tlKHt9KTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjb250ZXh0IHZhcmlhYmxlLlxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gc2V0Q29udGV4dFZhcmlhYmxlKG5hbWUsIHZhbHVlKSB7XG4gICAgLy8gQXZvaWQgdXNpbmcgZ2xvYmFsIHNpbmdsZXRvbiBkdWUgdG8gY2lyY3VsdWFyIGRlcGVuZGVuY3kgaXNzdWVzXG4gICAgY29uc3QgYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSA9IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UoKTtcbiAgICBpZiAoYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgZXJyb3I6IEdsb2JhbCBzaGFyZWQgYXN5bmMgbG9jYWwgc3RvcmFnZSBpbnN0YW5jZSBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuYCk7XG4gICAgfVxuICAgIGNvbnN0IHJ1blRyZWUgPSBhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlLmdldFN0b3JlKCk7XG4gICAgY29uc3QgY29udGV4dFZhcnMgPSB7IC4uLnJ1blRyZWU/LltfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXSB9O1xuICAgIGNvbnRleHRWYXJzW25hbWVdID0gdmFsdWU7XG4gICAgbGV0IG5ld1ZhbHVlID0ge307XG4gICAgaWYgKGlzUnVuVHJlZShydW5UcmVlKSkge1xuICAgICAgICBuZXdWYWx1ZSA9IG5ldyBSdW5UcmVlKHJ1blRyZWUpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIG5ld1ZhbHVlW19DT05URVhUX1ZBUklBQkxFU19LRVldID0gY29udGV4dFZhcnM7XG4gICAgYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZS5lbnRlcldpdGgobmV3VmFsdWUpO1xufVxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGEgcHJldmlvdXNseSBzZXQgY29udGV4dCB2YXJpYWJsZS4gQ29udGV4dCB2YXJpYWJsZXNcbiAqIGFyZSBzY29wZWQgdG8gYW55IGNoaWxkIHJ1bm5hYmxlcyBjYWxsZWQgYnkgdGhlIGN1cnJlbnQgcnVubmFibGUsXG4gKiBvciBnbG9iYWxseSBpZiBzZXQgb3V0c2lkZSBvZiBhbnkgcnVubmFibGUuXG4gKlxuICogQHJlbWFya3NcbiAqIFRoaXMgZnVuY3Rpb24gaXMgb25seSBzdXBwb3J0ZWQgaW4gZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBBc3luY0xvY2FsU3RvcmFnZSxcbiAqIGluY2x1ZGluZyBOb2RlLmpzLCBEZW5vLCBhbmQgQ2xvdWRmbGFyZSBXb3JrZXJzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgUnVubmFibGVMYW1iZGEgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuICogaW1wb3J0IHtcbiAqICAgZ2V0Q29udGV4dFZhcmlhYmxlLFxuICogICBzZXRDb250ZXh0VmFyaWFibGVcbiAqIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9jb250ZXh0XCI7XG4gKlxuICogY29uc3QgbmVzdGVkID0gUnVubmFibGVMYW1iZGEuZnJvbSgoKSA9PiB7XG4gKiAgIC8vIFwiYmFyXCIgYmVjYXVzZSBpdCB3YXMgc2V0IGJ5IGEgcGFyZW50XG4gKiAgIGNvbnNvbGUubG9nKGdldENvbnRleHRWYXJpYWJsZShcImZvb1wiKSk7XG4gKlxuICogICAvLyBPdmVycmlkZSB0byBcImJhelwiLCBidXQgb25seSBmb3IgY2hpbGQgcnVubmFibGVzXG4gKiAgIHNldENvbnRleHRWYXJpYWJsZShcImZvb1wiLCBcImJhelwiKTtcbiAqXG4gKiAgIC8vIE5vdyBcImJhelwiLCBidXQgb25seSBmb3IgY2hpbGQgcnVubmFibGVzXG4gKiAgIHJldHVybiBnZXRDb250ZXh0VmFyaWFibGUoXCJmb29cIik7XG4gKiB9KTtcbiAqXG4gKiBjb25zdCBydW5uYWJsZSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oYXN5bmMgKCkgPT4ge1xuICogICAvLyBTZXQgYSBjb250ZXh0IHZhcmlhYmxlIG5hbWVkIFwiZm9vXCJcbiAqICAgc2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIsIFwiYmFyXCIpO1xuICpcbiAqICAgY29uc3QgcmVzID0gYXdhaXQgbmVzdGVkLmludm9rZSh7fSk7XG4gKlxuICogICAvLyBTdGlsbCBcImJhclwiIHNpbmNlIGNoaWxkIGNoYW5nZXMgZG8gbm90IGFmZmVjdCBwYXJlbnRzXG4gKiAgIGNvbnNvbGUubG9nKGdldENvbnRleHRWYXJpYWJsZShcImZvb1wiKSk7XG4gKlxuICogICByZXR1cm4gcmVzO1xuICogfSk7XG4gKlxuICogLy8gdW5kZWZpbmVkLCBiZWNhdXNlIGNvbnRleHQgdmFyaWFibGUgaGFzIG5vdCBiZWVuIHNldCB5ZXRcbiAqIGNvbnNvbGUubG9nKGdldENvbnRleHRWYXJpYWJsZShcImZvb1wiKSk7XG4gKlxuICogLy8gRmluYWwgcmV0dXJuIHZhbHVlIGlzIFwiYmF6XCJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJ1bm5hYmxlLmludm9rZSh7fSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgY29udGV4dCB2YXJpYWJsZS5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZXh0VmFyaWFibGUobmFtZSkge1xuICAgIC8vIEF2b2lkIHVzaW5nIGdsb2JhbCBzaW5nbGV0b24gZHVlIHRvIGNpcmN1bHVhciBkZXBlbmRlbmN5IGlzc3Vlc1xuICAgIGNvbnN0IGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgPSBnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlKCk7XG4gICAgaWYgKGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBydW5UcmVlID0gYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZS5nZXRTdG9yZSgpO1xuICAgIHJldHVybiBydW5UcmVlPy5bX0NPTlRFWFRfVkFSSUFCTEVTX0tFWV0/LltuYW1lXTtcbn1cbmNvbnN0IExDX0NPTkZJR1VSRV9IT09LU19LRVkgPSBTeW1ib2woXCJsYzpjb25maWd1cmVfaG9va3NcIik7XG5leHBvcnQgY29uc3QgX2dldENvbmZpZ3VyZUhvb2tzID0gKCkgPT4gZ2V0Q29udGV4dFZhcmlhYmxlKExDX0NPTkZJR1VSRV9IT09LU19LRVkpIHx8IFtdO1xuLyoqXG4gKiBSZWdpc3RlciBhIGNhbGxiYWNrIGNvbmZpZ3VyZSBob29rIHRvIGF1dG9tYXRpY2FsbHkgYWRkIGNhbGxiYWNrIGhhbmRsZXJzIHRvIGFsbCBydW5zLlxuICpcbiAqIFRoZXJlIGFyZSB0d28gd2F5cyB0byB1c2UgdGhpczpcbiAqXG4gKiAxLiBVc2luZyBhIGNvbnRleHQgdmFyaWFibGU6XG4gKiAgICAtIFNldCBgY29udGV4dFZhcmAgdG8gc3BlY2lmeSB0aGUgdmFyaWFibGUgbmFtZVxuICogICAgLSBVc2UgYHNldENvbnRleHRWYXJpYWJsZSgpYCB0byBzdG9yZSB5b3VyIGhhbmRsZXIgaW5zdGFuY2VcbiAqXG4gKiAyLiBVc2luZyBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZTpcbiAqICAgIC0gU2V0IGJvdGggYGVudlZhcmAgYW5kIGBoYW5kbGVyQ2xhc3NgXG4gKiAgICAtIFRoZSBoYW5kbGVyIHdpbGwgYmUgaW5zdGFudGlhdGVkIHdoZW4gdGhlIGVudiB2YXIgaXMgc2V0IHRvIFwidHJ1ZVwiLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBNZXRob2QgMTogVXNpbmcgY29udGV4dCB2YXJpYWJsZVxuICogaW1wb3J0IHtcbiAqICAgcmVnaXN0ZXJDb25maWd1cmVIb29rLFxuICogICBzZXRDb250ZXh0VmFyaWFibGVcbiAqIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9jb250ZXh0XCI7XG4gKlxuICogY29uc3QgdHJhY2VyID0gbmV3IE15Q2FsbGJhY2tIYW5kbGVyKCk7XG4gKiByZWdpc3RlckNvbmZpZ3VyZUhvb2soe1xuICogICBjb250ZXh0VmFyOiBcIm15X3RyYWNlclwiLFxuICogfSk7XG4gKiBzZXRDb250ZXh0VmFyaWFibGUoXCJteV90cmFjZXJcIiwgdHJhY2VyKTtcbiAqXG4gKiAvLyAuLi5ydW4gY29kZSBoZXJlXG4gKlxuICogLy8gTWV0aG9kIDI6IFVzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlXG4gKiByZWdpc3RlckNvbmZpZ3VyZUhvb2soe1xuICogICBoYW5kbGVyQ2xhc3M6IE15Q2FsbGJhY2tIYW5kbGVyLFxuICogICBlbnZWYXI6IFwiTVlfVFJBQ0VSX0VOQUJMRURcIixcbiAqIH0pO1xuICogcHJvY2Vzcy5lbnYuTVlfVFJBQ0VSX0VOQUJMRUQgPSBcInRydWVcIjtcbiAqXG4gKiAvLyAuLi5ydW4gY29kZSBoZXJlXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29uZmlnIENvbmZpZ3VyYXRpb24gb2JqZWN0IGZvciB0aGUgaG9va1xuICogQHBhcmFtIGNvbmZpZy5jb250ZXh0VmFyIE5hbWUgb2YgdGhlIGNvbnRleHQgdmFyaWFibGUgY29udGFpbmluZyB0aGUgaGFuZGxlciBpbnN0YW5jZVxuICogQHBhcmFtIGNvbmZpZy5pbmhlcml0YWJsZSBXaGV0aGVyIGNoaWxkIHJ1bnMgc2hvdWxkIGluaGVyaXQgdGhpcyBoYW5kbGVyXG4gKiBAcGFyYW0gY29uZmlnLmhhbmRsZXJDbGFzcyBPcHRpb25hbCBjYWxsYmFjayBoYW5kbGVyIGNsYXNzIChyZXF1aXJlZCBpZiB1c2luZyBlbnZWYXIpXG4gKiBAcGFyYW0gY29uZmlnLmVudlZhciBPcHRpb25hbCBlbnZpcm9ubWVudCB2YXJpYWJsZSBuYW1lIHRvIGNvbnRyb2wgaGFuZGxlciBhY3RpdmF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCByZWdpc3RlckNvbmZpZ3VyZUhvb2sgPSAoY29uZmlnKSA9PiB7XG4gICAgaWYgKGNvbmZpZy5lbnZWYXIgJiYgIWNvbmZpZy5oYW5kbGVyQ2xhc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSWYgZW52VmFyIGlzIHNldCwgaGFuZGxlckNsYXNzIG11c3QgYWxzbyBiZSBzZXQgdG8gYSBub24tTm9uZSB2YWx1ZS5cIik7XG4gICAgfVxuICAgIHNldENvbnRleHRWYXJpYWJsZShMQ19DT05GSUdVUkVfSE9PS1NfS0VZLCBbLi4uX2dldENvbmZpZ3VyZUhvb2tzKCksIGNvbmZpZ10pO1xufTtcbiJdLCJuYW1lcyI6WyJpc1J1blRyZWUiLCJSdW5UcmVlIiwiX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSIsImdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UiLCJzZXRDb250ZXh0VmFyaWFibGUiLCJuYW1lIiwidmFsdWUiLCJhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJydW5UcmVlIiwiZ2V0U3RvcmUiLCJjb250ZXh0VmFycyIsIm5ld1ZhbHVlIiwiZW50ZXJXaXRoIiwiZ2V0Q29udGV4dFZhcmlhYmxlIiwiTENfQ09ORklHVVJFX0hPT0tTX0tFWSIsIlN5bWJvbCIsIl9nZXRDb25maWd1cmVIb29rcyIsInJlZ2lzdGVyQ29uZmlndXJlSG9vayIsImNvbmZpZyIsImVudlZhciIsImhhbmRsZXJDbGFzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TRACING_ALS_KEY: () => (/* binding */ TRACING_ALS_KEY),\n/* harmony export */   _CONTEXT_VARIABLES_KEY: () => (/* binding */ _CONTEXT_VARIABLES_KEY),\n/* harmony export */   getGlobalAsyncLocalStorageInstance: () => (/* binding */ getGlobalAsyncLocalStorageInstance),\n/* harmony export */   setGlobalAsyncLocalStorageInstance: () => (/* binding */ setGlobalAsyncLocalStorageInstance)\n/* harmony export */ });\nconst TRACING_ALS_KEY = Symbol.for(\"ls:tracing_async_local_storage\");\nconst _CONTEXT_VARIABLES_KEY = Symbol.for(\"lc:context_variables\");\nconst setGlobalAsyncLocalStorageInstance = (instance)=>{\n    globalThis[TRACING_ALS_KEY] = instance;\n};\nconst getGlobalAsyncLocalStorageInstance = ()=>{\n    return globalThis[TRACING_ALS_KEY];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2dsb2JhbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFPLE1BQU1BLGtCQUFrQkMsT0FBT0MsR0FBRyxDQUFDLGtDQUFrQztBQUNyRSxNQUFNQyx5QkFBeUJGLE9BQU9DLEdBQUcsQ0FBQyx3QkFBd0I7QUFDbEUsTUFBTUUscUNBQXFDLENBQUNDO0lBQy9DQyxVQUFVLENBQUNOLGdCQUFnQixHQUFHSztBQUNsQyxFQUFFO0FBQ0ssTUFBTUUscUNBQXFDO0lBQzlDLE9BQU9ELFVBQVUsQ0FBQ04sZ0JBQWdCO0FBQ3RDLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3NpbmdsZXRvbnMvYXN5bmNfbG9jYWxfc3RvcmFnZS9nbG9iYWxzLmpzPzJlNzMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFRSQUNJTkdfQUxTX0tFWSA9IFN5bWJvbC5mb3IoXCJsczp0cmFjaW5nX2FzeW5jX2xvY2FsX3N0b3JhZ2VcIik7XG5leHBvcnQgY29uc3QgX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSA9IFN5bWJvbC5mb3IoXCJsYzpjb250ZXh0X3ZhcmlhYmxlc1wiKTtcbmV4cG9ydCBjb25zdCBzZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlID0gKGluc3RhbmNlKSA9PiB7XG4gICAgZ2xvYmFsVGhpc1tUUkFDSU5HX0FMU19LRVldID0gaW5zdGFuY2U7XG59O1xuZXhwb3J0IGNvbnN0IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdsb2JhbFRoaXNbVFJBQ0lOR19BTFNfS0VZXTtcbn07XG4iXSwibmFtZXMiOlsiVFJBQ0lOR19BTFNfS0VZIiwiU3ltYm9sIiwiZm9yIiwiX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSIsInNldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UiLCJpbnN0YW5jZSIsImdsb2JhbFRoaXMiLCJnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* binding */ AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* binding */ MockAsyncLocalStorage)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/index.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* eslint-disable @typescript-eslint/no-explicit-any */ \n\n\nclass MockAsyncLocalStorage {\n    getStore() {\n        return undefined;\n    }\n    run(_store, callback) {\n        return callback();\n    }\n    enterWith(_store) {\n        return undefined;\n    }\n}\nconst mockAsyncLocalStorage = new MockAsyncLocalStorage();\nconst LC_CHILD_KEY = Symbol.for(\"lc:child_config\");\nclass AsyncLocalStorageProvider {\n    getInstance() {\n        return (0,_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)() ?? mockAsyncLocalStorage;\n    }\n    getRunnableConfig() {\n        const storage = this.getInstance();\n        // this has the runnable config\n        // which means that we should also have an instance of a LangChainTracer\n        // with the run map prepopulated\n        return storage.getStore()?.extra?.[LC_CHILD_KEY];\n    }\n    runWithConfig(config, callback, avoidCreatingRootRunTree) {\n        const callbackManager = _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager._configureSync(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n        const storage = this.getInstance();\n        const previousValue = storage.getStore();\n        const parentRunId = callbackManager?.getParentRunId();\n        const langChainTracer = callbackManager?.handlers?.find((handler)=>handler?.name === \"langchain_tracer\");\n        let runTree;\n        if (langChainTracer && parentRunId) {\n            runTree = langChainTracer.getRunTreeWithTracingConfig(parentRunId);\n        } else if (!avoidCreatingRootRunTree) {\n            runTree = new langsmith__WEBPACK_IMPORTED_MODULE_0__.RunTree({\n                name: \"<runnable_lambda>\",\n                tracingEnabled: false\n            });\n        }\n        if (runTree) {\n            runTree.extra = {\n                ...runTree.extra,\n                [LC_CHILD_KEY]: config\n            };\n        }\n        if (previousValue !== undefined && previousValue[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY] !== undefined) {\n            if (runTree === undefined) {\n                runTree = {};\n            }\n            runTree[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY] = previousValue[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY];\n        }\n        return storage.run(runTree, callback);\n    }\n    initializeGlobalInstance(instance) {\n        if ((0,_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)() === undefined) {\n            (0,_globals_js__WEBPACK_IMPORTED_MODULE_1__.setGlobalAsyncLocalStorageInstance)(instance);\n        }\n    }\n}\nconst AsyncLocalStorageProviderSingleton = new AsyncLocalStorageProvider();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEscURBQXFELEdBQ2pCO0FBQzJGO0FBQ2xFO0FBQ3RELE1BQU1LO0lBQ1RDLFdBQVc7UUFDUCxPQUFPQztJQUNYO0lBQ0FDLElBQUlDLE1BQU0sRUFBRUMsUUFBUSxFQUFFO1FBQ2xCLE9BQU9BO0lBQ1g7SUFDQUMsVUFBVUYsTUFBTSxFQUFFO1FBQ2QsT0FBT0Y7SUFDWDtBQUNKO0FBQ0EsTUFBTUssd0JBQXdCLElBQUlQO0FBQ2xDLE1BQU1RLGVBQWVDLE9BQU9DLEdBQUcsQ0FBQztBQUNoQyxNQUFNQztJQUNGQyxjQUFjO1FBQ1YsT0FBT2hCLCtFQUFrQ0EsTUFBTVc7SUFDbkQ7SUFDQU0sb0JBQW9CO1FBQ2hCLE1BQU1DLFVBQVUsSUFBSSxDQUFDRixXQUFXO1FBQ2hDLCtCQUErQjtRQUMvQix3RUFBd0U7UUFDeEUsZ0NBQWdDO1FBQ2hDLE9BQU9FLFFBQVFiLFFBQVEsSUFBSWMsT0FBTyxDQUFDUCxhQUFhO0lBQ3BEO0lBQ0FRLGNBQWNDLE1BQU0sRUFBRVosUUFBUSxFQUFFYSx3QkFBd0IsRUFBRTtRQUN0RCxNQUFNQyxrQkFBa0JwQixrRUFBZUEsQ0FBQ3FCLGNBQWMsQ0FBQ0gsUUFBUUksV0FBV25CLFdBQVdlLFFBQVFLLE1BQU1wQixXQUFXZSxRQUFRTTtRQUN0SCxNQUFNVCxVQUFVLElBQUksQ0FBQ0YsV0FBVztRQUNoQyxNQUFNWSxnQkFBZ0JWLFFBQVFiLFFBQVE7UUFDdEMsTUFBTXdCLGNBQWNOLGlCQUFpQk87UUFDckMsTUFBTUMsa0JBQWtCUixpQkFBaUJTLFVBQVVDLEtBQUssQ0FBQ0MsVUFBWUEsU0FBU0MsU0FBUztRQUN2RixJQUFJQztRQUNKLElBQUlMLG1CQUFtQkYsYUFBYTtZQUNoQ08sVUFBVUwsZ0JBQWdCTSwyQkFBMkIsQ0FBQ1I7UUFDMUQsT0FDSyxJQUFJLENBQUNQLDBCQUEwQjtZQUNoQ2MsVUFBVSxJQUFJckMsOENBQU9BLENBQUM7Z0JBQ2xCb0MsTUFBTTtnQkFDTkcsZ0JBQWdCO1lBQ3BCO1FBQ0o7UUFDQSxJQUFJRixTQUFTO1lBQ1RBLFFBQVFqQixLQUFLLEdBQUc7Z0JBQUUsR0FBR2lCLFFBQVFqQixLQUFLO2dCQUFFLENBQUNQLGFBQWEsRUFBRVM7WUFBTztRQUMvRDtRQUNBLElBQUlPLGtCQUFrQnRCLGFBQ2xCc0IsYUFBYSxDQUFDMUIsK0RBQXNCQSxDQUFDLEtBQUtJLFdBQVc7WUFDckQsSUFBSThCLFlBQVk5QixXQUFXO2dCQUN2QjhCLFVBQVUsQ0FBQztZQUNmO1lBQ0FBLE9BQU8sQ0FBQ2xDLCtEQUFzQkEsQ0FBQyxHQUMzQjBCLGFBQWEsQ0FBQzFCLCtEQUFzQkEsQ0FBQztRQUM3QztRQUNBLE9BQU9nQixRQUFRWCxHQUFHLENBQUM2QixTQUFTM0I7SUFDaEM7SUFDQThCLHlCQUF5QkMsUUFBUSxFQUFFO1FBQy9CLElBQUl4QywrRUFBa0NBLE9BQU9NLFdBQVc7WUFDcERMLCtFQUFrQ0EsQ0FBQ3VDO1FBQ3ZDO0lBQ0o7QUFDSjtBQUNBLE1BQU1DLHFDQUFxQyxJQUFJMUI7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2luZGV4LmpzPzJjMmIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuaW1wb3J0IHsgUnVuVHJlZSB9IGZyb20gXCJsYW5nc21pdGhcIjtcbmltcG9ydCB7IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UsIHNldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UsIF9DT05URVhUX1ZBUklBQkxFU19LRVksIH0gZnJvbSBcIi4vZ2xvYmFscy5qc1wiO1xuaW1wb3J0IHsgQ2FsbGJhY2tNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG5leHBvcnQgY2xhc3MgTW9ja0FzeW5jTG9jYWxTdG9yYWdlIHtcbiAgICBnZXRTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcnVuKF9zdG9yZSwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGVudGVyV2l0aChfc3RvcmUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG5jb25zdCBtb2NrQXN5bmNMb2NhbFN0b3JhZ2UgPSBuZXcgTW9ja0FzeW5jTG9jYWxTdG9yYWdlKCk7XG5jb25zdCBMQ19DSElMRF9LRVkgPSBTeW1ib2wuZm9yKFwibGM6Y2hpbGRfY29uZmlnXCIpO1xuY2xhc3MgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlciB7XG4gICAgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlKCkgPz8gbW9ja0FzeW5jTG9jYWxTdG9yYWdlO1xuICAgIH1cbiAgICBnZXRSdW5uYWJsZUNvbmZpZygpIHtcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgLy8gdGhpcyBoYXMgdGhlIHJ1bm5hYmxlIGNvbmZpZ1xuICAgICAgICAvLyB3aGljaCBtZWFucyB0aGF0IHdlIHNob3VsZCBhbHNvIGhhdmUgYW4gaW5zdGFuY2Ugb2YgYSBMYW5nQ2hhaW5UcmFjZXJcbiAgICAgICAgLy8gd2l0aCB0aGUgcnVuIG1hcCBwcmVwb3B1bGF0ZWRcbiAgICAgICAgcmV0dXJuIHN0b3JhZ2UuZ2V0U3RvcmUoKT8uZXh0cmE/LltMQ19DSElMRF9LRVldO1xuICAgIH1cbiAgICBydW5XaXRoQ29uZmlnKGNvbmZpZywgY2FsbGJhY2ssIGF2b2lkQ3JlYXRpbmdSb290UnVuVHJlZSkge1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXIgPSBDYWxsYmFja01hbmFnZXIuX2NvbmZpZ3VyZVN5bmMoY29uZmlnPy5jYWxsYmFja3MsIHVuZGVmaW5lZCwgY29uZmlnPy50YWdzLCB1bmRlZmluZWQsIGNvbmZpZz8ubWV0YWRhdGEpO1xuICAgICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5nZXRJbnN0YW5jZSgpO1xuICAgICAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gc3RvcmFnZS5nZXRTdG9yZSgpO1xuICAgICAgICBjb25zdCBwYXJlbnRSdW5JZCA9IGNhbGxiYWNrTWFuYWdlcj8uZ2V0UGFyZW50UnVuSWQoKTtcbiAgICAgICAgY29uc3QgbGFuZ0NoYWluVHJhY2VyID0gY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVycz8uZmluZCgoaGFuZGxlcikgPT4gaGFuZGxlcj8ubmFtZSA9PT0gXCJsYW5nY2hhaW5fdHJhY2VyXCIpO1xuICAgICAgICBsZXQgcnVuVHJlZTtcbiAgICAgICAgaWYgKGxhbmdDaGFpblRyYWNlciAmJiBwYXJlbnRSdW5JZCkge1xuICAgICAgICAgICAgcnVuVHJlZSA9IGxhbmdDaGFpblRyYWNlci5nZXRSdW5UcmVlV2l0aFRyYWNpbmdDb25maWcocGFyZW50UnVuSWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFhdm9pZENyZWF0aW5nUm9vdFJ1blRyZWUpIHtcbiAgICAgICAgICAgIHJ1blRyZWUgPSBuZXcgUnVuVHJlZSh7XG4gICAgICAgICAgICAgICAgbmFtZTogXCI8cnVubmFibGVfbGFtYmRhPlwiLFxuICAgICAgICAgICAgICAgIHRyYWNpbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5UcmVlKSB7XG4gICAgICAgICAgICBydW5UcmVlLmV4dHJhID0geyAuLi5ydW5UcmVlLmV4dHJhLCBbTENfQ0hJTERfS0VZXTogY29uZmlnIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXZpb3VzVmFsdWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgcHJldmlvdXNWYWx1ZVtfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAocnVuVHJlZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcnVuVHJlZSA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuVHJlZVtfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXSA9XG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZVtfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RvcmFnZS5ydW4ocnVuVHJlZSwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBpbml0aWFsaXplR2xvYmFsSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgICAgICAgaWYgKGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UoKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gPSBuZXcgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlcigpO1xuZXhwb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9O1xuIl0sIm5hbWVzIjpbIlJ1blRyZWUiLCJnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlIiwic2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSIsIl9DT05URVhUX1ZBUklBQkxFU19LRVkiLCJDYWxsYmFja01hbmFnZXIiLCJNb2NrQXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRTdG9yZSIsInVuZGVmaW5lZCIsInJ1biIsIl9zdG9yZSIsImNhbGxiYWNrIiwiZW50ZXJXaXRoIiwibW9ja0FzeW5jTG9jYWxTdG9yYWdlIiwiTENfQ0hJTERfS0VZIiwiU3ltYm9sIiwiZm9yIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlciIsImdldEluc3RhbmNlIiwiZ2V0UnVubmFibGVDb25maWciLCJzdG9yYWdlIiwiZXh0cmEiLCJydW5XaXRoQ29uZmlnIiwiY29uZmlnIiwiYXZvaWRDcmVhdGluZ1Jvb3RSdW5UcmVlIiwiY2FsbGJhY2tNYW5hZ2VyIiwiX2NvbmZpZ3VyZVN5bmMiLCJjYWxsYmFja3MiLCJ0YWdzIiwibWV0YWRhdGEiLCJwcmV2aW91c1ZhbHVlIiwicGFyZW50UnVuSWQiLCJnZXRQYXJlbnRSdW5JZCIsImxhbmdDaGFpblRyYWNlciIsImhhbmRsZXJzIiwiZmluZCIsImhhbmRsZXIiLCJuYW1lIiwicnVuVHJlZSIsImdldFJ1blRyZWVXaXRoVHJhY2luZ0NvbmZpZyIsInRyYWNpbmdFbmFibGVkIiwiaW5pdGlhbGl6ZUdsb2JhbEluc3RhbmNlIiwiaW5zdGFuY2UiLCJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/callbacks.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/callbacks.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* binding */ awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* binding */ consumeCallback),\n/* harmony export */   getQueue: () => (/* binding */ getQueue)\n/* harmony export */ });\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n/* harmony import */ var _async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_local_storage/globals.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n/* harmony import */ var _tracer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tracer.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/tracer.js\");\n/* eslint-disable @typescript-eslint/no-explicit-any */ \n\n\nlet queue;\n/**\n * Creates a queue using the p-queue library. The queue is configured to\n * auto-start and has a concurrency of 1, meaning it will process tasks\n * one at a time.\n */ function createQueue() {\n    const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_0__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_0__;\n    return new PQueue({\n        autoStart: true,\n        concurrency: 1\n    });\n}\nfunction getQueue() {\n    if (typeof queue === \"undefined\") {\n        queue = createQueue();\n    }\n    return queue;\n}\n/**\n * Consume a promise, either adding it to the queue or waiting for it to resolve\n * @param promiseFn Promise to consume\n * @param wait Whether to wait for the promise to resolve or resolve immediately\n */ async function consumeCallback(promiseFn, wait) {\n    if (wait === true) {\n        // Clear config since callbacks are not part of the root run\n        // Avoid using global singleton due to circuluar dependency issues\n        const asyncLocalStorageInstance = (0,_async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)();\n        if (asyncLocalStorageInstance !== undefined) {\n            await asyncLocalStorageInstance.run(undefined, async ()=>promiseFn());\n        } else {\n            await promiseFn();\n        }\n    } else {\n        queue = getQueue();\n        void queue.add(async ()=>{\n            const asyncLocalStorageInstance = (0,_async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)();\n            if (asyncLocalStorageInstance !== undefined) {\n                await asyncLocalStorageInstance.run(undefined, async ()=>promiseFn());\n            } else {\n                await promiseFn();\n            }\n        });\n    }\n}\n/**\n * Waits for all promises in the queue to resolve. If the queue is\n * undefined, it immediately resolves a promise.\n */ async function awaitAllCallbacks() {\n    const defaultClient = (0,_tracer_js__WEBPACK_IMPORTED_MODULE_2__.getDefaultLangChainClientSingleton)();\n    await Promise.allSettled([\n        typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve(),\n        defaultClient.awaitPendingTraceBatches()\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9jYWxsYmFja3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEscURBQXFELEdBQ3JCO0FBQ3NEO0FBQ3JCO0FBQ2pFLElBQUlHO0FBQ0o7Ozs7Q0FJQyxHQUNELFNBQVNDO0lBQ0wsTUFBTUMsU0FBUyxLQUFzQkwsR0FBR0EsK0NBQWlCLEdBQUdBLG9DQUFTQTtJQUNyRSxPQUFPLElBQUlLLE9BQU87UUFDZEUsV0FBVztRQUNYQyxhQUFhO0lBQ2pCO0FBQ0o7QUFDTyxTQUFTQztJQUNaLElBQUksT0FBT04sVUFBVSxhQUFhO1FBQzlCQSxRQUFRQztJQUNaO0lBQ0EsT0FBT0Q7QUFDWDtBQUNBOzs7O0NBSUMsR0FDTSxlQUFlTyxnQkFBZ0JDLFNBQVMsRUFBRUMsSUFBSTtJQUNqRCxJQUFJQSxTQUFTLE1BQU07UUFDZiw0REFBNEQ7UUFDNUQsa0VBQWtFO1FBQ2xFLE1BQU1DLDRCQUE0QlosbUdBQWtDQTtRQUNwRSxJQUFJWSw4QkFBOEJDLFdBQVc7WUFDekMsTUFBTUQsMEJBQTBCRSxHQUFHLENBQUNELFdBQVcsVUFBWUg7UUFDL0QsT0FDSztZQUNELE1BQU1BO1FBQ1Y7SUFDSixPQUNLO1FBQ0RSLFFBQVFNO1FBQ1IsS0FBS04sTUFBTWEsR0FBRyxDQUFDO1lBQ1gsTUFBTUgsNEJBQTRCWixtR0FBa0NBO1lBQ3BFLElBQUlZLDhCQUE4QkMsV0FBVztnQkFDekMsTUFBTUQsMEJBQTBCRSxHQUFHLENBQUNELFdBQVcsVUFBWUg7WUFDL0QsT0FDSztnQkFDRCxNQUFNQTtZQUNWO1FBQ0o7SUFDSjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sZUFBZU07SUFDbEIsTUFBTUMsZ0JBQWdCaEIsOEVBQWtDQTtJQUN4RCxNQUFNaUIsUUFBUUMsVUFBVSxDQUFDO1FBQ3JCLE9BQU9qQixVQUFVLGNBQWNBLE1BQU1rQixNQUFNLEtBQUtGLFFBQVFHLE9BQU87UUFDL0RKLGNBQWNLLHdCQUF3QjtLQUN6QztBQUNMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zaW5nbGV0b25zL2NhbGxiYWNrcy5qcz83YTY4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbmltcG9ydCBQUXVldWVNb2QgZnJvbSBcInAtcXVldWVcIjtcbmltcG9ydCB7IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgfSBmcm9tIFwiLi9hc3luY19sb2NhbF9zdG9yYWdlL2dsb2JhbHMuanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRMYW5nQ2hhaW5DbGllbnRTaW5nbGV0b24gfSBmcm9tIFwiLi90cmFjZXIuanNcIjtcbmxldCBxdWV1ZTtcbi8qKlxuICogQ3JlYXRlcyBhIHF1ZXVlIHVzaW5nIHRoZSBwLXF1ZXVlIGxpYnJhcnkuIFRoZSBxdWV1ZSBpcyBjb25maWd1cmVkIHRvXG4gKiBhdXRvLXN0YXJ0IGFuZCBoYXMgYSBjb25jdXJyZW5jeSBvZiAxLCBtZWFuaW5nIGl0IHdpbGwgcHJvY2VzcyB0YXNrc1xuICogb25lIGF0IGEgdGltZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUXVldWUoKSB7XG4gICAgY29uc3QgUFF1ZXVlID0gXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kID8gUFF1ZXVlTW9kLmRlZmF1bHQgOiBQUXVldWVNb2Q7XG4gICAgcmV0dXJuIG5ldyBQUXVldWUoe1xuICAgICAgICBhdXRvU3RhcnQ6IHRydWUsXG4gICAgICAgIGNvbmN1cnJlbmN5OiAxLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFF1ZXVlKCkge1xuICAgIGlmICh0eXBlb2YgcXVldWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcXVldWUgPSBjcmVhdGVRdWV1ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gcXVldWU7XG59XG4vKipcbiAqIENvbnN1bWUgYSBwcm9taXNlLCBlaXRoZXIgYWRkaW5nIGl0IHRvIHRoZSBxdWV1ZSBvciB3YWl0aW5nIGZvciBpdCB0byByZXNvbHZlXG4gKiBAcGFyYW0gcHJvbWlzZUZuIFByb21pc2UgdG8gY29uc3VtZVxuICogQHBhcmFtIHdhaXQgV2hldGhlciB0byB3YWl0IGZvciB0aGUgcHJvbWlzZSB0byByZXNvbHZlIG9yIHJlc29sdmUgaW1tZWRpYXRlbHlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbnN1bWVDYWxsYmFjayhwcm9taXNlRm4sIHdhaXQpIHtcbiAgICBpZiAod2FpdCA9PT0gdHJ1ZSkge1xuICAgICAgICAvLyBDbGVhciBjb25maWcgc2luY2UgY2FsbGJhY2tzIGFyZSBub3QgcGFydCBvZiB0aGUgcm9vdCBydW5cbiAgICAgICAgLy8gQXZvaWQgdXNpbmcgZ2xvYmFsIHNpbmdsZXRvbiBkdWUgdG8gY2lyY3VsdWFyIGRlcGVuZGVuY3kgaXNzdWVzXG4gICAgICAgIGNvbnN0IGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgPSBnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlKCk7XG4gICAgICAgIGlmIChhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UucnVuKHVuZGVmaW5lZCwgYXN5bmMgKCkgPT4gcHJvbWlzZUZuKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgcHJvbWlzZUZuKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHF1ZXVlID0gZ2V0UXVldWUoKTtcbiAgICAgICAgdm9pZCBxdWV1ZS5hZGQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSA9IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UoKTtcbiAgICAgICAgICAgIGlmIChhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlLnJ1bih1bmRlZmluZWQsIGFzeW5jICgpID0+IHByb21pc2VGbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHByb21pc2VGbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIFdhaXRzIGZvciBhbGwgcHJvbWlzZXMgaW4gdGhlIHF1ZXVlIHRvIHJlc29sdmUuIElmIHRoZSBxdWV1ZSBpc1xuICogdW5kZWZpbmVkLCBpdCBpbW1lZGlhdGVseSByZXNvbHZlcyBhIHByb21pc2UuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhd2FpdEFsbENhbGxiYWNrcygpIHtcbiAgICBjb25zdCBkZWZhdWx0Q2xpZW50ID0gZ2V0RGVmYXVsdExhbmdDaGFpbkNsaWVudFNpbmdsZXRvbigpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbXG4gICAgICAgIHR5cGVvZiBxdWV1ZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHF1ZXVlLm9uSWRsZSgpIDogUHJvbWlzZS5yZXNvbHZlKCksXG4gICAgICAgIGRlZmF1bHRDbGllbnQuYXdhaXRQZW5kaW5nVHJhY2VCYXRjaGVzKCksXG4gICAgXSk7XG59XG4iXSwibmFtZXMiOlsiUFF1ZXVlTW9kIiwiZ2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSIsImdldERlZmF1bHRMYW5nQ2hhaW5DbGllbnRTaW5nbGV0b24iLCJxdWV1ZSIsImNyZWF0ZVF1ZXVlIiwiUFF1ZXVlIiwiZGVmYXVsdCIsImF1dG9TdGFydCIsImNvbmN1cnJlbmN5IiwiZ2V0UXVldWUiLCJjb25zdW1lQ2FsbGJhY2siLCJwcm9taXNlRm4iLCJ3YWl0IiwiYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSIsInVuZGVmaW5lZCIsInJ1biIsImFkZCIsImF3YWl0QWxsQ2FsbGJhY2tzIiwiZGVmYXVsdENsaWVudCIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwib25JZGxlIiwicmVzb2x2ZSIsImF3YWl0UGVuZGluZ1RyYWNlQmF0Y2hlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/callbacks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* reexport safe */ _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* reexport safe */ _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_0__.MockAsyncLocalStorage),\n/* harmony export */   _CONTEXT_VARIABLES_KEY: () => (/* reexport safe */ _async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY)\n/* harmony export */ });\n/* harmony import */ var _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./async_local_storage/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\");\n/* harmony import */ var _async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_local_storage/globals.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE0RztBQUNsQztBQUNKO0FBQ3BDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zaW5nbGV0b25zL2luZGV4LmpzPzY0ZDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiwgTW9ja0FzeW5jTG9jYWxTdG9yYWdlLCB9IGZyb20gXCIuL2FzeW5jX2xvY2FsX3N0b3JhZ2UvaW5kZXguanNcIjtcbmltcG9ydCB7IF9DT05URVhUX1ZBUklBQkxFU19LRVkgfSBmcm9tIFwiLi9hc3luY19sb2NhbF9zdG9yYWdlL2dsb2JhbHMuanNcIjtcbmV4cG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24sIE1vY2tBc3luY0xvY2FsU3RvcmFnZSwgfTtcbmV4cG9ydCB7IF9DT05URVhUX1ZBUklBQkxFU19LRVkgfTtcbiJdLCJuYW1lcyI6WyJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIiwiTW9ja0FzeW5jTG9jYWxTdG9yYWdlIiwiX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/tracer.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/tracer.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDefaultLangChainClientSingleton: () => (/* binding */ getDefaultLangChainClientSingleton),\n/* harmony export */   setDefaultLangChainClientSingleton: () => (/* binding */ setDefaultLangChainClientSingleton)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n\nlet client;\nconst getDefaultLangChainClientSingleton = ()=>{\n    if (client === undefined) {\n        const clientParams = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") === \"false\" ? {\n            // LangSmith has its own backgrounding system\n            blockOnRootRunFinalization: true\n        } : {};\n        client = new langsmith__WEBPACK_IMPORTED_MODULE_0__.Client(clientParams);\n    }\n    return client;\n};\nconst setDefaultLangChainClientSingleton = (newClient)=>{\n    client = newClient;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy90cmFjZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtQztBQUNzQjtBQUN6RCxJQUFJRTtBQUNHLE1BQU1DLHFDQUFxQztJQUM5QyxJQUFJRCxXQUFXRSxXQUFXO1FBQ3RCLE1BQU1DLGVBQWVKLHFFQUFzQkEsQ0FBQyxzQ0FBc0MsVUFDNUU7WUFDRSw2Q0FBNkM7WUFDN0NLLDRCQUE0QjtRQUNoQyxJQUNFLENBQUM7UUFDUEosU0FBUyxJQUFJRiw2Q0FBTUEsQ0FBQ0s7SUFDeEI7SUFDQSxPQUFPSDtBQUNYLEVBQUU7QUFDSyxNQUFNSyxxQ0FBcUMsQ0FBQ0M7SUFDL0NOLFNBQVNNO0FBQ2IsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy90cmFjZXIuanM/NDFjMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwibGFuZ3NtaXRoXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xubGV0IGNsaWVudDtcbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0TGFuZ0NoYWluQ2xpZW50U2luZ2xldG9uID0gKCkgPT4ge1xuICAgIGlmIChjbGllbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBjbGllbnRQYXJhbXMgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0NBTExCQUNLU19CQUNLR1JPVU5EXCIpID09PSBcImZhbHNlXCJcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIC8vIExhbmdTbWl0aCBoYXMgaXRzIG93biBiYWNrZ3JvdW5kaW5nIHN5c3RlbVxuICAgICAgICAgICAgICAgIGJsb2NrT25Sb290UnVuRmluYWxpemF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7fTtcbiAgICAgICAgY2xpZW50ID0gbmV3IENsaWVudChjbGllbnRQYXJhbXMpO1xuICAgIH1cbiAgICByZXR1cm4gY2xpZW50O1xufTtcbmV4cG9ydCBjb25zdCBzZXREZWZhdWx0TGFuZ0NoYWluQ2xpZW50U2luZ2xldG9uID0gKG5ld0NsaWVudCkgPT4ge1xuICAgIGNsaWVudCA9IG5ld0NsaWVudDtcbn07XG4iXSwibmFtZXMiOlsiQ2xpZW50IiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsImNsaWVudCIsImdldERlZmF1bHRMYW5nQ2hhaW5DbGllbnRTaW5nbGV0b24iLCJ1bmRlZmluZWQiLCJjbGllbnRQYXJhbXMiLCJibG9ja09uUm9vdFJ1bkZpbmFsaXphdGlvbiIsInNldERlZmF1bHRMYW5nQ2hhaW5DbGllbnRTaW5nbGV0b24iLCJuZXdDbGllbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/tracer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tools/types.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tools/types.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isLangChainTool: () => (/* binding */ isLangChainTool),\n/* harmony export */   isRunnableToolLike: () => (/* binding */ isRunnableToolLike),\n/* harmony export */   isStructuredTool: () => (/* binding */ isStructuredTool),\n/* harmony export */   isStructuredToolParams: () => (/* binding */ isStructuredToolParams)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _utils_types_zod_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/types/zod.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n\n\n/**\n * Confirm whether the inputted tool is an instance of `StructuredToolInterface`.\n *\n * @param {StructuredToolInterface | JSONSchema | undefined} tool The tool to check if it is an instance of `StructuredToolInterface`.\n * @returns {tool is StructuredToolInterface} Whether the inputted tool is an instance of `StructuredToolInterface`.\n */ function isStructuredTool(tool) {\n    return tool !== undefined && Array.isArray(tool.lc_namespace);\n}\n/**\n * Confirm whether the inputted tool is an instance of `RunnableToolLike`.\n *\n * @param {unknown | undefined} tool The tool to check if it is an instance of `RunnableToolLike`.\n * @returns {tool is RunnableToolLike} Whether the inputted tool is an instance of `RunnableToolLike`.\n */ function isRunnableToolLike(tool) {\n    return tool !== undefined && _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable.isRunnable(tool) && \"lc_name\" in tool.constructor && typeof tool.constructor.lc_name === \"function\" && tool.constructor.lc_name() === \"RunnableToolLike\";\n}\n/**\n * Confirm whether or not the tool contains the necessary properties to be considered a `StructuredToolParams`.\n *\n * @param {unknown | undefined} tool The object to check if it is a `StructuredToolParams`.\n * @returns {tool is StructuredToolParams} Whether the inputted object is a `StructuredToolParams`.\n */ function isStructuredToolParams(tool) {\n    return !!tool && typeof tool === \"object\" && \"name\" in tool && \"schema\" in tool && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ((0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_1__.isInteropZodSchema)(tool.schema) || tool.schema != null && typeof tool.schema === \"object\" && \"type\" in tool.schema && typeof tool.schema.type === \"string\" && [\n        \"null\",\n        \"boolean\",\n        \"object\",\n        \"array\",\n        \"number\",\n        \"string\"\n    ].includes(tool.schema.type));\n}\n/**\n * Whether or not the tool is one of StructuredTool, RunnableTool or StructuredToolParams.\n * It returns `is StructuredToolParams` since that is the most minimal interface of the three,\n * while still containing the necessary properties to be passed to a LLM for tool calling.\n *\n * @param {unknown | undefined} tool The tool to check if it is a LangChain tool.\n * @returns {tool is StructuredToolParams} Whether the inputted tool is a LangChain tool.\n */ function isLangChainTool(tool) {\n    return isStructuredToolParams(tool) || isRunnableToolLike(tool) || // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isStructuredTool(tool);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdG9vbHMvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWlEO0FBQ1c7QUFDNUQ7Ozs7O0NBS0MsR0FDTSxTQUFTRSxpQkFBaUJDLElBQUk7SUFDakMsT0FBUUEsU0FBU0MsYUFDYkMsTUFBTUMsT0FBTyxDQUFDSCxLQUFLSSxZQUFZO0FBQ3ZDO0FBQ0E7Ozs7O0NBS0MsR0FDTSxTQUFTQyxtQkFBbUJMLElBQUk7SUFDbkMsT0FBUUEsU0FBU0MsYUFDYkosd0RBQVFBLENBQUNTLFVBQVUsQ0FBQ04sU0FDcEIsYUFBYUEsS0FBS08sV0FBVyxJQUM3QixPQUFPUCxLQUFLTyxXQUFXLENBQUNDLE9BQU8sS0FBSyxjQUNwQ1IsS0FBS08sV0FBVyxDQUFDQyxPQUFPLE9BQU87QUFDdkM7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNDLHVCQUF1QlQsSUFBSTtJQUN2QyxPQUFRLENBQUMsQ0FBQ0EsUUFDTixPQUFPQSxTQUFTLFlBQ2hCLFVBQVVBLFFBQ1YsWUFBWUEsUUFDWiw4REFBOEQ7SUFDN0RGLENBQUFBLHVFQUFrQkEsQ0FBQ0UsS0FBS1UsTUFBTSxLQUMxQlYsS0FBS1UsTUFBTSxJQUFJLFFBQ1osT0FBT1YsS0FBS1UsTUFBTSxLQUFLLFlBQ3ZCLFVBQVVWLEtBQUtVLE1BQU0sSUFDckIsT0FBT1YsS0FBS1UsTUFBTSxDQUFDQyxJQUFJLEtBQUssWUFDNUI7UUFBQztRQUFRO1FBQVc7UUFBVTtRQUFTO1FBQVU7S0FBUyxDQUFDQyxRQUFRLENBQUNaLEtBQUtVLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDO0FBQ3JHO0FBQ0E7Ozs7Ozs7Q0FPQyxHQUNNLFNBQVNFLGdCQUFnQmIsSUFBSTtJQUNoQyxPQUFRUyx1QkFBdUJULFNBQzNCSyxtQkFBbUJMLFNBQ25CLDhEQUE4RDtJQUM5REQsaUJBQWlCQztBQUN6QiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdG9vbHMvdHlwZXMuanM/ZTU0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSwgfSBmcm9tIFwiLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGlzSW50ZXJvcFpvZFNjaGVtYSwgfSBmcm9tIFwiLi4vdXRpbHMvdHlwZXMvem9kLmpzXCI7XG4vKipcbiAqIENvbmZpcm0gd2hldGhlciB0aGUgaW5wdXR0ZWQgdG9vbCBpcyBhbiBpbnN0YW5jZSBvZiBgU3RydWN0dXJlZFRvb2xJbnRlcmZhY2VgLlxuICpcbiAqIEBwYXJhbSB7U3RydWN0dXJlZFRvb2xJbnRlcmZhY2UgfCBKU09OU2NoZW1hIHwgdW5kZWZpbmVkfSB0b29sIFRoZSB0b29sIHRvIGNoZWNrIGlmIGl0IGlzIGFuIGluc3RhbmNlIG9mIGBTdHJ1Y3R1cmVkVG9vbEludGVyZmFjZWAuXG4gKiBAcmV0dXJucyB7dG9vbCBpcyBTdHJ1Y3R1cmVkVG9vbEludGVyZmFjZX0gV2hldGhlciB0aGUgaW5wdXR0ZWQgdG9vbCBpcyBhbiBpbnN0YW5jZSBvZiBgU3RydWN0dXJlZFRvb2xJbnRlcmZhY2VgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJ1Y3R1cmVkVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuICh0b29sICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheSh0b29sLmxjX25hbWVzcGFjZSkpO1xufVxuLyoqXG4gKiBDb25maXJtIHdoZXRoZXIgdGhlIGlucHV0dGVkIHRvb2wgaXMgYW4gaW5zdGFuY2Ugb2YgYFJ1bm5hYmxlVG9vbExpa2VgLlxuICpcbiAqIEBwYXJhbSB7dW5rbm93biB8IHVuZGVmaW5lZH0gdG9vbCBUaGUgdG9vbCB0byBjaGVjayBpZiBpdCBpcyBhbiBpbnN0YW5jZSBvZiBgUnVubmFibGVUb29sTGlrZWAuXG4gKiBAcmV0dXJucyB7dG9vbCBpcyBSdW5uYWJsZVRvb2xMaWtlfSBXaGV0aGVyIHRoZSBpbnB1dHRlZCB0b29sIGlzIGFuIGluc3RhbmNlIG9mIGBSdW5uYWJsZVRvb2xMaWtlYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUnVubmFibGVUb29sTGlrZSh0b29sKSB7XG4gICAgcmV0dXJuICh0b29sICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgUnVubmFibGUuaXNSdW5uYWJsZSh0b29sKSAmJlxuICAgICAgICBcImxjX25hbWVcIiBpbiB0b29sLmNvbnN0cnVjdG9yICYmXG4gICAgICAgIHR5cGVvZiB0b29sLmNvbnN0cnVjdG9yLmxjX25hbWUgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICB0b29sLmNvbnN0cnVjdG9yLmxjX25hbWUoKSA9PT0gXCJSdW5uYWJsZVRvb2xMaWtlXCIpO1xufVxuLyoqXG4gKiBDb25maXJtIHdoZXRoZXIgb3Igbm90IHRoZSB0b29sIGNvbnRhaW5zIHRoZSBuZWNlc3NhcnkgcHJvcGVydGllcyB0byBiZSBjb25zaWRlcmVkIGEgYFN0cnVjdHVyZWRUb29sUGFyYW1zYC5cbiAqXG4gKiBAcGFyYW0ge3Vua25vd24gfCB1bmRlZmluZWR9IHRvb2wgVGhlIG9iamVjdCB0byBjaGVjayBpZiBpdCBpcyBhIGBTdHJ1Y3R1cmVkVG9vbFBhcmFtc2AuXG4gKiBAcmV0dXJucyB7dG9vbCBpcyBTdHJ1Y3R1cmVkVG9vbFBhcmFtc30gV2hldGhlciB0aGUgaW5wdXR0ZWQgb2JqZWN0IGlzIGEgYFN0cnVjdHVyZWRUb29sUGFyYW1zYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3RydWN0dXJlZFRvb2xQYXJhbXModG9vbCkge1xuICAgIHJldHVybiAoISF0b29sICYmXG4gICAgICAgIHR5cGVvZiB0b29sID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIFwibmFtZVwiIGluIHRvb2wgJiZcbiAgICAgICAgXCJzY2hlbWFcIiBpbiB0b29sICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIChpc0ludGVyb3Bab2RTY2hlbWEodG9vbC5zY2hlbWEpIHx8XG4gICAgICAgICAgICAodG9vbC5zY2hlbWEgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiB0b29sLnNjaGVtYSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIFwidHlwZVwiIGluIHRvb2wuc2NoZW1hICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRvb2wuc2NoZW1hLnR5cGUgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBbXCJudWxsXCIsIFwiYm9vbGVhblwiLCBcIm9iamVjdFwiLCBcImFycmF5XCIsIFwibnVtYmVyXCIsIFwic3RyaW5nXCJdLmluY2x1ZGVzKHRvb2wuc2NoZW1hLnR5cGUpKSkpO1xufVxuLyoqXG4gKiBXaGV0aGVyIG9yIG5vdCB0aGUgdG9vbCBpcyBvbmUgb2YgU3RydWN0dXJlZFRvb2wsIFJ1bm5hYmxlVG9vbCBvciBTdHJ1Y3R1cmVkVG9vbFBhcmFtcy5cbiAqIEl0IHJldHVybnMgYGlzIFN0cnVjdHVyZWRUb29sUGFyYW1zYCBzaW5jZSB0aGF0IGlzIHRoZSBtb3N0IG1pbmltYWwgaW50ZXJmYWNlIG9mIHRoZSB0aHJlZSxcbiAqIHdoaWxlIHN0aWxsIGNvbnRhaW5pbmcgdGhlIG5lY2Vzc2FyeSBwcm9wZXJ0aWVzIHRvIGJlIHBhc3NlZCB0byBhIExMTSBmb3IgdG9vbCBjYWxsaW5nLlxuICpcbiAqIEBwYXJhbSB7dW5rbm93biB8IHVuZGVmaW5lZH0gdG9vbCBUaGUgdG9vbCB0byBjaGVjayBpZiBpdCBpcyBhIExhbmdDaGFpbiB0b29sLlxuICogQHJldHVybnMge3Rvb2wgaXMgU3RydWN0dXJlZFRvb2xQYXJhbXN9IFdoZXRoZXIgdGhlIGlucHV0dGVkIHRvb2wgaXMgYSBMYW5nQ2hhaW4gdG9vbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTGFuZ0NoYWluVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIChpc1N0cnVjdHVyZWRUb29sUGFyYW1zKHRvb2wpIHx8XG4gICAgICAgIGlzUnVubmFibGVUb29sTGlrZSh0b29sKSB8fFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBpc1N0cnVjdHVyZWRUb29sKHRvb2wpKTtcbn1cbiJdLCJuYW1lcyI6WyJSdW5uYWJsZSIsImlzSW50ZXJvcFpvZFNjaGVtYSIsImlzU3RydWN0dXJlZFRvb2wiLCJ0b29sIiwidW5kZWZpbmVkIiwiQXJyYXkiLCJpc0FycmF5IiwibGNfbmFtZXNwYWNlIiwiaXNSdW5uYWJsZVRvb2xMaWtlIiwiaXNSdW5uYWJsZSIsImNvbnN0cnVjdG9yIiwibGNfbmFtZSIsImlzU3RydWN0dXJlZFRvb2xQYXJhbXMiLCJzY2hlbWEiLCJ0eXBlIiwiaW5jbHVkZXMiLCJpc0xhbmdDaGFpblRvb2wiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tools/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tools/utils.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tools/utils.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolInputParsingException: () => (/* binding */ ToolInputParsingException),\n/* harmony export */   _configHasToolCallId: () => (/* binding */ _configHasToolCallId),\n/* harmony export */   _isToolCall: () => (/* binding */ _isToolCall)\n/* harmony export */ });\nfunction _isToolCall(toolCall) {\n    return !!(toolCall && typeof toolCall === \"object\" && \"type\" in toolCall && toolCall.type === \"tool_call\");\n}\nfunction _configHasToolCallId(config) {\n    return !!(config && typeof config === \"object\" && \"toolCall\" in config && config.toolCall != null && typeof config.toolCall === \"object\" && \"id\" in config.toolCall && typeof config.toolCall.id === \"string\");\n}\n/**\n * Custom error class used to handle exceptions related to tool input parsing.\n * It extends the built-in `Error` class and adds an optional `output`\n * property that can hold the output that caused the exception.\n */ class ToolInputParsingException extends Error {\n    constructor(message, output){\n        super(message);\n        Object.defineProperty(this, \"output\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.output = output;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdG9vbHMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sU0FBU0EsWUFBWUMsUUFBUTtJQUNoQyxPQUFPLENBQUMsQ0FBRUEsQ0FBQUEsWUFDTixPQUFPQSxhQUFhLFlBQ3BCLFVBQVVBLFlBQ1ZBLFNBQVNDLElBQUksS0FBSyxXQUFVO0FBQ3BDO0FBQ08sU0FBU0MscUJBQXFCQyxNQUFNO0lBQ3ZDLE9BQU8sQ0FBQyxDQUFFQSxDQUFBQSxVQUNOLE9BQU9BLFdBQVcsWUFDbEIsY0FBY0EsVUFDZEEsT0FBT0gsUUFBUSxJQUFJLFFBQ25CLE9BQU9HLE9BQU9ILFFBQVEsS0FBSyxZQUMzQixRQUFRRyxPQUFPSCxRQUFRLElBQ3ZCLE9BQU9HLE9BQU9ILFFBQVEsQ0FBQ0ksRUFBRSxLQUFLLFFBQU87QUFDN0M7QUFDQTs7OztDQUlDLEdBQ00sTUFBTUMsa0NBQWtDQztJQUMzQ0MsWUFBWUMsT0FBTyxFQUFFQyxNQUFNLENBQUU7UUFDekIsS0FBSyxDQUFDRDtRQUNORSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ04sTUFBTSxHQUFHQTtJQUNsQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90b29scy91dGlscy5qcz9lOTQ5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBfaXNUb29sQ2FsbCh0b29sQ2FsbCkge1xuICAgIHJldHVybiAhISh0b29sQ2FsbCAmJlxuICAgICAgICB0eXBlb2YgdG9vbENhbGwgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgXCJ0eXBlXCIgaW4gdG9vbENhbGwgJiZcbiAgICAgICAgdG9vbENhbGwudHlwZSA9PT0gXCJ0b29sX2NhbGxcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gX2NvbmZpZ0hhc1Rvb2xDYWxsSWQoY29uZmlnKSB7XG4gICAgcmV0dXJuICEhKGNvbmZpZyAmJlxuICAgICAgICB0eXBlb2YgY29uZmlnID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIFwidG9vbENhbGxcIiBpbiBjb25maWcgJiZcbiAgICAgICAgY29uZmlnLnRvb2xDYWxsICE9IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIGNvbmZpZy50b29sQ2FsbCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBcImlkXCIgaW4gY29uZmlnLnRvb2xDYWxsICYmXG4gICAgICAgIHR5cGVvZiBjb25maWcudG9vbENhbGwuaWQgPT09IFwic3RyaW5nXCIpO1xufVxuLyoqXG4gKiBDdXN0b20gZXJyb3IgY2xhc3MgdXNlZCB0byBoYW5kbGUgZXhjZXB0aW9ucyByZWxhdGVkIHRvIHRvb2wgaW5wdXQgcGFyc2luZy5cbiAqIEl0IGV4dGVuZHMgdGhlIGJ1aWx0LWluIGBFcnJvcmAgY2xhc3MgYW5kIGFkZHMgYW4gb3B0aW9uYWwgYG91dHB1dGBcbiAqIHByb3BlcnR5IHRoYXQgY2FuIGhvbGQgdGhlIG91dHB1dCB0aGF0IGNhdXNlZCB0aGUgZXhjZXB0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBvdXRwdXQpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm91dHB1dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiX2lzVG9vbENhbGwiLCJ0b29sQ2FsbCIsInR5cGUiLCJfY29uZmlnSGFzVG9vbENhbGxJZCIsImNvbmZpZyIsImlkIiwiVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwib3V0cHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tools/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/base.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/base.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTracer: () => (/* binding */ BaseTracer),\n/* harmony export */   isBaseTracer: () => (/* binding */ isBaseTracer)\n/* harmony export */ });\n/* harmony import */ var langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith/run_trees */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/run_trees.js\");\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n\n\n// TODO: Remove and just use base LangSmith Run type\nconst convertRunTreeToRun = (runTree)=>{\n    if (!runTree) {\n        return undefined;\n    }\n    // Important that we return the raw run tree object since the reference\n    // is mutated in other places.\n    // TODO: Remove places where this is being done.\n    // eslint-disable-next-line no-param-reassign\n    runTree.events = runTree.events ?? [];\n    // eslint-disable-next-line no-param-reassign\n    runTree.child_runs = runTree.child_runs ?? [];\n    // TODO: Remove this cast and just use the LangSmith RunTree type.\n    return runTree;\n};\nfunction convertRunToRunTree(run, parentRun) {\n    if (!run) {\n        return undefined;\n    }\n    return new langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__.RunTree({\n        ...run,\n        start_time: run._serialized_start_time ?? run.start_time,\n        parent_run: convertRunToRunTree(parentRun),\n        child_runs: run.child_runs.map((r)=>convertRunToRunTree(r)).filter((r)=>r !== undefined),\n        extra: {\n            ...run.extra,\n            runtime: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_2__.getRuntimeEnvironmentSync)()\n        },\n        tracingEnabled: false\n    });\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\nfunction isBaseTracer(x) {\n    return typeof x._addRunToRunMap === \"function\";\n}\nclass BaseTracer extends _callbacks_base_js__WEBPACK_IMPORTED_MODULE_1__.BaseCallbackHandler {\n    constructor(_fields){\n        super(...arguments);\n        /** @deprecated Use `runTreeMap` instead. */ Object.defineProperty(this, \"runMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"runTreeMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"usesRunTreeMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    copy() {\n        return this;\n    }\n    getRunById(runId) {\n        if (runId === undefined) {\n            return undefined;\n        }\n        return this.usesRunTreeMap ? convertRunTreeToRun(this.runTreeMap.get(runId)) : this.runMap.get(runId);\n    }\n    stringifyError(error) {\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (error instanceof Error) {\n            return error.message + (error?.stack ? `\\n\\n${error.stack}` : \"\");\n        }\n        if (typeof error === \"string\") {\n            return error;\n        }\n        return `${error}`;\n    }\n    _addChildRun(parentRun, childRun) {\n        parentRun.child_runs.push(childRun);\n    }\n    _addRunToRunMap(run) {\n        const { dottedOrder: currentDottedOrder, microsecondPrecisionDatestring } = (0,langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__.convertToDottedOrderFormat)(new Date(run.start_time).getTime(), run.id, run.execution_order);\n        const storedRun = {\n            ...run\n        };\n        const parentRun = this.getRunById(storedRun.parent_run_id);\n        if (storedRun.parent_run_id !== undefined) {\n            if (parentRun) {\n                this._addChildRun(parentRun, storedRun);\n                parentRun.child_execution_order = Math.max(parentRun.child_execution_order, storedRun.child_execution_order);\n                storedRun.trace_id = parentRun.trace_id;\n                if (parentRun.dotted_order !== undefined) {\n                    storedRun.dotted_order = [\n                        parentRun.dotted_order,\n                        currentDottedOrder\n                    ].join(\".\");\n                    storedRun._serialized_start_time = microsecondPrecisionDatestring;\n                } else {\n                // This can happen naturally for callbacks added within a run\n                // console.debug(`Parent run with UUID ${storedRun.parent_run_id} has no dotted order.`);\n                }\n            } else {\n            // This can happen naturally for callbacks added within a run\n            // console.debug(\n            //   `Parent run with UUID ${storedRun.parent_run_id} not found.`\n            // );\n            }\n        } else {\n            storedRun.trace_id = storedRun.id;\n            storedRun.dotted_order = currentDottedOrder;\n            storedRun._serialized_start_time = microsecondPrecisionDatestring;\n        }\n        if (this.usesRunTreeMap) {\n            const runTree = convertRunToRunTree(storedRun, parentRun);\n            if (runTree !== undefined) {\n                this.runTreeMap.set(storedRun.id, runTree);\n            }\n        } else {\n            this.runMap.set(storedRun.id, storedRun);\n        }\n        return storedRun;\n    }\n    async _endTrace(run) {\n        const parentRun = run.parent_run_id !== undefined && this.getRunById(run.parent_run_id);\n        if (parentRun) {\n            parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run.child_execution_order);\n        } else {\n            await this.persistRun(run);\n        }\n        await this.onRunUpdate?.(run);\n        if (this.usesRunTreeMap) {\n            this.runTreeMap.delete(run.id);\n        } else {\n            this.runMap.delete(run.id);\n        }\n    }\n    _getExecutionOrder(parentRunId) {\n        const parentRun = parentRunId !== undefined && this.getRunById(parentRunId);\n        // If a run has no parent then execution order is 1\n        if (!parentRun) {\n            return 1;\n        }\n        return parentRun.child_execution_order + 1;\n    }\n    /**\n     * Create and add a run to the run map for LLM start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                prompts\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const run = this.getRunById(runId) ?? this._createRunForLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    /**\n     * Create and add a run to the run map for chat model start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                messages\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const run = this.getRunById(runId) ?? this._createRunForChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleLLMEnd(output, runId, _parentRunId, _tags, extraParams) {\n        const run = this.getRunById(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = output;\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        run.extra = {\n            ...run.extra,\n            ...extraParams\n        };\n        await this.onLLMEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleLLMError(error, runId, _parentRunId, _tags, extraParams) {\n        const run = this.getRunById(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        run.extra = {\n            ...run.extra,\n            ...extraParams\n        };\n        await this.onLLMError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    /**\n     * Create and add a run to the run map for chain start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? chain.id[chain.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: chain,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs,\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: runType ?? \"chain\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const run = this.getRunById(runId) ?? this._createRunForChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name);\n        await this.onRunCreate?.(run);\n        await this.onChainStart?.(run);\n        return run;\n    }\n    async handleChainEnd(outputs, runId, _parentRunId, _tags, kwargs) {\n        const run = this.getRunById(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = _coerceToDict(outputs, \"output\");\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainError(error, runId, _parentRunId, _tags, kwargs) {\n        const run = this.getRunById(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    /**\n     * Create and add a run to the run map for tool start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? tool.id[tool.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: tool,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                input\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"tool\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const run = this.getRunById(runId) ?? this._createRunForToolStart(tool, input, runId, parentRunId, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onToolStart?.(run);\n        return run;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async handleToolEnd(output, runId) {\n        const run = this.getRunById(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            output\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolError(error, runId) {\n        const run = this.getRunById(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleAgentAction(action, runId) {\n        const run = this.getRunById(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        const agentRun = run;\n        agentRun.actions = agentRun.actions || [];\n        agentRun.actions.push(action);\n        agentRun.events.push({\n            name: \"agent_action\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentAction?.(run);\n    }\n    async handleAgentEnd(action, runId) {\n        const run = this.getRunById(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"agent_end\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentEnd?.(run);\n    }\n    /**\n     * Create and add a run to the run map for retriever start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? retriever.id[retriever.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: retriever,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                query\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"retriever\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const run = this.getRunById(runId) ?? this._createRunForRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onRetrieverStart?.(run);\n        return run;\n    }\n    async handleRetrieverEnd(documents, runId) {\n        const run = this.getRunById(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            documents\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleRetrieverError(error, runId) {\n        const run = this.getRunById(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleText(text, runId) {\n        const run = this.getRunById(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"text\",\n            time: new Date().toISOString(),\n            kwargs: {\n                text\n            }\n        });\n        await this.onText?.(run);\n    }\n    async handleLLMNewToken(token, idx, runId, _parentRunId, _tags, fields) {\n        const run = this.getRunById(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(`Invalid \"runId\" provided to \"handleLLMNewToken\" callback.`);\n        }\n        run.events.push({\n            name: \"new_token\",\n            time: new Date().toISOString(),\n            kwargs: {\n                token,\n                idx,\n                chunk: fields?.chunk\n            }\n        });\n        await this.onLLMNewToken?.(run, token, {\n            chunk: fields?.chunk\n        });\n        return run;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTBFO0FBQ2Q7QUFDQTtBQUM1RCxvREFBb0Q7QUFDcEQsTUFBTUksc0JBQXNCLENBQUNDO0lBQ3pCLElBQUksQ0FBQ0EsU0FBUztRQUNWLE9BQU9DO0lBQ1g7SUFDQSx1RUFBdUU7SUFDdkUsOEJBQThCO0lBQzlCLGdEQUFnRDtJQUNoRCw2Q0FBNkM7SUFDN0NELFFBQVFFLE1BQU0sR0FBR0YsUUFBUUUsTUFBTSxJQUFJLEVBQUU7SUFDckMsNkNBQTZDO0lBQzdDRixRQUFRRyxVQUFVLEdBQUdILFFBQVFHLFVBQVUsSUFBSSxFQUFFO0lBQzdDLGtFQUFrRTtJQUNsRSxPQUFPSDtBQUNYO0FBQ0EsU0FBU0ksb0JBQW9CQyxHQUFHLEVBQUVDLFNBQVM7SUFDdkMsSUFBSSxDQUFDRCxLQUFLO1FBQ04sT0FBT0o7SUFDWDtJQUNBLE9BQU8sSUFBSU4sd0RBQU9BLENBQUM7UUFDZixHQUFHVSxHQUFHO1FBQ05FLFlBQVlGLElBQUlHLHNCQUFzQixJQUFJSCxJQUFJRSxVQUFVO1FBQ3hERSxZQUFZTCxvQkFBb0JFO1FBQ2hDSCxZQUFZRSxJQUFJRixVQUFVLENBQ3JCTyxHQUFHLENBQUMsQ0FBQ0MsSUFBTVAsb0JBQW9CTyxJQUMvQkMsTUFBTSxDQUFDLENBQUNELElBQU1BLE1BQU1WO1FBQ3pCWSxPQUFPO1lBQ0gsR0FBR1IsSUFBSVEsS0FBSztZQUNaQyxTQUFTaEIsd0VBQXlCQTtRQUN0QztRQUNBaUIsZ0JBQWdCO0lBQ3BCO0FBQ0o7QUFDQSw4REFBOEQ7QUFDOUQsU0FBU0MsY0FBY0MsS0FBSyxFQUFFQyxVQUFVO0lBQ3BDLE9BQU9ELFNBQVMsQ0FBQ0UsTUFBTUMsT0FBTyxDQUFDSCxVQUFVLE9BQU9BLFVBQVUsV0FDcERBLFFBQ0E7UUFBRSxDQUFDQyxXQUFXLEVBQUVEO0lBQU07QUFDaEM7QUFDTyxTQUFTSSxhQUFh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LE1BQU0sSUFBSSxDQUFDOEIsVUFBVSxDQUFDQztRQUM1QixJQUFJLENBQUMvQixPQUFPQSxLQUFLZ0YsYUFBYSxTQUFTO1lBQ25DO1FBQ0o7UUFDQWhGLElBQUlILE1BQU0sQ0FBQzhDLElBQUksQ0FBQztZQUNaNkIsTUFBTTtZQUNOSyxNQUFNLElBQUk5QixPQUFPK0IsV0FBVztZQUM1QndCLFFBQVE7Z0JBQUUrQjtZQUFLO1FBQ25CO1FBQ0EsTUFBTSxJQUFJLENBQUNDLE1BQU0sR0FBR3RJO0lBQ3hCO0lBQ0EsTUFBTXVJLGtCQUFrQkMsS0FBSyxFQUFFQyxHQUFHLEVBQUUxRyxLQUFLLEVBQUUwRCxZQUFZLEVBQUVDLEtBQUssRUFBRWdELE1BQU0sRUFBRTtRQUNwRSxNQUFNMUksTUFBTSxJQUFJLENBQUM4QixVQUFVLENBQUNDO1FBQzVCLElBQUksQ0FBQy9CLE9BQU9BLEtBQUtnRixhQUFhLE9BQU87WUFDakMsTUFBTSxJQUFJMUMsTUFBTSxDQUFDLHlEQUF5RCxDQUFDO1FBQy9FO1FBQ0F0QyxJQUFJSCxNQUFNLENBQUM4QyxJQUFJLENBQUM7WUFDWjZCLE1BQU07WUFDTkssTUFBTSxJQUFJOUIsT0FBTytCLFdBQVc7WUFDNUJ3QixRQUFRO2dCQUFFa0M7Z0JBQU9DO2dCQUFLRSxPQUFPRCxRQUFRQztZQUFNO1FBQy9DO1FBQ0EsTUFBTSxJQUFJLENBQUNDLGFBQWEsR0FBRzVJLEtBQUt3SSxPQUFPO1lBQUVHLE9BQU9ELFFBQVFDO1FBQU07UUFDOUQsT0FBTzNJO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9iYXNlLmpzPzFmZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUnVuVHJlZSwgY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQgfSBmcm9tIFwibGFuZ3NtaXRoL3J1bl90cmVlc1wiO1xuaW1wb3J0IHsgQmFzZUNhbGxiYWNrSGFuZGxlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGdldFJ1bnRpbWVFbnZpcm9ubWVudFN5bmMgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG4vLyBUT0RPOiBSZW1vdmUgYW5kIGp1c3QgdXNlIGJhc2UgTGFuZ1NtaXRoIFJ1biB0eXBlXG5jb25zdCBjb252ZXJ0UnVuVHJlZVRvUnVuID0gKHJ1blRyZWUpID0+IHtcbiAgICBpZiAoIXJ1blRyZWUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8gSW1wb3J0YW50IHRoYXQgd2UgcmV0dXJuIHRoZSByYXcgcnVuIHRyZWUgb2JqZWN0IHNpbmNlIHRoZSByZWZlcmVuY2VcbiAgICAvLyBpcyBtdXRhdGVkIGluIG90aGVyIHBsYWNlcy5cbiAgICAvLyBUT0RPOiBSZW1vdmUgcGxhY2VzIHdoZXJlIHRoaXMgaXMgYmVpbmcgZG9uZS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBydW5UcmVlLmV2ZW50cyA9IHJ1blRyZWUuZXZlbnRzID8/IFtdO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHJ1blRyZWUuY2hpbGRfcnVucyA9IHJ1blRyZWUuY2hpbGRfcnVucyA/PyBbXTtcbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBjYXN0IGFuZCBqdXN0IHVzZSB0aGUgTGFuZ1NtaXRoIFJ1blRyZWUgdHlwZS5cbiAgICByZXR1cm4gcnVuVHJlZTtcbn07XG5mdW5jdGlvbiBjb252ZXJ0UnVuVG9SdW5UcmVlKHJ1biwgcGFyZW50UnVuKSB7XG4gICAgaWYgKCFydW4pIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSdW5UcmVlKHtcbiAgICAgICAgLi4ucnVuLFxuICAgICAgICBzdGFydF90aW1lOiBydW4uX3NlcmlhbGl6ZWRfc3RhcnRfdGltZSA/PyBydW4uc3RhcnRfdGltZSxcbiAgICAgICAgcGFyZW50X3J1bjogY29udmVydFJ1blRvUnVuVHJlZShwYXJlbnRSdW4pLFxuICAgICAgICBjaGlsZF9ydW5zOiBydW4uY2hpbGRfcnVuc1xuICAgICAgICAgICAgLm1hcCgocikgPT4gY29udmVydFJ1blRvUnVuVHJlZShyKSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHIpID0+IHIgIT09IHVuZGVmaW5lZCksXG4gICAgICAgIGV4dHJhOiB7XG4gICAgICAgICAgICAuLi5ydW4uZXh0cmEsXG4gICAgICAgICAgICBydW50aW1lOiBnZXRSdW50aW1lRW52aXJvbm1lbnRTeW5jKCksXG4gICAgICAgIH0sXG4gICAgICAgIHRyYWNpbmdFbmFibGVkOiBmYWxzZSxcbiAgICB9KTtcbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5mdW5jdGlvbiBfY29lcmNlVG9EaWN0KHZhbHVlLCBkZWZhdWx0S2V5KSB7XG4gICAgcmV0dXJuIHZhbHVlICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgPyB2YWx1ZVxuICAgICAgICA6IHsgW2RlZmF1bHRLZXldOiB2YWx1ZSB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQmFzZVRyYWNlcih4KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB4Ll9hZGRSdW5Ub1J1bk1hcCA9PT0gXCJmdW5jdGlvblwiO1xufVxuZXhwb3J0IGNsYXNzIEJhc2VUcmFjZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihfZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKiBAZGVwcmVjYXRlZCBVc2UgYHJ1blRyZWVNYXBgIGluc3RlYWQuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bk1hcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5UcmVlTWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInVzZXNSdW5UcmVlTWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29weSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFJ1bkJ5SWQocnVuSWQpIHtcbiAgICAgICAgaWYgKHJ1bklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudXNlc1J1blRyZWVNYXBcbiAgICAgICAgICAgID8gY29udmVydFJ1blRyZWVUb1J1bih0aGlzLnJ1blRyZWVNYXAuZ2V0KHJ1bklkKSlcbiAgICAgICAgICAgIDogdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICB9XG4gICAgc3RyaW5naWZ5RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLm1lc3NhZ2UgKyAoZXJyb3I/LnN0YWNrID8gYFxcblxcbiR7ZXJyb3Iuc3RhY2t9YCA6IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7ZXJyb3J9YDtcbiAgICB9XG4gICAgX2FkZENoaWxkUnVuKHBhcmVudFJ1biwgY2hpbGRSdW4pIHtcbiAgICAgICAgcGFyZW50UnVuLmNoaWxkX3J1bnMucHVzaChjaGlsZFJ1bik7XG4gICAgfVxuICAgIF9hZGRSdW5Ub1J1bk1hcChydW4pIHtcbiAgICAgICAgY29uc3QgeyBkb3R0ZWRPcmRlcjogY3VycmVudERvdHRlZE9yZGVyLCBtaWNyb3NlY29uZFByZWNpc2lvbkRhdGVzdHJpbmcgfSA9IGNvbnZlcnRUb0RvdHRlZE9yZGVyRm9ybWF0KG5ldyBEYXRlKHJ1bi5zdGFydF90aW1lKS5nZXRUaW1lKCksIHJ1bi5pZCwgcnVuLmV4ZWN1dGlvbl9vcmRlcik7XG4gICAgICAgIGNvbnN0IHN0b3JlZFJ1biA9IHsgLi4ucnVuIH07XG4gICAgICAgIGNvbnN0IHBhcmVudFJ1biA9IHRoaXMuZ2V0UnVuQnlJZChzdG9yZWRSdW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgIGlmIChzdG9yZWRSdW4ucGFyZW50X3J1bl9pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBzdG9yZWRSdW4pO1xuICAgICAgICAgICAgICAgIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgPSBNYXRoLm1heChwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLCBzdG9yZWRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyKTtcbiAgICAgICAgICAgICAgICBzdG9yZWRSdW4udHJhY2VfaWQgPSBwYXJlbnRSdW4udHJhY2VfaWQ7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFJ1bi5kb3R0ZWRfb3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZWRSdW4uZG90dGVkX29yZGVyID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UnVuLmRvdHRlZF9vcmRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREb3R0ZWRPcmRlcixcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVkUnVuLl9zZXJpYWxpemVkX3N0YXJ0X3RpbWUgPSBtaWNyb3NlY29uZFByZWNpc2lvbkRhdGVzdHJpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gbmF0dXJhbGx5IGZvciBjYWxsYmFja3MgYWRkZWQgd2l0aGluIGEgcnVuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoYFBhcmVudCBydW4gd2l0aCBVVUlEICR7c3RvcmVkUnVuLnBhcmVudF9ydW5faWR9IGhhcyBubyBkb3R0ZWQgb3JkZXIuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIG5hdHVyYWxseSBmb3IgY2FsbGJhY2tzIGFkZGVkIHdpdGhpbiBhIHJ1blxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoXG4gICAgICAgICAgICAgICAgLy8gICBgUGFyZW50IHJ1biB3aXRoIFVVSUQgJHtzdG9yZWRSdW4ucGFyZW50X3J1bl9pZH0gbm90IGZvdW5kLmBcbiAgICAgICAgICAgICAgICAvLyApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RvcmVkUnVuLnRyYWNlX2lkID0gc3RvcmVkUnVuLmlkO1xuICAgICAgICAgICAgc3RvcmVkUnVuLmRvdHRlZF9vcmRlciA9IGN1cnJlbnREb3R0ZWRPcmRlcjtcbiAgICAgICAgICAgIHN0b3JlZFJ1bi5fc2VyaWFsaXplZF9zdGFydF90aW1lID0gbWljcm9zZWNvbmRQcmVjaXNpb25EYXRlc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnVzZXNSdW5UcmVlTWFwKSB7XG4gICAgICAgICAgICBjb25zdCBydW5UcmVlID0gY29udmVydFJ1blRvUnVuVHJlZShzdG9yZWRSdW4sIHBhcmVudFJ1bik7XG4gICAgICAgICAgICBpZiAocnVuVHJlZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ydW5UcmVlTWFwLnNldChzdG9yZWRSdW4uaWQsIHJ1blRyZWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5ydW5NYXAuc2V0KHN0b3JlZFJ1bi5pZCwgc3RvcmVkUnVuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RvcmVkUnVuO1xuICAgIH1cbiAgICBhc3luYyBfZW5kVHJhY2UocnVuKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFJ1biA9IHJ1bi5wYXJlbnRfcnVuX2lkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5nZXRSdW5CeUlkKHJ1bi5wYXJlbnRfcnVuX2lkKTtcbiAgICAgICAgaWYgKHBhcmVudFJ1bikge1xuICAgICAgICAgICAgcGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciA9IE1hdGgubWF4KHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsIHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0UnVuKHJ1bik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1blVwZGF0ZT8uKHJ1bik7XG4gICAgICAgIGlmICh0aGlzLnVzZXNSdW5UcmVlTWFwKSB7XG4gICAgICAgICAgICB0aGlzLnJ1blRyZWVNYXAuZGVsZXRlKHJ1bi5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJ1bk1hcC5kZWxldGUocnVuLmlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpIHtcbiAgICAgICAgY29uc3QgcGFyZW50UnVuID0gcGFyZW50UnVuSWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmdldFJ1bkJ5SWQocGFyZW50UnVuSWQpO1xuICAgICAgICAvLyBJZiBhIHJ1biBoYXMgbm8gcGFyZW50IHRoZW4gZXhlY3V0aW9uIG9yZGVyIGlzIDFcbiAgICAgICAgaWYgKCFwYXJlbnRSdW4pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyICsgMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuZCBhZGQgYSBydW4gdG8gdGhlIHJ1biBtYXAgZm9yIExMTSBzdGFydCBldmVudHMuXG4gICAgICogVGhpcyBtdXN0IHNvbWV0aW1lcyBiZSBkb25lIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICogd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZCwgc28gd2UgZXhwb3NlIGl0IGFzIGEgc2VwYXJhdGUgbWV0aG9kIGhlcmUuXG4gICAgICovXG4gICAgX2NyZWF0ZVJ1bkZvckxMTVN0YXJ0KGxsbSwgcHJvbXB0cywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZmluYWxFeHRyYVBhcmFtcyA9IG1ldGFkYXRhXG4gICAgICAgICAgICA/IHsgLi4uZXh0cmFQYXJhbXMsIG1ldGFkYXRhIH1cbiAgICAgICAgICAgIDogZXh0cmFQYXJhbXM7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gbGxtLmlkW2xsbS5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IGxsbSxcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IHByb21wdHMgfSxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogXCJsbG1cIixcbiAgICAgICAgICAgIGV4dHJhOiBmaW5hbEV4dHJhUGFyYW1zID8/IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZFJ1blRvUnVuTWFwKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTVN0YXJ0KGxsbSwgcHJvbXB0cywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKSA/P1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlUnVuRm9yTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5kIGFkZCBhIHJ1biB0byB0aGUgcnVuIG1hcCBmb3IgY2hhdCBtb2RlbCBzdGFydCBldmVudHMuXG4gICAgICogVGhpcyBtdXN0IHNvbWV0aW1lcyBiZSBkb25lIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICogd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZCwgc28gd2UgZXhwb3NlIGl0IGFzIGEgc2VwYXJhdGUgbWV0aG9kIGhlcmUuXG4gICAgICovXG4gICAgX2NyZWF0ZVJ1bkZvckNoYXRNb2RlbFN0YXJ0KGxsbSwgbWVzc2FnZXMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGZpbmFsRXh0cmFQYXJhbXMgPSBtZXRhZGF0YVxuICAgICAgICAgICAgPyB7IC4uLmV4dHJhUGFyYW1zLCBtZXRhZGF0YSB9XG4gICAgICAgICAgICA6IGV4dHJhUGFyYW1zO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IGxsbS5pZFtsbG0uaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBsbG0sXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0czogeyBtZXNzYWdlcyB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImxsbVwiLFxuICAgICAgICAgICAgZXh0cmE6IGZpbmFsRXh0cmFQYXJhbXMgPz8ge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkUnVuVG9SdW5NYXAocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKSA/P1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlUnVuRm9yQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUnVuQ3JlYXRlPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTVN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCwgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGV4dHJhUGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMuZ2V0UnVuQnlJZChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIExMTSBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IG91dHB1dDtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBydW4uZXh0cmEgPSB7IC4uLnJ1bi5leHRyYSwgLi4uZXh0cmFQYXJhbXMgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTUVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVycm9yKGVycm9yLCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywgZXh0cmFQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJsbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gTExNIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgcnVuLmV4dHJhID0geyAuLi5ydW4uZXh0cmEsIC4uLmV4dHJhUGFyYW1zIH07XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1FcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgYWRkIGEgcnVuIHRvIHRoZSBydW4gbWFwIGZvciBjaGFpbiBzdGFydCBldmVudHMuXG4gICAgICogVGhpcyBtdXN0IHNvbWV0aW1lcyBiZSBkb25lIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICogd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZCwgc28gd2UgZXhwb3NlIGl0IGFzIGEgc2VwYXJhdGUgbWV0aG9kIGhlcmUuXG4gICAgICovXG4gICAgX2NyZWF0ZVJ1bkZvckNoYWluU3RhcnQoY2hhaW4sIGlucHV0cywgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgcnVuVHlwZSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IGNoYWluLmlkW2NoYWluLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogY2hhaW4sXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0cyxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IHJ1blR5cGUgPz8gXCJjaGFpblwiLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBleHRyYTogbWV0YWRhdGEgPyB7IG1ldGFkYXRhIH0gOiB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRSdW5Ub1J1bk1hcChydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIHJ1blR5cGUsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKSA/P1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlUnVuRm9yQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBydW5UeXBlLCBuYW1lKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1bkNyZWF0ZT8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25DaGFpblN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FbmQob3V0cHV0cywgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1bikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hhaW4gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSBfY29lcmNlVG9EaWN0KG91dHB1dHMsIFwib3V0cHV0XCIpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChrd2FyZ3M/LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBydW4uaW5wdXRzID0gX2NvZXJjZVRvRGljdChrd2FyZ3MuaW5wdXRzLCBcImlucHV0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMub25DaGFpbkVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRXJyb3IoZXJyb3IsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNoYWluIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGt3YXJncz8uaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJ1bi5pbnB1dHMgPSBfY29lcmNlVG9EaWN0KGt3YXJncy5pbnB1dHMsIFwiaW5wdXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5vbkNoYWluRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5kIGFkZCBhIHJ1biB0byB0aGUgcnVuIG1hcCBmb3IgdG9vbCBzdGFydCBldmVudHMuXG4gICAgICogVGhpcyBtdXN0IHNvbWV0aW1lcyBiZSBkb25lIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICogd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZCwgc28gd2UgZXhwb3NlIGl0IGFzIGEgc2VwYXJhdGUgbWV0aG9kIGhlcmUuXG4gICAgICovXG4gICAgX2NyZWF0ZVJ1bkZvclRvb2xTdGFydCh0b29sLCBpbnB1dCwgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IHRvb2wuaWRbdG9vbC5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IHRvb2wsXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0czogeyBpbnB1dCB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogXCJ0b29sXCIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGV4dHJhOiBtZXRhZGF0YSA/IHsgbWV0YWRhdGEgfSA6IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZFJ1blRvUnVuTWFwKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xTdGFydCh0b29sLCBpbnB1dCwgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpID8/XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVSdW5Gb3JUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUnVuQ3JlYXRlPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xTdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVuZChvdXRwdXQsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMuZ2V0UnVuQnlJZChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSB7IG91dHB1dCB9O1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInRvb2xcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdG9vbCBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xFcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50QWN0aW9uKGFjdGlvbiwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWdlbnRSdW4gPSBydW47XG4gICAgICAgIGFnZW50UnVuLmFjdGlvbnMgPSBhZ2VudFJ1bi5hY3Rpb25zIHx8IFtdO1xuICAgICAgICBhZ2VudFJ1bi5hY3Rpb25zLnB1c2goYWN0aW9uKTtcbiAgICAgICAgYWdlbnRSdW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJhZ2VudF9hY3Rpb25cIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyBhY3Rpb24gfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25BZ2VudEFjdGlvbj8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50RW5kKGFjdGlvbiwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiYWdlbnRfZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBrd2FyZ3M6IHsgYWN0aW9uIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uQWdlbnRFbmQ/LihydW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5kIGFkZCBhIHJ1biB0byB0aGUgcnVuIG1hcCBmb3IgcmV0cmlldmVyIHN0YXJ0IGV2ZW50cy5cbiAgICAgKiBUaGlzIG11c3Qgc29tZXRpbWVzIGJlIGRvbmUgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgKiB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLCBzbyB3ZSBleHBvc2UgaXQgYXMgYSBzZXBhcmF0ZSBtZXRob2QgaGVyZS5cbiAgICAgKi9cbiAgICBfY3JlYXRlUnVuRm9yUmV0cmlldmVyU3RhcnQocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IHJldHJpZXZlci5pZFtyZXRyaWV2ZXIuaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiByZXRyaWV2ZXIsXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0czogeyBxdWVyeSB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogXCJyZXRyaWV2ZXJcIixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgZXh0cmE6IG1ldGFkYXRhID8geyBtZXRhZGF0YSB9IDoge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkUnVuVG9SdW5NYXAocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyU3RhcnQocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpID8/XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVSdW5Gb3JSZXRyaWV2ZXJTdGFydChyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1bkNyZWF0ZT8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25SZXRyaWV2ZXJTdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlckVuZChkb2N1bWVudHMsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMuZ2V0UnVuQnlJZChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwicmV0cmlldmVyXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJldHJpZXZlciBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0geyBkb2N1bWVudHMgfTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUmV0cmlldmVyRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMuZ2V0UnVuQnlJZChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwicmV0cmlldmVyXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJldHJpZXZlciBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJldHJpZXZlckVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVGV4dCh0ZXh0LCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBrd2FyZ3M6IHsgdGV4dCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRleHQ/LihydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1OZXdUb2tlbih0b2tlbiwgaWR4LCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywgZmllbGRzKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMuZ2V0UnVuQnlJZChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBcInJ1bklkXCIgcHJvdmlkZWQgdG8gXCJoYW5kbGVMTE1OZXdUb2tlblwiIGNhbGxiYWNrLmApO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcIm5ld190b2tlblwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAga3dhcmdzOiB7IHRva2VuLCBpZHgsIGNodW5rOiBmaWVsZHM/LmNodW5rIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNTmV3VG9rZW4/LihydW4sIHRva2VuLCB7IGNodW5rOiBmaWVsZHM/LmNodW5rIH0pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJSdW5UcmVlIiwiY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQiLCJCYXNlQ2FsbGJhY2tIYW5kbGVyIiwiZ2V0UnVudGltZUVudmlyb25tZW50U3luYyIsImNvbnZlcnRSdW5UcmVlVG9SdW4iLCJydW5UcmVlIiwidW5kZWZpbmVkIiwiZXZlbnRzIiwiY2hpbGRfcnVucyIsImNvbnZlcnRSdW5Ub1J1blRyZWUiLCJydW4iLCJwYXJlbnRSdW4iLCJzdGFydF90aW1lIiwiX3NlcmlhbGl6ZWRfc3RhcnRfdGltZSIsInBhcmVudF9ydW4iLCJtYXAiLCJyIiwiZmlsdGVyIiwiZXh0cmEiLCJydW50aW1lIiwidHJhY2luZ0VuYWJsZWQiLCJfY29lcmNlVG9EaWN0IiwidmFsdWUiLCJkZWZhdWx0S2V5IiwiQXJyYXkiLCJpc0FycmF5IiwiaXNCYXNlVHJhY2VyIiwieCIsIl9hZGRSdW5Ub1J1bk1hcCIsIkJhc2VUcmFjZXIiLCJjb25zdHJ1Y3RvciIsIl9maWVsZHMiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk1hcCIsImNvcHkiLCJnZXRSdW5CeUlkIiwicnVuSWQiLCJ1c2VzUnVuVHJlZU1hcCIsInJ1blRyZWVNYXAiLCJnZXQiLCJydW5NYXAiLCJzdHJpbmdpZnlFcnJvciIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJfYWRkQ2hpbGRSdW4iLCJjaGlsZFJ1biIsInB1c2giLCJkb3R0ZWRPcmRlciIsImN1cnJlbnREb3R0ZWRPcmRlciIsIm1pY3Jvc2Vjb25kUHJlY2lzaW9uRGF0ZXN0cmluZyIsIkRhdGUiLCJnZXRUaW1lIiwiaWQiLCJleGVjdXRpb25fb3JkZXIiLCJzdG9yZWRSdW4iLCJwYXJlbnRfcnVuX2lkIiwiY2hpbGRfZXhlY3V0aW9uX29yZGVyIiwiTWF0aCIsIm1heCIsInRyYWNlX2lkIiwiZG90dGVkX29yZGVyIiwiam9pbiIsInNldCIsIl9lbmRUcmFjZSIsInBlcnNpc3RSdW4iLCJvblJ1blVwZGF0ZSIsImRlbGV0ZSIsIl9nZXRFeGVjdXRpb25PcmRlciIsInBhcmVudFJ1bklkIiwiX2NyZWF0ZVJ1bkZvckxMTVN0YXJ0IiwibGxtIiwicHJvbXB0cyIsImV4dHJhUGFyYW1zIiwidGFncyIsIm1ldGFkYXRhIiwibmFtZSIsIm5vdyIsImZpbmFsRXh0cmFQYXJhbXMiLCJsZW5ndGgiLCJzZXJpYWxpemVkIiwidGltZSIsInRvSVNPU3RyaW5nIiwiaW5wdXRzIiwicnVuX3R5cGUiLCJoYW5kbGVMTE1TdGFydCIsIm9uUnVuQ3JlYXRlIiwib25MTE1TdGFydCIsIl9jcmVhdGVSdW5Gb3JDaGF0TW9kZWxTdGFydCIsIm1lc3NhZ2VzIiwiaGFuZGxlQ2hhdE1vZGVsU3RhcnQiLCJoYW5kbGVMTE1FbmQiLCJvdXRwdXQiLCJfcGFyZW50UnVuSWQiLCJfdGFncyIsImVuZF90aW1lIiwib3V0cHV0cyIsIm9uTExNRW5kIiwiaGFuZGxlTExNRXJyb3IiLCJvbkxMTUVycm9yIiwiX2NyZWF0ZVJ1bkZvckNoYWluU3RhcnQiLCJjaGFpbiIsInJ1blR5cGUiLCJoYW5kbGVDaGFpblN0YXJ0Iiwib25DaGFpblN0YXJ0IiwiaGFuZGxlQ2hhaW5FbmQiLCJrd2FyZ3MiLCJvbkNoYWluRW5kIiwiaGFuZGxlQ2hhaW5FcnJvciIsIm9uQ2hhaW5FcnJvciIsIl9jcmVhdGVSdW5Gb3JUb29sU3RhcnQiLCJ0b29sIiwiaW5wdXQiLCJoYW5kbGVUb29sU3RhcnQiLCJvblRvb2xTdGFydCIsImhhbmRsZVRvb2xFbmQiLCJvblRvb2xFbmQiLCJoYW5kbGVUb29sRXJyb3IiLCJvblRvb2xFcnJvciIsImhhbmRsZUFnZW50QWN0aW9uIiwiYWN0aW9uIiwiYWdlbnRSdW4iLCJhY3Rpb25zIiwib25BZ2VudEFjdGlvbiIsImhhbmRsZUFnZW50RW5kIiwib25BZ2VudEVuZCIsIl9jcmVhdGVSdW5Gb3JSZXRyaWV2ZXJTdGFydCIsInJldHJpZXZlciIsInF1ZXJ5IiwiaGFuZGxlUmV0cmlldmVyU3RhcnQiLCJvblJldHJpZXZlclN0YXJ0IiwiaGFuZGxlUmV0cmlldmVyRW5kIiwiZG9jdW1lbnRzIiwib25SZXRyaWV2ZXJFbmQiLCJoYW5kbGVSZXRyaWV2ZXJFcnJvciIsIm9uUmV0cmlldmVyRXJyb3IiLCJoYW5kbGVUZXh0IiwidGV4dCIsIm9uVGV4dCIsImhhbmRsZUxMTU5ld1Rva2VuIiwidG9rZW4iLCJpZHgiLCJmaWVsZHMiLCJjaHVuayIsIm9uTExNTmV3VG9rZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/console.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/console.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsoleCallbackHandler: () => (/* binding */ ConsoleCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var ansi_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ansi-styles */ \"(rsc)/./node_modules/ansi-styles/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\nfunction wrap(style, text) {\n    return `${style.open}${text}${style.close}`;\n}\nfunction tryJsonStringify(obj, fallback) {\n    try {\n        return JSON.stringify(obj, null, 2);\n    } catch (err) {\n        return fallback;\n    }\n}\nfunction formatKVMapItem(value) {\n    if (typeof value === \"string\") {\n        return value.trim();\n    }\n    if (value === null || value === undefined) {\n        return value;\n    }\n    return tryJsonStringify(value, value.toString());\n}\nfunction elapsed(run) {\n    if (!run.end_time) return \"\";\n    const elapsed = run.end_time - run.start_time;\n    if (elapsed < 1000) {\n        return `${elapsed}ms`;\n    }\n    return `${(elapsed / 1000).toFixed(2)}s`;\n}\nconst { color } = ansi_styles__WEBPACK_IMPORTED_MODULE_0__;\n/**\n * A tracer that logs all events to the console. It extends from the\n * `BaseTracer` class and overrides its methods to provide custom logging\n * functionality.\n * @example\n * ```typescript\n *\n * const llm = new ChatAnthropic({\n *   temperature: 0,\n *   tags: [\"example\", \"callbacks\", \"constructor\"],\n *   callbacks: [new ConsoleCallbackHandler()],\n * });\n *\n * ```\n */ class ConsoleCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"console_callback_handler\"\n        });\n    }\n    /**\n     * Method used to persist the run. In this case, it simply returns a\n     * resolved promise as there's no persistence logic.\n     * @param _run The run to persist.\n     * @returns A resolved promise.\n     */ persistRun(_run) {\n        return Promise.resolve();\n    }\n    // utility methods\n    /**\n     * Method used to get all the parent runs of a given run.\n     * @param run The run whose parents are to be retrieved.\n     * @returns An array of parent runs.\n     */ getParents(run) {\n        const parents = [];\n        let currentRun = run;\n        while(currentRun.parent_run_id){\n            const parent = this.runMap.get(currentRun.parent_run_id);\n            if (parent) {\n                parents.push(parent);\n                currentRun = parent;\n            } else {\n                break;\n            }\n        }\n        return parents;\n    }\n    /**\n     * Method used to get a string representation of the run's lineage, which\n     * is used in logging.\n     * @param run The run whose lineage is to be retrieved.\n     * @returns A string representation of the run's lineage.\n     */ getBreadcrumbs(run) {\n        const parents = this.getParents(run).reverse();\n        const string = [\n            ...parents,\n            run\n        ].map((parent, i, arr)=>{\n            const name = `${parent.execution_order}:${parent.run_type}:${parent.name}`;\n            return i === arr.length - 1 ? wrap(ansi_styles__WEBPACK_IMPORTED_MODULE_0__.bold, name) : name;\n        }).join(\" > \");\n        return wrap(color.grey, string);\n    }\n    // logging methods\n    /**\n     * Method used to log the start of a chain run.\n     * @param run The chain run that has started.\n     * @returns void\n     */ onChainStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[chain/start]\")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a chain run.\n     * @param run The chain run that has ended.\n     * @returns void\n     */ onChainEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[chain/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Chain run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a chain run.\n     * @param run The chain run that has errored.\n     * @returns void\n     */ onChainError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[chain/error]\")} [${crumbs}] [${elapsed(run)}] Chain run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of an LLM run.\n     * @param run The LLM run that has started.\n     * @returns void\n     */ onLLMStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        const inputs = \"prompts\" in run.inputs ? {\n            prompts: run.inputs.prompts.map((p)=>p.trim())\n        } : run.inputs;\n        console.log(`${wrap(color.green, \"[llm/start]\")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of an LLM run.\n     * @param run The LLM run that has ended.\n     * @returns void\n     */ onLLMEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[llm/end]\")} [${crumbs}] [${elapsed(run)}] Exiting LLM run with output: ${tryJsonStringify(run.outputs, \"[response]\")}`);\n    }\n    /**\n     * Method used to log any errors of an LLM run.\n     * @param run The LLM run that has errored.\n     * @returns void\n     */ onLLMError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[llm/error]\")} [${crumbs}] [${elapsed(run)}] LLM run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a tool run.\n     * @param run The tool run that has started.\n     * @returns void\n     */ onToolStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[tool/start]\")} [${crumbs}] Entering Tool run with input: \"${formatKVMapItem(run.inputs.input)}\"`);\n    }\n    /**\n     * Method used to log the end of a tool run.\n     * @param run The tool run that has ended.\n     * @returns void\n     */ onToolEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[tool/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Tool run with output: \"${formatKVMapItem(run.outputs?.output)}\"`);\n    }\n    /**\n     * Method used to log any errors of a tool run.\n     * @param run The tool run that has errored.\n     * @returns void\n     */ onToolError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[tool/error]\")} [${crumbs}] [${elapsed(run)}] Tool run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a retriever run.\n     * @param run The retriever run that has started.\n     * @returns void\n     */ onRetrieverStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[retriever/start]\")} [${crumbs}] Entering Retriever run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a retriever run.\n     * @param run The retriever run that has ended.\n     * @returns void\n     */ onRetrieverEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[retriever/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Retriever run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a retriever run.\n     * @param run The retriever run that has errored.\n     * @returns void\n     */ onRetrieverError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[retriever/error]\")} [${crumbs}] [${elapsed(run)}] Retriever run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the action selected by the agent.\n     * @param run The run in which the agent action occurred.\n     * @returns void\n     */ onAgentAction(run) {\n        const agentRun = run;\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.blue, \"[agent/action]\")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], \"[action]\")}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9jb25zb2xlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNNO0FBQ3ZDLFNBQVNFLEtBQUtDLEtBQUssRUFBRUMsSUFBSTtJQUNyQixPQUFPLENBQUMsRUFBRUQsTUFBTUUsSUFBSSxDQUFDLEVBQUVELEtBQUssRUFBRUQsTUFBTUcsS0FBSyxDQUFDLENBQUM7QUFDL0M7QUFDQSxTQUFTQyxpQkFBaUJDLEdBQUcsRUFBRUMsUUFBUTtJQUNuQyxJQUFJO1FBQ0EsT0FBT0MsS0FBS0MsU0FBUyxDQUFDSCxLQUFLLE1BQU07SUFDckMsRUFDQSxPQUFPSSxLQUFLO1FBQ1IsT0FBT0g7SUFDWDtBQUNKO0FBQ0EsU0FBU0ksZ0JBQWdCQyxLQUFLO0lBQzFCLElBQUksT0FBT0EsVUFBVSxVQUFVO1FBQzNCLE9BQU9BLE1BQU1DLElBQUk7SUFDckI7SUFDQSxJQUFJRCxVQUFVLFFBQVFBLFVBQVVFLFdBQVc7UUFDdkMsT0FBT0Y7SUFDWDtJQUNBLE9BQU9QLGlCQUFpQk8sT0FBT0EsTUFBTUcsUUFBUTtBQUNqRDtBQUNBLFNBQVNDLFFBQVFDLEdBQUc7SUFDaEIsSUFBSSxDQUFDQSxJQUFJQyxRQUFRLEVBQ2IsT0FBTztJQUNYLE1BQU1GLFVBQVVDLElBQUlDLFFBQVEsR0FBR0QsSUFBSUUsVUFBVTtJQUM3QyxJQUFJSCxVQUFVLE1BQU07UUFDaEIsT0FBTyxDQUFDLEVBQUVBLFFBQVEsRUFBRSxDQUFDO0lBQ3pCO0lBQ0EsT0FBTyxDQUFDLEVBQUUsQ0FBQ0EsVUFBVSxJQUFHLEVBQUdJLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM1QztBQUNBLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUd2Qix3Q0FBTUE7QUFDeEI7Ozs7Ozs7Ozs7Ozs7O0NBY0MsR0FDTSxNQUFNd0IsK0JBQStCdkIsZ0RBQVVBO0lBQ2xEd0IsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FB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MUQsS0FBS3FCLE1BQU00QyxHQUFHLEVBQUUscUJBQXFCLEVBQUUsRUFBRVQsT0FBTyxHQUFHLEVBQUV4QyxRQUFRQyxLQUFLLG9DQUFvQyxFQUFFWixpQkFBaUJZLElBQUlpRCxLQUFLLEVBQUUsV0FBVyxDQUFDO0lBQ25LO0lBQ0E7Ozs7S0FJQyxHQUNEYyxjQUFjL0QsR0FBRyxFQUFFO1FBQ2YsTUFBTWdFLFdBQVdoRTtRQUNqQixNQUFNdUMsU0FBUyxJQUFJLENBQUNkLGNBQWMsQ0FBQ3pCO1FBQ25Dd0MsUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRTFELEtBQUtxQixNQUFNNkQsSUFBSSxFQUFFLGtCQUFrQixFQUFFLEVBQUUxQixPQUFPLHlCQUF5QixFQUFFbkQsaUJBQWlCNEUsU0FBU0UsT0FBTyxDQUFDRixTQUFTRSxPQUFPLENBQUNoQyxNQUFNLEdBQUcsRUFBRSxFQUFFLFlBQVksQ0FBQztJQUN6SztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2NvbnNvbGUuanM/NzNjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3R5bGVzIGZyb20gXCJhbnNpLXN0eWxlc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmZ1bmN0aW9uIHdyYXAoc3R5bGUsIHRleHQpIHtcbiAgICByZXR1cm4gYCR7c3R5bGUub3Blbn0ke3RleHR9JHtzdHlsZS5jbG9zZX1gO1xufVxuZnVuY3Rpb24gdHJ5SnNvblN0cmluZ2lmeShvYmosIGZhbGxiYWNrKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGZvcm1hdEtWTWFwSXRlbSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ5SnNvblN0cmluZ2lmeSh2YWx1ZSwgdmFsdWUudG9TdHJpbmcoKSk7XG59XG5mdW5jdGlvbiBlbGFwc2VkKHJ1bikge1xuICAgIGlmICghcnVuLmVuZF90aW1lKVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICBjb25zdCBlbGFwc2VkID0gcnVuLmVuZF90aW1lIC0gcnVuLnN0YXJ0X3RpbWU7XG4gICAgaWYgKGVsYXBzZWQgPCAxMDAwKSB7XG4gICAgICAgIHJldHVybiBgJHtlbGFwc2VkfW1zYDtcbiAgICB9XG4gICAgcmV0dXJuIGAkeyhlbGFwc2VkIC8gMTAwMCkudG9GaXhlZCgyKX1zYDtcbn1cbmNvbnN0IHsgY29sb3IgfSA9IHN0eWxlcztcbi8qKlxuICogQSB0cmFjZXIgdGhhdCBsb2dzIGFsbCBldmVudHMgdG8gdGhlIGNvbnNvbGUuIEl0IGV4dGVuZHMgZnJvbSB0aGVcbiAqIGBCYXNlVHJhY2VyYCBjbGFzcyBhbmQgb3ZlcnJpZGVzIGl0cyBtZXRob2RzIHRvIHByb3ZpZGUgY3VzdG9tIGxvZ2dpbmdcbiAqIGZ1bmN0aW9uYWxpdHkuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICpcbiAqIGNvbnN0IGxsbSA9IG5ldyBDaGF0QW50aHJvcGljKHtcbiAqICAgdGVtcGVyYXR1cmU6IDAsXG4gKiAgIHRhZ3M6IFtcImV4YW1wbGVcIiwgXCJjYWxsYmFja3NcIiwgXCJjb25zdHJ1Y3RvclwiXSxcbiAqICAgY2FsbGJhY2tzOiBbbmV3IENvbnNvbGVDYWxsYmFja0hhbmRsZXIoKV0sXG4gKiB9KTtcbiAqXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnNvbGVDYWxsYmFja0hhbmRsZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJjb25zb2xlX2NhbGxiYWNrX2hhbmRsZXJcIlxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gcGVyc2lzdCB0aGUgcnVuLiBJbiB0aGlzIGNhc2UsIGl0IHNpbXBseSByZXR1cm5zIGFcbiAgICAgKiByZXNvbHZlZCBwcm9taXNlIGFzIHRoZXJlJ3Mgbm8gcGVyc2lzdGVuY2UgbG9naWMuXG4gICAgICogQHBhcmFtIF9ydW4gVGhlIHJ1biB0byBwZXJzaXN0LlxuICAgICAqIEByZXR1cm5zIEEgcmVzb2x2ZWQgcHJvbWlzZS5cbiAgICAgKi9cbiAgICBwZXJzaXN0UnVuKF9ydW4pIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvLyB1dGlsaXR5IG1ldGhvZHNcbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBnZXQgYWxsIHRoZSBwYXJlbnQgcnVucyBvZiBhIGdpdmVuIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBydW4gd2hvc2UgcGFyZW50cyBhcmUgdG8gYmUgcmV0cmlldmVkLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHBhcmVudCBydW5zLlxuICAgICAqL1xuICAgIGdldFBhcmVudHMocnVuKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICAgICAgbGV0IGN1cnJlbnRSdW4gPSBydW47XG4gICAgICAgIHdoaWxlIChjdXJyZW50UnVuLnBhcmVudF9ydW5faWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMucnVuTWFwLmdldChjdXJyZW50UnVuLnBhcmVudF9ydW5faWQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRSdW4gPSBwYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gZ2V0IGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBydW4ncyBsaW5lYWdlLCB3aGljaFxuICAgICAqIGlzIHVzZWQgaW4gbG9nZ2luZy5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBydW4gd2hvc2UgbGluZWFnZSBpcyB0byBiZSByZXRyaWV2ZWQuXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bidzIGxpbmVhZ2UuXG4gICAgICovXG4gICAgZ2V0QnJlYWRjcnVtYnMocnVuKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSB0aGlzLmdldFBhcmVudHMocnVuKS5yZXZlcnNlKCk7XG4gICAgICAgIGNvbnN0IHN0cmluZyA9IFsuLi5wYXJlbnRzLCBydW5dXG4gICAgICAgICAgICAubWFwKChwYXJlbnQsIGksIGFycikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke3BhcmVudC5leGVjdXRpb25fb3JkZXJ9OiR7cGFyZW50LnJ1bl90eXBlfToke3BhcmVudC5uYW1lfWA7XG4gICAgICAgICAgICByZXR1cm4gaSA9PT0gYXJyLmxlbmd0aCAtIDEgPyB3cmFwKHN0eWxlcy5ib2xkLCBuYW1lKSA6IG5hbWU7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIiA+IFwiKTtcbiAgICAgICAgcmV0dXJuIHdyYXAoY29sb3IuZ3JleSwgc3RyaW5nKTtcbiAgICB9XG4gICAgLy8gbG9nZ2luZyBtZXRob2RzXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIGNoYWluIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpblN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW2NoYWluL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgQ2hhaW4gcnVuIHdpdGggaW5wdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhIGNoYWluIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uQ2hhaW5FbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5jeWFuLCBcIltjaGFpbi9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIENoYWluIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltvdXRwdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIGFueSBlcnJvcnMgb2YgYSBjaGFpbiBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgY2hhaW4gcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uQ2hhaW5FcnJvcihydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbY2hhaW4vZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBDaGFpbiBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgc3RhcnQgb2YgYW4gTExNIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBMTE0gcnVuIHRoYXQgaGFzIHN0YXJ0ZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uTExNU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc3QgaW5wdXRzID0gXCJwcm9tcHRzXCIgaW4gcnVuLmlucHV0c1xuICAgICAgICAgICAgPyB7IHByb21wdHM6IHJ1bi5pbnB1dHMucHJvbXB0cy5tYXAoKHApID0+IHAudHJpbSgpKSB9XG4gICAgICAgICAgICA6IHJ1bi5pbnB1dHM7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW2xsbS9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIExMTSBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KGlucHV0cywgXCJbaW5wdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBlbmQgb2YgYW4gTExNIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBMTE0gcnVuIHRoYXQgaGFzIGVuZGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkxMTUVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW2xsbS9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIExMTSBydW4gd2l0aCBvdXRwdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4ub3V0cHV0cywgXCJbcmVzcG9uc2VdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25MTE1FcnJvcihydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbbGxtL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gTExNIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIHRvb2wgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHRvb2wgcnVuIHRoYXQgaGFzIHN0YXJ0ZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uVG9vbFN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW3Rvb2wvc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBUb29sIHJ1biB3aXRoIGlucHV0OiBcIiR7Zm9ybWF0S1ZNYXBJdGVtKHJ1bi5pbnB1dHMuaW5wdXQpfVwiYCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uVG9vbEVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW3Rvb2wvZW5kXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gRXhpdGluZyBUb29sIHJ1biB3aXRoIG91dHB1dDogXCIke2Zvcm1hdEtWTWFwSXRlbShydW4ub3V0cHV0cz8ub3V0cHV0KX1cImApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhIHRvb2wgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHRvb2wgcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uVG9vbEVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIlt0b29sL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gVG9vbCBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgc3RhcnQgb2YgYSByZXRyaWV2ZXIgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJldHJpZXZlciBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25SZXRyaWV2ZXJTdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIltyZXRyaWV2ZXIvc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBSZXRyaWV2ZXIgcnVuIHdpdGggaW5wdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhIHJldHJpZXZlciBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25SZXRyaWV2ZXJFbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5jeWFuLCBcIltyZXRyaWV2ZXIvZW5kXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gRXhpdGluZyBSZXRyaWV2ZXIgcnVuIHdpdGggb3V0cHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLm91dHB1dHMsIFwiW291dHB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhIHJldHJpZXZlciBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlckVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltyZXRyaWV2ZXIvZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBSZXRyaWV2ZXIgcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGFjdGlvbiBzZWxlY3RlZCBieSB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcnVuIGluIHdoaWNoIHRoZSBhZ2VudCBhY3Rpb24gb2NjdXJyZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uQWdlbnRBY3Rpb24ocnVuKSB7XG4gICAgICAgIGNvbnN0IGFnZW50UnVuID0gcnVuO1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuYmx1ZSwgXCJbYWdlbnQvYWN0aW9uXVwiKX0gWyR7Y3J1bWJzfV0gQWdlbnQgc2VsZWN0ZWQgYWN0aW9uOiAke3RyeUpzb25TdHJpbmdpZnkoYWdlbnRSdW4uYWN0aW9uc1thZ2VudFJ1bi5hY3Rpb25zLmxlbmd0aCAtIDFdLCBcIlthY3Rpb25dXCIpfWApO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJzdHlsZXMiLCJCYXNlVHJhY2VyIiwid3JhcCIsInN0eWxlIiwidGV4dCIsIm9wZW4iLCJjbG9zZSIsInRyeUpzb25TdHJpbmdpZnkiLCJvYmoiLCJmYWxsYmFjayIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnIiLCJmb3JtYXRLVk1hcEl0ZW0iLCJ2YWx1ZSIsInRyaW0iLCJ1bmRlZmluZWQiLCJ0b1N0cmluZyIsImVsYXBzZWQiLCJydW4iLCJlbmRfdGltZSIsInN0YXJ0X3RpbWUiLCJ0b0ZpeGVkIiwiY29sb3IiLCJDb25zb2xlQ2FsbGJhY2tIYW5kbGVyIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInBlcnNpc3RSdW4iLCJfcnVuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXRQYXJlbnRzIiwicGFyZW50cyIsImN1cnJlbnRSdW4iLCJwYXJlbnRfcnVuX2lkIiwicGFyZW50IiwicnVuTWFwIiwiZ2V0IiwicHVzaCIsImdldEJyZWFkY3J1bWJzIiwicmV2ZXJzZSIsInN0cmluZyIsIm1hcCIsImkiLCJhcnIiLCJuYW1lIiwiZXhlY3V0aW9uX29yZGVyIiwicnVuX3R5cGUiLCJsZW5ndGgiLCJib2xkIiwiam9pbiIsImdyZXkiLCJvbkNoYWluU3RhcnQiLCJjcnVtYnMiLCJjb25zb2xlIiwibG9nIiwiZ3JlZW4iLCJpbnB1dHMiLCJvbkNoYWluRW5kIiwiY3lhbiIsIm91dHB1dHMiLCJvbkNoYWluRXJyb3IiLCJyZWQiLCJlcnJvciIsIm9uTExNU3RhcnQiLCJwcm9tcHRzIiwicCIsIm9uTExNRW5kIiwib25MTE1FcnJvciIsIm9uVG9vbFN0YXJ0IiwiaW5wdXQiLCJvblRvb2xFbmQiLCJvdXRwdXQiLCJvblRvb2xFcnJvciIsIm9uUmV0cmlldmVyU3RhcnQiLCJvblJldHJpZXZlckVuZCIsIm9uUmV0cmlldmVyRXJyb3IiLCJvbkFnZW50QWN0aW9uIiwiYWdlbnRSdW4iLCJibHVlIiwiYWN0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/console.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/event_stream.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/event_stream.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventStreamCallbackHandler: () => (/* binding */ EventStreamCallbackHandler),\n/* harmony export */   isStreamEventsHandler: () => (/* binding */ isStreamEventsHandler)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n\n\n\n\nfunction assignName({ name, serialized }) {\n    if (name !== undefined) {\n        return name;\n    }\n    if (serialized?.name !== undefined) {\n        return serialized.name;\n    } else if (serialized?.id !== undefined && Array.isArray(serialized?.id)) {\n        return serialized.id[serialized.id.length - 1];\n    }\n    return \"Unnamed\";\n}\nconst isStreamEventsHandler = (handler)=>handler.name === \"event_stream_tracer\";\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class EventStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor(fields){\n        super({\n            _awaitHandler: true,\n            ...fields\n        });\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"runInfoMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"tappedPromises\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"event_stream_tracer\"\n        });\n        Object.defineProperty(this, \"lc_prefer_streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_1__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.runType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.runType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, outputStream) {\n        const firstChunk = await outputStream.next();\n        if (firstChunk.done) {\n            return;\n        }\n        const runInfo = this.runInfoMap.get(runId);\n        // Run has finished, don't issue any stream events.\n        // An example of this is for runnables that use the default\n        // implementation of .stream(), which delegates to .invoke()\n        // and calls .onChainEnd() before passing it to the iterator.\n        if (runInfo === undefined) {\n            yield firstChunk.value;\n            return;\n        }\n        // Match format from handlers below\n        function _formatOutputChunk(eventType, data) {\n            if (eventType === \"llm\" && typeof data === \"string\") {\n                return new _outputs_js__WEBPACK_IMPORTED_MODULE_3__.GenerationChunk({\n                    text: data\n                });\n            }\n            return data;\n        }\n        let tappedPromise = this.tappedPromises.get(runId);\n        // if we are the first to tap, issue stream events\n        if (tappedPromise === undefined) {\n            let tappedPromiseResolver;\n            tappedPromise = new Promise((resolve)=>{\n                tappedPromiseResolver = resolve;\n            });\n            this.tappedPromises.set(runId, tappedPromise);\n            try {\n                const event = {\n                    event: `on_${runInfo.runType}_stream`,\n                    run_id: runId,\n                    name: runInfo.name,\n                    tags: runInfo.tags,\n                    metadata: runInfo.metadata,\n                    data: {}\n                };\n                await this.send({\n                    ...event,\n                    data: {\n                        chunk: _formatOutputChunk(runInfo.runType, firstChunk.value)\n                    }\n                }, runInfo);\n                yield firstChunk.value;\n                for await (const chunk of outputStream){\n                    // Don't yield tool and retriever stream events\n                    if (runInfo.runType !== \"tool\" && runInfo.runType !== \"retriever\") {\n                        await this.send({\n                            ...event,\n                            data: {\n                                chunk: _formatOutputChunk(runInfo.runType, chunk)\n                            }\n                        }, runInfo);\n                    }\n                    yield chunk;\n                }\n            } finally{\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                tappedPromiseResolver();\n            // Don't delete from the promises map to keep track of which runs have been tapped.\n            }\n        } else {\n            // otherwise just pass through\n            yield firstChunk.value;\n            for await (const chunk of outputStream){\n                yield chunk;\n            }\n        }\n    }\n    async send(payload, run) {\n        if (this._includeRun(run)) {\n            await this.writer.write(payload);\n        }\n    }\n    async sendEndEvent(payload, run) {\n        const tappedPromise = this.tappedPromises.get(payload.run_id);\n        if (tappedPromise !== undefined) {\n            void tappedPromise.then(()=>{\n                void this.send(payload, run);\n            });\n        } else {\n            await this.send(payload, run);\n        }\n    }\n    async onLLMStart(run) {\n        const runName = assignName(run);\n        const runType = run.inputs.messages !== undefined ? \"chat_model\" : \"llm\";\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType,\n            inputs: run.inputs\n        };\n        this.runInfoMap.set(run.id, runInfo);\n        const eventName = `on_${runType}_start`;\n        await this.send({\n            event: eventName,\n            data: {\n                input: run.inputs\n            },\n            name: runName,\n            tags: run.tags ?? [],\n            run_id: run.id,\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onLLMNewToken(run, token, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    kwargs) {\n        const runInfo = this.runInfoMap.get(run.id);\n        let chunk;\n        let eventName;\n        if (runInfo === undefined) {\n            throw new Error(`onLLMNewToken: Run ID ${run.id} not found in run map.`);\n        }\n        // Top-level streaming events are covered by tapOutputIterable\n        if (this.runInfoMap.size === 1) {\n            return;\n        }\n        if (runInfo.runType === \"chat_model\") {\n            eventName = \"on_chat_model_stream\";\n            if (kwargs?.chunk === undefined) {\n                chunk = new _messages_ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessageChunk({\n                    content: token,\n                    id: `run-${run.id}`\n                });\n            } else {\n                chunk = kwargs.chunk.message;\n            }\n        } else if (runInfo.runType === \"llm\") {\n            eventName = \"on_llm_stream\";\n            if (kwargs?.chunk === undefined) {\n                chunk = new _outputs_js__WEBPACK_IMPORTED_MODULE_3__.GenerationChunk({\n                    text: token\n                });\n            } else {\n                chunk = kwargs.chunk;\n            }\n        } else {\n            throw new Error(`Unexpected run type ${runInfo.runType}`);\n        }\n        await this.send({\n            event: eventName,\n            data: {\n                chunk\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    async onLLMEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        let eventName;\n        if (runInfo === undefined) {\n            throw new Error(`onLLMEnd: Run ID ${run.id} not found in run map.`);\n        }\n        const generations = run.outputs?.generations;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let output;\n        if (runInfo.runType === \"chat_model\") {\n            for (const generation of generations ?? []){\n                if (output !== undefined) {\n                    break;\n                }\n                output = generation[0]?.message;\n            }\n            eventName = \"on_chat_model_end\";\n        } else if (runInfo.runType === \"llm\") {\n            output = {\n                generations: generations?.map((generation)=>{\n                    return generation.map((chunk)=>{\n                        return {\n                            text: chunk.text,\n                            generationInfo: chunk.generationInfo\n                        };\n                    });\n                }),\n                llmOutput: run.outputs?.llmOutput ?? {}\n            };\n            eventName = \"on_llm_end\";\n        } else {\n            throw new Error(`onLLMEnd: Unexpected run type: ${runInfo.runType}`);\n        }\n        await this.sendEndEvent({\n            event: eventName,\n            data: {\n                output,\n                input: runInfo.inputs\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    async onChainStart(run) {\n        const runName = assignName(run);\n        const runType = run.run_type ?? \"chain\";\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType: run.run_type\n        };\n        let eventData = {};\n        // Workaround Runnable core code not sending input when transform streaming.\n        if (run.inputs.input === \"\" && Object.keys(run.inputs).length === 1) {\n            eventData = {};\n            runInfo.inputs = {};\n        } else if (run.inputs.input !== undefined) {\n            eventData.input = run.inputs.input;\n            runInfo.inputs = run.inputs.input;\n        } else {\n            eventData.input = run.inputs;\n            runInfo.inputs = run.inputs;\n        }\n        this.runInfoMap.set(run.id, runInfo);\n        await this.send({\n            event: `on_${runType}_start`,\n            data: eventData,\n            name: runName,\n            tags: run.tags ?? [],\n            run_id: run.id,\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onChainEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        if (runInfo === undefined) {\n            throw new Error(`onChainEnd: Run ID ${run.id} not found in run map.`);\n        }\n        const eventName = `on_${run.run_type}_end`;\n        const inputs = run.inputs ?? runInfo.inputs ?? {};\n        const outputs = run.outputs?.output ?? run.outputs;\n        const data = {\n            output: outputs,\n            input: inputs\n        };\n        if (inputs.input && Object.keys(inputs).length === 1) {\n            data.input = inputs.input;\n            runInfo.inputs = inputs.input;\n        }\n        await this.sendEndEvent({\n            event: eventName,\n            data,\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata ?? {}\n        }, runInfo);\n    }\n    async onToolStart(run) {\n        const runName = assignName(run);\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType: \"tool\",\n            inputs: run.inputs ?? {}\n        };\n        this.runInfoMap.set(run.id, runInfo);\n        await this.send({\n            event: \"on_tool_start\",\n            data: {\n                input: run.inputs ?? {}\n            },\n            name: runName,\n            run_id: run.id,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onToolEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        if (runInfo === undefined) {\n            throw new Error(`onToolEnd: Run ID ${run.id} not found in run map.`);\n        }\n        if (runInfo.inputs === undefined) {\n            throw new Error(`onToolEnd: Run ID ${run.id} is a tool call, and is expected to have traced inputs.`);\n        }\n        const output = run.outputs?.output === undefined ? run.outputs : run.outputs.output;\n        await this.sendEndEvent({\n            event: \"on_tool_end\",\n            data: {\n                output,\n                input: runInfo.inputs\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    async onRetrieverStart(run) {\n        const runName = assignName(run);\n        const runType = \"retriever\";\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType,\n            inputs: {\n                query: run.inputs.query\n            }\n        };\n        this.runInfoMap.set(run.id, runInfo);\n        await this.send({\n            event: \"on_retriever_start\",\n            data: {\n                input: {\n                    query: run.inputs.query\n                }\n            },\n            name: runName,\n            tags: run.tags ?? [],\n            run_id: run.id,\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onRetrieverEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        if (runInfo === undefined) {\n            throw new Error(`onRetrieverEnd: Run ID ${run.id} not found in run map.`);\n        }\n        await this.sendEndEvent({\n            event: \"on_retriever_end\",\n            data: {\n                output: run.outputs?.documents ?? run.outputs,\n                input: runInfo.inputs\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async handleCustomEvent(eventName, data, runId) {\n        const runInfo = this.runInfoMap.get(runId);\n        if (runInfo === undefined) {\n            throw new Error(`handleCustomEvent: Run ID ${runId} not found in run map.`);\n        }\n        await this.send({\n            event: \"on_custom_event\",\n            run_id: runId,\n            name: eventName,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata,\n            data\n        }, runInfo);\n    }\n    async finish() {\n        const pendingPromises = [\n            ...this.tappedPromises.values()\n        ];\n        void Promise.all(pendingPromises).finally(()=>{\n            void this.writer.close();\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9ldmVudF9zdHJlYW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXVDO0FBQ3FCO0FBQ1Q7QUFDSDtBQUNoRCxTQUFTSSxXQUFXLEVBQUVDLElBQUksRUFBRUMsVUFBVSxFQUFHO0lBQ3JDLElBQUlELFNBQVNFLFdBQVc7UUFDcEIsT0FBT0Y7SUFDWDtJQUNBLElBQUlDLFlBQVlELFNBQVNFLFdBQVc7UUFDaEMsT0FBT0QsV0FBV0QsSUFBSTtJQUMxQixPQUNLLElBQUlDLFlBQVlFLE9BQU9ELGFBQWFFLE1BQU1DLE9BQU8sQ0FBQ0osWUFBWUUsS0FBSztRQUNwRSxPQUFPRixXQUFXRSxFQUFFLENBQUNGLFdBQVdFLEVBQUUsQ0FBQ0csTUFBTSxHQUFHLEVBQUU7SUFDbEQ7SUFDQSxPQUFPO0FBQ1g7QUFDTyxNQUFNQyx3QkFBd0IsQ0FBQ0MsVUFBWUEsUUFBUVIsSUFBSSxLQUFLLHNCQUFzQjtBQUN6Rjs7Ozs7Q0FLQyxHQUNNLE1BQU1TLG1DQUFtQ2QsZ0RBQVVBO0lBQ3REZSxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDO1lBQUVDLGVBQWU7WUFBTSxHQUFHRCxNQUFNO1FBQUM7UUFDdkNFLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlB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ZixRQUFRZSxRQUFRO1FBQzlCLEdBQUdmO0lBQ1A7SUFDQSw4REFBOEQ7SUFDOUQsTUFBTXdELGtCQUFrQjdCLFNBQVMsRUFBRXRCLElBQUksRUFBRVYsS0FBSyxFQUFFO1FBQzVDLE1BQU1LLFVBQVUsSUFBSSxDQUFDQyxVQUFVLENBQUNDLEdBQUcsQ0FBQ1A7UUFDcEMsSUFBSUssWUFBWXBELFdBQVc7WUFDdkIsTUFBTSxJQUFJb0YsTUFBTSxDQUFDLDBCQUEwQixFQUFFckMsTUFBTSxzQkFBc0IsQ0FBQztRQUM5RTtRQUNBLE1BQU0sSUFBSSxDQUFDcUIsSUFBSSxDQUFDO1lBQ1pILE9BQU87WUFDUEMsUUFBUW5CO1lBQ1JqRCxNQUFNaUY7WUFDTnhDLE1BQU1hLFFBQVFiLElBQUk7WUFDbEI0QixVQUFVZixRQUFRZSxRQUFRO1lBQzFCVjtRQUNKLEdBQUdMO0lBQ1A7SUFDQSxNQUFNeUQsU0FBUztRQUNYLE1BQU1DLGtCQUFrQjtlQUFJLElBQUksQ0FBQ2xELGNBQWMsQ0FBQ21ELE1BQU07U0FBRztRQUN6RCxLQUFLakQsUUFBUWtELEdBQUcsQ0FBQ0YsaUJBQWlCRyxPQUFPLENBQUM7WUFDdEMsS0FBSyxJQUFJLENBQUN0RixNQUFNLENBQUN1RixLQUFLO1FBQzFCO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9ldmVudF9zdHJlYW0uanM/ODg0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2FpLmpzXCI7XG5pbXBvcnQgeyBHZW5lcmF0aW9uQ2h1bmsgfSBmcm9tIFwiLi4vb3V0cHV0cy5qc1wiO1xuZnVuY3Rpb24gYXNzaWduTmFtZSh7IG5hbWUsIHNlcmlhbGl6ZWQsIH0pIHtcbiAgICBpZiAobmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cbiAgICBpZiAoc2VyaWFsaXplZD8ubmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemVkLm5hbWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNlcmlhbGl6ZWQ/LmlkICE9PSB1bmRlZmluZWQgJiYgQXJyYXkuaXNBcnJheShzZXJpYWxpemVkPy5pZCkpIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZWQuaWRbc2VyaWFsaXplZC5pZC5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIFwiVW5uYW1lZFwiO1xufVxuZXhwb3J0IGNvbnN0IGlzU3RyZWFtRXZlbnRzSGFuZGxlciA9IChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwiZXZlbnRfc3RyZWFtX3RyYWNlclwiO1xuLyoqXG4gKiBDbGFzcyB0aGF0IGV4dGVuZHMgdGhlIGBCYXNlVHJhY2VyYCBjbGFzcyBmcm9tIHRoZVxuICogYGxhbmdjaGFpbi5jYWxsYmFja3MudHJhY2Vycy5iYXNlYCBtb2R1bGUuIEl0IHJlcHJlc2VudHMgYSBjYWxsYmFja1xuICogaGFuZGxlciB0aGF0IGxvZ3MgdGhlIGV4ZWN1dGlvbiBvZiBydW5zIGFuZCBlbWl0cyBgUnVuTG9nYCBpbnN0YW5jZXMgdG8gYVxuICogYFJ1bkxvZ1N0cmVhbWAuXG4gKi9cbmV4cG9ydCBjbGFzcyBFdmVudFN0cmVhbUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcih7IF9hd2FpdEhhbmRsZXI6IHRydWUsIC4uLmZpZWxkcyB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXV0b0Nsb3NlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuSW5mb01hcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YXBwZWRQcm9taXNlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmFuc2Zvcm1TdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwid3JpdGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlY2VpdmVTdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJldmVudF9zdHJlYW1fdHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3ByZWZlcl9zdHJlYW1pbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXV0b0Nsb3NlID0gZmllbGRzPy5hdXRvQ2xvc2UgPz8gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbmNsdWRlTmFtZXMgPSBmaWVsZHM/LmluY2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPSBmaWVsZHM/LmluY2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9IGZpZWxkcz8uaW5jbHVkZVRhZ3M7XG4gICAgICAgIHRoaXMuZXhjbHVkZU5hbWVzID0gZmllbGRzPy5leGNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVR5cGVzID0gZmllbGRzPy5leGNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVRhZ3MgPSBmaWVsZHM/LmV4Y2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVN0cmVhbSA9IG5ldyBUcmFuc2Zvcm1TdHJlYW0oKTtcbiAgICAgICAgdGhpcy53cml0ZXIgPSB0aGlzLnRyYW5zZm9ybVN0cmVhbS53cml0YWJsZS5nZXRXcml0ZXIoKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlU3RyZWFtID0gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW0odGhpcy50cmFuc2Zvcm1TdHJlYW0ucmVhZGFibGUpO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlU3RyZWFtO1xuICAgIH1cbiAgICBhc3luYyBwZXJzaXN0UnVuKF9ydW4pIHtcbiAgICAgICAgLy8gVGhpcyBpcyBhIGxlZ2FjeSBtZXRob2Qgb25seSBjYWxsZWQgb25jZSBmb3IgYW4gZW50aXJlIHJ1biB0cmVlXG4gICAgICAgIC8vIGFuZCBpcyB0aGVyZWZvcmUgbm90IHVzZWZ1bCBoZXJlXG4gICAgfVxuICAgIF9pbmNsdWRlUnVuKHJ1bikge1xuICAgICAgICBjb25zdCBydW5UYWdzID0gcnVuLnRhZ3MgPz8gW107XG4gICAgICAgIGxldCBpbmNsdWRlID0gdGhpcy5pbmNsdWRlTmFtZXMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5pbmNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSB8fFxuICAgICAgICAgICAgICAgICAgICBydW5UYWdzLmZpbmQoKHRhZykgPT4gdGhpcy5pbmNsdWRlVGFncz8uaW5jbHVkZXModGFnKSkgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZU5hbWVzLmluY2x1ZGVzKHJ1bi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZVR5cGVzLmluY2x1ZGVzKHJ1bi5ydW5UeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlICYmIHJ1blRhZ3MuZXZlcnkoKHRhZykgPT4gIXRoaXMuZXhjbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmNsdWRlO1xuICAgIH1cbiAgICBhc3luYyAqdGFwT3V0cHV0SXRlcmFibGUocnVuSWQsIG91dHB1dFN0cmVhbSkge1xuICAgICAgICBjb25zdCBmaXJzdENodW5rID0gYXdhaXQgb3V0cHV0U3RyZWFtLm5leHQoKTtcbiAgICAgICAgaWYgKGZpcnN0Q2h1bmsuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgLy8gUnVuIGhhcyBmaW5pc2hlZCwgZG9uJ3QgaXNzdWUgYW55IHN0cmVhbSBldmVudHMuXG4gICAgICAgIC8vIEFuIGV4YW1wbGUgb2YgdGhpcyBpcyBmb3IgcnVubmFibGVzIHRoYXQgdXNlIHRoZSBkZWZhdWx0XG4gICAgICAgIC8vIGltcGxlbWVudGF0aW9uIG9mIC5zdHJlYW0oKSwgd2hpY2ggZGVsZWdhdGVzIHRvIC5pbnZva2UoKVxuICAgICAgICAvLyBhbmQgY2FsbHMgLm9uQ2hhaW5FbmQoKSBiZWZvcmUgcGFzc2luZyBpdCB0byB0aGUgaXRlcmF0b3IuXG4gICAgICAgIGlmIChydW5JbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHlpZWxkIGZpcnN0Q2h1bmsudmFsdWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWF0Y2ggZm9ybWF0IGZyb20gaGFuZGxlcnMgYmVsb3dcbiAgICAgICAgZnVuY3Rpb24gX2Zvcm1hdE91dHB1dENodW5rKGV2ZW50VHlwZSwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gXCJsbG1cIiAmJiB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJhdGlvbkNodW5rKHsgdGV4dDogZGF0YSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0YXBwZWRQcm9taXNlID0gdGhpcy50YXBwZWRQcm9taXNlcy5nZXQocnVuSWQpO1xuICAgICAgICAvLyBpZiB3ZSBhcmUgdGhlIGZpcnN0IHRvIHRhcCwgaXNzdWUgc3RyZWFtIGV2ZW50c1xuICAgICAgICBpZiAodGFwcGVkUHJvbWlzZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgdGFwcGVkUHJvbWlzZVJlc29sdmVyO1xuICAgICAgICAgICAgdGFwcGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGFwcGVkUHJvbWlzZVJlc29sdmVyID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy50YXBwZWRQcm9taXNlcy5zZXQocnVuSWQsIHRhcHBlZFByb21pc2UpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3J1bkluZm8ucnVuVHlwZX1fc3RyZWFtYCxcbiAgICAgICAgICAgICAgICAgICAgcnVuX2lkOiBydW5JZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcnVuSW5mby5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB0YWdzOiBydW5JbmZvLnRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBydW5JbmZvLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIC4uLmV2ZW50LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuazogX2Zvcm1hdE91dHB1dENodW5rKHJ1bkluZm8ucnVuVHlwZSwgZmlyc3RDaHVuay52YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSwgcnVuSW5mbyk7XG4gICAgICAgICAgICAgICAgeWllbGQgZmlyc3RDaHVuay52YWx1ZTtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG91dHB1dFN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCB5aWVsZCB0b29sIGFuZCByZXRyaWV2ZXIgc3RyZWFtIGV2ZW50c1xuICAgICAgICAgICAgICAgICAgICBpZiAocnVuSW5mby5ydW5UeXBlICE9PSBcInRvb2xcIiAmJiBydW5JbmZvLnJ1blR5cGUgIT09IFwicmV0cmlldmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuazogX2Zvcm1hdE91dHB1dENodW5rKHJ1bkluZm8ucnVuVHlwZSwgY2h1bmspLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBydW5JbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgIHRhcHBlZFByb21pc2VSZXNvbHZlcigpO1xuICAgICAgICAgICAgICAgIC8vIERvbid0IGRlbGV0ZSBmcm9tIHRoZSBwcm9taXNlcyBtYXAgdG8ga2VlcCB0cmFjayBvZiB3aGljaCBydW5zIGhhdmUgYmVlbiB0YXBwZWQuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UganVzdCBwYXNzIHRocm91Z2hcbiAgICAgICAgICAgIHlpZWxkIGZpcnN0Q2h1bmsudmFsdWU7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG91dHB1dFN0cmVhbSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNlbmQocGF5bG9hZCwgcnVuKSB7XG4gICAgICAgIGlmICh0aGlzLl9pbmNsdWRlUnVuKHJ1bikpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNlbmRFbmRFdmVudChwYXlsb2FkLCBydW4pIHtcbiAgICAgICAgY29uc3QgdGFwcGVkUHJvbWlzZSA9IHRoaXMudGFwcGVkUHJvbWlzZXMuZ2V0KHBheWxvYWQucnVuX2lkKTtcbiAgICAgICAgaWYgKHRhcHBlZFByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdm9pZCB0YXBwZWRQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5zZW5kKHBheWxvYWQsIHJ1bik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZChwYXlsb2FkLCBydW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uTExNU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1bk5hbWUgPSBhc3NpZ25OYW1lKHJ1bik7XG4gICAgICAgIGNvbnN0IHJ1blR5cGUgPSBydW4uaW5wdXRzLm1lc3NhZ2VzICE9PSB1bmRlZmluZWQgPyBcImNoYXRfbW9kZWxcIiA6IFwibGxtXCI7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB7XG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyA/PyBbXSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICAgICAgbmFtZTogcnVuTmFtZSxcbiAgICAgICAgICAgIHJ1blR5cGUsXG4gICAgICAgICAgICBpbnB1dHM6IHJ1bi5pbnB1dHMsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5zZXQocnVuLmlkLCBydW5JbmZvKTtcbiAgICAgICAgY29uc3QgZXZlbnROYW1lID0gYG9uXyR7cnVuVHlwZX1fc3RhcnRgO1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmQoe1xuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogcnVuLmlucHV0cyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgYXN5bmMgb25MTE1OZXdUb2tlbihydW4sIHRva2VuLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGt3YXJncykge1xuICAgICAgICBjb25zdCBydW5JbmZvID0gdGhpcy5ydW5JbmZvTWFwLmdldChydW4uaWQpO1xuICAgICAgICBsZXQgY2h1bms7XG4gICAgICAgIGxldCBldmVudE5hbWU7XG4gICAgICAgIGlmIChydW5JbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgb25MTE1OZXdUb2tlbjogUnVuIElEICR7cnVuLmlkfSBub3QgZm91bmQgaW4gcnVuIG1hcC5gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUb3AtbGV2ZWwgc3RyZWFtaW5nIGV2ZW50cyBhcmUgY292ZXJlZCBieSB0YXBPdXRwdXRJdGVyYWJsZVxuICAgICAgICBpZiAodGhpcy5ydW5JbmZvTWFwLnNpemUgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocnVuSW5mby5ydW5UeXBlID09PSBcImNoYXRfbW9kZWxcIikge1xuICAgICAgICAgICAgZXZlbnROYW1lID0gXCJvbl9jaGF0X21vZGVsX3N0cmVhbVwiO1xuICAgICAgICAgICAgaWYgKGt3YXJncz8uY2h1bmsgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNodW5rID0gbmV3IEFJTWVzc2FnZUNodW5rKHsgY29udGVudDogdG9rZW4sIGlkOiBgcnVuLSR7cnVuLmlkfWAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaHVuayA9IGt3YXJncy5jaHVuay5tZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJ1bkluZm8ucnVuVHlwZSA9PT0gXCJsbG1cIikge1xuICAgICAgICAgICAgZXZlbnROYW1lID0gXCJvbl9sbG1fc3RyZWFtXCI7XG4gICAgICAgICAgICBpZiAoa3dhcmdzPy5jaHVuayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2h1bmsgPSBuZXcgR2VuZXJhdGlvbkNodW5rKHsgdGV4dDogdG9rZW4gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaHVuayA9IGt3YXJncy5jaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBydW4gdHlwZSAke3J1bkluZm8ucnVuVHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNlbmQoe1xuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBjaHVuayxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG5hbWU6IHJ1bkluZm8ubmFtZSxcbiAgICAgICAgICAgIHRhZ3M6IHJ1bkluZm8udGFncyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW5JbmZvLm1ldGFkYXRhLFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgYXN5bmMgb25MTE1FbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bi5pZCk7XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5kZWxldGUocnVuLmlkKTtcbiAgICAgICAgbGV0IGV2ZW50TmFtZTtcbiAgICAgICAgaWYgKHJ1bkluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBvbkxMTUVuZDogUnVuIElEICR7cnVuLmlkfSBub3QgZm91bmQgaW4gcnVuIG1hcC5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IHJ1bi5vdXRwdXRzPy5nZW5lcmF0aW9ucztcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgaWYgKHJ1bkluZm8ucnVuVHlwZSA9PT0gXCJjaGF0X21vZGVsXCIpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZ2VuZXJhdGlvbiBvZiBnZW5lcmF0aW9ucyA/PyBbXSkge1xuICAgICAgICAgICAgICAgIGlmIChvdXRwdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gZ2VuZXJhdGlvblswXT8ubWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50TmFtZSA9IFwib25fY2hhdF9tb2RlbF9lbmRcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChydW5JbmZvLnJ1blR5cGUgPT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIG91dHB1dCA9IHtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogZ2VuZXJhdGlvbnM/Lm1hcCgoZ2VuZXJhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGlvbi5tYXAoKGNodW5rKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGNodW5rLnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkluZm86IGNodW5rLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbGxtT3V0cHV0OiBydW4ub3V0cHV0cz8ubGxtT3V0cHV0ID8/IHt9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV2ZW50TmFtZSA9IFwib25fbGxtX2VuZFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBvbkxMTUVuZDogVW5leHBlY3RlZCBydW4gdHlwZTogJHtydW5JbmZvLnJ1blR5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kRW5kRXZlbnQoe1xuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHJ1bkluZm8uaW5wdXRzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbmFtZTogcnVuSW5mby5uYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuSW5mby50YWdzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGEsXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvbkNoYWluU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1bk5hbWUgPSBhc3NpZ25OYW1lKHJ1bik7XG4gICAgICAgIGNvbnN0IHJ1blR5cGUgPSBydW4ucnVuX3R5cGUgPz8gXCJjaGFpblwiO1xuICAgICAgICBjb25zdCBydW5JbmZvID0ge1xuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuLmV4dHJhPy5tZXRhZGF0YSA/PyB7fSxcbiAgICAgICAgICAgIG5hbWU6IHJ1bk5hbWUsXG4gICAgICAgICAgICBydW5UeXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgIH07XG4gICAgICAgIGxldCBldmVudERhdGEgPSB7fTtcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBSdW5uYWJsZSBjb3JlIGNvZGUgbm90IHNlbmRpbmcgaW5wdXQgd2hlbiB0cmFuc2Zvcm0gc3RyZWFtaW5nLlxuICAgICAgICBpZiAocnVuLmlucHV0cy5pbnB1dCA9PT0gXCJcIiAmJiBPYmplY3Qua2V5cyhydW4uaW5wdXRzKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGV2ZW50RGF0YSA9IHt9O1xuICAgICAgICAgICAgcnVuSW5mby5pbnB1dHMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChydW4uaW5wdXRzLmlucHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV2ZW50RGF0YS5pbnB1dCA9IHJ1bi5pbnB1dHMuaW5wdXQ7XG4gICAgICAgICAgICBydW5JbmZvLmlucHV0cyA9IHJ1bi5pbnB1dHMuaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBldmVudERhdGEuaW5wdXQgPSBydW4uaW5wdXRzO1xuICAgICAgICAgICAgcnVuSW5mby5pbnB1dHMgPSBydW4uaW5wdXRzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5zZXQocnVuLmlkLCBydW5JbmZvKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHtcbiAgICAgICAgICAgIGV2ZW50OiBgb25fJHtydW5UeXBlfV9zdGFydGAsXG4gICAgICAgICAgICBkYXRhOiBldmVudERhdGEsXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgYXN5bmMgb25DaGFpbkVuZChydW4pIHtcbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHRoaXMucnVuSW5mb01hcC5nZXQocnVuLmlkKTtcbiAgICAgICAgdGhpcy5ydW5JbmZvTWFwLmRlbGV0ZShydW4uaWQpO1xuICAgICAgICBpZiAocnVuSW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9uQ2hhaW5FbmQ6IFJ1biBJRCAke3J1bi5pZH0gbm90IGZvdW5kIGluIHJ1biBtYXAuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnROYW1lID0gYG9uXyR7cnVuLnJ1bl90eXBlfV9lbmRgO1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBydW4uaW5wdXRzID8/IHJ1bkluZm8uaW5wdXRzID8/IHt9O1xuICAgICAgICBjb25zdCBvdXRwdXRzID0gcnVuLm91dHB1dHM/Lm91dHB1dCA/PyBydW4ub3V0cHV0cztcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIG91dHB1dDogb3V0cHV0cyxcbiAgICAgICAgICAgIGlucHV0OiBpbnB1dHMsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChpbnB1dHMuaW5wdXQgJiYgT2JqZWN0LmtleXMoaW5wdXRzKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGRhdGEuaW5wdXQgPSBpbnB1dHMuaW5wdXQ7XG4gICAgICAgICAgICBydW5JbmZvLmlucHV0cyA9IGlucHV0cy5pbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNlbmRFbmRFdmVudCh7XG4gICAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbmFtZTogcnVuSW5mby5uYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuSW5mby50YWdzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvblRvb2xTdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgcnVuTmFtZSA9IGFzc2lnbk5hbWUocnVuKTtcbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHtcbiAgICAgICAgICAgIHRhZ3M6IHJ1bi50YWdzID8/IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgcnVuVHlwZTogXCJ0b29sXCIsXG4gICAgICAgICAgICBpbnB1dHM6IHJ1bi5pbnB1dHMgPz8ge30sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5zZXQocnVuLmlkLCBydW5JbmZvKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHtcbiAgICAgICAgICAgIGV2ZW50OiBcIm9uX3Rvb2xfc3RhcnRcIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogcnVuLmlucHV0cyA/PyB7fSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgcnVuX2lkOiBydW4uaWQsXG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyA/PyBbXSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgYXN5bmMgb25Ub29sRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBydW5JbmZvID0gdGhpcy5ydW5JbmZvTWFwLmdldChydW4uaWQpO1xuICAgICAgICB0aGlzLnJ1bkluZm9NYXAuZGVsZXRlKHJ1bi5pZCk7XG4gICAgICAgIGlmIChydW5JbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgb25Ub29sRW5kOiBSdW4gSUQgJHtydW4uaWR9IG5vdCBmb3VuZCBpbiBydW4gbWFwLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5JbmZvLmlucHV0cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9uVG9vbEVuZDogUnVuIElEICR7cnVuLmlkfSBpcyBhIHRvb2wgY2FsbCwgYW5kIGlzIGV4cGVjdGVkIHRvIGhhdmUgdHJhY2VkIGlucHV0cy5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvdXRwdXQgPSBydW4ub3V0cHV0cz8ub3V0cHV0ID09PSB1bmRlZmluZWQgPyBydW4ub3V0cHV0cyA6IHJ1bi5vdXRwdXRzLm91dHB1dDtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kRW5kRXZlbnQoe1xuICAgICAgICAgICAgZXZlbnQ6IFwib25fdG9vbF9lbmRcIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHJ1bkluZm8uaW5wdXRzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbmFtZTogcnVuSW5mby5uYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuSW5mby50YWdzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGEsXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvblJldHJpZXZlclN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBydW5OYW1lID0gYXNzaWduTmFtZShydW4pO1xuICAgICAgICBjb25zdCBydW5UeXBlID0gXCJyZXRyaWV2ZXJcIjtcbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHtcbiAgICAgICAgICAgIHRhZ3M6IHJ1bi50YWdzID8/IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgcnVuVHlwZSxcbiAgICAgICAgICAgIGlucHV0czoge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBydW4uaW5wdXRzLnF1ZXJ5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ydW5JbmZvTWFwLnNldChydW4uaWQsIHJ1bkluZm8pO1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmQoe1xuICAgICAgICAgICAgZXZlbnQ6IFwib25fcmV0cmlldmVyX3N0YXJ0XCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHJ1bi5pbnB1dHMucXVlcnksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgYXN5bmMgb25SZXRyaWV2ZXJFbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bi5pZCk7XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5kZWxldGUocnVuLmlkKTtcbiAgICAgICAgaWYgKHJ1bkluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBvblJldHJpZXZlckVuZDogUnVuIElEICR7cnVuLmlkfSBub3QgZm91bmQgaW4gcnVuIG1hcC5gKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNlbmRFbmRFdmVudCh7XG4gICAgICAgICAgICBldmVudDogXCJvbl9yZXRyaWV2ZXJfZW5kXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgb3V0cHV0OiBydW4ub3V0cHV0cz8uZG9jdW1lbnRzID8/IHJ1bi5vdXRwdXRzLFxuICAgICAgICAgICAgICAgIGlucHV0OiBydW5JbmZvLmlucHV0cyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG5hbWU6IHJ1bkluZm8ubmFtZSxcbiAgICAgICAgICAgIHRhZ3M6IHJ1bkluZm8udGFncyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW5JbmZvLm1ldGFkYXRhLFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBhc3luYyBoYW5kbGVDdXN0b21FdmVudChldmVudE5hbWUsIGRhdGEsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKHJ1bkluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBoYW5kbGVDdXN0b21FdmVudDogUnVuIElEICR7cnVuSWR9IG5vdCBmb3VuZCBpbiBydW4gbWFwLmApO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICBldmVudDogXCJvbl9jdXN0b21fZXZlbnRcIixcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBldmVudE5hbWUsXG4gICAgICAgICAgICB0YWdzOiBydW5JbmZvLnRhZ3MsXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuSW5mby5tZXRhZGF0YSxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBmaW5pc2goKSB7XG4gICAgICAgIGNvbnN0IHBlbmRpbmdQcm9taXNlcyA9IFsuLi50aGlzLnRhcHBlZFByb21pc2VzLnZhbHVlcygpXTtcbiAgICAgICAgdm9pZCBQcm9taXNlLmFsbChwZW5kaW5nUHJvbWlzZXMpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgdm9pZCB0aGlzLndyaXRlci5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVRyYWNlciIsIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJBSU1lc3NhZ2VDaHVuayIsIkdlbmVyYXRpb25DaHVuayIsImFzc2lnbk5hbWUiLCJuYW1lIiwic2VyaWFsaXplZCIsInVuZGVmaW5lZCIsImlkIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiaXNTdHJlYW1FdmVudHNIYW5kbGVyIiwiaGFuZGxlciIsIkV2ZW50U3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJfYXdhaXRIYW5kbGVyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIk1hcCIsImF1dG9DbG9zZSIsImluY2x1ZGVOYW1lcyIsImluY2x1ZGVUeXBlcyIsImluY2x1ZGVUYWdzIiwiZXhjbHVkZU5hbWVzIiwiZXhjbHVkZVR5cGVzIiwiZXhjbHVkZVRhZ3MiLCJ0cmFuc2Zvcm1TdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJ3cml0ZXIiLCJnZXRXcml0ZXIiLCJyZWNlaXZlU3RyZWFtIiwiZnJvbVJlYWRhYmxlU3RyZWFtIiwicmVhZGFibGUiLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJfaW5jbHVkZVJ1biIsInJ1biIsInJ1blRhZ3MiLCJ0YWdzIiwiaW5jbHVkZSIsImluY2x1ZGVzIiwicnVuVHlwZSIsImZpbmQiLCJ0YWciLCJldmVyeSIsInRhcE91dHB1dEl0ZXJhYmxlIiwicnVuSWQiLCJvdXRwdXRTdHJlYW0iLCJmaXJzdENodW5rIiwibmV4dCIsImRvbmUiLCJydW5JbmZvIiwicnVuSW5mb01hcCIsImdldCIsIl9mb3JtYXRPdXRwdXRDaHVuayIsImV2ZW50VHlwZSIsImRhdGEiLCJ0ZXh0IiwidGFwcGVkUHJvbWlzZSIsInRhcHBlZFByb21pc2VzIiwidGFwcGVkUHJvbWlzZVJlc29sdmVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXQiLCJldmVudCIsInJ1bl9pZCIsIm1ldGFkYXRhIiwic2VuZCIsImNodW5rIiwicGF5bG9hZCIsIndyaXRlIiwic2VuZEVuZEV2ZW50IiwidGhlbiIsIm9uTExNU3RhcnQiLCJydW5OYW1lIiwiaW5wdXRzIiwibWVzc2FnZXMiLCJleHRyYSIsImV2ZW50TmFtZSIsImlucHV0Iiwib25MTE1OZXdUb2tlbiIsInRva2VuIiwia3dhcmdzIiwiRXJyb3IiLCJzaXplIiwiY29udGVudCIsIm1lc3NhZ2UiLCJvbkxMTUVuZCIsImRlbGV0ZSIsImdlbmVyYXRpb25zIiwib3V0cHV0cyIsIm91dHB1dCIsImdlbmVyYXRpb24iLCJtYXAiLCJnZW5lcmF0aW9uSW5mbyIsImxsbU91dHB1dCIsIm9uQ2hhaW5TdGFydCIsInJ1bl90eXBlIiwiZXZlbnREYXRhIiwia2V5cyIsIm9uQ2hhaW5FbmQiLCJvblRvb2xTdGFydCIsIm9uVG9vbEVuZCIsIm9uUmV0cmlldmVyU3RhcnQiLCJxdWVyeSIsIm9uUmV0cmlldmVyRW5kIiwiZG9jdW1lbnRzIiwiaGFuZGxlQ3VzdG9tRXZlbnQiLCJmaW5pc2giLCJwZW5kaW5nUHJvbWlzZXMiLCJ2YWx1ZXMiLCJhbGwiLCJmaW5hbGx5IiwiY2xvc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/event_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/log_stream.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogStreamCallbackHandler: () => (/* binding */ LogStreamCallbackHandler),\n/* harmony export */   RunLog: () => (/* binding */ RunLog),\n/* harmony export */   RunLogPatch: () => (/* binding */ RunLogPatch),\n/* harmony export */   isLogStreamHandler: () => (/* binding */ isLogStreamHandler)\n/* harmony export */ });\n/* harmony import */ var _utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/fast-json-patch/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n\n\n\n\n/**\n * List of jsonpatch JSONPatchOperations, which describe how to create the run state\n * from an empty dict. This is the minimal representation of the log, designed to\n * be serialized as JSON and sent over the wire to reconstruct the log on the other\n * side. Reconstruction of the state can be done with any jsonpatch-compliant library,\n * see https://jsonpatch.com for more information.\n */ class RunLogPatch {\n    constructor(fields){\n        Object.defineProperty(this, \"ops\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.ops = fields.ops ?? [];\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nclass RunLog extends RunLogPatch {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.state = fields.state;\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)(this.state, other.ops);\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n    static fromRunLogPatch(patch) {\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, patch.ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops: patch.ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nconst isLogStreamHandler = (handler)=>handler.name === \"log_stream_tracer\";\n/**\n * Extract standardized inputs from a run.\n *\n * Standardizes the inputs based on the type of the runnable used.\n *\n * @param run - Run object\n * @param schemaFormat - The schema format to use.\n *\n * @returns Valid inputs are only dict. By conventions, inputs always represented\n * invocation using named arguments.\n * A null means that the input is not yet known!\n */ async function _getStandardizedInputs(run, schemaFormat) {\n    if (schemaFormat === \"original\") {\n        throw new Error(\"Do not assign inputs with original schema drop the key for now. \" + \"When inputs are added to streamLog they should be added with \" + \"standardized schema for streaming events.\");\n    }\n    const { inputs } = run;\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return inputs;\n    }\n    if (Object.keys(inputs).length === 1 && inputs?.input === \"\") {\n        return undefined;\n    }\n    // new style chains\n    // These nest an additional 'input' key inside the 'inputs' to make sure\n    // the input is always a dict. We need to unpack and user the inner value.\n    // We should try to fix this in Runnables and callbacks/tracers\n    // Runnables should be using a null type here not a placeholder\n    // dict.\n    return inputs.input;\n}\nasync function _getStandardizedOutputs(run, schemaFormat) {\n    const { outputs } = run;\n    if (schemaFormat === \"original\") {\n        // Return the old schema, without standardizing anything\n        return outputs;\n    }\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return outputs;\n    }\n    // TODO: Remove this hacky check\n    if (outputs !== undefined && Object.keys(outputs).length === 1 && outputs?.output !== undefined) {\n        return outputs.output;\n    }\n    return outputs;\n}\nfunction isChatGenerationChunk(x) {\n    return x !== undefined && x.message !== undefined;\n}\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class LogStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(fields){\n        super({\n            _awaitHandler: true,\n            ...fields\n        });\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_schemaFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"original\"\n        });\n        Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"keyMapByRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"counterMapByRunName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"log_stream_tracer\"\n        });\n        Object.defineProperty(this, \"lc_prefer_streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this._schemaFormat = fields?._schemaFormat ?? this._schemaFormat;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        if (run.id === this.rootId) {\n            return false;\n        }\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.run_type);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.run_type);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, output) {\n        // Tap an output async iterator to stream its values to the log.\n        for await (const chunk of output){\n            // root run is handled in .streamLog()\n            if (runId !== this.rootId) {\n                // if we can't find the run silently ignore\n                // eg. because this run wasn't included in the log\n                const key = this.keyMapByRunId[runId];\n                if (key) {\n                    await this.writer.write(new RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: `/logs/${key}/streamed_output/-`,\n                                value: chunk\n                            }\n                        ]\n                    }));\n                }\n            }\n            yield chunk;\n        }\n    }\n    async onRunCreate(run) {\n        if (this.rootId === undefined) {\n            this.rootId = run.id;\n            await this.writer.write(new RunLogPatch({\n                ops: [\n                    {\n                        op: \"replace\",\n                        path: \"\",\n                        value: {\n                            id: run.id,\n                            name: run.name,\n                            type: run.run_type,\n                            streamed_output: [],\n                            final_output: undefined,\n                            logs: {}\n                        }\n                    }\n                ]\n            }));\n        }\n        if (!this._includeRun(run)) {\n            return;\n        }\n        if (this.counterMapByRunName[run.name] === undefined) {\n            this.counterMapByRunName[run.name] = 0;\n        }\n        this.counterMapByRunName[run.name] += 1;\n        const count = this.counterMapByRunName[run.name];\n        this.keyMapByRunId[run.id] = count === 1 ? run.name : `${run.name}:${count}`;\n        const logEntry = {\n            id: run.id,\n            name: run.name,\n            type: run.run_type,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            start_time: new Date(run.start_time).toISOString(),\n            streamed_output: [],\n            streamed_output_str: [],\n            final_output: undefined,\n            end_time: undefined\n        };\n        if (this._schemaFormat === \"streaming_events\") {\n            logEntry.inputs = await _getStandardizedInputs(run, this._schemaFormat);\n        }\n        await this.writer.write(new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${this.keyMapByRunId[run.id]}`,\n                    value: logEntry\n                }\n            ]\n        }));\n    }\n    async onRunUpdate(run) {\n        try {\n            const runName = this.keyMapByRunId[run.id];\n            if (runName === undefined) {\n                return;\n            }\n            const ops = [];\n            if (this._schemaFormat === \"streaming_events\") {\n                ops.push({\n                    op: \"replace\",\n                    path: `/logs/${runName}/inputs`,\n                    value: await _getStandardizedInputs(run, this._schemaFormat)\n                });\n            }\n            ops.push({\n                op: \"add\",\n                path: `/logs/${runName}/final_output`,\n                value: await _getStandardizedOutputs(run, this._schemaFormat)\n            });\n            if (run.end_time !== undefined) {\n                ops.push({\n                    op: \"add\",\n                    path: `/logs/${runName}/end_time`,\n                    value: new Date(run.end_time).toISOString()\n                });\n            }\n            const patch = new RunLogPatch({\n                ops\n            });\n            await this.writer.write(patch);\n        } finally{\n            if (run.id === this.rootId) {\n                const patch = new RunLogPatch({\n                    ops: [\n                        {\n                            op: \"replace\",\n                            path: \"/final_output\",\n                            value: await _getStandardizedOutputs(run, this._schemaFormat)\n                        }\n                    ]\n                });\n                await this.writer.write(patch);\n                if (this.autoClose) {\n                    await this.writer.close();\n                }\n            }\n        }\n    }\n    async onLLMNewToken(run, token, kwargs) {\n        const runName = this.keyMapByRunId[run.id];\n        if (runName === undefined) {\n            return;\n        }\n        // TODO: Remove hack\n        const isChatModel = run.inputs.messages !== undefined;\n        let streamedOutputValue;\n        if (isChatModel) {\n            if (isChatGenerationChunk(kwargs?.chunk)) {\n                streamedOutputValue = kwargs?.chunk;\n            } else {\n                streamedOutputValue = new _messages_ai_js__WEBPACK_IMPORTED_MODULE_3__.AIMessageChunk({\n                    id: `run-${run.id}`,\n                    content: token\n                });\n            }\n        } else {\n            streamedOutputValue = token;\n        }\n        const patch = new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output_str/-`,\n                    value: token\n                },\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output/-`,\n                    value: streamedOutputValue\n                }\n            ]\n        });\n        await this.writer.write(patch);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9sb2dfc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWdFO0FBQ3pCO0FBQ3FCO0FBQ1Q7QUFDbkQ7Ozs7OztDQU1DLEdBQ00sTUFBTUk7SUFDVEMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE9BQU87WUFDL0JDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsR0FBRyxHQUFHUCxPQUFPTyxHQUFHLElBQUksRUFBRTtJQUMvQjtJQUNBQyxPQUFPQyxLQUFLLEVBQUU7UUFDVixNQUFNRixNQUFNLElBQUksQ0FBQ0EsR0FBRyxDQUFDQyxNQUFNLENBQUNDLE1BQU1GLEdBQUc7UUFDckMsTUFBTUcsU0FBU2hCLDJFQUFVQSxDQUFDLENBQUMsR0FBR2E7UUFDOUIsbUVBQW1FO1FBQ25FLE9BQU8sSUFBSUksT0FBTztZQUNkSjtZQUNBSyxPQUFPRixNQUFNLENBQUNBLE9BQU9HLE1BQU0sR0FBRyxFQUFFLENBQUNDLFdBQVc7UUFDaEQ7SUFDSjtBQUNKO0FBQ08sTUFBTUgsZUFBZWI7SUFDeEJDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTSxLQUFLLEdBQUdaLE9BQU9ZLEtBQUs7SUFDN0I7SUFDQUosT0FBT0MsS0FBSyxFQUFFO1FBQ1YsTUFBTUYsTUFBTSxJQUFJLENBQUNBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxNQUFNRixHQUFHO1FBQ3JDLE1BQU1HLFNBQVNoQiwyRUFBVUEsQ0FBQyxJQUFJLENBQUNrQixLQUFLLEVBQUVILE1BQU1G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LElBQUksQ0FBQ3NCLFNBQVMsRUFBRTtvQkFDaEIsTUFBTSxJQUFJLENBQUNVLE1BQU0sQ0FBQzRDLEtBQUs7Z0JBQzNCO1lBQ0o7UUFDSjtJQUNKO0lBQ0EsTUFBTUMsY0FBY3hFLEdBQUcsRUFBRXlFLEtBQUssRUFBRUMsTUFBTSxFQUFFO1FBQ3BDLE1BQU1MLFVBQVUsSUFBSSxDQUFDcEIsYUFBYSxDQUFDakQsSUFBSXFDLEVBQUUsQ0FBQztRQUMxQyxJQUFJZ0MsWUFBWTdELFdBQVc7WUFDdkI7UUFDSjtRQUNBLG9CQUFvQjtRQUNwQixNQUFNbUUsY0FBYzNFLElBQUlHLE1BQU0sQ0FBQ3lFLFFBQVEsS0FBS3BFO1FBQzVDLElBQUlxRTtRQUNKLElBQUlGLGFBQWE7WUFDYixJQUFJL0Qsc0JBQXNCOEQsUUFBUTNCLFFBQVE7Z0JBQ3RDOEIsc0JBQXNCSCxRQUFRM0I7WUFDbEMsT0FDSztnQkFDRDhCLHNCQUFzQixJQUFJckcsMkRBQWNBLENBQUM7b0JBQ3JDNkQsSUFBSSxDQUFDLElBQUksRUFBRXJDLElBQUlxQyxFQUFFLENBQUMsQ0FBQztvQkFDbkJ5QyxTQUFTTDtnQkFDYjtZQUNKO1FBQ0osT0FDSztZQUNESSxzQkFBc0JKO1FBQzFCO1FBQ0EsTUFBTTlFLFFBQVEsSUFBSWxCLFlBQVk7WUFDMUJTLEtBQUs7Z0JBQ0Q7b0JBQ0lpRSxJQUFJO29CQUNKQyxNQUFNLENBQUMsTUFBTSxFQUFFaUIsUUFBUSxzQkFBc0IsQ0FBQztvQkFDOUNwRixPQUFPd0Y7Z0JBQ1g7Z0JBQ0E7b0JBQ0l0QixJQUFJO29CQUNKQyxNQUFNLENBQUMsTUFBTSxFQUFFaUIsUUFBUSxrQkFBa0IsQ0FBQztvQkFDMUNwRixPQUFPNEY7Z0JBQ1g7YUFDSDtRQUNMO1FBQ0EsTUFBTSxJQUFJLENBQUNsRCxNQUFNLENBQUN1QixLQUFLLENBQUN2RDtJQUM1QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2xvZ19zdHJlYW0uanM/MjlkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcHBseVBhdGNoLCB9IGZyb20gXCIuLi91dGlscy9mYXN0LWpzb24tcGF0Y2gvaW5kZXguanNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi4vbWVzc2FnZXMvYWkuanNcIjtcbi8qKlxuICogTGlzdCBvZiBqc29ucGF0Y2ggSlNPTlBhdGNoT3BlcmF0aW9ucywgd2hpY2ggZGVzY3JpYmUgaG93IHRvIGNyZWF0ZSB0aGUgcnVuIHN0YXRlXG4gKiBmcm9tIGFuIGVtcHR5IGRpY3QuIFRoaXMgaXMgdGhlIG1pbmltYWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIGxvZywgZGVzaWduZWQgdG9cbiAqIGJlIHNlcmlhbGl6ZWQgYXMgSlNPTiBhbmQgc2VudCBvdmVyIHRoZSB3aXJlIHRvIHJlY29uc3RydWN0IHRoZSBsb2cgb24gdGhlIG90aGVyXG4gKiBzaWRlLiBSZWNvbnN0cnVjdGlvbiBvZiB0aGUgc3RhdGUgY2FuIGJlIGRvbmUgd2l0aCBhbnkganNvbnBhdGNoLWNvbXBsaWFudCBsaWJyYXJ5LFxuICogc2VlIGh0dHBzOi8vanNvbnBhdGNoLmNvbSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkxvZ1BhdGNoIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3BzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3BzID0gZmllbGRzLm9wcyA/PyBbXTtcbiAgICB9XG4gICAgY29uY2F0KG90aGVyKSB7XG4gICAgICAgIGNvbnN0IG9wcyA9IHRoaXMub3BzLmNvbmNhdChvdGhlci5vcHMpO1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSBhcHBseVBhdGNoKHt9LCBvcHMpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVuTG9nKHtcbiAgICAgICAgICAgIG9wcyxcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuTG9nIGV4dGVuZHMgUnVuTG9nUGF0Y2gge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGF0ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXRlID0gZmllbGRzLnN0YXRlO1xuICAgIH1cbiAgICBjb25jYXQob3RoZXIpIHtcbiAgICAgICAgY29uc3Qgb3BzID0gdGhpcy5vcHMuY29uY2F0KG90aGVyLm9wcyk7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2godGhpcy5zdGF0ZSwgb3RoZXIub3BzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5Mb2coeyBvcHMsIHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50IH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVJ1bkxvZ1BhdGNoKHBhdGNoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2goe30sIHBhdGNoLm9wcyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5Mb2coe1xuICAgICAgICAgICAgb3BzOiBwYXRjaC5vcHMsXG4gICAgICAgICAgICBzdGF0ZTogc3RhdGVzW3N0YXRlcy5sZW5ndGggLSAxXS5uZXdEb2N1bWVudCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGlzTG9nU3RyZWFtSGFuZGxlciA9IChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibG9nX3N0cmVhbV90cmFjZXJcIjtcbi8qKlxuICogRXh0cmFjdCBzdGFuZGFyZGl6ZWQgaW5wdXRzIGZyb20gYSBydW4uXG4gKlxuICogU3RhbmRhcmRpemVzIHRoZSBpbnB1dHMgYmFzZWQgb24gdGhlIHR5cGUgb2YgdGhlIHJ1bm5hYmxlIHVzZWQuXG4gKlxuICogQHBhcmFtIHJ1biAtIFJ1biBvYmplY3RcbiAqIEBwYXJhbSBzY2hlbWFGb3JtYXQgLSBUaGUgc2NoZW1hIGZvcm1hdCB0byB1c2UuXG4gKlxuICogQHJldHVybnMgVmFsaWQgaW5wdXRzIGFyZSBvbmx5IGRpY3QuIEJ5IGNvbnZlbnRpb25zLCBpbnB1dHMgYWx3YXlzIHJlcHJlc2VudGVkXG4gKiBpbnZvY2F0aW9uIHVzaW5nIG5hbWVkIGFyZ3VtZW50cy5cbiAqIEEgbnVsbCBtZWFucyB0aGF0IHRoZSBpbnB1dCBpcyBub3QgeWV0IGtub3duIVxuICovXG5hc3luYyBmdW5jdGlvbiBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgc2NoZW1hRm9ybWF0KSB7XG4gICAgaWYgKHNjaGVtYUZvcm1hdCA9PT0gXCJvcmlnaW5hbFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRvIG5vdCBhc3NpZ24gaW5wdXRzIHdpdGggb3JpZ2luYWwgc2NoZW1hIGRyb3AgdGhlIGtleSBmb3Igbm93LiBcIiArXG4gICAgICAgICAgICBcIldoZW4gaW5wdXRzIGFyZSBhZGRlZCB0byBzdHJlYW1Mb2cgdGhleSBzaG91bGQgYmUgYWRkZWQgd2l0aCBcIiArXG4gICAgICAgICAgICBcInN0YW5kYXJkaXplZCBzY2hlbWEgZm9yIHN0cmVhbWluZyBldmVudHMuXCIpO1xuICAgIH1cbiAgICBjb25zdCB7IGlucHV0cyB9ID0gcnVuO1xuICAgIGlmIChbXCJyZXRyaWV2ZXJcIiwgXCJsbG1cIiwgXCJwcm9tcHRcIl0uaW5jbHVkZXMocnVuLnJ1bl90eXBlKSkge1xuICAgICAgICByZXR1cm4gaW5wdXRzO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXRzKS5sZW5ndGggPT09IDEgJiYgaW5wdXRzPy5pbnB1dCA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBuZXcgc3R5bGUgY2hhaW5zXG4gICAgLy8gVGhlc2UgbmVzdCBhbiBhZGRpdGlvbmFsICdpbnB1dCcga2V5IGluc2lkZSB0aGUgJ2lucHV0cycgdG8gbWFrZSBzdXJlXG4gICAgLy8gdGhlIGlucHV0IGlzIGFsd2F5cyBhIGRpY3QuIFdlIG5lZWQgdG8gdW5wYWNrIGFuZCB1c2VyIHRoZSBpbm5lciB2YWx1ZS5cbiAgICAvLyBXZSBzaG91bGQgdHJ5IHRvIGZpeCB0aGlzIGluIFJ1bm5hYmxlcyBhbmQgY2FsbGJhY2tzL3RyYWNlcnNcbiAgICAvLyBSdW5uYWJsZXMgc2hvdWxkIGJlIHVzaW5nIGEgbnVsbCB0eXBlIGhlcmUgbm90IGEgcGxhY2Vob2xkZXJcbiAgICAvLyBkaWN0LlxuICAgIHJldHVybiBpbnB1dHMuaW5wdXQ7XG59XG5hc3luYyBmdW5jdGlvbiBfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyhydW4sIHNjaGVtYUZvcm1hdCkge1xuICAgIGNvbnN0IHsgb3V0cHV0cyB9ID0gcnVuO1xuICAgIGlmIChzY2hlbWFGb3JtYXQgPT09IFwib3JpZ2luYWxcIikge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIG9sZCBzY2hlbWEsIHdpdGhvdXQgc3RhbmRhcmRpemluZyBhbnl0aGluZ1xuICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICB9XG4gICAgaWYgKFtcInJldHJpZXZlclwiLCBcImxsbVwiLCBcInByb21wdFwiXS5pbmNsdWRlcyhydW4ucnVuX3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgIH1cbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBoYWNreSBjaGVja1xuICAgIGlmIChvdXRwdXRzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgT2JqZWN0LmtleXMob3V0cHV0cykubGVuZ3RoID09PSAxICYmXG4gICAgICAgIG91dHB1dHM/Lm91dHB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRzLm91dHB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dHM7XG59XG5mdW5jdGlvbiBpc0NoYXRHZW5lcmF0aW9uQ2h1bmsoeCkge1xuICAgIHJldHVybiB4ICE9PSB1bmRlZmluZWQgJiYgeC5tZXNzYWdlICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIENsYXNzIHRoYXQgZXh0ZW5kcyB0aGUgYEJhc2VUcmFjZXJgIGNsYXNzIGZyb20gdGhlXG4gKiBgbGFuZ2NoYWluLmNhbGxiYWNrcy50cmFjZXJzLmJhc2VgIG1vZHVsZS4gSXQgcmVwcmVzZW50cyBhIGNhbGxiYWNrXG4gKiBoYW5kbGVyIHRoYXQgbG9ncyB0aGUgZXhlY3V0aW9uIG9mIHJ1bnMgYW5kIGVtaXRzIGBSdW5Mb2dgIGluc3RhbmNlcyB0byBhXG4gKiBgUnVuTG9nU3RyZWFtYC5cbiAqL1xuZXhwb3J0IGNsYXNzIExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcih7IF9hd2FpdEhhbmRsZXI6IHRydWUsIC4uLmZpZWxkcyB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXV0b0Nsb3NlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3NjaGVtYUZvcm1hdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJvcmlnaW5hbFwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb290SWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia2V5TWFwQnlSdW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvdW50ZXJNYXBCeVJ1bk5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmFuc2Zvcm1TdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwid3JpdGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlY2VpdmVTdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJsb2dfc3RyZWFtX3RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19wcmVmZXJfc3RyZWFtaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmF1dG9DbG9zZSA9IGZpZWxkcz8uYXV0b0Nsb3NlID8/IHRydWU7XG4gICAgICAgIHRoaXMuaW5jbHVkZU5hbWVzID0gZmllbGRzPy5pbmNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID0gZmllbGRzPy5pbmNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPSBmaWVsZHM/LmluY2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVOYW1lcyA9IGZpZWxkcz8uZXhjbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUeXBlcyA9IGZpZWxkcz8uZXhjbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUYWdzID0gZmllbGRzPy5leGNsdWRlVGFncztcbiAgICAgICAgdGhpcy5fc2NoZW1hRm9ybWF0ID0gZmllbGRzPy5fc2NoZW1hRm9ybWF0ID8/IHRoaXMuX3NjaGVtYUZvcm1hdDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1TdHJlYW0gPSBuZXcgVHJhbnNmb3JtU3RyZWFtKCk7XG4gICAgICAgIHRoaXMud3JpdGVyID0gdGhpcy50cmFuc2Zvcm1TdHJlYW0ud3JpdGFibGUuZ2V0V3JpdGVyKCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZVN0cmVhbSA9IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtKHRoaXMudHJhbnNmb3JtU3RyZWFtLnJlYWRhYmxlKTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZVN0cmVhbTtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihfcnVuKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgYSBsZWdhY3kgbWV0aG9kIG9ubHkgY2FsbGVkIG9uY2UgZm9yIGFuIGVudGlyZSBydW4gdHJlZVxuICAgICAgICAvLyBhbmQgaXMgdGhlcmVmb3JlIG5vdCB1c2VmdWwgaGVyZVxuICAgIH1cbiAgICBfaW5jbHVkZVJ1bihydW4pIHtcbiAgICAgICAgaWYgKHJ1bi5pZCA9PT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5UYWdzID0gcnVuLnRhZ3MgPz8gW107XG4gICAgICAgIGxldCBpbmNsdWRlID0gdGhpcy5pbmNsdWRlTmFtZXMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5pbmNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuX3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgfHxcbiAgICAgICAgICAgICAgICAgICAgcnVuVGFncy5maW5kKCh0YWcpID0+IHRoaXMuaW5jbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVOYW1lcy5pbmNsdWRlcyhydW4ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZVR5cGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuX3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgJiYgcnVuVGFncy5ldmVyeSgodGFnKSA9PiAhdGhpcy5leGNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgfVxuICAgIGFzeW5jICp0YXBPdXRwdXRJdGVyYWJsZShydW5JZCwgb3V0cHV0KSB7XG4gICAgICAgIC8vIFRhcCBhbiBvdXRwdXQgYXN5bmMgaXRlcmF0b3IgdG8gc3RyZWFtIGl0cyB2YWx1ZXMgdG8gdGhlIGxvZy5cbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBvdXRwdXQpIHtcbiAgICAgICAgICAgIC8vIHJvb3QgcnVuIGlzIGhhbmRsZWQgaW4gLnN0cmVhbUxvZygpXG4gICAgICAgICAgICBpZiAocnVuSWQgIT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgY2FuJ3QgZmluZCB0aGUgcnVuIHNpbGVudGx5IGlnbm9yZVxuICAgICAgICAgICAgICAgIC8vIGVnLiBiZWNhdXNlIHRoaXMgcnVuIHdhc24ndCBpbmNsdWRlZCBpbiB0aGUgbG9nXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5rZXlNYXBCeVJ1bklkW3J1bklkXTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtrZXl9L3N0cmVhbWVkX291dHB1dC8tYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNodW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25SdW5DcmVhdGUocnVuKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3RJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3RJZCA9IHJ1bi5pZDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBydW4uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcnVuLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbWVkX291dHB1dDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxfb3V0cHV0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9pbmNsdWRlUnVuKHJ1bikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdICs9IDE7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXTtcbiAgICAgICAgdGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF0gPVxuICAgICAgICAgICAgY291bnQgPT09IDEgPyBydW4ubmFtZSA6IGAke3J1bi5uYW1lfToke2NvdW50fWA7XG4gICAgICAgIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG5hbWU6IHJ1bi5uYW1lLFxuICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuLmV4dHJhPy5tZXRhZGF0YSA/PyB7fSxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IG5ldyBEYXRlKHJ1bi5zdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgc3RyZWFtZWRfb3V0cHV0OiBbXSxcbiAgICAgICAgICAgIHN0cmVhbWVkX291dHB1dF9zdHI6IFtdLFxuICAgICAgICAgICAgZmluYWxfb3V0cHV0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBlbmRfdGltZTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5fc2NoZW1hRm9ybWF0ID09PSBcInN0cmVhbWluZ19ldmVudHNcIikge1xuICAgICAgICAgICAgbG9nRW50cnkuaW5wdXRzID0gYXdhaXQgX2dldFN0YW5kYXJkaXplZElucHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUobmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3RoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdfWAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBsb2dFbnRyeSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJ1bk5hbWUgPSB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXTtcbiAgICAgICAgICAgIGlmIChydW5OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvcHMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY2hlbWFGb3JtYXQgPT09IFwic3RyZWFtaW5nX2V2ZW50c1wiKSB7XG4gICAgICAgICAgICAgICAgb3BzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2lucHV0c2AsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9maW5hbF9vdXRwdXRgLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChydW4uZW5kX3RpbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2VuZF90aW1lYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHsgb3BzIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHJ1bi5pZCA9PT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIi9maW5hbF9vdXRwdXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXdhaXQgX2dldFN0YW5kYXJkaXplZE91dHB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShwYXRjaCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b0Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uTExNTmV3VG9rZW4ocnVuLCB0b2tlbiwga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1bk5hbWUgPSB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXTtcbiAgICAgICAgaWYgKHJ1bk5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSBoYWNrXG4gICAgICAgIGNvbnN0IGlzQ2hhdE1vZGVsID0gcnVuLmlucHV0cy5tZXNzYWdlcyAhPT0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgc3RyZWFtZWRPdXRwdXRWYWx1ZTtcbiAgICAgICAgaWYgKGlzQ2hhdE1vZGVsKSB7XG4gICAgICAgICAgICBpZiAoaXNDaGF0R2VuZXJhdGlvbkNodW5rKGt3YXJncz8uY2h1bmspKSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtZWRPdXRwdXRWYWx1ZSA9IGt3YXJncz8uY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1lZE91dHB1dFZhbHVlID0gbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGBydW4tJHtydW4uaWR9YCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdG9rZW4sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJlYW1lZE91dHB1dFZhbHVlID0gdG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0Y2ggPSBuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vc3RyZWFtZWRfb3V0cHV0X3N0ci8tYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRva2VuLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vc3RyZWFtZWRfb3V0cHV0Ly1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RyZWFtZWRPdXRwdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiYXBwbHlQYXRjaCIsIkJhc2VUcmFjZXIiLCJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiQUlNZXNzYWdlQ2h1bmsiLCJSdW5Mb2dQYXRjaCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm9wcyIsImNvbmNhdCIsIm90aGVyIiwic3RhdGVzIiwiUnVuTG9nIiwic3RhdGUiLCJsZW5ndGgiLCJuZXdEb2N1bWVudCIsImZyb21SdW5Mb2dQYXRjaCIsInBhdGNoIiwiaXNMb2dTdHJlYW1IYW5kbGVyIiwiaGFuZGxlciIsIm5hbWUiLCJfZ2V0U3RhbmRhcmRpemVkSW5wdXRzIiwicnVuIiwic2NoZW1hRm9ybWF0IiwiRXJyb3IiLCJpbnB1dHMiLCJpbmNsdWRlcyIsInJ1bl90eXBlIiwia2V5cyIsImlucHV0IiwidW5kZWZpbmVkIiwiX2dldFN0YW5kYXJkaXplZE91dHB1dHMiLCJvdXRwdXRzIiwib3V0cHV0IiwiaXNDaGF0R2VuZXJhdGlvbkNodW5rIiwieCIsIm1lc3NhZ2UiLCJMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJfYXdhaXRIYW5kbGVyIiwiYXV0b0Nsb3NlIiwiaW5jbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiaW5jbHVkZVRhZ3MiLCJleGNsdWRlTmFtZXMiLCJleGNsdWRlVHlwZXMiLCJleGNsdWRlVGFncyIsIl9zY2hlbWFGb3JtYXQiLCJ0cmFuc2Zvcm1TdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJ3cml0ZXIiLCJnZXRXcml0ZXIiLCJyZWNlaXZlU3RyZWFtIiwiZnJvbVJlYWRhYmxlU3RyZWFtIiwicmVhZGFibGUiLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJfaW5jbHVkZVJ1biIsImlkIiwicm9vdElkIiwicnVuVGFncyIsInRhZ3MiLCJpbmNsdWRlIiwiZmluZCIsInRhZyIsImV2ZXJ5IiwidGFwT3V0cHV0SXRlcmFibGUiLCJydW5JZCIsImNodW5rIiwia2V5Iiwia2V5TWFwQnlSdW5JZCIsIndyaXRlIiwib3AiLCJwYXRoIiwib25SdW5DcmVhdGUiLCJ0eXBlIiwic3RyZWFtZWRfb3V0cHV0IiwiZmluYWxfb3V0cHV0IiwibG9ncyIsImNvdW50ZXJNYXBCeVJ1bk5hbWUiLCJjb3VudCIsImxvZ0VudHJ5IiwibWV0YWRhdGEiLCJleHRyYSIsInN0YXJ0X3RpbWUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdHJlYW1lZF9vdXRwdXRfc3RyIiwiZW5kX3RpbWUiLCJvblJ1blVwZGF0ZSIsInJ1bk5hbWUiLCJwdXNoIiwiY2xvc2UiLCJvbkxMTU5ld1Rva2VuIiwidG9rZW4iLCJrd2FyZ3MiLCJpc0NoYXRNb2RlbCIsIm1lc3NhZ2VzIiwic3RyZWFtZWRPdXRwdXRWYWx1ZSIsImNvbnRlbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/root_listener.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootListenersTracer: () => (/* binding */ RootListenersTracer)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\nclass RootListenersTracer extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor({ config, onStart, onEnd, onError }){\n        super({\n            _awaitHandler: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"RootListenersTracer\"\n        });\n        /** The Run's ID. Type UUID */ Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnStart\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnEnd\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.config = config;\n        this.argOnStart = onStart;\n        this.argOnEnd = onEnd;\n        this.argOnError = onError;\n    }\n    /**\n     * This is a legacy method only called once for an entire run tree\n     * therefore not useful here\n     * @param {Run} _ Not used\n     */ persistRun(_) {\n        return Promise.resolve();\n    }\n    async onRunCreate(run) {\n        if (this.rootId) {\n            return;\n        }\n        this.rootId = run.id;\n        if (this.argOnStart) {\n            await this.argOnStart(run, this.config);\n        }\n    }\n    async onRunUpdate(run) {\n        if (run.id !== this.rootId) {\n            return;\n        }\n        if (!run.error) {\n            if (this.argOnEnd) {\n                await this.argOnEnd(run, this.config);\n            }\n        } else if (this.argOnError) {\n            await this.argOnError(run, this.config);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVDO0FBQ2hDLE1BQU1DLDRCQUE0QkQsZ0RBQVVBO0lBQy9DRSxZQUFZLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRyxDQUFFO1FBQzlDLEtBQUssQ0FBQztZQUFFQyxlQUFlO1FBQUs7UUFDNUJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsNEJBQTRCLEdBQzVCTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1YsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ1csVUFBVSxHQUFHVjtRQUNsQixJQUFJLENBQUNXLFFBQVEsR0FBR1Y7UUFDaEIsSUFBSSxDQUFDVyxVQUFVLEdBQUdWO0lBQ3RCO0lBQ0E7Ozs7S0FJQyxHQUNEVyxXQUFXQyxDQUFDLEVBQUU7UUFDVixPQUFPQyxRQUFRQyxPQUFPO0lBQzFCO0lBQ0EsTUFBTUMsWUFBWUMsR0FBRyxFQUFFO1FBQ25CLElBQUksSUFBSSxDQUFDQyxNQUFNLEVBQUU7WUFDYjtRQUNKO1FBQ0EsSUFBSSxDQUFDQSxNQUFNLEdBQUdELElBQUlFLEVBQUU7UUFDcEIsSUFBSSxJQUFJLENBQUNWLFVBQVUsRUFBRTtZQUNqQixNQUFNLElBQUksQ0FBQ0EsVUFBVSxDQUFDUSxLQUFLLElBQUksQ0FBQ25CLE1BQU07UUFDMUM7SUFDSjtJQUNBLE1BQU1zQixZQUFZSCxHQUFHLEVBQUU7UUFDbkIsSUFBSUEsSUFBSUUsRUFBRSxLQUFLLElBQUksQ0FBQ0QsTUFBTSxFQUFFO1lBQ3hCO1FBQ0o7UUFDQSxJQUFJLENBQUNELElBQUlJLEtBQUssRUFBRTtZQUNaLElBQUksSUFBSSxDQUFDWCxRQUFRLEVBQUU7Z0JBQ2YsTUFBTSxJQUFJLENBQUNBLFFBQVEsQ0FBQ08sS0FBSyxJQUFJLENBQUNuQixNQUFNO1lBQ3hDO1FBQ0osT0FDSyxJQUFJLElBQUksQ0FBQ2EsVUFBVSxFQUFFO1lBQ3RCLE1BQU0sSUFBSSxDQUFDQSxVQUFVLENBQUNNLEtBQUssSUFBSSxDQUFDbkIsTUFBTTtRQUMxQztJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvcm9vdF9saXN0ZW5lci5qcz8wZDRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgY2xhc3MgUm9vdExpc3RlbmVyc1RyYWNlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKHsgY29uZmlnLCBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICBzdXBlcih7IF9hd2FpdEhhbmRsZXI6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiUm9vdExpc3RlbmVyc1RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogVGhlIFJ1bidzIElELiBUeXBlIFVVSUQgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9vdElkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmdPblN0YXJ0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFyZ09uRW5kXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFyZ09uRXJyb3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuYXJnT25TdGFydCA9IG9uU3RhcnQ7XG4gICAgICAgIHRoaXMuYXJnT25FbmQgPSBvbkVuZDtcbiAgICAgICAgdGhpcy5hcmdPbkVycm9yID0gb25FcnJvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBhIGxlZ2FjeSBtZXRob2Qgb25seSBjYWxsZWQgb25jZSBmb3IgYW4gZW50aXJlIHJ1biB0cmVlXG4gICAgICogdGhlcmVmb3JlIG5vdCB1c2VmdWwgaGVyZVxuICAgICAqIEBwYXJhbSB7UnVufSBfIE5vdCB1c2VkXG4gICAgICovXG4gICAgcGVyc2lzdFJ1bihfKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgYXN5bmMgb25SdW5DcmVhdGUocnVuKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3RJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm9vdElkID0gcnVuLmlkO1xuICAgICAgICBpZiAodGhpcy5hcmdPblN0YXJ0KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uU3RhcnQocnVuLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25SdW5VcGRhdGUocnVuKSB7XG4gICAgICAgIGlmIChydW4uaWQgIT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFydW4uZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyZ09uRW5kKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVuZChydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFyZ09uRXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FcnJvcihydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlVHJhY2VyIiwiUm9vdExpc3RlbmVyc1RyYWNlciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwib25TdGFydCIsIm9uRW5kIiwib25FcnJvciIsIl9hd2FpdEhhbmRsZXIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXJnT25TdGFydCIsImFyZ09uRW5kIiwiYXJnT25FcnJvciIsInBlcnNpc3RSdW4iLCJfIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvblJ1bkNyZWF0ZSIsInJ1biIsInJvb3RJZCIsImlkIiwib25SdW5VcGRhdGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/tracer_langchain.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracer: () => (/* binding */ LangChainTracer)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/index.js\");\n/* harmony import */ var langsmith_run_trees__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! langsmith/run_trees */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/run_trees.js\");\n/* harmony import */ var langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! langsmith/singletons/traceable */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/singletons/traceable.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _singletons_tracer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../singletons/tracer.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/tracer.js\");\n\n\n\n\n\nclass LangChainTracer extends _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseTracer {\n    constructor(fields = {}){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"projectName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"replicas\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"usesRunTreeMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        const { exampleId, projectName, client, replicas } = fields;\n        this.projectName = projectName ?? (0,langsmith__WEBPACK_IMPORTED_MODULE_0__.getDefaultProjectName)();\n        this.replicas = replicas;\n        this.exampleId = exampleId;\n        this.client = client ?? (0,_singletons_tracer_js__WEBPACK_IMPORTED_MODULE_4__.getDefaultLangChainClientSingleton)();\n        const traceableTree = LangChainTracer.getTraceableRunTree();\n        if (traceableTree) {\n            this.updateFromRunTree(traceableTree);\n        }\n    }\n    async persistRun(_run) {}\n    async onRunCreate(run) {\n        const runTree = this.getRunTreeWithTracingConfig(run.id);\n        await runTree?.postRun();\n    }\n    async onRunUpdate(run) {\n        const runTree = this.getRunTreeWithTracingConfig(run.id);\n        await runTree?.patchRun();\n    }\n    getRun(id) {\n        return this.runTreeMap.get(id);\n    }\n    updateFromRunTree(runTree) {\n        this.runTreeMap.set(runTree.id, runTree);\n        let rootRun = runTree;\n        const visited = new Set();\n        while(rootRun.parent_run){\n            if (visited.has(rootRun.id)) break;\n            visited.add(rootRun.id);\n            if (!rootRun.parent_run) break;\n            rootRun = rootRun.parent_run;\n        }\n        visited.clear();\n        const queue = [\n            rootRun\n        ];\n        while(queue.length > 0){\n            const current = queue.shift();\n            if (!current || visited.has(current.id)) continue;\n            visited.add(current.id);\n            this.runTreeMap.set(current.id, current);\n            if (current.child_runs) {\n                queue.push(...current.child_runs);\n            }\n        }\n        this.client = runTree.client ?? this.client;\n        this.replicas = runTree.replicas ?? this.replicas;\n        this.projectName = runTree.project_name ?? this.projectName;\n        this.exampleId = runTree.reference_example_id ?? this.exampleId;\n    }\n    getRunTreeWithTracingConfig(id) {\n        const runTree = this.runTreeMap.get(id);\n        if (!runTree) return undefined;\n        return new langsmith_run_trees__WEBPACK_IMPORTED_MODULE_1__.RunTree({\n            ...runTree,\n            client: this.client,\n            project_name: this.projectName,\n            replicas: this.replicas,\n            reference_example_id: this.exampleId,\n            tracingEnabled: true\n        });\n    }\n    static getTraceableRunTree() {\n        try {\n            return(// The type cast here provides forward compatibility. Old versions of LangSmith will just\n            // ignore the permitAbsentRunTree arg.\n            (0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_2__.getCurrentRunTree)(true));\n        } catch  {\n            return undefined;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFtRDtBQUNMO0FBQ3FCO0FBQzVCO0FBQ3NDO0FBQ3RFLE1BQU1LLHdCQUF3QkYsZ0RBQVVBO0lBQzNDRyxZQUFZQyxTQUFTLENBQUMsQ0FBQyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxrQkFBa0I7WUFDMUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxXQUFXLEVBQUVDLE1BQU0sRUFBRUMsUUFBUSxFQUFFLEdBQUdWO1FBQ3JELElBQUksQ0FBQ1EsV0FBVyxHQUFHQSxlQUFlZixnRUFBcUJBO1FBQ3ZELElBQUksQ0FBQ2lCLFFBQVEsR0FB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ZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzPzRkODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGVmYXVsdFByb2plY3ROYW1lLCB9IGZyb20gXCJsYW5nc21pdGhcIjtcbmltcG9ydCB7IFJ1blRyZWUgfSBmcm9tIFwibGFuZ3NtaXRoL3J1bl90cmVlc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFJ1blRyZWUgfSBmcm9tIFwibGFuZ3NtaXRoL3NpbmdsZXRvbnMvdHJhY2VhYmxlXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdExhbmdDaGFpbkNsaWVudFNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL3RyYWNlci5qc1wiO1xuZXhwb3J0IGNsYXNzIExhbmdDaGFpblRyYWNlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwibGFuZ2NoYWluX3RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9qZWN0TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlcGxpY2FzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInVzZXNSdW5UcmVlTWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IGV4YW1wbGVJZCwgcHJvamVjdE5hbWUsIGNsaWVudCwgcmVwbGljYXMgfSA9IGZpZWxkcztcbiAgICAgICAgdGhpcy5wcm9qZWN0TmFtZSA9IHByb2plY3ROYW1lID8/IGdldERlZmF1bHRQcm9qZWN0TmFtZSgpO1xuICAgICAgICB0aGlzLnJlcGxpY2FzID0gcmVwbGljYXM7XG4gICAgICAgIHRoaXMuZXhhbXBsZUlkID0gZXhhbXBsZUlkO1xuICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudCA/PyBnZXREZWZhdWx0TGFuZ0NoYWluQ2xpZW50U2luZ2xldG9uKCk7XG4gICAgICAgIGNvbnN0IHRyYWNlYWJsZVRyZWUgPSBMYW5nQ2hhaW5UcmFjZXIuZ2V0VHJhY2VhYmxlUnVuVHJlZSgpO1xuICAgICAgICBpZiAodHJhY2VhYmxlVHJlZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGcm9tUnVuVHJlZSh0cmFjZWFibGVUcmVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBwZXJzaXN0UnVuKF9ydW4pIHsgfVxuICAgIGFzeW5jIG9uUnVuQ3JlYXRlKHJ1bikge1xuICAgICAgICBjb25zdCBydW5UcmVlID0gdGhpcy5nZXRSdW5UcmVlV2l0aFRyYWNpbmdDb25maWcocnVuLmlkKTtcbiAgICAgICAgYXdhaXQgcnVuVHJlZT8ucG9zdFJ1bigpO1xuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgY29uc3QgcnVuVHJlZSA9IHRoaXMuZ2V0UnVuVHJlZVdpdGhUcmFjaW5nQ29uZmlnKHJ1bi5pZCk7XG4gICAgICAgIGF3YWl0IHJ1blRyZWU/LnBhdGNoUnVuKCk7XG4gICAgfVxuICAgIGdldFJ1bihpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5UcmVlTWFwLmdldChpZCk7XG4gICAgfVxuICAgIHVwZGF0ZUZyb21SdW5UcmVlKHJ1blRyZWUpIHtcbiAgICAgICAgdGhpcy5ydW5UcmVlTWFwLnNldChydW5UcmVlLmlkLCBydW5UcmVlKTtcbiAgICAgICAgbGV0IHJvb3RSdW4gPSBydW5UcmVlO1xuICAgICAgICBjb25zdCB2aXNpdGVkID0gbmV3IFNldCgpO1xuICAgICAgICB3aGlsZSAocm9vdFJ1bi5wYXJlbnRfcnVuKSB7XG4gICAgICAgICAgICBpZiAodmlzaXRlZC5oYXMocm9vdFJ1bi5pZCkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB2aXNpdGVkLmFkZChyb290UnVuLmlkKTtcbiAgICAgICAgICAgIGlmICghcm9vdFJ1bi5wYXJlbnRfcnVuKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgcm9vdFJ1biA9IHJvb3RSdW4ucGFyZW50X3J1bjtcbiAgICAgICAgfVxuICAgICAgICB2aXNpdGVkLmNsZWFyKCk7XG4gICAgICAgIGNvbnN0IHF1ZXVlID0gW3Jvb3RSdW5dO1xuICAgICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnQgfHwgdmlzaXRlZC5oYXMoY3VycmVudC5pZCkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB2aXNpdGVkLmFkZChjdXJyZW50LmlkKTtcbiAgICAgICAgICAgIHRoaXMucnVuVHJlZU1hcC5zZXQoY3VycmVudC5pZCwgY3VycmVudCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudC5jaGlsZF9ydW5zKSB7XG4gICAgICAgICAgICAgICAgcXVldWUucHVzaCguLi5jdXJyZW50LmNoaWxkX3J1bnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xpZW50ID0gcnVuVHJlZS5jbGllbnQgPz8gdGhpcy5jbGllbnQ7XG4gICAgICAgIHRoaXMucmVwbGljYXMgPSBydW5UcmVlLnJlcGxpY2FzID8/IHRoaXMucmVwbGljYXM7XG4gICAgICAgIHRoaXMucHJvamVjdE5hbWUgPSBydW5UcmVlLnByb2plY3RfbmFtZSA/PyB0aGlzLnByb2plY3ROYW1lO1xuICAgICAgICB0aGlzLmV4YW1wbGVJZCA9IHJ1blRyZWUucmVmZXJlbmNlX2V4YW1wbGVfaWQgPz8gdGhpcy5leGFtcGxlSWQ7XG4gICAgfVxuICAgIGdldFJ1blRyZWVXaXRoVHJhY2luZ0NvbmZpZyhpZCkge1xuICAgICAgICBjb25zdCBydW5UcmVlID0gdGhpcy5ydW5UcmVlTWFwLmdldChpZCk7XG4gICAgICAgIGlmICghcnVuVHJlZSlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBuZXcgUnVuVHJlZSh7XG4gICAgICAgICAgICAuLi5ydW5UcmVlLFxuICAgICAgICAgICAgY2xpZW50OiB0aGlzLmNsaWVudCxcbiAgICAgICAgICAgIHByb2plY3RfbmFtZTogdGhpcy5wcm9qZWN0TmFtZSxcbiAgICAgICAgICAgIHJlcGxpY2FzOiB0aGlzLnJlcGxpY2FzLFxuICAgICAgICAgICAgcmVmZXJlbmNlX2V4YW1wbGVfaWQ6IHRoaXMuZXhhbXBsZUlkLFxuICAgICAgICAgICAgdHJhY2luZ0VuYWJsZWQ6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0VHJhY2VhYmxlUnVuVHJlZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAvLyBUaGUgdHlwZSBjYXN0IGhlcmUgcHJvdmlkZXMgZm9yd2FyZCBjb21wYXRpYmlsaXR5LiBPbGQgdmVyc2lvbnMgb2YgTGFuZ1NtaXRoIHdpbGwganVzdFxuICAgICAgICAgICAgLy8gaWdub3JlIHRoZSBwZXJtaXRBYnNlbnRSdW5UcmVlIGFyZy5cbiAgICAgICAgICAgIGdldEN1cnJlbnRSdW5UcmVlKHRydWUpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImdldERlZmF1bHRQcm9qZWN0TmFtZSIsIlJ1blRyZWUiLCJnZXRDdXJyZW50UnVuVHJlZSIsIkJhc2VUcmFjZXIiLCJnZXREZWZhdWx0TGFuZ0NoYWluQ2xpZW50U2luZ2xldG9uIiwiTGFuZ0NoYWluVHJhY2VyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZXhhbXBsZUlkIiwicHJvamVjdE5hbWUiLCJjbGllbnQiLCJyZXBsaWNhcyIsInRyYWNlYWJsZVRyZWUiLCJnZXRUcmFjZWFibGVSdW5UcmVlIiwidXBkYXRlRnJvbVJ1blRyZWUiLCJwZXJzaXN0UnVuIiwiX3J1biIsIm9uUnVuQ3JlYXRlIiwicnVuIiwicnVuVHJlZSIsImdldFJ1blRyZWVXaXRoVHJhY2luZ0NvbmZpZyIsImlkIiwicG9zdFJ1biIsIm9uUnVuVXBkYXRlIiwicGF0Y2hSdW4iLCJnZXRSdW4iLCJydW5UcmVlTWFwIiwiZ2V0Iiwic2V0Iiwicm9vdFJ1biIsInZpc2l0ZWQiLCJTZXQiLCJwYXJlbnRfcnVuIiwiaGFzIiwiYWRkIiwiY2xlYXIiLCJxdWV1ZSIsImxlbmd0aCIsImN1cnJlbnQiLCJzaGlmdCIsImNoaWxkX3J1bnMiLCJwdXNoIiwicHJvamVjdF9uYW1lIiwicmVmZXJlbmNlX2V4YW1wbGVfaWQiLCJ1bmRlZmluZWQiLCJ0cmFjaW5nRW5hYmxlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/async_caller.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\n\nconst STATUS_NO_RETRY = [\n    400,\n    401,\n    402,\n    403,\n    404,\n    405,\n    406,\n    407,\n    409\n];\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst defaultFailedAttemptHandler = (error)=>{\n    if (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"AbortError\") || error.name === \"AbortError\") {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.code === \"ECONNABORTED\") {\n        throw error;\n    }\n    const status = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error?.response?.status ?? error?.status;\n    if (status && STATUS_NO_RETRY.includes(+status)) {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.error?.code === \"insufficient_quota\") {\n        const err = new Error(error?.message);\n        err.name = \"InsufficientQuotaError\";\n        throw err;\n    }\n};\n/**\n * A class that can be used to make async calls with concurrency and retry logic.\n *\n * This is useful for making calls to any kind of \"expensive\" external resource,\n * be it because it's rate-limited, subject to network issues, etc.\n *\n * Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n * to `Infinity`. This means that by default, all calls will be made in parallel.\n *\n * Retries are limited by the `maxRetries` parameter, which defaults to 6. This\n * means that by default, each call will be retried up to 6 times, with an\n * exponential backoff between each attempt.\n */ class AsyncCaller {\n    constructor(params){\n        Object.defineProperty(this, \"maxConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxRetries\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxConcurrency = params.maxConcurrency ?? Infinity;\n        this.maxRetries = params.maxRetries ?? 6;\n        this.onFailedAttempt = params.onFailedAttempt ?? defaultFailedAttemptHandler;\n        const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_1__;\n        this.queue = new PQueue({\n            concurrency: this.maxConcurrency\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    call(callable, ...args) {\n        return this.queue.add(()=>p_retry__WEBPACK_IMPORTED_MODULE_0__(()=>callable(...args).catch((error)=>{\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (error instanceof Error) {\n                        throw error;\n                    } else {\n                        throw new Error(error);\n                    }\n                }), {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: this.maxRetries,\n                randomize: true\n            }), {\n            throwOnTimeout: true\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callWithOptions(options, callable, ...args) {\n        // Note this doesn't cancel the underlying request,\n        // when available prefer to use the signal option of the underlying call\n        if (options.signal) {\n            return Promise.race([\n                this.call(callable, ...args),\n                new Promise((_, reject)=>{\n                    options.signal?.addEventListener(\"abort\", ()=>{\n                        reject(new Error(\"AbortError\"));\n                    });\n                })\n            ]);\n        }\n        return this.call(callable, ...args);\n    }\n    fetch(...args) {\n        return this.call(()=>fetch(...args).then((res)=>res.ok ? res : Promise.reject(res)));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvYXN5bmNfY2FsbGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QjtBQUNHO0FBQ2hDLE1BQU1FLGtCQUFrQjtJQUNwQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDSDtBQUNELDhEQUE4RDtBQUM5RCxNQUFNQyw4QkFBOEIsQ0FBQ0M7SUFDakMsSUFBSUEsTUFBTUMsT0FBTyxDQUFDQyxVQUFVLENBQUMsYUFDekJGLE1BQU1DLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDLGlCQUN6QkYsTUFBTUcsSUFBSSxLQUFLLGNBQWM7UUFDN0IsTUFBTUg7SUFDVjtJQUNBLDhEQUE4RDtJQUM5RCxJQUFJQSxPQUFPSSxTQUFTLGdCQUFnQjtRQUNoQyxNQUFNSjtJQUNWO0lBQ0EsTUFBTUssU0FDTiw4REFBOEQ7SUFDOURMLE9BQU9NLFVBQVVELFVBQVVMLE9BQU9LO0lBQ2xDLElBQUlBLFVBQVVQLGdCQUFnQlMsUUFBUSxDQUFDLENBQUNGLFNBQVM7UUFDN0MsTUFBTUw7SUFDVjtJQUNBLDhEQUE4RDtJQUM5RCxJQUFJQSxPQUFPQSxPQUFPSSxTQUFTLHNCQUFzQjtRQUM3QyxNQUFNSSxNQUFNLElBQUlDLE1BQU1ULE9BQU9DO1FBQzdCTyxJQUFJTCxJQUFJLEdBQUc7UUFDWCxNQUFNSztJQUNWO0FBQ0o7QUFDQTs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxNQUFNRTtJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsY0FBYyxHQUFHUCxPQUFPTyxjQUFjLElBQUlDO1FBQy9DLElBQUksQ0FBQ0MsVUFBVSxHQUFHVCxPQUFPUyxVQUFVLElBQUk7UUFDdkMsSUFBSSxDQUFDQyxlQUFlLEdBQ2hCVixPQUFPVSxlQUFlLElBQUl2QjtRQUM5QixNQUFNd0IsU0FBVSxLQUFzQjFCLEdBQUdBLCtDQUFpQixHQUFHQSxvQ0FBU0E7UUFDdEUsSUFBSSxDQUFDNEIsS0FBSyxHQUFHLElBQUlGLE9BQU87WUFBRUcsYUFBYSxJQUFJLENBQUNQLGNBQWM7UUFBQztJQUMvRDtJQUNBLDhEQUE4RDtJQUM5RFEsS0FBS0MsUUFBUSxFQUFFLEdBQUdDLElBQUksRUFBRTtRQUNwQixPQUFPLElBQUksQ0FBQ0osS0FBSyxDQUFDSyxHQUFHLENBQUMsSUFBTWxDLG9DQUFNQSxDQUFDLElBQU1nQyxZQUFZQyxNQUFNRSxLQUFLLENBQUMsQ0FBQy9CO29CQUM5RCx1REFBdUQ7b0JBQ3ZELElBQUlBLGlCQUFpQlMsT0FBTzt3QkFDeEIsTUFBTVQ7b0JBQ1YsT0FDSzt3QkFDRCxNQUFNLElBQUlTLE1BQU1UO29CQUNwQjtnQkFDSixJQUFJO2dCQUNBc0IsaUJBQWlCLElBQUksQ0FBQ0EsZUFBZTtnQkFDckNVLFNBQVMsSUFBSSxDQUFDWCxVQUFVO2dCQUN4QlksV0FBVztZQUdmLElBQUk7WUFBRUMsZ0JBQWdCO1FBQUs7SUFDL0I7SUFDQSw4REFBOEQ7SUFDOURDLGdCQUFnQkMsT0FBTyxFQUFFUixRQUFRLEVBQUUsR0FBR0MsSUFBSSxFQUFFO1FBQ3hDLG1EQUFtRDtRQUNuRCx3RUFBd0U7UUFDeEUsSUFBSU8sUUFBUUMsTUFBTSxFQUFFO1lBQ2hCLE9BQU9DLFFBQVFDLElBQUksQ0FBQztnQkFDaEIsSUFBSSxDQUFDWixJQUFJLENBQUNDLGFBQWFDO2dCQUN2QixJQUFJUyxRQUFRLENBQUNFLEdBQUdDO29CQUNaTCxRQUFRQyxNQUFNLEVBQUVLLGlCQUFpQixTQUFTO3dCQUN0Q0QsT0FBTyxJQUFJaEMsTUFBTTtvQkFDckI7Z0JBQ0o7YUFDSDtRQUNMO1FBQ0EsT0FBTyxJQUFJLENBQUNrQixJQUFJLENBQUNDLGFBQWFDO0lBQ2xDO0lBQ0FjLE1BQU0sR0FBR2QsSUFBSSxFQUFFO1FBQ1gsT0FBTyxJQUFJLENBQUNGLElBQUksQ0FBQyxJQUFNZ0IsU0FBU2QsTUFBTWUsSUFBSSxDQUFDLENBQUNDLE1BQVNBLElBQUlDLEVBQUUsR0FBR0QsTUFBTVAsUUFBUUcsTUFBTSxDQUFDSTtJQUN2RjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9hc3luY19jYWxsZXIuanM/MTRjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcFJldHJ5IGZyb20gXCJwLXJldHJ5XCI7XG5pbXBvcnQgUFF1ZXVlTW9kIGZyb20gXCJwLXF1ZXVlXCI7XG5jb25zdCBTVEFUVVNfTk9fUkVUUlkgPSBbXG4gICAgNDAwLCAvLyBCYWQgUmVxdWVzdFxuICAgIDQwMSwgLy8gVW5hdXRob3JpemVkXG4gICAgNDAyLCAvLyBQYXltZW50IFJlcXVpcmVkXG4gICAgNDAzLCAvLyBGb3JiaWRkZW5cbiAgICA0MDQsIC8vIE5vdCBGb3VuZFxuICAgIDQwNSwgLy8gTWV0aG9kIE5vdCBBbGxvd2VkXG4gICAgNDA2LCAvLyBOb3QgQWNjZXB0YWJsZVxuICAgIDQwNywgLy8gUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWRcbiAgICA0MDksIC8vIENvbmZsaWN0XG5dO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmNvbnN0IGRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlciA9IChlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJDYW5jZWxcIikgfHxcbiAgICAgICAgZXJyb3IubWVzc2FnZS5zdGFydHNXaXRoKFwiQWJvcnRFcnJvclwiKSB8fFxuICAgICAgICBlcnJvci5uYW1lID09PSBcIkFib3J0RXJyb3JcIikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpZiAoZXJyb3I/LmNvZGUgPT09IFwiRUNPTk5BQk9SVEVEXCIpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGNvbnN0IHN0YXR1cyA9IFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZXJyb3I/LnJlc3BvbnNlPy5zdGF0dXMgPz8gZXJyb3I/LnN0YXR1cztcbiAgICBpZiAoc3RhdHVzICYmIFNUQVRVU19OT19SRVRSWS5pbmNsdWRlcygrc3RhdHVzKSkge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpZiAoZXJyb3I/LmVycm9yPy5jb2RlID09PSBcImluc3VmZmljaWVudF9xdW90YVwiKSB7XG4gICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihlcnJvcj8ubWVzc2FnZSk7XG4gICAgICAgIGVyci5uYW1lID0gXCJJbnN1ZmZpY2llbnRRdW90YUVycm9yXCI7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG59O1xuLyoqXG4gKiBBIGNsYXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gbWFrZSBhc3luYyBjYWxscyB3aXRoIGNvbmN1cnJlbmN5IGFuZCByZXRyeSBsb2dpYy5cbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgbWFraW5nIGNhbGxzIHRvIGFueSBraW5kIG9mIFwiZXhwZW5zaXZlXCIgZXh0ZXJuYWwgcmVzb3VyY2UsXG4gKiBiZSBpdCBiZWNhdXNlIGl0J3MgcmF0ZS1saW1pdGVkLCBzdWJqZWN0IHRvIG5ldHdvcmsgaXNzdWVzLCBldGMuXG4gKlxuICogQ29uY3VycmVudCBjYWxscyBhcmUgbGltaXRlZCBieSB0aGUgYG1heENvbmN1cnJlbmN5YCBwYXJhbWV0ZXIsIHdoaWNoIGRlZmF1bHRzXG4gKiB0byBgSW5maW5pdHlgLiBUaGlzIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgYWxsIGNhbGxzIHdpbGwgYmUgbWFkZSBpbiBwYXJhbGxlbC5cbiAqXG4gKiBSZXRyaWVzIGFyZSBsaW1pdGVkIGJ5IHRoZSBgbWF4UmV0cmllc2AgcGFyYW1ldGVyLCB3aGljaCBkZWZhdWx0cyB0byA2LiBUaGlzXG4gKiBtZWFucyB0aGF0IGJ5IGRlZmF1bHQsIGVhY2ggY2FsbCB3aWxsIGJlIHJldHJpZWQgdXAgdG8gNiB0aW1lcywgd2l0aCBhblxuICogZXhwb25lbnRpYWwgYmFja29mZiBiZXR3ZWVuIGVhY2ggYXR0ZW1wdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEFzeW5jQ2FsbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4Q29uY3VycmVuY3lcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4UmV0cmllc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbkZhaWxlZEF0dGVtcHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicXVldWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXhDb25jdXJyZW5jeSA9IHBhcmFtcy5tYXhDb25jdXJyZW5jeSA/PyBJbmZpbml0eTtcbiAgICAgICAgdGhpcy5tYXhSZXRyaWVzID0gcGFyYW1zLm1heFJldHJpZXMgPz8gNjtcbiAgICAgICAgdGhpcy5vbkZhaWxlZEF0dGVtcHQgPVxuICAgICAgICAgICAgcGFyYW1zLm9uRmFpbGVkQXR0ZW1wdCA/PyBkZWZhdWx0RmFpbGVkQXR0ZW1wdEhhbmRsZXI7XG4gICAgICAgIGNvbnN0IFBRdWV1ZSA9IChcImRlZmF1bHRcIiBpbiBQUXVldWVNb2QgPyBQUXVldWVNb2QuZGVmYXVsdCA6IFBRdWV1ZU1vZCk7XG4gICAgICAgIHRoaXMucXVldWUgPSBuZXcgUFF1ZXVlKHsgY29uY3VycmVuY3k6IHRoaXMubWF4Q29uY3VycmVuY3kgfSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY2FsbChjYWxsYWJsZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5hZGQoKCkgPT4gcFJldHJ5KCgpID0+IGNhbGxhYmxlKC4uLmFyZ3MpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCB7XG4gICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IHRoaXMub25GYWlsZWRBdHRlbXB0LFxuICAgICAgICAgICAgcmV0cmllczogdGhpcy5tYXhSZXRyaWVzLFxuICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICAgICAgLy8gSWYgbmVlZGVkIHdlIGNhbiBjaGFuZ2Ugc29tZSBvZiB0aGUgZGVmYXVsdHMgaGVyZSxcbiAgICAgICAgICAgIC8vIGJ1dCB0aGV5J3JlIHF1aXRlIHNlbnNpYmxlLlxuICAgICAgICB9KSwgeyB0aHJvd09uVGltZW91dDogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjYWxsV2l0aE9wdGlvbnMob3B0aW9ucywgY2FsbGFibGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gTm90ZSB0aGlzIGRvZXNuJ3QgY2FuY2VsIHRoZSB1bmRlcmx5aW5nIHJlcXVlc3QsXG4gICAgICAgIC8vIHdoZW4gYXZhaWxhYmxlIHByZWZlciB0byB1c2UgdGhlIHNpZ25hbCBvcHRpb24gb2YgdGhlIHVuZGVybHlpbmcgY2FsbFxuICAgICAgICBpZiAob3B0aW9ucy5zaWduYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsbChjYWxsYWJsZSwgLi4uYXJncyksXG4gICAgICAgICAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNpZ25hbD8uYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJBYm9ydEVycm9yXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKGNhbGxhYmxlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgZmV0Y2goLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKCgpID0+IGZldGNoKC4uLmFyZ3MpLnRoZW4oKHJlcykgPT4gKHJlcy5vayA/IHJlcyA6IFByb21pc2UucmVqZWN0KHJlcykpKSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInBSZXRyeSIsIlBRdWV1ZU1vZCIsIlNUQVRVU19OT19SRVRSWSIsImRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlciIsImVycm9yIiwibWVzc2FnZSIsInN0YXJ0c1dpdGgiLCJuYW1lIiwiY29kZSIsInN0YXR1cyIsInJlc3BvbnNlIiwiaW5jbHVkZXMiLCJlcnIiLCJFcnJvciIsIkFzeW5jQ2FsbGVyIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibWF4Q29uY3VycmVuY3kiLCJJbmZpbml0eSIsIm1heFJldHJpZXMiLCJvbkZhaWxlZEF0dGVtcHQiLCJQUXVldWUiLCJkZWZhdWx0IiwicXVldWUiLCJjb25jdXJyZW5jeSIsImNhbGwiLCJjYWxsYWJsZSIsImFyZ3MiLCJhZGQiLCJjYXRjaCIsInJldHJpZXMiLCJyYW5kb21pemUiLCJ0aHJvd09uVGltZW91dCIsImNhbGxXaXRoT3B0aW9ucyIsIm9wdGlvbnMiLCJzaWduYWwiLCJQcm9taXNlIiwicmFjZSIsIl8iLCJyZWplY3QiLCJhZGRFdmVudExpc3RlbmVyIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/callbacks.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/callbacks.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isTracingEnabled: () => (/* binding */ isTracingEnabled)\n/* harmony export */ });\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\nconst isTracingEnabled = (tracingEnabled)=>{\n    if (tracingEnabled !== undefined) {\n        return tracingEnabled;\n    }\n    const envVars = [\n        \"LANGSMITH_TRACING_V2\",\n        \"LANGCHAIN_TRACING_V2\",\n        \"LANGSMITH_TRACING\",\n        \"LANGCHAIN_TRACING\"\n    ];\n    return !!envVars.find((envVar)=>(0,_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(envVar) === \"true\");\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY2FsbGJhY2tzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEO0FBQzNDLE1BQU1DLG1CQUFtQixDQUFDQztJQUM3QixJQUFJQSxtQkFBbUJDLFdBQVc7UUFDOUIsT0FBT0Q7SUFDWDtJQUNBLE1BQU1FLFVBQVU7UUFDWjtRQUNBO1FBQ0E7UUFDQTtLQUNIO0lBQ0QsT0FBTyxDQUFDLENBQUNBLFFBQVFDLElBQUksQ0FBQyxDQUFDQyxTQUFXTiwrREFBc0JBLENBQUNNLFlBQVk7QUFDekUsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY2FsbGJhY2tzLmpzP2M3MzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuL2Vudi5qc1wiO1xuZXhwb3J0IGNvbnN0IGlzVHJhY2luZ0VuYWJsZWQgPSAodHJhY2luZ0VuYWJsZWQpID0+IHtcbiAgICBpZiAodHJhY2luZ0VuYWJsZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdHJhY2luZ0VuYWJsZWQ7XG4gICAgfVxuICAgIGNvbnN0IGVudlZhcnMgPSBbXG4gICAgICAgIFwiTEFOR1NNSVRIX1RSQUNJTkdfVjJcIixcbiAgICAgICAgXCJMQU5HQ0hBSU5fVFJBQ0lOR19WMlwiLFxuICAgICAgICBcIkxBTkdTTUlUSF9UUkFDSU5HXCIsXG4gICAgICAgIFwiTEFOR0NIQUlOX1RSQUNJTkdcIixcbiAgICBdO1xuICAgIHJldHVybiAhIWVudlZhcnMuZmluZCgoZW52VmFyKSA9PiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKGVudlZhcikgPT09IFwidHJ1ZVwiKTtcbn07XG4iXSwibmFtZXMiOlsiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsImlzVHJhY2luZ0VuYWJsZWQiLCJ0cmFjaW5nRW5hYmxlZCIsInVuZGVmaW5lZCIsImVudlZhcnMiLCJmaW5kIiwiZW52VmFyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/callbacks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/env.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/env.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* binding */ getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* binding */ getRuntimeEnvironment),\n/* harmony export */   getRuntimeEnvironmentSync: () => (/* binding */ getRuntimeEnvironmentSync),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isDeno: () => (/* binding */ isDeno),\n/* harmony export */   isJsDom: () => (/* binding */ isJsDom),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isWebWorker: () => (/* binding */ isWebWorker)\n/* harmony export */ });\nconst isBrowser = ()=> false && 0;\nconst isWebWorker = ()=>typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = ()=> false || typeof navigator !== \"undefined\" && navigator.userAgent.includes(\"jsdom\");\n// Supabase Edge Function provides a `Deno` global object\n// without `version` property\nconst isDeno = ()=>typeof Deno !== \"undefined\";\n// Mark not-as-node if in Supabase Edge Function\nconst isNode = ()=>typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = ()=>{\n    let env;\n    if (isBrowser()) {\n        env = \"browser\";\n    } else if (isNode()) {\n        env = \"node\";\n    } else if (isWebWorker()) {\n        env = \"webworker\";\n    } else if (isJsDom()) {\n        env = \"jsdom\";\n    } else if (isDeno()) {\n        env = \"deno\";\n    } else {\n        env = \"other\";\n    }\n    return env;\n};\nlet runtimeEnvironment;\n/**\n * @deprecated Use getRuntimeEnvironmentSync instead\n */ async function getRuntimeEnvironment() {\n    return getRuntimeEnvironmentSync();\n}\nfunction getRuntimeEnvironmentSync() {\n    if (runtimeEnvironment === undefined) {\n        const env = getEnv();\n        runtimeEnvironment = {\n            library: \"langchain-js\",\n            runtime: env\n        };\n    }\n    return runtimeEnvironment;\n}\nfunction getEnvironmentVariable(name) {\n    // Certain Deno setups will throw an error if you try to access environment variables\n    // https://github.com/langchain-ai/langchainjs/issues/1412\n    try {\n        if (typeof process !== \"undefined\") {\n            // eslint-disable-next-line no-process-env\n            return process.env?.[name];\n        } else if (isDeno()) {\n            return Deno?.env.get(name);\n        } else {\n            return undefined;\n        }\n    } catch (e) {\n        return undefined;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFPLE1BQU1BLFlBQVksSUFBTSxNQUE2QixJQUFJLENBQXNDLENBQUM7QUFDaEcsTUFBTUcsY0FBYyxJQUFNLE9BQU9DLGVBQWUsWUFDbkRBLFdBQVdDLFdBQVcsSUFDdEJELFdBQVdDLFdBQVcsQ0FBQ0MsSUFBSSxLQUFLLDZCQUE2QjtBQUMxRCxNQUFNQyxVQUFVLElBQU0sTUFBMEQsSUFDbEYsT0FBT0MsY0FBYyxlQUFlQSxVQUFVQyxTQUFTLENBQUNDLFFBQVEsQ0FBQyxTQUFVO0FBQ2hGLHlEQUF5RDtBQUN6RCw2QkFBNkI7QUFDdEIsTUFBTUMsU0FBUyxJQUFNLE9BQU9DLFNBQVMsWUFBWTtBQUN4RCxnREFBZ0Q7QUFDekMsTUFBTUMsU0FBUyxJQUFNLE9BQU9DLFlBQVksZUFDM0MsT0FBT0EsUUFBUUMsUUFBUSxLQUFLLGVBQzVCLE9BQU9ELFFBQVFDLFFBQVEsQ0FBQ0MsSUFBSSxLQUFLLGVBQ2pDLENBQUNMLFNBQVM7QUFDUCxNQUFNTSxTQUFTO0lBQ2xCLElBQUlDO0lBQ0osSUFBSWxCLGFBQWE7UUFDYmtCLE1BQU07SUFDVixPQUNLLElBQUlMLFVBQVU7UUFDZkssTUFBTTtJQUNWLE9BQ0ssSUFBSWYsZUFBZTtRQUNwQmUsTUFBTTtJQUNWLE9BQ0ssSUFBSVgsV0FBVztRQUNoQlcsTUFBTTtJQUNWLE9BQ0ssSUFBSVAsVUFBVTtRQUNmTyxNQUFNO0lBQ1YsT0FDSztRQUNEQSxNQUFNO0lBQ1Y7SUFDQSxPQUFPQTtBQUNYLEVBQUU7QUFDRixJQUFJQztBQUNKOztDQUVDLEdBQ00sZUFBZUM7SUFDbEIsT0FBT0M7QUFDWDtBQUNPLFNBQVNBO0lBQ1osSUFBSUYsdUJBQXVCRyxXQUFXO1FBQ2xDLE1BQU1KLE1BQU1EO1FBQ1pFLHFCQUFxQjtZQUNqQkksU0FBUztZQUNUQyxTQUFTTjtRQUNiO0lBQ0o7SUFDQSxPQUFPQztBQUNYO0FBQ08sU0FBU00sdUJBQXVCbkIsSUFBSTtJQUN2QyxxRkFBcUY7SUFDckYsMERBQTBEO0lBQzFELElBQUk7UUFDQSxJQUFJLE9BQU9RLFlBQVksYUFBYTtZQUNoQywwQ0FBMEM7WUFDMUMsT0FBT0EsUUFBUUksR0FBRyxFQUFFLENBQUNaLEtBQUs7UUFDOUIsT0FDSyxJQUFJSyxVQUFVO1lBQ2YsT0FBT0MsTUFBTU0sSUFBSVEsSUFBSXBCO1FBQ3pCLE9BQ0s7WUFDRCxPQUFPZ0I7UUFDWDtJQUNKLEVBQ0EsT0FBT0ssR0FBRztRQUNOLE9BQU9MO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzPzQyZmQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGlzQnJvd3NlciA9ICgpID0+IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbmV4cG9ydCBjb25zdCBpc1dlYldvcmtlciA9ICgpID0+IHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiICYmXG4gICAgZ2xvYmFsVGhpcy5jb25zdHJ1Y3RvciAmJlxuICAgIGdsb2JhbFRoaXMuY29uc3RydWN0b3IubmFtZSA9PT0gXCJEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZVwiO1xuZXhwb3J0IGNvbnN0IGlzSnNEb20gPSAoKSA9PiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubmFtZSA9PT0gXCJub2RlanNcIikgfHxcbiAgICAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwianNkb21cIikpO1xuLy8gU3VwYWJhc2UgRWRnZSBGdW5jdGlvbiBwcm92aWRlcyBhIGBEZW5vYCBnbG9iYWwgb2JqZWN0XG4vLyB3aXRob3V0IGB2ZXJzaW9uYCBwcm9wZXJ0eVxuZXhwb3J0IGNvbnN0IGlzRGVubyA9ICgpID0+IHR5cGVvZiBEZW5vICE9PSBcInVuZGVmaW5lZFwiO1xuLy8gTWFyayBub3QtYXMtbm9kZSBpZiBpbiBTdXBhYmFzZSBFZGdlIEZ1bmN0aW9uXG5leHBvcnQgY29uc3QgaXNOb2RlID0gKCkgPT4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAhaXNEZW5vKCk7XG5leHBvcnQgY29uc3QgZ2V0RW52ID0gKCkgPT4ge1xuICAgIGxldCBlbnY7XG4gICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICAgIGVudiA9IFwiYnJvd3NlclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc05vZGUoKSkge1xuICAgICAgICBlbnYgPSBcIm5vZGVcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNXZWJXb3JrZXIoKSkge1xuICAgICAgICBlbnYgPSBcIndlYndvcmtlclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0pzRG9tKCkpIHtcbiAgICAgICAgZW52ID0gXCJqc2RvbVwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Rlbm8oKSkge1xuICAgICAgICBlbnYgPSBcImRlbm9cIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVudiA9IFwib3RoZXJcIjtcbiAgICB9XG4gICAgcmV0dXJuIGVudjtcbn07XG5sZXQgcnVudGltZUVudmlyb25tZW50O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgZ2V0UnVudGltZUVudmlyb25tZW50U3luYyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSdW50aW1lRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIGdldFJ1bnRpbWVFbnZpcm9ubWVudFN5bmMoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRSdW50aW1lRW52aXJvbm1lbnRTeW5jKCkge1xuICAgIGlmIChydW50aW1lRW52aXJvbm1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBlbnYgPSBnZXRFbnYoKTtcbiAgICAgICAgcnVudGltZUVudmlyb25tZW50ID0ge1xuICAgICAgICAgICAgbGlicmFyeTogXCJsYW5nY2hhaW4tanNcIixcbiAgICAgICAgICAgIHJ1bnRpbWU6IGVudixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bnRpbWVFbnZpcm9ubWVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKG5hbWUpIHtcbiAgICAvLyBDZXJ0YWluIERlbm8gc2V0dXBzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgeW91IHRyeSB0byBhY2Nlc3MgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2xhbmdjaGFpbi1haS9sYW5nY2hhaW5qcy9pc3N1ZXMvMTQxMlxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZW52XG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzcy5lbnY/LltuYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0Rlbm8oKSkge1xuICAgICAgICAgICAgcmV0dXJuIERlbm8/LmVudi5nZXQobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImlzQnJvd3NlciIsIndpbmRvdyIsImRvY3VtZW50IiwiaXNXZWJXb3JrZXIiLCJnbG9iYWxUaGlzIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaXNKc0RvbSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluY2x1ZGVzIiwiaXNEZW5vIiwiRGVubyIsImlzTm9kZSIsInByb2Nlc3MiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJnZXRFbnYiLCJlbnYiLCJydW50aW1lRW52aXJvbm1lbnQiLCJnZXRSdW50aW1lRW52aXJvbm1lbnQiLCJnZXRSdW50aW1lRW52aXJvbm1lbnRTeW5jIiwidW5kZWZpbmVkIiwibGlicmFyeSIsInJ1bnRpbWUiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiZ2V0IiwiZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError),\n/* harmony export */   _areEquals: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__._areEquals),\n/* harmony export */   applyOperation: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyOperation),\n/* harmony export */   applyPatch: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   applyReducer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyReducer),\n/* harmony export */   compare: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.compare),\n/* harmony export */   deepClone: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   escapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent),\n/* harmony export */   generate: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.generate),\n/* harmony export */   getValueByPointer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.getValueByPointer),\n/* harmony export */   observe: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.observe),\n/* harmony export */   unescapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent),\n/* harmony export */   unobserve: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.unobserve),\n/* harmony export */   validate: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validate),\n/* harmony export */   validator: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validator)\n/* harmony export */ });\n/* harmony import */ var _src_core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/core.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/duplex.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n\n\n\n/**\n * Default export for backwards compat\n */ \n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    ..._src_core_js__WEBPACK_IMPORTED_MODULE_0__,\n    // ...duplex,\n    JsonPatchError: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError,\n    deepClone: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone,\n    escapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent,\n    unescapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEI7QUFDRTtBQUNzRztBQUN0STs7Q0FFQyxHQUNxQztBQUNnRztBQUN0SSxpRUFBZTtJQUNYLEdBQUdNLHlDQUFJO0lBQ1AsYUFBYTtJQUNiTCxjQUFjQSx5REFBQUE7SUFDZEUsU0FBU0EseURBQUFBO0lBQ1RDLG1CQUFtQkEsa0VBQUFBO0lBQ25CQyxxQkFBcUJBLG9FQUFBQTtBQUN6QixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9pbmRleC5qcz80YzkzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL3NyYy9jb3JlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zcmMvZHVwbGV4LmpzXCI7XG5leHBvcnQgeyBQYXRjaEVycm9yIGFzIEpzb25QYXRjaEVycm9yLCBfZGVlcENsb25lIGFzIGRlZXBDbG9uZSwgZXNjYXBlUGF0aENvbXBvbmVudCwgdW5lc2NhcGVQYXRoQ29tcG9uZW50LCB9IGZyb20gXCIuL3NyYy9oZWxwZXJzLmpzXCI7XG4vKipcbiAqIERlZmF1bHQgZXhwb3J0IGZvciBiYWNrd2FyZHMgY29tcGF0XG4gKi9cbmltcG9ydCAqIGFzIGNvcmUgZnJvbSBcIi4vc3JjL2NvcmUuanNcIjtcbmltcG9ydCB7IFBhdGNoRXJyb3IgYXMgSnNvblBhdGNoRXJyb3IsIF9kZWVwQ2xvbmUgYXMgZGVlcENsb25lLCBlc2NhcGVQYXRoQ29tcG9uZW50LCB1bmVzY2FwZVBhdGhDb21wb25lbnQsIH0gZnJvbSBcIi4vc3JjL2hlbHBlcnMuanNcIjtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAuLi5jb3JlLFxuICAgIC8vIC4uLmR1cGxleCxcbiAgICBKc29uUGF0Y2hFcnJvcixcbiAgICBkZWVwQ2xvbmUsXG4gICAgZXNjYXBlUGF0aENvbXBvbmVudCxcbiAgICB1bmVzY2FwZVBhdGhDb21wb25lbnQsXG59O1xuIl0sIm5hbWVzIjpbIlBhdGNoRXJyb3IiLCJKc29uUGF0Y2hFcnJvciIsIl9kZWVwQ2xvbmUiLCJkZWVwQ2xvbmUiLCJlc2NhcGVQYXRoQ29tcG9uZW50IiwidW5lc2NhcGVQYXRoQ29tcG9uZW50IiwiY29yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* binding */ JsonPatchError),\n/* harmony export */   _areEquals: () => (/* binding */ _areEquals),\n/* harmony export */   applyOperation: () => (/* binding */ applyOperation),\n/* harmony export */   applyPatch: () => (/* binding */ applyPatch),\n/* harmony export */   applyReducer: () => (/* binding */ applyReducer),\n/* harmony export */   deepClone: () => (/* binding */ deepClone),\n/* harmony export */   getValueByPointer: () => (/* binding */ getValueByPointer),\n/* harmony export */   validate: () => (/* binding */ validate),\n/* harmony export */   validator: () => (/* binding */ validator)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n// @ts-nocheck\n\nconst JsonPatchError = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.PatchError;\nconst deepClone = _helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */ /* The operations applicable to an object */ const objOps = {\n    add: function(obj, key, document) {\n        obj[key] = this.value;\n        return {\n            newDocument: document\n        };\n    },\n    remove: function(obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    replace: function(obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: function(obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */ let removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(removed);\n        }\n        const originalValue = applyOperation(document, {\n            op: \"remove\",\n            path: this.from\n        }).removed;\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: originalValue\n        });\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    copy: function(obj, key, document) {\n        const valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(valueToCopy)\n        });\n        return {\n            newDocument: document\n        };\n    },\n    test: function(obj, key, document) {\n        return {\n            newDocument: document,\n            test: _areEquals(obj[key], this.value)\n        };\n    },\n    _get: function(obj, key, document) {\n        this.value = obj[key];\n        return {\n            newDocument: document\n        };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */ var arrOps = {\n    add: function(arr, i, document) {\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(i)) {\n            arr.splice(i, 0, this.value);\n        } else {\n            // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return {\n            newDocument: document,\n            index: i\n        };\n    },\n    remove: function(arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return {\n            newDocument: document,\n            removed: removedList[0]\n        };\n    },\n    replace: function(arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */ function getValueByPointer(document, pointer) {\n    if (pointer == \"\") {\n        return document;\n    }\n    var getOriginalDestination = {\n        op: \"_get\",\n        path: pointer\n    };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */ function applyOperation(document, operation, validateOperation = false, mutateDocument = true, banPrototypeModifications = true, index = 0) {\n    if (validateOperation) {\n        if (typeof validateOperation == \"function\") {\n            validateOperation(operation, 0, document, operation.path);\n        } else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */ if (operation.path === \"\") {\n        let returnValue = {\n            newDocument: document\n        };\n        if (operation.op === \"add\") {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        } else if (operation.op === \"replace\") {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === \"move\") {\n                // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        } else if (operation.op === \"test\") {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        } else if (operation.op === \"remove\") {\n            // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        } else if (operation.op === \"_get\") {\n            operation.value = document;\n            return returnValue;\n        } else {\n            /* bad operation */ if (validateOperation) {\n                throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n            } else {\n                return returnValue;\n            }\n        }\n    } else {\n        if (!mutateDocument) {\n            document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n        }\n        const path = operation.path || \"\";\n        const keys = path.split(\"/\");\n        let obj = document;\n        let t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        let len = keys.length;\n        let existingPathFragment = undefined;\n        let key;\n        let validateFunction;\n        if (typeof validateOperation == \"function\") {\n            validateFunction = validateOperation;\n        } else {\n            validateFunction = validator;\n        }\n        while(true){\n            key = keys[t];\n            if (key && key.indexOf(\"~\") != -1) {\n                key = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.unescapePathComponent)(key);\n            }\n            if (banPrototypeModifications && (key == \"__proto__\" || key == \"prototype\" && t > 0 && keys[t - 1] == \"constructor\")) {\n                throw new TypeError(\"JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\");\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join(\"/\");\n                    } else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === \"-\") {\n                    key = obj.length;\n                } else {\n                    if (validateOperation && !(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } else if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    const returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            } else {\n                if (t >= len) {\n                    const returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new JsonPatchError(\"Cannot perform operation at the desired path\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */ function applyPatch(document, patch, validateOperation, mutateDocument = true, banPrototypeModifications = true) {\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n    }\n    if (!mutateDocument) {\n        document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n    }\n    const results = new Array(patch.length);\n    for(let i = 0, length = patch.length; i < length; i++){\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */ function applyReducer(document, operation, index) {\n    const operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) {\n        // failed test\n        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */ function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== \"object\" || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError(\"Operation is not an object\", \"OPERATION_NOT_AN_OBJECT\", index, operation, document);\n    } else if (!objOps[operation.op]) {\n        throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n    } else if (typeof operation.path !== \"string\") {\n        throw new JsonPatchError(\"Operation `path` property is not a string\", \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if (operation.path.indexOf(\"/\") !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if ((operation.op === \"move\" || operation.op === \"copy\") && typeof operation.from !== \"string\") {\n        throw new JsonPatchError(\"Operation `from` property is not present (applicable in `move` and `copy` operations)\", \"OPERATION_FROM_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && operation.value === undefined) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasUndefined)(operation.value)) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\", index, operation, document);\n    } else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError(\"Cannot perform an `add` operation at the desired path\", \"OPERATION_PATH_CANNOT_ADD\", index, operation, document);\n            }\n        } else if (operation.op === \"replace\" || operation.op === \"remove\" || operation.op === \"_get\") {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError(\"Cannot perform the operation at a path that does not exist\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            var existingValue = {\n                op: \"_get\",\n                path: operation.from,\n                value: undefined\n            };\n            var error = validate([\n                existingValue\n            ], document);\n            if (error && error.name === \"OPERATION_PATH_UNRESOLVABLE\") {\n                throw new JsonPatchError(\"Cannot perform the operation from a path that does not exist\", \"OPERATION_FROM_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */ function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document), (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(sequence), externalValidator || true);\n        } else {\n            externalValidator = externalValidator || validator;\n            for(var i = 0; i < sequence.length; i++){\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    } catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        } else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nfunction _areEquals(a, b) {\n    if (a === b) return true;\n    if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length) return false;\n            for(i = length; i-- !== 0;)if (!_areEquals(a[i], b[i])) return false;\n            return true;\n        }\n        if (arrA != arrB) return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length) return false;\n        for(i = length; i-- !== 0;)if (!b.hasOwnProperty(keys[i])) return false;\n        for(i = length; i-- !== 0;){\n            key = keys[i];\n            if (!_areEquals(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ3lGO0FBQ2hHLE1BQU1LLGlCQUFpQkwsbURBQVVBLENBQUM7QUFDbEMsTUFBTU0sWUFBWUwsbURBQVVBLENBQUM7QUFDcEM7Ozs7O0NBS0MsR0FDRCwwQ0FBMEMsR0FDMUMsTUFBTU0sU0FBUztJQUNYQyxLQUFLLFNBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzdCRixHQUFHLENBQUNDLElBQUksR0FBRyxJQUFJLENBQUNFLEtBQUs7UUFDckIsT0FBTztZQUFFQyxhQUFhRjtRQUFTO0lBQ25DO0lBQ0FHLFFBQVEsU0FBVUwsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDaEMsSUFBSUksVUFBVU4sR0FBRyxDQUFDQyxJQUFJO1FBQ3RCLE9BQU9ELEdBQUcsQ0FBQ0MsSUFBSTtRQUNmLE9BQU87WUFBRUcsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBQyxTQUFTLFNBQVVQLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQ2pDLElBQUlJLFVBQVVOLEdBQUcsQ0FBQ0MsSUFBSTtRQUN0QkQsR0FBRyxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDRSxLQUFLO1FBQ3JCLE9BQU87WUFBRUMsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBRSxNQUFNLFNBQVVSLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzlCOztvQ0FFNEIsR0FDNUIsSUFBSUksVUFBVUcsa0JBQWtCUCxVQUFVLElBQUksQ0FBQ1EsSUFBSTtRQUNuRCxJQUFJSixTQUFTO1lBQ1RBLFVBQVVkLHVEQUFVQSxDQUFDYztRQUN6QjtRQUNBLE1BQU1LLGdCQUFnQkMsZUFBZVYsVUFBVTtZQUMzQ1csSUFBSTtZQUNKSCxNQUFNLElBQUksQ0FBQ0ksSUFBSTtRQUNu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d2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLmpzP2RmOTgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IFBhdGNoRXJyb3IsIF9kZWVwQ2xvbmUsIGlzSW50ZWdlciwgdW5lc2NhcGVQYXRoQ29tcG9uZW50LCBoYXNVbmRlZmluZWQsIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuZXhwb3J0IGNvbnN0IEpzb25QYXRjaEVycm9yID0gUGF0Y2hFcnJvcjtcbmV4cG9ydCBjb25zdCBkZWVwQ2xvbmUgPSBfZGVlcENsb25lO1xuLyogV2UgdXNlIGEgSmF2YXNjcmlwdCBoYXNoIHRvIHN0b3JlIGVhY2hcbiBmdW5jdGlvbi4gRWFjaCBoYXNoIGVudHJ5IChwcm9wZXJ0eSkgdXNlc1xuIHRoZSBvcGVyYXRpb24gaWRlbnRpZmllcnMgc3BlY2lmaWVkIGluIHJmYzY5MDIuXG4gSW4gdGhpcyB3YXksIHdlIGNhbiBtYXAgZWFjaCBwYXRjaCBvcGVyYXRpb25cbiB0byBpdHMgZGVkaWNhdGVkIGZ1bmN0aW9uIGluIGVmZmljaWVudCB3YXkuXG4gKi9cbi8qIFRoZSBvcGVyYXRpb25zIGFwcGxpY2FibGUgdG8gYW4gb2JqZWN0ICovXG5jb25zdCBvYmpPcHMgPSB7XG4gICAgYWRkOiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIG9ialtrZXldID0gdGhpcy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSBvYmpba2V5XTtcbiAgICAgICAgZGVsZXRlIG9ialtrZXldO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIHJlcGxhY2U6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSBvYmpba2V5XTtcbiAgICAgICAgb2JqW2tleV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIG1vdmU6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgLyogaW4gY2FzZSBtb3ZlIHRhcmdldCBvdmVyd3JpdGVzIGFuIGV4aXN0aW5nIHZhbHVlLFxuICAgICAgICByZXR1cm4gdGhlIHJlbW92ZWQgdmFsdWUsIHRoaXMgY2FuIGJlIHRheGluZyBwZXJmb3JtYW5jZS13aXNlLFxuICAgICAgICBhbmQgaXMgcG90ZW50aWFsbHkgdW5uZWVkZWQgKi9cbiAgICAgICAgbGV0IHJlbW92ZWQgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgdGhpcy5wYXRoKTtcbiAgICAgICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJlbW92ZWQgPSBfZGVlcENsb25lKHJlbW92ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVmFsdWUgPSBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwge1xuICAgICAgICAgICAgb3A6IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICBwYXRoOiB0aGlzLmZyb20sXG4gICAgICAgIH0pLnJlbW92ZWQ7XG4gICAgICAgIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgIHBhdGg6IHRoaXMucGF0aCxcbiAgICAgICAgICAgIHZhbHVlOiBvcmlnaW5hbFZhbHVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCByZW1vdmVkIH07XG4gICAgfSxcbiAgICBjb3B5OiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlVG9Db3B5ID0gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIHRoaXMuZnJvbSk7XG4gICAgICAgIC8vIGVuZm9yY2UgY29weSBieSB2YWx1ZSBzbyBmdXJ0aGVyIG9wZXJhdGlvbnMgZG9uJ3QgYWZmZWN0IHNvdXJjZSAoc2VlIGlzc3VlICMxNzcpXG4gICAgICAgIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgIHBhdGg6IHRoaXMucGF0aCxcbiAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKHZhbHVlVG9Db3B5KSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCB9O1xuICAgIH0sXG4gICAgdGVzdDogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHRlc3Q6IF9hcmVFcXVhbHMob2JqW2tleV0sIHRoaXMudmFsdWUpIH07XG4gICAgfSxcbiAgICBfZ2V0OiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgfSxcbn07XG4vKiBUaGUgb3BlcmF0aW9ucyBhcHBsaWNhYmxlIHRvIGFuIGFycmF5LiBNYW55IGFyZSB0aGUgc2FtZSBhcyBmb3IgdGhlIG9iamVjdCAqL1xudmFyIGFyck9wcyA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIChhcnIsIGksIGRvY3VtZW50KSB7XG4gICAgICAgIGlmIChpc0ludGVnZXIoaSkpIHtcbiAgICAgICAgICAgIGFyci5zcGxpY2UoaSwgMCwgdGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBhcnJheSBwcm9wc1xuICAgICAgICAgICAgYXJyW2ldID0gdGhpcy52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzIG1heSBiZSBuZWVkZWQgd2hlbiB1c2luZyAnLScgaW4gYW4gYXJyYXlcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCBpbmRleDogaSB9O1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAoYXJyLCBpLCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZExpc3QgPSBhcnIuc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQ6IHJlbW92ZWRMaXN0WzBdIH07XG4gICAgfSxcbiAgICByZXBsYWNlOiBmdW5jdGlvbiAoYXJyLCBpLCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IGFycltpXTtcbiAgICAgICAgYXJyW2ldID0gdGhpcy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCByZW1vdmVkIH07XG4gICAgfSxcbiAgICBtb3ZlOiBvYmpPcHMubW92ZSxcbiAgICBjb3B5OiBvYmpPcHMuY29weSxcbiAgICB0ZXN0OiBvYmpPcHMudGVzdCxcbiAgICBfZ2V0OiBvYmpPcHMuX2dldCxcbn07XG4vKipcbiAqIFJldHJpZXZlcyBhIHZhbHVlIGZyb20gYSBKU09OIGRvY3VtZW50IGJ5IGEgSlNPTiBwb2ludGVyLlxuICogUmV0dXJucyB0aGUgdmFsdWUuXG4gKlxuICogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBnZXQgdGhlIHZhbHVlIGZyb21cbiAqIEBwYXJhbSBwb2ludGVyIGFuIGVzY2FwZWQgSlNPTiBwb2ludGVyXG4gKiBAcmV0dXJuIFRoZSByZXRyaWV2ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCBwb2ludGVyKSB7XG4gICAgaWYgKHBvaW50ZXIgPT0gXCJcIikge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgfVxuICAgIHZhciBnZXRPcmlnaW5hbERlc3RpbmF0aW9uID0geyBvcDogXCJfZ2V0XCIsIHBhdGg6IHBvaW50ZXIgfTtcbiAgICBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbik7XG4gICAgcmV0dXJuIGdldE9yaWdpbmFsRGVzdGluYXRpb24udmFsdWU7XG59XG4vKipcbiAqIEFwcGx5IGEgc2luZ2xlIEpTT04gUGF0Y2ggT3BlcmF0aW9uIG9uIGEgSlNPTiBkb2N1bWVudC5cbiAqIFJldHVybnMgdGhlIHtuZXdEb2N1bWVudCwgcmVzdWx0fSBvZiB0aGUgb3BlcmF0aW9uLlxuICogSXQgbW9kaWZpZXMgdGhlIGBkb2N1bWVudGAgYW5kIGBvcGVyYXRpb25gIG9iamVjdHMgLSBpdCBnZXRzIHRoZSB2YWx1ZXMgYnkgcmVmZXJlbmNlLlxuICogSWYgeW91IHdvdWxkIGxpa2UgdG8gYXZvaWQgdG91Y2hpbmcgeW91ciB2YWx1ZXMsIGNsb25lIHRoZW06XG4gKiBganNvbnBhdGNoLmFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBqc29ucGF0Y2guX2RlZXBDbG9uZShvcGVyYXRpb24pKWAuXG4gKlxuICogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBwYXRjaFxuICogQHBhcmFtIG9wZXJhdGlvbiBUaGUgb3BlcmF0aW9uIHRvIGFwcGx5XG4gKiBAcGFyYW0gdmFsaWRhdGVPcGVyYXRpb24gYGZhbHNlYCBpcyB3aXRob3V0IHZhbGlkYXRpb24sIGB0cnVlYCB0byB1c2UgZGVmYXVsdCBqc29ucGF0Y2gncyB2YWxpZGF0aW9uLCBvciB5b3UgY2FuIHBhc3MgYSBgdmFsaWRhdGVPcGVyYXRpb25gIGNhbGxiYWNrIHRvIGJlIHVzZWQgZm9yIHZhbGlkYXRpb24uXG4gKiBAcGFyYW0gbXV0YXRlRG9jdW1lbnQgV2hldGhlciB0byBtdXRhdGUgdGhlIG9yaWdpbmFsIGRvY3VtZW50IG9yIGNsb25lIGl0IGJlZm9yZSBhcHBseWluZ1xuICogQHBhcmFtIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgV2hldGhlciB0byBiYW4gbW9kaWZpY2F0aW9ucyB0byBgX19wcm90b19fYCwgZGVmYXVsdHMgdG8gYHRydWVgLlxuICogQHJldHVybiBge25ld0RvY3VtZW50LCByZXN1bHR9YCBhZnRlciB0aGUgb3BlcmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgb3BlcmF0aW9uLCB2YWxpZGF0ZU9wZXJhdGlvbiA9IGZhbHNlLCBtdXRhdGVEb2N1bWVudCA9IHRydWUsIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgPSB0cnVlLCBpbmRleCA9IDApIHtcbiAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0ZU9wZXJhdGlvbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlT3BlcmF0aW9uKG9wZXJhdGlvbiwgMCwgZG9jdW1lbnQsIG9wZXJhdGlvbi5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbGlkYXRvcihvcGVyYXRpb24sIDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qIFJPT1QgT1BFUkFUSU9OUyAqL1xuICAgIGlmIChvcGVyYXRpb24ucGF0aCA9PT0gXCJcIikge1xuICAgICAgICBsZXQgcmV0dXJuVmFsdWUgPSB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCB9O1xuICAgICAgICBpZiAob3BlcmF0aW9uLm9wID09PSBcImFkZFwiKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IG9wZXJhdGlvbi52YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IG9wZXJhdGlvbi52YWx1ZTtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLnJlbW92ZWQgPSBkb2N1bWVudDsgLy9kb2N1bWVudCB3ZSByZW1vdmVkXG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcIm1vdmVcIiB8fCBvcGVyYXRpb24ub3AgPT09IFwiY29weVwiKSB7XG4gICAgICAgICAgICAvLyBpdCdzIGEgbW92ZSBvciBjb3B5IHRvIHJvb3RcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIG9wZXJhdGlvbi5mcm9tKTsgLy8gZ2V0IHRoZSB2YWx1ZSBieSBqc29uLXBvaW50ZXIgaW4gYGZyb21gIGZpZWxkXG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uLm9wID09PSBcIm1vdmVcIikge1xuICAgICAgICAgICAgICAgIC8vIHJlcG9ydCByZW1vdmVkIGl0ZW1cbiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZS5yZW1vdmVkID0gZG9jdW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcInRlc3RcIikge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUudGVzdCA9IF9hcmVFcXVhbHMoZG9jdW1lbnQsIG9wZXJhdGlvbi52YWx1ZSk7XG4gICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUudGVzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwicmVtb3ZlXCIpIHtcbiAgICAgICAgICAgIC8vIGEgcmVtb3ZlIG9uIHJvb3RcbiAgICAgICAgICAgIHJldHVyblZhbHVlLnJlbW92ZWQgPSBkb2N1bWVudDtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwiX2dldFwiKSB7XG4gICAgICAgICAgICBvcGVyYXRpb24udmFsdWUgPSBkb2N1bWVudDtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qIGJhZCBvcGVyYXRpb24gKi9cbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgb3BgIHByb3BlcnR5IGlzIG5vdCBvbmUgb2Ygb3BlcmF0aW9ucyBkZWZpbmVkIGluIFJGQy02OTAyXCIsIFwiT1BFUkFUSU9OX09QX0lOVkFMSURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSAvKiBFTkQgUk9PVCBPUEVSQVRJT05TICovXG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghbXV0YXRlRG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50ID0gX2RlZXBDbG9uZShkb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0aCA9IG9wZXJhdGlvbi5wYXRoIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IGtleXMgPSBwYXRoLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgbGV0IG9iaiA9IGRvY3VtZW50O1xuICAgICAgICBsZXQgdCA9IDE7IC8vc2tpcCBlbXB0eSBlbGVtZW50IC0gaHR0cDovL2pzcGVyZi5jb20vdG8tc2hpZnQtb3Itbm90LXRvLXNoaWZ0XG4gICAgICAgIGxldCBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgbGV0IGV4aXN0aW5nUGF0aEZyYWdtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQga2V5O1xuICAgICAgICBsZXQgdmFsaWRhdGVGdW5jdGlvbjtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0ZU9wZXJhdGlvbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlRnVuY3Rpb24gPSB2YWxpZGF0ZU9wZXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbGlkYXRlRnVuY3Rpb24gPSB2YWxpZGF0b3I7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGtleSA9IGtleXNbdF07XG4gICAgICAgICAgICBpZiAoa2V5ICYmIGtleS5pbmRleE9mKFwiflwiKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgIGtleSA9IHVuZXNjYXBlUGF0aENvbXBvbmVudChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgJiZcbiAgICAgICAgICAgICAgICAoa2V5ID09IFwiX19wcm90b19fXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgKGtleSA9PSBcInByb3RvdHlwZVwiICYmIHQgPiAwICYmIGtleXNbdCAtIDFdID09IFwiY29uc3RydWN0b3JcIikpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkpTT04tUGF0Y2g6IG1vZGlmeWluZyBgX19wcm90b19fYCBvciBgY29uc3RydWN0b3IvcHJvdG90eXBlYCBwcm9wIGlzIGJhbm5lZCBmb3Igc2VjdXJpdHkgcmVhc29ucywgaWYgdGhpcyB3YXMgb24gcHVycG9zZSwgcGxlYXNlIHNldCBgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9uc2AgZmxhZyBmYWxzZSBhbmQgcGFzcyBpdCB0byB0aGlzIGZ1bmN0aW9uLiBNb3JlIGluZm8gaW4gZmFzdC1qc29uLXBhdGNoIFJFQURNRVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1BhdGhGcmFnbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1BhdGhGcmFnbWVudCA9IGtleXMuc2xpY2UoMCwgdCkuam9pbihcIi9cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodCA9PSBsZW4gLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1BhdGhGcmFnbWVudCA9IG9wZXJhdGlvbi5wYXRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1BhdGhGcmFnbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUZ1bmN0aW9uKG9wZXJhdGlvbiwgMCwgZG9jdW1lbnQsIGV4aXN0aW5nUGF0aEZyYWdtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcIi1cIikge1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSBvYmoubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uICYmICFpc0ludGVnZXIoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiRXhwZWN0ZWQgYW4gdW5zaWduZWQgYmFzZS0xMCBpbnRlZ2VyIHZhbHVlLCBtYWtpbmcgdGhlIG5ldyByZWZlcmVuY2VkIHZhbHVlIHRoZSBhcnJheSBlbGVtZW50IHdpdGggdGhlIHplcm8tYmFzZWQgaW5kZXhcIiwgXCJPUEVSQVRJT05fUEFUSF9JTExFR0FMX0FSUkFZX0lOREVYXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBvbmx5IHBhcnNlIGtleSB3aGVuIGl0J3MgYW4gaW50ZWdlciBmb3IgYGFyci5wcm9wYCB0byB3b3JrXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzSW50ZWdlcihrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSB+fmtleTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodCA+PSBsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uICYmIG9wZXJhdGlvbi5vcCA9PT0gXCJhZGRcIiAmJiBrZXkgPiBvYmoubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUaGUgc3BlY2lmaWVkIGluZGV4IE1VU1QgTk9UIGJlIGdyZWF0ZXIgdGhhbiB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIHRoZSBhcnJheVwiLCBcIk9QRVJBVElPTl9WQUxVRV9PVVRfT0ZfQk9VTkRTXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXR1cm5WYWx1ZSA9IGFyck9wc1tvcGVyYXRpb24ub3BdLmNhbGwob3BlcmF0aW9uLCBvYmosIGtleSwgZG9jdW1lbnQpOyAvLyBBcHBseSBwYXRjaFxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUudGVzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0ID49IGxlbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXR1cm5WYWx1ZSA9IG9iak9wc1tvcGVyYXRpb24ub3BdLmNhbGwob3BlcmF0aW9uLCBvYmosIGtleSwgZG9jdW1lbnQpOyAvLyBBcHBseSBwYXRjaFxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUudGVzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9iaiA9IG9ialtrZXldO1xuICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBtb3JlIGtleXMgaW4gdGhlIHBhdGgsIGJ1dCB0aGUgbmV4dCB2YWx1ZSBpc24ndCBhIG5vbi1udWxsIG9iamVjdCxcbiAgICAgICAgICAgIC8vIHRocm93IGFuIE9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRSBlcnJvciBpbnN0ZWFkIG9mIGl0ZXJhdGluZyBhZ2Fpbi5cbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbiAmJiB0IDwgbGVuICYmICghb2JqIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiQ2Fubm90IHBlcmZvcm0gb3BlcmF0aW9uIGF0IHRoZSBkZXNpcmVkIHBhdGhcIiwgXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBcHBseSBhIGZ1bGwgSlNPTiBQYXRjaCBhcnJheSBvbiBhIEpTT04gZG9jdW1lbnQuXG4gKiBSZXR1cm5zIHRoZSB7bmV3RG9jdW1lbnQsIHJlc3VsdH0gb2YgdGhlIHBhdGNoLlxuICogSXQgbW9kaWZpZXMgdGhlIGBkb2N1bWVudGAgb2JqZWN0IGFuZCBgcGF0Y2hgIC0gaXQgZ2V0cyB0aGUgdmFsdWVzIGJ5IHJlZmVyZW5jZS5cbiAqIElmIHlvdSB3b3VsZCBsaWtlIHRvIGF2b2lkIHRvdWNoaW5nIHlvdXIgdmFsdWVzLCBjbG9uZSB0aGVtOlxuICogYGpzb25wYXRjaC5hcHBseVBhdGNoKGRvY3VtZW50LCBqc29ucGF0Y2guX2RlZXBDbG9uZShwYXRjaCkpYC5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIHBhdGNoXG4gKiBAcGFyYW0gcGF0Y2ggVGhlIHBhdGNoIHRvIGFwcGx5XG4gKiBAcGFyYW0gdmFsaWRhdGVPcGVyYXRpb24gYGZhbHNlYCBpcyB3aXRob3V0IHZhbGlkYXRpb24sIGB0cnVlYCB0byB1c2UgZGVmYXVsdCBqc29ucGF0Y2gncyB2YWxpZGF0aW9uLCBvciB5b3UgY2FuIHBhc3MgYSBgdmFsaWRhdGVPcGVyYXRpb25gIGNhbGxiYWNrIHRvIGJlIHVzZWQgZm9yIHZhbGlkYXRpb24uXG4gKiBAcGFyYW0gbXV0YXRlRG9jdW1lbnQgV2hldGhlciB0byBtdXRhdGUgdGhlIG9yaWdpbmFsIGRvY3VtZW50IG9yIGNsb25lIGl0IGJlZm9yZSBhcHBseWluZ1xuICogQHBhcmFtIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgV2hldGhlciB0byBiYW4gbW9kaWZpY2F0aW9ucyB0byBgX19wcm90b19fYCwgZGVmYXVsdHMgdG8gYHRydWVgLlxuICogQHJldHVybiBBbiBhcnJheSBvZiBge25ld0RvY3VtZW50LCByZXN1bHR9YCBhZnRlciB0aGUgcGF0Y2hcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGF0Y2goZG9jdW1lbnQsIHBhdGNoLCB2YWxpZGF0ZU9wZXJhdGlvbiwgbXV0YXRlRG9jdW1lbnQgPSB0cnVlLCBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zID0gdHJ1ZSkge1xuICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocGF0Y2gpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJQYXRjaCBzZXF1ZW5jZSBtdXN0IGJlIGFuIGFycmF5XCIsIFwiU0VRVUVOQ0VfTk9UX0FOX0FSUkFZXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghbXV0YXRlRG9jdW1lbnQpIHtcbiAgICAgICAgZG9jdW1lbnQgPSBfZGVlcENsb25lKGRvY3VtZW50KTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0cyA9IG5ldyBBcnJheShwYXRjaC5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBwYXRjaC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbXV0YXRlRG9jdW1lbnQgYXJndW1lbnQgYmVjYXVzZSBpZiBpdCB3YXMgdHJ1ZSwgd2UgYWxyZWFkeSBkZWVwIGNsb25lZCB0aGUgb2JqZWN0LCB3ZSdsbCBqdXN0IHBhc3MgYHRydWVgXG4gICAgICAgIHJlc3VsdHNbaV0gPSBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgcGF0Y2hbaV0sIHZhbGlkYXRlT3BlcmF0aW9uLCB0cnVlLCBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zLCBpKTtcbiAgICAgICAgZG9jdW1lbnQgPSByZXN1bHRzW2ldLm5ld0RvY3VtZW50OyAvLyBpbiBjYXNlIHJvb3Qgd2FzIHJlcGxhY2VkXG4gICAgfVxuICAgIHJlc3VsdHMubmV3RG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8qKlxuICogQXBwbHkgYSBzaW5nbGUgSlNPTiBQYXRjaCBPcGVyYXRpb24gb24gYSBKU09OIGRvY3VtZW50LlxuICogUmV0dXJucyB0aGUgdXBkYXRlZCBkb2N1bWVudC5cbiAqIFN1aXRhYmxlIGFzIGEgcmVkdWNlci5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIHBhdGNoXG4gKiBAcGFyYW0gb3BlcmF0aW9uIFRoZSBvcGVyYXRpb24gdG8gYXBwbHlcbiAqIEByZXR1cm4gVGhlIHVwZGF0ZWQgZG9jdW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UmVkdWNlcihkb2N1bWVudCwgb3BlcmF0aW9uLCBpbmRleCkge1xuICAgIGNvbnN0IG9wZXJhdGlvblJlc3VsdCA9IGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBvcGVyYXRpb24pO1xuICAgIGlmIChvcGVyYXRpb25SZXN1bHQudGVzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gZmFpbGVkIHRlc3RcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG9wZXJhdGlvblJlc3VsdC5uZXdEb2N1bWVudDtcbn1cbi8qKlxuICogVmFsaWRhdGVzIGEgc2luZ2xlIG9wZXJhdGlvbi4gQ2FsbGVkIGZyb20gYGpzb25wYXRjaC52YWxpZGF0ZWAuIFRocm93cyBgSnNvblBhdGNoRXJyb3JgIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gKiBAcGFyYW0ge29iamVjdH0gb3BlcmF0aW9uIC0gb3BlcmF0aW9uIG9iamVjdCAocGF0Y2gpXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBpbmRleCBvZiBvcGVyYXRpb24gaW4gdGhlIHNlcXVlbmNlXG4gKiBAcGFyYW0ge29iamVjdH0gW2RvY3VtZW50XSAtIG9iamVjdCB3aGVyZSB0aGUgb3BlcmF0aW9uIGlzIHN1cHBvc2VkIHRvIGJlIGFwcGxpZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZXhpc3RpbmdQYXRoRnJhZ21lbnRdIC0gY29tZXMgYWxvbmcgd2l0aCBgZG9jdW1lbnRgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0b3Iob3BlcmF0aW9uLCBpbmRleCwgZG9jdW1lbnQsIGV4aXN0aW5nUGF0aEZyYWdtZW50KSB7XG4gICAgaWYgKHR5cGVvZiBvcGVyYXRpb24gIT09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgb3BlcmF0aW9uID09PSBudWxsIHx8XG4gICAgICAgIEFycmF5LmlzQXJyYXkob3BlcmF0aW9uKSkge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gaXMgbm90IGFuIG9iamVjdFwiLCBcIk9QRVJBVElPTl9OT1RfQU5fT0JKRUNUXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIW9iak9wc1tvcGVyYXRpb24ub3BdKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgb3BgIHByb3BlcnR5IGlzIG5vdCBvbmUgb2Ygb3BlcmF0aW9ucyBkZWZpbmVkIGluIFJGQy02OTAyXCIsIFwiT1BFUkFUSU9OX09QX0lOVkFMSURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2Ygb3BlcmF0aW9uLnBhdGggIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBwYXRoYCBwcm9wZXJ0eSBpcyBub3QgYSBzdHJpbmdcIiwgXCJPUEVSQVRJT05fUEFUSF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3BlcmF0aW9uLnBhdGguaW5kZXhPZihcIi9cIikgIT09IDAgJiYgb3BlcmF0aW9uLnBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBwYXRocyB0aGF0IGFyZW4ndCBlbXB0eSBzdHJpbmcgc2hvdWxkIHN0YXJ0IHdpdGggXCIvXCJcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKCdPcGVyYXRpb24gYHBhdGhgIHByb3BlcnR5IG11c3Qgc3RhcnQgd2l0aCBcIi9cIicsIFwiT1BFUkFUSU9OX1BBVEhfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJjb3B5XCIpICYmXG4gICAgICAgIHR5cGVvZiBvcGVyYXRpb24uZnJvbSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYGZyb21gIHByb3BlcnR5IGlzIG5vdCBwcmVzZW50IChhcHBsaWNhYmxlIGluIGBtb3ZlYCBhbmQgYGNvcHlgIG9wZXJhdGlvbnMpXCIsIFwiT1BFUkFUSU9OX0ZST01fUkVRVUlSRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICgob3BlcmF0aW9uLm9wID09PSBcImFkZFwiIHx8XG4gICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInRlc3RcIikgJiZcbiAgICAgICAgb3BlcmF0aW9uLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGB2YWx1ZWAgcHJvcGVydHkgaXMgbm90IHByZXNlbnQgKGFwcGxpY2FibGUgaW4gYGFkZGAsIGByZXBsYWNlYCBhbmQgYHRlc3RgIG9wZXJhdGlvbnMpXCIsIFwiT1BFUkFUSU9OX1ZBTFVFX1JFUVVJUkVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKG9wZXJhdGlvbi5vcCA9PT0gXCJhZGRcIiB8fFxuICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiIHx8XG4gICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJ0ZXN0XCIpICYmXG4gICAgICAgIGhhc1VuZGVmaW5lZChvcGVyYXRpb24udmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgdmFsdWVgIHByb3BlcnR5IGlzIG5vdCBwcmVzZW50IChhcHBsaWNhYmxlIGluIGBhZGRgLCBgcmVwbGFjZWAgYW5kIGB0ZXN0YCBvcGVyYXRpb25zKVwiLCBcIk9QRVJBVElPTl9WQUxVRV9DQU5OT1RfQ09OVEFJTl9VTkRFRklORURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChkb2N1bWVudCkge1xuICAgICAgICBpZiAob3BlcmF0aW9uLm9wID09IFwiYWRkXCIpIHtcbiAgICAgICAgICAgIHZhciBwYXRoTGVuID0gb3BlcmF0aW9uLnBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBleGlzdGluZ1BhdGhMZW4gPSBleGlzdGluZ1BhdGhGcmFnbWVudC5zcGxpdChcIi9cIikubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBhdGhMZW4gIT09IGV4aXN0aW5nUGF0aExlbiArIDEgJiYgcGF0aExlbiAhPT0gZXhpc3RpbmdQYXRoTGVuKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiQ2Fubm90IHBlcmZvcm0gYW4gYGFkZGAgb3BlcmF0aW9uIGF0IHRoZSBkZXNpcmVkIHBhdGhcIiwgXCJPUEVSQVRJT05fUEFUSF9DQU5OT1RfQUREXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiIHx8XG4gICAgICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwicmVtb3ZlXCIgfHxcbiAgICAgICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJfZ2V0XCIpIHtcbiAgICAgICAgICAgIGlmIChvcGVyYXRpb24ucGF0aCAhPT0gZXhpc3RpbmdQYXRoRnJhZ21lbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSB0aGUgb3BlcmF0aW9uIGF0IGEgcGF0aCB0aGF0IGRvZXMgbm90IGV4aXN0XCIsIFwiT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJjb3B5XCIpIHtcbiAgICAgICAgICAgIHZhciBleGlzdGluZ1ZhbHVlID0ge1xuICAgICAgICAgICAgICAgIG9wOiBcIl9nZXRcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBvcGVyYXRpb24uZnJvbSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBlcnJvciA9IHZhbGlkYXRlKFtleGlzdGluZ1ZhbHVlXSwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLm5hbWUgPT09IFwiT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSB0aGUgb3BlcmF0aW9uIGZyb20gYSBwYXRoIHRoYXQgZG9lcyBub3QgZXhpc3RcIiwgXCJPUEVSQVRJT05fRlJPTV9VTlJFU09MVkFCTEVcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgYSBzZXF1ZW5jZSBvZiBvcGVyYXRpb25zLiBJZiBgZG9jdW1lbnRgIHBhcmFtZXRlciBpcyBwcm92aWRlZCwgdGhlIHNlcXVlbmNlIGlzIGFkZGl0aW9uYWxseSB2YWxpZGF0ZWQgYWdhaW5zdCB0aGUgb2JqZWN0IGRvY3VtZW50LlxuICogSWYgZXJyb3IgaXMgZW5jb3VudGVyZWQsIHJldHVybnMgYSBKc29uUGF0Y2hFcnJvciBvYmplY3RcbiAqIEBwYXJhbSBzZXF1ZW5jZVxuICogQHBhcmFtIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7SnNvblBhdGNoRXJyb3J8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUoc2VxdWVuY2UsIGRvY3VtZW50LCBleHRlcm5hbFZhbGlkYXRvcikge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzZXF1ZW5jZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlBhdGNoIHNlcXVlbmNlIG11c3QgYmUgYW4gYXJyYXlcIiwgXCJTRVFVRU5DRV9OT1RfQU5fQVJSQVlcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvY3VtZW50KSB7XG4gICAgICAgICAgICAvL2Nsb25lIGRvY3VtZW50IGFuZCBzZXF1ZW5jZSBzbyB0aGF0IHdlIGNhbiBzYWZlbHkgdHJ5IGFwcGx5aW5nIG9wZXJhdGlvbnNcbiAgICAgICAgICAgIGFwcGx5UGF0Y2goX2RlZXBDbG9uZShkb2N1bWVudCksIF9kZWVwQ2xvbmUoc2VxdWVuY2UpLCBleHRlcm5hbFZhbGlkYXRvciB8fCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4dGVybmFsVmFsaWRhdG9yID0gZXh0ZXJuYWxWYWxpZGF0b3IgfHwgdmFsaWRhdG9yO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXF1ZW5jZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGV4dGVybmFsVmFsaWRhdG9yKHNlcXVlbmNlW2ldLCBpLCBkb2N1bWVudCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEpzb25QYXRjaEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vZXBvYmVyZXpraW4vZmFzdC1kZWVwLWVxdWFsXG4vLyBNSVQgTGljZW5zZVxuLy8gQ29weXJpZ2h0IChjKSAyMDE3IEV2Z2VueSBQb2JlcmV6a2luXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbi8vIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG4vLyBTT0ZUV0FSRS5cbmV4cG9ydCBmdW5jdGlvbiBfYXJlRXF1YWxzKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gYilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGEgJiYgYiAmJiB0eXBlb2YgYSA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBiID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIGFyckEgPSBBcnJheS5pc0FycmF5KGEpLCBhcnJCID0gQXJyYXkuaXNBcnJheShiKSwgaSwgbGVuZ3RoLCBrZXk7XG4gICAgICAgIGlmIChhcnJBICYmIGFyckIpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCAhPSBiLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspXG4gICAgICAgICAgICAgICAgaWYgKCFfYXJlRXF1YWxzKGFbaV0sIGJbaV0pKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXJyQSAhPSBhcnJCKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspXG4gICAgICAgICAgICBpZiAoIWIuaGFzT3duUHJvcGVydHkoa2V5c1tpXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICBpZiAoIV9hcmVFcXVhbHMoYVtrZXldLCBiW2tleV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGEgIT09IGEgJiYgYiAhPT0gYjtcbn1cbiJdLCJuYW1lcyI6WyJQYXRjaEVycm9yIiwiX2RlZXBDbG9uZSIsImlzSW50ZWdlciIsInVuZXNjYXBlUGF0aENvbXBvbmVudCIsImhhc1VuZGVmaW5lZCIsIkpzb25QYXRjaEVycm9yIiwiZGVlcENsb25lIiwib2JqT3BzIiwiYWRkIiwib2JqIiwia2V5IiwiZG9jdW1lbnQiLCJ2YWx1ZSIsIm5ld0RvY3VtZW50IiwicmVtb3ZlIiwicmVtb3ZlZCIsInJlcGxhY2UiLCJtb3ZlIiwiZ2V0VmFsdWVCeVBvaW50ZXIiLCJwYXRoIiwib3JpZ2luYWxWYWx1ZSIsImFwcGx5T3BlcmF0aW9uIiwib3AiLCJmcm9tIiwiY29weSIsInZhbHVlVG9Db3B5IiwidGVzdCIsIl9hcmVFcXVhbHMiLCJfZ2V0IiwiYXJyT3BzIiwiYXJyIiwiaSIsInNwbGljZSIsImluZGV4IiwicmVtb3ZlZExpc3QiLCJwb2ludGVyIiwiZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbiIsIm9wZXJhdGlvbiIsInZhbGlkYXRlT3BlcmF0aW9uIiwibXV0YXRlRG9jdW1lbnQiLCJiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zIiwidmFsaWRhdG9yIiwicmV0dXJuVmFsdWUiLCJrZXlzIiwic3BsaXQiLCJ0IiwibGVuIiwibGVuZ3RoIiwiZXhpc3RpbmdQYXRoRnJhZ21lbnQiLCJ1bmRlZmluZWQiLCJ2YWxpZGF0ZUZ1bmN0aW9uIiwiaW5kZXhPZiIsIlR5cGVFcnJvciIsInNsaWNlIiwiam9pbiIsIkFycmF5IiwiaXNBcnJheSIsImNhbGwiLCJhcHBseVBhdGNoIiwicGF0Y2giLCJyZXN1bHRzIiwiYXBwbHlSZWR1Y2VyIiwib3BlcmF0aW9uUmVzdWx0IiwicGF0aExlbiIsImV4aXN0aW5nUGF0aExlbiIsImV4aXN0aW5nVmFsdWUiLCJlcnJvciIsInZhbGlkYXRlIiwibmFtZSIsInNlcXVlbmNlIiwiZXh0ZXJuYWxWYWxpZGF0b3IiLCJlIiwiYSIsImIiLCJhcnJBIiwiYXJyQiIsIk9iamVjdCIsImhhc093blByb3BlcnR5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compare: () => (/* binding */ compare),\n/* harmony export */   generate: () => (/* binding */ generate),\n/* harmony export */   observe: () => (/* binding */ observe),\n/* harmony export */   unobserve: () => (/* binding */ unobserve)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2013-2021 Joachim Wester\n * MIT license\n */ \n\nvar beforeDict = new WeakMap();\nclass Mirror {\n    constructor(obj){\n        Object.defineProperty(this, \"obj\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.obj = obj;\n    }\n}\nclass ObserverInfo {\n    constructor(callback, observer){\n        Object.defineProperty(this, \"callback\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callback = callback;\n        this.observer = observer;\n    }\n}\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */ function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */ function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    } else {\n        const observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = ()=>{\n            generate(observer);\n        };\n        var fastCheck = ()=>{\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (false) {}\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = ()=>{\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (false) {}\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */ function generate(observer, invertible = false) {\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        (0,_core_js__WEBPACK_IMPORTED_MODULE_1__.applyPatch)(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(obj);\n    var oldKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for(var t = oldKeys.length - 1; t >= 0; t--){\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key), invertible);\n            } else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({\n                            op: \"test\",\n                            path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                        });\n                    }\n                    patches.push({\n                        op: \"replace\",\n                        path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                        value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(newVal)\n                    });\n                }\n            }\n        } else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                    value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                });\n            }\n            patches.push({\n                op: \"remove\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key)\n            });\n            deleted = true; // property has been deleted\n        } else {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path,\n                    value: mirror\n                });\n            }\n            patches.push({\n                op: \"replace\",\n                path,\n                value: obj\n            });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for(var t = 0; t < newKeys.length; t++){\n        var key = newKeys[t];\n        if (!(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(mirror, key) && obj[key] !== undefined) {\n            patches.push({\n                op: \"add\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj[key])\n            });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */ function compare(tree1, tree2, invertible = false) {\n    var patches = [];\n    _generate(tree1, tree2, patches, \"\", invertible);\n    return patches;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsY0FBYztBQUNkLHVDQUF1QztBQUN2Qzs7OztDQUlDLEdBQzRGO0FBQ3REO0FBQ3ZDLElBQUlLLGFBQWEsSUFBSUM7QUFDckIsTUFBTUM7SUFDRkMsWUFBWUMsR0FBRyxDQUFFO1FBQ2JDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsT0FBTztZQUMvQkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxJQUFJQztRQUNmO1FBQ0FOLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTixHQUFHLEdBQUdBO0lBQ2Y7QUFDSjtBQUNBLE1BQU1RO0lBQ0ZULFlBQVlVLFFBQVEsRUFBRUMsUUFBUSxDQUFFO1FBQzVCVCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0csUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNDLFFBQVEsR0FBR0E7SUFDcEI7QUFDSjtBQUNBLFNBQVNDLFVBQVVYLEdBQUc7SUFDbEIsT0FBT0osV0FBV2dCLEdBQUcsQ0FBQ1o7QUFDMUI7QUFD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L2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2R1cGxleC5qcz9jZTZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG4vLyBJbmxpbmVkIGJlY2F1c2Ugb2YgRVNNIGltcG9ydCBpc3N1ZXNcbi8qIVxuICogaHR0cHM6Ly9naXRodWIuY29tL1N0YXJjb3VudGVyLUphY2svSlNPTi1QYXRjaFxuICogKGMpIDIwMTMtMjAyMSBKb2FjaGltIFdlc3RlclxuICogTUlUIGxpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgX2RlZXBDbG9uZSwgX29iamVjdEtleXMsIGVzY2FwZVBhdGhDb21wb25lbnQsIGhhc093blByb3BlcnR5LCB9IGZyb20gXCIuL2hlbHBlcnMuanNcIjtcbmltcG9ydCB7IGFwcGx5UGF0Y2ggfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG52YXIgYmVmb3JlRGljdCA9IG5ldyBXZWFrTWFwKCk7XG5jbGFzcyBNaXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG9iaikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvYmpcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib2JzZXJ2ZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbHVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub2JqID0gb2JqO1xuICAgIH1cbn1cbmNsYXNzIE9ic2VydmVySW5mbyB7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2ssIG9ic2VydmVyKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxiYWNrXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9ic2VydmVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldE1pcnJvcihvYmopIHtcbiAgICByZXR1cm4gYmVmb3JlRGljdC5nZXQob2JqKTtcbn1cbmZ1bmN0aW9uIGdldE9ic2VydmVyRnJvbU1pcnJvcihtaXJyb3IsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIG1pcnJvci5vYnNlcnZlcnMuZ2V0KGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZU9ic2VydmVyRnJvbU1pcnJvcihtaXJyb3IsIG9ic2VydmVyKSB7XG4gICAgbWlycm9yLm9ic2VydmVycy5kZWxldGUob2JzZXJ2ZXIuY2FsbGJhY2spO1xufVxuLyoqXG4gKiBEZXRhY2ggYW4gb2JzZXJ2ZXIgZnJvbSBhbiBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVub2JzZXJ2ZShyb290LCBvYnNlcnZlcikge1xuICAgIG9ic2VydmVyLnVub2JzZXJ2ZSgpO1xufVxuLyoqXG4gKiBPYnNlcnZlcyBjaGFuZ2VzIG1hZGUgdG8gYW4gb2JqZWN0LCB3aGljaCBjYW4gdGhlbiBiZSByZXRyaWV2ZWQgdXNpbmcgZ2VuZXJhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9ic2VydmUob2JqLCBjYWxsYmFjaykge1xuICAgIHZhciBwYXRjaGVzID0gW107XG4gICAgdmFyIG9ic2VydmVyO1xuICAgIHZhciBtaXJyb3IgPSBnZXRNaXJyb3Iob2JqKTtcbiAgICBpZiAoIW1pcnJvcikge1xuICAgICAgICBtaXJyb3IgPSBuZXcgTWlycm9yKG9iaik7XG4gICAgICAgIGJlZm9yZURpY3Quc2V0KG9iaiwgbWlycm9yKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG9ic2VydmVySW5mbyA9IGdldE9ic2VydmVyRnJvbU1pcnJvcihtaXJyb3IsIGNhbGxiYWNrKTtcbiAgICAgICAgb2JzZXJ2ZXIgPSBvYnNlcnZlckluZm8gJiYgb2JzZXJ2ZXJJbmZvLm9ic2VydmVyO1xuICAgIH1cbiAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVyO1xuICAgIH1cbiAgICBvYnNlcnZlciA9IHt9O1xuICAgIG1pcnJvci52YWx1ZSA9IF9kZWVwQ2xvbmUob2JqKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgb2JzZXJ2ZXIuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG51bGw7XG4gICAgICAgIHZhciBkaXJ0eUNoZWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgZ2VuZXJhdGUob2JzZXJ2ZXIpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZmFzdENoZWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG9ic2VydmVyLm5leHQpO1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IHNldFRpbWVvdXQoZGlydHlDaGVjayk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAvL25vdCBOb2RlXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZhc3RDaGVjayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2JzZXJ2ZXIucGF0Y2hlcyA9IHBhdGNoZXM7XG4gICAgb2JzZXJ2ZXIub2JqZWN0ID0gb2JqO1xuICAgIG9ic2VydmVyLnVub2JzZXJ2ZSA9ICgpID0+IHtcbiAgICAgICAgZ2VuZXJhdGUob2JzZXJ2ZXIpO1xuICAgICAgICBjbGVhclRpbWVvdXQob2JzZXJ2ZXIubmV4dCk7XG4gICAgICAgIHJlbW92ZU9ic2VydmVyRnJvbU1pcnJvcihtaXJyb3IsIG9ic2VydmVyKTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgbWlycm9yLm9ic2VydmVycy5zZXQoY2FsbGJhY2ssIG5ldyBPYnNlcnZlckluZm8oY2FsbGJhY2ssIG9ic2VydmVyKSk7XG4gICAgcmV0dXJuIG9ic2VydmVyO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhbiBhcnJheSBvZiBwYXRjaGVzIGZyb20gYW4gb2JzZXJ2ZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlKG9ic2VydmVyLCBpbnZlcnRpYmxlID0gZmFsc2UpIHtcbiAgICB2YXIgbWlycm9yID0gYmVmb3JlRGljdC5nZXQob2JzZXJ2ZXIub2JqZWN0KTtcbiAgICBfZ2VuZXJhdGUobWlycm9yLnZhbHVlLCBvYnNlcnZlci5vYmplY3QsIG9ic2VydmVyLnBhdGNoZXMsIFwiXCIsIGludmVydGlibGUpO1xuICAgIGlmIChvYnNlcnZlci5wYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICBhcHBseVBhdGNoKG1pcnJvci52YWx1ZSwgb2JzZXJ2ZXIucGF0Y2hlcyk7XG4gICAgfVxuICAgIHZhciB0ZW1wID0gb2JzZXJ2ZXIucGF0Y2hlcztcbiAgICBpZiAodGVtcC5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9ic2VydmVyLnBhdGNoZXMgPSBbXTtcbiAgICAgICAgaWYgKG9ic2VydmVyLmNhbGxiYWNrKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5jYWxsYmFjayh0ZW1wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGVtcDtcbn1cbi8vIERpcnR5IGNoZWNrIGlmIG9iaiBpcyBkaWZmZXJlbnQgZnJvbSBtaXJyb3IsIGdlbmVyYXRlIHBhdGNoZXMgYW5kIHVwZGF0ZSBtaXJyb3JcbmZ1bmN0aW9uIF9nZW5lcmF0ZShtaXJyb3IsIG9iaiwgcGF0Y2hlcywgcGF0aCwgaW52ZXJ0aWJsZSkge1xuICAgIGlmIChvYmogPT09IG1pcnJvcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb2JqLnRvSlNPTiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIG9iaiA9IG9iai50b0pTT04oKTtcbiAgICB9XG4gICAgdmFyIG5ld0tleXMgPSBfb2JqZWN0S2V5cyhvYmopO1xuICAgIHZhciBvbGRLZXlzID0gX29iamVjdEtleXMobWlycm9yKTtcbiAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xuICAgIHZhciBkZWxldGVkID0gZmFsc2U7XG4gICAgLy9pZiBldmVyIFwibW92ZVwiIG9wZXJhdGlvbiBpcyBpbXBsZW1lbnRlZCBoZXJlLCBtYWtlIHN1cmUgdGhpcyB0ZXN0IHJ1bnMgT0s6IFwic2hvdWxkIG5vdCBnZW5lcmF0ZSB0aGUgc2FtZSBwYXRjaCB0d2ljZSAobW92ZSlcIlxuICAgIGZvciAodmFyIHQgPSBvbGRLZXlzLmxlbmd0aCAtIDE7IHQgPj0gMDsgdC0tKSB7XG4gICAgICAgIHZhciBrZXkgPSBvbGRLZXlzW3RdO1xuICAgICAgICB2YXIgb2xkVmFsID0gbWlycm9yW2tleV07XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShvYmosIGtleSkgJiZcbiAgICAgICAgICAgICEob2JqW2tleV0gPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIG9sZFZhbCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShvYmopID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIHZhciBuZXdWYWwgPSBvYmpba2V5XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2xkVmFsID09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBvbGRWYWwgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBuZXdWYWwgPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIG5ld1ZhbCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShvbGRWYWwpID09PSBBcnJheS5pc0FycmF5KG5ld1ZhbCkpIHtcbiAgICAgICAgICAgICAgICBfZ2VuZXJhdGUob2xkVmFsLCBuZXdWYWwsIHBhdGNoZXMsIHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSwgaW52ZXJ0aWJsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob2xkVmFsICE9PSBuZXdWYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnZlcnRpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInRlc3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUob2xkVmFsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZShuZXdWYWwpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtaXJyb3IpID09PSBBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgIGlmIChpbnZlcnRpYmxlKSB7XG4gICAgICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwidGVzdFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG9sZFZhbCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9wOiBcInJlbW92ZVwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlZCA9IHRydWU7IC8vIHByb3BlcnR5IGhhcyBiZWVuIGRlbGV0ZWRcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpbnZlcnRpYmxlKSB7XG4gICAgICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHsgb3A6IFwidGVzdFwiLCBwYXRoLCB2YWx1ZTogbWlycm9yIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHsgb3A6IFwicmVwbGFjZVwiLCBwYXRoLCB2YWx1ZTogb2JqIH0pO1xuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFkZWxldGVkICYmIG5ld0tleXMubGVuZ3RoID09IG9sZEtleXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yICh2YXIgdCA9IDA7IHQgPCBuZXdLZXlzLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgIHZhciBrZXkgPSBuZXdLZXlzW3RdO1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5KG1pcnJvciwga2V5KSAmJiBvYmpba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZShvYmpba2V5XSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlIGFuIGFycmF5IG9mIHBhdGNoZXMgZnJvbSB0aGUgZGlmZmVyZW5jZXMgaW4gdHdvIG9iamVjdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmUodHJlZTEsIHRyZWUyLCBpbnZlcnRpYmxlID0gZmFsc2UpIHtcbiAgICB2YXIgcGF0Y2hlcyA9IFtdO1xuICAgIF9nZW5lcmF0ZSh0cmVlMSwgdHJlZTIsIHBhdGNoZXMsIFwiXCIsIGludmVydGlibGUpO1xuICAgIHJldHVybiBwYXRjaGVzO1xufVxuIl0sIm5hbWVzIjpbIl9kZWVwQ2xvbmUiLCJfb2JqZWN0S2V5cyIsImVzY2FwZVBhdGhDb21wb25lbnQiLCJoYXNPd25Qcm9wZXJ0eSIsImFwcGx5UGF0Y2giLCJiZWZvcmVEaWN0IiwiV2Vha01hcCIsIk1pcnJvciIsImNvbnN0cnVjdG9yIiwib2JqIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIk1hcCIsIk9ic2VydmVySW5mbyIsImNhbGxiYWNrIiwib2JzZXJ2ZXIiLCJnZXRNaXJyb3IiLCJnZXQiLCJnZXRPYnNlcnZlckZyb21NaXJyb3IiLCJtaXJyb3IiLCJvYnNlcnZlcnMiLCJyZW1vdmVPYnNlcnZlckZyb21NaXJyb3IiLCJkZWxldGUiLCJ1bm9ic2VydmUiLCJyb290Iiwib2JzZXJ2ZSIsInBhdGNoZXMiLCJzZXQiLCJvYnNlcnZlckluZm8iLCJuZXh0IiwiZGlydHlDaGVjayIsImdlbmVyYXRlIiwiZmFzdENoZWNrIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvYmplY3QiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW52ZXJ0aWJsZSIsIl9nZW5lcmF0ZSIsImxlbmd0aCIsInRlbXAiLCJwYXRoIiwidG9KU09OIiwibmV3S2V5cyIsIm9sZEtleXMiLCJjaGFuZ2VkIiwiZGVsZXRlZCIsInQiLCJrZXkiLCJvbGRWYWwiLCJ1bmRlZmluZWQiLCJBcnJheSIsImlzQXJyYXkiLCJuZXdWYWwiLCJwdXNoIiwib3AiLCJjb21wYXJlIiwidHJlZTEiLCJ0cmVlMiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PatchError: () => (/* binding */ PatchError),\n/* harmony export */   _deepClone: () => (/* binding */ _deepClone),\n/* harmony export */   _getPathRecursive: () => (/* binding */ _getPathRecursive),\n/* harmony export */   _objectKeys: () => (/* binding */ _objectKeys),\n/* harmony export */   escapePathComponent: () => (/* binding */ escapePathComponent),\n/* harmony export */   getPath: () => (/* binding */ getPath),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   hasUndefined: () => (/* binding */ hasUndefined),\n/* harmony export */   isInteger: () => (/* binding */ isInteger),\n/* harmony export */   unescapePathComponent: () => (/* binding */ unescapePathComponent)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */ const _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nfunction _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        const keys = new Array(obj.length);\n        for(let k = 0; k < keys.length; k++){\n            keys[k] = \"\" + k;\n        }\n        return keys;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    let keys = [];\n    for(let i in obj){\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\n/**\n * Deeply clone the object.\n * https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n * @param  {any} obj value to clone\n * @return {any} cloned obj\n */ function _deepClone(obj) {\n    switch(typeof obj){\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\n//3x faster than cached /^\\d+$/.test(str)\nfunction isInteger(str) {\n    let i = 0;\n    const len = str.length;\n    let charCode;\n    while(i < len){\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/**\n * Escapes a json pointer path\n * @param path The raw pointer\n * @return the Escaped path\n */ function escapePathComponent(path) {\n    if (path.indexOf(\"/\") === -1 && path.indexOf(\"~\") === -1) return path;\n    return path.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */ function unescapePathComponent(path) {\n    return path.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nfunction _getPathRecursive(root, obj) {\n    let found;\n    for(let key in root){\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + \"/\";\n            } else if (typeof root[key] === \"object\") {\n                found = _getPathRecursive(root[key], obj);\n                if (found != \"\") {\n                    return escapePathComponent(key) + \"/\" + found;\n                }\n            }\n        }\n    }\n    return \"\";\n}\nfunction getPath(root, obj) {\n    if (root === obj) {\n        return \"/\";\n    }\n    const path = _getPathRecursive(root, obj);\n    if (path === \"\") {\n        throw new Error(\"Object not found in root\");\n    }\n    return `/${path}`;\n}\n/**\n * Recursively checks whether an object has any undefined values inside.\n */ function hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for(let i = 0, len = obj.length; i < len; i++){\n                if (hasUndefined(obj[i])) {\n                    return true;\n                }\n            }\n        } else if (typeof obj === \"object\") {\n            const objKeys = _objectKeys(obj);\n            const objKeysLength = objKeys.length;\n            for(var i = 0; i < objKeysLength; i++){\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n    const messageParts = [\n        message\n    ];\n    for(const key in args){\n        const value = typeof args[key] === \"object\" ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== \"undefined\") {\n            messageParts.push(`${key}: ${value}`);\n        }\n    }\n    return messageParts.join(\"\\n\");\n}\nclass PatchError extends Error {\n    constructor(message, name, index, operation, tree){\n        super(patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        }));\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: name\n        });\n        Object.defineProperty(this, \"index\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: index\n        });\n        Object.defineProperty(this, \"operation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: operation\n        });\n        Object.defineProperty(this, \"tree\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tree\n        });\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        this.message = patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ2QsdUNBQXVDO0FBQ3ZDOzs7O0NBSUMsR0FDRCxNQUFNQSxrQkFBa0JDLE9BQU9DLFNBQVMsQ0FBQ0MsY0FBYztBQUNoRCxTQUFTQSxlQUFlQyxHQUFHLEVBQUVDLEdBQUc7SUFDbkMsT0FBT0wsZ0JBQWdCTSxJQUFJLENBQUNGLEtBQUtDO0FBQ3JDO0FBQ08sU0FBU0UsWUFBWUgsR0FBRztJQUMzQixJQUFJSSxNQUFNQyxPQUFPLENBQUNMLE1BQU07UUFDcEIsTUFBTU0sT0FBTyxJQUFJRixNQUFNSixJQUFJTyxNQUFNO1FBQ2pDLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJRixLQUFLQyxNQUFNLEVBQUVDLElBQUs7WUFDbENGLElBQUksQ0FBQ0UsRUFBRSxHQUFHLEtBQUtBO1FBQ25CO1FBQ0EsT0FBT0Y7SUFDWDtJQUNBLElBQUlULE9BQU9TLElBQUksRUFBRTtRQUNiLE9BQU9ULE9BQU9TLElBQUksQ0FBQ047SUFDdkI7SUFDQSxJQUFJTSxPQUFPLEVBQUU7SUFDYixJQUFLLElBQUlHLEtBQUtULElBQUs7UUFDZixJQUFJRCxlQUFlQyxLQUFLUyxJQUFJO1lBQ3hCSCxLQUFLSSxJQUFJLENBQUNEO1FBQ2Q7SUFDSjtJQUNBLE9BQU9IO0FBQ1g7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNLLFdBQVdYLEdBQUc7SUFDMUIsT0FBUSxPQUFPQTtRQUNYLEtBQUs7WUFDRCxPQUFPWSxLQUFLQyxLQUFLLENBQUNELEtBQUtFLFNBQVMsQ0FBQ2QsT0FBTyxxRUFBcUU7UUFDakgsS0FBSztZQUNELE9BQU8sTUFBTSxvREFBb0Q7UUFDckU7WUFDSSxPQUFPQSxLQUFLLDZCQUE2QjtJQUNqRDtBQUNKO0FBQ0EseUNBQXlDO0FBQ2xDLFNBQVNlLFVBQVVDLEdB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QWEzQixJQUFJLENBQUMsQ0FBQyxFQUFFVCxJQUFJLEVBQUUsRUFBRXFDLE1BQU0sQ0FBQztRQUN4QztJQUNKO0lBQ0EsT0FBT0QsYUFBYUUsSUFBSSxDQUFDO0FBQzdCO0FBQ08sTUFBTUMsbUJBQW1CWDtJQUM1QlksWUFBWU4sT0FBTyxFQUFFTyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsU0FBUyxFQUFFQyxJQUFJLENBQUU7UUFDL0MsS0FBSyxDQUFDWCwyQkFBMkJDLFNBQVM7WUFBRU87WUFBTUM7WUFBT0M7WUFBV0M7UUFBSztRQUN6RWhELE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9JO1FBQ1g7UUFDQTdDLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9LO1FBQ1g7UUFDQTlDLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9NO1FBQ1g7UUFDQS9DLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9PO1FBQ1g7UUFDQWhELE9BQU9xRCxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVdwRCxTQUFTLEdBQUcsb0VBQW9FO1FBQ3ZILElBQUksQ0FBQ3FDLE9BQU8sR0FBR0QsMkJBQTJCQyxTQUFTO1lBQy9DTztZQUNBQztZQUNBQztZQUNBQztRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9oZWxwZXJzLmpzPzI5OTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIElubGluZWQgYmVjYXVzZSBvZiBFU00gaW1wb3J0IGlzc3Vlc1xuLyohXG4gKiBodHRwczovL2dpdGh1Yi5jb20vU3RhcmNvdW50ZXItSmFjay9KU09OLVBhdGNoXG4gKiAoYykgMjAxNy0yMDIyIEpvYWNoaW0gV2VzdGVyXG4gKiBNSVQgbGljZW5zZWRcbiAqL1xuY29uc3QgX2hhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmV4cG9ydCBmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIGtleSkge1xuICAgIHJldHVybiBfaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX29iamVjdEtleXMob2JqKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICBjb25zdCBrZXlzID0gbmV3IEFycmF5KG9iai5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGtleXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIGtleXNba10gPSBcIlwiICsgaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopO1xuICAgIH1cbiAgICBsZXQga2V5cyA9IFtdO1xuICAgIGZvciAobGV0IGkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShvYmosIGkpKSB7XG4gICAgICAgICAgICBrZXlzLnB1c2goaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleXM7XG59XG4vKipcbiAqIERlZXBseSBjbG9uZSB0aGUgb2JqZWN0LlxuICogaHR0cHM6Ly9qc3BlcmYuY29tL2RlZXAtY29weS12cy1qc29uLXN0cmluZ2lmeS1qc29uLXBhcnNlLzI1IChyZWN1cnNpdmVEZWVwQ29weSlcbiAqIEBwYXJhbSAge2FueX0gb2JqIHZhbHVlIHRvIGNsb25lXG4gKiBAcmV0dXJuIHthbnl9IGNsb25lZCBvYmpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9kZWVwQ2xvbmUob2JqKSB7XG4gICAgc3dpdGNoICh0eXBlb2Ygb2JqKSB7XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpOyAvL0Zhc3RlciB0aGFuIEVTNSBjbG9uZSAtIGh0dHA6Ly9qc3BlcmYuY29tL2RlZXAtY2xvbmluZy1vZi1vYmplY3RzLzVcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vdGhpcyBpcyBob3cgSlNPTi5zdHJpbmdpZnkgYmVoYXZlcyBmb3IgYXJyYXkgaXRlbXNcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBvYmo7IC8vbm8gbmVlZCB0byBjbG9uZSBwcmltaXRpdmVzXG4gICAgfVxufVxuLy8zeCBmYXN0ZXIgdGhhbiBjYWNoZWQgL15cXGQrJC8udGVzdChzdHIpXG5leHBvcnQgZnVuY3Rpb24gaXNJbnRlZ2VyKHN0cikge1xuICAgIGxldCBpID0gMDtcbiAgICBjb25zdCBsZW4gPSBzdHIubGVuZ3RoO1xuICAgIGxldCBjaGFyQ29kZTtcbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgICBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcpIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEVzY2FwZXMgYSBqc29uIHBvaW50ZXIgcGF0aFxuICogQHBhcmFtIHBhdGggVGhlIHJhdyBwb2ludGVyXG4gKiBAcmV0dXJuIHRoZSBFc2NhcGVkIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZVBhdGhDb21wb25lbnQocGF0aCkge1xuICAgIGlmIChwYXRoLmluZGV4T2YoXCIvXCIpID09PSAtMSAmJiBwYXRoLmluZGV4T2YoXCJ+XCIpID09PSAtMSlcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgcmV0dXJuIHBhdGgucmVwbGFjZSgvfi9nLCBcIn4wXCIpLnJlcGxhY2UoL1xcLy9nLCBcIn4xXCIpO1xufVxuLyoqXG4gKiBVbmVzY2FwZXMgYSBqc29uIHBvaW50ZXIgcGF0aFxuICogQHBhcmFtIHBhdGggVGhlIGVzY2FwZWQgcG9pbnRlclxuICogQHJldHVybiBUaGUgdW5lc2NhcGVkIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuZXNjYXBlUGF0aENvbXBvbmVudChwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGgucmVwbGFjZSgvfjEvZywgXCIvXCIpLnJlcGxhY2UoL34wL2csIFwiflwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfZ2V0UGF0aFJlY3Vyc2l2ZShyb290LCBvYmopIHtcbiAgICBsZXQgZm91bmQ7XG4gICAgZm9yIChsZXQga2V5IGluIHJvb3QpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5KHJvb3QsIGtleSkpIHtcbiAgICAgICAgICAgIGlmIChyb290W2tleV0gPT09IG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSkgKyBcIi9cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiByb290W2tleV0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IF9nZXRQYXRoUmVjdXJzaXZlKHJvb3Rba2V5XSwgb2JqKTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmQgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXNjYXBlUGF0aENvbXBvbmVudChrZXkpICsgXCIvXCIgKyBmb3VuZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFwiXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UGF0aChyb290LCBvYmopIHtcbiAgICBpZiAocm9vdCA9PT0gb2JqKSB7XG4gICAgICAgIHJldHVybiBcIi9cIjtcbiAgICB9XG4gICAgY29uc3QgcGF0aCA9IF9nZXRQYXRoUmVjdXJzaXZlKHJvb3QsIG9iaik7XG4gICAgaWYgKHBhdGggPT09IFwiXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT2JqZWN0IG5vdCBmb3VuZCBpbiByb290XCIpO1xuICAgIH1cbiAgICByZXR1cm4gYC8ke3BhdGh9YDtcbn1cbi8qKlxuICogUmVjdXJzaXZlbHkgY2hlY2tzIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhbnkgdW5kZWZpbmVkIHZhbHVlcyBpbnNpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNVbmRlZmluZWQob2JqKSB7XG4gICAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAob2JqKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBvYmoubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzVW5kZWZpbmVkKG9ialtpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaktleXMgPSBfb2JqZWN0S2V5cyhvYmopO1xuICAgICAgICAgICAgY29uc3Qgb2JqS2V5c0xlbmd0aCA9IG9iaktleXMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmpLZXlzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzVW5kZWZpbmVkKG9ialtvYmpLZXlzW2ldXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHBhdGNoRXJyb3JNZXNzYWdlRm9ybWF0dGVyKG1lc3NhZ2UsIGFyZ3MpIHtcbiAgICBjb25zdCBtZXNzYWdlUGFydHMgPSBbbWVzc2FnZV07XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXJncykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHR5cGVvZiBhcmdzW2tleV0gPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoYXJnc1trZXldLCBudWxsLCAyKVxuICAgICAgICAgICAgOiBhcmdzW2tleV07IC8vIHByZXR0eSBwcmludFxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBtZXNzYWdlUGFydHMucHVzaChgJHtrZXl9OiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlUGFydHMuam9pbihcIlxcblwiKTtcbn1cbmV4cG9ydCBjbGFzcyBQYXRjaEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG5hbWUsIGluZGV4LCBvcGVyYXRpb24sIHRyZWUpIHtcbiAgICAgICAgc3VwZXIocGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIobWVzc2FnZSwgeyBuYW1lLCBpbmRleCwgb3BlcmF0aW9uLCB0cmVlIH0pKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5kZXhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluZGV4XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcGVyYXRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG9wZXJhdGlvblxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidHJlZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJlZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTsgLy8gcmVzdG9yZSBwcm90b3R5cGUgY2hhaW4sIHNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDgzNDIzNTlcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gcGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIobWVzc2FnZSwge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICAgICAgdHJlZSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIl9oYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5Iiwib2JqIiwia2V5IiwiY2FsbCIsIl9vYmplY3RLZXlzIiwiQXJyYXkiLCJpc0FycmF5Iiwia2V5cyIsImxlbmd0aCIsImsiLCJpIiwicHVzaCIsIl9kZWVwQ2xvbmUiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJpc0ludGVnZXIiLCJzdHIiLCJsZW4iLCJjaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJlc2NhcGVQYXRoQ29tcG9uZW50IiwicGF0aCIsImluZGV4T2YiLCJyZXBsYWNlIiwidW5lc2NhcGVQYXRoQ29tcG9uZW50IiwiX2dldFBhdGhSZWN1cnNpdmUiLCJyb290IiwiZm91bmQiLCJnZXRQYXRoIiwiRXJyb3IiLCJoYXNVbmRlZmluZWQiLCJ1bmRlZmluZWQiLCJvYmpLZXlzIiwib2JqS2V5c0xlbmd0aCIsInBhdGNoRXJyb3JNZXNzYWdlRm9ybWF0dGVyIiwibWVzc2FnZSIsImFyZ3MiLCJtZXNzYWdlUGFydHMiLCJ2YWx1ZSIsImpvaW4iLCJQYXRjaEVycm9yIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaW5kZXgiLCJvcGVyYXRpb24iLCJ0cmVlIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJzZXRQcm90b3R5cGVPZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/function_calling.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/function_calling.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToOpenAIFunction: () => (/* binding */ convertToOpenAIFunction),\n/* harmony export */   convertToOpenAITool: () => (/* binding */ convertToOpenAITool),\n/* harmony export */   isLangChainTool: () => (/* reexport safe */ _tools_types_js__WEBPACK_IMPORTED_MODULE_0__.isLangChainTool),\n/* harmony export */   isRunnableToolLike: () => (/* reexport safe */ _tools_types_js__WEBPACK_IMPORTED_MODULE_0__.isRunnableToolLike),\n/* harmony export */   isStructuredTool: () => (/* reexport safe */ _tools_types_js__WEBPACK_IMPORTED_MODULE_0__.isStructuredTool),\n/* harmony export */   isStructuredToolParams: () => (/* reexport safe */ _tools_types_js__WEBPACK_IMPORTED_MODULE_0__.isStructuredToolParams)\n/* harmony export */ });\n/* harmony import */ var _tools_types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../tools/types.js */ \"(rsc)/./node_modules/@langchain/core/dist/tools/types.js\");\n/* harmony import */ var _json_schema_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./json_schema.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n\n\n// These utility functions were moved to a more appropriate location,\n// but we still export them here for backwards compatibility.\n\n/**\n * Formats a `StructuredTool` or `RunnableToolLike` instance into a format\n * that is compatible with OpenAI function calling. If `StructuredTool` or\n * `RunnableToolLike` has a zod schema, the output will be converted into a\n * JSON schema, which is then used as the parameters for the OpenAI tool.\n *\n * @param {StructuredToolInterface | RunnableToolLike} tool The tool to convert to an OpenAI function.\n * @returns {FunctionDefinition} The inputted tool in OpenAI function format.\n */ function convertToOpenAIFunction(tool, fields) {\n    // @TODO 0.3.0 Remove the `number` typing\n    const fieldsCopy = typeof fields === \"number\" ? undefined : fields;\n    return {\n        name: tool.name,\n        description: tool.description,\n        parameters: (0,_json_schema_js__WEBPACK_IMPORTED_MODULE_1__.toJsonSchema)(tool.schema),\n        // Do not include the `strict` field if it is `undefined`.\n        ...fieldsCopy?.strict !== undefined ? {\n            strict: fieldsCopy.strict\n        } : {}\n    };\n}\n/**\n * Formats a `StructuredTool` or `RunnableToolLike` instance into a\n * format that is compatible with OpenAI tool calling. If `StructuredTool` or\n * `RunnableToolLike` has a zod schema, the output will be converted into a\n * JSON schema, which is then used as the parameters for the OpenAI tool.\n *\n * @param {StructuredToolInterface | Record<string, any> | RunnableToolLike} tool The tool to convert to an OpenAI tool.\n * @returns {ToolDefinition} The inputted tool in OpenAI tool format.\n */ function convertToOpenAITool(// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntool, fields) {\n    // @TODO 0.3.0 Remove the `number` typing\n    const fieldsCopy = typeof fields === \"number\" ? undefined : fields;\n    let toolDef;\n    if ((0,_tools_types_js__WEBPACK_IMPORTED_MODULE_0__.isLangChainTool)(tool)) {\n        toolDef = {\n            type: \"function\",\n            function: convertToOpenAIFunction(tool)\n        };\n    } else {\n        toolDef = tool;\n    }\n    if (fieldsCopy?.strict !== undefined) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        toolDef.function.strict = fieldsCopy.strict;\n    }\n    return toolDef;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZnVuY3Rpb25fY2FsbGluZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFxRDtBQUNMO0FBQ2hELHFFQUFxRTtBQUNyRSw2REFBNkQ7QUFDc0Q7QUFDbkg7Ozs7Ozs7O0NBUUMsR0FDTSxTQUFTSyx3QkFBd0JDLElBQUksRUFBRUMsTUFBTTtJQUNoRCx5Q0FBeUM7SUFDekMsTUFBTUMsYUFBYSxPQUFPRCxXQUFXLFdBQVdFLFlBQVlGO0lBQzVELE9BQU87UUFDSEcsTUFBTUosS0FBS0ksSUFBSTtRQUNmQyxhQUFhTCxLQUFLSyxXQUFXO1FBQzdCQyxZQUFZWCw2REFBWUEsQ0FBQ0ssS0FBS08sTUFBTTtRQUNwQywwREFBMEQ7UUFDMUQsR0FBSUwsWUFBWU0sV0FBV0wsWUFBWTtZQUFFSyxRQUFRTixXQUFXTSxNQUFNO1FBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0U7QUFDSjtBQUNBOzs7Ozs7OztDQVFDLEdBQ00sU0FBU0Msb0JBQ2hCLDhEQUE4RDtBQUM5RFQsSUFBSSxFQUFFQyxNQUFNO0lBQ1IseUNBQXlDO0lBQ3pDLE1BQU1DLGFBQWEsT0FBT0QsV0FBVyxXQUFXRSxZQUFZRjtJQUM1RCxJQUFJUztJQUNKLElBQUloQixnRUFBZUEsQ0FBQ00sT0FBTztRQUN2QlUsVUFBVTtZQUNOQyxNQUFNO1lBQ05DLFVBQVViLHdCQUF3QkM7UUFDdEM7SUFDSixPQUNLO1FBQ0RVLFVBQVVWO0lBQ2Q7SUFDQSxJQUFJRSxZQUFZTSxXQUFXTCxXQUFXO1FBQ2xDLDhEQUE4RDtRQUM5RE8sUUFBUUUsUUFBUSxDQUFDSixNQUFNLEdBQUdOLFdBQVdNLE1BQU07SUFDL0M7SUFDQSxPQUFPRTtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mdW5jdGlvbl9jYWxsaW5nLmpzPzk0NGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNMYW5nQ2hhaW5Ub29sLCB9IGZyb20gXCIuLi90b29scy90eXBlcy5qc1wiO1xuaW1wb3J0IHsgdG9Kc29uU2NoZW1hIH0gZnJvbSBcIi4vanNvbl9zY2hlbWEuanNcIjtcbi8vIFRoZXNlIHV0aWxpdHkgZnVuY3Rpb25zIHdlcmUgbW92ZWQgdG8gYSBtb3JlIGFwcHJvcHJpYXRlIGxvY2F0aW9uLFxuLy8gYnV0IHdlIHN0aWxsIGV4cG9ydCB0aGVtIGhlcmUgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuZXhwb3J0IHsgaXNTdHJ1Y3R1cmVkVG9vbCwgaXNTdHJ1Y3R1cmVkVG9vbFBhcmFtcywgaXNSdW5uYWJsZVRvb2xMaWtlLCBpc0xhbmdDaGFpblRvb2wsIH0gZnJvbSBcIi4uL3Rvb2xzL3R5cGVzLmpzXCI7XG4vKipcbiAqIEZvcm1hdHMgYSBgU3RydWN0dXJlZFRvb2xgIG9yIGBSdW5uYWJsZVRvb2xMaWtlYCBpbnN0YW5jZSBpbnRvIGEgZm9ybWF0XG4gKiB0aGF0IGlzIGNvbXBhdGlibGUgd2l0aCBPcGVuQUkgZnVuY3Rpb24gY2FsbGluZy4gSWYgYFN0cnVjdHVyZWRUb29sYCBvclxuICogYFJ1bm5hYmxlVG9vbExpa2VgIGhhcyBhIHpvZCBzY2hlbWEsIHRoZSBvdXRwdXQgd2lsbCBiZSBjb252ZXJ0ZWQgaW50byBhXG4gKiBKU09OIHNjaGVtYSwgd2hpY2ggaXMgdGhlbiB1c2VkIGFzIHRoZSBwYXJhbWV0ZXJzIGZvciB0aGUgT3BlbkFJIHRvb2wuXG4gKlxuICogQHBhcmFtIHtTdHJ1Y3R1cmVkVG9vbEludGVyZmFjZSB8IFJ1bm5hYmxlVG9vbExpa2V9IHRvb2wgVGhlIHRvb2wgdG8gY29udmVydCB0byBhbiBPcGVuQUkgZnVuY3Rpb24uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb25EZWZpbml0aW9ufSBUaGUgaW5wdXR0ZWQgdG9vbCBpbiBPcGVuQUkgZnVuY3Rpb24gZm9ybWF0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvT3BlbkFJRnVuY3Rpb24odG9vbCwgZmllbGRzKSB7XG4gICAgLy8gQFRPRE8gMC4zLjAgUmVtb3ZlIHRoZSBgbnVtYmVyYCB0eXBpbmdcbiAgICBjb25zdCBmaWVsZHNDb3B5ID0gdHlwZW9mIGZpZWxkcyA9PT0gXCJudW1iZXJcIiA/IHVuZGVmaW5lZCA6IGZpZWxkcztcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICBwYXJhbWV0ZXJzOiB0b0pzb25TY2hlbWEodG9vbC5zY2hlbWEpLFxuICAgICAgICAvLyBEbyBub3QgaW5jbHVkZSB0aGUgYHN0cmljdGAgZmllbGQgaWYgaXQgaXMgYHVuZGVmaW5lZGAuXG4gICAgICAgIC4uLihmaWVsZHNDb3B5Py5zdHJpY3QgIT09IHVuZGVmaW5lZCA/IHsgc3RyaWN0OiBmaWVsZHNDb3B5LnN0cmljdCB9IDoge30pLFxuICAgIH07XG59XG4vKipcbiAqIEZvcm1hdHMgYSBgU3RydWN0dXJlZFRvb2xgIG9yIGBSdW5uYWJsZVRvb2xMaWtlYCBpbnN0YW5jZSBpbnRvIGFcbiAqIGZvcm1hdCB0aGF0IGlzIGNvbXBhdGlibGUgd2l0aCBPcGVuQUkgdG9vbCBjYWxsaW5nLiBJZiBgU3RydWN0dXJlZFRvb2xgIG9yXG4gKiBgUnVubmFibGVUb29sTGlrZWAgaGFzIGEgem9kIHNjaGVtYSwgdGhlIG91dHB1dCB3aWxsIGJlIGNvbnZlcnRlZCBpbnRvIGFcbiAqIEpTT04gc2NoZW1hLCB3aGljaCBpcyB0aGVuIHVzZWQgYXMgdGhlIHBhcmFtZXRlcnMgZm9yIHRoZSBPcGVuQUkgdG9vbC5cbiAqXG4gKiBAcGFyYW0ge1N0cnVjdHVyZWRUb29sSW50ZXJmYWNlIHwgUmVjb3JkPHN0cmluZywgYW55PiB8IFJ1bm5hYmxlVG9vbExpa2V9IHRvb2wgVGhlIHRvb2wgdG8gY29udmVydCB0byBhbiBPcGVuQUkgdG9vbC5cbiAqIEByZXR1cm5zIHtUb29sRGVmaW5pdGlvbn0gVGhlIGlucHV0dGVkIHRvb2wgaW4gT3BlbkFJIHRvb2wgZm9ybWF0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvT3BlbkFJVG9vbChcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG50b29sLCBmaWVsZHMpIHtcbiAgICAvLyBAVE9ETyAwLjMuMCBSZW1vdmUgdGhlIGBudW1iZXJgIHR5cGluZ1xuICAgIGNvbnN0IGZpZWxkc0NvcHkgPSB0eXBlb2YgZmllbGRzID09PSBcIm51bWJlclwiID8gdW5kZWZpbmVkIDogZmllbGRzO1xuICAgIGxldCB0b29sRGVmO1xuICAgIGlmIChpc0xhbmdDaGFpblRvb2wodG9vbCkpIHtcbiAgICAgICAgdG9vbERlZiA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgIGZ1bmN0aW9uOiBjb252ZXJ0VG9PcGVuQUlGdW5jdGlvbih0b29sKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRvb2xEZWYgPSB0b29sO1xuICAgIH1cbiAgICBpZiAoZmllbGRzQ29weT8uc3RyaWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdG9vbERlZi5mdW5jdGlvbi5zdHJpY3QgPSBmaWVsZHNDb3B5LnN0cmljdDtcbiAgICB9XG4gICAgcmV0dXJuIHRvb2xEZWY7XG59XG4iXSwibmFtZXMiOlsiaXNMYW5nQ2hhaW5Ub29sIiwidG9Kc29uU2NoZW1hIiwiaXNTdHJ1Y3R1cmVkVG9vbCIsImlzU3RydWN0dXJlZFRvb2xQYXJhbXMiLCJpc1J1bm5hYmxlVG9vbExpa2UiLCJjb252ZXJ0VG9PcGVuQUlGdW5jdGlvbiIsInRvb2wiLCJmaWVsZHMiLCJmaWVsZHNDb3B5IiwidW5kZWZpbmVkIiwibmFtZSIsImRlc2NyaXB0aW9uIiwicGFyYW1ldGVycyIsInNjaGVtYSIsInN0cmljdCIsImNvbnZlcnRUb09wZW5BSVRvb2wiLCJ0b29sRGVmIiwidHlwZSIsImZ1bmN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/function_calling.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/hash.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/hash.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* reexport safe */ _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash),\n/* harmony export */   sha256: () => (/* reexport safe */ _js_sha256_hash_js__WEBPACK_IMPORTED_MODULE_1__.sha256)\n/* harmony export */ });\n/* harmony import */ var _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js-sha1/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js\");\n/* harmony import */ var _js_sha256_hash_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js-sha256/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/js-sha256/hash.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvaGFzaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlEO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2hhc2guanM/NGI0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBpbnNlY3VyZUhhc2ggfSBmcm9tIFwiLi9qcy1zaGExL2hhc2guanNcIjtcbmV4cG9ydCB7IHNoYTI1NiB9IGZyb20gXCIuL2pzLXNoYTI1Ni9oYXNoLmpzXCI7XG4iXSwibmFtZXMiOlsiaW5zZWN1cmVIYXNoIiwic2hhMjU2Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/js-sha1/hash.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* binding */ insecureHash)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined to deal with portability issues with importing crypto module\n/*\n * [js-sha1]{@link https://github.com/emn178/js-sha1}\n *\n * @version 0.6.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */ /*jslint bitwise: true */ \nvar root =  false ? 0 : {};\nvar HEX_CHARS = \"0123456789abcdef\".split(\"\");\nvar EXTRA = [\n    -2147483648,\n    8388608,\n    32768,\n    128\n];\nvar SHIFT = [\n    24,\n    16,\n    8,\n    0\n];\nvar OUTPUT_TYPES = [\n    \"hex\",\n    \"array\",\n    \"digest\",\n    \"arrayBuffer\"\n];\nvar blocks = [];\nfunction Sha1(sharedMemory) {\n    if (sharedMemory) {\n        blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        this.blocks = blocks;\n    } else {\n        this.blocks = [\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0\n        ];\n    }\n    this.h0 = 0x67452301;\n    this.h1 = 0xefcdab89;\n    this.h2 = 0x98badcfe;\n    this.h3 = 0x10325476;\n    this.h4 = 0xc3d2e1f0;\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n}\nSha1.prototype.update = function(message) {\n    if (this.finalized) {\n        return;\n    }\n    var notString = typeof message !== \"string\";\n    if (notString && message.constructor === root.ArrayBuffer) {\n        message = new Uint8Array(message);\n    }\n    var code, index = 0, i, length = message.length || 0, blocks = this.blocks;\n    while(index < length){\n        if (this.hashed) {\n            this.hashed = false;\n            blocks[0] = this.block;\n            blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        }\n        if (notString) {\n            for(i = this.start; index < length && i < 64; ++index){\n                blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n            }\n        } else {\n            for(i = this.start; index < length && i < 64; ++index){\n                code = message.charCodeAt(index);\n                if (code < 0x80) {\n                    blocks[i >> 2] |= code << SHIFT[i++ & 3];\n                } else if (code < 0x800) {\n                    blocks[i >> 2] |= (0xc0 | code >> 6) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else if (code < 0xd800 || code >= 0xe000) {\n                    blocks[i >> 2] |= (0xe0 | code >> 12) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else {\n                    code = 0x10000 + ((code & 0x3ff) << 10 | message.charCodeAt(++index) & 0x3ff);\n                    blocks[i >> 2] |= (0xf0 | code >> 18) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 12 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                }\n            }\n        }\n        this.lastByteIndex = i;\n        this.bytes += i - this.start;\n        if (i >= 64) {\n            this.block = blocks[16];\n            this.start = i - 64;\n            this.hash();\n            this.hashed = true;\n        } else {\n            this.start = i;\n        }\n    }\n    if (this.bytes > 4294967295) {\n        this.hBytes += this.bytes / 4294967296 << 0;\n        this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n};\nSha1.prototype.finalize = function() {\n    if (this.finalized) {\n        return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n        if (!this.hashed) {\n            this.hash();\n        }\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n};\nSha1.prototype.hash = function() {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4;\n    var f, j, t, blocks = this.blocks;\n    for(j = 16; j < 80; ++j){\n        t = blocks[j - 3] ^ blocks[j - 8] ^ blocks[j - 14] ^ blocks[j - 16];\n        blocks[j] = t << 1 | t >>> 31;\n    }\n    for(j = 0; j < 20; j += 5){\n        f = b & c | ~b & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1518500249 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | ~a & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1518500249 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | ~e & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1518500249 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | ~d & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1518500249 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | ~c & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1518500249 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 40; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1859775393 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1859775393 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1859775393 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1859775393 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1859775393 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 60; j += 5){\n        f = b & c | b & d | c & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 1894007588 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | a & c | b & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 1894007588 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | e & b | a & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 1894007588 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | d & a | e & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 1894007588 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | c & e | d & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 1894007588 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 80; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 899497514 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 899497514 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 899497514 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 899497514 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 899497514 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n};\nSha1.prototype.hex = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return HEX_CHARS[h0 >> 28 & 0x0f] + HEX_CHARS[h0 >> 24 & 0x0f] + HEX_CHARS[h0 >> 20 & 0x0f] + HEX_CHARS[h0 >> 16 & 0x0f] + HEX_CHARS[h0 >> 12 & 0x0f] + HEX_CHARS[h0 >> 8 & 0x0f] + HEX_CHARS[h0 >> 4 & 0x0f] + HEX_CHARS[h0 & 0x0f] + HEX_CHARS[h1 >> 28 & 0x0f] + HEX_CHARS[h1 >> 24 & 0x0f] + HEX_CHARS[h1 >> 20 & 0x0f] + HEX_CHARS[h1 >> 16 & 0x0f] + HEX_CHARS[h1 >> 12 & 0x0f] + HEX_CHARS[h1 >> 8 & 0x0f] + HEX_CHARS[h1 >> 4 & 0x0f] + HEX_CHARS[h1 & 0x0f] + HEX_CHARS[h2 >> 28 & 0x0f] + HEX_CHARS[h2 >> 24 & 0x0f] + HEX_CHARS[h2 >> 20 & 0x0f] + HEX_CHARS[h2 >> 16 & 0x0f] + HEX_CHARS[h2 >> 12 & 0x0f] + HEX_CHARS[h2 >> 8 & 0x0f] + HEX_CHARS[h2 >> 4 & 0x0f] + HEX_CHARS[h2 & 0x0f] + HEX_CHARS[h3 >> 28 & 0x0f] + HEX_CHARS[h3 >> 24 & 0x0f] + HEX_CHARS[h3 >> 20 & 0x0f] + HEX_CHARS[h3 >> 16 & 0x0f] + HEX_CHARS[h3 >> 12 & 0x0f] + HEX_CHARS[h3 >> 8 & 0x0f] + HEX_CHARS[h3 >> 4 & 0x0f] + HEX_CHARS[h3 & 0x0f] + HEX_CHARS[h4 >> 28 & 0x0f] + HEX_CHARS[h4 >> 24 & 0x0f] + HEX_CHARS[h4 >> 20 & 0x0f] + HEX_CHARS[h4 >> 16 & 0x0f] + HEX_CHARS[h4 >> 12 & 0x0f] + HEX_CHARS[h4 >> 8 & 0x0f] + HEX_CHARS[h4 >> 4 & 0x0f] + HEX_CHARS[h4 & 0x0f];\n};\nSha1.prototype.toString = Sha1.prototype.hex;\nSha1.prototype.digest = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return [\n        h0 >> 24 & 0xff,\n        h0 >> 16 & 0xff,\n        h0 >> 8 & 0xff,\n        h0 & 0xff,\n        h1 >> 24 & 0xff,\n        h1 >> 16 & 0xff,\n        h1 >> 8 & 0xff,\n        h1 & 0xff,\n        h2 >> 24 & 0xff,\n        h2 >> 16 & 0xff,\n        h2 >> 8 & 0xff,\n        h2 & 0xff,\n        h3 >> 24 & 0xff,\n        h3 >> 16 & 0xff,\n        h3 >> 8 & 0xff,\n        h3 & 0xff,\n        h4 >> 24 & 0xff,\n        h4 >> 16 & 0xff,\n        h4 >> 8 & 0xff,\n        h4 & 0xff\n    ];\n};\nSha1.prototype.array = Sha1.prototype.digest;\nSha1.prototype.arrayBuffer = function() {\n    this.finalize();\n    var buffer = new ArrayBuffer(20);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    return buffer;\n};\nlet hasLoggedWarning = false;\n/**\n * @deprecated Use `makeDefaultKeyEncoder()` to create a custom key encoder.\n * This function will be removed in a future version.\n */ const insecureHash = (message)=>{\n    if (!hasLoggedWarning) {\n        console.warn([\n            `The default method for hashing keys is insecure and will be replaced in a future version,`,\n            `but hasn't been replaced yet as to not break existing caches. It's recommended that you use`,\n            `a more secure hashing algorithm to avoid cache poisoning.`,\n            ``,\n            `See this page for more information:`,\n            `|`,\n            `> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm`\n        ].join(\"\\n\"));\n        hasLoggedWarning = true;\n    }\n    return new Sha1(true).update(message)[\"hex\"]();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanMtc2hhMS9oYXNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxjQUFjO0FBQ2QsdUVBQXVFO0FBQ3ZFOzs7Ozs7O0NBT0MsR0FDRCx1QkFBdUIsR0FDVjtBQUNiLElBQUlBLE9BQU8sTUFBMEIsR0FBR0MsQ0FBTUEsR0FBRyxDQUFDO0FBQ2xELElBQUlDLFlBQVksbUJBQW1CQyxLQUFLLENBQUM7QUFDekMsSUFBSUMsUUFBUTtJQUFDLENBQUM7SUFBWTtJQUFTO0lBQU87Q0FBSTtBQUM5QyxJQUFJQyxRQUFRO0lBQUM7SUFBSTtJQUFJO0lBQUc7Q0FBRTtBQUMxQixJQUFJQyxlQUFlO0lBQUM7SUFBTztJQUFTO0lBQVU7Q0FBYztBQUM1RCxJQUFJQyxTQUFTLEVBQUU7QUFDZixTQUFTQyxLQUFLQyxZQUFZO0lBQ3RCLElBQUlBLGNBQWM7UUFDZEYsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTjtRQUNwRSxJQUFJLENBQUNBLE1BQU0sR0FBR0E7SUFDbEIsT0FDSztRQUNELElBQUksQ0FBQ0EsTUFBTSxHQUFHO1lBQUM7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztTQUFFO0lBQ3JFO0lBQ0EsSUFBSSxDQUFDRyxFQUFFLEdBQUc7SUFDVixJQUFJLENBQUNDLEVBQUUsR0FBRztJQUNWLElBQUksQ0FBQ0MsRUFBRSxHQUFHO0lBQ1YsSUFBSSxDQUFDQyxFQUFFLEdBQUc7SUFDVixJQUFJLENBQUNDLEVBQUUsR0FBRztJQUNWLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUksQ0FBQ0MsTUFBTSxHQUFHO0lBQ3JELElBQUksQ0FBQ0MsU0FBUyxHQUFHLElBQUksQ0FBQ0MsTUFBTSxHQUFHO0lBQy9CLElBQUksQ0FBQ0MsS0FBSyxHQUFHO0FBQ2pCO0FBQ0FiLEtBQUtjLFNBQVMsQ0FBQ0MsTUFBTSxHQUFHLFNBQVVDLE9BQU87SUFDckMsSUFBSSxJQUFJLENBQUNMLFNBQVMsRUFBRTtRQUNoQjtJQUNKO0lBQ0EsSUFBSU0sWUFBWSxPQUFPRCxZQUFZO0lBQ25DLElBQUlDLGFBQWFELFFBQVFFLFdBQVcsS0FBSzFCLEtBQUsyQixXQUFXLEVBQUU7UUFDdkRILFVBQVUsSUFBSUksV0FBV0o7SUFDN0I7SUFDQSxJQUFJSyxNQUFNQyxRQUFRLEdBQUdDLEdBQUdDLFNBQVNSLFFBQVFRLE1BQU0sSUFBSSxHQUFHekIsU0FBUyxJQUFJLENBQUNBLE1BQU07SUFDMUUsTUFBT3VCLFFBQVFFLE9BQVE7UUFDbkIsSUFBSSxJQUFJLENBQUNaLE1BQU0sRUFBRTtZQUNiLElBQUksQ0FBQ0EsTUFBTSxHQUFHO1lBQ2RiLE1BQU0sQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDUSxLQUFLO1lBQ3RCUixNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsR0FBRyxHQUNOO1FBQ3BFO1FBQ0EsSUFBSWtCLFdBQVc7WUFDWCxJQUFLTSxJQUFJLElBQUksQ0FBQ2YsS0FBSyxFQUFFYyxRQUFRRSxVQUFVRCxJQUFJLElBQUksRUFBRUQsTUFBTztnQkFDcER2QixNQUFNLENBQUN3QixLQUFLLEVBQUUsSUFBSVAsT0FBTyxDQUFDTSxNQUFNLElBQUl6QixLQUFLLENBQUMwQixNQUFNLEVBQUU7WUFDdEQ7UUFDSixPQUNLO1lBQ0QsSUFBS0EsSUFBSSxJQUFJLENBQUNmLEtBQUssRUFBRWMsUUFBUUUsVUFBVUQsSUFBSSxJQUFJLEVBQUVELE1BQU87Z0JBQ3BERCxPQUFPTCxRQUFRUyxVQUFVLENBQUNIO2dCQUMxQixJQUFJRCxPQUFPLE1BQU07b0JBQ2J0QixNQUFNLENBQUN3QixLQUFLLEVBQUUsSUFBSUYsUUFBUXhCLEtBQUssQ0FBQzBCLE1BQU0sRUFBRTtnQkFDNUMsT0FDSyxJQUFJRixPQUFPLE9BQU87b0JBQ25CdEIsTUFBTSxDQUFDd0IsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFRRixRQUFRLENBQUMsS0FBTXhCLEtBQUssQ0FBQzBCLE1BQU0sRUFBRTtvQkFDeER4QixNQUFNLENBQUN3QixLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQVFGLE9BQU8sSUFBSSxLQUFNeEIsS0FBSyxDQUFDMEIsTUFBTSxFQUFFO2dCQUM5RCxPQUNLLElBQUlGLE9BQU8sVUFBVUEsUUFBUSxRQUFRO29CQUN0Q3RCLE1BQU0sQ0FBQ3dCLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBUUYsUUFBUSxFQUFFLEtBQU14QixLQUFLLENBQUMwQixNQUFNLEVBQUU7b0JBQ3pEeEIsTUFBTSxDQUFDd0IsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFRLFFBQVMsSUFBSyxJQUFJLEtBQU0xQixLQUFLLENBQUMwQixNQUFNLEVBQUU7b0JBQ2pFeEIsTUFBTSxDQUFDd0IsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFRRixPQUFPLElBQUksS0FBTXhCLEtBQUssQ0FBQzBCLE1BQU0sRUFBRTtnQkFDOUQsT0FDSztvQkFDREYsT0FDSSxVQUNLLEVBQUVBLE9BQU8sS0FBSSxLQUFNLEtBQU9MLFFBQVFTLFVBQVUsQ0FBQyxFQUFFSCxTQUFTLEtBQUs7b0JBQ3RFdkIsTUFBTSxDQUFDd0IsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFRRixRQUFRLEVBQUUsS0FBTXhCLEtBQUssQ0FBQzBCLE1BQU0sRUFBRTtvQkFDekR4QixNQUFNLENBQUN3QixLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQVEsUUFBUyxLQUFNLElBQUksS0FBTTFCLEtBQUssQ0FBQzBCLE1BQU0sRUFBRTtvQkFDbEV4QixNQUFNLENBQUN3QixLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQVEsUUFBUyxJQUFLLElBQUksS0FBTTFCLEtBQUssQ0FBQzBCLE1BQU0sRUFBRTtvQkFDakV4QixNQUFNLENBQUN3QixLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQVFGLE9BQU8sSUFBSSxLQUFNeEIsS0FBSyxDQUFDMEIsTUFBTSxFQUFFO2dCQUM5RDtZQUNKO1FBQ0o7UUFDQSxJQUFJLENBQUNHLGFBQWEsR0FBR0g7UUFDckIsSUFBSSxDQUFDZCxLQUFLLElBQUljLElBQUksSUFBSSxDQUFDZixLQUFLO1FBQzVCLElBQUllLEtBQUssSUFBSTtZQUNULElBQUksQ0FBQ2hCLEtBQUssR0FBR1IsTUFBTSxDQUFDLEdBQUc7WUFDdkIsSUFBSSxDQUFDUyxLQUFLLEdBQUdlLElBQUk7WUFDakIsSUFBSSxDQUFDSSxJQUFJO1lBQ1QsSUFBSSxDQUFDZixNQUFNLEdBQUc7UUFDbEIsT0FDSztZQUNELElBQUksQ0FBQ0osS0FBSyxHQUFHZTtRQUNqQjtJQUNKO0lBQ0EsSUFBSSxJQUFJLENBQUNkLEtBQUssR0FBRyxZQUFZO1FBQ3pCLElBQUksQ0FBQ0MsTUFBTSxJQUFJLElBQUssQ0FBQ0QsS0FBSyxHQUFHLGNBQWU7UUFDNUMsSUFBSSxDQUFDQSxLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLEdBQUc7SUFDOUI7SUFDQSxPQUFPLElBQUk7QUFDZjtBQUNBVCxLQUFLYyxTQUFTLENBQUNjLFFBQVEsR0FBRztJQUN0QixJQUFJLElBQUksQ0FBQ2pCLFNBQVMsRUFBRTtRQUNoQjtJQUNKO0lBQ0EsSUFBSSxDQUFDQSxTQUFTLEdBQUc7SUFDakIsSUFBSVosU0FBUyxJQUFJLENBQUNBLE1BQU0sRUFBRXdCLElBQUksSUFBSSxDQUFDRyxhQUFhO0lBQ2hEM0IsTUFBTSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUNRLEtBQUs7SUFDdkJSLE1BQU0sQ0FBQ3dCLEtBQUssRUFBRSxJQUFJM0IsS0FBSyxDQUFDMkIsSUFBSSxFQUFFO0lBQzlCLElBQUksQ0FBQ2hCLEtBQUssR0FBR1IsTUFBTSxDQUFDLEdBQUc7SUFDdkIsSUFBSXdCLEtBQUssSUFBSTtRQUNULElBQUksQ0FBQyxJQUFJLENBQUNYLE1BQU0sRUFBRTtZQUNkLElBQUksQ0FBQ2UsSUFBSTtRQUNiO1FBQ0E1QixNQUFNLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQ1EsS0FBSztRQUN0QlIsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTjtJQUNwRTtJQUNBQSxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUssQ0FBQ1csTUFBTSxJQUFJLElBQU0sSUFBSSxDQUFDRCxLQUFLLEtBQUs7SUFDbERWLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDVSxLQUFLLElBQUk7SUFDM0IsSUFBSSxDQUFDa0IsSUFBSTtBQUNiO0FBQ0EzQixLQUFLYyxTQUFTLENBQUNhLElBQUksR0FBRztJQUNsQixJQUFJRSxJQUFJLElBQUksQ0FBQzNCLEVBQUUsRUFBRTRCLElBQUksSUFBSSxDQUFDM0IsRUFBRSxFQUFFNEIsSUFBSSxJQUFJLENBQUMzQixFQUFFLEVBQUU0QixJQUFJLElBQUksQ0FBQzNCLEVBQUUsRUFBRTRCLElBQUksSUFBSSxDQUFDM0IsRUFBRTtJQUNuRSxJQUFJNEIsR0FBR0MsR0FBR0MsR0FBR3JDLFNBQVMsSUFBSSxDQUFDQSxNQUFNO0lBQ2pDLElBQUtvQyxJQUFJLElBQUlBLElBQUksSUFBSSxFQUFFQSxFQUFHO1FBQ3RCQyxJQUFJckMsTUFBTSxDQUFDb0MsSUFBSSxFQUFFLEdBQUdwQyxNQUFNLENBQUNvQyxJQUFJLEVBQUUsR0FBR3BDLE1BQU0sQ0FBQ29DLElBQUksR0FBRyxHQUFHcEMsTUFBTSxDQUFDb0MsSUFBSSxHQUFHO1FBQ25FcEMsTUFBTSxDQUFDb0MsRUFBRSxHQUFHLEtBQU0sSUFBTUMsTUFBTTtJQUNsQztJQUNBLElBQUtELElBQUksR0FBR0EsSUFBSSxJQUFJQSxLQUFLLEVBQUc7UUFDeEJELElBQUksSUFBS0gsSUFBTSxDQUFDRCxJQUFJRTtRQUNwQkksSUFBSSxLQUFNLElBQU1QLE1BQU07UUFDdEJJLElBQUksSUFBS0MsSUFBSUQsSUFBSSxhQUFhbEMsTUFBTSxDQUFDb0MsRUFBRSxJQUFLO1FBQzVDTCxJQUFJLEtBQU0sS0FBT0EsTUFBTTtRQUN2QkksSUFBSSxJQUFLSixJQUFNLENBQUNELElBQUlFO1FBQ3BCSyxJQUFJLEtBQU0sSUFBTUgsTUFBTTtRQUN0QkQsSUFBSSxJQUFLRSxJQUFJRixJQUFJLGFBQWFqQyxNQUFNLENBQUNvQyxJQUFJLEVBQUUsSUFBSztRQUNoRE4sSUFBSSxLQUFNLEtBQU9BLE1BQU07UUFDdkJLLElBQUksSUFBS0wsSUFBTSxDQUFDSSxJQUFJSDtRQUNwQk0sSUFBSSxLQUFNLElBQU1KLE1BQU07UUFDdEJELElBQUksSUFBS0csSUFBSUgsSUFBSSxhQUFhaEMsTUFBTSxDQUFDb0MsSUFBSSxFQUFFLElBQUs7UUFDaERGLElBQUksS0FBTSxLQUFPQSxNQUFNO1FBQ3ZCQyxJQUFJLElBQUtELElBQU0sQ0FBQ0QsSUFBSUg7UUFDcEJPLElBQUksS0FBTSxJQUFNTCxNQUFNO1FBQ3RCRCxJQUFJLElBQUtJLElBQUlKLElBQUksYUFBYS9CLE1BQU0sQ0FBQ29DLElBQUksRUFBRSxJQUFLO1FBQ2hESCxJQUFJLEtBQU0sS0FBT0EsTUFBTTtRQUN2QkUsSUFBSSxJQUFLRixJQUFNLENBQUNELElBQUlFO1FBQ3BCRyxJQUFJLEtBQU0sSUFBTU4sTUFBTTtRQUN0QkQsSUFBSSxJQUFLSyxJQUFJTCxJQUFJLGFBQWE5QixNQUFNLENBQUNvQyxJQUFJLEVBQUUsSUFBSztRQUNoREosSUFBSSxLQUFNLEtBQU9BLE1BQU07SUFDM0I7SUFDQSxNQUFPSSxJQUFJLElBQUlBLEtBQUssRUFBRztRQUNuQkQsSUFBSUosSUFBSUMsSUFBSUM7UUFDWkksSUFBSSxLQUFNLElBQU1QLE1BQU07UUFDdEJJLElBQUksSUFBS0MsSUFBSUQsSUFBSSxhQUFhbEMsTUFBTSxDQUFDb0MsRUFBRSxJQUFLO1FBQzVDTCxJQUFJLEtBQU0sS0FBT0EsTUFBTTtRQUN2QkksSUFBSUwsSUFBSUMsSUFBSUM7UUFDWkssSUFBSSxLQUFNLElBQU1ILE1BQU07UUFDdEJELElBQUksSUFBS0UsSUFBSUYsSUFBSSxhQUFhakMsTUFBTSxDQUFDb0MsSUFBSSxFQUFFLElBQUs7UUFDaEROLElBQUksS0FBTSxLQUFPQSxNQUFNO1FBQ3ZCSyxJQUFJRCxJQUFJSixJQUFJQztRQUNaTSxJQUFJLEtBQU0sSUFBTUosTUFBTTtRQUN0QkQsSUFBSSxJQUFLRyxJQUFJSCxJQUFJLGFBQWFoQyxNQUFNLENBQUNvQyxJQUFJLEVBQUUsSUFBSztRQUNoREYsSUFBSSxLQUFNLEtBQU9BLE1BQU07UUFDdkJDLElBQUlGLElBQUlDLElBQUlKO1FBQ1pPLElBQUksS0FBTSxJQUFNTCxNQUFNO1FBQ3RCRCxJQUFJLElBQUtJLElBQUlKLElBQUksYUFBYS9CLE1BQU0sQ0FBQ29DLElBQUksRUFBRSxJQUFLO1FBQ2hESCxJQUFJLEtBQU0sS0FBT0EsTUFBTTtRQUN2QkUsSUFBSUgsSUFBSUMsSUFBSUM7UUFDWkcsSUFBSSxLQUFNLElBQU1OLE1BQU07UUFDdEJELElBQUksSUFBS0ssSUFBSUwsSUFBSSxhQUFhOUIsTUFBTSxDQUFDb0MsSUFBSSxFQUFFLElBQUs7UUFDaERKLElBQUksS0FBTSxLQUFPQSxNQUFNO0lBQzNCO0lBQ0EsTUFBT0ksSUFBSSxJQUFJQSxLQUFLLEVBQUc7UUFDbkJELElBQUksSUFBS0gsSUFBTUQsSUFBSUUsSUFBTUQsSUFBSUM7UUFDN0JJLElBQUksS0FBTSxJQUFNUCxNQUFNO1FBQ3RCSSxJQUFJLElBQUtDLElBQUlELElBQUksYUFBYWxDLE1BQU0sQ0FBQ29DLEVBQUUsSUFBSztRQUM1Q0wsSUFBSSxLQUFNLEtBQU9BLE1BQU07UUFDdkJJLElBQUksSUFBS0osSUFBTUQsSUFBSUUsSUFBTUQsSUFBSUM7UUFDN0JLLElBQUksS0FBTSxJQUFNSCxNQUFNO1FBQ3RCRCxJQUFJLElBQUtFLElBQUlGLElBQUksYUFBYWpDLE1BQU0sQ0FBQ29DLElBQUksRUFBRSxJQUFLO1FBQ2hETixJQUFJLEtBQU0sS0FBT0EsTUFBTTtRQUN2QkssSUFBSSxJQUFLTCxJQUFNSSxJQUFJSCxJQUFNRCxJQUFJQztRQUM3Qk0sSUFBSSxLQUFNLElBQU1KLE1BQU07UUFDdEJELElBQUksSUFBS0csSUFBSUgsSUFBSSxhQUFhaEMsTUFBTSxDQUFDb0MsSUFBSSxFQUFFLElBQUs7UUFDaERGLElBQUksS0FBTSxLQUFPQSxNQUFNO1FBQ3ZCQyxJQUFJLElBQUtELElBQU1ELElBQUlILElBQU1JLElBQUlKO1FBQzdCTyxJQUFJLEtBQU0sSUFBTUwsTUFBTTtRQUN0QkQsSUFBSSxJQUFLSSxJQUFJSixJQUFJLGFBQWEvQixNQUFNLENBQUNvQyxJQUFJLEVBQUUsSUFBSztRQUNoREgsSUFBSSxLQUFNLEtBQU9BLE1BQU07UUFDdkJFLElBQUksSUFBS0YsSUFBTUQsSUFBSUUsSUFBTUQsSUFBSUM7UUFDN0JHLElBQUksS0FBTSxJQUFNTixNQUFNO1FBQ3RCRCxJQUFJLElBQUtLLElBQUlMLElBQUksYUFBYTlCLE1BQU0sQ0FBQ29DLElBQUksRUFBRSxJQUFLO1FBQ2hESixJQUFJLEtBQU0sS0FBT0EsTUFBTTtJQUMzQjtJQUNBLE1BQU9JLElBQUksSUFBSUEsS0FBSyxFQUFHO1FBQ25CRCxJQUFJSixJQUFJQyxJQUFJQztRQUNaSSxJQUFJLEtBQU0sSUFBTVAsTUFBTTtRQUN0QkksSUFBSSxJQUFLQyxJQUFJRCxJQUFJLFlBQVlsQyxNQUFNLENBQUNvQyxFQUFFLElBQUs7UUFDM0NMLElBQUksS0FBTSxLQUFPQSxNQUFNO1FBQ3ZCSSxJQUFJTCxJQUFJQyxJQUFJQztRQUNaSyxJQUFJLEtBQU0sSUFBTUgsTUFBTTtRQUN0QkQsSUFBSSxJQUFLRSxJQUFJRixJQUFJLFlBQVlqQyxNQUFNLENBQUNvQyxJQUFJLEVBQUUsSUFBSztRQUMvQ04sSUFBSSxLQUFNLEtBQU9BLE1BQU07UUFDdkJLLElBQUlELElBQUlKLElBQUlDO1FBQ1pNLElBQUksS0FBTSxJQUFNSixNQUFNO1FBQ3RCRCxJQUFJLElBQUtHLElBQUlILElBQUksWUFBWWhDLE1BQU0sQ0FBQ29DLElBQUksRUFBRSxJQUFLO1FBQy9DRixJQUFJLEtBQU0sS0FBT0EsTUFBTTtRQUN2QkMsSUFBSUYsSUFBSUMsSUFBSUo7UUFDWk8sSUFBSSxLQUFNLElBQU1MLE1BQU07UUFDdEJELElBQUksSUFBS0ksSUFBSUosSUFBSSxZQUFZL0IsTUFBTSxDQUFDb0MsSUFBSSxFQUFFLElBQUs7UUFDL0NILElBQUksS0FBTSxLQUFPQSxNQUFNO1FBQ3ZCRSxJQUFJSCxJQUFJQyxJQUFJQztRQUNaRyxJQUFJLEtBQU0sSUFBTU4sTUFBTTtRQUN0QkQsSUFBSSxJQUFLSyxJQUFJTCxJQUFJLFlBQVk5QixNQUFNLENBQUNvQyxJQUFJLEVBQUUsSUFBSztRQUMvQ0osSUFBSSxLQUFNLEtBQU9BLE1BQU07SUFDM0I7SUFDQSxJQUFJLENBQUM3QixFQUFFLEdBQUcsSUFBSyxDQUFDQSxFQUFFLEdBQUcyQixLQUFNO0lBQzNCLElBQUksQ0FBQzFCLEVBQUUsR0FBRyxJQUFLLENBQUNBLEVBQUUsR0FBRzJCLEtBQU07SUFDM0IsSUFBSSxDQUFDMUIsRUFBRSxHQUFHLElBQUssQ0FBQ0EsRUFBRSxHQUFHMkIsS0FBTTtJQUMzQixJQUFJLENBQUMxQixFQUFFLEdBQUcsSUFBSyxDQUFDQSxFQUFFLEdBQUcyQixLQUFNO0lBQzNCLElBQUksQ0FBQzFCLEVBQUUsR0FBRyxJQUFLLENBQUNBLEVBQUUsR0FBRzJCLEtBQU07QUFDL0I7QUFDQWpDLEtBQUtjLFNBQVMsQ0FBQ3VCLEdBQUcsR0FBRztJQUNqQixJQUFJLENBQUNULFFBQVE7SUFDYixJQUFJMUIsS0FBSyxJQUFJLENBQUNBLEVBQUUsRUFBRUMsS0FBSyxJQUFJLENBQUNBLEVBQUUsRUFBRUMsS0FBSyxJQUFJLENBQUNBLEVBQUUsRUFBRUMsS0FBSyxJQUFJLENBQUNBLEVBQUUsRUFBRUMsS0FBSyxJQUFJLENBQUNBLEVBQUU7SUFDeEUsT0FBUVosU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQ2hDQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNRLEtBQUssS0FBSyxHQUNwQlIsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNTLEtBQUssS0FBSyxHQUNwQlQsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNVLEtBQUssS0FBSyxHQUNwQlYsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNXLEtBQUssS0FBSyxHQUNwQlgsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNZLEtBQUssS0FBSztBQUM1QjtBQUNBTixLQUFLYyxTQUFTLENBQUN3QixRQUFRLEdBQUd0QyxLQUFLYyxTQUFTLENBQUN1QixHQUFHO0FBQzVDckMsS0FBS2MsU0FBUyxDQUFDeUIsTUFBTSxHQUFHO0lBQ3BCLElBQUksQ0FBQ1gsUUFBUTtJQUNiLElBQUkxQixLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRTtJQUN4RSxPQUFPO1FBQ0ZKLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztRQUNKQyxNQUFNLEtBQU07UUFDWkEsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sSUFBSztRQUNaQSxLQUFLO1FBQ0pDLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztLQUNSO0FBQ0w7QUFDQU4sS0FBS2MsU0FBUyxDQUFDMEIsS0FBSyxHQUFHeEMsS0FBS2MsU0FBUyxDQUFDeUIsTUFBTTtBQUM1Q3ZDLEtBQUtjLFNBQVMsQ0FBQzJCLFdBQVcsR0FBRztJQUN6QixJQUFJLENBQUNiLFFBQVE7SUFDYixJQUFJYyxTQUFTLElBQUl2QixZQUFZO0lBQzdCLElBQUl3QixXQUFXLElBQUlDLFNBQVNGO0lBQzVCQyxTQUFTRSxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMzQyxFQUFFO0lBQzdCeUMsU0FBU0UsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDMUMsRUFBRTtJQUM3QndDLFNBQVNFLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQ3pDLEVBQUU7SUFDN0J1QyxTQUFTRSxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUN4QyxFQUFFO0lBQzlCc0MsU0FBU0UsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDdkMsRUFBRTtJQUM5QixPQUFPb0M7QUFDWDtBQUNBLElBQUlJLG1CQUFtQjtBQUN2Qjs7O0NBR0MsR0FDTSxNQUFNQyxlQUFlLENBQUMvQjtJQUN6QixJQUFJLENBQUM4QixrQkFBa0I7UUFDbkJFLFFBQVFDLElBQUksQ0FBQztZQUNULENBQUMseUZBQXlGLENBQUM7WUFDM0YsQ0FBQywyRkFBMkYsQ0FBQztZQUM3RixDQUFDLHlEQUF5RCxDQUFDO1lBQzNELENBQUMsQ0FBQztZQUNGLENBQUMsbUNBQW1DLENBQUM7WUFDckMsQ0FBQyxDQUFDLENBQUM7WUFDSCxDQUFDLGtGQUFrRixDQUFDO1NBQ3ZGLENBQUNDLElBQUksQ0FBQztRQUNQSixtQkFBbUI7SUFDdkI7SUFDQSxPQUFPLElBQUk5QyxLQUFLLE1BQU1lLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDLE1BQU07QUFDaEQsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanMtc2hhMS9oYXNoLmpzPzFkYzYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIElubGluZWQgdG8gZGVhbCB3aXRoIHBvcnRhYmlsaXR5IGlzc3VlcyB3aXRoIGltcG9ydGluZyBjcnlwdG8gbW9kdWxlXG4vKlxuICogW2pzLXNoYTFde0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbW4xNzgvanMtc2hhMX1cbiAqXG4gKiBAdmVyc2lvbiAwLjYuMFxuICogQGF1dGhvciBDaGVuLCBZaS1DeXVhbiBbZW1uMTc4QGdtYWlsLmNvbV1cbiAqIEBjb3B5cmlnaHQgQ2hlbiwgWWktQ3l1YW4gMjAxNC0yMDE3XG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuLypqc2xpbnQgYml0d2lzZTogdHJ1ZSAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcm9vdCA9IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgPyB3aW5kb3cgOiB7fTtcbnZhciBIRVhfQ0hBUlMgPSBcIjAxMjM0NTY3ODlhYmNkZWZcIi5zcGxpdChcIlwiKTtcbnZhciBFWFRSQSA9IFstMjE0NzQ4MzY0OCwgODM4ODYwOCwgMzI3NjgsIDEyOF07XG52YXIgU0hJRlQgPSBbMjQsIDE2LCA4LCAwXTtcbnZhciBPVVRQVVRfVFlQRVMgPSBbXCJoZXhcIiwgXCJhcnJheVwiLCBcImRpZ2VzdFwiLCBcImFycmF5QnVmZmVyXCJdO1xudmFyIGJsb2NrcyA9IFtdO1xuZnVuY3Rpb24gU2hhMShzaGFyZWRNZW1vcnkpIHtcbiAgICBpZiAoc2hhcmVkTWVtb3J5KSB7XG4gICAgICAgIGJsb2Nrc1swXSA9XG4gICAgICAgICAgICBibG9ja3NbMTZdID1cbiAgICAgICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgICAgICBibG9ja3NbMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzZdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzldID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzExXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgICAgICB0aGlzLmJsb2NrcyA9IGJsb2NrcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuYmxvY2tzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdO1xuICAgIH1cbiAgICB0aGlzLmgwID0gMHg2NzQ1MjMwMTtcbiAgICB0aGlzLmgxID0gMHhlZmNkYWI4OTtcbiAgICB0aGlzLmgyID0gMHg5OGJhZGNmZTtcbiAgICB0aGlzLmgzID0gMHgxMDMyNTQ3NjtcbiAgICB0aGlzLmg0ID0gMHhjM2QyZTFmMDtcbiAgICB0aGlzLmJsb2NrID0gdGhpcy5zdGFydCA9IHRoaXMuYnl0ZXMgPSB0aGlzLmhCeXRlcyA9IDA7XG4gICAgdGhpcy5maW5hbGl6ZWQgPSB0aGlzLmhhc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuZmlyc3QgPSB0cnVlO1xufVxuU2hhMS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgbm90U3RyaW5nID0gdHlwZW9mIG1lc3NhZ2UgIT09IFwic3RyaW5nXCI7XG4gICAgaWYgKG5vdFN0cmluZyAmJiBtZXNzYWdlLmNvbnN0cnVjdG9yID09PSByb290LkFycmF5QnVmZmVyKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBuZXcgVWludDhBcnJheShtZXNzYWdlKTtcbiAgICB9XG4gICAgdmFyIGNvZGUsIGluZGV4ID0gMCwgaSwgbGVuZ3RoID0gbWVzc2FnZS5sZW5ndGggfHwgMCwgYmxvY2tzID0gdGhpcy5ibG9ja3M7XG4gICAgd2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc2hlZCkge1xuICAgICAgICAgICAgdGhpcy5oYXNoZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJsb2Nrc1swXSA9IHRoaXMuYmxvY2s7XG4gICAgICAgICAgICBibG9ja3NbMTZdID1cbiAgICAgICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgICAgICBibG9ja3NbMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzZdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzldID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzExXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub3RTdHJpbmcpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9IG1lc3NhZ2VbaW5kZXhdIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChpID0gdGhpcy5zdGFydDsgaW5kZXggPCBsZW5ndGggJiYgaSA8IDY0OyArK2luZGV4KSB7XG4gICAgICAgICAgICAgICAgY29kZSA9IG1lc3NhZ2UuY2hhckNvZGVBdChpbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGUgPCAweDgwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9IGNvZGUgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvZGUgPCAweDgwMCkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhjMCB8IChjb2RlID4+IDYpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29kZSA8IDB4ZDgwMCB8fCBjb2RlID49IDB4ZTAwMCkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhlMCB8IChjb2RlID4+IDEyKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDYpICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAweDEwMDAwICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKChjb2RlICYgMHgzZmYpIDw8IDEwKSB8IChtZXNzYWdlLmNoYXJDb2RlQXQoKytpbmRleCkgJiAweDNmZikpO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhmMCB8IChjb2RlID4+IDE4KSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDEyKSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoKGNvZGUgPj4gNikgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKGNvZGUgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEJ5dGVJbmRleCA9IGk7XG4gICAgICAgIHRoaXMuYnl0ZXMgKz0gaSAtIHRoaXMuc3RhcnQ7XG4gICAgICAgIGlmIChpID49IDY0KSB7XG4gICAgICAgICAgICB0aGlzLmJsb2NrID0gYmxvY2tzWzE2XTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSBpIC0gNjQ7XG4gICAgICAgICAgICB0aGlzLmhhc2goKTtcbiAgICAgICAgICAgIHRoaXMuaGFzaGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmJ5dGVzID4gNDI5NDk2NzI5NSkge1xuICAgICAgICB0aGlzLmhCeXRlcyArPSAodGhpcy5ieXRlcyAvIDQyOTQ5NjcyOTYpIDw8IDA7XG4gICAgICAgIHRoaXMuYnl0ZXMgPSB0aGlzLmJ5dGVzICUgNDI5NDk2NzI5NjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuU2hhMS5wcm90b3R5cGUuZmluYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xuICAgIHZhciBibG9ja3MgPSB0aGlzLmJsb2NrcywgaSA9IHRoaXMubGFzdEJ5dGVJbmRleDtcbiAgICBibG9ja3NbMTZdID0gdGhpcy5ibG9jaztcbiAgICBibG9ja3NbaSA+PiAyXSB8PSBFWFRSQVtpICYgM107XG4gICAgdGhpcy5ibG9jayA9IGJsb2Nrc1sxNl07XG4gICAgaWYgKGkgPj0gNTYpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc2hlZCkge1xuICAgICAgICAgICAgdGhpcy5oYXNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgYmxvY2tzWzBdID0gdGhpcy5ibG9jaztcbiAgICAgICAgYmxvY2tzWzE2XSA9XG4gICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgIGJsb2Nrc1syXSA9XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1szXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s2XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s4XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s5XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTFdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEyXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgIH1cbiAgICBibG9ja3NbMTRdID0gKHRoaXMuaEJ5dGVzIDw8IDMpIHwgKHRoaXMuYnl0ZXMgPj4+IDI5KTtcbiAgICBibG9ja3NbMTVdID0gdGhpcy5ieXRlcyA8PCAzO1xuICAgIHRoaXMuaGFzaCgpO1xufTtcblNoYTEucHJvdG90eXBlLmhhc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGEgPSB0aGlzLmgwLCBiID0gdGhpcy5oMSwgYyA9IHRoaXMuaDIsIGQgPSB0aGlzLmgzLCBlID0gdGhpcy5oNDtcbiAgICB2YXIgZiwgaiwgdCwgYmxvY2tzID0gdGhpcy5ibG9ja3M7XG4gICAgZm9yIChqID0gMTY7IGogPCA4MDsgKytqKSB7XG4gICAgICAgIHQgPSBibG9ja3NbaiAtIDNdIF4gYmxvY2tzW2ogLSA4XSBeIGJsb2Nrc1tqIC0gMTRdIF4gYmxvY2tzW2ogLSAxNl07XG4gICAgICAgIGJsb2Nrc1tqXSA9ICh0IDw8IDEpIHwgKHQgPj4+IDMxKTtcbiAgICB9XG4gICAgZm9yIChqID0gMDsgaiA8IDIwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IChiICYgYykgfCAofmIgJiBkKTtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gKGEgJiBiKSB8ICh+YSAmIGMpO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDFdKSA8PCAwO1xuICAgICAgICBhID0gKGEgPDwgMzApIHwgKGEgPj4+IDIpO1xuICAgICAgICBmID0gKGUgJiBhKSB8ICh+ZSAmIGIpO1xuICAgICAgICB0ID0gKGQgPDwgNSkgfCAoZCA+Pj4gMjcpO1xuICAgICAgICBjID0gKHQgKyBmICsgYyArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gKGQgJiBlKSB8ICh+ZCAmIGEpO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gKGMgJiBkKSB8ICh+YyAmIGUpO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDRdKSA8PCAwO1xuICAgICAgICBjID0gKGMgPDwgMzApIHwgKGMgPj4+IDIpO1xuICAgIH1cbiAgICBmb3IgKDsgaiA8IDQwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IGIgXiBjIF4gZDtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gYSBeIGIgXiBjO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDFdKSA8PCAwO1xuICAgICAgICBhID0gKGEgPDwgMzApIHwgKGEgPj4+IDIpO1xuICAgICAgICBmID0gZSBeIGEgXiBiO1xuICAgICAgICB0ID0gKGQgPDwgNSkgfCAoZCA+Pj4gMjcpO1xuICAgICAgICBjID0gKHQgKyBmICsgYyArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gZCBeIGUgXiBhO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gYyBeIGQgXiBlO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDRdKSA8PCAwO1xuICAgICAgICBjID0gKGMgPDwgMzApIHwgKGMgPj4+IDIpO1xuICAgIH1cbiAgICBmb3IgKDsgaiA8IDYwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IChiICYgYykgfCAoYiAmIGQpIHwgKGMgJiBkKTtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gKGEgJiBiKSB8IChhICYgYykgfCAoYiAmIGMpO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDFdKSA8PCAwO1xuICAgICAgICBhID0gKGEgPDwgMzApIHwgKGEgPj4+IDIpO1xuICAgICAgICBmID0gKGUgJiBhKSB8IChlICYgYikgfCAoYSAmIGIpO1xuICAgICAgICB0ID0gKGQgPDwgNSkgfCAoZCA+Pj4gMjcpO1xuICAgICAgICBjID0gKHQgKyBmICsgYyAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gKGQgJiBlKSB8IChkICYgYSkgfCAoZSAmIGEpO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gKGMgJiBkKSB8IChjICYgZSkgfCAoZCAmIGUpO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDRdKSA8PCAwO1xuICAgICAgICBjID0gKGMgPDwgMzApIHwgKGMgPj4+IDIpO1xuICAgIH1cbiAgICBmb3IgKDsgaiA8IDgwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IGIgXiBjIF4gZDtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgLSA4OTk0OTc1MTQgKyBibG9ja3Nbal0pIDw8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAzMCkgfCAoYiA+Pj4gMik7XG4gICAgICAgIGYgPSBhIF4gYiBeIGM7XG4gICAgICAgIHQgPSAoZSA8PCA1KSB8IChlID4+PiAyNyk7XG4gICAgICAgIGQgPSAodCArIGYgKyBkIC0gODk5NDk3NTE0ICsgYmxvY2tzW2ogKyAxXSkgPDwgMDtcbiAgICAgICAgYSA9IChhIDw8IDMwKSB8IChhID4+PiAyKTtcbiAgICAgICAgZiA9IGUgXiBhIF4gYjtcbiAgICAgICAgdCA9IChkIDw8IDUpIHwgKGQgPj4+IDI3KTtcbiAgICAgICAgYyA9ICh0ICsgZiArIGMgLSA4OTk0OTc1MTQgKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gZCBeIGUgXiBhO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiAtIDg5OTQ5NzUxNCArIGJsb2Nrc1tqICsgM10pIDw8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAzMCkgfCAoZCA+Pj4gMik7XG4gICAgICAgIGYgPSBjIF4gZCBeIGU7XG4gICAgICAgIHQgPSAoYiA8PCA1KSB8IChiID4+PiAyNyk7XG4gICAgICAgIGEgPSAodCArIGYgKyBhIC0gODk5NDk3NTE0ICsgYmxvY2tzW2ogKyA0XSkgPDwgMDtcbiAgICAgICAgYyA9IChjIDw8IDMwKSB8IChjID4+PiAyKTtcbiAgICB9XG4gICAgdGhpcy5oMCA9ICh0aGlzLmgwICsgYSkgPDwgMDtcbiAgICB0aGlzLmgxID0gKHRoaXMuaDEgKyBiKSA8PCAwO1xuICAgIHRoaXMuaDIgPSAodGhpcy5oMiArIGMpIDw8IDA7XG4gICAgdGhpcy5oMyA9ICh0aGlzLmgzICsgZCkgPDwgMDtcbiAgICB0aGlzLmg0ID0gKHRoaXMuaDQgKyBlKSA8PCAwO1xufTtcblNoYTEucHJvdG90eXBlLmhleCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgdmFyIGgwID0gdGhpcy5oMCwgaDEgPSB0aGlzLmgxLCBoMiA9IHRoaXMuaDIsIGgzID0gdGhpcy5oMywgaDQgPSB0aGlzLmg0O1xuICAgIHJldHVybiAoSEVYX0NIQVJTWyhoMCA+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDAgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2gxICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toMiAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDMgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2g0ICYgMHgwZl0pO1xufTtcblNoYTEucHJvdG90eXBlLnRvU3RyaW5nID0gU2hhMS5wcm90b3R5cGUuaGV4O1xuU2hhMS5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZmluYWxpemUoKTtcbiAgICB2YXIgaDAgPSB0aGlzLmgwLCBoMSA9IHRoaXMuaDEsIGgyID0gdGhpcy5oMiwgaDMgPSB0aGlzLmgzLCBoNCA9IHRoaXMuaDQ7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgKGgwID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoMCA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDAgPj4gOCkgJiAweGZmLFxuICAgICAgICBoMCAmIDB4ZmYsXG4gICAgICAgIChoMSA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDEgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGgxID4+IDgpICYgMHhmZixcbiAgICAgICAgaDEgJiAweGZmLFxuICAgICAgICAoaDIgPj4gMjQpICYgMHhmZixcbiAgICAgICAgKGgyID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoMiA+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGgyICYgMHhmZixcbiAgICAgICAgKGgzID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoMyA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDMgPj4gOCkgJiAweGZmLFxuICAgICAgICBoMyAmIDB4ZmYsXG4gICAgICAgIChoNCA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDQgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGg0ID4+IDgpICYgMHhmZixcbiAgICAgICAgaDQgJiAweGZmLFxuICAgIF07XG59O1xuU2hhMS5wcm90b3R5cGUuYXJyYXkgPSBTaGExLnByb3RvdHlwZS5kaWdlc3Q7XG5TaGExLnByb3RvdHlwZS5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigyMCk7XG4gICAgdmFyIGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDAsIHRoaXMuaDApO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMig0LCB0aGlzLmgxKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoOCwgdGhpcy5oMik7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDEyLCB0aGlzLmgzKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoMTYsIHRoaXMuaDQpO1xuICAgIHJldHVybiBidWZmZXI7XG59O1xubGV0IGhhc0xvZ2dlZFdhcm5pbmcgPSBmYWxzZTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIGBtYWtlRGVmYXVsdEtleUVuY29kZXIoKWAgdG8gY3JlYXRlIGEgY3VzdG9tIGtleSBlbmNvZGVyLlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IGluc2VjdXJlSGFzaCA9IChtZXNzYWdlKSA9PiB7XG4gICAgaWYgKCFoYXNMb2dnZWRXYXJuaW5nKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihbXG4gICAgICAgICAgICBgVGhlIGRlZmF1bHQgbWV0aG9kIGZvciBoYXNoaW5nIGtleXMgaXMgaW5zZWN1cmUgYW5kIHdpbGwgYmUgcmVwbGFjZWQgaW4gYSBmdXR1cmUgdmVyc2lvbixgLFxuICAgICAgICAgICAgYGJ1dCBoYXNuJ3QgYmVlbiByZXBsYWNlZCB5ZXQgYXMgdG8gbm90IGJyZWFrIGV4aXN0aW5nIGNhY2hlcy4gSXQncyByZWNvbW1lbmRlZCB0aGF0IHlvdSB1c2VgLFxuICAgICAgICAgICAgYGEgbW9yZSBzZWN1cmUgaGFzaGluZyBhbGdvcml0aG0gdG8gYXZvaWQgY2FjaGUgcG9pc29uaW5nLmAsXG4gICAgICAgICAgICBgYCxcbiAgICAgICAgICAgIGBTZWUgdGhpcyBwYWdlIGZvciBtb3JlIGluZm9ybWF0aW9uOmAsXG4gICAgICAgICAgICBgfGAsXG4gICAgICAgICAgICBg4pSUPiBodHRwczovL2pzLmxhbmdjaGFpbi5jb20vZG9jcy90cm91Ymxlc2hvb3Rpbmcvd2FybmluZ3MvaW5zZWN1cmUtY2FjaGUtYWxnb3JpdGhtYCxcbiAgICAgICAgXS5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgaGFzTG9nZ2VkV2FybmluZyA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2hhMSh0cnVlKS51cGRhdGUobWVzc2FnZSlbXCJoZXhcIl0oKTtcbn07XG4iXSwibmFtZXMiOlsicm9vdCIsIndpbmRvdyIsIkhFWF9DSEFSUyIsInNwbGl0IiwiRVhUUkEiLCJTSElGVCIsIk9VVFBVVF9UWVBFUyIsImJsb2NrcyIsIlNoYTEiLCJzaGFyZWRNZW1vcnkiLCJoMCIsImgxIiwiaDIiLCJoMyIsImg0IiwiYmxvY2siLCJzdGFydCIsImJ5dGVzIiwiaEJ5dGVzIiwiZmluYWxpemVkIiwiaGFzaGVkIiwiZmlyc3QiLCJwcm90b3R5cGUiLCJ1cGRhdGUiLCJtZXNzYWdlIiwibm90U3RyaW5nIiwiY29uc3RydWN0b3IiLCJBcnJheUJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJjb2RlIiwiaW5kZXgiLCJpIiwibGVuZ3RoIiwiY2hhckNvZGVBdCIsImxhc3RCeXRlSW5kZXgiLCJoYXNoIiwiZmluYWxpemUiLCJhIiwiYiIsImMiLCJkIiwiZSIsImYiLCJqIiwidCIsImhleCIsInRvU3RyaW5nIiwiZGlnZXN0IiwiYXJyYXkiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsImRhdGFWaWV3IiwiRGF0YVZpZXciLCJzZXRVaW50MzIiLCJoYXNMb2dnZWRXYXJuaW5nIiwiaW5zZWN1cmVIYXNoIiwiY29uc29sZSIsIndhcm4iLCJqb2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/js-sha256/hash.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/js-sha256/hash.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sha256: () => (/* binding */ sha256)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined to deal with portability issues with importing crypto module\n/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.11.1\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2025\n * @license MIT\n */ /*jslint bitwise: true */ \nvar HEX_CHARS = \"0123456789abcdef\".split(\"\");\nvar EXTRA = [\n    -2147483648,\n    8388608,\n    32768,\n    128\n];\nvar SHIFT = [\n    24,\n    16,\n    8,\n    0\n];\nvar K = [\n    0x428a2f98,\n    0x71374491,\n    0xb5c0fbcf,\n    0xe9b5dba5,\n    0x3956c25b,\n    0x59f111f1,\n    0x923f82a4,\n    0xab1c5ed5,\n    0xd807aa98,\n    0x12835b01,\n    0x243185be,\n    0x550c7dc3,\n    0x72be5d74,\n    0x80deb1fe,\n    0x9bdc06a7,\n    0xc19bf174,\n    0xe49b69c1,\n    0xefbe4786,\n    0x0fc19dc6,\n    0x240ca1cc,\n    0x2de92c6f,\n    0x4a7484aa,\n    0x5cb0a9dc,\n    0x76f988da,\n    0x983e5152,\n    0xa831c66d,\n    0xb00327c8,\n    0xbf597fc7,\n    0xc6e00bf3,\n    0xd5a79147,\n    0x06ca6351,\n    0x14292967,\n    0x27b70a85,\n    0x2e1b2138,\n    0x4d2c6dfc,\n    0x53380d13,\n    0x650a7354,\n    0x766a0abb,\n    0x81c2c92e,\n    0x92722c85,\n    0xa2bfe8a1,\n    0xa81a664b,\n    0xc24b8b70,\n    0xc76c51a3,\n    0xd192e819,\n    0xd6990624,\n    0xf40e3585,\n    0x106aa070,\n    0x19a4c116,\n    0x1e376c08,\n    0x2748774c,\n    0x34b0bcb5,\n    0x391c0cb3,\n    0x4ed8aa4a,\n    0x5b9cca4f,\n    0x682e6ff3,\n    0x748f82ee,\n    0x78a5636f,\n    0x84c87814,\n    0x8cc70208,\n    0x90befffa,\n    0xa4506ceb,\n    0xbef9a3f7,\n    0xc67178f2\n];\nvar OUTPUT_TYPES = [\n    \"hex\",\n    \"array\",\n    \"digest\",\n    \"arrayBuffer\"\n];\nvar blocks = [];\nfunction Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n        blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        this.blocks = blocks;\n    } else {\n        this.blocks = [\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0\n        ];\n    }\n    if (is224) {\n        this.h0 = 0xc1059ed8;\n        this.h1 = 0x367cd507;\n        this.h2 = 0x3070dd17;\n        this.h3 = 0xf70e5939;\n        this.h4 = 0xffc00b31;\n        this.h5 = 0x68581511;\n        this.h6 = 0x64f98fa7;\n        this.h7 = 0xbefa4fa4;\n    } else {\n        // 256\n        this.h0 = 0x6a09e667;\n        this.h1 = 0xbb67ae85;\n        this.h2 = 0x3c6ef372;\n        this.h3 = 0xa54ff53a;\n        this.h4 = 0x510e527f;\n        this.h5 = 0x9b05688c;\n        this.h6 = 0x1f83d9ab;\n        this.h7 = 0x5be0cd19;\n    }\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n}\nSha256.prototype.update = function(message) {\n    if (this.finalized) {\n        return;\n    }\n    var notString, type = typeof message;\n    if (type !== \"string\") {\n        if (type === \"object\") {\n            if (message === null) {\n                throw new Error(ERROR);\n            } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n                message = new Uint8Array(message);\n            } else if (!Array.isArray(message)) {\n                if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n                    throw new Error(ERROR);\n                }\n            }\n        } else {\n            throw new Error(ERROR);\n        }\n        notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n    while(index < length){\n        if (this.hashed) {\n            this.hashed = false;\n            blocks[0] = this.block;\n            this.block = blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        }\n        if (notString) {\n            for(i = this.start; index < length && i < 64; ++index){\n                blocks[i >>> 2] |= message[index] << SHIFT[i++ & 3];\n            }\n        } else {\n            for(i = this.start; index < length && i < 64; ++index){\n                code = message.charCodeAt(index);\n                if (code < 0x80) {\n                    blocks[i >>> 2] |= code << SHIFT[i++ & 3];\n                } else if (code < 0x800) {\n                    blocks[i >>> 2] |= (0xc0 | code >>> 6) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else if (code < 0xd800 || code >= 0xe000) {\n                    blocks[i >>> 2] |= (0xe0 | code >>> 12) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | code >>> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else {\n                    code = 0x10000 + ((code & 0x3ff) << 10 | message.charCodeAt(++index) & 0x3ff);\n                    blocks[i >>> 2] |= (0xf0 | code >>> 18) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | code >>> 12 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | code >>> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                }\n            }\n        }\n        this.lastByteIndex = i;\n        this.bytes += i - this.start;\n        if (i >= 64) {\n            this.block = blocks[16];\n            this.start = i - 64;\n            this.hash();\n            this.hashed = true;\n        } else {\n            this.start = i;\n        }\n    }\n    if (this.bytes > 4294967295) {\n        this.hBytes += this.bytes / 4294967296 << 0;\n        this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n};\nSha256.prototype.finalize = function() {\n    if (this.finalized) {\n        return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >>> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n        if (!this.hashed) {\n            this.hash();\n        }\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n};\nSha256.prototype.hash = function() {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6, h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n    for(j = 16; j < 64; ++j){\n        // rightrotate\n        t1 = blocks[j - 15];\n        s0 = (t1 >>> 7 | t1 << 25) ^ (t1 >>> 18 | t1 << 14) ^ t1 >>> 3;\n        t1 = blocks[j - 2];\n        s1 = (t1 >>> 17 | t1 << 15) ^ (t1 >>> 19 | t1 << 13) ^ t1 >>> 10;\n        blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n    bc = b & c;\n    for(j = 0; j < 64; j += 4){\n        if (this.first) {\n            if (this.is224) {\n                ab = 300032;\n                t1 = blocks[0] - 1413257819;\n                h = t1 - 150054599 << 0;\n                d = t1 + 24177077 << 0;\n            } else {\n                ab = 704751109;\n                t1 = blocks[0] - 210244248;\n                h = t1 - 1521486534 << 0;\n                d = t1 + 143694565 << 0;\n            }\n            this.first = false;\n        } else {\n            s0 = (a >>> 2 | a << 30) ^ (a >>> 13 | a << 19) ^ (a >>> 22 | a << 10);\n            s1 = (e >>> 6 | e << 26) ^ (e >>> 11 | e << 21) ^ (e >>> 25 | e << 7);\n            ab = a & b;\n            maj = ab ^ a & c ^ bc;\n            ch = e & f ^ ~e & g;\n            t1 = h + s1 + ch + K[j] + blocks[j];\n            t2 = s0 + maj;\n            h = d + t1 << 0;\n            d = t1 + t2 << 0;\n        }\n        s0 = (d >>> 2 | d << 30) ^ (d >>> 13 | d << 19) ^ (d >>> 22 | d << 10);\n        s1 = (h >>> 6 | h << 26) ^ (h >>> 11 | h << 21) ^ (h >>> 25 | h << 7);\n        da = d & a;\n        maj = da ^ d & b ^ ab;\n        ch = g & h ^ ~g & e;\n        t1 = f + s1 + ch + K[j + 1] + blocks[j + 1];\n        t2 = s0 + maj;\n        g = c + t1 << 0;\n        c = t1 + t2 << 0;\n        s0 = (c >>> 2 | c << 30) ^ (c >>> 13 | c << 19) ^ (c >>> 22 | c << 10);\n        s1 = (g >>> 6 | g << 26) ^ (g >>> 11 | g << 21) ^ (g >>> 25 | g << 7);\n        cd = c & d;\n        maj = cd ^ c & a ^ da;\n        ch = f & g ^ ~f & h;\n        t1 = e + s1 + ch + K[j + 2] + blocks[j + 2];\n        t2 = s0 + maj;\n        f = b + t1 << 0;\n        b = t1 + t2 << 0;\n        s0 = (b >>> 2 | b << 30) ^ (b >>> 13 | b << 19) ^ (b >>> 22 | b << 10);\n        s1 = (f >>> 6 | f << 26) ^ (f >>> 11 | f << 21) ^ (f >>> 25 | f << 7);\n        bc = b & c;\n        maj = bc ^ b & d ^ cd;\n        ch = f & g ^ ~f & h;\n        t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n        t2 = s0 + maj;\n        e = a + t1 << 0;\n        a = t1 + t2 << 0;\n        this.chromeBugWorkAround = true;\n    }\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n};\nSha256.prototype.hex = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5, h6 = this.h6, h7 = this.h7;\n    var hex = HEX_CHARS[h0 >>> 28 & 0x0f] + HEX_CHARS[h0 >>> 24 & 0x0f] + HEX_CHARS[h0 >>> 20 & 0x0f] + HEX_CHARS[h0 >>> 16 & 0x0f] + HEX_CHARS[h0 >>> 12 & 0x0f] + HEX_CHARS[h0 >>> 8 & 0x0f] + HEX_CHARS[h0 >>> 4 & 0x0f] + HEX_CHARS[h0 & 0x0f] + HEX_CHARS[h1 >>> 28 & 0x0f] + HEX_CHARS[h1 >>> 24 & 0x0f] + HEX_CHARS[h1 >>> 20 & 0x0f] + HEX_CHARS[h1 >>> 16 & 0x0f] + HEX_CHARS[h1 >>> 12 & 0x0f] + HEX_CHARS[h1 >>> 8 & 0x0f] + HEX_CHARS[h1 >>> 4 & 0x0f] + HEX_CHARS[h1 & 0x0f] + HEX_CHARS[h2 >>> 28 & 0x0f] + HEX_CHARS[h2 >>> 24 & 0x0f] + HEX_CHARS[h2 >>> 20 & 0x0f] + HEX_CHARS[h2 >>> 16 & 0x0f] + HEX_CHARS[h2 >>> 12 & 0x0f] + HEX_CHARS[h2 >>> 8 & 0x0f] + HEX_CHARS[h2 >>> 4 & 0x0f] + HEX_CHARS[h2 & 0x0f] + HEX_CHARS[h3 >>> 28 & 0x0f] + HEX_CHARS[h3 >>> 24 & 0x0f] + HEX_CHARS[h3 >>> 20 & 0x0f] + HEX_CHARS[h3 >>> 16 & 0x0f] + HEX_CHARS[h3 >>> 12 & 0x0f] + HEX_CHARS[h3 >>> 8 & 0x0f] + HEX_CHARS[h3 >>> 4 & 0x0f] + HEX_CHARS[h3 & 0x0f] + HEX_CHARS[h4 >>> 28 & 0x0f] + HEX_CHARS[h4 >>> 24 & 0x0f] + HEX_CHARS[h4 >>> 20 & 0x0f] + HEX_CHARS[h4 >>> 16 & 0x0f] + HEX_CHARS[h4 >>> 12 & 0x0f] + HEX_CHARS[h4 >>> 8 & 0x0f] + HEX_CHARS[h4 >>> 4 & 0x0f] + HEX_CHARS[h4 & 0x0f] + HEX_CHARS[h5 >>> 28 & 0x0f] + HEX_CHARS[h5 >>> 24 & 0x0f] + HEX_CHARS[h5 >>> 20 & 0x0f] + HEX_CHARS[h5 >>> 16 & 0x0f] + HEX_CHARS[h5 >>> 12 & 0x0f] + HEX_CHARS[h5 >>> 8 & 0x0f] + HEX_CHARS[h5 >>> 4 & 0x0f] + HEX_CHARS[h5 & 0x0f] + HEX_CHARS[h6 >>> 28 & 0x0f] + HEX_CHARS[h6 >>> 24 & 0x0f] + HEX_CHARS[h6 >>> 20 & 0x0f] + HEX_CHARS[h6 >>> 16 & 0x0f] + HEX_CHARS[h6 >>> 12 & 0x0f] + HEX_CHARS[h6 >>> 8 & 0x0f] + HEX_CHARS[h6 >>> 4 & 0x0f] + HEX_CHARS[h6 & 0x0f];\n    if (!this.is224) {\n        hex += HEX_CHARS[h7 >>> 28 & 0x0f] + HEX_CHARS[h7 >>> 24 & 0x0f] + HEX_CHARS[h7 >>> 20 & 0x0f] + HEX_CHARS[h7 >>> 16 & 0x0f] + HEX_CHARS[h7 >>> 12 & 0x0f] + HEX_CHARS[h7 >>> 8 & 0x0f] + HEX_CHARS[h7 >>> 4 & 0x0f] + HEX_CHARS[h7 & 0x0f];\n    }\n    return hex;\n};\nSha256.prototype.toString = Sha256.prototype.hex;\nSha256.prototype.digest = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5, h6 = this.h6, h7 = this.h7;\n    var arr = [\n        h0 >>> 24 & 0xff,\n        h0 >>> 16 & 0xff,\n        h0 >>> 8 & 0xff,\n        h0 & 0xff,\n        h1 >>> 24 & 0xff,\n        h1 >>> 16 & 0xff,\n        h1 >>> 8 & 0xff,\n        h1 & 0xff,\n        h2 >>> 24 & 0xff,\n        h2 >>> 16 & 0xff,\n        h2 >>> 8 & 0xff,\n        h2 & 0xff,\n        h3 >>> 24 & 0xff,\n        h3 >>> 16 & 0xff,\n        h3 >>> 8 & 0xff,\n        h3 & 0xff,\n        h4 >>> 24 & 0xff,\n        h4 >>> 16 & 0xff,\n        h4 >>> 8 & 0xff,\n        h4 & 0xff,\n        h5 >>> 24 & 0xff,\n        h5 >>> 16 & 0xff,\n        h5 >>> 8 & 0xff,\n        h5 & 0xff,\n        h6 >>> 24 & 0xff,\n        h6 >>> 16 & 0xff,\n        h6 >>> 8 & 0xff,\n        h6 & 0xff\n    ];\n    if (!this.is224) {\n        arr.push(h7 >>> 24 & 0xff, h7 >>> 16 & 0xff, h7 >>> 8 & 0xff, h7 & 0xff);\n    }\n    return arr;\n};\nSha256.prototype.array = Sha256.prototype.digest;\nSha256.prototype.arrayBuffer = function() {\n    this.finalize();\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n        dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n};\nconst sha256 = (...strings)=>{\n    return new Sha256(false, true).update(strings.join(\"\")).hex();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanMtc2hhMjU2L2hhc2guanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGNBQWM7QUFDZCx1RUFBdUU7QUFDdkU7Ozs7Ozs7Q0FPQyxHQUNELHVCQUF1QixHQUNWO0FBQ2IsSUFBSUEsWUFBWSxtQkFBbUJDLEtBQUssQ0FBQztBQUN6QyxJQUFJQyxRQUFRO0lBQUMsQ0FBQztJQUFZO0lBQVM7SUFBTztDQUFJO0FBQzlDLElBQUlDLFFBQVE7SUFBQztJQUFJO0lBQUk7SUFBRztDQUFFO0FBQzFCLElBQUlDLElBQUk7SUFDSjtJQUFZO0lBQVk7SUFBWTtJQUFZO0lBQVk7SUFDNUQ7SUFBWTtJQUFZO0lBQVk7SUFBWTtJQUFZO0lBQzVEO0lBQVk7SUFBWTtJQUFZO0lBQVk7SUFBWTtJQUM1RDtJQUFZO0lBQVk7SUFBWTtJQUFZO0lBQVk7SUFDNUQ7SUFBWTtJQUFZO0lBQVk7SUFBWTtJQUFZO0lBQzVEO0lBQVk7SUFBWTtJQUFZO0lBQVk7SUFBWTtJQUM1RDtJQUFZO0lBQVk7SUFBWTtJQUFZO0lBQVk7SUFDNUQ7SUFBWTtJQUFZO0lBQVk7SUFBWTtJQUFZO0lBQzVEO0lBQVk7SUFBWTtJQUFZO0lBQVk7SUFBWTtJQUM1RDtJQUFZO0lBQVk7SUFBWTtJQUFZO0lBQVk7SUFDNUQ7SUFBWTtJQUFZO0lBQVk7Q0FDdkM7QUFDRCxJQUFJQyxlQUFlO0lBQUM7SUFBTztJQUFTO0lBQVU7Q0FBYztBQUM1RCxJQUFJQyxTQUFTLEVBQUU7QUFDZixTQUFTQyxPQUFPQyxLQUFLLEVBQUVDLFlBQVk7SUFDL0IsSUFBSUEsY0FBYztRQUNkSCxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsRUFBRSxHQUNMQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsR0FBRyxHQUNOQSxNQUFNLENBQUMsR0FBRyxHQUNOO1FBQ3BFLElBQUksQ0FBQ0EsTUFBTSxHQUFHQTtJQUNsQixPQUNLO1FBQ0QsSUFBSSxDQUFDQSxNQUFNLEdBQUc7WUFBQztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1NBQUU7SUFDckU7SUFDQSxJQUFJRSxPQUFPO1FBQ1AsSUFBSSxDQUFDRSxFQUFFLEdBQUc7UUFDVixJQUFJLENBQUNDLEVBQUUsR0FBRztRQUNWLElBQUksQ0FBQ0MsRUFBRSxHQUFHO1FBQ1YsSUFBSSxDQUFDQyxFQUFFLEdBQUc7UUFDVixJQUFJLENBQUNDLEVBQUUsR0FBRztRQUNWLElBQUksQ0FBQ0MsRUFBRSxHQUFHO1FBQ1YsSUFBSSxDQUFDQyxFQUFFLEdBQUc7UUFDVixJQUFJLENBQUNDLEVBQUUsR0FBRztJQUNkLE9BQ0s7UUFDRCxNQUFNO1FBQ04sSUFBSSxDQUFDUCxFQUFFLEdBQUc7UUFDVixJQUFJLENBQUNDLEVBQUUsR0FBRztRQUNWLElBQUksQ0FBQ0MsRUFBRSxHQUFHO1FBQ1YsSUFBSSxDQUFDQyxFQUFFLEdBQUc7UUFDVixJQUFJLENBQUNDLEVBQUUsR0FBRztRQUNWLElBQUksQ0FBQ0MsRUFBRSxHQUFHO1FBQ1YsSUFBSSxDQUFDQyxFQUFFLEdBQUc7UUFDVixJQUFJLENBQUNDLEVBQUUsR0FBRztJQUNkO0lBQ0EsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFB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QUFNLEtBQUssR0FDN0JBLFNBQVMsQ0FBQyxPQUFRLElBQUssS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE9BQVEsSUFBSyxLQUFLLEdBQzVCQSxTQUFTLENBQUNZLEtBQUssS0FBSyxHQUNwQlosU0FBUyxDQUFDLE9BQVEsS0FBTSxLQUFLLEdBQzdCQSxTQUFTLENBQUMsT0FBUSxLQUFNLEtBQUssR0FDN0JBLFNBQVMsQ0FBQyxPQUFRLEtBQU0sS0FBSyxHQUM3QkEsU0FBUyxDQUFDLE9BQVEsS0FBTSxLQUFLLEdBQzdCQSxTQUFTLENBQUMsT0FBUSxLQUFNLEtBQUssR0FDN0JBLFNBQVMsQ0FBQyxPQUFRLElBQUssS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE9BQVEsSUFBSyxLQUFLLEdBQzVCQSxTQUFTLENBQUNhLEtBQUssS0FBSyxHQUNwQmIsU0FBUyxDQUFDLE9BQVEsS0FBTSxLQUFLLEdBQzdCQSxTQUFTLENBQUMsT0FBUSxLQUFNLEtBQUssR0FDN0JBLFNBQVMsQ0FBQyxPQUFRLEtBQU0sS0FBSyxHQUM3QkEsU0FBUyxDQUFDLE9BQVEsS0FBTSxLQUFLLEdBQzdCQSxTQUFTLENBQUMsT0FBUSxLQUFNLEtBQUssR0FDN0JBLFNBQVMsQ0FBQyxPQUFRLElBQUssS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE9BQVEsSUFBSyxLQUFLLEdBQzVCQSxTQUFTLENBQUNjLEtBQUssS0FBSyxHQUNwQmQsU0FBUyxDQUFDLE9BQVEsS0FBTSxLQUFLLEdBQzdCQSxTQUFTLENBQUMsT0FBUSxLQUFNLEtBQUssR0FDN0JBLFNBQVMsQ0FBQyxPQUFRLEtBQU0sS0FBSyxHQUM3QkEsU0FBUyxDQUFDLE9BQVEsS0FBTSxLQUFLLEdBQzdCQSxTQUFTLENBQUMsT0FBUSxLQUFNLEtBQUssR0FDN0JBLFNBQVMsQ0FBQyxPQUFRLElBQUssS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE9BQVEsSUFBSyxLQUFLLEdBQzVCQSxTQUFTLENBQUNlLEtBQUssS0FBSyxHQUNwQmYsU0FBUyxDQUFDLE9BQVEsS0FBTSxLQUFLLEdBQzdCQSxTQUFT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QVNFLFNBQVMsQ0FBQyxJQUFJLElBQUksQ0FBQ2hFLEVBQUU7SUFDOUI4RCxTQUFTRSxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUMvRCxFQUFFO0lBQzlCNkQsU0FBU0UsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDOUQsRUFBRTtJQUM5QjRELFNBQVNFLFNBQVMsQ0FBQyxJQUFJLElBQUksQ0FBQzdELEVBQUU7SUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQ1IsS0FBSyxFQUFFO1FBQ2JtRSxTQUFTRSxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUM1RCxFQUFFO0lBQ2xDO0lBQ0EsT0FBT3lEO0FBQ1g7QUFDTyxNQUFNSSxTQUFTLENBQUMsR0FBR0M7SUFDdEIsT0FBTyxJQUFJeEUsT0FBTyxPQUFPLE1BQU1tQixNQUFNLENBQUNxRCxRQUFRQyxJQUFJLENBQUMsS0FBS2IsR0FBRztBQUMvRCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9qcy1zaGEyNTYvaGFzaC5qcz84OGVlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG4vLyBJbmxpbmVkIHRvIGRlYWwgd2l0aCBwb3J0YWJpbGl0eSBpc3N1ZXMgd2l0aCBpbXBvcnRpbmcgY3J5cHRvIG1vZHVsZVxuLyoqXG4gKiBbanMtc2hhMjU2XXtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW1uMTc4L2pzLXNoYTI1Nn1cbiAqXG4gKiBAdmVyc2lvbiAwLjExLjFcbiAqIEBhdXRob3IgQ2hlbiwgWWktQ3l1YW4gW2VtbjE3OEBnbWFpbC5jb21dXG4gKiBAY29weXJpZ2h0IENoZW4sIFlpLUN5dWFuIDIwMTQtMjAyNVxuICogQGxpY2Vuc2UgTUlUXG4gKi9cbi8qanNsaW50IGJpdHdpc2U6IHRydWUgKi9cblwidXNlIHN0cmljdFwiO1xudmFyIEhFWF9DSEFSUyA9IFwiMDEyMzQ1Njc4OWFiY2RlZlwiLnNwbGl0KFwiXCIpO1xudmFyIEVYVFJBID0gWy0yMTQ3NDgzNjQ4LCA4Mzg4NjA4LCAzMjc2OCwgMTI4XTtcbnZhciBTSElGVCA9IFsyNCwgMTYsIDgsIDBdO1xudmFyIEsgPSBbXG4gICAgMHg0MjhhMmY5OCwgMHg3MTM3NDQ5MSwgMHhiNWMwZmJjZiwgMHhlOWI1ZGJhNSwgMHgzOTU2YzI1YiwgMHg1OWYxMTFmMSxcbiAgICAweDkyM2Y4MmE0LCAweGFiMWM1ZWQ1LCAweGQ4MDdhYTk4LCAweDEyODM1YjAxLCAweDI0MzE4NWJlLCAweDU1MGM3ZGMzLFxuICAgIDB4NzJiZTVkNzQsIDB4ODBkZWIxZmUsIDB4OWJkYzA2YTcsIDB4YzE5YmYxNzQsIDB4ZTQ5YjY5YzEsIDB4ZWZiZTQ3ODYsXG4gICAgMHgwZmMxOWRjNiwgMHgyNDBjYTFjYywgMHgyZGU5MmM2ZiwgMHg0YTc0ODRhYSwgMHg1Y2IwYTlkYywgMHg3NmY5ODhkYSxcbiAgICAweDk4M2U1MTUyLCAweGE4MzFjNjZkLCAweGIwMDMyN2M4LCAweGJmNTk3ZmM3LCAweGM2ZTAwYmYzLCAweGQ1YTc5MTQ3LFxuICAgIDB4MDZjYTYzNTEsIDB4MTQyOTI5NjcsIDB4MjdiNzBhODUsIDB4MmUxYjIxMzgsIDB4NGQyYzZkZmMsIDB4NTMzODBkMTMsXG4gICAgMHg2NTBhNzM1NCwgMHg3NjZhMGFiYiwgMHg4MWMyYzkyZSwgMHg5MjcyMmM4NSwgMHhhMmJmZThhMSwgMHhhODFhNjY0YixcbiAgICAweGMyNGI4YjcwLCAweGM3NmM1MWEzLCAweGQxOTJlODE5LCAweGQ2OTkwNjI0LCAweGY0MGUzNTg1LCAweDEwNmFhMDcwLFxuICAgIDB4MTlhNGMxMTYsIDB4MWUzNzZjMDgsIDB4Mjc0ODc3NGMsIDB4MzRiMGJjYjUsIDB4MzkxYzBjYjMsIDB4NGVkOGFhNGEsXG4gICAgMHg1YjljY2E0ZiwgMHg2ODJlNmZmMywgMHg3NDhmODJlZSwgMHg3OGE1NjM2ZiwgMHg4NGM4NzgxNCwgMHg4Y2M3MDIwOCxcbiAgICAweDkwYmVmZmZhLCAweGE0NTA2Y2ViLCAweGJlZjlhM2Y3LCAweGM2NzE3OGYyLFxuXTtcbnZhciBPVVRQVVRfVFlQRVMgPSBbXCJoZXhcIiwgXCJhcnJheVwiLCBcImRpZ2VzdFwiLCBcImFycmF5QnVmZmVyXCJdO1xudmFyIGJsb2NrcyA9IFtdO1xuZnVuY3Rpb24gU2hhMjU2KGlzMjI0LCBzaGFyZWRNZW1vcnkpIHtcbiAgICBpZiAoc2hhcmVkTWVtb3J5KSB7XG4gICAgICAgIGJsb2Nrc1swXSA9XG4gICAgICAgICAgICBibG9ja3NbMTZdID1cbiAgICAgICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgICAgICBibG9ja3NbMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzZdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzldID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzExXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgICAgICB0aGlzLmJsb2NrcyA9IGJsb2NrcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuYmxvY2tzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdO1xuICAgIH1cbiAgICBpZiAoaXMyMjQpIHtcbiAgICAgICAgdGhpcy5oMCA9IDB4YzEwNTllZDg7XG4gICAgICAgIHRoaXMuaDEgPSAweDM2N2NkNTA3O1xuICAgICAgICB0aGlzLmgyID0gMHgzMDcwZGQxNztcbiAgICAgICAgdGhpcy5oMyA9IDB4ZjcwZTU5Mzk7XG4gICAgICAgIHRoaXMuaDQgPSAweGZmYzAwYjMxO1xuICAgICAgICB0aGlzLmg1ID0gMHg2ODU4MTUxMTtcbiAgICAgICAgdGhpcy5oNiA9IDB4NjRmOThmYTc7XG4gICAgICAgIHRoaXMuaDcgPSAweGJlZmE0ZmE0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gMjU2XG4gICAgICAgIHRoaXMuaDAgPSAweDZhMDllNjY3O1xuICAgICAgICB0aGlzLmgxID0gMHhiYjY3YWU4NTtcbiAgICAgICAgdGhpcy5oMiA9IDB4M2M2ZWYzNzI7XG4gICAgICAgIHRoaXMuaDMgPSAweGE1NGZmNTNhO1xuICAgICAgICB0aGlzLmg0ID0gMHg1MTBlNTI3ZjtcbiAgICAgICAgdGhpcy5oNSA9IDB4OWIwNTY4OGM7XG4gICAgICAgIHRoaXMuaDYgPSAweDFmODNkOWFiO1xuICAgICAgICB0aGlzLmg3ID0gMHg1YmUwY2QxOTtcbiAgICB9XG4gICAgdGhpcy5ibG9jayA9IHRoaXMuc3RhcnQgPSB0aGlzLmJ5dGVzID0gdGhpcy5oQnl0ZXMgPSAwO1xuICAgIHRoaXMuZmluYWxpemVkID0gdGhpcy5oYXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmZpcnN0ID0gdHJ1ZTtcbiAgICB0aGlzLmlzMjI0ID0gaXMyMjQ7XG59XG5TaGEyNTYucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIG5vdFN0cmluZywgdHlwZSA9IHR5cGVvZiBtZXNzYWdlO1xuICAgIGlmICh0eXBlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmICh0eXBlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJPUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChBUlJBWV9CVUZGRVIgJiYgbWVzc2FnZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gbmV3IFVpbnQ4QXJyYXkobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIGlmICghQVJSQVlfQlVGRkVSIHx8ICFBcnJheUJ1ZmZlci5pc1ZpZXcobWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUk9SKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIG5vdFN0cmluZyA9IHRydWU7XG4gICAgfVxuICAgIHZhciBjb2RlLCBpbmRleCA9IDAsIGksIGxlbmd0aCA9IG1lc3NhZ2UubGVuZ3RoLCBibG9ja3MgPSB0aGlzLmJsb2NrcztcbiAgICB3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzaGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc2hlZCA9IGZhbHNlO1xuICAgICAgICAgICAgYmxvY2tzWzBdID0gdGhpcy5ibG9jaztcbiAgICAgICAgICAgIHRoaXMuYmxvY2sgPVxuICAgICAgICAgICAgICAgIGJsb2Nrc1sxNl0gPVxuICAgICAgICAgICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbM10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzhdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub3RTdHJpbmcpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+PiAyXSB8PSBtZXNzYWdlW2luZGV4XSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuICAgICAgICAgICAgICAgIGNvZGUgPSBtZXNzYWdlLmNoYXJDb2RlQXQoaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmIChjb2RlIDwgMHg4MCkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+Pj4gMl0gfD0gY29kZSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29kZSA8IDB4ODAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+PiAyXSB8PSAoMHhjMCB8IChjb2RlID4+PiA2KSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2RlIDwgMHhkODAwIHx8IGNvZGUgPj0gMHhlMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+PiAyXSB8PSAoMHhlMCB8IChjb2RlID4+PiAxMikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+Pj4gMl0gfD0gKDB4ODAgfCAoKGNvZGUgPj4+IDYpICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+Pj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgMHgxMDAwMCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCgoY29kZSAmIDB4M2ZmKSA8PCAxMCkgfCAobWVzc2FnZS5jaGFyQ29kZUF0KCsraW5kZXgpICYgMHgzZmYpKTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4+IDJdIHw9ICgweGYwIHwgKGNvZGUgPj4+IDE4KSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+PiAyXSB8PSAoMHg4MCB8ICgoY29kZSA+Pj4gMTIpICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+Pj4gMl0gfD0gKDB4ODAgfCAoKGNvZGUgPj4+IDYpICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+Pj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0Qnl0ZUluZGV4ID0gaTtcbiAgICAgICAgdGhpcy5ieXRlcyArPSBpIC0gdGhpcy5zdGFydDtcbiAgICAgICAgaWYgKGkgPj0gNjQpIHtcbiAgICAgICAgICAgIHRoaXMuYmxvY2sgPSBibG9ja3NbMTZdO1xuICAgICAgICAgICAgdGhpcy5zdGFydCA9IGkgLSA2NDtcbiAgICAgICAgICAgIHRoaXMuaGFzaCgpO1xuICAgICAgICAgICAgdGhpcy5oYXNoZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFydCA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuYnl0ZXMgPiA0Mjk0OTY3Mjk1KSB7XG4gICAgICAgIHRoaXMuaEJ5dGVzICs9ICh0aGlzLmJ5dGVzIC8gNDI5NDk2NzI5NikgPDwgMDtcbiAgICAgICAgdGhpcy5ieXRlcyA9IHRoaXMuYnl0ZXMgJSA0Mjk0OTY3Mjk2O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5TaGEyNTYucHJvdG90eXBlLmZpbmFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcbiAgICB2YXIgYmxvY2tzID0gdGhpcy5ibG9ja3MsIGkgPSB0aGlzLmxhc3RCeXRlSW5kZXg7XG4gICAgYmxvY2tzWzE2XSA9IHRoaXMuYmxvY2s7XG4gICAgYmxvY2tzW2kgPj4+IDJdIHw9IEVYVFJBW2kgJiAzXTtcbiAgICB0aGlzLmJsb2NrID0gYmxvY2tzWzE2XTtcbiAgICBpZiAoaSA+PSA1Nikge1xuICAgICAgICBpZiAoIXRoaXMuaGFzaGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc2goKTtcbiAgICAgICAgfVxuICAgICAgICBibG9ja3NbMF0gPSB0aGlzLmJsb2NrO1xuICAgICAgICBibG9ja3NbMTZdID1cbiAgICAgICAgICAgIGJsb2Nrc1sxXSA9XG4gICAgICAgICAgICAgICAgYmxvY2tzWzJdID1cbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzZdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s3XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzhdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzldID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxM10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDA7XG4gICAgfVxuICAgIGJsb2Nrc1sxNF0gPSAodGhpcy5oQnl0ZXMgPDwgMykgfCAodGhpcy5ieXRlcyA+Pj4gMjkpO1xuICAgIGJsb2Nrc1sxNV0gPSB0aGlzLmJ5dGVzIDw8IDM7XG4gICAgdGhpcy5oYXNoKCk7XG59O1xuU2hhMjU2LnByb3RvdHlwZS5oYXNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhID0gdGhpcy5oMCwgYiA9IHRoaXMuaDEsIGMgPSB0aGlzLmgyLCBkID0gdGhpcy5oMywgZSA9IHRoaXMuaDQsIGYgPSB0aGlzLmg1LCBnID0gdGhpcy5oNiwgaCA9IHRoaXMuaDcsIGJsb2NrcyA9IHRoaXMuYmxvY2tzLCBqLCBzMCwgczEsIG1haiwgdDEsIHQyLCBjaCwgYWIsIGRhLCBjZCwgYmM7XG4gICAgZm9yIChqID0gMTY7IGogPCA2NDsgKytqKSB7XG4gICAgICAgIC8vIHJpZ2h0cm90YXRlXG4gICAgICAgIHQxID0gYmxvY2tzW2ogLSAxNV07XG4gICAgICAgIHMwID0gKCh0MSA+Pj4gNykgfCAodDEgPDwgMjUpKSBeICgodDEgPj4+IDE4KSB8ICh0MSA8PCAxNCkpIF4gKHQxID4+PiAzKTtcbiAgICAgICAgdDEgPSBibG9ja3NbaiAtIDJdO1xuICAgICAgICBzMSA9ICgodDEgPj4+IDE3KSB8ICh0MSA8PCAxNSkpIF4gKCh0MSA+Pj4gMTkpIHwgKHQxIDw8IDEzKSkgXiAodDEgPj4+IDEwKTtcbiAgICAgICAgYmxvY2tzW2pdID0gKGJsb2Nrc1tqIC0gMTZdICsgczAgKyBibG9ja3NbaiAtIDddICsgczEpIDw8IDA7XG4gICAgfVxuICAgIGJjID0gYiAmIGM7XG4gICAgZm9yIChqID0gMDsgaiA8IDY0OyBqICs9IDQpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlyc3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzMjI0KSB7XG4gICAgICAgICAgICAgICAgYWIgPSAzMDAwMzI7XG4gICAgICAgICAgICAgICAgdDEgPSBibG9ja3NbMF0gLSAxNDEzMjU3ODE5O1xuICAgICAgICAgICAgICAgIGggPSAodDEgLSAxNTAwNTQ1OTkpIDw8IDA7XG4gICAgICAgICAgICAgICAgZCA9ICh0MSArIDI0MTc3MDc3KSA8PCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWIgPSA3MDQ3NTExMDk7XG4gICAgICAgICAgICAgICAgdDEgPSBibG9ja3NbMF0gLSAyMTAyNDQyNDg7XG4gICAgICAgICAgICAgICAgaCA9ICh0MSAtIDE1MjE0ODY1MzQpIDw8IDA7XG4gICAgICAgICAgICAgICAgZCA9ICh0MSArIDE0MzY5NDU2NSkgPDwgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlyc3QgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMwID1cbiAgICAgICAgICAgICAgICAoKGEgPj4+IDIpIHwgKGEgPDwgMzApKSBeXG4gICAgICAgICAgICAgICAgICAgICgoYSA+Pj4gMTMpIHwgKGEgPDwgMTkpKSBeXG4gICAgICAgICAgICAgICAgICAgICgoYSA+Pj4gMjIpIHwgKGEgPDwgMTApKTtcbiAgICAgICAgICAgIHMxID1cbiAgICAgICAgICAgICAgICAoKGUgPj4+IDYpIHwgKGUgPDwgMjYpKSBeXG4gICAgICAgICAgICAgICAgICAgICgoZSA+Pj4gMTEpIHwgKGUgPDwgMjEpKSBeXG4gICAgICAgICAgICAgICAgICAgICgoZSA+Pj4gMjUpIHwgKGUgPDwgNykpO1xuICAgICAgICAgICAgYWIgPSBhICYgYjtcbiAgICAgICAgICAgIG1haiA9IGFiIF4gKGEgJiBjKSBeIGJjO1xuICAgICAgICAgICAgY2ggPSAoZSAmIGYpIF4gKH5lICYgZyk7XG4gICAgICAgICAgICB0MSA9IGggKyBzMSArIGNoICsgS1tqXSArIGJsb2Nrc1tqXTtcbiAgICAgICAgICAgIHQyID0gczAgKyBtYWo7XG4gICAgICAgICAgICBoID0gKGQgKyB0MSkgPDwgMDtcbiAgICAgICAgICAgIGQgPSAodDEgKyB0MikgPDwgMDtcbiAgICAgICAgfVxuICAgICAgICBzMCA9XG4gICAgICAgICAgICAoKGQgPj4+IDIpIHwgKGQgPDwgMzApKSBeXG4gICAgICAgICAgICAgICAgKChkID4+PiAxMykgfCAoZCA8PCAxOSkpIF5cbiAgICAgICAgICAgICAgICAoKGQgPj4+IDIyKSB8IChkIDw8IDEwKSk7XG4gICAgICAgIHMxID1cbiAgICAgICAgICAgICgoaCA+Pj4gNikgfCAoaCA8PCAyNikpIF5cbiAgICAgICAgICAgICAgICAoKGggPj4+IDExKSB8IChoIDw8IDIxKSkgXlxuICAgICAgICAgICAgICAgICgoaCA+Pj4gMjUpIHwgKGggPDwgNykpO1xuICAgICAgICBkYSA9IGQgJiBhO1xuICAgICAgICBtYWogPSBkYSBeIChkICYgYikgXiBhYjtcbiAgICAgICAgY2ggPSAoZyAmIGgpIF4gKH5nICYgZSk7XG4gICAgICAgIHQxID0gZiArIHMxICsgY2ggKyBLW2ogKyAxXSArIGJsb2Nrc1tqICsgMV07XG4gICAgICAgIHQyID0gczAgKyBtYWo7XG4gICAgICAgIGcgPSAoYyArIHQxKSA8PCAwO1xuICAgICAgICBjID0gKHQxICsgdDIpIDw8IDA7XG4gICAgICAgIHMwID1cbiAgICAgICAgICAgICgoYyA+Pj4gMikgfCAoYyA8PCAzMCkpIF5cbiAgICAgICAgICAgICAgICAoKGMgPj4+IDEzKSB8IChjIDw8IDE5KSkgXlxuICAgICAgICAgICAgICAgICgoYyA+Pj4gMjIpIHwgKGMgPDwgMTApKTtcbiAgICAgICAgczEgPVxuICAgICAgICAgICAgKChnID4+PiA2KSB8IChnIDw8IDI2KSkgXlxuICAgICAgICAgICAgICAgICgoZyA+Pj4gMTEpIHwgKGcgPDwgMjEpKSBeXG4gICAgICAgICAgICAgICAgKChnID4+PiAyNSkgfCAoZyA8PCA3KSk7XG4gICAgICAgIGNkID0gYyAmIGQ7XG4gICAgICAgIG1haiA9IGNkIF4gKGMgJiBhKSBeIGRhO1xuICAgICAgICBjaCA9IChmICYgZykgXiAofmYgJiBoKTtcbiAgICAgICAgdDEgPSBlICsgczEgKyBjaCArIEtbaiArIDJdICsgYmxvY2tzW2ogKyAyXTtcbiAgICAgICAgdDIgPSBzMCArIG1hajtcbiAgICAgICAgZiA9IChiICsgdDEpIDw8IDA7XG4gICAgICAgIGIgPSAodDEgKyB0MikgPDwgMDtcbiAgICAgICAgczAgPVxuICAgICAgICAgICAgKChiID4+PiAyKSB8IChiIDw8IDMwKSkgXlxuICAgICAgICAgICAgICAgICgoYiA+Pj4gMTMpIHwgKGIgPDwgMTkpKSBeXG4gICAgICAgICAgICAgICAgKChiID4+PiAyMikgfCAoYiA8PCAxMCkpO1xuICAgICAgICBzMSA9XG4gICAgICAgICAgICAoKGYgPj4+IDYpIHwgKGYgPDwgMjYpKSBeXG4gICAgICAgICAgICAgICAgKChmID4+PiAxMSkgfCAoZiA8PCAyMSkpIF5cbiAgICAgICAgICAgICAgICAoKGYgPj4+IDI1KSB8IChmIDw8IDcpKTtcbiAgICAgICAgYmMgPSBiICYgYztcbiAgICAgICAgbWFqID0gYmMgXiAoYiAmIGQpIF4gY2Q7XG4gICAgICAgIGNoID0gKGYgJiBnKSBeICh+ZiAmIGgpO1xuICAgICAgICB0MSA9IGUgKyBzMSArIGNoICsgS1tqICsgM10gKyBibG9ja3NbaiArIDNdO1xuICAgICAgICB0MiA9IHMwICsgbWFqO1xuICAgICAgICBlID0gKGEgKyB0MSkgPDwgMDtcbiAgICAgICAgYSA9ICh0MSArIHQyKSA8PCAwO1xuICAgICAgICB0aGlzLmNocm9tZUJ1Z1dvcmtBcm91bmQgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmgwID0gKHRoaXMuaDAgKyBhKSA8PCAwO1xuICAgIHRoaXMuaDEgPSAodGhpcy5oMSArIGIpIDw8IDA7XG4gICAgdGhpcy5oMiA9ICh0aGlzLmgyICsgYykgPDwgMDtcbiAgICB0aGlzLmgzID0gKHRoaXMuaDMgKyBkKSA8PCAwO1xuICAgIHRoaXMuaDQgPSAodGhpcy5oNCArIGUpIDw8IDA7XG4gICAgdGhpcy5oNSA9ICh0aGlzLmg1ICsgZikgPDwgMDtcbiAgICB0aGlzLmg2ID0gKHRoaXMuaDYgKyBnKSA8PCAwO1xuICAgIHRoaXMuaDcgPSAodGhpcy5oNyArIGgpIDw8IDA7XG59O1xuU2hhMjU2LnByb3RvdHlwZS5oZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgIHZhciBoMCA9IHRoaXMuaDAsIGgxID0gdGhpcy5oMSwgaDIgPSB0aGlzLmgyLCBoMyA9IHRoaXMuaDMsIGg0ID0gdGhpcy5oNCwgaDUgPSB0aGlzLmg1LCBoNiA9IHRoaXMuaDYsIGg3ID0gdGhpcy5oNztcbiAgICB2YXIgaGV4ID0gSEVYX0NIQVJTWyhoMCA+Pj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+Pj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2gwICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+Pj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+Pj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDEgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+Pj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+Pj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+Pj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toMiAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+Pj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+Pj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2gzICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+Pj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+Pj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDQgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDUgPj4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNSA+Pj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg1ID4+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDUgPj4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNSA+Pj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg1ID4+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNSA+Pj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toNSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNiA+Pj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg2ID4+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDYgPj4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNiA+Pj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg2ID4+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDYgPj4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg2ID4+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2g2ICYgMHgwZl07XG4gICAgaWYgKCF0aGlzLmlzMjI0KSB7XG4gICAgICAgIGhleCArPVxuICAgICAgICAgICAgSEVYX0NIQVJTWyhoNyA+Pj4gMjgpICYgMHgwZl0gK1xuICAgICAgICAgICAgICAgIEhFWF9DSEFSU1soaDcgPj4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgICAgICAgICBIRVhfQ0hBUlNbKGg3ID4+PiAyMCkgJiAweDBmXSArXG4gICAgICAgICAgICAgICAgSEVYX0NIQVJTWyhoNyA+Pj4gMTYpICYgMHgwZl0gK1xuICAgICAgICAgICAgICAgIEhFWF9DSEFSU1soaDcgPj4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgICAgICAgICBIRVhfQ0hBUlNbKGg3ID4+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgICAgICAgICBIRVhfQ0hBUlNbKGg3ID4+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgICAgICAgICBIRVhfQ0hBUlNbaDcgJiAweDBmXTtcbiAgICB9XG4gICAgcmV0dXJuIGhleDtcbn07XG5TaGEyNTYucHJvdG90eXBlLnRvU3RyaW5nID0gU2hhMjU2LnByb3RvdHlwZS5oZXg7XG5TaGEyNTYucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgdmFyIGgwID0gdGhpcy5oMCwgaDEgPSB0aGlzLmgxLCBoMiA9IHRoaXMuaDIsIGgzID0gdGhpcy5oMywgaDQgPSB0aGlzLmg0LCBoNSA9IHRoaXMuaDUsIGg2ID0gdGhpcy5oNiwgaDcgPSB0aGlzLmg3O1xuICAgIHZhciBhcnIgPSBbXG4gICAgICAgIChoMCA+Pj4gMjQpICYgMHhmZixcbiAgICAgICAgKGgwID4+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDAgPj4+IDgpICYgMHhmZixcbiAgICAgICAgaDAgJiAweGZmLFxuICAgICAgICAoaDEgPj4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoMSA+Pj4gMTYpICYgMHhmZixcbiAgICAgICAgKGgxID4+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGgxICYgMHhmZixcbiAgICAgICAgKGgyID4+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDIgPj4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoMiA+Pj4gOCkgJiAweGZmLFxuICAgICAgICBoMiAmIDB4ZmYsXG4gICAgICAgIChoMyA+Pj4gMjQpICYgMHhmZixcbiAgICAgICAgKGgzID4+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDMgPj4+IDgpICYgMHhmZixcbiAgICAgICAgaDMgJiAweGZmLFxuICAgICAgICAoaDQgPj4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoNCA+Pj4gMTYpICYgMHhmZixcbiAgICAgICAgKGg0ID4+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGg0ICYgMHhmZixcbiAgICAgICAgKGg1ID4+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDUgPj4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoNSA+Pj4gOCkgJiAweGZmLFxuICAgICAgICBoNSAmIDB4ZmYsXG4gICAgICAgIChoNiA+Pj4gMjQpICYgMHhmZixcbiAgICAgICAgKGg2ID4+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDYgPj4+IDgpICYgMHhmZixcbiAgICAgICAgaDYgJiAweGZmLFxuICAgIF07XG4gICAgaWYgKCF0aGlzLmlzMjI0KSB7XG4gICAgICAgIGFyci5wdXNoKChoNyA+Pj4gMjQpICYgMHhmZiwgKGg3ID4+PiAxNikgJiAweGZmLCAoaDcgPj4+IDgpICYgMHhmZiwgaDcgJiAweGZmKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbn07XG5TaGEyNTYucHJvdG90eXBlLmFycmF5ID0gU2hhMjU2LnByb3RvdHlwZS5kaWdlc3Q7XG5TaGEyNTYucHJvdG90eXBlLmFycmF5QnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZmluYWxpemUoKTtcbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRoaXMuaXMyMjQgPyAyOCA6IDMyKTtcbiAgICB2YXIgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoMCwgdGhpcy5oMCk7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDQsIHRoaXMuaDEpO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMig4LCB0aGlzLmgyKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoMTIsIHRoaXMuaDMpO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMigxNiwgdGhpcy5oNCk7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDIwLCB0aGlzLmg1KTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoMjQsIHRoaXMuaDYpO1xuICAgIGlmICghdGhpcy5pczIyNCkge1xuICAgICAgICBkYXRhVmlldy5zZXRVaW50MzIoMjgsIHRoaXMuaDcpO1xuICAgIH1cbiAgICByZXR1cm4gYnVmZmVyO1xufTtcbmV4cG9ydCBjb25zdCBzaGEyNTYgPSAoLi4uc3RyaW5ncykgPT4ge1xuICAgIHJldHVybiBuZXcgU2hhMjU2KGZhbHNlLCB0cnVlKS51cGRhdGUoc3RyaW5ncy5qb2luKFwiXCIpKS5oZXgoKTtcbn07XG4iXSwibmFtZXMiOlsiSEVYX0NIQVJTIiwic3BsaXQiLCJFWFRSQSIsIlNISUZUIiwiSyIsIk9VVFBVVF9UWVBFUyIsImJsb2NrcyIsIlNoYTI1NiIsImlzMjI0Iiwic2hhcmVkTWVtb3J5IiwiaDAiLCJoMSIsImgyIiwiaDMiLCJoNCIsImg1IiwiaDYiLCJoNyIsImJsb2NrIiwic3RhcnQiLCJieXRlcyIsImhCeXRlcyIsImZpbmFsaXplZCIsImhhc2hlZCIsImZpcnN0IiwicHJvdG90eXBlIiwidXBkYXRlIiwibWVzc2FnZSIsIm5vdFN0cmluZyIsInR5cGUiLCJFcnJvciIsIkVSUk9SIiwiQVJSQVlfQlVGRkVSIiwiY29uc3RydWN0b3IiLCJBcnJheUJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJBcnJheSIsImlzQXJyYXkiLCJpc1ZpZXciLCJjb2RlIiwiaW5kZXgiLCJpIiwibGVuZ3RoIiwiY2hhckNvZGVBdCIsImxhc3RCeXRlSW5kZXgiLCJoYXNoIiwiZmluYWxpemUiLCJhIiwiYiIsImMiLCJkIiwiZSIsImYiLCJnIiwiaCIsImoiLCJzMCIsInMxIiwibWFqIiwidDEiLCJ0MiIsImNoIiwiYWIiLCJkYSIsImNkIiwiYmMiLCJjaHJvbWVCdWdXb3JrQXJvdW5kIiwiaGV4IiwidG9TdHJpbmciLCJkaWdlc3QiLCJhcnIiLCJwdXNoIiwiYXJyYXkiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsImRhdGFWaWV3IiwiRGF0YVZpZXciLCJzZXRVaW50MzIiLCJzaGEyNTYiLCJzdHJpbmdzIiwiam9pbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/js-sha256/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/json.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/json.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJsonMarkdown: () => (/* binding */ parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* binding */ parsePartialJson)\n/* harmony export */ });\nfunction parseJsonMarkdown(s, parser = parsePartialJson) {\n    // eslint-disable-next-line no-param-reassign\n    s = s.trim();\n    const firstFenceIndex = s.indexOf(\"```\");\n    if (firstFenceIndex === -1) {\n        return parser(s);\n    }\n    let contentAfterFence = s.substring(firstFenceIndex + 3);\n    if (contentAfterFence.startsWith(\"json\\n\")) {\n        contentAfterFence = contentAfterFence.substring(5);\n    } else if (contentAfterFence.startsWith(\"json\")) {\n        contentAfterFence = contentAfterFence.substring(4);\n    } else if (contentAfterFence.startsWith(\"\\n\")) {\n        contentAfterFence = contentAfterFence.substring(1);\n    }\n    const closingFenceIndex = contentAfterFence.indexOf(\"```\");\n    let finalContent = contentAfterFence;\n    if (closingFenceIndex !== -1) {\n        finalContent = contentAfterFence.substring(0, closingFenceIndex);\n    }\n    return parser(finalContent.trim());\n}\n// Adapted from https://github.com/KillianLucas/open-interpreter/blob/main/interpreter/core/llm/utils/parse_partial_json.py\n// MIT License\nfunction parsePartialJson(s) {\n    // If the input is undefined, return null to indicate failure.\n    if (typeof s === \"undefined\") {\n        return null;\n    }\n    // Attempt to parse the string as-is.\n    try {\n        return JSON.parse(s);\n    } catch (error) {\n    // Pass\n    }\n    // Initialize variables.\n    let new_s = \"\";\n    const stack = [];\n    let isInsideString = false;\n    let escaped = false;\n    // Process each character in the string one at a time.\n    for (let char of s){\n        if (isInsideString) {\n            if (char === '\"' && !escaped) {\n                isInsideString = false;\n            } else if (char === \"\\n\" && !escaped) {\n                char = \"\\\\n\"; // Replace the newline character with the escape sequence.\n            } else if (char === \"\\\\\") {\n                escaped = !escaped;\n            } else {\n                escaped = false;\n            }\n        } else {\n            if (char === '\"') {\n                isInsideString = true;\n                escaped = false;\n            } else if (char === \"{\") {\n                stack.push(\"}\");\n            } else if (char === \"[\") {\n                stack.push(\"]\");\n            } else if (char === \"}\" || char === \"]\") {\n                if (stack && stack[stack.length - 1] === char) {\n                    stack.pop();\n                } else {\n                    // Mismatched closing character; the input is malformed.\n                    return null;\n                }\n            }\n        }\n        // Append the processed character to the new string.\n        new_s += char;\n    }\n    // If we're still inside a string at the end of processing,\n    // we need to close the string.\n    if (isInsideString) {\n        new_s += '\"';\n    }\n    // Close any remaining open structures in the reverse order that they were opened.\n    for(let i = stack.length - 1; i >= 0; i -= 1){\n        new_s += stack[i];\n    }\n    // Attempt to parse the modified string as JSON.\n    try {\n        return JSON.parse(new_s);\n    } catch (error) {\n        // If we still can't parse the string as JSON, return null to indicate failure.\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLFNBQVNBLGtCQUFrQkMsQ0FBQyxFQUFFQyxTQUFTQyxnQkFBZ0I7SUFDMUQsNkNBQTZDO0lBQzdDRixJQUFJQSxFQUFFRyxJQUFJO0lBQ1YsTUFBTUMsa0JBQWtCSixFQUFFSyxPQUFPLENBQUM7SUFDbEMsSUFBSUQsb0JBQW9CLENBQUMsR0FBRztRQUN4QixPQUFPSCxPQUFPRDtJQUNsQjtJQUNBLElBQUlNLG9CQUFvQk4sRUFBRU8sU0FBUyxDQUFDSCxrQkFBa0I7SUFDdEQsSUFBSUUsa0JBQWtCRSxVQUFVLENBQUMsV0FBVztRQUN4Q0Ysb0JBQW9CQSxrQkFBa0JDLFNBQVMsQ0FBQztJQUNwRCxPQUNLLElBQUlELGtCQUFrQkUsVUFBVSxDQUFDLFNBQVM7UUFDM0NGLG9CQUFvQkEsa0JBQWtCQyxTQUFTLENBQUM7SUFDcEQsT0FDSyxJQUFJRCxrQkFBa0JFLFVBQVUsQ0FBQyxPQUFPO1FBQ3pDRixvQkFBb0JBLGtCQUFrQkMsU0FBUyxDQUFDO0lBQ3BEO0lBQ0EsTUFBTUUsb0JBQW9CSCxrQkFBa0JELE9BQU8sQ0FBQztJQUNwRCxJQUFJSyxlQUFlSjtJQUNuQixJQUFJRyxzQkFBc0IsQ0FBQyxHQUFHO1FBQzFCQyxlQUFlSixrQkFBa0JDLFNBQVMsQ0FBQyxHQUFHRTtJQUNsRDtJQUNBLE9BQU9SLE9BQU9TLGFBQWFQLElBQUk7QUFDbkM7QUFDQSwySEFBMkg7QUFDM0gsY0FBYztBQUNQLFNBQVNELGlCQUFpQkYsQ0FBQztJQUM5Qiw4REFBOEQ7SUFDOUQsSUFBSSxPQUFPQSxNQUFNLGFBQWE7UUFDMUIsT0FBTztJQUNYO0lBQ0EscUNBQXFDO0lBQ3JDLElBQUk7UUFDQSxPQUFPVyxLQUFLQyxLQUFLLENBQUNaO0lBQ3RCLEVBQ0EsT0FBT2EsT0FBTztJQUNWLE9BQU87SUFDWDtJQUNBLHdCQUF3QjtJQUN4QixJQUFJQyxRQUFRO0lBQ1osTUFBTUMsUUFBUSxFQUFFO0lBQ2hCLElBQUlDLGlCQUFpQjtJQUNyQixJQUFJQyxVQUFVO0lBQ2Qsc0RBQXNEO0lBQ3RELEtBQUssSUFBSUMsUUFBUWxCLEVBQUc7UUFDaEIsSUFBSWdCLGdCQUFnQjtZQUNoQixJQUFJRSxTQUFTLE9BQU8sQ0FBQ0QsU0FBUztnQkFDMUJELGlCQUFpQjtZQUNyQixPQUNLLElBQUlFLFNBQVMsUUFBUSxDQUFDRCxTQUFTO2dCQUNoQ0MsT0FBTyxPQUFPLDBEQUEwRDtZQUM1RSxPQUNLLElBQUlBLFNBQVMsTUFBTTtnQkFDcEJELFVBQVUsQ0FBQ0E7WUFDZixPQUNLO2dCQUNEQSxVQUFVO1lBQ2Q7UUFDSixPQUNLO1lBQ0QsSUFBSUMsU0FBUyxLQUFLO2dCQUNkRixpQkFBaUI7Z0JBQ2pCQyxVQUFVO1lBQ2QsT0FDSyxJQUFJQyxTQUFTLEtBQUs7Z0JBQ25CSCxNQUFNSSxJQUFJLENBQUM7WUFDZixPQUNLLElBQUlELFNBQVMsS0FBSztnQkFDbkJILE1BQU1JLElBQUksQ0FBQztZQUNmLE9BQ0ssSUFBSUQsU0FBUyxPQUFPQSxTQUFTLEtBQUs7Z0JBQ25DLElBQUlILFNBQVNBLEtBQUssQ0FBQ0EsTUFBTUssTUFBTSxHQUFHLEVBQUUsS0FBS0YsTUFBTTtvQkFDM0NILE1BQU1NLEdBQUc7Z0JBQ2IsT0FDSztvQkFDRCx3REFBd0Q7b0JBQ3hELE9BQU87Z0JBQ1g7WUFDSjtRQUNKO1FBQ0Esb0RBQW9EO1FBQ3BEUCxTQUFTSTtJQUNiO0lBQ0EsMkRBQTJEO0lBQzNELCtCQUErQjtJQUMvQixJQUFJRixnQkFBZ0I7UUFDaEJGLFNBQVM7SUFDYjtJQUNBLGtGQUFrRjtJQUNsRixJQUFLLElBQUlRLElBQUlQLE1BQU1LLE1BQU0sR0FBRyxHQUFHRSxLQUFLLEdBQUdBLEtBQUssRUFBRztRQUMzQ1IsU0FBU0MsS0FBSyxDQUFDTyxFQUFFO0lBQ3JCO0lBQ0EsZ0RBQWdEO0lBQ2hELElBQUk7UUFDQSxPQUFPWCxLQUFLQyxLQUFLLENBQUNFO0lBQ3RCLEVBQ0EsT0FBT0QsT0FBTztRQUNWLCtFQUErRTtRQUMvRSxPQUFPO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbi5qcz9hNmVhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwYXJzZUpzb25NYXJrZG93bihzLCBwYXJzZXIgPSBwYXJzZVBhcnRpYWxKc29uKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgcyA9IHMudHJpbSgpO1xuICAgIGNvbnN0IGZpcnN0RmVuY2VJbmRleCA9IHMuaW5kZXhPZihcImBgYFwiKTtcbiAgICBpZiAoZmlyc3RGZW5jZUluZGV4ID09PSAtMSkge1xuICAgICAgICByZXR1cm4gcGFyc2VyKHMpO1xuICAgIH1cbiAgICBsZXQgY29udGVudEFmdGVyRmVuY2UgPSBzLnN1YnN0cmluZyhmaXJzdEZlbmNlSW5kZXggKyAzKTtcbiAgICBpZiAoY29udGVudEFmdGVyRmVuY2Uuc3RhcnRzV2l0aChcImpzb25cXG5cIikpIHtcbiAgICAgICAgY29udGVudEFmdGVyRmVuY2UgPSBjb250ZW50QWZ0ZXJGZW5jZS5zdWJzdHJpbmcoNSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbnRlbnRBZnRlckZlbmNlLnN0YXJ0c1dpdGgoXCJqc29uXCIpKSB7XG4gICAgICAgIGNvbnRlbnRBZnRlckZlbmNlID0gY29udGVudEFmdGVyRmVuY2Uuc3Vic3RyaW5nKDQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb250ZW50QWZ0ZXJGZW5jZS5zdGFydHNXaXRoKFwiXFxuXCIpKSB7XG4gICAgICAgIGNvbnRlbnRBZnRlckZlbmNlID0gY29udGVudEFmdGVyRmVuY2Uuc3Vic3RyaW5nKDEpO1xuICAgIH1cbiAgICBjb25zdCBjbG9zaW5nRmVuY2VJbmRleCA9IGNvbnRlbnRBZnRlckZlbmNlLmluZGV4T2YoXCJgYGBcIik7XG4gICAgbGV0IGZpbmFsQ29udGVudCA9IGNvbnRlbnRBZnRlckZlbmNlO1xuICAgIGlmIChjbG9zaW5nRmVuY2VJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgZmluYWxDb250ZW50ID0gY29udGVudEFmdGVyRmVuY2Uuc3Vic3RyaW5nKDAsIGNsb3NpbmdGZW5jZUluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlcihmaW5hbENvbnRlbnQudHJpbSgpKTtcbn1cbi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vS2lsbGlhbkx1Y2FzL29wZW4taW50ZXJwcmV0ZXIvYmxvYi9tYWluL2ludGVycHJldGVyL2NvcmUvbGxtL3V0aWxzL3BhcnNlX3BhcnRpYWxfanNvbi5weVxuLy8gTUlUIExpY2Vuc2VcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVBhcnRpYWxKc29uKHMpIHtcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkLCByZXR1cm4gbnVsbCB0byBpbmRpY2F0ZSBmYWlsdXJlLlxuICAgIGlmICh0eXBlb2YgcyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gQXR0ZW1wdCB0byBwYXJzZSB0aGUgc3RyaW5nIGFzLWlzLlxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHMpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gUGFzc1xuICAgIH1cbiAgICAvLyBJbml0aWFsaXplIHZhcmlhYmxlcy5cbiAgICBsZXQgbmV3X3MgPSBcIlwiO1xuICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgbGV0IGlzSW5zaWRlU3RyaW5nID0gZmFsc2U7XG4gICAgbGV0IGVzY2FwZWQgPSBmYWxzZTtcbiAgICAvLyBQcm9jZXNzIGVhY2ggY2hhcmFjdGVyIGluIHRoZSBzdHJpbmcgb25lIGF0IGEgdGltZS5cbiAgICBmb3IgKGxldCBjaGFyIG9mIHMpIHtcbiAgICAgICAgaWYgKGlzSW5zaWRlU3RyaW5nKSB7XG4gICAgICAgICAgICBpZiAoY2hhciA9PT0gJ1wiJyAmJiAhZXNjYXBlZCkge1xuICAgICAgICAgICAgICAgIGlzSW5zaWRlU3RyaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIlxcblwiICYmICFlc2NhcGVkKSB7XG4gICAgICAgICAgICAgICAgY2hhciA9IFwiXFxcXG5cIjsgLy8gUmVwbGFjZSB0aGUgbmV3bGluZSBjaGFyYWN0ZXIgd2l0aCB0aGUgZXNjYXBlIHNlcXVlbmNlLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJcXFxcXCIpIHtcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gIWVzY2FwZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY2hhciA9PT0gJ1wiJykge1xuICAgICAgICAgICAgICAgIGlzSW5zaWRlU3RyaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIntcIikge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goXCJ9XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJbXCIpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFwiXVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwifVwiIHx8IGNoYXIgPT09IFwiXVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWNrICYmIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdID09PSBjaGFyKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTWlzbWF0Y2hlZCBjbG9zaW5nIGNoYXJhY3RlcjsgdGhlIGlucHV0IGlzIG1hbGZvcm1lZC5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEFwcGVuZCB0aGUgcHJvY2Vzc2VkIGNoYXJhY3RlciB0byB0aGUgbmV3IHN0cmluZy5cbiAgICAgICAgbmV3X3MgKz0gY2hhcjtcbiAgICB9XG4gICAgLy8gSWYgd2UncmUgc3RpbGwgaW5zaWRlIGEgc3RyaW5nIGF0IHRoZSBlbmQgb2YgcHJvY2Vzc2luZyxcbiAgICAvLyB3ZSBuZWVkIHRvIGNsb3NlIHRoZSBzdHJpbmcuXG4gICAgaWYgKGlzSW5zaWRlU3RyaW5nKSB7XG4gICAgICAgIG5ld19zICs9ICdcIic7XG4gICAgfVxuICAgIC8vIENsb3NlIGFueSByZW1haW5pbmcgb3BlbiBzdHJ1Y3R1cmVzIGluIHRoZSByZXZlcnNlIG9yZGVyIHRoYXQgdGhleSB3ZXJlIG9wZW5lZC5cbiAgICBmb3IgKGxldCBpID0gc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgbmV3X3MgKz0gc3RhY2tbaV07XG4gICAgfVxuICAgIC8vIEF0dGVtcHQgdG8gcGFyc2UgdGhlIG1vZGlmaWVkIHN0cmluZyBhcyBKU09OLlxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKG5ld19zKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIElmIHdlIHN0aWxsIGNhbid0IHBhcnNlIHRoZSBzdHJpbmcgYXMgSlNPTiwgcmV0dXJuIG51bGwgdG8gaW5kaWNhdGUgZmFpbHVyZS5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInBhcnNlSnNvbk1hcmtkb3duIiwicyIsInBhcnNlciIsInBhcnNlUGFydGlhbEpzb24iLCJ0cmltIiwiZmlyc3RGZW5jZUluZGV4IiwiaW5kZXhPZiIsImNvbnRlbnRBZnRlckZlbmNlIiwic3Vic3RyaW5nIiwic3RhcnRzV2l0aCIsImNsb3NpbmdGZW5jZUluZGV4IiwiZmluYWxDb250ZW50IiwiSlNPTiIsInBhcnNlIiwiZXJyb3IiLCJuZXdfcyIsInN0YWNrIiwiaXNJbnNpZGVTdHJpbmciLCJlc2NhcGVkIiwiY2hhciIsInB1c2giLCJsZW5ndGgiLCJwb3AiLCJpIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/json_patch.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyPatch: () => (/* reexport safe */ _fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   compare: () => (/* reexport safe */ _fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.compare)\n/* harmony export */ });\n/* harmony import */ var _fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fast-json-patch/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbl9wYXRjaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2pzb25fcGF0Y2guanM/YzRhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBjb21wYXJlLCBhcHBseVBhdGNoLCB9IGZyb20gXCIuL2Zhc3QtanNvbi1wYXRjaC9pbmRleC5qc1wiO1xuIl0sIm5hbWVzIjpbImNvbXBhcmUiLCJhcHBseVBhdGNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/json_schema.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/json_schema.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Validator: () => (/* reexport safe */ _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_1__.Validator),\n/* harmony export */   deepCompareStrict: () => (/* reexport safe */ _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_1__.deepCompareStrict),\n/* harmony export */   toJsonSchema: () => (/* binding */ toJsonSchema),\n/* harmony export */   validatesOnlyStrings: () => (/* binding */ validatesOnlyStrings)\n/* harmony export */ });\n/* harmony import */ var zod_v4_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v4/core */ \"(rsc)/./node_modules/zod/v4/core/to-json-schema.js\");\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @cfworker/json-schema */ \"(rsc)/./node_modules/@cfworker/json-schema/dist/esm/index.js\");\n/* harmony import */ var _types_zod_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types/zod.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n\n\n\n\n\n/**\n * Converts a Zod schema or JSON schema to a JSON schema.\n * @param schema - The schema to convert.\n * @returns The converted schema.\n */ function toJsonSchema(schema) {\n    if ((0,_types_zod_js__WEBPACK_IMPORTED_MODULE_2__.isZodSchemaV4)(schema)) {\n        const inputSchema = (0,_types_zod_js__WEBPACK_IMPORTED_MODULE_2__.interopZodTransformInputSchema)(schema, true);\n        if ((0,_types_zod_js__WEBPACK_IMPORTED_MODULE_2__.isZodObjectV4)(inputSchema)) {\n            const strictSchema = (0,_types_zod_js__WEBPACK_IMPORTED_MODULE_2__.interopZodObjectStrict)(inputSchema, true);\n            return (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_3__.toJSONSchema)(strictSchema);\n        } else {\n            return (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_3__.toJSONSchema)(schema);\n        }\n    }\n    if ((0,_types_zod_js__WEBPACK_IMPORTED_MODULE_2__.isZodSchemaV3)(schema)) {\n        return (0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(schema);\n    }\n    return schema;\n}\n/**\n * Validates if a JSON schema validates only strings. May return false negatives in some edge cases\n * (like recursive or unresolvable refs).\n *\n * @param schema - The schema to validate.\n * @returns `true` if the schema validates only strings, `false` otherwise.\n */ function validatesOnlyStrings(schema) {\n    // Null, undefined, or empty schema\n    if (!schema || typeof schema !== \"object\" || Object.keys(schema).length === 0 || Array.isArray(schema)) {\n        return false; // Validates anything, not just strings\n    }\n    // Explicit type constraint\n    if (\"type\" in schema) {\n        if (typeof schema.type === \"string\") {\n            return schema.type === \"string\";\n        }\n        if (Array.isArray(schema.type)) {\n            // not sure why someone would do `\"type\": [\"string\"]` or especially `\"type\": [\"string\",\n            // \"string\", \"string\", ...]` but we're not here to judge\n            return schema.type.every((t)=>t === \"string\");\n        }\n        return false; // Invalid or non-string type\n    }\n    // Enum with only string values\n    if (\"enum\" in schema) {\n        return Array.isArray(schema.enum) && schema.enum.length > 0 && schema.enum.every((val)=>typeof val === \"string\");\n    }\n    // String constant\n    if (\"const\" in schema) {\n        return typeof schema.const === \"string\";\n    }\n    // Schema combinations\n    if (\"allOf\" in schema && Array.isArray(schema.allOf)) {\n        // If any subschema validates only strings, then the overall schema validates only strings\n        return schema.allOf.some((subschema)=>validatesOnlyStrings(subschema));\n    }\n    if (\"anyOf\" in schema && Array.isArray(schema.anyOf) || \"oneOf\" in schema && Array.isArray(schema.oneOf)) {\n        const subschemas = \"anyOf\" in schema ? schema.anyOf : schema.oneOf;\n        // All subschemas must validate only strings\n        return subschemas.length > 0 && subschemas.every((subschema)=>validatesOnlyStrings(subschema));\n    }\n    // We're not going to try on this one, it's too complex - we just assume if it has a \"not\" key and hasn't matched one of the above checks, it's not a string schema.\n    if (\"not\" in schema) {\n        return false; // The not case can validate non-strings\n    }\n    if (\"$ref\" in schema && typeof schema.$ref === \"string\") {\n        const ref = schema.$ref;\n        const resolved = (0,_cfworker_json_schema__WEBPACK_IMPORTED_MODULE_1__.dereference)(schema);\n        if (resolved[ref]) {\n            return validatesOnlyStrings(resolved[ref]);\n        }\n        return false;\n    }\n    // ignore recursive refs and other cases where type is omitted for now\n    // ignore other cases for now where type is omitted\n    return false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbl9zY2hlbWEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMkM7QUFDVTtBQUNEO0FBQ2tGO0FBQ2pFO0FBQ3JFOzs7O0NBSUMsR0FDTSxTQUFTVSxhQUFhQyxNQUFNO0lBQy9CLElBQUlQLDREQUFhQSxDQUFDTyxTQUFTO1FBQ3ZCLE1BQU1DLGNBQWNMLDZFQUE4QkEsQ0FBQ0ksUUFBUTtRQUMzRCxJQUFJTCw0REFBYUEsQ0FBQ00sY0FBYztZQUM1QixNQUFNQyxlQUFlUixxRUFBc0JBLENBQUNPLGFBQWE7WUFDekQsT0FBT1oseURBQVlBLENBQUNhO1FBQ3hCLE9BQ0s7WUFDRCxPQUFPYix5REFBWUEsQ0FBQ1c7UUFDeEI7SUFDSjtJQUNBLElBQUlSLDREQUFhQSxDQUFDUSxTQUFTO1FBQ3ZCLE9BQU9WLG1FQUFlQSxDQUFDVTtJQUMzQjtJQUNBLE9BQU9BO0FBQ1g7QUFDQTs7Ozs7O0NBTUMsR0FDTSxTQUFTRyxxQkFBcUJILE1BQU07SUFDdkMsbUNBQW1DO0lBQ25DLElBQUksQ0FBQ0EsVUFDRCxPQUFPQSxXQUFXLFlBQ2xCSSxPQUFPQyxJQUFJLENBQUNMLFFBQVFNLE1BQU0sS0FBSyxLQUMvQkMsTUFBTUMsT0FBTyxDQUFDUixTQUFTO1FBQ3ZCLE9BQU8sT0FBTyx1Q0FBdUM7SUFDekQ7SUFDQSwyQkFBMkI7SUFDM0IsSUFBSSxVQUFVQSxRQUFRO1FBQ2xCLElBQUksT0FBT0EsT0FBT1MsSUFBSSxLQUFLLFVBQVU7WUFDakMsT0FBT1QsT0FBT1MsSUFBSSxLQUFLO1FBQzNCO1FBQ0EsSUFBSUYsTUFBTUMsT0FBTyxDQUFDUixPQUFPUyxJQUFJLEdBQUc7WUFDNUIsdUZBQXVGO1lBQ3ZGLHdEQUF3RDtZQUN4RCxPQUFPVCxPQUFPUyxJQUFJLENBQUNDLEtBQUssQ0FBQyxDQUFDQyxJQUFNQSxNQUFNO1FBQzFDO1FBQ0EsT0FBTyxPQUFPLDZCQUE2QjtJQUMvQztJQUNBLCtCQUErQjtJQUMvQixJQUFJLFVBQVVYLFFBQVE7UUFDbEIsT0FBUU8sTUFBTUMsT0FBTyxDQUFDUixPQUFPWSxJQUFJLEtBQzdCWixPQUFPWSxJQUFJLENBQUNOLE1BQU0sR0FBRyxLQUNyQk4sT0FBT1ksSUFBSSxDQUFDRixLQUFLLENBQUMsQ0FBQ0csTUFBUSxPQUFPQSxRQUFRO0lBQ2xEO0lBQ0Esa0JBQWtCO0lBQ2xCLElBQUksV0FBV2IsUUFBUTtRQUNuQixPQUFPLE9BQU9BLE9BQU9jLEtBQUssS0FBSztJQUNuQztJQUNBLHNCQUFzQjtJQUN0QixJQUFJLFdBQVdkLFVBQVVPLE1BQU1DLE9BQU8sQ0FBQ1IsT0FBT2UsS0FBSyxHQUFHO1FBQ2xELDBGQUEwRjtRQUMxRixPQUFPZixPQUFPZSxLQUFLLENBQUNDLElBQUksQ0FBQyxDQUFDQyxZQUFjZCxxQkFBcUJjO0lBQ2pFO0lBQ0EsSUFBSSxXQUFZakIsVUFBVU8sTUFBTUMsT0FBTyxDQUFDUixPQUFPa0IsS0FBSyxLQUMvQyxXQUFXbEIsVUFBVU8sTUFBTUMsT0FBTyxDQUFDUixPQUFPbUIsS0FBSyxHQUFJO1FBQ3BELE1BQU1DLGFBQWMsV0FBV3BCLFNBQVNBLE9BQU9rQixLQUFLLEdBQUdsQixPQUFPbUIsS0FBSztRQUNuRSw0Q0FBNEM7UUFDNUMsT0FBUUMsV0FBV2QsTUFBTSxHQUFHLEtBQ3hCYyxXQUFXVixLQUFLLENBQUMsQ0FBQ08sWUFBY2QscUJBQXFCYztJQUM3RDtJQUNBLG9LQUFvSztJQUNwSyxJQUFJLFNBQVNqQixRQUFRO1FBQ2pCLE9BQU8sT0FBTyx3Q0FBd0M7SUFDMUQ7SUFDQSxJQUFJLFVBQVVBLFVBQVUsT0FBT0EsT0FBT3FCLElBQUksS0FBSyxVQUFVO1FBQ3JELE1BQU1DLE1BQU10QixPQUFPcUIsSUFBSTtRQUN2QixNQUFNRSxXQUFXaEMsa0VBQVdBLENBQUNTO1FBQzdCLElBQUl1QixRQUFRLENBQUNELElBQUksRUFBRTtZQUNmLE9BQU9uQixxQkFBcUJvQixRQUFRLENBQUNELElBQUk7UUFDN0M7UUFDQSxPQUFPO0lBQ1g7SUFDQSxzRUFBc0U7SUFDdEUsbURBQW1EO0lBQ25ELE9BQU87QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbl9zY2hlbWEuanM/NGYyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0b0pTT05TY2hlbWEgfSBmcm9tIFwiem9kL3Y0L2NvcmVcIjtcbmltcG9ydCB7IHpvZFRvSnNvblNjaGVtYSB9IGZyb20gXCJ6b2QtdG8tanNvbi1zY2hlbWFcIjtcbmltcG9ydCB7IGRlcmVmZXJlbmNlIH0gZnJvbSBcIkBjZndvcmtlci9qc29uLXNjaGVtYVwiO1xuaW1wb3J0IHsgaXNab2RTY2hlbWFWMywgaXNab2RTY2hlbWFWNCwgaW50ZXJvcFpvZE9iamVjdFN0cmljdCwgaXNab2RPYmplY3RWNCwgaW50ZXJvcFpvZFRyYW5zZm9ybUlucHV0U2NoZW1hLCB9IGZyb20gXCIuL3R5cGVzL3pvZC5qc1wiO1xuZXhwb3J0IHsgZGVlcENvbXBhcmVTdHJpY3QsIFZhbGlkYXRvciB9IGZyb20gXCJAY2Z3b3JrZXIvanNvbi1zY2hlbWFcIjtcbi8qKlxuICogQ29udmVydHMgYSBab2Qgc2NoZW1hIG9yIEpTT04gc2NoZW1hIHRvIGEgSlNPTiBzY2hlbWEuXG4gKiBAcGFyYW0gc2NoZW1hIC0gVGhlIHNjaGVtYSB0byBjb252ZXJ0LlxuICogQHJldHVybnMgVGhlIGNvbnZlcnRlZCBzY2hlbWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0pzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgaWYgKGlzWm9kU2NoZW1hVjQoc2NoZW1hKSkge1xuICAgICAgICBjb25zdCBpbnB1dFNjaGVtYSA9IGludGVyb3Bab2RUcmFuc2Zvcm1JbnB1dFNjaGVtYShzY2hlbWEsIHRydWUpO1xuICAgICAgICBpZiAoaXNab2RPYmplY3RWNChpbnB1dFNjaGVtYSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmljdFNjaGVtYSA9IGludGVyb3Bab2RPYmplY3RTdHJpY3QoaW5wdXRTY2hlbWEsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRvSlNPTlNjaGVtYShzdHJpY3RTY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRvSlNPTlNjaGVtYShzY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc1pvZFNjaGVtYVYzKHNjaGVtYSkpIHtcbiAgICAgICAgcmV0dXJuIHpvZFRvSnNvblNjaGVtYShzY2hlbWEpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLyoqXG4gKiBWYWxpZGF0ZXMgaWYgYSBKU09OIHNjaGVtYSB2YWxpZGF0ZXMgb25seSBzdHJpbmdzLiBNYXkgcmV0dXJuIGZhbHNlIG5lZ2F0aXZlcyBpbiBzb21lIGVkZ2UgY2FzZXNcbiAqIChsaWtlIHJlY3Vyc2l2ZSBvciB1bnJlc29sdmFibGUgcmVmcykuXG4gKlxuICogQHBhcmFtIHNjaGVtYSAtIFRoZSBzY2hlbWEgdG8gdmFsaWRhdGUuXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHNjaGVtYSB2YWxpZGF0ZXMgb25seSBzdHJpbmdzLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlc09ubHlTdHJpbmdzKHNjaGVtYSkge1xuICAgIC8vIE51bGwsIHVuZGVmaW5lZCwgb3IgZW1wdHkgc2NoZW1hXG4gICAgaWYgKCFzY2hlbWEgfHxcbiAgICAgICAgdHlwZW9mIHNjaGVtYSAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgICBPYmplY3Qua2V5cyhzY2hlbWEpLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBBcnJheS5pc0FycmF5KHNjaGVtYSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBWYWxpZGF0ZXMgYW55dGhpbmcsIG5vdCBqdXN0IHN0cmluZ3NcbiAgICB9XG4gICAgLy8gRXhwbGljaXQgdHlwZSBjb25zdHJhaW50XG4gICAgaWYgKFwidHlwZVwiIGluIHNjaGVtYSkge1xuICAgICAgICBpZiAodHlwZW9mIHNjaGVtYS50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLnR5cGUgPT09IFwic3RyaW5nXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2NoZW1hLnR5cGUpKSB7XG4gICAgICAgICAgICAvLyBub3Qgc3VyZSB3aHkgc29tZW9uZSB3b3VsZCBkbyBgXCJ0eXBlXCI6IFtcInN0cmluZ1wiXWAgb3IgZXNwZWNpYWxseSBgXCJ0eXBlXCI6IFtcInN0cmluZ1wiLFxuICAgICAgICAgICAgLy8gXCJzdHJpbmdcIiwgXCJzdHJpbmdcIiwgLi4uXWAgYnV0IHdlJ3JlIG5vdCBoZXJlIHRvIGp1ZGdlXG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLnR5cGUuZXZlcnkoKHQpID0+IHQgPT09IFwic3RyaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gSW52YWxpZCBvciBub24tc3RyaW5nIHR5cGVcbiAgICB9XG4gICAgLy8gRW51bSB3aXRoIG9ubHkgc3RyaW5nIHZhbHVlc1xuICAgIGlmIChcImVudW1cIiBpbiBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIChBcnJheS5pc0FycmF5KHNjaGVtYS5lbnVtKSAmJlxuICAgICAgICAgICAgc2NoZW1hLmVudW0ubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgc2NoZW1hLmVudW0uZXZlcnkoKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikpO1xuICAgIH1cbiAgICAvLyBTdHJpbmcgY29uc3RhbnRcbiAgICBpZiAoXCJjb25zdFwiIGluIHNjaGVtYSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHNjaGVtYS5jb25zdCA9PT0gXCJzdHJpbmdcIjtcbiAgICB9XG4gICAgLy8gU2NoZW1hIGNvbWJpbmF0aW9uc1xuICAgIGlmIChcImFsbE9mXCIgaW4gc2NoZW1hICYmIEFycmF5LmlzQXJyYXkoc2NoZW1hLmFsbE9mKSkge1xuICAgICAgICAvLyBJZiBhbnkgc3Vic2NoZW1hIHZhbGlkYXRlcyBvbmx5IHN0cmluZ3MsIHRoZW4gdGhlIG92ZXJhbGwgc2NoZW1hIHZhbGlkYXRlcyBvbmx5IHN0cmluZ3NcbiAgICAgICAgcmV0dXJuIHNjaGVtYS5hbGxPZi5zb21lKChzdWJzY2hlbWEpID0+IHZhbGlkYXRlc09ubHlTdHJpbmdzKHN1YnNjaGVtYSkpO1xuICAgIH1cbiAgICBpZiAoKFwiYW55T2ZcIiBpbiBzY2hlbWEgJiYgQXJyYXkuaXNBcnJheShzY2hlbWEuYW55T2YpKSB8fFxuICAgICAgICAoXCJvbmVPZlwiIGluIHNjaGVtYSAmJiBBcnJheS5pc0FycmF5KHNjaGVtYS5vbmVPZikpKSB7XG4gICAgICAgIGNvbnN0IHN1YnNjaGVtYXMgPSAoXCJhbnlPZlwiIGluIHNjaGVtYSA/IHNjaGVtYS5hbnlPZiA6IHNjaGVtYS5vbmVPZik7XG4gICAgICAgIC8vIEFsbCBzdWJzY2hlbWFzIG11c3QgdmFsaWRhdGUgb25seSBzdHJpbmdzXG4gICAgICAgIHJldHVybiAoc3Vic2NoZW1hcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICBzdWJzY2hlbWFzLmV2ZXJ5KChzdWJzY2hlbWEpID0+IHZhbGlkYXRlc09ubHlTdHJpbmdzKHN1YnNjaGVtYSkpKTtcbiAgICB9XG4gICAgLy8gV2UncmUgbm90IGdvaW5nIHRvIHRyeSBvbiB0aGlzIG9uZSwgaXQncyB0b28gY29tcGxleCAtIHdlIGp1c3QgYXNzdW1lIGlmIGl0IGhhcyBhIFwibm90XCIga2V5IGFuZCBoYXNuJ3QgbWF0Y2hlZCBvbmUgb2YgdGhlIGFib3ZlIGNoZWNrcywgaXQncyBub3QgYSBzdHJpbmcgc2NoZW1hLlxuICAgIGlmIChcIm5vdFwiIGluIHNjaGVtYSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFRoZSBub3QgY2FzZSBjYW4gdmFsaWRhdGUgbm9uLXN0cmluZ3NcbiAgICB9XG4gICAgaWYgKFwiJHJlZlwiIGluIHNjaGVtYSAmJiB0eXBlb2Ygc2NoZW1hLiRyZWYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcmVmID0gc2NoZW1hLiRyZWY7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gZGVyZWZlcmVuY2Uoc2NoZW1hKTtcbiAgICAgICAgaWYgKHJlc29sdmVkW3JlZl0pIHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZXNPbmx5U3RyaW5ncyhyZXNvbHZlZFtyZWZdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIGlnbm9yZSByZWN1cnNpdmUgcmVmcyBhbmQgb3RoZXIgY2FzZXMgd2hlcmUgdHlwZSBpcyBvbWl0dGVkIGZvciBub3dcbiAgICAvLyBpZ25vcmUgb3RoZXIgY2FzZXMgZm9yIG5vdyB3aGVyZSB0eXBlIGlzIG9taXR0ZWRcbiAgICByZXR1cm4gZmFsc2U7XG59XG4iXSwibmFtZXMiOlsidG9KU09OU2NoZW1hIiwiem9kVG9Kc29uU2NoZW1hIiwiZGVyZWZlcmVuY2UiLCJpc1pvZFNjaGVtYVYzIiwiaXNab2RTY2hlbWFWNCIsImludGVyb3Bab2RPYmplY3RTdHJpY3QiLCJpc1pvZE9iamVjdFY0IiwiaW50ZXJvcFpvZFRyYW5zZm9ybUlucHV0U2NoZW1hIiwiZGVlcENvbXBhcmVTdHJpY3QiLCJWYWxpZGF0b3IiLCJ0b0pzb25TY2hlbWEiLCJzY2hlbWEiLCJpbnB1dFNjaGVtYSIsInN0cmljdFNjaGVtYSIsInZhbGlkYXRlc09ubHlTdHJpbmdzIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsIkFycmF5IiwiaXNBcnJheSIsInR5cGUiLCJldmVyeSIsInQiLCJlbnVtIiwidmFsIiwiY29uc3QiLCJhbGxPZiIsInNvbWUiLCJzdWJzY2hlbWEiLCJhbnlPZiIsIm9uZU9mIiwic3Vic2NoZW1hcyIsIiRyZWYiLCJyZWYiLCJyZXNvbHZlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/json_schema.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/sax-js/sax.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sax: () => (/* binding */ sax)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined to deal with portability issues\n// Originally from: https://github.com/isaacs/sax-js\nconst initializeSax = function() {\n    const sax = {};\n    sax.parser = function(strict, opt) {\n        return new SAXParser(strict, opt);\n    };\n    sax.SAXParser = SAXParser;\n    sax.SAXStream = SAXStream;\n    sax.createStream = createStream;\n    // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n    // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n    // since that's the earliest that a buffer overrun could occur.  This way, checks are\n    // as rare as required, but as often as necessary to ensure never crossing this bound.\n    // Furthermore, buffers are only tested at most once per write(), so passing a very\n    // large string into write() might have undesirable effects, but this is manageable by\n    // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n    // edge case, result in creating at most one complete copy of the string passed in.\n    // Set to Infinity to have unlimited buffers.\n    sax.MAX_BUFFER_LENGTH = 64 * 1024;\n    const buffers = [\n        \"comment\",\n        \"sgmlDecl\",\n        \"textNode\",\n        \"tagName\",\n        \"doctype\",\n        \"procInstName\",\n        \"procInstBody\",\n        \"entity\",\n        \"attribName\",\n        \"attribValue\",\n        \"cdata\",\n        \"script\"\n    ];\n    sax.EVENTS = [\n        \"text\",\n        \"processinginstruction\",\n        \"sgmldeclaration\",\n        \"doctype\",\n        \"comment\",\n        \"opentagstart\",\n        \"attribute\",\n        \"opentag\",\n        \"closetag\",\n        \"opencdata\",\n        \"cdata\",\n        \"closecdata\",\n        \"error\",\n        \"end\",\n        \"ready\",\n        \"script\",\n        \"opennamespace\",\n        \"closenamespace\"\n    ];\n    function SAXParser(strict, opt) {\n        if (!(this instanceof SAXParser)) {\n            return new SAXParser(strict, opt);\n        }\n        var parser = this;\n        clearBuffers(parser);\n        parser.q = parser.c = \"\";\n        parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH;\n        parser.opt = opt || {};\n        parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags;\n        parser.looseCase = parser.opt.lowercase ? \"toLowerCase\" : \"toUpperCase\";\n        parser.tags = [];\n        parser.closed = parser.closedRoot = parser.sawRoot = false;\n        parser.tag = parser.error = null;\n        parser.strict = !!strict;\n        parser.noscript = !!(strict || parser.opt.noscript);\n        parser.state = S.BEGIN;\n        parser.strictEntities = parser.opt.strictEntities;\n        parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES);\n        parser.attribList = [];\n        // namespaces form a prototype chain.\n        // it always points at the current tag,\n        // which protos to its parent tag.\n        if (parser.opt.xmlns) {\n            parser.ns = Object.create(rootNS);\n        }\n        // mostly just for error reporting\n        parser.trackPosition = parser.opt.position !== false;\n        if (parser.trackPosition) {\n            parser.position = parser.line = parser.column = 0;\n        }\n        emit(parser, \"onready\");\n    }\n    if (!Object.create) {\n        Object.create = function(o) {\n            function F() {}\n            F.prototype = o;\n            var newf = new F();\n            return newf;\n        };\n    }\n    if (!Object.keys) {\n        Object.keys = function(o) {\n            var a = [];\n            for(var i in o)if (o.hasOwnProperty(i)) a.push(i);\n            return a;\n        };\n    }\n    function checkBufferLength(parser) {\n        var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10);\n        var maxActual = 0;\n        for(var i = 0, l = buffers.length; i < l; i++){\n            var len = parser[buffers[i]].length;\n            if (len > maxAllowed) {\n                // Text/cdata nodes can get big, and since they're buffered,\n                // we can get here under normal conditions.\n                // Avoid issues by emitting the text node now,\n                // so at least it won't get any bigger.\n                switch(buffers[i]){\n                    case \"textNode\":\n                        closeText(parser);\n                        break;\n                    case \"cdata\":\n                        emitNode(parser, \"oncdata\", parser.cdata);\n                        parser.cdata = \"\";\n                        break;\n                    case \"script\":\n                        emitNode(parser, \"onscript\", parser.script);\n                        parser.script = \"\";\n                        break;\n                    default:\n                        error(parser, \"Max buffer length exceeded: \" + buffers[i]);\n                }\n            }\n            maxActual = Math.max(maxActual, len);\n        }\n        // schedule the next check for the earliest possible buffer overrun.\n        var m = sax.MAX_BUFFER_LENGTH - maxActual;\n        parser.bufferCheckPosition = m + parser.position;\n    }\n    function clearBuffers(parser) {\n        for(var i = 0, l = buffers.length; i < l; i++){\n            parser[buffers[i]] = \"\";\n        }\n    }\n    function flushBuffers(parser) {\n        closeText(parser);\n        if (parser.cdata !== \"\") {\n            emitNode(parser, \"oncdata\", parser.cdata);\n            parser.cdata = \"\";\n        }\n        if (parser.script !== \"\") {\n            emitNode(parser, \"onscript\", parser.script);\n            parser.script = \"\";\n        }\n    }\n    SAXParser.prototype = {\n        end: function() {\n            end(this);\n        },\n        write: write,\n        resume: function() {\n            this.error = null;\n            return this;\n        },\n        close: function() {\n            return this.write(null);\n        },\n        flush: function() {\n            flushBuffers(this);\n        }\n    };\n    var Stream = ReadableStream;\n    if (!Stream) Stream = function() {};\n    var streamWraps = sax.EVENTS.filter(function(ev) {\n        return ev !== \"error\" && ev !== \"end\";\n    });\n    function createStream(strict, opt) {\n        return new SAXStream(strict, opt);\n    }\n    function SAXStream(strict, opt) {\n        if (!(this instanceof SAXStream)) {\n            return new SAXStream(strict, opt);\n        }\n        Stream.apply(this);\n        this._parser = new SAXParser(strict, opt);\n        this.writable = true;\n        this.readable = true;\n        var me = this;\n        this._parser.onend = function() {\n            me.emit(\"end\");\n        };\n        this._parser.onerror = function(er) {\n            me.emit(\"error\", er);\n            // if didn't throw, then means error was handled.\n            // go ahead and clear error, so we can write again.\n            me._parser.error = null;\n        };\n        this._decoder = null;\n        streamWraps.forEach(function(ev) {\n            Object.defineProperty(me, \"on\" + ev, {\n                get: function() {\n                    return me._parser[\"on\" + ev];\n                },\n                set: function(h) {\n                    if (!h) {\n                        me.removeAllListeners(ev);\n                        me._parser[\"on\" + ev] = h;\n                        return h;\n                    }\n                    me.on(ev, h);\n                },\n                enumerable: true,\n                configurable: false\n            });\n        });\n    }\n    SAXStream.prototype = Object.create(Stream.prototype, {\n        constructor: {\n            value: SAXStream\n        }\n    });\n    SAXStream.prototype.write = function(data) {\n        this._parser.write(data.toString());\n        this.emit(\"data\", data);\n        return true;\n    };\n    SAXStream.prototype.end = function(chunk) {\n        if (chunk && chunk.length) {\n            this.write(chunk);\n        }\n        this._parser.end();\n        return true;\n    };\n    SAXStream.prototype.on = function(ev, handler) {\n        var me = this;\n        if (!me._parser[\"on\" + ev] && streamWraps.indexOf(ev) !== -1) {\n            me._parser[\"on\" + ev] = function() {\n                var args = arguments.length === 1 ? [\n                    arguments[0]\n                ] : Array.apply(null, arguments);\n                args.splice(0, 0, ev);\n                me.emit.apply(me, args);\n            };\n        }\n        return Stream.prototype.on.call(me, ev, handler);\n    };\n    // this really needs to be replaced with character classes.\n    // XML allows all manner of ridiculous numbers and digits.\n    var CDATA = \"[CDATA[\";\n    var DOCTYPE = \"DOCTYPE\";\n    var XML_NAMESPACE = \"http://www.w3.org/XML/1998/namespace\";\n    var XMLNS_NAMESPACE = \"http://www.w3.org/2000/xmlns/\";\n    var rootNS = {\n        xml: XML_NAMESPACE,\n        xmlns: XMLNS_NAMESPACE\n    };\n    // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n    // This implementation works on strings, a single character at a time\n    // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n    // without a significant breaking change to either this  parser, or the\n    // JavaScript language.  Implementation of an emoji-capable xml parser\n    // is left as an exercise for the reader.\n    var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n    var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n    var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n    var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n    function isWhitespace(c) {\n        return c === \" \" || c === \"\\n\" || c === \"\\r\" || c === \"\t\";\n    }\n    function isQuote(c) {\n        return c === '\"' || c === \"'\";\n    }\n    function isAttribEnd(c) {\n        return c === \">\" || isWhitespace(c);\n    }\n    function isMatch(regex, c) {\n        return regex.test(c);\n    }\n    function notMatch(regex, c) {\n        return !isMatch(regex, c);\n    }\n    var S = 0;\n    sax.STATE = {\n        BEGIN: S++,\n        BEGIN_WHITESPACE: S++,\n        TEXT: S++,\n        TEXT_ENTITY: S++,\n        OPEN_WAKA: S++,\n        SGML_DECL: S++,\n        SGML_DECL_QUOTED: S++,\n        DOCTYPE: S++,\n        DOCTYPE_QUOTED: S++,\n        DOCTYPE_DTD: S++,\n        DOCTYPE_DTD_QUOTED: S++,\n        COMMENT_STARTING: S++,\n        COMMENT: S++,\n        COMMENT_ENDING: S++,\n        COMMENT_ENDED: S++,\n        CDATA: S++,\n        CDATA_ENDING: S++,\n        CDATA_ENDING_2: S++,\n        PROC_INST: S++,\n        PROC_INST_BODY: S++,\n        PROC_INST_ENDING: S++,\n        OPEN_TAG: S++,\n        OPEN_TAG_SLASH: S++,\n        ATTRIB: S++,\n        ATTRIB_NAME: S++,\n        ATTRIB_NAME_SAW_WHITE: S++,\n        ATTRIB_VALUE: S++,\n        ATTRIB_VALUE_QUOTED: S++,\n        ATTRIB_VALUE_CLOSED: S++,\n        ATTRIB_VALUE_UNQUOTED: S++,\n        ATTRIB_VALUE_ENTITY_Q: S++,\n        ATTRIB_VALUE_ENTITY_U: S++,\n        CLOSE_TAG: S++,\n        CLOSE_TAG_SAW_WHITE: S++,\n        SCRIPT: S++,\n        SCRIPT_ENDING: S++\n    };\n    sax.XML_ENTITIES = {\n        amp: \"&\",\n        gt: \">\",\n        lt: \"<\",\n        quot: '\"',\n        apos: \"'\"\n    };\n    sax.ENTITIES = {\n        amp: \"&\",\n        gt: \">\",\n        lt: \"<\",\n        quot: '\"',\n        apos: \"'\",\n        AElig: 198,\n        Aacute: 193,\n        Acirc: 194,\n        Agrave: 192,\n        Aring: 197,\n        Atilde: 195,\n        Auml: 196,\n        Ccedil: 199,\n        ETH: 208,\n        Eacute: 201,\n        Ecirc: 202,\n        Egrave: 200,\n        Euml: 203,\n        Iacute: 205,\n        Icirc: 206,\n        Igrave: 204,\n        Iuml: 207,\n        Ntilde: 209,\n        Oacute: 211,\n        Ocirc: 212,\n        Ograve: 210,\n        Oslash: 216,\n        Otilde: 213,\n        Ouml: 214,\n        THORN: 222,\n        Uacute: 218,\n        Ucirc: 219,\n        Ugrave: 217,\n        Uuml: 220,\n        Yacute: 221,\n        aacute: 225,\n        acirc: 226,\n        aelig: 230,\n        agrave: 224,\n        aring: 229,\n        atilde: 227,\n        auml: 228,\n        ccedil: 231,\n        eacute: 233,\n        ecirc: 234,\n        egrave: 232,\n        eth: 240,\n        euml: 235,\n        iacute: 237,\n        icirc: 238,\n        igrave: 236,\n        iuml: 239,\n        ntilde: 241,\n        oacute: 243,\n        ocirc: 244,\n        ograve: 242,\n        oslash: 248,\n        otilde: 245,\n        ouml: 246,\n        szlig: 223,\n        thorn: 254,\n        uacute: 250,\n        ucirc: 251,\n        ugrave: 249,\n        uuml: 252,\n        yacute: 253,\n        yuml: 255,\n        copy: 169,\n        reg: 174,\n        nbsp: 160,\n        iexcl: 161,\n        cent: 162,\n        pound: 163,\n        curren: 164,\n        yen: 165,\n        brvbar: 166,\n        sect: 167,\n        uml: 168,\n        ordf: 170,\n        laquo: 171,\n        not: 172,\n        shy: 173,\n        macr: 175,\n        deg: 176,\n        plusmn: 177,\n        sup1: 185,\n        sup2: 178,\n        sup3: 179,\n        acute: 180,\n        micro: 181,\n        para: 182,\n        middot: 183,\n        cedil: 184,\n        ordm: 186,\n        raquo: 187,\n        frac14: 188,\n        frac12: 189,\n        frac34: 190,\n        iquest: 191,\n        times: 215,\n        divide: 247,\n        OElig: 338,\n        oelig: 339,\n        Scaron: 352,\n        scaron: 353,\n        Yuml: 376,\n        fnof: 402,\n        circ: 710,\n        tilde: 732,\n        Alpha: 913,\n        Beta: 914,\n        Gamma: 915,\n        Delta: 916,\n        Epsilon: 917,\n        Zeta: 918,\n        Eta: 919,\n        Theta: 920,\n        Iota: 921,\n        Kappa: 922,\n        Lambda: 923,\n        Mu: 924,\n        Nu: 925,\n        Xi: 926,\n        Omicron: 927,\n        Pi: 928,\n        Rho: 929,\n        Sigma: 931,\n        Tau: 932,\n        Upsilon: 933,\n        Phi: 934,\n        Chi: 935,\n        Psi: 936,\n        Omega: 937,\n        alpha: 945,\n        beta: 946,\n        gamma: 947,\n        delta: 948,\n        epsilon: 949,\n        zeta: 950,\n        eta: 951,\n        theta: 952,\n        iota: 953,\n        kappa: 954,\n        lambda: 955,\n        mu: 956,\n        nu: 957,\n        xi: 958,\n        omicron: 959,\n        pi: 960,\n        rho: 961,\n        sigmaf: 962,\n        sigma: 963,\n        tau: 964,\n        upsilon: 965,\n        phi: 966,\n        chi: 967,\n        psi: 968,\n        omega: 969,\n        thetasym: 977,\n        upsih: 978,\n        piv: 982,\n        ensp: 8194,\n        emsp: 8195,\n        thinsp: 8201,\n        zwnj: 8204,\n        zwj: 8205,\n        lrm: 8206,\n        rlm: 8207,\n        ndash: 8211,\n        mdash: 8212,\n        lsquo: 8216,\n        rsquo: 8217,\n        sbquo: 8218,\n        ldquo: 8220,\n        rdquo: 8221,\n        bdquo: 8222,\n        dagger: 8224,\n        Dagger: 8225,\n        bull: 8226,\n        hellip: 8230,\n        permil: 8240,\n        prime: 8242,\n        Prime: 8243,\n        lsaquo: 8249,\n        rsaquo: 8250,\n        oline: 8254,\n        frasl: 8260,\n        euro: 8364,\n        image: 8465,\n        weierp: 8472,\n        real: 8476,\n        trade: 8482,\n        alefsym: 8501,\n        larr: 8592,\n        uarr: 8593,\n        rarr: 8594,\n        darr: 8595,\n        harr: 8596,\n        crarr: 8629,\n        lArr: 8656,\n        uArr: 8657,\n        rArr: 8658,\n        dArr: 8659,\n        hArr: 8660,\n        forall: 8704,\n        part: 8706,\n        exist: 8707,\n        empty: 8709,\n        nabla: 8711,\n        isin: 8712,\n        notin: 8713,\n        ni: 8715,\n        prod: 8719,\n        sum: 8721,\n        minus: 8722,\n        lowast: 8727,\n        radic: 8730,\n        prop: 8733,\n        infin: 8734,\n        ang: 8736,\n        and: 8743,\n        or: 8744,\n        cap: 8745,\n        cup: 8746,\n        int: 8747,\n        there4: 8756,\n        sim: 8764,\n        cong: 8773,\n        asymp: 8776,\n        ne: 8800,\n        equiv: 8801,\n        le: 8804,\n        ge: 8805,\n        sub: 8834,\n        sup: 8835,\n        nsub: 8836,\n        sube: 8838,\n        supe: 8839,\n        oplus: 8853,\n        otimes: 8855,\n        perp: 8869,\n        sdot: 8901,\n        lceil: 8968,\n        rceil: 8969,\n        lfloor: 8970,\n        rfloor: 8971,\n        lang: 9001,\n        rang: 9002,\n        loz: 9674,\n        spades: 9824,\n        clubs: 9827,\n        hearts: 9829,\n        diams: 9830\n    };\n    Object.keys(sax.ENTITIES).forEach(function(key) {\n        var e = sax.ENTITIES[key];\n        var s = typeof e === \"number\" ? String.fromCharCode(e) : e;\n        sax.ENTITIES[key] = s;\n    });\n    for(var s in sax.STATE){\n        sax.STATE[sax.STATE[s]] = s;\n    }\n    // shorthand\n    S = sax.STATE;\n    function emit(parser, event, data) {\n        parser[event] && parser[event](data);\n    }\n    function emitNode(parser, nodeType, data) {\n        if (parser.textNode) closeText(parser);\n        emit(parser, nodeType, data);\n    }\n    function closeText(parser) {\n        parser.textNode = textopts(parser.opt, parser.textNode);\n        if (parser.textNode) emit(parser, \"ontext\", parser.textNode);\n        parser.textNode = \"\";\n    }\n    function textopts(opt, text) {\n        if (opt.trim) text = text.trim();\n        if (opt.normalize) text = text.replace(/\\s+/g, \" \");\n        return text;\n    }\n    function error(parser, er) {\n        closeText(parser);\n        if (parser.trackPosition) {\n            er += \"\\nLine: \" + parser.line + \"\\nColumn: \" + parser.column + \"\\nChar: \" + parser.c;\n        }\n        er = new Error(er);\n        parser.error = er;\n        emit(parser, \"onerror\", er);\n        return parser;\n    }\n    function end(parser) {\n        if (parser.sawRoot && !parser.closedRoot) strictFail(parser, \"Unclosed root tag\");\n        if (parser.state !== S.BEGIN && parser.state !== S.BEGIN_WHITESPACE && parser.state !== S.TEXT) {\n            error(parser, \"Unexpected end\");\n        }\n        closeText(parser);\n        parser.c = \"\";\n        parser.closed = true;\n        emit(parser, \"onend\");\n        SAXParser.call(parser, parser.strict, parser.opt);\n        return parser;\n    }\n    function strictFail(parser, message) {\n        if (typeof parser !== \"object\" || !(parser instanceof SAXParser)) {\n            throw new Error(\"bad call to strictFail\");\n        }\n        if (parser.strict) {\n            error(parser, message);\n        }\n    }\n    function newTag(parser) {\n        if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]();\n        var parent = parser.tags[parser.tags.length - 1] || parser;\n        var tag = parser.tag = {\n            name: parser.tagName,\n            attributes: {}\n        };\n        // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n        if (parser.opt.xmlns) {\n            tag.ns = parent.ns;\n        }\n        parser.attribList.length = 0;\n        emitNode(parser, \"onopentagstart\", tag);\n    }\n    function qname(name, attribute) {\n        var i = name.indexOf(\":\");\n        var qualName = i < 0 ? [\n            \"\",\n            name\n        ] : name.split(\":\");\n        var prefix = qualName[0];\n        var local = qualName[1];\n        // <x \"xmlns\"=\"http://foo\">\n        if (attribute && name === \"xmlns\") {\n            prefix = \"xmlns\";\n            local = \"\";\n        }\n        return {\n            prefix: prefix,\n            local: local\n        };\n    }\n    function attrib(parser) {\n        if (!parser.strict) {\n            parser.attribName = parser.attribName[parser.looseCase]();\n        }\n        if (parser.attribList.indexOf(parser.attribName) !== -1 || parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n            parser.attribName = parser.attribValue = \"\";\n            return;\n        }\n        if (parser.opt.xmlns) {\n            var qn = qname(parser.attribName, true);\n            var prefix = qn.prefix;\n            var local = qn.local;\n            if (prefix === \"xmlns\") {\n                // namespace binding attribute. push the binding into scope\n                if (local === \"xml\" && parser.attribValue !== XML_NAMESPACE) {\n                    strictFail(parser, \"xml: prefix must be bound to \" + XML_NAMESPACE + \"\\n\" + \"Actual: \" + parser.attribValue);\n                } else if (local === \"xmlns\" && parser.attribValue !== XMLNS_NAMESPACE) {\n                    strictFail(parser, \"xmlns: prefix must be bound to \" + XMLNS_NAMESPACE + \"\\n\" + \"Actual: \" + parser.attribValue);\n                } else {\n                    var tag = parser.tag;\n                    var parent = parser.tags[parser.tags.length - 1] || parser;\n                    if (tag.ns === parent.ns) {\n                        tag.ns = Object.create(parent.ns);\n                    }\n                    tag.ns[local] = parser.attribValue;\n                }\n            }\n            // defer onattribute events until all attributes have been seen\n            // so any new bindings can take effect. preserve attribute order\n            // so deferred events can be emitted in document order\n            parser.attribList.push([\n                parser.attribName,\n                parser.attribValue\n            ]);\n        } else {\n            // in non-xmlns mode, we can emit the event right away\n            parser.tag.attributes[parser.attribName] = parser.attribValue;\n            emitNode(parser, \"onattribute\", {\n                name: parser.attribName,\n                value: parser.attribValue\n            });\n        }\n        parser.attribName = parser.attribValue = \"\";\n    }\n    function openTag(parser, selfClosing) {\n        if (parser.opt.xmlns) {\n            // emit namespace binding events\n            var tag = parser.tag;\n            // add namespace info to tag\n            var qn = qname(parser.tagName);\n            tag.prefix = qn.prefix;\n            tag.local = qn.local;\n            tag.uri = tag.ns[qn.prefix] || \"\";\n            if (tag.prefix && !tag.uri) {\n                strictFail(parser, \"Unbound namespace prefix: \" + JSON.stringify(parser.tagName));\n                tag.uri = qn.prefix;\n            }\n            var parent = parser.tags[parser.tags.length - 1] || parser;\n            if (tag.ns && parent.ns !== tag.ns) {\n                Object.keys(tag.ns).forEach(function(p) {\n                    emitNode(parser, \"onopennamespace\", {\n                        prefix: p,\n                        uri: tag.ns[p]\n                    });\n                });\n            }\n            // handle deferred onattribute events\n            // Note: do not apply default ns to attributes:\n            //   http://www.w3.org/TR/REC-xml-names/#defaulting\n            for(var i = 0, l = parser.attribList.length; i < l; i++){\n                var nv = parser.attribList[i];\n                var name = nv[0];\n                var value = nv[1];\n                var qualName = qname(name, true);\n                var prefix = qualName.prefix;\n                var local = qualName.local;\n                var uri = prefix === \"\" ? \"\" : tag.ns[prefix] || \"\";\n                var a = {\n                    name: name,\n                    value: value,\n                    prefix: prefix,\n                    local: local,\n                    uri: uri\n                };\n                // if there's any attributes with an undefined namespace,\n                // then fail on them now.\n                if (prefix && prefix !== \"xmlns\" && !uri) {\n                    strictFail(parser, \"Unbound namespace prefix: \" + JSON.stringify(prefix));\n                    a.uri = prefix;\n                }\n                parser.tag.attributes[name] = a;\n                emitNode(parser, \"onattribute\", a);\n            }\n            parser.attribList.length = 0;\n        }\n        parser.tag.isSelfClosing = !!selfClosing;\n        // process the tag\n        parser.sawRoot = true;\n        parser.tags.push(parser.tag);\n        emitNode(parser, \"onopentag\", parser.tag);\n        if (!selfClosing) {\n            // special case for <script> in non-strict mode.\n            if (!parser.noscript && parser.tagName.toLowerCase() === \"script\") {\n                parser.state = S.SCRIPT;\n            } else {\n                parser.state = S.TEXT;\n            }\n            parser.tag = null;\n            parser.tagName = \"\";\n        }\n        parser.attribName = parser.attribValue = \"\";\n        parser.attribList.length = 0;\n    }\n    function closeTag(parser) {\n        if (!parser.tagName) {\n            strictFail(parser, \"Weird empty close tag.\");\n            parser.textNode += \"</>\";\n            parser.state = S.TEXT;\n            return;\n        }\n        if (parser.script) {\n            if (parser.tagName !== \"script\") {\n                parser.script += \"</\" + parser.tagName + \">\";\n                parser.tagName = \"\";\n                parser.state = S.SCRIPT;\n                return;\n            }\n            emitNode(parser, \"onscript\", parser.script);\n            parser.script = \"\";\n        }\n        // first make sure that the closing tag actually exists.\n        // <a><b></c></b></a> will close everything, otherwise.\n        var t = parser.tags.length;\n        var tagName = parser.tagName;\n        if (!parser.strict) {\n            tagName = tagName[parser.looseCase]();\n        }\n        var closeTo = tagName;\n        while(t--){\n            var close = parser.tags[t];\n            if (close.name !== closeTo) {\n                // fail the first time in strict mode\n                strictFail(parser, \"Unexpected close tag\");\n            } else {\n                break;\n            }\n        }\n        // didn't find it.  we already failed for strict, so just abort.\n        if (t < 0) {\n            strictFail(parser, \"Unmatched closing tag: \" + parser.tagName);\n            parser.textNode += \"</\" + parser.tagName + \">\";\n            parser.state = S.TEXT;\n            return;\n        }\n        parser.tagName = tagName;\n        var s = parser.tags.length;\n        while(s-- > t){\n            var tag = parser.tag = parser.tags.pop();\n            parser.tagName = parser.tag.name;\n            emitNode(parser, \"onclosetag\", parser.tagName);\n            var x = {};\n            for(var i in tag.ns){\n                x[i] = tag.ns[i];\n            }\n            var parent = parser.tags[parser.tags.length - 1] || parser;\n            if (parser.opt.xmlns && tag.ns !== parent.ns) {\n                // remove namespace bindings introduced by tag\n                Object.keys(tag.ns).forEach(function(p) {\n                    var n = tag.ns[p];\n                    emitNode(parser, \"onclosenamespace\", {\n                        prefix: p,\n                        uri: n\n                    });\n                });\n            }\n        }\n        if (t === 0) parser.closedRoot = true;\n        parser.tagName = parser.attribValue = parser.attribName = \"\";\n        parser.attribList.length = 0;\n        parser.state = S.TEXT;\n    }\n    function parseEntity(parser) {\n        var entity = parser.entity;\n        var entityLC = entity.toLowerCase();\n        var num;\n        var numStr = \"\";\n        if (parser.ENTITIES[entity]) {\n            return parser.ENTITIES[entity];\n        }\n        if (parser.ENTITIES[entityLC]) {\n            return parser.ENTITIES[entityLC];\n        }\n        entity = entityLC;\n        if (entity.charAt(0) === \"#\") {\n            if (entity.charAt(1) === \"x\") {\n                entity = entity.slice(2);\n                num = parseInt(entity, 16);\n                numStr = num.toString(16);\n            } else {\n                entity = entity.slice(1);\n                num = parseInt(entity, 10);\n                numStr = num.toString(10);\n            }\n        }\n        entity = entity.replace(/^0+/, \"\");\n        if (isNaN(num) || numStr.toLowerCase() !== entity) {\n            strictFail(parser, \"Invalid character entity\");\n            return \"&\" + parser.entity + \";\";\n        }\n        return String.fromCodePoint(num);\n    }\n    function beginWhiteSpace(parser, c) {\n        if (c === \"<\") {\n            parser.state = S.OPEN_WAKA;\n            parser.startTagPosition = parser.position;\n        } else if (!isWhitespace(c)) {\n            // have to process this as a text node.\n            // weird, but happens.\n            strictFail(parser, \"Non-whitespace before first tag.\");\n            parser.textNode = c;\n            parser.state = S.TEXT;\n        }\n    }\n    function charAt(chunk, i) {\n        var result = \"\";\n        if (i < chunk.length) {\n            result = chunk.charAt(i);\n        }\n        return result;\n    }\n    function write(chunk) {\n        var parser = this;\n        if (this.error) {\n            throw this.error;\n        }\n        if (parser.closed) {\n            return error(parser, \"Cannot write after close. Assign an onready handler.\");\n        }\n        if (chunk === null) {\n            return end(parser);\n        }\n        if (typeof chunk === \"object\") {\n            chunk = chunk.toString();\n        }\n        var i = 0;\n        var c = \"\";\n        while(true){\n            c = charAt(chunk, i++);\n            parser.c = c;\n            if (!c) {\n                break;\n            }\n            if (parser.trackPosition) {\n                parser.position++;\n                if (c === \"\\n\") {\n                    parser.line++;\n                    parser.column = 0;\n                } else {\n                    parser.column++;\n                }\n            }\n            switch(parser.state){\n                case S.BEGIN:\n                    parser.state = S.BEGIN_WHITESPACE;\n                    if (c === \"\\uFEFF\") {\n                        continue;\n                    }\n                    beginWhiteSpace(parser, c);\n                    continue;\n                case S.BEGIN_WHITESPACE:\n                    beginWhiteSpace(parser, c);\n                    continue;\n                case S.TEXT:\n                    if (parser.sawRoot && !parser.closedRoot) {\n                        var starti = i - 1;\n                        while(c && c !== \"<\" && c !== \"&\"){\n                            c = charAt(chunk, i++);\n                            if (c && parser.trackPosition) {\n                                parser.position++;\n                                if (c === \"\\n\") {\n                                    parser.line++;\n                                    parser.column = 0;\n                                } else {\n                                    parser.column++;\n                                }\n                            }\n                        }\n                        parser.textNode += chunk.substring(starti, i - 1);\n                    }\n                    if (c === \"<\" && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n                        parser.state = S.OPEN_WAKA;\n                        parser.startTagPosition = parser.position;\n                    } else {\n                        if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n                            strictFail(parser, \"Text data outside of root node.\");\n                        }\n                        if (c === \"&\") {\n                            parser.state = S.TEXT_ENTITY;\n                        } else {\n                            parser.textNode += c;\n                        }\n                    }\n                    continue;\n                case S.SCRIPT:\n                    // only non-strict\n                    if (c === \"<\") {\n                        parser.state = S.SCRIPT_ENDING;\n                    } else {\n                        parser.script += c;\n                    }\n                    continue;\n                case S.SCRIPT_ENDING:\n                    if (c === \"/\") {\n                        parser.state = S.CLOSE_TAG;\n                    } else {\n                        parser.script += \"<\" + c;\n                        parser.state = S.SCRIPT;\n                    }\n                    continue;\n                case S.OPEN_WAKA:\n                    // either a /, ?, !, or text is coming next.\n                    if (c === \"!\") {\n                        parser.state = S.SGML_DECL;\n                        parser.sgmlDecl = \"\";\n                    } else if (isWhitespace(c)) {\n                    // wait for it...\n                    } else if (isMatch(nameStart, c)) {\n                        parser.state = S.OPEN_TAG;\n                        parser.tagName = c;\n                    } else if (c === \"/\") {\n                        parser.state = S.CLOSE_TAG;\n                        parser.tagName = \"\";\n                    } else if (c === \"?\") {\n                        parser.state = S.PROC_INST;\n                        parser.procInstName = parser.procInstBody = \"\";\n                    } else {\n                        strictFail(parser, \"Unencoded <\");\n                        // if there was some whitespace, then add that in.\n                        if (parser.startTagPosition + 1 < parser.position) {\n                            var pad = parser.position - parser.startTagPosition;\n                            c = new Array(pad).join(\" \") + c;\n                        }\n                        parser.textNode += \"<\" + c;\n                        parser.state = S.TEXT;\n                    }\n                    continue;\n                case S.SGML_DECL:\n                    if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n                        emitNode(parser, \"onopencdata\");\n                        parser.state = S.CDATA;\n                        parser.sgmlDecl = \"\";\n                        parser.cdata = \"\";\n                    } else if (parser.sgmlDecl + c === \"--\") {\n                        parser.state = S.COMMENT;\n                        parser.comment = \"\";\n                        parser.sgmlDecl = \"\";\n                    } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n                        parser.state = S.DOCTYPE;\n                        if (parser.doctype || parser.sawRoot) {\n                            strictFail(parser, \"Inappropriately located doctype declaration\");\n                        }\n                        parser.doctype = \"\";\n                        parser.sgmlDecl = \"\";\n                    } else if (c === \">\") {\n                        emitNode(parser, \"onsgmldeclaration\", parser.sgmlDecl);\n                        parser.sgmlDecl = \"\";\n                        parser.state = S.TEXT;\n                    } else if (isQuote(c)) {\n                        parser.state = S.SGML_DECL_QUOTED;\n                        parser.sgmlDecl += c;\n                    } else {\n                        parser.sgmlDecl += c;\n                    }\n                    continue;\n                case S.SGML_DECL_QUOTED:\n                    if (c === parser.q) {\n                        parser.state = S.SGML_DECL;\n                        parser.q = \"\";\n                    }\n                    parser.sgmlDecl += c;\n                    continue;\n                case S.DOCTYPE:\n                    if (c === \">\") {\n                        parser.state = S.TEXT;\n                        emitNode(parser, \"ondoctype\", parser.doctype);\n                        parser.doctype = true; // just remember that we saw it.\n                    } else {\n                        parser.doctype += c;\n                        if (c === \"[\") {\n                            parser.state = S.DOCTYPE_DTD;\n                        } else if (isQuote(c)) {\n                            parser.state = S.DOCTYPE_QUOTED;\n                            parser.q = c;\n                        }\n                    }\n                    continue;\n                case S.DOCTYPE_QUOTED:\n                    parser.doctype += c;\n                    if (c === parser.q) {\n                        parser.q = \"\";\n                        parser.state = S.DOCTYPE;\n                    }\n                    continue;\n                case S.DOCTYPE_DTD:\n                    parser.doctype += c;\n                    if (c === \"]\") {\n                        parser.state = S.DOCTYPE;\n                    } else if (isQuote(c)) {\n                        parser.state = S.DOCTYPE_DTD_QUOTED;\n                        parser.q = c;\n                    }\n                    continue;\n                case S.DOCTYPE_DTD_QUOTED:\n                    parser.doctype += c;\n                    if (c === parser.q) {\n                        parser.state = S.DOCTYPE_DTD;\n                        parser.q = \"\";\n                    }\n                    continue;\n                case S.COMMENT:\n                    if (c === \"-\") {\n                        parser.state = S.COMMENT_ENDING;\n                    } else {\n                        parser.comment += c;\n                    }\n                    continue;\n                case S.COMMENT_ENDING:\n                    if (c === \"-\") {\n                        parser.state = S.COMMENT_ENDED;\n                        parser.comment = textopts(parser.opt, parser.comment);\n                        if (parser.comment) {\n                            emitNode(parser, \"oncomment\", parser.comment);\n                        }\n                        parser.comment = \"\";\n                    } else {\n                        parser.comment += \"-\" + c;\n                        parser.state = S.COMMENT;\n                    }\n                    continue;\n                case S.COMMENT_ENDED:\n                    if (c !== \">\") {\n                        strictFail(parser, \"Malformed comment\");\n                        // allow <!-- blah -- bloo --> in non-strict mode,\n                        // which is a comment of \" blah -- bloo \"\n                        parser.comment += \"--\" + c;\n                        parser.state = S.COMMENT;\n                    } else {\n                        parser.state = S.TEXT;\n                    }\n                    continue;\n                case S.CDATA:\n                    if (c === \"]\") {\n                        parser.state = S.CDATA_ENDING;\n                    } else {\n                        parser.cdata += c;\n                    }\n                    continue;\n                case S.CDATA_ENDING:\n                    if (c === \"]\") {\n                        parser.state = S.CDATA_ENDING_2;\n                    } else {\n                        parser.cdata += \"]\" + c;\n                        parser.state = S.CDATA;\n                    }\n                    continue;\n                case S.CDATA_ENDING_2:\n                    if (c === \">\") {\n                        if (parser.cdata) {\n                            emitNode(parser, \"oncdata\", parser.cdata);\n                        }\n                        emitNode(parser, \"onclosecdata\");\n                        parser.cdata = \"\";\n                        parser.state = S.TEXT;\n                    } else if (c === \"]\") {\n                        parser.cdata += \"]\";\n                    } else {\n                        parser.cdata += \"]]\" + c;\n                        parser.state = S.CDATA;\n                    }\n                    continue;\n                case S.PROC_INST:\n                    if (c === \"?\") {\n                        parser.state = S.PROC_INST_ENDING;\n                    } else if (isWhitespace(c)) {\n                        parser.state = S.PROC_INST_BODY;\n                    } else {\n                        parser.procInstName += c;\n                    }\n                    continue;\n                case S.PROC_INST_BODY:\n                    if (!parser.procInstBody && isWhitespace(c)) {\n                        continue;\n                    } else if (c === \"?\") {\n                        parser.state = S.PROC_INST_ENDING;\n                    } else {\n                        parser.procInstBody += c;\n                    }\n                    continue;\n                case S.PROC_INST_ENDING:\n                    if (c === \">\") {\n                        emitNode(parser, \"onprocessinginstruction\", {\n                            name: parser.procInstName,\n                            body: parser.procInstBody\n                        });\n                        parser.procInstName = parser.procInstBody = \"\";\n                        parser.state = S.TEXT;\n                    } else {\n                        parser.procInstBody += \"?\" + c;\n                        parser.state = S.PROC_INST_BODY;\n                    }\n                    continue;\n                case S.OPEN_TAG:\n                    if (isMatch(nameBody, c)) {\n                        parser.tagName += c;\n                    } else {\n                        newTag(parser);\n                        if (c === \">\") {\n                            openTag(parser);\n                        } else if (c === \"/\") {\n                            parser.state = S.OPEN_TAG_SLASH;\n                        } else {\n                            if (!isWhitespace(c)) {\n                                strictFail(parser, \"Invalid character in tag name\");\n                            }\n                            parser.state = S.ATTRIB;\n                        }\n                    }\n                    continue;\n                case S.OPEN_TAG_SLASH:\n                    if (c === \">\") {\n                        openTag(parser, true);\n                        closeTag(parser);\n                    } else {\n                        strictFail(parser, \"Forward-slash in opening tag not followed by >\");\n                        parser.state = S.ATTRIB;\n                    }\n                    continue;\n                case S.ATTRIB:\n                    // haven't read the attribute name yet.\n                    if (isWhitespace(c)) {\n                        continue;\n                    } else if (c === \">\") {\n                        openTag(parser);\n                    } else if (c === \"/\") {\n                        parser.state = S.OPEN_TAG_SLASH;\n                    } else if (isMatch(nameStart, c)) {\n                        parser.attribName = c;\n                        parser.attribValue = \"\";\n                        parser.state = S.ATTRIB_NAME;\n                    } else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_NAME:\n                    if (c === \"=\") {\n                        parser.state = S.ATTRIB_VALUE;\n                    } else if (c === \">\") {\n                        strictFail(parser, \"Attribute without value\");\n                        parser.attribValue = parser.attribName;\n                        attrib(parser);\n                        openTag(parser);\n                    } else if (isWhitespace(c)) {\n                        parser.state = S.ATTRIB_NAME_SAW_WHITE;\n                    } else if (isMatch(nameBody, c)) {\n                        parser.attribName += c;\n                    } else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_NAME_SAW_WHITE:\n                    if (c === \"=\") {\n                        parser.state = S.ATTRIB_VALUE;\n                    } else if (isWhitespace(c)) {\n                        continue;\n                    } else {\n                        strictFail(parser, \"Attribute without value\");\n                        parser.tag.attributes[parser.attribName] = \"\";\n                        parser.attribValue = \"\";\n                        emitNode(parser, \"onattribute\", {\n                            name: parser.attribName,\n                            value: \"\"\n                        });\n                        parser.attribName = \"\";\n                        if (c === \">\") {\n                            openTag(parser);\n                        } else if (isMatch(nameStart, c)) {\n                            parser.attribName = c;\n                            parser.state = S.ATTRIB_NAME;\n                        } else {\n                            strictFail(parser, \"Invalid attribute name\");\n                            parser.state = S.ATTRIB;\n                        }\n                    }\n                    continue;\n                case S.ATTRIB_VALUE:\n                    if (isWhitespace(c)) {\n                        continue;\n                    } else if (isQuote(c)) {\n                        parser.q = c;\n                        parser.state = S.ATTRIB_VALUE_QUOTED;\n                    } else {\n                        strictFail(parser, \"Unquoted attribute value\");\n                        parser.state = S.ATTRIB_VALUE_UNQUOTED;\n                        parser.attribValue = c;\n                    }\n                    continue;\n                case S.ATTRIB_VALUE_QUOTED:\n                    if (c !== parser.q) {\n                        if (c === \"&\") {\n                            parser.state = S.ATTRIB_VALUE_ENTITY_Q;\n                        } else {\n                            parser.attribValue += c;\n                        }\n                        continue;\n                    }\n                    attrib(parser);\n                    parser.q = \"\";\n                    parser.state = S.ATTRIB_VALUE_CLOSED;\n                    continue;\n                case S.ATTRIB_VALUE_CLOSED:\n                    if (isWhitespace(c)) {\n                        parser.state = S.ATTRIB;\n                    } else if (c === \">\") {\n                        openTag(parser);\n                    } else if (c === \"/\") {\n                        parser.state = S.OPEN_TAG_SLASH;\n                    } else if (isMatch(nameStart, c)) {\n                        strictFail(parser, \"No whitespace between attributes\");\n                        parser.attribName = c;\n                        parser.attribValue = \"\";\n                        parser.state = S.ATTRIB_NAME;\n                    } else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_VALUE_UNQUOTED:\n                    if (!isAttribEnd(c)) {\n                        if (c === \"&\") {\n                            parser.state = S.ATTRIB_VALUE_ENTITY_U;\n                        } else {\n                            parser.attribValue += c;\n                        }\n                        continue;\n                    }\n                    attrib(parser);\n                    if (c === \">\") {\n                        openTag(parser);\n                    } else {\n                        parser.state = S.ATTRIB;\n                    }\n                    continue;\n                case S.CLOSE_TAG:\n                    if (!parser.tagName) {\n                        if (isWhitespace(c)) {\n                            continue;\n                        } else if (notMatch(nameStart, c)) {\n                            if (parser.script) {\n                                parser.script += \"</\" + c;\n                                parser.state = S.SCRIPT;\n                            } else {\n                                strictFail(parser, \"Invalid tagname in closing tag.\");\n                            }\n                        } else {\n                            parser.tagName = c;\n                        }\n                    } else if (c === \">\") {\n                        closeTag(parser);\n                    } else if (isMatch(nameBody, c)) {\n                        parser.tagName += c;\n                    } else if (parser.script) {\n                        parser.script += \"</\" + parser.tagName;\n                        parser.tagName = \"\";\n                        parser.state = S.SCRIPT;\n                    } else {\n                        if (!isWhitespace(c)) {\n                            strictFail(parser, \"Invalid tagname in closing tag\");\n                        }\n                        parser.state = S.CLOSE_TAG_SAW_WHITE;\n                    }\n                    continue;\n                case S.CLOSE_TAG_SAW_WHITE:\n                    if (isWhitespace(c)) {\n                        continue;\n                    }\n                    if (c === \">\") {\n                        closeTag(parser);\n                    } else {\n                        strictFail(parser, \"Invalid characters in closing tag\");\n                    }\n                    continue;\n                case S.TEXT_ENTITY:\n                case S.ATTRIB_VALUE_ENTITY_Q:\n                case S.ATTRIB_VALUE_ENTITY_U:\n                    var returnState;\n                    var buffer;\n                    switch(parser.state){\n                        case S.TEXT_ENTITY:\n                            returnState = S.TEXT;\n                            buffer = \"textNode\";\n                            break;\n                        case S.ATTRIB_VALUE_ENTITY_Q:\n                            returnState = S.ATTRIB_VALUE_QUOTED;\n                            buffer = \"attribValue\";\n                            break;\n                        case S.ATTRIB_VALUE_ENTITY_U:\n                            returnState = S.ATTRIB_VALUE_UNQUOTED;\n                            buffer = \"attribValue\";\n                            break;\n                    }\n                    if (c === \";\") {\n                        if (parser.opt.unparsedEntities) {\n                            var parsedEntity = parseEntity(parser);\n                            parser.entity = \"\";\n                            parser.state = returnState;\n                            parser.write(parsedEntity);\n                        } else {\n                            parser[buffer] += parseEntity(parser);\n                            parser.entity = \"\";\n                            parser.state = returnState;\n                        }\n                    } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n                        parser.entity += c;\n                    } else {\n                        strictFail(parser, \"Invalid character in entity name\");\n                        parser[buffer] += \"&\" + parser.entity + c;\n                        parser.entity = \"\";\n                        parser.state = returnState;\n                    }\n                    continue;\n                default:\n                    /* istanbul ignore next */ {\n                        throw new Error(parser, \"Unknown state: \" + parser.state);\n                    }\n            }\n        } // while\n        if (parser.position >= parser.bufferCheckPosition) {\n            checkBufferLength(parser);\n        }\n        return parser;\n    }\n    /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */ /* istanbul ignore next */ if (!String.fromCodePoint) {\n        (function() {\n            var stringFromCharCode = String.fromCharCode;\n            var floor = Math.floor;\n            var fromCodePoint = function() {\n                var MAX_SIZE = 0x4000;\n                var codeUnits = [];\n                var highSurrogate;\n                var lowSurrogate;\n                var index = -1;\n                var length = arguments.length;\n                if (!length) {\n                    return \"\";\n                }\n                var result = \"\";\n                while(++index < length){\n                    var codePoint = Number(arguments[index]);\n                    if (!isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n                    codePoint < 0 || // not a valid Unicode code point\n                    codePoint > 0x10ffff || // not a valid Unicode code point\n                    floor(codePoint) !== codePoint // not an integer\n                    ) {\n                        throw RangeError(\"Invalid code point: \" + codePoint);\n                    }\n                    if (codePoint <= 0xffff) {\n                        // BMP code point\n                        codeUnits.push(codePoint);\n                    } else {\n                        // Astral code point; split in surrogate halves\n                        // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n                        codePoint -= 0x10000;\n                        highSurrogate = (codePoint >> 10) + 0xd800;\n                        lowSurrogate = codePoint % 0x400 + 0xdc00;\n                        codeUnits.push(highSurrogate, lowSurrogate);\n                    }\n                    if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n                        result += stringFromCharCode.apply(null, codeUnits);\n                        codeUnits.length = 0;\n                    }\n                }\n                return result;\n            };\n            /* istanbul ignore next */ if (Object.defineProperty) {\n                Object.defineProperty(String, \"fromCodePoint\", {\n                    value: fromCodePoint,\n                    configurable: true,\n                    writable: true\n                });\n            } else {\n                String.fromCodePoint = fromCodePoint;\n            }\n        })();\n    }\n    return sax;\n};\nconst sax = /** #__PURE__ */ initializeSax();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc2F4LWpzL3NheC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsY0FBYztBQUNkLDBDQUEwQztBQUMxQyxvREFBb0Q7QUFDcEQsTUFBTUEsZ0JBQWdCO0lBQ2xCLE1BQU1DLE1BQU0sQ0FBQztJQUNiQSxJQUFJQyxNQUFNLEdBQUcsU0FBVUMsTUFBTSxFQUFFQyxHQUFHO1FBQzlCLE9BQU8sSUFBSUMsVUFBVUYsUUFBUUM7SUFDakM7SUFDQUgsSUFBSUksU0FBUyxHQUFHQTtJQUNoQkosSUFBSUssU0FBUyxHQUFHQTtJQUNoQkwsSUFBSU0sWUFBWSxHQUFHQTtJQUNuQixtRkFBbUY7SUFDbkYsd0ZBQXdGO0lBQ3hGLHFGQUFxRjtJQUNyRixzRkFBc0Y7SUFDdEYsbUZBQW1GO0lBQ25GLHNGQUFzRjtJQUN0Rix3RkFBd0Y7SUFDeEYsbUZBQW1GO0lBQ25GLDZDQUE2QztJQUM3Q04sSUFBSU8saUJBQWlCLEdBQUcsS0FBSztJQUM3QixNQUFNQyxVQUFVO1FBQ1o7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0g7SUFDRFIsSUFBSVMsTUFBTSxHQUFHO1FBQ1Q7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0g7SUFDRCxTQUFTTCxVQUFVRixNQUFNLEVBQUVDLEdBQUc7UUFDMUIsSUFBSSxDQUFFLEtBQUksWUFBWUMsU0FBUSxHQUFJO1lBQzlCLE9BQU8sSUFBSUEsVUFBVUYsUUFBUUM7UUFDakM7UUFDQSxJQUFJRixTQUFTLElBQUk7UUFDakJTLGFBQWFUO1FBQ2JBLE9BQU9VLENBQUMsR0FBR1YsT0FBT1csQ0FBQyxHQUFHO1FBQ3RCWCxPQUFPWSxtQkFBbUIsR0FBR2IsSUFBSU8saUJBQWlCO1FBQ2xETixPQUFP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TkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsS0FBSztRQUNMQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLEtBQUs7UUFDTEMsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLE1BQU07UUFDTkMsS0FBSztRQUNMQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLElBQUk7UUFDSkMsSUFBSTtRQUNKQyxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsSUFBSTtRQUNKQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsS0FBSztRQUNMQyxTQUFTO1FBQ1RDLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLE1BQU07UUFDTkMsS0FBSztRQUNMQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLElBQUk7UUFDSkMsSUFBSTtRQUNKQyxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsSUFBSTtRQUNKQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLFNBQVM7UUFDVEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLEtBQUs7UUFDTEMsT0FBTztRQUNQQyxVQUFVO1FBQ1ZDLE9BQU87UUFDUEMsS0FBSztRQUNMQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxNQUFNO1FBQ05DLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFNBQVM7UUFDVEMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxNQUFN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ZGlzdC91dGlscy9zYXgtanMvc2F4LmpzP2RjOGMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIElubGluZWQgdG8gZGVhbCB3aXRoIHBvcnRhYmlsaXR5IGlzc3Vlc1xuLy8gT3JpZ2luYWxseSBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaXNhYWNzL3NheC1qc1xuY29uc3QgaW5pdGlhbGl6ZVNheCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzYXggPSB7fTtcbiAgICBzYXgucGFyc2VyID0gZnVuY3Rpb24gKHN0cmljdCwgb3B0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KTtcbiAgICB9O1xuICAgIHNheC5TQVhQYXJzZXIgPSBTQVhQYXJzZXI7XG4gICAgc2F4LlNBWFN0cmVhbSA9IFNBWFN0cmVhbTtcbiAgICBzYXguY3JlYXRlU3RyZWFtID0gY3JlYXRlU3RyZWFtO1xuICAgIC8vIFdoZW4gd2UgcGFzcyB0aGUgTUFYX0JVRkZFUl9MRU5HVEggcG9zaXRpb24sIHN0YXJ0IGNoZWNraW5nIGZvciBidWZmZXIgb3ZlcnJ1bnMuXG4gICAgLy8gV2hlbiB3ZSBjaGVjaywgc2NoZWR1bGUgdGhlIG5leHQgY2hlY2sgZm9yIE1BWF9CVUZGRVJfTEVOR1RIIC0gKG1heChidWZmZXIgbGVuZ3RocykpLFxuICAgIC8vIHNpbmNlIHRoYXQncyB0aGUgZWFybGllc3QgdGhhdCBhIGJ1ZmZlciBvdmVycnVuIGNvdWxkIG9jY3VyLiAgVGhpcyB3YXksIGNoZWNrcyBhcmVcbiAgICAvLyBhcyByYXJlIGFzIHJlcXVpcmVkLCBidXQgYXMgb2Z0ZW4gYXMgbmVjZXNzYXJ5IHRvIGVuc3VyZSBuZXZlciBjcm9zc2luZyB0aGlzIGJvdW5kLlxuICAgIC8vIEZ1cnRoZXJtb3JlLCBidWZmZXJzIGFyZSBvbmx5IHRlc3RlZCBhdCBtb3N0IG9uY2UgcGVyIHdyaXRlKCksIHNvIHBhc3NpbmcgYSB2ZXJ5XG4gICAgLy8gbGFyZ2Ugc3RyaW5nIGludG8gd3JpdGUoKSBtaWdodCBoYXZlIHVuZGVzaXJhYmxlIGVmZmVjdHMsIGJ1dCB0aGlzIGlzIG1hbmFnZWFibGUgYnlcbiAgICAvLyB0aGUgY2FsbGVyLCBzbyBpdCBpcyBhc3N1bWVkIHRvIGJlIHNhZmUuICBUaHVzLCBhIGNhbGwgdG8gd3JpdGUoKSBtYXksIGluIHRoZSBleHRyZW1lXG4gICAgLy8gZWRnZSBjYXNlLCByZXN1bHQgaW4gY3JlYXRpbmcgYXQgbW9zdCBvbmUgY29tcGxldGUgY29weSBvZiB0aGUgc3RyaW5nIHBhc3NlZCBpbi5cbiAgICAvLyBTZXQgdG8gSW5maW5pdHkgdG8gaGF2ZSB1bmxpbWl0ZWQgYnVmZmVycy5cbiAgICBzYXguTUFYX0JVRkZFUl9MRU5HVEggPSA2NCAqIDEwMjQ7XG4gICAgY29uc3QgYnVmZmVycyA9IFtcbiAgICAgICAgXCJjb21tZW50XCIsXG4gICAgICAgIFwic2dtbERlY2xcIixcbiAgICAgICAgXCJ0ZXh0Tm9kZVwiLFxuICAgICAgICBcInRhZ05hbWVcIixcbiAgICAgICAgXCJkb2N0eXBlXCIsXG4gICAgICAgIFwicHJvY0luc3ROYW1lXCIsXG4gICAgICAgIFwicHJvY0luc3RCb2R5XCIsXG4gICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgIFwiYXR0cmliTmFtZVwiLFxuICAgICAgICBcImF0dHJpYlZhbHVlXCIsXG4gICAgICAgIFwiY2RhdGFcIixcbiAgICAgICAgXCJzY3JpcHRcIixcbiAgICBdO1xuICAgIHNheC5FVkVOVFMgPSBbXG4gICAgICAgIFwidGV4dFwiLFxuICAgICAgICBcInByb2Nlc3NpbmdpbnN0cnVjdGlvblwiLFxuICAgICAgICBcInNnbWxkZWNsYXJhdGlvblwiLFxuICAgICAgICBcImRvY3R5cGVcIixcbiAgICAgICAgXCJjb21tZW50XCIsXG4gICAgICAgIFwib3BlbnRhZ3N0YXJ0XCIsXG4gICAgICAgIFwiYXR0cmlidXRlXCIsXG4gICAgICAgIFwib3BlbnRhZ1wiLFxuICAgICAgICBcImNsb3NldGFnXCIsXG4gICAgICAgIFwib3BlbmNkYXRhXCIsXG4gICAgICAgIFwiY2RhdGFcIixcbiAgICAgICAgXCJjbG9zZWNkYXRhXCIsXG4gICAgICAgIFwiZXJyb3JcIixcbiAgICAgICAgXCJlbmRcIixcbiAgICAgICAgXCJyZWFkeVwiLFxuICAgICAgICBcInNjcmlwdFwiLFxuICAgICAgICBcIm9wZW5uYW1lc3BhY2VcIixcbiAgICAgICAgXCJjbG9zZW5hbWVzcGFjZVwiLFxuICAgIF07XG4gICAgZnVuY3Rpb24gU0FYUGFyc2VyKHN0cmljdCwgb3B0KSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTQVhQYXJzZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNBWFBhcnNlcihzdHJpY3QsIG9wdCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcnNlciA9IHRoaXM7XG4gICAgICAgIGNsZWFyQnVmZmVycyhwYXJzZXIpO1xuICAgICAgICBwYXJzZXIucSA9IHBhcnNlci5jID0gXCJcIjtcbiAgICAgICAgcGFyc2VyLmJ1ZmZlckNoZWNrUG9zaXRpb24gPSBzYXguTUFYX0JVRkZFUl9MRU5HVEg7XG4gICAgICAgIHBhcnNlci5vcHQgPSBvcHQgfHwge307XG4gICAgICAgIHBhcnNlci5vcHQubG93ZXJjYXNlID0gcGFyc2VyLm9wdC5sb3dlcmNhc2UgfHwgcGFyc2VyLm9wdC5sb3dlcmNhc2V0YWdzO1xuICAgICAgICBwYXJzZXIubG9vc2VDYXNlID0gcGFyc2VyLm9wdC5sb3dlcmNhc2UgPyBcInRvTG93ZXJDYXNlXCIgOiBcInRvVXBwZXJDYXNlXCI7XG4gICAgICAgIHBhcnNlci50YWdzID0gW107XG4gICAgICAgIHBhcnNlci5jbG9zZWQgPSBwYXJzZXIuY2xvc2VkUm9vdCA9IHBhcnNlci5zYXdSb290ID0gZmFsc2U7XG4gICAgICAgIHBhcnNlci50YWcgPSBwYXJzZXIuZXJyb3IgPSBudWxsO1xuICAgICAgICBwYXJzZXIuc3RyaWN0ID0gISFzdHJpY3Q7XG4gICAgICAgIHBhcnNlci5ub3NjcmlwdCA9ICEhKHN0cmljdCB8fCBwYXJzZXIub3B0Lm5vc2NyaXB0KTtcbiAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5CRUdJTjtcbiAgICAgICAgcGFyc2VyLnN0cmljdEVudGl0aWVzID0gcGFyc2VyLm9wdC5zdHJpY3RFbnRpdGllcztcbiAgICAgICAgcGFyc2VyLkVOVElUSUVTID0gcGFyc2VyLnN0cmljdEVudGl0aWVzXG4gICAgICAgICAgICA/IE9iamVjdC5jcmVhdGUoc2F4LlhNTF9FTlRJVElFUylcbiAgICAgICAgICAgIDogT2JqZWN0LmNyZWF0ZShzYXguRU5USVRJRVMpO1xuICAgICAgICBwYXJzZXIuYXR0cmliTGlzdCA9IFtdO1xuICAgICAgICAvLyBuYW1lc3BhY2VzIGZvcm0gYSBwcm90b3R5cGUgY2hhaW4uXG4gICAgICAgIC8vIGl0IGFsd2F5cyBwb2ludHMgYXQgdGhlIGN1cnJlbnQgdGFnLFxuICAgICAgICAvLyB3aGljaCBwcm90b3MgdG8gaXRzIHBhcmVudCB0YWcuXG4gICAgICAgIGlmIChwYXJzZXIub3B0LnhtbG5zKSB7XG4gICAgICAgICAgICBwYXJzZXIubnMgPSBPYmplY3QuY3JlYXRlKHJvb3ROUyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbW9zdGx5IGp1c3QgZm9yIGVycm9yIHJlcG9ydGluZ1xuICAgICAgICBwYXJzZXIudHJhY2tQb3NpdGlvbiA9IHBhcnNlci5vcHQucG9zaXRpb24gIT09IGZhbHNlO1xuICAgICAgICBpZiAocGFyc2VyLnRyYWNrUG9zaXRpb24pIHtcbiAgICAgICAgICAgIHBhcnNlci5wb3NpdGlvbiA9IHBhcnNlci5saW5lID0gcGFyc2VyLmNvbHVtbiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZW1pdChwYXJzZXIsIFwib25yZWFkeVwiKTtcbiAgICB9XG4gICAgaWYgKCFPYmplY3QuY3JlYXRlKSB7XG4gICAgICAgIE9iamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgZnVuY3Rpb24gRigpIHsgfVxuICAgICAgICAgICAgRi5wcm90b3R5cGUgPSBvO1xuICAgICAgICAgICAgdmFyIG5ld2YgPSBuZXcgRigpO1xuICAgICAgICAgICAgcmV0dXJuIG5ld2Y7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghT2JqZWN0LmtleXMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMgPSBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gbylcbiAgICAgICAgICAgICAgICBpZiAoby5oYXNPd25Qcm9wZXJ0eShpKSlcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKGkpO1xuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNoZWNrQnVmZmVyTGVuZ3RoKHBhcnNlcikge1xuICAgICAgICB2YXIgbWF4QWxsb3dlZCA9IE1hdGgubWF4KHNheC5NQVhfQlVGRkVSX0xFTkdUSCwgMTApO1xuICAgICAgICB2YXIgbWF4QWN0dWFsID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBidWZmZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHBhcnNlcltidWZmZXJzW2ldXS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuID4gbWF4QWxsb3dlZCkge1xuICAgICAgICAgICAgICAgIC8vIFRleHQvY2RhdGEgbm9kZXMgY2FuIGdldCBiaWcsIGFuZCBzaW5jZSB0aGV5J3JlIGJ1ZmZlcmVkLFxuICAgICAgICAgICAgICAgIC8vIHdlIGNhbiBnZXQgaGVyZSB1bmRlciBub3JtYWwgY29uZGl0aW9ucy5cbiAgICAgICAgICAgICAgICAvLyBBdm9pZCBpc3N1ZXMgYnkgZW1pdHRpbmcgdGhlIHRleHQgbm9kZSBub3csXG4gICAgICAgICAgICAgICAgLy8gc28gYXQgbGVhc3QgaXQgd29uJ3QgZ2V0IGFueSBiaWdnZXIuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChidWZmZXJzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0Tm9kZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VUZXh0KHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNkYXRhXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25jZGF0YVwiLCBwYXJzZXIuY2RhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNkYXRhID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2NyaXB0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25zY3JpcHRcIiwgcGFyc2VyLnNjcmlwdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2NyaXB0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IocGFyc2VyLCBcIk1heCBidWZmZXIgbGVuZ3RoIGV4Y2VlZGVkOiBcIiArIGJ1ZmZlcnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1heEFjdHVhbCA9IE1hdGgubWF4KG1heEFjdHVhbCwgbGVuKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzY2hlZHVsZSB0aGUgbmV4dCBjaGVjayBmb3IgdGhlIGVhcmxpZXN0IHBvc3NpYmxlIGJ1ZmZlciBvdmVycnVuLlxuICAgICAgICB2YXIgbSA9IHNheC5NQVhfQlVGRkVSX0xFTkdUSCAtIG1heEFjdHVhbDtcbiAgICAgICAgcGFyc2VyLmJ1ZmZlckNoZWNrUG9zaXRpb24gPSBtICsgcGFyc2VyLnBvc2l0aW9uO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbGVhckJ1ZmZlcnMocGFyc2VyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYnVmZmVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHBhcnNlcltidWZmZXJzW2ldXSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZmx1c2hCdWZmZXJzKHBhcnNlcikge1xuICAgICAgICBjbG9zZVRleHQocGFyc2VyKTtcbiAgICAgICAgaWYgKHBhcnNlci5jZGF0YSAhPT0gXCJcIikge1xuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uY2RhdGFcIiwgcGFyc2VyLmNkYXRhKTtcbiAgICAgICAgICAgIHBhcnNlci5jZGF0YSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlci5zY3JpcHQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbnNjcmlwdFwiLCBwYXJzZXIuc2NyaXB0KTtcbiAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgPSBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIFNBWFBhcnNlci5wcm90b3R5cGUgPSB7XG4gICAgICAgIGVuZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZW5kKHRoaXMpO1xuICAgICAgICB9LFxuICAgICAgICB3cml0ZTogd3JpdGUsXG4gICAgICAgIHJlc3VtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndyaXRlKG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBmbHVzaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZmx1c2hCdWZmZXJzKHRoaXMpO1xuICAgICAgICB9LFxuICAgIH07XG4gICAgdmFyIFN0cmVhbSA9IFJlYWRhYmxlU3RyZWFtO1xuICAgIGlmICghU3RyZWFtKVxuICAgICAgICBTdHJlYW0gPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgdmFyIHN0cmVhbVdyYXBzID0gc2F4LkVWRU5UUy5maWx0ZXIoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIHJldHVybiBldiAhPT0gXCJlcnJvclwiICYmIGV2ICE9PSBcImVuZFwiO1xuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVN0cmVhbShzdHJpY3QsIG9wdCkge1xuICAgICAgICByZXR1cm4gbmV3IFNBWFN0cmVhbShzdHJpY3QsIG9wdCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFNBWFN0cmVhbShzdHJpY3QsIG9wdCkge1xuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0FYU3RyZWFtKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTQVhTdHJlYW0oc3RyaWN0LCBvcHQpO1xuICAgICAgICB9XG4gICAgICAgIFN0cmVhbS5hcHBseSh0aGlzKTtcbiAgICAgICAgdGhpcy5fcGFyc2VyID0gbmV3IFNBWFBhcnNlcihzdHJpY3QsIG9wdCk7XG4gICAgICAgIHRoaXMud3JpdGFibGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgdGhpcy5fcGFyc2VyLm9uZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbWUuZW1pdChcImVuZFwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fcGFyc2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXIpIHtcbiAgICAgICAgICAgIG1lLmVtaXQoXCJlcnJvclwiLCBlcik7XG4gICAgICAgICAgICAvLyBpZiBkaWRuJ3QgdGhyb3csIHRoZW4gbWVhbnMgZXJyb3Igd2FzIGhhbmRsZWQuXG4gICAgICAgICAgICAvLyBnbyBhaGVhZCBhbmQgY2xlYXIgZXJyb3IsIHNvIHdlIGNhbiB3cml0ZSBhZ2Fpbi5cbiAgICAgICAgICAgIG1lLl9wYXJzZXIuZXJyb3IgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9kZWNvZGVyID0gbnVsbDtcbiAgICAgICAgc3RyZWFtV3JhcHMuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtZSwgXCJvblwiICsgZXYsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lLl9wYXJzZXJbXCJvblwiICsgZXZdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoaCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlbW92ZUFsbExpc3RlbmVycyhldik7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5fcGFyc2VyW1wib25cIiArIGV2XSA9IGg7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtZS5vbihldiwgaCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFNBWFN0cmVhbS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0cmVhbS5wcm90b3R5cGUsIHtcbiAgICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgICAgIHZhbHVlOiBTQVhTdHJlYW0sXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgU0FYU3RyZWFtLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHRoaXMuX3BhcnNlci53cml0ZShkYXRhLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLmVtaXQoXCJkYXRhXCIsIGRhdGEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFNBWFN0cmVhbS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGNodW5rKSB7XG4gICAgICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGUoY2h1bmspO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3BhcnNlci5lbmQoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBTQVhTdHJlYW0ucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2LCBoYW5kbGVyKSB7XG4gICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgIGlmICghbWUuX3BhcnNlcltcIm9uXCIgKyBldl0gJiYgc3RyZWFtV3JhcHMuaW5kZXhPZihldikgIT09IC0xKSB7XG4gICAgICAgICAgICBtZS5fcGFyc2VyW1wib25cIiArIGV2XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDFcbiAgICAgICAgICAgICAgICAgICAgPyBbYXJndW1lbnRzWzBdXVxuICAgICAgICAgICAgICAgICAgICA6IEFycmF5LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgYXJncy5zcGxpY2UoMCwgMCwgZXYpO1xuICAgICAgICAgICAgICAgIG1lLmVtaXQuYXBwbHkobWUsIGFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKG1lLCBldiwgaGFuZGxlcik7XG4gICAgfTtcbiAgICAvLyB0aGlzIHJlYWxseSBuZWVkcyB0byBiZSByZXBsYWNlZCB3aXRoIGNoYXJhY3RlciBjbGFzc2VzLlxuICAgIC8vIFhNTCBhbGxvd3MgYWxsIG1hbm5lciBvZiByaWRpY3Vsb3VzIG51bWJlcnMgYW5kIGRpZ2l0cy5cbiAgICB2YXIgQ0RBVEEgPSBcIltDREFUQVtcIjtcbiAgICB2YXIgRE9DVFlQRSA9IFwiRE9DVFlQRVwiO1xuICAgIHZhciBYTUxfTkFNRVNQQUNFID0gXCJodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2VcIjtcbiAgICB2YXIgWE1MTlNfTkFNRVNQQUNFID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiO1xuICAgIHZhciByb290TlMgPSB7IHhtbDogWE1MX05BTUVTUEFDRSwgeG1sbnM6IFhNTE5TX05BTUVTUEFDRSB9O1xuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy14bWwvI05ULU5hbWVTdGFydENoYXJcbiAgICAvLyBUaGlzIGltcGxlbWVudGF0aW9uIHdvcmtzIG9uIHN0cmluZ3MsIGEgc2luZ2xlIGNoYXJhY3RlciBhdCBhIHRpbWVcbiAgICAvLyBhcyBzdWNoLCBpdCBjYW5ub3QgZXZlciBzdXBwb3J0IGFzdHJhbC1wbGFuZSBjaGFyYWN0ZXJzICgxMDAwMC1FRkZGRilcbiAgICAvLyB3aXRob3V0IGEgc2lnbmlmaWNhbnQgYnJlYWtpbmcgY2hhbmdlIHRvIGVpdGhlciB0aGlzICBwYXJzZXIsIG9yIHRoZVxuICAgIC8vIEphdmFTY3JpcHQgbGFuZ3VhZ2UuICBJbXBsZW1lbnRhdGlvbiBvZiBhbiBlbW9qaS1jYXBhYmxlIHhtbCBwYXJzZXJcbiAgICAvLyBpcyBsZWZ0IGFzIGFuIGV4ZXJjaXNlIGZvciB0aGUgcmVhZGVyLlxuICAgIHZhciBuYW1lU3RhcnQgPSAvWzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXS87XG4gICAgdmFyIG5hbWVCb2R5ID0gL1s6X0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRFxcdTAwQjdcXHUwMzAwLVxcdTAzNkZcXHUyMDNGLVxcdTIwNDAuXFxkLV0vO1xuICAgIHZhciBlbnRpdHlTdGFydCA9IC9bIzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXS87XG4gICAgdmFyIGVudGl0eUJvZHkgPSAvWyM6X0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRFxcdTAwQjdcXHUwMzAwLVxcdTAzNkZcXHUyMDNGLVxcdTIwNDAuXFxkLV0vO1xuICAgIGZ1bmN0aW9uIGlzV2hpdGVzcGFjZShjKSB7XG4gICAgICAgIHJldHVybiBjID09PSBcIiBcIiB8fCBjID09PSBcIlxcblwiIHx8IGMgPT09IFwiXFxyXCIgfHwgYyA9PT0gXCJcXHRcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNRdW90ZShjKSB7XG4gICAgICAgIHJldHVybiBjID09PSAnXCInIHx8IGMgPT09IFwiJ1wiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0F0dHJpYkVuZChjKSB7XG4gICAgICAgIHJldHVybiBjID09PSBcIj5cIiB8fCBpc1doaXRlc3BhY2UoYyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzTWF0Y2gocmVnZXgsIGMpIHtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3QoYyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5vdE1hdGNoKHJlZ2V4LCBjKSB7XG4gICAgICAgIHJldHVybiAhaXNNYXRjaChyZWdleCwgYyk7XG4gICAgfVxuICAgIHZhciBTID0gMDtcbiAgICBzYXguU1RBVEUgPSB7XG4gICAgICAgIEJFR0lOOiBTKyssIC8vIGxlYWRpbmcgYnl0ZSBvcmRlciBtYXJrIG9yIHdoaXRlc3BhY2VcbiAgICAgICAgQkVHSU5fV0hJVEVTUEFDRTogUysrLCAvLyBsZWFkaW5nIHdoaXRlc3BhY2VcbiAgICAgICAgVEVYVDogUysrLCAvLyBnZW5lcmFsIHN0dWZmXG4gICAgICAgIFRFWFRfRU5USVRZOiBTKyssIC8vICZhbXAgYW5kIHN1Y2guXG4gICAgICAgIE9QRU5fV0FLQTogUysrLCAvLyA8XG4gICAgICAgIFNHTUxfREVDTDogUysrLCAvLyA8IUJMQVJHXG4gICAgICAgIFNHTUxfREVDTF9RVU9URUQ6IFMrKywgLy8gPCFCTEFSRyBmb28gXCJiYXJcbiAgICAgICAgRE9DVFlQRTogUysrLCAvLyA8IURPQ1RZUEVcbiAgICAgICAgRE9DVFlQRV9RVU9URUQ6IFMrKywgLy8gPCFET0NUWVBFIFwiLy9ibGFoXG4gICAgICAgIERPQ1RZUEVfRFREOiBTKyssIC8vIDwhRE9DVFlQRSBcIi8vYmxhaFwiIFsgLi4uXG4gICAgICAgIERPQ1RZUEVfRFREX1FVT1RFRDogUysrLCAvLyA8IURPQ1RZUEUgXCIvL2JsYWhcIiBbIFwiZm9vXG4gICAgICAgIENPTU1FTlRfU1RBUlRJTkc6IFMrKywgLy8gPCEtXG4gICAgICAgIENPTU1FTlQ6IFMrKywgLy8gPCEtLVxuICAgICAgICBDT01NRU5UX0VORElORzogUysrLCAvLyA8IS0tIGJsYWggLVxuICAgICAgICBDT01NRU5UX0VOREVEOiBTKyssIC8vIDwhLS0gYmxhaCAtLVxuICAgICAgICBDREFUQTogUysrLCAvLyA8IVtDREFUQVsgc29tZXRoaW5nXG4gICAgICAgIENEQVRBX0VORElORzogUysrLCAvLyBdXG4gICAgICAgIENEQVRBX0VORElOR18yOiBTKyssIC8vIF1dXG4gICAgICAgIFBST0NfSU5TVDogUysrLCAvLyA8P2hpXG4gICAgICAgIFBST0NfSU5TVF9CT0RZOiBTKyssIC8vIDw/aGkgdGhlcmVcbiAgICAgICAgUFJPQ19JTlNUX0VORElORzogUysrLCAvLyA8P2hpIFwidGhlcmVcIiA/XG4gICAgICAgIE9QRU5fVEFHOiBTKyssIC8vIDxzdHJvbmdcbiAgICAgICAgT1BFTl9UQUdfU0xBU0g6IFMrKywgLy8gPHN0cm9uZyAvXG4gICAgICAgIEFUVFJJQjogUysrLCAvLyA8YVxuICAgICAgICBBVFRSSUJfTkFNRTogUysrLCAvLyA8YSBmb29cbiAgICAgICAgQVRUUklCX05BTUVfU0FXX1dISVRFOiBTKyssIC8vIDxhIGZvbyBfXG4gICAgICAgIEFUVFJJQl9WQUxVRTogUysrLCAvLyA8YSBmb289XG4gICAgICAgIEFUVFJJQl9WQUxVRV9RVU9URUQ6IFMrKywgLy8gPGEgZm9vPVwiYmFyXG4gICAgICAgIEFUVFJJQl9WQUxVRV9DTE9TRUQ6IFMrKywgLy8gPGEgZm9vPVwiYmFyXCJcbiAgICAgICAgQVRUUklCX1ZBTFVFX1VOUVVPVEVEOiBTKyssIC8vIDxhIGZvbz1iYXJcbiAgICAgICAgQVRUUklCX1ZBTFVFX0VOVElUWV9ROiBTKyssIC8vIDxmb28gYmFyPVwiJnF1b3Q7XCJcbiAgICAgICAgQVRUUklCX1ZBTFVFX0VOVElUWV9VOiBTKyssIC8vIDxmb28gYmFyPSZxdW90XG4gICAgICAgIENMT1NFX1RBRzogUysrLCAvLyA8L2FcbiAgICAgICAgQ0xPU0VfVEFHX1NBV19XSElURTogUysrLCAvLyA8L2EgICA+XG4gICAgICAgIFNDUklQVDogUysrLCAvLyA8c2NyaXB0PiAuLi5cbiAgICAgICAgU0NSSVBUX0VORElORzogUysrLCAvLyA8c2NyaXB0PiAuLi4gPFxuICAgIH07XG4gICAgc2F4LlhNTF9FTlRJVElFUyA9IHtcbiAgICAgICAgYW1wOiBcIiZcIixcbiAgICAgICAgZ3Q6IFwiPlwiLFxuICAgICAgICBsdDogXCI8XCIsXG4gICAgICAgIHF1b3Q6ICdcIicsXG4gICAgICAgIGFwb3M6IFwiJ1wiLFxuICAgIH07XG4gICAgc2F4LkVOVElUSUVTID0ge1xuICAgICAgICBhbXA6IFwiJlwiLFxuICAgICAgICBndDogXCI+XCIsXG4gICAgICAgIGx0OiBcIjxcIixcbiAgICAgICAgcXVvdDogJ1wiJyxcbiAgICAgICAgYXBvczogXCInXCIsXG4gICAgICAgIEFFbGlnOiAxOTgsXG4gICAgICAgIEFhY3V0ZTogMTkzLFxuICAgICAgICBBY2lyYzogMTk0LFxuICAgICAgICBBZ3JhdmU6IDE5MixcbiAgICAgICAgQXJpbmc6IDE5NyxcbiAgICAgICAgQXRpbGRlOiAxOTUsXG4gICAgICAgIEF1bWw6IDE5NixcbiAgICAgICAgQ2NlZGlsOiAxOTksXG4gICAgICAgIEVUSDogMjA4LFxuICAgICAgICBFYWN1dGU6IDIwMSxcbiAgICAgICAgRWNpcmM6IDIwMixcbiAgICAgICAgRWdyYXZlOiAyMDAsXG4gICAgICAgIEV1bWw6IDIwMyxcbiAgICAgICAgSWFjdXRlOiAyMDUsXG4gICAgICAgIEljaXJjOiAyMDYsXG4gICAgICAgIElncmF2ZTogMjA0LFxuICAgICAgICBJdW1sOiAyMDcsXG4gICAgICAgIE50aWxkZTogMjA5LFxuICAgICAgICBPYWN1dGU6IDIxMSxcbiAgICAgICAgT2NpcmM6IDIxMixcbiAgICAgICAgT2dyYXZlOiAyMTAsXG4gICAgICAgIE9zbGFzaDogMjE2LFxuICAgICAgICBPdGlsZGU6IDIxMyxcbiAgICAgICAgT3VtbDogMjE0LFxuICAgICAgICBUSE9STjogMjIyLFxuICAgICAgICBVYWN1dGU6IDIxOCxcbiAgICAgICAgVWNpcmM6IDIxOSxcbiAgICAgICAgVWdyYXZlOiAyMTcsXG4gICAgICAgIFV1bWw6IDIyMCxcbiAgICAgICAgWWFjdXRlOiAyMjEsXG4gICAgICAgIGFhY3V0ZTogMjI1LFxuICAgICAgICBhY2lyYzogMjI2LFxuICAgICAgICBhZWxpZzogMjMwLFxuICAgICAgICBhZ3JhdmU6IDIyNCxcbiAgICAgICAgYXJpbmc6IDIyOSxcbiAgICAgICAgYXRpbGRlOiAyMjcsXG4gICAgICAgIGF1bWw6IDIyOCxcbiAgICAgICAgY2NlZGlsOiAyMzEsXG4gICAgICAgIGVhY3V0ZTogMjMzLFxuICAgICAgICBlY2lyYzogMjM0LFxuICAgICAgICBlZ3JhdmU6IDIzMixcbiAgICAgICAgZXRoOiAyNDAsXG4gICAgICAgIGV1bWw6IDIzNSxcbiAgICAgICAgaWFjdXRlOiAyMzcsXG4gICAgICAgIGljaXJjOiAyMzgsXG4gICAgICAgIGlncmF2ZTogMjM2LFxuICAgICAgICBpdW1sOiAyMzksXG4gICAgICAgIG50aWxkZTogMjQxLFxuICAgICAgICBvYWN1dGU6IDI0MyxcbiAgICAgICAgb2NpcmM6IDI0NCxcbiAgICAgICAgb2dyYXZlOiAyNDIsXG4gICAgICAgIG9zbGFzaDogMjQ4LFxuICAgICAgICBvdGlsZGU6IDI0NSxcbiAgICAgICAgb3VtbDogMjQ2LFxuICAgICAgICBzemxpZzogMjIzLFxuICAgICAgICB0aG9ybjogMjU0LFxuICAgICAgICB1YWN1dGU6IDI1MCxcbiAgICAgICAgdWNpcmM6IDI1MSxcbiAgICAgICAgdWdyYXZlOiAyNDksXG4gICAgICAgIHV1bWw6IDI1MixcbiAgICAgICAgeWFjdXRlOiAyNTMsXG4gICAgICAgIHl1bWw6IDI1NSxcbiAgICAgICAgY29weTogMTY5LFxuICAgICAgICByZWc6IDE3NCxcbiAgICAgICAgbmJzcDogMTYwLFxuICAgICAgICBpZXhjbDogMTYxLFxuICAgICAgICBjZW50OiAxNjIsXG4gICAgICAgIHBvdW5kOiAxNjMsXG4gICAgICAgIGN1cnJlbjogMTY0LFxuICAgICAgICB5ZW46IDE2NSxcbiAgICAgICAgYnJ2YmFyOiAxNjYsXG4gICAgICAgIHNlY3Q6IDE2NyxcbiAgICAgICAgdW1sOiAxNjgsXG4gICAgICAgIG9yZGY6IDE3MCxcbiAgICAgICAgbGFxdW86IDE3MSxcbiAgICAgICAgbm90OiAxNzIsXG4gICAgICAgIHNoeTogMTczLFxuICAgICAgICBtYWNyOiAxNzUsXG4gICAgICAgIGRlZzogMTc2LFxuICAgICAgICBwbHVzbW46IDE3NyxcbiAgICAgICAgc3VwMTogMTg1LFxuICAgICAgICBzdXAyOiAxNzgsXG4gICAgICAgIHN1cDM6IDE3OSxcbiAgICAgICAgYWN1dGU6IDE4MCxcbiAgICAgICAgbWljcm86IDE4MSxcbiAgICAgICAgcGFyYTogMTgyLFxuICAgICAgICBtaWRkb3Q6IDE4MyxcbiAgICAgICAgY2VkaWw6IDE4NCxcbiAgICAgICAgb3JkbTogMTg2LFxuICAgICAgICByYXF1bzogMTg3LFxuICAgICAgICBmcmFjMTQ6IDE4OCxcbiAgICAgICAgZnJhYzEyOiAxODksXG4gICAgICAgIGZyYWMzNDogMTkwLFxuICAgICAgICBpcXVlc3Q6IDE5MSxcbiAgICAgICAgdGltZXM6IDIxNSxcbiAgICAgICAgZGl2aWRlOiAyNDcsXG4gICAgICAgIE9FbGlnOiAzMzgsXG4gICAgICAgIG9lbGlnOiAzMzksXG4gICAgICAgIFNjYXJvbjogMzUyLFxuICAgICAgICBzY2Fyb246IDM1MyxcbiAgICAgICAgWXVtbDogMzc2LFxuICAgICAgICBmbm9mOiA0MDIsXG4gICAgICAgIGNpcmM6IDcxMCxcbiAgICAgICAgdGlsZGU6IDczMixcbiAgICAgICAgQWxwaGE6IDkxMyxcbiAgICAgICAgQmV0YTogOTE0LFxuICAgICAgICBHYW1tYTogOTE1LFxuICAgICAgICBEZWx0YTogOTE2LFxuICAgICAgICBFcHNpbG9uOiA5MTcsXG4gICAgICAgIFpldGE6IDkxOCxcbiAgICAgICAgRXRhOiA5MTksXG4gICAgICAgIFRoZXRhOiA5MjAsXG4gICAgICAgIElvdGE6IDkyMSxcbiAgICAgICAgS2FwcGE6IDkyMixcbiAgICAgICAgTGFtYmRhOiA5MjMsXG4gICAgICAgIE11OiA5MjQsXG4gICAgICAgIE51OiA5MjUsXG4gICAgICAgIFhpOiA5MjYsXG4gICAgICAgIE9taWNyb246IDkyNyxcbiAgICAgICAgUGk6IDkyOCxcbiAgICAgICAgUmhvOiA5MjksXG4gICAgICAgIFNpZ21hOiA5MzEsXG4gICAgICAgIFRhdTogOTMyLFxuICAgICAgICBVcHNpbG9uOiA5MzMsXG4gICAgICAgIFBoaTogOTM0LFxuICAgICAgICBDaGk6IDkzNSxcbiAgICAgICAgUHNpOiA5MzYsXG4gICAgICAgIE9tZWdhOiA5MzcsXG4gICAgICAgIGFscGhhOiA5NDUsXG4gICAgICAgIGJldGE6IDk0NixcbiAgICAgICAgZ2FtbWE6IDk0NyxcbiAgICAgICAgZGVsdGE6IDk0OCxcbiAgICAgICAgZXBzaWxvbjogOTQ5LFxuICAgICAgICB6ZXRhOiA5NTAsXG4gICAgICAgIGV0YTogOTUxLFxuICAgICAgICB0aGV0YTogOTUyLFxuICAgICAgICBpb3RhOiA5NTMsXG4gICAgICAgIGthcHBhOiA5NTQsXG4gICAgICAgIGxhbWJkYTogOTU1LFxuICAgICAgICBtdTogOTU2LFxuICAgICAgICBudTogOTU3LFxuICAgICAgICB4aTogOTU4LFxuICAgICAgICBvbWljcm9uOiA5NTksXG4gICAgICAgIHBpOiA5NjAsXG4gICAgICAgIHJobzogOTYxLFxuICAgICAgICBzaWdtYWY6IDk2MixcbiAgICAgICAgc2lnbWE6IDk2MyxcbiAgICAgICAgdGF1OiA5NjQsXG4gICAgICAgIHVwc2lsb246IDk2NSxcbiAgICAgICAgcGhpOiA5NjYsXG4gICAgICAgIGNoaTogOTY3LFxuICAgICAgICBwc2k6IDk2OCxcbiAgICAgICAgb21lZ2E6IDk2OSxcbiAgICAgICAgdGhldGFzeW06IDk3NyxcbiAgICAgICAgdXBzaWg6IDk3OCxcbiAgICAgICAgcGl2OiA5ODIsXG4gICAgICAgIGVuc3A6IDgxOTQsXG4gICAgICAgIGVtc3A6IDgxOTUsXG4gICAgICAgIHRoaW5zcDogODIwMSxcbiAgICAgICAgenduajogODIwNCxcbiAgICAgICAgendqOiA4MjA1LFxuICAgICAgICBscm06IDgyMDYsXG4gICAgICAgIHJsbTogODIwNyxcbiAgICAgICAgbmRhc2g6IDgyMTEsXG4gICAgICAgIG1kYXNoOiA4MjEyLFxuICAgICAgICBsc3F1bzogODIxNixcbiAgICAgICAgcnNxdW86IDgyMTcsXG4gICAgICAgIHNicXVvOiA4MjE4LFxuICAgICAgICBsZHF1bzogODIyMCxcbiAgICAgICAgcmRxdW86IDgyMjEsXG4gICAgICAgIGJkcXVvOiA4MjIyLFxuICAgICAgICBkYWdnZXI6IDgyMjQsXG4gICAgICAgIERhZ2dlcjogODIyNSxcbiAgICAgICAgYnVsbDogODIyNixcbiAgICAgICAgaGVsbGlwOiA4MjMwLFxuICAgICAgICBwZXJtaWw6IDgyNDAsXG4gICAgICAgIHByaW1lOiA4MjQyLFxuICAgICAgICBQcmltZTogODI0MyxcbiAgICAgICAgbHNhcXVvOiA4MjQ5LFxuICAgICAgICByc2FxdW86IDgyNTAsXG4gICAgICAgIG9saW5lOiA4MjU0LFxuICAgICAgICBmcmFzbDogODI2MCxcbiAgICAgICAgZXVybzogODM2NCxcbiAgICAgICAgaW1hZ2U6IDg0NjUsXG4gICAgICAgIHdlaWVycDogODQ3MixcbiAgICAgICAgcmVhbDogODQ3NixcbiAgICAgICAgdHJhZGU6IDg0ODIsXG4gICAgICAgIGFsZWZzeW06IDg1MDEsXG4gICAgICAgIGxhcnI6IDg1OTIsXG4gICAgICAgIHVhcnI6IDg1OTMsXG4gICAgICAgIHJhcnI6IDg1OTQsXG4gICAgICAgIGRhcnI6IDg1OTUsXG4gICAgICAgIGhhcnI6IDg1OTYsXG4gICAgICAgIGNyYXJyOiA4NjI5LFxuICAgICAgICBsQXJyOiA4NjU2LFxuICAgICAgICB1QXJyOiA4NjU3LFxuICAgICAgICByQXJyOiA4NjU4LFxuICAgICAgICBkQXJyOiA4NjU5LFxuICAgICAgICBoQXJyOiA4NjYwLFxuICAgICAgICBmb3JhbGw6IDg3MDQsXG4gICAgICAgIHBhcnQ6IDg3MDYsXG4gICAgICAgIGV4aXN0OiA4NzA3LFxuICAgICAgICBlbXB0eTogODcwOSxcbiAgICAgICAgbmFibGE6IDg3MTEsXG4gICAgICAgIGlzaW46IDg3MTIsXG4gICAgICAgIG5vdGluOiA4NzEzLFxuICAgICAgICBuaTogODcxNSxcbiAgICAgICAgcHJvZDogODcxOSxcbiAgICAgICAgc3VtOiA4NzIxLFxuICAgICAgICBtaW51czogODcyMixcbiAgICAgICAgbG93YXN0OiA4NzI3LFxuICAgICAgICByYWRpYzogODczMCxcbiAgICAgICAgcHJvcDogODczMyxcbiAgICAgICAgaW5maW46IDg3MzQsXG4gICAgICAgIGFuZzogODczNixcbiAgICAgICAgYW5kOiA4NzQzLFxuICAgICAgICBvcjogODc0NCxcbiAgICAgICAgY2FwOiA4NzQ1LFxuICAgICAgICBjdXA6IDg3NDYsXG4gICAgICAgIGludDogODc0NyxcbiAgICAgICAgdGhlcmU0OiA4NzU2LFxuICAgICAgICBzaW06IDg3NjQsXG4gICAgICAgIGNvbmc6IDg3NzMsXG4gICAgICAgIGFzeW1wOiA4Nzc2LFxuICAgICAgICBuZTogODgwMCxcbiAgICAgICAgZXF1aXY6IDg4MDEsXG4gICAgICAgIGxlOiA4ODA0LFxuICAgICAgICBnZTogODgwNSxcbiAgICAgICAgc3ViOiA4ODM0LFxuICAgICAgICBzdXA6IDg4MzUsXG4gICAgICAgIG5zdWI6IDg4MzYsXG4gICAgICAgIHN1YmU6IDg4MzgsXG4gICAgICAgIHN1cGU6IDg4MzksXG4gICAgICAgIG9wbHVzOiA4ODUzLFxuICAgICAgICBvdGltZXM6IDg4NTUsXG4gICAgICAgIHBlcnA6IDg4NjksXG4gICAgICAgIHNkb3Q6IDg5MDEsXG4gICAgICAgIGxjZWlsOiA4OTY4LFxuICAgICAgICByY2VpbDogODk2OSxcbiAgICAgICAgbGZsb29yOiA4OTcwLFxuICAgICAgICByZmxvb3I6IDg5NzEsXG4gICAgICAgIGxhbmc6IDkwMDEsXG4gICAgICAgIHJhbmc6IDkwMDIsXG4gICAgICAgIGxvejogOTY3NCxcbiAgICAgICAgc3BhZGVzOiA5ODI0LFxuICAgICAgICBjbHViczogOTgyNyxcbiAgICAgICAgaGVhcnRzOiA5ODI5LFxuICAgICAgICBkaWFtczogOTgzMCxcbiAgICB9O1xuICAgIE9iamVjdC5rZXlzKHNheC5FTlRJVElFUykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBlID0gc2F4LkVOVElUSUVTW2tleV07XG4gICAgICAgIHZhciBzID0gdHlwZW9mIGUgPT09IFwibnVtYmVyXCIgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpIDogZTtcbiAgICAgICAgc2F4LkVOVElUSUVTW2tleV0gPSBzO1xuICAgIH0pO1xuICAgIGZvciAodmFyIHMgaW4gc2F4LlNUQVRFKSB7XG4gICAgICAgIHNheC5TVEFURVtzYXguU1RBVEVbc11dID0gcztcbiAgICB9XG4gICAgLy8gc2hvcnRoYW5kXG4gICAgUyA9IHNheC5TVEFURTtcbiAgICBmdW5jdGlvbiBlbWl0KHBhcnNlciwgZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgcGFyc2VyW2V2ZW50XSAmJiBwYXJzZXJbZXZlbnRdKGRhdGEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbWl0Tm9kZShwYXJzZXIsIG5vZGVUeXBlLCBkYXRhKSB7XG4gICAgICAgIGlmIChwYXJzZXIudGV4dE5vZGUpXG4gICAgICAgICAgICBjbG9zZVRleHQocGFyc2VyKTtcbiAgICAgICAgZW1pdChwYXJzZXIsIG5vZGVUeXBlLCBkYXRhKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xvc2VUZXh0KHBhcnNlcikge1xuICAgICAgICBwYXJzZXIudGV4dE5vZGUgPSB0ZXh0b3B0cyhwYXJzZXIub3B0LCBwYXJzZXIudGV4dE5vZGUpO1xuICAgICAgICBpZiAocGFyc2VyLnRleHROb2RlKVxuICAgICAgICAgICAgZW1pdChwYXJzZXIsIFwib250ZXh0XCIsIHBhcnNlci50ZXh0Tm9kZSk7XG4gICAgICAgIHBhcnNlci50ZXh0Tm9kZSA9IFwiXCI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRleHRvcHRzKG9wdCwgdGV4dCkge1xuICAgICAgICBpZiAob3B0LnRyaW0pXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC50cmltKCk7XG4gICAgICAgIGlmIChvcHQubm9ybWFsaXplKVxuICAgICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXFxzKy9nLCBcIiBcIik7XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBlcnJvcihwYXJzZXIsIGVyKSB7XG4gICAgICAgIGNsb3NlVGV4dChwYXJzZXIpO1xuICAgICAgICBpZiAocGFyc2VyLnRyYWNrUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGVyICs9XG4gICAgICAgICAgICAgICAgXCJcXG5MaW5lOiBcIiArXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5saW5lICtcbiAgICAgICAgICAgICAgICAgICAgXCJcXG5Db2x1bW46IFwiICtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbHVtbiArXG4gICAgICAgICAgICAgICAgICAgIFwiXFxuQ2hhcjogXCIgK1xuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYztcbiAgICAgICAgfVxuICAgICAgICBlciA9IG5ldyBFcnJvcihlcik7XG4gICAgICAgIHBhcnNlci5lcnJvciA9IGVyO1xuICAgICAgICBlbWl0KHBhcnNlciwgXCJvbmVycm9yXCIsIGVyKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gZW5kKHBhcnNlcikge1xuICAgICAgICBpZiAocGFyc2VyLnNhd1Jvb3QgJiYgIXBhcnNlci5jbG9zZWRSb290KVxuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiVW5jbG9zZWQgcm9vdCB0YWdcIik7XG4gICAgICAgIGlmIChwYXJzZXIuc3RhdGUgIT09IFMuQkVHSU4gJiZcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSAhPT0gUy5CRUdJTl9XSElURVNQQUNFICYmXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgIT09IFMuVEVYVCkge1xuICAgICAgICAgICAgZXJyb3IocGFyc2VyLCBcIlVuZXhwZWN0ZWQgZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNsb3NlVGV4dChwYXJzZXIpO1xuICAgICAgICBwYXJzZXIuYyA9IFwiXCI7XG4gICAgICAgIHBhcnNlci5jbG9zZWQgPSB0cnVlO1xuICAgICAgICBlbWl0KHBhcnNlciwgXCJvbmVuZFwiKTtcbiAgICAgICAgU0FYUGFyc2VyLmNhbGwocGFyc2VyLCBwYXJzZXIuc3RyaWN0LCBwYXJzZXIub3B0KTtcbiAgICAgICAgcmV0dXJuIHBhcnNlcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3RyaWN0RmFpbChwYXJzZXIsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXJzZXIgIT09IFwib2JqZWN0XCIgfHwgIShwYXJzZXIgaW5zdGFuY2VvZiBTQVhQYXJzZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJiYWQgY2FsbCB0byBzdHJpY3RGYWlsXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZXIuc3RyaWN0KSB7XG4gICAgICAgICAgICBlcnJvcihwYXJzZXIsIG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5ld1RhZyhwYXJzZXIpIHtcbiAgICAgICAgaWYgKCFwYXJzZXIuc3RyaWN0KVxuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBwYXJzZXIudGFnTmFtZVtwYXJzZXIubG9vc2VDYXNlXSgpO1xuICAgICAgICB2YXIgcGFyZW50ID0gcGFyc2VyLnRhZ3NbcGFyc2VyLnRhZ3MubGVuZ3RoIC0gMV0gfHwgcGFyc2VyO1xuICAgICAgICB2YXIgdGFnID0gKHBhcnNlci50YWcgPSB7IG5hbWU6IHBhcnNlci50YWdOYW1lLCBhdHRyaWJ1dGVzOiB7fSB9KTtcbiAgICAgICAgLy8gd2lsbCBiZSBvdmVycmlkZGVuIGlmIHRhZyBjb250YWlscyBhbiB4bWxucz1cImZvb1wiIG9yIHhtbG5zOmZvbz1cImJhclwiXG4gICAgICAgIGlmIChwYXJzZXIub3B0LnhtbG5zKSB7XG4gICAgICAgICAgICB0YWcubnMgPSBwYXJlbnQubnM7XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMDtcbiAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9ub3BlbnRhZ3N0YXJ0XCIsIHRhZyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHFuYW1lKG5hbWUsIGF0dHJpYnV0ZSkge1xuICAgICAgICB2YXIgaSA9IG5hbWUuaW5kZXhPZihcIjpcIik7XG4gICAgICAgIHZhciBxdWFsTmFtZSA9IGkgPCAwID8gW1wiXCIsIG5hbWVdIDogbmFtZS5zcGxpdChcIjpcIik7XG4gICAgICAgIHZhciBwcmVmaXggPSBxdWFsTmFtZVswXTtcbiAgICAgICAgdmFyIGxvY2FsID0gcXVhbE5hbWVbMV07XG4gICAgICAgIC8vIDx4IFwieG1sbnNcIj1cImh0dHA6Ly9mb29cIj5cbiAgICAgICAgaWYgKGF0dHJpYnV0ZSAmJiBuYW1lID09PSBcInhtbG5zXCIpIHtcbiAgICAgICAgICAgIHByZWZpeCA9IFwieG1sbnNcIjtcbiAgICAgICAgICAgIGxvY2FsID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBwcmVmaXg6IHByZWZpeCwgbG9jYWw6IGxvY2FsIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGF0dHJpYihwYXJzZXIpIHtcbiAgICAgICAgaWYgKCFwYXJzZXIuc3RyaWN0KSB7XG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJOYW1lW3BhcnNlci5sb29zZUNhc2VdKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlci5hdHRyaWJMaXN0LmluZGV4T2YocGFyc2VyLmF0dHJpYk5hbWUpICE9PSAtMSB8fFxuICAgICAgICAgICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KHBhcnNlci5hdHRyaWJOYW1lKSkge1xuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZXIub3B0LnhtbG5zKSB7XG4gICAgICAgICAgICB2YXIgcW4gPSBxbmFtZShwYXJzZXIuYXR0cmliTmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgcHJlZml4ID0gcW4ucHJlZml4O1xuICAgICAgICAgICAgdmFyIGxvY2FsID0gcW4ubG9jYWw7XG4gICAgICAgICAgICBpZiAocHJlZml4ID09PSBcInhtbG5zXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBuYW1lc3BhY2UgYmluZGluZyBhdHRyaWJ1dGUuIHB1c2ggdGhlIGJpbmRpbmcgaW50byBzY29wZVxuICAgICAgICAgICAgICAgIGlmIChsb2NhbCA9PT0gXCJ4bWxcIiAmJiBwYXJzZXIuYXR0cmliVmFsdWUgIT09IFhNTF9OQU1FU1BBQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwieG1sOiBwcmVmaXggbXVzdCBiZSBib3VuZCB0byBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBYTUxfTkFNRVNQQUNFICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJBY3R1YWw6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxvY2FsID09PSBcInhtbG5zXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlICE9PSBYTUxOU19OQU1FU1BBQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwieG1sbnM6IHByZWZpeCBtdXN0IGJlIGJvdW5kIHRvIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFhNTE5TX05BTUVTUEFDRSArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlxcblwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQWN0dWFsOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHBhcnNlci50YWc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXI7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWcubnMgPT09IHBhcmVudC5ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnLm5zID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQubnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRhZy5uc1tsb2NhbF0gPSBwYXJzZXIuYXR0cmliVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZGVmZXIgb25hdHRyaWJ1dGUgZXZlbnRzIHVudGlsIGFsbCBhdHRyaWJ1dGVzIGhhdmUgYmVlbiBzZWVuXG4gICAgICAgICAgICAvLyBzbyBhbnkgbmV3IGJpbmRpbmdzIGNhbiB0YWtlIGVmZmVjdC4gcHJlc2VydmUgYXR0cmlidXRlIG9yZGVyXG4gICAgICAgICAgICAvLyBzbyBkZWZlcnJlZCBldmVudHMgY2FuIGJlIGVtaXR0ZWQgaW4gZG9jdW1lbnQgb3JkZXJcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJMaXN0LnB1c2goW3BhcnNlci5hdHRyaWJOYW1lLCBwYXJzZXIuYXR0cmliVmFsdWVdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGluIG5vbi14bWxucyBtb2RlLCB3ZSBjYW4gZW1pdCB0aGUgZXZlbnQgcmlnaHQgYXdheVxuICAgICAgICAgICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzW3BhcnNlci5hdHRyaWJOYW1lXSA9IHBhcnNlci5hdHRyaWJWYWx1ZTtcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmF0dHJpYnV0ZVwiLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogcGFyc2VyLmF0dHJpYk5hbWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHBhcnNlci5hdHRyaWJWYWx1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gXCJcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gb3BlblRhZyhwYXJzZXIsIHNlbGZDbG9zaW5nKSB7XG4gICAgICAgIGlmIChwYXJzZXIub3B0LnhtbG5zKSB7XG4gICAgICAgICAgICAvLyBlbWl0IG5hbWVzcGFjZSBiaW5kaW5nIGV2ZW50c1xuICAgICAgICAgICAgdmFyIHRhZyA9IHBhcnNlci50YWc7XG4gICAgICAgICAgICAvLyBhZGQgbmFtZXNwYWNlIGluZm8gdG8gdGFnXG4gICAgICAgICAgICB2YXIgcW4gPSBxbmFtZShwYXJzZXIudGFnTmFtZSk7XG4gICAgICAgICAgICB0YWcucHJlZml4ID0gcW4ucHJlZml4O1xuICAgICAgICAgICAgdGFnLmxvY2FsID0gcW4ubG9jYWw7XG4gICAgICAgICAgICB0YWcudXJpID0gdGFnLm5zW3FuLnByZWZpeF0gfHwgXCJcIjtcbiAgICAgICAgICAgIGlmICh0YWcucHJlZml4ICYmICF0YWcudXJpKSB7XG4gICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiVW5ib3VuZCBuYW1lc3BhY2UgcHJlZml4OiBcIiArIEpTT04uc3RyaW5naWZ5KHBhcnNlci50YWdOYW1lKSk7XG4gICAgICAgICAgICAgICAgdGFnLnVyaSA9IHFuLnByZWZpeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXI7XG4gICAgICAgICAgICBpZiAodGFnLm5zICYmIHBhcmVudC5ucyAhPT0gdGFnLm5zKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGFnLm5zKS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbm9wZW5uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4OiBwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiB0YWcubnNbcF0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaGFuZGxlIGRlZmVycmVkIG9uYXR0cmlidXRlIGV2ZW50c1xuICAgICAgICAgICAgLy8gTm90ZTogZG8gbm90IGFwcGx5IGRlZmF1bHQgbnMgdG8gYXR0cmlidXRlczpcbiAgICAgICAgICAgIC8vICAgaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLXhtbC1uYW1lcy8jZGVmYXVsdGluZ1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXJzZXIuYXR0cmliTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbnYgPSBwYXJzZXIuYXR0cmliTGlzdFtpXTtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IG52WzBdO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG52WzFdO1xuICAgICAgICAgICAgICAgIHZhciBxdWFsTmFtZSA9IHFuYW1lKG5hbWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIHZhciBwcmVmaXggPSBxdWFsTmFtZS5wcmVmaXg7XG4gICAgICAgICAgICAgICAgdmFyIGxvY2FsID0gcXVhbE5hbWUubG9jYWw7XG4gICAgICAgICAgICAgICAgdmFyIHVyaSA9IHByZWZpeCA9PT0gXCJcIiA/IFwiXCIgOiB0YWcubnNbcHJlZml4XSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIHZhciBhID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHByZWZpeDogcHJlZml4LFxuICAgICAgICAgICAgICAgICAgICBsb2NhbDogbG9jYWwsXG4gICAgICAgICAgICAgICAgICAgIHVyaTogdXJpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUncyBhbnkgYXR0cmlidXRlcyB3aXRoIGFuIHVuZGVmaW5lZCBuYW1lc3BhY2UsXG4gICAgICAgICAgICAgICAgLy8gdGhlbiBmYWlsIG9uIHRoZW0gbm93LlxuICAgICAgICAgICAgICAgIGlmIChwcmVmaXggJiYgcHJlZml4ICE9PSBcInhtbG5zXCIgJiYgIXVyaSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmJvdW5kIG5hbWVzcGFjZSBwcmVmaXg6IFwiICsgSlNPTi5zdHJpbmdpZnkocHJlZml4KSk7XG4gICAgICAgICAgICAgICAgICAgIGEudXJpID0gcHJlZml4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXNbbmFtZV0gPSBhO1xuICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmF0dHJpYnV0ZVwiLCBhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VyLnRhZy5pc1NlbGZDbG9zaW5nID0gISFzZWxmQ2xvc2luZztcbiAgICAgICAgLy8gcHJvY2VzcyB0aGUgdGFnXG4gICAgICAgIHBhcnNlci5zYXdSb290ID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VyLnRhZ3MucHVzaChwYXJzZXIudGFnKTtcbiAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9ub3BlbnRhZ1wiLCBwYXJzZXIudGFnKTtcbiAgICAgICAgaWYgKCFzZWxmQ2xvc2luZykge1xuICAgICAgICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciA8c2NyaXB0PiBpbiBub24tc3RyaWN0IG1vZGUuXG4gICAgICAgICAgICBpZiAoIXBhcnNlci5ub3NjcmlwdCAmJiBwYXJzZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInNjcmlwdFwiKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIudGFnID0gbnVsbDtcbiAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJWYWx1ZSA9IFwiXCI7XG4gICAgICAgIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsb3NlVGFnKHBhcnNlcikge1xuICAgICAgICBpZiAoIXBhcnNlci50YWdOYW1lKSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJXZWlyZCBlbXB0eSBjbG9zZSB0YWcuXCIpO1xuICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlICs9IFwiPC8+XCI7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlci5zY3JpcHQpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZXIudGFnTmFtZSAhPT0gXCJzY3JpcHRcIikge1xuICAgICAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gXCI8L1wiICsgcGFyc2VyLnRhZ05hbWUgKyBcIj5cIjtcbiAgICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uc2NyaXB0XCIsIHBhcnNlci5zY3JpcHQpO1xuICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmlyc3QgbWFrZSBzdXJlIHRoYXQgdGhlIGNsb3NpbmcgdGFnIGFjdHVhbGx5IGV4aXN0cy5cbiAgICAgICAgLy8gPGE+PGI+PC9jPjwvYj48L2E+IHdpbGwgY2xvc2UgZXZlcnl0aGluZywgb3RoZXJ3aXNlLlxuICAgICAgICB2YXIgdCA9IHBhcnNlci50YWdzLmxlbmd0aDtcbiAgICAgICAgdmFyIHRhZ05hbWUgPSBwYXJzZXIudGFnTmFtZTtcbiAgICAgICAgaWYgKCFwYXJzZXIuc3RyaWN0KSB7XG4gICAgICAgICAgICB0YWdOYW1lID0gdGFnTmFtZVtwYXJzZXIubG9vc2VDYXNlXSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjbG9zZVRvID0gdGFnTmFtZTtcbiAgICAgICAgd2hpbGUgKHQtLSkge1xuICAgICAgICAgICAgdmFyIGNsb3NlID0gcGFyc2VyLnRhZ3NbdF07XG4gICAgICAgICAgICBpZiAoY2xvc2UubmFtZSAhPT0gY2xvc2VUbykge1xuICAgICAgICAgICAgICAgIC8vIGZhaWwgdGhlIGZpcnN0IHRpbWUgaW4gc3RyaWN0IG1vZGVcbiAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmV4cGVjdGVkIGNsb3NlIHRhZ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGRpZG4ndCBmaW5kIGl0LiAgd2UgYWxyZWFkeSBmYWlsZWQgZm9yIHN0cmljdCwgc28ganVzdCBhYm9ydC5cbiAgICAgICAgaWYgKHQgPCAwKSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbm1hdGNoZWQgY2xvc2luZyB0YWc6IFwiICsgcGFyc2VyLnRhZ05hbWUpO1xuICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlICs9IFwiPC9cIiArIHBhcnNlci50YWdOYW1lICsgXCI+XCI7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSB0YWdOYW1lO1xuICAgICAgICB2YXIgcyA9IHBhcnNlci50YWdzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKHMtLSA+IHQpIHtcbiAgICAgICAgICAgIHZhciB0YWcgPSAocGFyc2VyLnRhZyA9IHBhcnNlci50YWdzLnBvcCgpKTtcbiAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gcGFyc2VyLnRhZy5uYW1lO1xuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uY2xvc2V0YWdcIiwgcGFyc2VyLnRhZ05hbWUpO1xuICAgICAgICAgICAgdmFyIHggPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdGFnLm5zKSB7XG4gICAgICAgICAgICAgICAgeFtpXSA9IHRhZy5uc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXI7XG4gICAgICAgICAgICBpZiAocGFyc2VyLm9wdC54bWxucyAmJiB0YWcubnMgIT09IHBhcmVudC5ucykge1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBuYW1lc3BhY2UgYmluZGluZ3MgaW50cm9kdWNlZCBieSB0YWdcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0YWcubnMpLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0YWcubnNbcF07XG4gICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNsb3NlbmFtZXNwYWNlXCIsIHsgcHJlZml4OiBwLCB1cmk6IG4gfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgPT09IDApXG4gICAgICAgICAgICBwYXJzZXIuY2xvc2VkUm9vdCA9IHRydWU7XG4gICAgICAgIHBhcnNlci50YWdOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gcGFyc2VyLmF0dHJpYk5hbWUgPSBcIlwiO1xuICAgICAgICBwYXJzZXIuYXR0cmliTGlzdC5sZW5ndGggPSAwO1xuICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlRW50aXR5KHBhcnNlcikge1xuICAgICAgICB2YXIgZW50aXR5ID0gcGFyc2VyLmVudGl0eTtcbiAgICAgICAgdmFyIGVudGl0eUxDID0gZW50aXR5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciBudW07XG4gICAgICAgIHZhciBudW1TdHIgPSBcIlwiO1xuICAgICAgICBpZiAocGFyc2VyLkVOVElUSUVTW2VudGl0eV0pIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIuRU5USVRJRVNbZW50aXR5XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VyLkVOVElUSUVTW2VudGl0eUxDXSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5FTlRJVElFU1tlbnRpdHlMQ107XG4gICAgICAgIH1cbiAgICAgICAgZW50aXR5ID0gZW50aXR5TEM7XG4gICAgICAgIGlmIChlbnRpdHkuY2hhckF0KDApID09PSBcIiNcIikge1xuICAgICAgICAgICAgaWYgKGVudGl0eS5jaGFyQXQoMSkgPT09IFwieFwiKSB7XG4gICAgICAgICAgICAgICAgZW50aXR5ID0gZW50aXR5LnNsaWNlKDIpO1xuICAgICAgICAgICAgICAgIG51bSA9IHBhcnNlSW50KGVudGl0eSwgMTYpO1xuICAgICAgICAgICAgICAgIG51bVN0ciA9IG51bS50b1N0cmluZygxNik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkgPSBlbnRpdHkuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgbnVtID0gcGFyc2VJbnQoZW50aXR5LCAxMCk7XG4gICAgICAgICAgICAgICAgbnVtU3RyID0gbnVtLnRvU3RyaW5nKDEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbnRpdHkgPSBlbnRpdHkucmVwbGFjZSgvXjArLywgXCJcIik7XG4gICAgICAgIGlmIChpc05hTihudW0pIHx8IG51bVN0ci50b0xvd2VyQ2FzZSgpICE9PSBlbnRpdHkpIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgY2hhcmFjdGVyIGVudGl0eVwiKTtcbiAgICAgICAgICAgIHJldHVybiBcIiZcIiArIHBhcnNlci5lbnRpdHkgKyBcIjtcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21Db2RlUG9pbnQobnVtKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmVnaW5XaGl0ZVNwYWNlKHBhcnNlciwgYykge1xuICAgICAgICBpZiAoYyA9PT0gXCI8XCIpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9XQUtBO1xuICAgICAgICAgICAgcGFyc2VyLnN0YXJ0VGFnUG9zaXRpb24gPSBwYXJzZXIucG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgLy8gaGF2ZSB0byBwcm9jZXNzIHRoaXMgYXMgYSB0ZXh0IG5vZGUuXG4gICAgICAgICAgICAvLyB3ZWlyZCwgYnV0IGhhcHBlbnMuXG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJOb24td2hpdGVzcGFjZSBiZWZvcmUgZmlyc3QgdGFnLlwiKTtcbiAgICAgICAgICAgIHBhcnNlci50ZXh0Tm9kZSA9IGM7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gY2hhckF0KGNodW5rLCBpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBcIlwiO1xuICAgICAgICBpZiAoaSA8IGNodW5rLmxlbmd0aCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gY2h1bmsuY2hhckF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHdyaXRlKGNodW5rKSB7XG4gICAgICAgIHZhciBwYXJzZXIgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5lcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VyLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yKHBhcnNlciwgXCJDYW5ub3Qgd3JpdGUgYWZ0ZXIgY2xvc2UuIEFzc2lnbiBhbiBvbnJlYWR5IGhhbmRsZXIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGVuZChwYXJzZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY2h1bmsgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGNodW5rID0gY2h1bmsudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBjID0gXCJcIjtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGMgPSBjaGFyQXQoY2h1bmssIGkrKyk7XG4gICAgICAgICAgICBwYXJzZXIuYyA9IGM7XG4gICAgICAgICAgICBpZiAoIWMpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHBhcnNlci5wb3NpdGlvbisrO1xuICAgICAgICAgICAgICAgIGlmIChjID09PSBcIlxcblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5saW5lKys7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5jb2x1bW4gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbHVtbisrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAocGFyc2VyLnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkJFR0lOOlxuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkJFR0lOX1dISVRFU1BBQ0U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIlxcdUZFRkZcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYmVnaW5XaGl0ZVNwYWNlKHBhcnNlciwgYyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5CRUdJTl9XSElURVNQQUNFOlxuICAgICAgICAgICAgICAgICAgICBiZWdpbldoaXRlU3BhY2UocGFyc2VyLCBjKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLlRFWFQ6XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXIuc2F3Um9vdCAmJiAhcGFyc2VyLmNsb3NlZFJvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFydGkgPSBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjICYmIGMgIT09IFwiPFwiICYmIGMgIT09IFwiJlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGNoYXJBdChjaHVuaywgaSsrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyAmJiBwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIucG9zaXRpb24rKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiXFxuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5saW5lKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29sdW1uID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jb2x1bW4rKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSBjaHVuay5zdWJzdHJpbmcoc3RhcnRpLCBpIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhKHBhcnNlci5zYXdSb290ICYmIHBhcnNlci5jbG9zZWRSb290ICYmICFwYXJzZXIuc3RyaWN0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1dBS0E7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiA9IHBhcnNlci5wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNXaGl0ZXNwYWNlKGMpICYmICghcGFyc2VyLnNhd1Jvb3QgfHwgcGFyc2VyLmNsb3NlZFJvb3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiVGV4dCBkYXRhIG91dHNpZGUgb2Ygcm9vdCBub2RlLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIiZcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVF9FTlRJVFk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGV4dE5vZGUgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuU0NSSVBUOlxuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IG5vbi1zdHJpY3RcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVF9FTkRJTkc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLlNDUklQVF9FTkRJTkc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIi9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9IFwiPFwiICsgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5PUEVOX1dBS0E6XG4gICAgICAgICAgICAgICAgICAgIC8vIGVpdGhlciBhIC8sID8sICEsIG9yIHRleHQgaXMgY29taW5nIG5leHQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIiFcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0w7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2FpdCBmb3IgaXQuLi5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCIvXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0xPU0VfVEFHO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiP1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdE5hbWUgPSBwYXJzZXIucHJvY0luc3RCb2R5ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIlVuZW5jb2RlZCA8XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgd2FzIHNvbWUgd2hpdGVzcGFjZSwgdGhlbiBhZGQgdGhhdCBpbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiArIDEgPCBwYXJzZXIucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFkID0gcGFyc2VyLnBvc2l0aW9uIC0gcGFyc2VyLnN0YXJ0VGFnUG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG5ldyBBcnJheShwYWQpLmpvaW4oXCIgXCIpICsgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSBcIjxcIiArIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLlNHTUxfREVDTDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwYXJzZXIuc2dtbERlY2wgKyBjKS50b1VwcGVyQ2FzZSgpID09PSBDREFUQSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9ub3BlbmNkYXRhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlci5zZ21sRGVjbCArIGMgPT09IFwiLS1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgocGFyc2VyLnNnbWxEZWNsICsgYykudG9VcHBlckNhc2UoKSA9PT0gRE9DVFlQRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlci5kb2N0eXBlIHx8IHBhcnNlci5zYXdSb290KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiSW5hcHByb3ByaWF0ZWx5IGxvY2F0ZWQgZG9jdHlwZSBkZWNsYXJhdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbnNnbWxkZWNsYXJhdGlvblwiLCBwYXJzZXIuc2dtbERlY2wpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1F1b3RlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNHTUxfREVDTF9RVU9URUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5TR01MX0RFQ0xfUVVPVEVEOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0dNTF9ERUNMO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCArPSBjO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuRE9DVFlQRTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25kb2N0eXBlXCIsIHBhcnNlci5kb2N0eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlID0gdHJ1ZTsgLy8ganVzdCByZW1lbWJlciB0aGF0IHdlIHNhdyBpdC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCJbXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVfRFREO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNRdW90ZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9RVU9URUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnEgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5ET0NUWVBFX1FVT1RFRDpcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IHBhcnNlci5xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIucSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkRPQ1RZUEVfRFREOlxuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuZG9jdHlwZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCJdXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1F1b3RlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVfRFREX1FVT1RFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5xID0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuRE9DVFlQRV9EVERfUVVPVEVEOlxuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuZG9jdHlwZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVEQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIucSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkNPTU1FTlQ6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIi1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UX0VORElORztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jb21tZW50ICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkNPTU1FTlRfRU5ESU5HOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCItXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVF9FTkRFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jb21tZW50ID0gdGV4dG9wdHMocGFyc2VyLm9wdCwgcGFyc2VyLmNvbW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlci5jb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uY29tbWVudFwiLCBwYXJzZXIuY29tbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29tbWVudCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29tbWVudCArPSBcIi1cIiArIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkNPTU1FTlRfRU5ERUQ6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjICE9PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiTWFsZm9ybWVkIGNvbW1lbnRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGxvdyA8IS0tIGJsYWggLS0gYmxvbyAtLT4gaW4gbm9uLXN0cmljdCBtb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggaXMgYSBjb21tZW50IG9mIFwiIGJsYWggLS0gYmxvbyBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgKz0gXCItLVwiICsgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQ0RBVEE6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIl1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQV9FTkRJTkc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQ0RBVEFfRU5ESU5HOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCJdXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEFfRU5ESU5HXzI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gXCJdXCIgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQ0RBVEFfRU5ESU5HXzI6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlci5jZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNkYXRhXCIsIHBhcnNlci5jZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25jbG9zZWNkYXRhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNkYXRhID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIl1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNkYXRhICs9IFwiXVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNkYXRhICs9IFwiXV1cIiArIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5QUk9DX0lOU1Q6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIj9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfRU5ESU5HO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfQk9EWTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdE5hbWUgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuUFJPQ19JTlNUX0JPRFk6XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VyLnByb2NJbnN0Qm9keSAmJiBpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiP1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9FTkRJTkc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIucHJvY0luc3RCb2R5ICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLlBST0NfSU5TVF9FTkRJTkc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9ucHJvY2Vzc2luZ2luc3RydWN0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJzZXIucHJvY0luc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHBhcnNlci5wcm9jSW5zdEJvZHksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdE5hbWUgPSBwYXJzZXIucHJvY0luc3RCb2R5ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdEJvZHkgKz0gXCI/XCIgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfQk9EWTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuT1BFTl9UQUc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01hdGNoKG5hbWVCb2R5LCBjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RhZyhwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCIvXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCBjaGFyYWN0ZXIgaW4gdGFnIG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5PUEVOX1RBR19TTEFTSDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlciwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVRhZyhwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiRm9yd2FyZC1zbGFzaCBpbiBvcGVuaW5nIHRhZyBub3QgZm9sbG93ZWQgYnkgPlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUI6XG4gICAgICAgICAgICAgICAgICAgIC8vIGhhdmVuJ3QgcmVhZCB0aGUgYXR0cmlidXRlIG5hbWUgeWV0LlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiL1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX05BTUU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfTkFNRTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiQXR0cmlidXRlIHdpdGhvdXQgdmFsdWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSBwYXJzZXIuYXR0cmliTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYihwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRV9TQVdfV0hJVEU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNNYXRjaChuYW1lQm9keSwgYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfTkFNRV9TQVdfV0hJVEU6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIj1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkF0dHJpYnV0ZSB3aXRob3V0IHZhbHVlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzW3BhcnNlci5hdHRyaWJOYW1lXSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uYXR0cmlidXRlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJzZXIuYXR0cmliTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX05BTUU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUU6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5xID0gYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1FVT1RFRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIlVucXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1VOUVVPVEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX1FVT1RFRDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgIT09IHBhcnNlci5xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCImXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXR0cmliKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5xID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfQ0xPU0VEO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0NMT1NFRDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIi9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR19TTEFTSDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIk5vIHdoaXRlc3BhY2UgYmV0d2VlbiBhdHRyaWJ1dGVzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX05BTUU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfVU5RVU9URUQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNBdHRyaWJFbmQoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIiZcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX0VOVElUWV9VO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlICs9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhdHRyaWIocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQ0xPU0VfVEFHOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlci50YWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChub3RNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlci5zY3JpcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSBcIjwvXCIgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgdGFnbmFtZSBpbiBjbG9zaW5nIHRhZy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVRhZyhwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzTWF0Y2gobmFtZUJvZHksIGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlci5zY3JpcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gXCI8L1wiICsgcGFyc2VyLnRhZ05hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCB0YWduYW1lIGluIGNsb3NpbmcgdGFnXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUdfU0FXX1dISVRFO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5DTE9TRV9UQUdfU0FXX1dISVRFOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGNoYXJhY3RlcnMgaW4gY2xvc2luZyB0YWdcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLlRFWFRfRU5USVRZOlxuICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfRU5USVRZX1E6XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfVTpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldHVyblN0YXRlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHBhcnNlci5zdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTLlRFWFRfRU5USVRZOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblN0YXRlID0gUy5URVhUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IFwidGV4dE5vZGVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfRU5USVRZX1E6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuU3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9RVU9URUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gXCJhdHRyaWJWYWx1ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfVTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5TdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1VOUVVPVEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IFwiYXR0cmliVmFsdWVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI7XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXIub3B0LnVucGFyc2VkRW50aXRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyc2VkRW50aXR5ID0gcGFyc2VFbnRpdHkocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuZW50aXR5ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSByZXR1cm5TdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIud3JpdGUocGFyc2VkRW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcltidWZmZXJdICs9IHBhcnNlRW50aXR5KHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmVudGl0eSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gcmV0dXJuU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNNYXRjaChwYXJzZXIuZW50aXR5Lmxlbmd0aCA/IGVudGl0eUJvZHkgOiBlbnRpdHlTdGFydCwgYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5lbnRpdHkgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgY2hhcmFjdGVyIGluIGVudGl0eSBuYW1lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyW2J1ZmZlcl0gKz0gXCImXCIgKyBwYXJzZXIuZW50aXR5ICsgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5lbnRpdHkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gcmV0dXJuU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8ge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocGFyc2VyLCBcIlVua25vd24gc3RhdGU6IFwiICsgcGFyc2VyLnN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gLy8gd2hpbGVcbiAgICAgICAgaWYgKHBhcnNlci5wb3NpdGlvbiA+PSBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbikge1xuICAgICAgICAgICAgY2hlY2tCdWZmZXJMZW5ndGgocGFyc2VyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VyO1xuICAgIH1cbiAgICAvKiEgaHR0cDovL210aHMuYmUvZnJvbWNvZGVwb2ludCB2MC4xLjAgYnkgQG1hdGhpYXMgKi9cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGlmICghU3RyaW5nLmZyb21Db2RlUG9pbnQpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuICAgICAgICAgICAgdmFyIGZsb29yID0gTWF0aC5mbG9vcjtcbiAgICAgICAgICAgIHZhciBmcm9tQ29kZVBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBNQVhfU0laRSA9IDB4NDAwMDtcbiAgICAgICAgICAgICAgICB2YXIgY29kZVVuaXRzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGhpZ2hTdXJyb2dhdGU7XG4gICAgICAgICAgICAgICAgdmFyIGxvd1N1cnJvZ2F0ZTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGVQb2ludCA9IE51bWJlcihhcmd1bWVudHNbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0Zpbml0ZShjb2RlUG9pbnQpIHx8IC8vIGBOYU5gLCBgK0luZmluaXR5YCwgb3IgYC1JbmZpbml0eWBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVQb2ludCA8IDAgfHwgLy8gbm90IGEgdmFsaWQgVW5pY29kZSBjb2RlIHBvaW50XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlUG9pbnQgPiAweDEwZmZmZiB8fCAvLyBub3QgYSB2YWxpZCBVbmljb2RlIGNvZGUgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb29yKGNvZGVQb2ludCkgIT09IGNvZGVQb2ludCAvLyBub3QgYW4gaW50ZWdlclxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGNvZGUgcG9pbnQ6IFwiICsgY29kZVBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZVBvaW50IDw9IDB4ZmZmZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQk1QIGNvZGUgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVVbml0cy5wdXNoKGNvZGVQb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3RyYWwgY29kZSBwb2ludDsgc3BsaXQgaW4gc3Vycm9nYXRlIGhhbHZlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZyNzdXJyb2dhdGUtZm9ybXVsYWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaFN1cnJvZ2F0ZSA9IChjb2RlUG9pbnQgPj4gMTApICsgMHhkODAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG93U3Vycm9nYXRlID0gKGNvZGVQb2ludCAlIDB4NDAwKSArIDB4ZGMwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVVbml0cy5wdXNoKGhpZ2hTdXJyb2dhdGUsIGxvd1N1cnJvZ2F0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICsgMSA9PT0gbGVuZ3RoIHx8IGNvZGVVbml0cy5sZW5ndGggPiBNQVhfU0laRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZS5hcHBseShudWxsLCBjb2RlVW5pdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZVVuaXRzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICAgICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcsIFwiZnJvbUNvZGVQb2ludFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmcm9tQ29kZVBvaW50LFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgU3RyaW5nLmZyb21Db2RlUG9pbnQgPSBmcm9tQ29kZVBvaW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuICAgIH1cbiAgICByZXR1cm4gc2F4O1xufTtcbmNvbnN0IHNheCA9IC8qKiAjX19QVVJFX18gKi8gaW5pdGlhbGl6ZVNheCgpO1xuZXhwb3J0IHsgc2F4IH07XG4iXSwibmFtZXMiOlsiaW5pdGlhbGl6ZVNheCIsInNheCIsInBhcnNlciIsInN0cmljdCIsIm9wdCIsIlNBWFBhcnNlciIsIlNBWFN0cmVhbSIsImNyZWF0ZVN0cmVhbSIsIk1BWF9CVUZGRVJfTEVOR1RIIiwiYnVmZmVycyIsIkVWRU5UUyIsImNsZWFyQnVmZmVycyIsInEiLCJjIiwiYnVmZmVyQ2hlY2tQb3NpdGlvbiIsImxvd2VyY2FzZSIsImxvd2VyY2FzZXRhZ3MiLCJsb29zZUNhc2UiLCJ0YWdzIiwiY2xvc2VkIiwiY2xvc2VkUm9vdCIsInNhd1Jvb3QiLCJ0YWciLCJlcnJvciIsIm5vc2NyaXB0Iiwic3RhdGUiLCJTIiwiQkVHSU4iLCJzdHJpY3RFbnRpdGllcyIsIkVOVElUSUVTIiwiT2JqZWN0IiwiY3JlYXRlIiwiWE1MX0VOVElUSUVTIiwiYXR0cmliTGlzdCIsInhtbG5zIiwibnMiLCJyb290TlMiLCJ0cmFja1Bvc2l0aW9uIiwicG9zaXRpb24iLCJsaW5lIiwiY29sdW1uIiwiZW1pdCIsIm8iLCJGIiwicHJvdG90eXBlIiwibmV3ZiIsImtleXMiLCJhIiwiaSIsImhhc093blByb3BlcnR5IiwicHVzaCIsImNoZWNrQnVmZmVyTGVuZ3RoIiwibWF4QWxsb3dlZCIsIk1hdGgiLCJtYXgiLCJtYXhBY3R1YWwiLCJsIiwibGVuZ3RoIiwibGVuIiwiY2xvc2VUZXh0IiwiZW1pdE5vZGUiLCJjZGF0YSIsInNjcmlwdCIsIm0iLCJmbHVzaEJ1ZmZlcnMiLCJlbmQiLCJ3cml0ZSIsInJlc3VtZSIsImNsb3NlIiwiZmx1c2giLCJTdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsInN0cmVhbVdyYXBzIiwiZmlsdGVyIiwiZXYiLCJhcHBseSIsIl9wYXJzZXIiLCJ3cml0YWJsZSIsInJlYWRhYmxlIiwibWUiLCJvbmVuZCIsIm9uZXJyb3IiLCJlciIsIl9kZWNvZGVyIiwiZm9yRWFjaCIsImRlZmluZVByb3BlcnR5IiwiZ2V0Iiwic2V0IiwiaCIsInJlbW92ZUFsbExpc3RlbmVycyIsIm9uIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsImNvbnN0cnVjdG9yIiwidmFsdWUiLCJkYXRhIiwidG9TdHJpbmciLCJjaHVuayIsImhhbmRsZXIiLCJpbmRleE9mIiwiYXJncyIsImFyZ3VtZW50cyIsIkFycmF5Iiwic3BsaWNlIiwiY2FsbCIsIkNEQVRBIiwiRE9DVFlQRSIsIlhNTF9OQU1FU1BBQ0UiLCJYTUxOU19OQU1FU1BBQ0UiLCJ4bWwiLCJuYW1lU3RhcnQiLCJuYW1lQm9keSIsImVudGl0eVN0YXJ0IiwiZW50aXR5Qm9keSIsImlzV2hpdGVzcGFjZSIsImlzUXVvdGUiLCJpc0F0dHJpYkVuZCIsImlzTWF0Y2giLCJyZWdleCIsInRlc3QiLCJub3RNYXRjaCIsIlNUQVRFIiwiQkVHSU5fV0hJVEVTUEFDRSIsIlRFWFQiLCJURVhUX0VOVElUWSIsIk9QRU5fV0FLQSIsIlNHTUxfREVDTCIsIlNHTUxfREVDTF9RVU9URUQiLCJET0NUWVBFX1FVT1RFRCIsIkRPQ1RZUEVfRFREIiwiRE9DVFlQRV9EVERfUVVPVEVEIiwiQ09NTUVOVF9TVEFSVElORyIsIkNPTU1FTlQiLCJDT01NRU5UX0VORElORyIsIkNPTU1FTlRfRU5ERUQiLCJDREFUQV9FTkRJTkciLCJDREFUQV9FTkRJTkdfMiIsIlBST0NfSU5TVCIsIlBST0NfSU5TVF9CT0RZIiwiUFJPQ19JTlNUX0VORElORyIsIk9QRU5fVEFHIiwiT1BFTl9UQUdfU0xBU0giLCJBVFRSSUIiLCJBVFRSSUJfTkFNRSIsIkFUVFJJQl9OQU1FX1NBV19XSElURSIsIkFUVFJJQl9WQUxVRSIsIkFUVFJJQl9WQUxVRV9RVU9URUQiLCJBVFRSSUJfVkFMVUVfQ0xPU0VEIiwiQVRUUklCX1ZBTFVFX1VOUVVPVEVEIiwiQVRUUklCX1ZBTFVFX0VOVElUWV9RIiwiQVRUUklCX1ZBTFVFX0VOVElUWV9VIiwiQ0xPU0VfVEFHIiwiQ0xPU0VfVEFHX1NBV19XSElURSIsIlNDUklQVCIsIlNDUklQVF9FTkRJTkciLCJhbXAiLCJndCIsImx0IiwicXVvdCIsImFwb3MiLCJBRWxpZyIsIkFhY3V0ZSIsIkFjaXJjIiwiQWdyYXZlIiwiQXJpbmciLCJBdGlsZGUiLCJBdW1sIiwiQ2NlZGlsIiwiRVRIIiwiRWFjdXRlIiwiRWNpcmMiLCJFZ3JhdmUiLCJFdW1sIiwiSWFjdXRlIiwiSWNpcmMiLCJJZ3JhdmUiLCJJdW1sIiwiTnRpbGRlIiwiT2FjdXRlIiwiT2NpcmMiLCJPZ3JhdmUiLCJPc2xhc2giLCJPdGlsZGUiLCJPdW1sIiwiVEhPUk4iLCJVYWN1dGUiLCJVY2lyYyIsIlVncmF2ZSIsIlV1bWwiLCJZYWN1dGUiLCJhYWN1dGUiLCJhY2lyYyIsImFlbGlnIiwiYWdyYXZlIiwiYXJpbmciLCJhdGlsZGUiLCJhdW1sIiwiY2NlZGlsIiwiZWFjdXRlIiwiZWNpcmMiLCJlZ3JhdmUiLCJldGgiLCJldW1sIiwiaWFjdXRlIiwiaWNpcmMiLCJpZ3JhdmUiLCJpdW1sIiwibnRpbGRlIiwib2FjdXRlIiwib2NpcmMiLCJvZ3JhdmUiLCJvc2xhc2giLCJvdGlsZGUiLCJvdW1sIiwic3psaWciLCJ0aG9ybiIsInVhY3V0ZSIsInVjaXJjIiwidWdyYXZlIiwidXVtbCIsInlhY3V0ZSIsInl1bWwiLCJjb3B5IiwicmVnIiwibmJzcCIsImlleGNsIiwiY2VudCIsInBvdW5kIiwiY3VycmVuIiwieWVuIiwiYnJ2YmFyIiwic2VjdCIsInVtbCIsIm9yZGYiLCJsYXF1byIsIm5vdCIsInNoeSIsIm1hY3IiLCJkZWciLCJwbHVzbW4iLCJzdXAxIiwic3VwMiIsInN1cDMiLCJhY3V0ZSIsIm1pY3JvIiwicGFyYSIsIm1pZGRvdCIsImNlZGlsIiwib3JkbSIsInJhcXVvIiwiZnJhYzE0IiwiZnJhYzEyIiwiZnJhYzM0IiwiaXF1ZXN0IiwidGltZXMiLCJkaXZpZGUiLCJPRWxpZyIsIm9lbGlnIiwiU2Nhcm9uIiwic2Nhcm9uIiwiWXVtbCIsImZub2YiLCJjaXJjIiwidGlsZGUiLCJBbHBoYSIsIkJldGEiLCJHYW1tYSIsIkRlbHRhIiwiRXBzaWxvbiIsIlpldGEiLCJFdGEiLCJUaGV0YSIsIklvdGEiLCJLYXBwYSIsIkxhbWJkYSIsIk11IiwiTnUiLCJYaSIsIk9taWNyb24iLCJQaSIsIlJobyIsIlNpZ21hIiwiVGF1IiwiVXBzaWxvbiIsIlBoaSIsIkNoaSIsIlBzaSIsIk9tZWdhIiwiYWxwaGEiLCJiZXRhIiwiZ2FtbWEiLCJkZWx0YSIsImVwc2lsb24iLCJ6ZXRhIiwiZXRhIiwidGhldGEiLCJpb3RhIiwia2FwcGEiLCJsYW1iZGEiLCJtdSIsIm51IiwieGkiLCJvbWljcm9uIiwicGkiLCJyaG8iLCJzaWdtYWYiLCJzaWdtYSIsInRhdSIsInVwc2lsb24iLCJwaGkiLCJjaGkiLCJwc2kiLCJvbWVnYSIsInRoZXRhc3ltIiwidXBzaWgiLCJwaXYiLCJlbnNwIiwiZW1zcCIsInRoaW5zcCIsInp3bmoiLCJ6d2oiLCJscm0iLCJybG0iLCJuZGFzaCIsIm1kYXNoIiwibHNxdW8iLCJyc3F1byIsInNicXVvIiwibGRxdW8iLCJyZHF1byIsImJkcXVvIiwiZGFnZ2VyIiwiRGFnZ2VyIiwiYnVsbCIsImhlbGxpcCIsInBlcm1pbCIsInByaW1lIiwiUHJpbWUiLCJsc2FxdW8iLCJyc2FxdW8iLCJvbGluZSIsImZyYXNsIiwiZXVybyIsImltYWdlIiwid2VpZXJwIiwicmVhbCIsInRyYWRlIiwiYWxlZnN5bSIsImxhcnIiLCJ1YXJyIiwicmFyciIsImRhcnIiLCJoYXJyIiwiY3JhcnIiLCJsQXJyIiwidUFyciIsInJBcnIiLCJkQXJyIiwiaEFyciIsImZvcmFsbCIsInBhcnQiLCJleGlzdCIsImVtcHR5IiwibmFibGEiLCJpc2luIiwibm90aW4iLCJuaSIsInByb2QiLCJzdW0iLCJtaW51cyIsImxvd2FzdCIsInJhZGljIiwicHJvcCIsImluZmluIiwiYW5nIiwiYW5kIiwib3IiLCJjYXAiLCJjdXAiLCJpbnQiLCJ0aGVyZTQiLCJzaW0iLCJjb25nIiwiYXN5bXAiLCJuZSIsImVxdWl2IiwibGUiLCJnZSIsInN1YiIsInN1cCIsIm5zdWIiLCJzdWJlIiwic3VwZSIsIm9wbHVzIiwib3RpbWVzIiwicGVycCIsInNkb3QiLCJsY2VpbCIsInJjZWlsIiwibGZsb29yIiwicmZsb29yIiwibGFuZyIsInJhbmciLCJsb3oiLCJzcGFkZXMiLCJjbHVicyIsImhlYXJ0cyIsImRpYW1zIiwia2V5IiwiZSIsInMiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJldmVudCIsIm5vZGVUeXBlIiwidGV4dE5vZGUiLCJ0ZXh0b3B0cyIsInRleHQiLCJ0cmltIiwibm9ybWFsaXplIiwicmVwbGFjZSIsIkVycm9yIiwic3RyaWN0RmFpbCIsIm1lc3NhZ2UiLCJuZXdUYWciLCJ0YWdOYW1lIiwicGFyZW50IiwibmFtZSIsImF0dHJpYnV0ZXMiLCJxbmFtZSIsImF0dHJpYnV0ZSIsInF1YWxOYW1lIiwic3BsaXQiLCJwcmVmaXgiLCJsb2NhbCIsImF0dHJpYiIsImF0dHJpYk5hbWUiLCJhdHRyaWJWYWx1ZSIsInFuIiwib3BlblRhZyIsInNlbGZDbG9zaW5nIiwidXJpIiwiSlNPTiIsInN0cmluZ2lmeSIsInAiLCJudiIsImlzU2VsZkNsb3NpbmciLCJ0b0xvd2VyQ2FzZSIsImNsb3NlVGFnIiwidCIsImNsb3NlVG8iLCJwb3AiLCJ4IiwibiIsInBhcnNlRW50aXR5IiwiZW50aXR5IiwiZW50aXR5TEMiLCJudW0iLCJudW1TdHIiLCJjaGFyQXQiLCJzbGljZSIsInBhcnNlSW50IiwiaXNOYU4iLCJmcm9tQ29kZVBvaW50IiwiYmVnaW5XaGl0ZVNwYWNlIiwic3RhcnRUYWdQb3NpdGlvbiIsInJlc3VsdCIsInN0YXJ0aSIsInN1YnN0cmluZyIsInNnbWxEZWNsIiwicHJvY0luc3ROYW1lIiwicHJvY0luc3RCb2R5IiwicGFkIiwiam9pbiIsInRvVXBwZXJDYXNlIiwiY29tbWVudCIsImRvY3R5cGUiLCJib2R5IiwicmV0dXJuU3RhdGUiLCJidWZmZXIiLCJ1bnBhcnNlZEVudGl0aWVzIiwicGFyc2VkRW50aXR5Iiwic3RyaW5nRnJvbUNoYXJDb2RlIiwiZmxvb3IiLCJNQVhfU0laRSIsImNvZGVVbml0cyIsImhpZ2hTdXJyb2dhdGUiLCJsb3dTdXJyb2dhdGUiLCJpbmRleCIsImNvZGVQb2ludCIsIk51bWJlciIsImlzRmluaXRlIiwiUmFuZ2VFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/signal.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/signal.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   raceWithSignal: () => (/* binding */ raceWithSignal)\n/* harmony export */ });\nasync function raceWithSignal(promise, signal) {\n    if (signal === undefined) {\n        return promise;\n    }\n    let listener;\n    return Promise.race([\n        promise.catch((err)=>{\n            if (!signal?.aborted) {\n                throw err;\n            } else {\n                return undefined;\n            }\n        }),\n        new Promise((_, reject)=>{\n            listener = ()=>{\n                reject(new Error(\"Aborted\"));\n            };\n            signal.addEventListener(\"abort\", listener);\n            // Must be here inside the promise to avoid a race condition\n            if (signal.aborted) {\n                reject(new Error(\"Aborted\"));\n            }\n        })\n    ]).finally(()=>signal.removeEventListener(\"abort\", listener));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc2lnbmFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxlQUFlQSxlQUFlQyxPQUFPLEVBQUVDLE1BQU07SUFDaEQsSUFBSUEsV0FBV0MsV0FBVztRQUN0QixPQUFPRjtJQUNYO0lBQ0EsSUFBSUc7SUFDSixPQUFPQyxRQUFRQyxJQUFJLENBQUM7UUFDaEJMLFFBQVFNLEtBQUssQ0FBQyxDQUFDQztZQUNYLElBQUksQ0FBQ04sUUFBUU8sU0FBUztnQkFDbEIsTUFBTUQ7WUFDVixPQUNLO2dCQUNELE9BQU9MO1lBQ1g7UUFDSjtRQUNBLElBQUlFLFFBQVEsQ0FBQ0ssR0FBR0M7WUFDWlAsV0FBVztnQkFDUE8sT0FBTyxJQUFJQyxNQUFNO1lBQ3JCO1lBQ0FWLE9BQU9XLGdCQUFnQixDQUFDLFNBQVNUO1lBQ2pDLDREQUE0RDtZQUM1RCxJQUFJRixPQUFPTyxPQUFPLEVBQUU7Z0JBQ2hCRSxPQUFPLElBQUlDLE1BQU07WUFDckI7UUFDSjtLQUNILEVBQUVFLE9BQU8sQ0FBQyxJQUFNWixPQUFPYSxtQkFBbUIsQ0FBQyxTQUFTWDtBQUN6RCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc2lnbmFsLmpzPzI5MGMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJhY2VXaXRoU2lnbmFsKHByb21pc2UsIHNpZ25hbCkge1xuICAgIGlmIChzaWduYWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgbGV0IGxpc3RlbmVyO1xuICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgICBwcm9taXNlLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmICghc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJBYm9ydGVkXCIpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIC8vIE11c3QgYmUgaGVyZSBpbnNpZGUgdGhlIHByb21pc2UgdG8gYXZvaWQgYSByYWNlIGNvbmRpdGlvblxuICAgICAgICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkFib3J0ZWRcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICBdKS5maW5hbGx5KCgpID0+IHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgbGlzdGVuZXIpKTtcbn1cbiJdLCJuYW1lcyI6WyJyYWNlV2l0aFNpZ25hbCIsInByb21pc2UiLCJzaWduYWwiLCJ1bmRlZmluZWQiLCJsaXN0ZW5lciIsIlByb21pc2UiLCJyYWNlIiwiY2F0Y2giLCJlcnIiLCJhYm9ydGVkIiwiXyIsInJlamVjdCIsIkVycm9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZpbmFsbHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/signal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/stream.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/stream.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncGeneratorWithSetup: () => (/* binding */ AsyncGeneratorWithSetup),\n/* harmony export */   IterableReadableStream: () => (/* binding */ IterableReadableStream),\n/* harmony export */   atee: () => (/* binding */ atee),\n/* harmony export */   concat: () => (/* binding */ concat),\n/* harmony export */   pipeGeneratorWithSetup: () => (/* binding */ pipeGeneratorWithSetup)\n/* harmony export */ });\n/* harmony import */ var _runnables_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _signal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./signal.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/signal.js\");\n\n\n\n/*\n * Support async iterator syntax for ReadableStreams in all environments.\n * Source: https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */ class IterableReadableStream extends ReadableStream {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"reader\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    ensureReader() {\n        if (!this.reader) {\n            this.reader = this.getReader();\n        }\n    }\n    async next() {\n        this.ensureReader();\n        try {\n            const result = await this.reader.read();\n            if (result.done) {\n                this.reader.releaseLock(); // release lock when stream becomes closed\n                return {\n                    done: true,\n                    value: undefined\n                };\n            } else {\n                return {\n                    done: false,\n                    value: result.value\n                };\n            }\n        } catch (e) {\n            this.reader.releaseLock(); // release lock when stream becomes errored\n            throw e;\n        }\n    }\n    async return() {\n        this.ensureReader();\n        // If wrapped in a Node stream, cancel is already called.\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        return {\n            done: true,\n            value: undefined\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async throw(e) {\n        this.ensureReader();\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        throw e;\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore Not present in Node 18 types, required in latest Node 22\n    async [Symbol.asyncDispose]() {\n        await this.return();\n    }\n    static fromReadableStream(stream) {\n        // From https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Using_readable_streams#reading_the_stream\n        const reader = stream.getReader();\n        return new IterableReadableStream({\n            start (controller) {\n                return pump();\n                function pump() {\n                    return reader.read().then(({ done, value })=>{\n                        // When no more data needs to be consumed, close the stream\n                        if (done) {\n                            controller.close();\n                            return;\n                        }\n                        // Enqueue the next data chunk into our target stream\n                        controller.enqueue(value);\n                        return pump();\n                    });\n                }\n            },\n            cancel () {\n                reader.releaseLock();\n            }\n        });\n    }\n    static fromAsyncGenerator(generator) {\n        return new IterableReadableStream({\n            async pull (controller) {\n                const { value, done } = await generator.next();\n                // When no more data needs to be consumed, close the stream\n                if (done) {\n                    controller.close();\n                }\n                // Fix: `else if (value)` will hang the streaming when nullish value (e.g. empty string) is pulled\n                controller.enqueue(value);\n            },\n            async cancel (reason) {\n                await generator.return(reason);\n            }\n        });\n    }\n}\nfunction atee(iter, length = 2) {\n    const buffers = Array.from({\n        length\n    }, ()=>[]);\n    return buffers.map(async function* makeIter(buffer) {\n        while(true){\n            if (buffer.length === 0) {\n                const result = await iter.next();\n                for (const buffer of buffers){\n                    buffer.push(result);\n                }\n            } else if (buffer[0].done) {\n                return;\n            } else {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                yield buffer.shift().value;\n            }\n        }\n    });\n}\nfunction concat(first, second) {\n    if (Array.isArray(first) && Array.isArray(second)) {\n        return first.concat(second);\n    } else if (typeof first === \"string\" && typeof second === \"string\") {\n        return first + second;\n    } else if (typeof first === \"number\" && typeof second === \"number\") {\n        return first + second;\n    } else if (// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    \"concat\" in first && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    typeof first.concat === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return first.concat(second);\n    } else if (typeof first === \"object\" && typeof second === \"object\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const chunk = {\n            ...first\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        for (const [key, value] of Object.entries(second)){\n            if (key in chunk && !Array.isArray(chunk[key])) {\n                chunk[key] = concat(chunk[key], value);\n            } else {\n                chunk[key] = value;\n            }\n        }\n        return chunk;\n    } else {\n        throw new Error(`Cannot concat ${typeof first} and ${typeof second}`);\n    }\n}\nclass AsyncGeneratorWithSetup {\n    constructor(params){\n        Object.defineProperty(this, \"generator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"setup\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"signal\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResult\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResultUsed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.generator = params.generator;\n        this.config = params.config;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.signal = params.signal ?? this.config?.signal;\n        // setup is a promise that resolves only after the first iterator value\n        // is available. this is useful when setup of several piped generators\n        // needs to happen in logical order, ie. in the order in which input to\n        // to each generator is available.\n        this.setup = new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_0__.pickRunnableConfigKeys)(params.config), async ()=>{\n                this.firstResult = params.generator.next();\n                if (params.startSetup) {\n                    this.firstResult.then(params.startSetup).then(resolve, reject);\n                } else {\n                    this.firstResult.then((_result)=>resolve(undefined), reject);\n                }\n            }, true);\n        });\n    }\n    async next(...args) {\n        this.signal?.throwIfAborted();\n        if (!this.firstResultUsed) {\n            this.firstResultUsed = true;\n            return this.firstResult;\n        }\n        return _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_0__.pickRunnableConfigKeys)(this.config), this.signal ? async ()=>{\n            return (0,_signal_js__WEBPACK_IMPORTED_MODULE_2__.raceWithSignal)(this.generator.next(...args), this.signal);\n        } : async ()=>{\n            return this.generator.next(...args);\n        }, true);\n    }\n    async return(value) {\n        return this.generator.return(value);\n    }\n    async throw(e) {\n        return this.generator.throw(e);\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore Not present in Node 18 types, required in latest Node 22\n    async [Symbol.asyncDispose]() {\n        await this.return();\n    }\n}\nasync function pipeGeneratorWithSetup(to, generator, startSetup, signal, ...args) {\n    const gen = new AsyncGeneratorWithSetup({\n        generator,\n        startSetup,\n        signal\n    });\n    const setup = await gen.setup;\n    return {\n        output: to(gen, setup, ...args),\n        setup\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWdFO0FBQ1k7QUFDL0I7QUFDN0M7OztDQUdDLEdBQ00sTUFBTUcsK0JBQStCQztJQUN4Q0MsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7SUFDSjtJQUNBQyxlQUFlO1FBQ1gsSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFBTSxFQUFFO1lBQ2QsSUFBSSxDQUFDQSxNQUFNLEdBQUcsSUFBSSxDQUFDQyxTQUFTO1FBQ2hDO0lBQ0o7SUFDQSxNQUFNQyxPQUFPO1FBQ1QsSUFBSSxDQUFDSCxZQUFZO1FBQ2pCLElBQUk7WUFDQSxNQUFNSSxTQUFTLE1BQU0sSUFBSSxDQUFDSCxNQUFNLENBQUNJLElBQUk7WUFDckMsSUFBSUQsT0FBT0UsSUFBSSxFQUFFO2dCQUNiLElBQUksQ0FBQ0wsTUFBTSxDQUFDTSxXQUFXLElBQUksMENBQTBDO2dCQUNyRSxPQUFPO29CQUNIRCxNQUFNO29CQUNOUCxPQUFPUztnQkFDWDtZQUNKLE9BQ0s7Z0JBQ0QsT0FBTztvQkFDSEYsTUFBTTtvQkFDTlAsT0FBT0ssT0FBT0wsS0FBSztnQkFDdkI7WUFDSjtRQUNKLEVBQ0EsT0FBT1UsR0FBRztZQUNOLElBQUksQ0FBQ1IsTUFBTSxDQUFDTSxXQUFXLElBQUksMkNBQTJDO1lBQ3RFLE1BQU1FO1FBQ1Y7SUFDSjtJQUNBLE1BQU1DLFNBQVM7UUFDWCxJQUFJLENBQUNWLFlBQVk7UUFDakIseURBQXlEO1FBQ3pELElBQUksSUFBSSxDQUFDVyxNQUFNLEVBQUU7WUFDYixNQUFNQyxnQkFBZ0IsSUFBSSxDQUFDWCxNQUFNLENBQUNZLE1BQU0sSUFBSSxvQ0FBb0M7WUFDaEYsSUFBSSxDQUFD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SUFDSjtJQUNBLE1BQU1DLFFBQVEsTUFBTWEsSUFBSWIsS0FBSztJQUM3QixPQUFPO1FBQUVjLFFBQVFGLEdBQUdDLEtBQUtiLFVBQVVRO1FBQU9SO0lBQU07QUFDcEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3N0cmVhbS5qcz85MjE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMgfSBmcm9tIFwiLi4vcnVubmFibGVzL2NvbmZpZy5qc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyByYWNlV2l0aFNpZ25hbCB9IGZyb20gXCIuL3NpZ25hbC5qc1wiO1xuLypcbiAqIFN1cHBvcnQgYXN5bmMgaXRlcmF0b3Igc3ludGF4IGZvciBSZWFkYWJsZVN0cmVhbXMgaW4gYWxsIGVudmlyb25tZW50cy5cbiAqIFNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL01hdHRpYXNCdWVsZW5zL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3B1bGwvMTIyI2lzc3VlY29tbWVudC0xNjI3MzU0NDkwXG4gKi9cbmV4cG9ydCBjbGFzcyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIGV4dGVuZHMgUmVhZGFibGVTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWFkZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5zdXJlUmVhZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMucmVhZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRlciA9IHRoaXMuZ2V0UmVhZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbmV4dCgpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVSZWFkZXIoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGNsb3NlZFxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGVycm9yZWRcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgICB0aGlzLmVuc3VyZVJlYWRlcigpO1xuICAgICAgICAvLyBJZiB3cmFwcGVkIGluIGEgTm9kZSBzdHJlYW0sIGNhbmNlbCBpcyBhbHJlYWR5IGNhbGxlZC5cbiAgICAgICAgaWYgKHRoaXMubG9ja2VkKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxQcm9taXNlID0gdGhpcy5yZWFkZXIuY2FuY2VsKCk7IC8vIGNhbmNlbCBmaXJzdCwgYnV0IGRvbid0IGF3YWl0IHlldFxuICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIGZpcnN0XG4gICAgICAgICAgICBhd2FpdCBjYW5jZWxQcm9taXNlOyAvLyBub3cgYXdhaXQgaXRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH07XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgYXN5bmMgdGhyb3coZSkge1xuICAgICAgICB0aGlzLmVuc3VyZVJlYWRlcigpO1xuICAgICAgICBpZiAodGhpcy5sb2NrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbFByb21pc2UgPSB0aGlzLnJlYWRlci5jYW5jZWwoKTsgLy8gY2FuY2VsIGZpcnN0LCBidXQgZG9uJ3QgYXdhaXQgeWV0XG4gICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgZmlyc3RcbiAgICAgICAgICAgIGF3YWl0IGNhbmNlbFByb21pc2U7IC8vIG5vdyBhd2FpdCBpdFxuICAgICAgICB9XG4gICAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgLy8gQHRzLWlnbm9yZSBOb3QgcHJlc2VudCBpbiBOb2RlIDE4IHR5cGVzLCByZXF1aXJlZCBpbiBsYXRlc3QgTm9kZSAyMlxuICAgIGFzeW5jIFtTeW1ib2wuYXN5bmNEaXNwb3NlXSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZXR1cm4oKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21SZWFkYWJsZVN0cmVhbShzdHJlYW0pIHtcbiAgICAgICAgLy8gRnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU3RyZWFtc19BUEkvVXNpbmdfcmVhZGFibGVfc3RyZWFtcyNyZWFkaW5nX3RoZV9zdHJlYW1cbiAgICAgICAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICByZXR1cm4gbmV3IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwdW1wKCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcHVtcCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCkudGhlbigoeyBkb25lLCB2YWx1ZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIG5vIG1vcmUgZGF0YSBuZWVkcyB0byBiZSBjb25zdW1lZCwgY2xvc2UgdGhlIHN0cmVhbVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5xdWV1ZSB0aGUgbmV4dCBkYXRhIGNodW5rIGludG8gb3VyIHRhcmdldCBzdHJlYW1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsKCkge1xuICAgICAgICAgICAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQXN5bmNHZW5lcmF0b3IoZ2VuZXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBhc3luYyBwdWxsKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCBnZW5lcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gbm8gbW9yZSBkYXRhIG5lZWRzIHRvIGJlIGNvbnN1bWVkLCBjbG9zZSB0aGUgc3RyZWFtXG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBGaXg6IGBlbHNlIGlmICh2YWx1ZSlgIHdpbGwgaGFuZyB0aGUgc3RyZWFtaW5nIHdoZW4gbnVsbGlzaCB2YWx1ZSAoZS5nLiBlbXB0eSBzdHJpbmcpIGlzIHB1bGxlZFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXN5bmMgY2FuY2VsKHJlYXNvbikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRvci5yZXR1cm4ocmVhc29uKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhdGVlKGl0ZXIsIGxlbmd0aCA9IDIpIHtcbiAgICBjb25zdCBidWZmZXJzID0gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoKSA9PiBbXSk7XG4gICAgcmV0dXJuIGJ1ZmZlcnMubWFwKGFzeW5jIGZ1bmN0aW9uKiBtYWtlSXRlcihidWZmZXIpIHtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaXRlci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBidWZmZXIgb2YgYnVmZmVycykge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGJ1ZmZlclswXS5kb25lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICAgICB5aWVsZCBidWZmZXIuc2hpZnQoKS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdChmaXJzdCwgc2Vjb25kKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmlyc3QpICYmIEFycmF5LmlzQXJyYXkoc2Vjb25kKSkge1xuICAgICAgICByZXR1cm4gZmlyc3QuY29uY2F0KHNlY29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBmaXJzdCA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2Ygc2Vjb25kID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiAoZmlyc3QgKyBzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZmlyc3QgPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIHNlY29uZCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gKGZpcnN0ICsgc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBcImNvbmNhdFwiIGluIGZpcnN0ICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHR5cGVvZiBmaXJzdC5jb25jYXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gZmlyc3QuY29uY2F0KHNlY29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBmaXJzdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygc2Vjb25kID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IGNodW5rID0geyAuLi5maXJzdCB9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzZWNvbmQpKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIGNodW5rICYmICFBcnJheS5pc0FycmF5KGNodW5rW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgY2h1bmtba2V5XSA9IGNvbmNhdChjaHVua1trZXldLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaHVua1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNodW5rO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29uY2F0ICR7dHlwZW9mIGZpcnN0fSBhbmQgJHt0eXBlb2Ygc2Vjb25kfWApO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdlbmVyYXRvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZXR1cFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2lnbmFsXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpcnN0UmVzdWx0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpcnN0UmVzdWx0VXNlZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gcGFyYW1zLmdlbmVyYXRvcjtcbiAgICAgICAgdGhpcy5jb25maWcgPSBwYXJhbXMuY29uZmlnO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB0aGlzLnNpZ25hbCA9IHBhcmFtcy5zaWduYWwgPz8gdGhpcy5jb25maWc/LnNpZ25hbDtcbiAgICAgICAgLy8gc2V0dXAgaXMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25seSBhZnRlciB0aGUgZmlyc3QgaXRlcmF0b3IgdmFsdWVcbiAgICAgICAgLy8gaXMgYXZhaWxhYmxlLiB0aGlzIGlzIHVzZWZ1bCB3aGVuIHNldHVwIG9mIHNldmVyYWwgcGlwZWQgZ2VuZXJhdG9yc1xuICAgICAgICAvLyBuZWVkcyB0byBoYXBwZW4gaW4gbG9naWNhbCBvcmRlciwgaWUuIGluIHRoZSBvcmRlciBpbiB3aGljaCBpbnB1dCB0b1xuICAgICAgICAvLyB0byBlYWNoIGdlbmVyYXRvciBpcyBhdmFpbGFibGUuXG4gICAgICAgIHRoaXMuc2V0dXAgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB2b2lkIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24ucnVuV2l0aENvbmZpZyhwaWNrUnVubmFibGVDb25maWdLZXlzKHBhcmFtcy5jb25maWcpLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdCA9IHBhcmFtcy5nZW5lcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMuc3RhcnRTZXR1cCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0LnRoZW4ocGFyYW1zLnN0YXJ0U2V0dXApLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RSZXN1bHQudGhlbigoX3Jlc3VsdCkgPT4gcmVzb2x2ZSh1bmRlZmluZWQpLCByZWplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgbmV4dCguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICBpZiAoIXRoaXMuZmlyc3RSZXN1bHRVc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0VXNlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maXJzdFJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKHBpY2tSdW5uYWJsZUNvbmZpZ0tleXModGhpcy5jb25maWcpLCB0aGlzLnNpZ25hbFxuICAgICAgICAgICAgPyBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhY2VXaXRoU2lnbmFsKHRoaXMuZ2VuZXJhdG9yLm5leHQoLi4uYXJncyksIHRoaXMuc2lnbmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci5uZXh0KC4uLmFyZ3MpO1xuICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgfVxuICAgIGFzeW5jIHJldHVybih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IucmV0dXJuKHZhbHVlKTtcbiAgICB9XG4gICAgYXN5bmMgdGhyb3coZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IudGhyb3coZSk7XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgLy8gQHRzLWlnbm9yZSBOb3QgcHJlc2VudCBpbiBOb2RlIDE4IHR5cGVzLCByZXF1aXJlZCBpbiBsYXRlc3QgTm9kZSAyMlxuICAgIGFzeW5jIFtTeW1ib2wuYXN5bmNEaXNwb3NlXSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZXR1cm4oKTtcbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGlwZUdlbmVyYXRvcldpdGhTZXR1cCh0bywgZ2VuZXJhdG9yLCBzdGFydFNldHVwLCBzaWduYWwsIC4uLmFyZ3MpIHtcbiAgICBjb25zdCBnZW4gPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoe1xuICAgICAgICBnZW5lcmF0b3IsXG4gICAgICAgIHN0YXJ0U2V0dXAsXG4gICAgICAgIHNpZ25hbCxcbiAgICB9KTtcbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IGdlbi5zZXR1cDtcbiAgICByZXR1cm4geyBvdXRwdXQ6IHRvKGdlbiwgc2V0dXAsIC4uLmFyZ3MpLCBzZXR1cCB9O1xufVxuIl0sIm5hbWVzIjpbInBpY2tSdW5uYWJsZUNvbmZpZ0tleXMiLCJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIiwicmFjZVdpdGhTaWduYWwiLCJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiUmVhZGFibGVTdHJlYW0iLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJlbnN1cmVSZWFkZXIiLCJyZWFkZXIiLCJnZXRSZWFkZXIiLCJuZXh0IiwicmVzdWx0IiwicmVhZCIsImRvbmUiLCJyZWxlYXNlTG9jayIsInVuZGVmaW5lZCIsImUiLCJyZXR1cm4iLCJsb2NrZWQiLCJjYW5jZWxQcm9taXNlIiwiY2FuY2VsIiwidGhyb3ciLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwiYXN5bmNEaXNwb3NlIiwiZnJvbVJlYWRhYmxlU3RyZWFtIiwic3RyZWFtIiwic3RhcnQiLCJjb250cm9sbGVyIiwicHVtcCIsInRoZW4iLCJjbG9zZSIsImVucXVldWUiLCJmcm9tQXN5bmNHZW5lcmF0b3IiLCJnZW5lcmF0b3IiLCJwdWxsIiwicmVhc29uIiwiYXRlZSIsIml0ZXIiLCJsZW5ndGgiLCJidWZmZXJzIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwibWFrZUl0ZXIiLCJidWZmZXIiLCJwdXNoIiwic2hpZnQiLCJjb25jYXQiLCJmaXJzdCIsInNlY29uZCIsImlzQXJyYXkiLCJjaHVuayIsImtleSIsImVudHJpZXMiLCJFcnJvciIsIkFzeW5jR2VuZXJhdG9yV2l0aFNldHVwIiwicGFyYW1zIiwiY29uZmlnIiwic2lnbmFsIiwic2V0dXAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJ1bldpdGhDb25maWciLCJmaXJzdFJlc3VsdCIsInN0YXJ0U2V0dXAiLCJfcmVzdWx0IiwiYXJncyIsInRocm93SWZBYm9ydGVkIiwiZmlyc3RSZXN1bHRVc2VkIiwicGlwZUdlbmVyYXRvcldpdGhTZXR1cCIsInRvIiwiZ2VuIiwib3V0cHV0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/tiktoken.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* binding */ encodingForModel),\n/* harmony export */   getEncoding: () => (/* binding */ getEncoding)\n/* harmony export */ });\n/* harmony import */ var js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-tiktoken/lite */ \"(rsc)/./node_modules/js-tiktoken/dist/lite.js\");\n/* harmony import */ var _async_caller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n\nconst cache = {};\nconst caller = /* #__PURE__ */ new _async_caller_js__WEBPACK_IMPORTED_MODULE_1__.AsyncCaller({});\nasync function getEncoding(encoding) {\n    if (!(encoding in cache)) {\n        cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`).then((res)=>res.json()).then((data)=>new js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.Tiktoken(data)).catch((e)=>{\n            delete cache[encoding];\n            throw e;\n        });\n    }\n    return await cache[encoding];\n}\nasync function encodingForModel(model) {\n    return getEncoding((0,js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.getEncodingNameForModel)(model));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGlrdG9rZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzRTtBQUN0QjtBQUNoRCxNQUFNRyxRQUFRLENBQUM7QUFDZixNQUFNQyxTQUFTLGFBQWEsR0FBRyxJQUFJRix5REFBV0EsQ0FBQyxDQUFDO0FBQ3pDLGVBQWVHLFlBQVlDLFFBQVE7SUFDdEMsSUFBSSxDQUFFQSxDQUFBQSxZQUFZSCxLQUFJLEdBQUk7UUFDdEJBLEtBQUssQ0FBQ0csU0FBUyxHQUFHRixPQUNiRyxLQUFLLENBQUMsQ0FBQyw4QkFBOEIsRUFBRUQsU0FBUyxLQUFLLENBQUMsRUFDdERFLElBQUksQ0FBQyxDQUFDQyxNQUFRQSxJQUFJQyxJQUFJLElBQ3RCRixJQUFJLENBQUMsQ0FBQ0csT0FBUyxJQUFJWCxzREFBUUEsQ0FBQ1csT0FDNUJDLEtBQUssQ0FBQyxDQUFDQztZQUNSLE9BQU9WLEtBQUssQ0FBQ0csU0FBUztZQUN0QixNQUFNTztRQUNWO0lBQ0o7SUFDQSxPQUFPLE1BQU1WLEtBQUssQ0FBQ0csU0FBUztBQUNoQztBQUNPLGVBQWVRLGlCQUFpQkMsS0FBSztJQUN4QyxPQUFPVixZQUFZSix5RUFBdUJBLENBQUNjO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy90aWt0b2tlbi5qcz84ZTZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRpa3Rva2VuLCBnZXRFbmNvZGluZ05hbWVGb3JNb2RlbCwgfSBmcm9tIFwianMtdGlrdG9rZW4vbGl0ZVwiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi9hc3luY19jYWxsZXIuanNcIjtcbmNvbnN0IGNhY2hlID0ge307XG5jb25zdCBjYWxsZXIgPSAvKiAjX19QVVJFX18gKi8gbmV3IEFzeW5jQ2FsbGVyKHt9KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbmNvZGluZyhlbmNvZGluZykge1xuICAgIGlmICghKGVuY29kaW5nIGluIGNhY2hlKSkge1xuICAgICAgICBjYWNoZVtlbmNvZGluZ10gPSBjYWxsZXJcbiAgICAgICAgICAgIC5mZXRjaChgaHR0cHM6Ly90aWt0b2tlbi5wYWdlcy5kZXYvanMvJHtlbmNvZGluZ30uanNvbmApXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IG5ldyBUaWt0b2tlbihkYXRhKSlcbiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2VuY29kaW5nXTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgY2FjaGVbZW5jb2RpbmddO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuY29kaW5nRm9yTW9kZWwobW9kZWwpIHtcbiAgICByZXR1cm4gZ2V0RW5jb2RpbmcoZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwobW9kZWwpKTtcbn1cbiJdLCJuYW1lcyI6WyJUaWt0b2tlbiIsImdldEVuY29kaW5nTmFtZUZvck1vZGVsIiwiQXN5bmNDYWxsZXIiLCJjYWNoZSIsImNhbGxlciIsImdldEVuY29kaW5nIiwiZW5jb2RpbmciLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwiZGF0YSIsImNhdGNoIiwiZSIsImVuY29kaW5nRm9yTW9kZWwiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/types/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/types/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extendInteropZodObject: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.extendInteropZodObject),\n/* harmony export */   getInteropZodDefaultGetter: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.getInteropZodDefaultGetter),\n/* harmony export */   getInteropZodObjectShape: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.getInteropZodObjectShape),\n/* harmony export */   getSchemaDescription: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.getSchemaDescription),\n/* harmony export */   interopParse: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.interopParse),\n/* harmony export */   interopParseAsync: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.interopParseAsync),\n/* harmony export */   interopSafeParse: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.interopSafeParse),\n/* harmony export */   interopSafeParseAsync: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.interopSafeParseAsync),\n/* harmony export */   interopZodObjectPartial: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.interopZodObjectPartial),\n/* harmony export */   interopZodObjectPassthrough: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.interopZodObjectPassthrough),\n/* harmony export */   interopZodObjectStrict: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.interopZodObjectStrict),\n/* harmony export */   interopZodTransformInputSchema: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.interopZodTransformInputSchema),\n/* harmony export */   isInteropZodObject: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.isInteropZodObject),\n/* harmony export */   isInteropZodSchema: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.isInteropZodSchema),\n/* harmony export */   isShapelessZodSchema: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.isShapelessZodSchema),\n/* harmony export */   isSimpleStringZodSchema: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.isSimpleStringZodSchema),\n/* harmony export */   isZodArrayV4: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.isZodArrayV4),\n/* harmony export */   isZodObjectV3: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.isZodObjectV3),\n/* harmony export */   isZodObjectV4: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.isZodObjectV4),\n/* harmony export */   isZodSchema: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.isZodSchema),\n/* harmony export */   isZodSchemaV3: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.isZodSchemaV3),\n/* harmony export */   isZodSchemaV4: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_0__.isZodSchemaV4)\n/* harmony export */ });\n/* harmony import */ var _zod_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./zod.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdHlwZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3R5cGVzL2luZGV4LmpzPzE1MWIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vem9kLmpzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/types/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/types/zod.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/types/zod.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extendInteropZodObject: () => (/* binding */ extendInteropZodObject),\n/* harmony export */   getInteropZodDefaultGetter: () => (/* binding */ getInteropZodDefaultGetter),\n/* harmony export */   getInteropZodObjectShape: () => (/* binding */ getInteropZodObjectShape),\n/* harmony export */   getSchemaDescription: () => (/* binding */ getSchemaDescription),\n/* harmony export */   interopParse: () => (/* binding */ interopParse),\n/* harmony export */   interopParseAsync: () => (/* binding */ interopParseAsync),\n/* harmony export */   interopSafeParse: () => (/* binding */ interopSafeParse),\n/* harmony export */   interopSafeParseAsync: () => (/* binding */ interopSafeParseAsync),\n/* harmony export */   interopZodObjectPartial: () => (/* binding */ interopZodObjectPartial),\n/* harmony export */   interopZodObjectPassthrough: () => (/* binding */ interopZodObjectPassthrough),\n/* harmony export */   interopZodObjectStrict: () => (/* binding */ interopZodObjectStrict),\n/* harmony export */   interopZodTransformInputSchema: () => (/* binding */ interopZodTransformInputSchema),\n/* harmony export */   isInteropZodObject: () => (/* binding */ isInteropZodObject),\n/* harmony export */   isInteropZodSchema: () => (/* binding */ isInteropZodSchema),\n/* harmony export */   isShapelessZodSchema: () => (/* binding */ isShapelessZodSchema),\n/* harmony export */   isSimpleStringZodSchema: () => (/* binding */ isSimpleStringZodSchema),\n/* harmony export */   isZodArrayV4: () => (/* binding */ isZodArrayV4),\n/* harmony export */   isZodObjectV3: () => (/* binding */ isZodObjectV3),\n/* harmony export */   isZodObjectV4: () => (/* binding */ isZodObjectV4),\n/* harmony export */   isZodSchema: () => (/* binding */ isZodSchema),\n/* harmony export */   isZodSchemaV3: () => (/* binding */ isZodSchemaV3),\n/* harmony export */   isZodSchemaV4: () => (/* binding */ isZodSchemaV4)\n/* harmony export */ });\n/* harmony import */ var zod_v4_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v4/core */ \"(rsc)/./node_modules/zod/v4/core/parse.js\");\n/* harmony import */ var zod_v4_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod/v4/core */ \"(rsc)/./node_modules/zod/v4/core/registries.js\");\n/* harmony import */ var zod_v4_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod/v4/core */ \"(rsc)/./node_modules/zod/v4/core/util.js\");\n/* harmony import */ var zod_v4_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v4/core */ \"(rsc)/./node_modules/zod/v4/core/schemas.js\");\n/* harmony import */ var zod_v4_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod/v4/core */ \"(rsc)/./node_modules/zod/v4/core/api.js\");\n\nfunction isZodSchemaV4(schema) {\n    if (typeof schema !== \"object\" || schema === null) {\n        return false;\n    }\n    const obj = schema;\n    if (!(\"_zod\" in obj)) {\n        return false;\n    }\n    const zod = obj._zod;\n    return typeof zod === \"object\" && zod !== null && \"def\" in zod;\n}\nfunction isZodSchemaV3(schema) {\n    if (typeof schema !== \"object\" || schema === null) {\n        return false;\n    }\n    const obj = schema;\n    if (!(\"_def\" in obj) || \"_zod\" in obj) {\n        return false;\n    }\n    const def = obj._def;\n    return typeof def === \"object\" && def != null && \"typeName\" in def;\n}\n/** Backward compatible isZodSchema for Zod 3 */ function isZodSchema(schema) {\n    if (isZodSchemaV4(schema)) {\n        console.warn(\"[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior.\");\n    }\n    return isZodSchemaV3(schema);\n}\n/**\n * Given either a Zod schema, or plain object, determine if the input is a Zod schema.\n *\n * @param {unknown} input\n * @returns {boolean} Whether or not the provided input is a Zod schema.\n */ function isInteropZodSchema(input) {\n    if (!input) {\n        return false;\n    }\n    if (typeof input !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(input)) {\n        return false;\n    }\n    if (isZodSchemaV4(input) || isZodSchemaV3(input)) {\n        return true;\n    }\n    return false;\n}\n/**\n * Asynchronously parses the input using the provided Zod schema (v3 or v4) and returns a safe parse result.\n * This function handles both Zod v3 and v4 schemas, returning a result object indicating success or failure.\n *\n * @template T - The expected output type of the schema.\n * @param {InteropZodType<T>} schema - The Zod schema (v3 or v4) to use for parsing.\n * @param {unknown} input - The input value to parse.\n * @returns {Promise<InteropZodSafeParseResult<T>>} A promise that resolves to a safe parse result object.\n * @throws {Error} If the schema is not a recognized Zod v3 or v4 schema.\n */ async function interopSafeParseAsync(schema, input) {\n    if (isZodSchemaV4(schema)) {\n        try {\n            const data = await (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.parseAsync)(schema, input);\n            return {\n                success: true,\n                data\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error\n            };\n        }\n    }\n    if (isZodSchemaV3(schema)) {\n        return schema.safeParse(input);\n    }\n    throw new Error(\"Schema must be an instance of z3.ZodType or z4.$ZodType\");\n}\n/**\n * Asynchronously parses the input using the provided Zod schema (v3 or v4) and returns the parsed value.\n * Throws an error if parsing fails or if the schema is not a recognized Zod v3 or v4 schema.\n *\n * @template T - The expected output type of the schema.\n * @param {InteropZodType<T>} schema - The Zod schema (v3 or v4) to use for parsing.\n * @param {unknown} input - The input value to parse.\n * @returns {Promise<T>} A promise that resolves to the parsed value.\n * @throws {Error} If parsing fails or the schema is not a recognized Zod v3 or v4 schema.\n */ async function interopParseAsync(schema, input) {\n    if (isZodSchemaV4(schema)) {\n        return (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.parse)(schema, input);\n    }\n    if (isZodSchemaV3(schema)) {\n        return schema.parse(input);\n    }\n    throw new Error(\"Schema must be an instance of z3.ZodType or z4.$ZodType\");\n}\n/**\n * Safely parses the input using the provided Zod schema (v3 or v4) and returns a result object\n * indicating success or failure. This function is compatible with both Zod v3 and v4 schemas.\n *\n * @template T - The expected output type of the schema.\n * @param {InteropZodType<T>} schema - The Zod schema (v3 or v4) to use for parsing.\n * @param {unknown} input - The input value to parse.\n * @returns {InteropZodSafeParseResult<T>} An object with either the parsed data (on success)\n *   or the error (on failure).\n * @throws {Error} If the schema is not a recognized Zod v3 or v4 schema.\n */ function interopSafeParse(schema, input) {\n    if (isZodSchemaV4(schema)) {\n        try {\n            const data = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.parse)(schema, input);\n            return {\n                success: true,\n                data\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error\n            };\n        }\n    }\n    if (isZodSchemaV3(schema)) {\n        return schema.safeParse(input);\n    }\n    throw new Error(\"Schema must be an instance of z3.ZodType or z4.$ZodType\");\n}\n/**\n * Parses the input using the provided Zod schema (v3 or v4) and returns the parsed value.\n * Throws an error if parsing fails or if the schema is not a recognized Zod v3 or v4 schema.\n *\n * @template T - The expected output type of the schema.\n * @param {InteropZodType<T>} schema - The Zod schema (v3 or v4) to use for parsing.\n * @param {unknown} input - The input value to parse.\n * @returns {T} The parsed value.\n * @throws {Error} If parsing fails or the schema is not a recognized Zod v3 or v4 schema.\n */ function interopParse(schema, input) {\n    if (isZodSchemaV4(schema)) {\n        return (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.parse)(schema, input);\n    }\n    if (isZodSchemaV3(schema)) {\n        return schema.parse(input);\n    }\n    throw new Error(\"Schema must be an instance of z3.ZodType or z4.$ZodType\");\n}\n/**\n * Retrieves the description from a schema definition (v3, v4, or plain object), if available.\n *\n * @param {unknown} schema - The schema to extract the description from.\n * @returns {string | undefined} The description of the schema, or undefined if not present.\n */ function getSchemaDescription(schema) {\n    if (isZodSchemaV4(schema)) {\n        return zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.get(schema)?.description;\n    }\n    if (isZodSchemaV3(schema)) {\n        return schema.description;\n    }\n    if (\"description\" in schema && typeof schema.description === \"string\") {\n        return schema.description;\n    }\n    return undefined;\n}\n/**\n * Determines if the provided Zod schema is \"shapeless\".\n * A shapeless schema is one that does not define any object shape,\n * such as ZodString, ZodNumber, ZodBoolean, ZodAny, etc.\n * For ZodObject, it must have no shape keys to be considered shapeless.\n * ZodRecord schemas are considered shapeless since they define dynamic\n * key-value mappings without fixed keys.\n *\n * @param schema The Zod schema to check.\n * @returns {boolean} True if the schema is shapeless, false otherwise.\n */ function isShapelessZodSchema(schema) {\n    if (!isInteropZodSchema(schema)) {\n        return false;\n    }\n    // Check for v3 schemas\n    if (isZodSchemaV3(schema)) {\n        // @ts-expect-error - zod v3 types are not compatible with zod v4 types\n        const def = schema._def;\n        // ZodObject is only shaped if it has actual shape keys\n        if (def.typeName === \"ZodObject\") {\n            const obj = schema;\n            return !obj.shape || Object.keys(obj.shape).length === 0;\n        }\n        // ZodRecord is shapeless (dynamic key-value mapping)\n        if (def.typeName === \"ZodRecord\") {\n            return true;\n        }\n    }\n    // Check for v4 schemas\n    if (isZodSchemaV4(schema)) {\n        const def = schema._zod.def;\n        // Object type is only shaped if it has actual shape keys\n        if (def.type === \"object\") {\n            const obj = schema;\n            return !obj.shape || Object.keys(obj.shape).length === 0;\n        }\n        // Record type is shapeless (dynamic key-value mapping)\n        if (def.type === \"record\") {\n            return true;\n        }\n    }\n    // For other schemas, check if they have a `shape` property\n    // If they don't have shape, they're likely shapeless\n    if (typeof schema === \"object\" && schema !== null && !(\"shape\" in schema)) {\n        return true;\n    }\n    return false;\n}\n/**\n * Determines if the provided Zod schema should be treated as a simple string schema\n * that maps to DynamicTool. This aligns with the type-level constraint of\n * InteropZodType<string | undefined> which only matches basic string schemas.\n * If the provided schema is just z.string(), we can make the determination that\n * the tool is just a generic string tool that doesn't require any input validation.\n *\n * This function only returns true for basic ZodString schemas, including:\n * - Basic string schemas (z.string())\n * - String schemas with validations (z.string().min(1), z.string().email(), etc.)\n *\n * This function returns false for everything else, including:\n * - String schemas with defaults (z.string().default(\"value\"))\n * - Branded string schemas (z.string().brand<\"UserId\">())\n * - String schemas with catch operations (z.string().catch(\"default\"))\n * - Optional/nullable string schemas (z.string().optional())\n * - Transformed schemas (z.string().transform() or z.object().transform())\n * - Object or record schemas, even if they're empty\n * - Any other schema type\n *\n * @param schema The Zod schema to check.\n * @returns {boolean} True if the schema is a basic ZodString, false otherwise.\n */ function isSimpleStringZodSchema(schema) {\n    if (!isInteropZodSchema(schema)) {\n        return false;\n    }\n    // For v3 schemas\n    if (isZodSchemaV3(schema)) {\n        // @ts-expect-error - zod v3 types are not compatible with zod v4 types\n        const def = schema._def;\n        // Only accept basic ZodString\n        return def.typeName === \"ZodString\";\n    }\n    // For v4 schemas\n    if (isZodSchemaV4(schema)) {\n        const def = schema._zod.def;\n        // Only accept basic string type\n        return def.type === \"string\";\n    }\n    return false;\n}\nfunction isZodObjectV3(obj) {\n    // Zod v3 object schemas have _def.typeName === \"ZodObject\"\n    if (typeof obj === \"object\" && obj !== null && \"_def\" in obj && typeof obj._def === \"object\" && obj._def !== null && \"typeName\" in obj._def && obj._def.typeName === \"ZodObject\") {\n        return true;\n    }\n    return false;\n}\nfunction isZodObjectV4(obj) {\n    if (!isZodSchemaV4(obj)) return false;\n    // Zod v4 object schemas have _zod.def.type === \"object\"\n    if (typeof obj === \"object\" && obj !== null && \"_zod\" in obj && typeof obj._zod === \"object\" && obj._zod !== null && \"def\" in obj._zod && typeof obj._zod.def === \"object\" && obj._zod.def !== null && \"type\" in obj._zod.def && obj._zod.def.type === \"object\") {\n        return true;\n    }\n    return false;\n}\nfunction isZodArrayV4(obj) {\n    if (!isZodSchemaV4(obj)) return false;\n    // Zod v4 array schemas have _zod.def.type === \"array\"\n    if (typeof obj === \"object\" && obj !== null && \"_zod\" in obj && typeof obj._zod === \"object\" && obj._zod !== null && \"def\" in obj._zod && typeof obj._zod.def === \"object\" && obj._zod.def !== null && \"type\" in obj._zod.def && obj._zod.def.type === \"array\") {\n        return true;\n    }\n    return false;\n}\n/**\n * Determines if the provided value is an InteropZodObject (Zod v3 or v4 object schema).\n *\n * @param obj The value to check.\n * @returns {boolean} True if the value is a Zod v3 or v4 object schema, false otherwise.\n */ function isInteropZodObject(obj) {\n    if (isZodObjectV3(obj)) return true;\n    if (isZodObjectV4(obj)) return true;\n    return false;\n}\n/**\n * Retrieves the shape (fields) of a Zod object schema, supporting both Zod v3 and v4.\n *\n * @template T - The type of the Zod object schema.\n * @param {T} schema - The Zod object schema instance (either v3 or v4).\n * @returns {InteropZodObjectShape<T>} The shape of the object schema.\n * @throws {Error} If the schema is not a Zod v3 or v4 object.\n */ function getInteropZodObjectShape(schema) {\n    if (isZodSchemaV3(schema)) {\n        return schema.shape;\n    }\n    if (isZodSchemaV4(schema)) {\n        return schema._zod.def.shape;\n    }\n    throw new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\n/**\n * Extends a Zod object schema with additional fields, supporting both Zod v3 and v4.\n *\n * @template T - The type of the Zod object schema.\n * @param {T} schema - The Zod object schema instance (either v3 or v4).\n * @param {InteropZodObjectShape} extension - The fields to add to the schema.\n * @returns {InteropZodObject} The extended Zod object schema.\n * @throws {Error} If the schema is not a Zod v3 or v4 object.\n */ function extendInteropZodObject(schema, extension) {\n    if (isZodSchemaV3(schema)) {\n        return schema.extend(extension);\n    }\n    if (isZodSchemaV4(schema)) {\n        return zod_v4_core__WEBPACK_IMPORTED_MODULE_2__.extend(schema, extension);\n    }\n    throw new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\n/**\n * Returns a partial version of a Zod object schema, making all fields optional.\n * Supports both Zod v3 and v4.\n *\n * @template T - The type of the Zod object schema.\n * @param {T} schema - The Zod object schema instance (either v3 or v4).\n * @returns {InteropZodObject} The partial Zod object schema.\n * @throws {Error} If the schema is not a Zod v3 or v4 object.\n */ function interopZodObjectPartial(schema) {\n    if (isZodSchemaV3(schema)) {\n        // z3: .partial() exists and works as expected\n        return schema.partial();\n    }\n    if (isZodSchemaV4(schema)) {\n        // z4: util.partial exists and works as expected\n        return zod_v4_core__WEBPACK_IMPORTED_MODULE_2__.partial(zod_v4_core__WEBPACK_IMPORTED_MODULE_3__.$ZodOptional, schema, undefined);\n    }\n    throw new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\n/**\n * Returns a strict version of a Zod object schema, disallowing unknown keys.\n * Supports both Zod v3 and v4 object schemas. If `recursive` is true, applies strictness\n * recursively to all nested object schemas and arrays of object schemas.\n *\n * @template T - The type of the Zod object schema.\n * @param {T} schema - The Zod object schema instance (either v3 or v4).\n * @param {boolean} [recursive=false] - Whether to apply strictness recursively to nested objects/arrays.\n * @returns {InteropZodObject} The strict Zod object schema.\n * @throws {Error} If the schema is not a Zod v3 or v4 object.\n */ function interopZodObjectStrict(schema, recursive = false) {\n    if (isZodSchemaV3(schema)) {\n        // TODO: v3 schemas aren't recursively handled here\n        // (currently not necessary since zodToJsonSchema handles this)\n        return schema.strict();\n    }\n    if (isZodObjectV4(schema)) {\n        const outputShape = schema._zod.def.shape;\n        if (recursive) {\n            for (const [key, keySchema] of Object.entries(schema._zod.def.shape)){\n                // If the shape key is a v4 object schema, we need to make it strict\n                if (isZodObjectV4(keySchema)) {\n                    const outputSchema = interopZodObjectStrict(keySchema, recursive);\n                    outputShape[key] = outputSchema;\n                } else if (isZodArrayV4(keySchema)) {\n                    let elementSchema = keySchema._zod.def.element;\n                    if (isZodObjectV4(elementSchema)) {\n                        elementSchema = interopZodObjectStrict(elementSchema, recursive);\n                    }\n                    outputShape[key] = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_2__.clone)(keySchema, {\n                        ...keySchema._zod.def,\n                        element: elementSchema\n                    });\n                } else {\n                    outputShape[key] = keySchema;\n                }\n                // Assign meta fields to the keySchema\n                const meta = zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.get(keySchema);\n                if (meta) zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.add(outputShape[key], meta);\n            }\n        }\n        const modifiedSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_2__.clone)(schema, {\n            ...schema._zod.def,\n            shape: outputShape,\n            catchall: (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_4__._never)(zod_v4_core__WEBPACK_IMPORTED_MODULE_3__.$ZodNever)\n        });\n        const meta = zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.get(schema);\n        if (meta) zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.add(modifiedSchema, meta);\n        return modifiedSchema;\n    }\n    throw new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\n/**\n * Returns a passthrough version of a Zod object schema, allowing unknown keys.\n * Supports both Zod v3 and v4 object schemas. If `recursive` is true, applies passthrough\n * recursively to all nested object schemas and arrays of object schemas.\n *\n * @template T - The type of the Zod object schema.\n * @param {T} schema - The Zod object schema instance (either v3 or v4).\n * @param {boolean} [recursive=false] - Whether to apply passthrough recursively to nested objects/arrays.\n * @returns {InteropZodObject} The passthrough Zod object schema.\n * @throws {Error} If the schema is not a Zod v3 or v4 object.\n */ function interopZodObjectPassthrough(schema, recursive = false) {\n    if (isZodObjectV3(schema)) {\n        // TODO: v3 schemas aren't recursively handled here\n        // (currently not necessary since zodToJsonSchema handles this)\n        return schema.passthrough();\n    }\n    if (isZodObjectV4(schema)) {\n        const outputShape = schema._zod.def.shape;\n        if (recursive) {\n            for (const [key, keySchema] of Object.entries(schema._zod.def.shape)){\n                // If the shape key is a v4 object schema, we need to make it passthrough\n                if (isZodObjectV4(keySchema)) {\n                    const outputSchema = interopZodObjectPassthrough(keySchema, recursive);\n                    outputShape[key] = outputSchema;\n                } else if (isZodArrayV4(keySchema)) {\n                    let elementSchema = keySchema._zod.def.element;\n                    if (isZodObjectV4(elementSchema)) {\n                        elementSchema = interopZodObjectPassthrough(elementSchema, recursive);\n                    }\n                    outputShape[key] = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_2__.clone)(keySchema, {\n                        ...keySchema._zod.def,\n                        element: elementSchema\n                    });\n                } else {\n                    outputShape[key] = keySchema;\n                }\n                // Assign meta fields to the keySchema\n                const meta = zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.get(keySchema);\n                if (meta) zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.add(outputShape[key], meta);\n            }\n        }\n        const modifiedSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_2__.clone)(schema, {\n            ...schema._zod.def,\n            shape: outputShape,\n            catchall: (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_4__._unknown)(zod_v4_core__WEBPACK_IMPORTED_MODULE_3__.$ZodUnknown)\n        });\n        const meta = zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.get(schema);\n        if (meta) zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.add(modifiedSchema, meta);\n        return modifiedSchema;\n    }\n    throw new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\n/**\n * Returns a getter function for the default value of a Zod schema, if one is defined.\n * Supports both Zod v3 and v4 schemas. If the schema has a default value,\n * the returned function will return that value when called. If no default is defined,\n * returns undefined.\n *\n * @template T - The type of the Zod schema.\n * @param {T} schema - The Zod schema instance (either v3 or v4).\n * @returns {(() => InferInteropZodOutput<T>) | undefined} A function that returns the default value, or undefined if no default is set.\n */ function getInteropZodDefaultGetter(schema) {\n    if (isZodSchemaV3(schema)) {\n        try {\n            const defaultValue = schema.parse(undefined);\n            return ()=>defaultValue;\n        } catch  {\n            return undefined;\n        }\n    }\n    if (isZodSchemaV4(schema)) {\n        try {\n            const defaultValue = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.parse)(schema, undefined);\n            return ()=>defaultValue;\n        } catch  {\n            return undefined;\n        }\n    }\n    return undefined;\n}\nfunction isZodTransformV3(schema) {\n    return isZodSchemaV3(schema) && \"typeName\" in schema._def && schema._def.typeName === \"ZodEffects\";\n}\nfunction isZodTransformV4(schema) {\n    return isZodSchemaV4(schema) && schema._zod.def.type === \"pipe\";\n}\n/**\n * Returns the input type of a Zod transform schema, for both v3 and v4.\n * If the schema is not a transform, returns undefined. If `recursive` is true,\n * recursively processes nested object schemas and arrays of object schemas.\n *\n * @param schema - The Zod schema instance (v3 or v4)\n * @param {boolean} [recursive=false] - Whether to recursively process nested objects/arrays.\n * @returns The input Zod schema of the transform, or undefined if not a transform\n */ function interopZodTransformInputSchema(schema, recursive = false) {\n    // Zod v3: ._def.schema is the input schema for ZodEffects (transform)\n    if (isZodSchemaV3(schema)) {\n        if (isZodTransformV3(schema)) {\n            return interopZodTransformInputSchema(schema._def.schema, recursive);\n        }\n        // TODO: v3 schemas aren't recursively handled here\n        // (currently not necessary since zodToJsonSchema handles this)\n        return schema;\n    }\n    // Zod v4: _def.type is the input schema for ZodEffects (transform)\n    if (isZodSchemaV4(schema)) {\n        let outputSchema = schema;\n        if (isZodTransformV4(schema)) {\n            outputSchema = interopZodTransformInputSchema(schema._zod.def.in, recursive);\n        }\n        if (recursive) {\n            // Handle nested object schemas\n            if (isZodObjectV4(outputSchema)) {\n                const outputShape = outputSchema._zod.def.shape;\n                for (const [key, keySchema] of Object.entries(outputSchema._zod.def.shape)){\n                    outputShape[key] = interopZodTransformInputSchema(keySchema, recursive);\n                }\n                outputSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_2__.clone)(outputSchema, {\n                    ...outputSchema._zod.def,\n                    shape: outputShape\n                });\n            } else if (isZodArrayV4(outputSchema)) {\n                const elementSchema = interopZodTransformInputSchema(outputSchema._zod.def.element, recursive);\n                outputSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_2__.clone)(outputSchema, {\n                    ...outputSchema._zod.def,\n                    element: elementSchema\n                });\n            }\n        }\n        const meta = zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.get(schema);\n        if (meta) zod_v4_core__WEBPACK_IMPORTED_MODULE_1__.globalRegistry.add(outputSchema, meta);\n        return outputSchema;\n    }\n    throw new Error(\"Schema must be an instance of z3.ZodType or z4.$ZodType\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdHlwZXMvem9kLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzSTtBQUMvSCxTQUFTVSxjQUFjQyxNQUFNO0lBQ2hDLElBQUksT0FBT0EsV0FBVyxZQUFZQSxXQUFXLE1BQU07UUFDL0MsT0FBTztJQUNYO0lBQ0EsTUFBTUMsTUFBTUQ7SUFDWixJQUFJLENBQUUsV0FBVUMsR0FBRSxHQUFJO1FBQ2xCLE9BQU87SUFDWDtJQUNBLE1BQU1DLE1BQU1ELElBQUlFLElBQUk7SUFDcEIsT0FBUSxPQUFPRCxRQUFRLFlBQ25CQSxRQUFRLFFBQ1IsU0FBU0E7QUFDakI7QUFDTyxTQUFTRSxjQUFjSixNQUFNO0lBQ2hDLElBQUksT0FBT0EsV0FBVyxZQUFZQSxXQUFXLE1BQU07UUFDL0MsT0FBTztJQUNYO0lBQ0EsTUFBTUMsTUFBTUQ7SUFDWixJQUFJLENBQUUsV0FBVUMsR0FBRSxLQUFNLFVBQVVBLEtBQUs7UUFDbkMsT0FBTztJQUNYO0lBQ0EsTUFBTUksTUFBTUosSUFBSUssSUFBSTtJQUNwQixPQUFRLE9BQU9ELFFBQVEsWUFDbkJBLE9BQU8sUUFDUCxjQUFjQTtBQUN0QjtBQUNBLDhDQUE4QyxHQUN2QyxTQUFTRSxZQUFZUCxNQUFNO0lBQzlCLElBQUlELGNBQWNDLFNBQVM7UUFDdkJRLFFBQVFDLElBQUksQ0FBQztJQUNqQjtJQUNBLE9BQU9MLGNBQWNKO0FBQ3pCO0FBQ0E7Ozs7O0NBS0MsR0FDTSxTQUFTVSxtQkFBbUJDLEtBQUs7SUFDcEMsSUFBSSxDQUFDQSxPQUFPO1FBQ1IsT0FBTztJQUNYO0lBQ0EsSUFBSSxPQUFPQSxVQUFVLFVBQVU7UUFDM0IsT0FBTztJQUNYO0lBQ0EsSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixRQUFRO1FBQ3RCLE9BQU87SUFDWDtJQUNBLElBQUlaLGNBQWNZLFVBQ2RQLGNBQWNPLFFBQVE7UUFDdEIsT0FB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Li9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdHlwZXMvem9kLmpzPzZkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2UsIHBhcnNlQXN5bmMsIGdsb2JhbFJlZ2lzdHJ5LCB1dGlsLCBjbG9uZSwgX3Vua25vd24sIF9uZXZlciwgJFpvZFVua25vd24sICRab2ROZXZlciwgJFpvZE9wdGlvbmFsLCB9IGZyb20gXCJ6b2QvdjQvY29yZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kU2NoZW1hVjQoc2NoZW1hKSB7XG4gICAgaWYgKHR5cGVvZiBzY2hlbWEgIT09IFwib2JqZWN0XCIgfHwgc2NoZW1hID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3Qgb2JqID0gc2NoZW1hO1xuICAgIGlmICghKFwiX3pvZFwiIGluIG9iaikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB6b2QgPSBvYmouX3pvZDtcbiAgICByZXR1cm4gKHR5cGVvZiB6b2QgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgem9kICE9PSBudWxsICYmXG4gICAgICAgIFwiZGVmXCIgaW4gem9kKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1pvZFNjaGVtYVYzKHNjaGVtYSkge1xuICAgIGlmICh0eXBlb2Ygc2NoZW1hICE9PSBcIm9iamVjdFwiIHx8IHNjaGVtYSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IG9iaiA9IHNjaGVtYTtcbiAgICBpZiAoIShcIl9kZWZcIiBpbiBvYmopIHx8IFwiX3pvZFwiIGluIG9iaikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGRlZiA9IG9iai5fZGVmO1xuICAgIHJldHVybiAodHlwZW9mIGRlZiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBkZWYgIT0gbnVsbCAmJlxuICAgICAgICBcInR5cGVOYW1lXCIgaW4gZGVmKTtcbn1cbi8qKiBCYWNrd2FyZCBjb21wYXRpYmxlIGlzWm9kU2NoZW1hIGZvciBab2QgMyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kU2NoZW1hKHNjaGVtYSkge1xuICAgIGlmIChpc1pvZFNjaGVtYVY0KHNjaGVtYSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiW1dBUk5JTkddIEF0dGVtcHRpbmcgdG8gdXNlIFpvZCA0IHNjaGVtYSBpbiBhIGNvbnRleHQgd2hlcmUgWm9kIDMgc2NoZW1hIGlzIGV4cGVjdGVkLiBUaGlzIG1heSBjYXVzZSB1bmV4cGVjdGVkIGJlaGF2aW9yLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzWm9kU2NoZW1hVjMoc2NoZW1hKTtcbn1cbi8qKlxuICogR2l2ZW4gZWl0aGVyIGEgWm9kIHNjaGVtYSwgb3IgcGxhaW4gb2JqZWN0LCBkZXRlcm1pbmUgaWYgdGhlIGlucHV0IGlzIGEgWm9kIHNjaGVtYS5cbiAqXG4gKiBAcGFyYW0ge3Vua25vd259IGlucHV0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIHByb3ZpZGVkIGlucHV0IGlzIGEgWm9kIHNjaGVtYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW50ZXJvcFpvZFNjaGVtYShpbnB1dCkge1xuICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlzWm9kU2NoZW1hVjQoaW5wdXQpIHx8XG4gICAgICAgIGlzWm9kU2NoZW1hVjMoaW5wdXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEFzeW5jaHJvbm91c2x5IHBhcnNlcyB0aGUgaW5wdXQgdXNpbmcgdGhlIHByb3ZpZGVkIFpvZCBzY2hlbWEgKHYzIG9yIHY0KSBhbmQgcmV0dXJucyBhIHNhZmUgcGFyc2UgcmVzdWx0LlxuICogVGhpcyBmdW5jdGlvbiBoYW5kbGVzIGJvdGggWm9kIHYzIGFuZCB2NCBzY2hlbWFzLCByZXR1cm5pbmcgYSByZXN1bHQgb2JqZWN0IGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlLlxuICpcbiAqIEB0ZW1wbGF0ZSBUIC0gVGhlIGV4cGVjdGVkIG91dHB1dCB0eXBlIG9mIHRoZSBzY2hlbWEuXG4gKiBAcGFyYW0ge0ludGVyb3Bab2RUeXBlPFQ+fSBzY2hlbWEgLSBUaGUgWm9kIHNjaGVtYSAodjMgb3IgdjQpIHRvIHVzZSBmb3IgcGFyc2luZy5cbiAqIEBwYXJhbSB7dW5rbm93bn0gaW5wdXQgLSBUaGUgaW5wdXQgdmFsdWUgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxJbnRlcm9wWm9kU2FmZVBhcnNlUmVzdWx0PFQ+Pn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBzYWZlIHBhcnNlIHJlc3VsdCBvYmplY3QuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHNjaGVtYSBpcyBub3QgYSByZWNvZ25pemVkIFpvZCB2MyBvciB2NCBzY2hlbWEuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnRlcm9wU2FmZVBhcnNlQXN5bmMoc2NoZW1hLCBpbnB1dCkge1xuICAgIGlmIChpc1pvZFNjaGVtYVY0KHNjaGVtYSkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwYXJzZUFzeW5jKHNjaGVtYSwgaW5wdXQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc1pvZFNjaGVtYVYzKHNjaGVtYSkpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYS5zYWZlUGFyc2UoaW5wdXQpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiB6My5ab2RUeXBlIG9yIHo0LiRab2RUeXBlXCIpO1xufVxuLyoqXG4gKiBBc3luY2hyb25vdXNseSBwYXJzZXMgdGhlIGlucHV0IHVzaW5nIHRoZSBwcm92aWRlZCBab2Qgc2NoZW1hICh2MyBvciB2NCkgYW5kIHJldHVybnMgdGhlIHBhcnNlZCB2YWx1ZS5cbiAqIFRocm93cyBhbiBlcnJvciBpZiBwYXJzaW5nIGZhaWxzIG9yIGlmIHRoZSBzY2hlbWEgaXMgbm90IGEgcmVjb2duaXplZCBab2QgdjMgb3IgdjQgc2NoZW1hLlxuICpcbiAqIEB0ZW1wbGF0ZSBUIC0gVGhlIGV4cGVjdGVkIG91dHB1dCB0eXBlIG9mIHRoZSBzY2hlbWEuXG4gKiBAcGFyYW0ge0ludGVyb3Bab2RUeXBlPFQ+fSBzY2hlbWEgLSBUaGUgWm9kIHNjaGVtYSAodjMgb3IgdjQpIHRvIHVzZSBmb3IgcGFyc2luZy5cbiAqIEBwYXJhbSB7dW5rbm93bn0gaW5wdXQgLSBUaGUgaW5wdXQgdmFsdWUgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxUPn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHBhcnNlZCB2YWx1ZS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBwYXJzaW5nIGZhaWxzIG9yIHRoZSBzY2hlbWEgaXMgbm90IGEgcmVjb2duaXplZCBab2QgdjMgb3IgdjQgc2NoZW1hLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW50ZXJvcFBhcnNlQXN5bmMoc2NoZW1hLCBpbnB1dCkge1xuICAgIGlmIChpc1pvZFNjaGVtYVY0KHNjaGVtYSkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlKHNjaGVtYSwgaW5wdXQpO1xuICAgIH1cbiAgICBpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWEucGFyc2UoaW5wdXQpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiB6My5ab2RUeXBlIG9yIHo0LiRab2RUeXBlXCIpO1xufVxuLyoqXG4gKiBTYWZlbHkgcGFyc2VzIHRoZSBpbnB1dCB1c2luZyB0aGUgcHJvdmlkZWQgWm9kIHNjaGVtYSAodjMgb3IgdjQpIGFuZCByZXR1cm5zIGEgcmVzdWx0IG9iamVjdFxuICogaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUuIFRoaXMgZnVuY3Rpb24gaXMgY29tcGF0aWJsZSB3aXRoIGJvdGggWm9kIHYzIGFuZCB2NCBzY2hlbWFzLlxuICpcbiAqIEB0ZW1wbGF0ZSBUIC0gVGhlIGV4cGVjdGVkIG91dHB1dCB0eXBlIG9mIHRoZSBzY2hlbWEuXG4gKiBAcGFyYW0ge0ludGVyb3Bab2RUeXBlPFQ+fSBzY2hlbWEgLSBUaGUgWm9kIHNjaGVtYSAodjMgb3IgdjQpIHRvIHVzZSBmb3IgcGFyc2luZy5cbiAqIEBwYXJhbSB7dW5rbm93bn0gaW5wdXQgLSBUaGUgaW5wdXQgdmFsdWUgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyB7SW50ZXJvcFpvZFNhZmVQYXJzZVJlc3VsdDxUPn0gQW4gb2JqZWN0IHdpdGggZWl0aGVyIHRoZSBwYXJzZWQgZGF0YSAob24gc3VjY2VzcylcbiAqICAgb3IgdGhlIGVycm9yIChvbiBmYWlsdXJlKS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgc2NoZW1hIGlzIG5vdCBhIHJlY29nbml6ZWQgWm9kIHYzIG9yIHY0IHNjaGVtYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyb3BTYWZlUGFyc2Uoc2NoZW1hLCBpbnB1dCkge1xuICAgIGlmIChpc1pvZFNjaGVtYVY0KHNjaGVtYSkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBwYXJzZShzY2hlbWEsIGlucHV0KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWEuc2FmZVBhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU2NoZW1hIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgejMuWm9kVHlwZSBvciB6NC4kWm9kVHlwZVwiKTtcbn1cbi8qKlxuICogUGFyc2VzIHRoZSBpbnB1dCB1c2luZyB0aGUgcHJvdmlkZWQgWm9kIHNjaGVtYSAodjMgb3IgdjQpIGFuZCByZXR1cm5zIHRoZSBwYXJzZWQgdmFsdWUuXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgcGFyc2luZyBmYWlscyBvciBpZiB0aGUgc2NoZW1hIGlzIG5vdCBhIHJlY29nbml6ZWQgWm9kIHYzIG9yIHY0IHNjaGVtYS5cbiAqXG4gKiBAdGVtcGxhdGUgVCAtIFRoZSBleHBlY3RlZCBvdXRwdXQgdHlwZSBvZiB0aGUgc2NoZW1hLlxuICogQHBhcmFtIHtJbnRlcm9wWm9kVHlwZTxUPn0gc2NoZW1hIC0gVGhlIFpvZCBzY2hlbWEgKHYzIG9yIHY0KSB0byB1c2UgZm9yIHBhcnNpbmcuXG4gKiBAcGFyYW0ge3Vua25vd259IGlucHV0IC0gVGhlIGlucHV0IHZhbHVlIHRvIHBhcnNlLlxuICogQHJldHVybnMge1R9IFRoZSBwYXJzZWQgdmFsdWUuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgcGFyc2luZyBmYWlscyBvciB0aGUgc2NoZW1hIGlzIG5vdCBhIHJlY29nbml6ZWQgWm9kIHYzIG9yIHY0IHNjaGVtYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyb3BQYXJzZShzY2hlbWEsIGlucHV0KSB7XG4gICAgaWYgKGlzWm9kU2NoZW1hVjQoc2NoZW1hKSkge1xuICAgICAgICByZXR1cm4gcGFyc2Uoc2NoZW1hLCBpbnB1dCk7XG4gICAgfVxuICAgIGlmIChpc1pvZFNjaGVtYVYzKHNjaGVtYSkpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYS5wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIlNjaGVtYSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIHozLlpvZFR5cGUgb3IgejQuJFpvZFR5cGVcIik7XG59XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgZGVzY3JpcHRpb24gZnJvbSBhIHNjaGVtYSBkZWZpbml0aW9uICh2MywgdjQsIG9yIHBsYWluIG9iamVjdCksIGlmIGF2YWlsYWJsZS5cbiAqXG4gKiBAcGFyYW0ge3Vua25vd259IHNjaGVtYSAtIFRoZSBzY2hlbWEgdG8gZXh0cmFjdCB0aGUgZGVzY3JpcHRpb24gZnJvbS5cbiAqIEByZXR1cm5zIHtzdHJpbmcgfCB1bmRlZmluZWR9IFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgc2NoZW1hLCBvciB1bmRlZmluZWQgaWYgbm90IHByZXNlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hlbWFEZXNjcmlwdGlvbihzY2hlbWEpIHtcbiAgICBpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxSZWdpc3RyeS5nZXQoc2NoZW1hKT8uZGVzY3JpcHRpb247XG4gICAgfVxuICAgIGlmIChpc1pvZFNjaGVtYVYzKHNjaGVtYSkpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYS5kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgaWYgKFwiZGVzY3JpcHRpb25cIiBpbiBzY2hlbWEgJiYgdHlwZW9mIHNjaGVtYS5kZXNjcmlwdGlvbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gc2NoZW1hLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBwcm92aWRlZCBab2Qgc2NoZW1hIGlzIFwic2hhcGVsZXNzXCIuXG4gKiBBIHNoYXBlbGVzcyBzY2hlbWEgaXMgb25lIHRoYXQgZG9lcyBub3QgZGVmaW5lIGFueSBvYmplY3Qgc2hhcGUsXG4gKiBzdWNoIGFzIFpvZFN0cmluZywgWm9kTnVtYmVyLCBab2RCb29sZWFuLCBab2RBbnksIGV0Yy5cbiAqIEZvciBab2RPYmplY3QsIGl0IG11c3QgaGF2ZSBubyBzaGFwZSBrZXlzIHRvIGJlIGNvbnNpZGVyZWQgc2hhcGVsZXNzLlxuICogWm9kUmVjb3JkIHNjaGVtYXMgYXJlIGNvbnNpZGVyZWQgc2hhcGVsZXNzIHNpbmNlIHRoZXkgZGVmaW5lIGR5bmFtaWNcbiAqIGtleS12YWx1ZSBtYXBwaW5ncyB3aXRob3V0IGZpeGVkIGtleXMuXG4gKlxuICogQHBhcmFtIHNjaGVtYSBUaGUgWm9kIHNjaGVtYSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzY2hlbWEgaXMgc2hhcGVsZXNzLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NoYXBlbGVzc1pvZFNjaGVtYShzY2hlbWEpIHtcbiAgICBpZiAoIWlzSW50ZXJvcFpvZFNjaGVtYShzY2hlbWEpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgZm9yIHYzIHNjaGVtYXNcbiAgICBpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSB6b2QgdjMgdHlwZXMgYXJlIG5vdCBjb21wYXRpYmxlIHdpdGggem9kIHY0IHR5cGVzXG4gICAgICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fZGVmO1xuICAgICAgICAvLyBab2RPYmplY3QgaXMgb25seSBzaGFwZWQgaWYgaXQgaGFzIGFjdHVhbCBzaGFwZSBrZXlzXG4gICAgICAgIGlmIChkZWYudHlwZU5hbWUgPT09IFwiWm9kT2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHNjaGVtYTtcbiAgICAgICAgICAgIHJldHVybiAhb2JqLnNoYXBlIHx8IE9iamVjdC5rZXlzKG9iai5zaGFwZSkubGVuZ3RoID09PSAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIFpvZFJlY29yZCBpcyBzaGFwZWxlc3MgKGR5bmFtaWMga2V5LXZhbHVlIG1hcHBpbmcpXG4gICAgICAgIGlmIChkZWYudHlwZU5hbWUgPT09IFwiWm9kUmVjb3JkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENoZWNrIGZvciB2NCBzY2hlbWFzXG4gICAgaWYgKGlzWm9kU2NoZW1hVjQoc2NoZW1hKSkge1xuICAgICAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgICAgIC8vIE9iamVjdCB0eXBlIGlzIG9ubHkgc2hhcGVkIGlmIGl0IGhhcyBhY3R1YWwgc2hhcGUga2V5c1xuICAgICAgICBpZiAoZGVmLnR5cGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHNjaGVtYTtcbiAgICAgICAgICAgIHJldHVybiAhb2JqLnNoYXBlIHx8IE9iamVjdC5rZXlzKG9iai5zaGFwZSkubGVuZ3RoID09PSAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlY29yZCB0eXBlIGlzIHNoYXBlbGVzcyAoZHluYW1pYyBrZXktdmFsdWUgbWFwcGluZylcbiAgICAgICAgaWYgKGRlZi50eXBlID09PSBcInJlY29yZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBGb3Igb3RoZXIgc2NoZW1hcywgY2hlY2sgaWYgdGhleSBoYXZlIGEgYHNoYXBlYCBwcm9wZXJ0eVxuICAgIC8vIElmIHRoZXkgZG9uJ3QgaGF2ZSBzaGFwZSwgdGhleSdyZSBsaWtlbHkgc2hhcGVsZXNzXG4gICAgaWYgKHR5cGVvZiBzY2hlbWEgPT09IFwib2JqZWN0XCIgJiYgc2NoZW1hICE9PSBudWxsICYmICEoXCJzaGFwZVwiIGluIHNjaGVtYSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgcHJvdmlkZWQgWm9kIHNjaGVtYSBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIHNpbXBsZSBzdHJpbmcgc2NoZW1hXG4gKiB0aGF0IG1hcHMgdG8gRHluYW1pY1Rvb2wuIFRoaXMgYWxpZ25zIHdpdGggdGhlIHR5cGUtbGV2ZWwgY29uc3RyYWludCBvZlxuICogSW50ZXJvcFpvZFR5cGU8c3RyaW5nIHwgdW5kZWZpbmVkPiB3aGljaCBvbmx5IG1hdGNoZXMgYmFzaWMgc3RyaW5nIHNjaGVtYXMuXG4gKiBJZiB0aGUgcHJvdmlkZWQgc2NoZW1hIGlzIGp1c3Qgei5zdHJpbmcoKSwgd2UgY2FuIG1ha2UgdGhlIGRldGVybWluYXRpb24gdGhhdFxuICogdGhlIHRvb2wgaXMganVzdCBhIGdlbmVyaWMgc3RyaW5nIHRvb2wgdGhhdCBkb2Vzbid0IHJlcXVpcmUgYW55IGlucHV0IHZhbGlkYXRpb24uXG4gKlxuICogVGhpcyBmdW5jdGlvbiBvbmx5IHJldHVybnMgdHJ1ZSBmb3IgYmFzaWMgWm9kU3RyaW5nIHNjaGVtYXMsIGluY2x1ZGluZzpcbiAqIC0gQmFzaWMgc3RyaW5nIHNjaGVtYXMgKHouc3RyaW5nKCkpXG4gKiAtIFN0cmluZyBzY2hlbWFzIHdpdGggdmFsaWRhdGlvbnMgKHouc3RyaW5nKCkubWluKDEpLCB6LnN0cmluZygpLmVtYWlsKCksIGV0Yy4pXG4gKlxuICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIGZhbHNlIGZvciBldmVyeXRoaW5nIGVsc2UsIGluY2x1ZGluZzpcbiAqIC0gU3RyaW5nIHNjaGVtYXMgd2l0aCBkZWZhdWx0cyAoei5zdHJpbmcoKS5kZWZhdWx0KFwidmFsdWVcIikpXG4gKiAtIEJyYW5kZWQgc3RyaW5nIHNjaGVtYXMgKHouc3RyaW5nKCkuYnJhbmQ8XCJVc2VySWRcIj4oKSlcbiAqIC0gU3RyaW5nIHNjaGVtYXMgd2l0aCBjYXRjaCBvcGVyYXRpb25zICh6LnN0cmluZygpLmNhdGNoKFwiZGVmYXVsdFwiKSlcbiAqIC0gT3B0aW9uYWwvbnVsbGFibGUgc3RyaW5nIHNjaGVtYXMgKHouc3RyaW5nKCkub3B0aW9uYWwoKSlcbiAqIC0gVHJhbnNmb3JtZWQgc2NoZW1hcyAoei5zdHJpbmcoKS50cmFuc2Zvcm0oKSBvciB6Lm9iamVjdCgpLnRyYW5zZm9ybSgpKVxuICogLSBPYmplY3Qgb3IgcmVjb3JkIHNjaGVtYXMsIGV2ZW4gaWYgdGhleSdyZSBlbXB0eVxuICogLSBBbnkgb3RoZXIgc2NoZW1hIHR5cGVcbiAqXG4gKiBAcGFyYW0gc2NoZW1hIFRoZSBab2Qgc2NoZW1hIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNjaGVtYSBpcyBhIGJhc2ljIFpvZFN0cmluZywgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTaW1wbGVTdHJpbmdab2RTY2hlbWEoc2NoZW1hKSB7XG4gICAgaWYgKCFpc0ludGVyb3Bab2RTY2hlbWEoc2NoZW1hKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIEZvciB2MyBzY2hlbWFzXG4gICAgaWYgKGlzWm9kU2NoZW1hVjMoc2NoZW1hKSkge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gem9kIHYzIHR5cGVzIGFyZSBub3QgY29tcGF0aWJsZSB3aXRoIHpvZCB2NCB0eXBlc1xuICAgICAgICBjb25zdCBkZWYgPSBzY2hlbWEuX2RlZjtcbiAgICAgICAgLy8gT25seSBhY2NlcHQgYmFzaWMgWm9kU3RyaW5nXG4gICAgICAgIHJldHVybiBkZWYudHlwZU5hbWUgPT09IFwiWm9kU3RyaW5nXCI7XG4gICAgfVxuICAgIC8vIEZvciB2NCBzY2hlbWFzXG4gICAgaWYgKGlzWm9kU2NoZW1hVjQoc2NoZW1hKSkge1xuICAgICAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgICAgIC8vIE9ubHkgYWNjZXB0IGJhc2ljIHN0cmluZyB0eXBlXG4gICAgICAgIHJldHVybiBkZWYudHlwZSA9PT0gXCJzdHJpbmdcIjtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kT2JqZWN0VjMob2JqKSB7XG4gICAgLy8gWm9kIHYzIG9iamVjdCBzY2hlbWFzIGhhdmUgX2RlZi50eXBlTmFtZSA9PT0gXCJab2RPYmplY3RcIlxuICAgIGlmICh0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIG9iaiAhPT0gbnVsbCAmJlxuICAgICAgICBcIl9kZWZcIiBpbiBvYmogJiZcbiAgICAgICAgdHlwZW9mIG9iai5fZGVmID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIG9iai5fZGVmICE9PSBudWxsICYmXG4gICAgICAgIFwidHlwZU5hbWVcIiBpbiBvYmouX2RlZiAmJlxuICAgICAgICBvYmouX2RlZi50eXBlTmFtZSA9PT0gXCJab2RPYmplY3RcIikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kT2JqZWN0VjQob2JqKSB7XG4gICAgaWYgKCFpc1pvZFNjaGVtYVY0KG9iaikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBab2QgdjQgb2JqZWN0IHNjaGVtYXMgaGF2ZSBfem9kLmRlZi50eXBlID09PSBcIm9iamVjdFwiXG4gICAgaWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgb2JqICE9PSBudWxsICYmXG4gICAgICAgIFwiX3pvZFwiIGluIG9iaiAmJlxuICAgICAgICB0eXBlb2Ygb2JqLl96b2QgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgb2JqLl96b2QgIT09IG51bGwgJiZcbiAgICAgICAgXCJkZWZcIiBpbiBvYmouX3pvZCAmJlxuICAgICAgICB0eXBlb2Ygb2JqLl96b2QuZGVmID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIG9iai5fem9kLmRlZiAhPT0gbnVsbCAmJlxuICAgICAgICBcInR5cGVcIiBpbiBvYmouX3pvZC5kZWYgJiZcbiAgICAgICAgb2JqLl96b2QuZGVmLnR5cGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1pvZEFycmF5VjQob2JqKSB7XG4gICAgaWYgKCFpc1pvZFNjaGVtYVY0KG9iaikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBab2QgdjQgYXJyYXkgc2NoZW1hcyBoYXZlIF96b2QuZGVmLnR5cGUgPT09IFwiYXJyYXlcIlxuICAgIGlmICh0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIG9iaiAhPT0gbnVsbCAmJlxuICAgICAgICBcIl96b2RcIiBpbiBvYmogJiZcbiAgICAgICAgdHlwZW9mIG9iai5fem9kID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIG9iai5fem9kICE9PSBudWxsICYmXG4gICAgICAgIFwiZGVmXCIgaW4gb2JqLl96b2QgJiZcbiAgICAgICAgdHlwZW9mIG9iai5fem9kLmRlZiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBvYmouX3pvZC5kZWYgIT09IG51bGwgJiZcbiAgICAgICAgXCJ0eXBlXCIgaW4gb2JqLl96b2QuZGVmICYmXG4gICAgICAgIG9iai5fem9kLmRlZi50eXBlID09PSBcImFycmF5XCIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgYW4gSW50ZXJvcFpvZE9iamVjdCAoWm9kIHYzIG9yIHY0IG9iamVjdCBzY2hlbWEpLlxuICpcbiAqIEBwYXJhbSBvYmogVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIGEgWm9kIHYzIG9yIHY0IG9iamVjdCBzY2hlbWEsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW50ZXJvcFpvZE9iamVjdChvYmopIHtcbiAgICBpZiAoaXNab2RPYmplY3RWMyhvYmopKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNab2RPYmplY3RWNChvYmopKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgc2hhcGUgKGZpZWxkcykgb2YgYSBab2Qgb2JqZWN0IHNjaGVtYSwgc3VwcG9ydGluZyBib3RoIFpvZCB2MyBhbmQgdjQuXG4gKlxuICogQHRlbXBsYXRlIFQgLSBUaGUgdHlwZSBvZiB0aGUgWm9kIG9iamVjdCBzY2hlbWEuXG4gKiBAcGFyYW0ge1R9IHNjaGVtYSAtIFRoZSBab2Qgb2JqZWN0IHNjaGVtYSBpbnN0YW5jZSAoZWl0aGVyIHYzIG9yIHY0KS5cbiAqIEByZXR1cm5zIHtJbnRlcm9wWm9kT2JqZWN0U2hhcGU8VD59IFRoZSBzaGFwZSBvZiB0aGUgb2JqZWN0IHNjaGVtYS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgc2NoZW1hIGlzIG5vdCBhIFpvZCB2MyBvciB2NCBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcm9wWm9kT2JqZWN0U2hhcGUoc2NoZW1hKSB7XG4gICAgaWYgKGlzWm9kU2NoZW1hVjMoc2NoZW1hKSkge1xuICAgICAgICByZXR1cm4gc2NoZW1hLnNoYXBlO1xuICAgIH1cbiAgICBpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWEuX3pvZC5kZWYuc2hhcGU7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIlNjaGVtYSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIHozLlpvZE9iamVjdCBvciB6NC4kWm9kT2JqZWN0XCIpO1xufVxuLyoqXG4gKiBFeHRlbmRzIGEgWm9kIG9iamVjdCBzY2hlbWEgd2l0aCBhZGRpdGlvbmFsIGZpZWxkcywgc3VwcG9ydGluZyBib3RoIFpvZCB2MyBhbmQgdjQuXG4gKlxuICogQHRlbXBsYXRlIFQgLSBUaGUgdHlwZSBvZiB0aGUgWm9kIG9iamVjdCBzY2hlbWEuXG4gKiBAcGFyYW0ge1R9IHNjaGVtYSAtIFRoZSBab2Qgb2JqZWN0IHNjaGVtYSBpbnN0YW5jZSAoZWl0aGVyIHYzIG9yIHY0KS5cbiAqIEBwYXJhbSB7SW50ZXJvcFpvZE9iamVjdFNoYXBlfSBleHRlbnNpb24gLSBUaGUgZmllbGRzIHRvIGFkZCB0byB0aGUgc2NoZW1hLlxuICogQHJldHVybnMge0ludGVyb3Bab2RPYmplY3R9IFRoZSBleHRlbmRlZCBab2Qgb2JqZWN0IHNjaGVtYS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgc2NoZW1hIGlzIG5vdCBhIFpvZCB2MyBvciB2NCBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRJbnRlcm9wWm9kT2JqZWN0KHNjaGVtYSwgZXh0ZW5zaW9uKSB7XG4gICAgaWYgKGlzWm9kU2NoZW1hVjMoc2NoZW1hKSkge1xuICAgICAgICByZXR1cm4gc2NoZW1hLmV4dGVuZChleHRlbnNpb24pO1xuICAgIH1cbiAgICBpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSB7XG4gICAgICAgIHJldHVybiB1dGlsLmV4dGVuZChzY2hlbWEsIGV4dGVuc2lvbik7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIlNjaGVtYSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIHozLlpvZE9iamVjdCBvciB6NC4kWm9kT2JqZWN0XCIpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgcGFydGlhbCB2ZXJzaW9uIG9mIGEgWm9kIG9iamVjdCBzY2hlbWEsIG1ha2luZyBhbGwgZmllbGRzIG9wdGlvbmFsLlxuICogU3VwcG9ydHMgYm90aCBab2QgdjMgYW5kIHY0LlxuICpcbiAqIEB0ZW1wbGF0ZSBUIC0gVGhlIHR5cGUgb2YgdGhlIFpvZCBvYmplY3Qgc2NoZW1hLlxuICogQHBhcmFtIHtUfSBzY2hlbWEgLSBUaGUgWm9kIG9iamVjdCBzY2hlbWEgaW5zdGFuY2UgKGVpdGhlciB2MyBvciB2NCkuXG4gKiBAcmV0dXJucyB7SW50ZXJvcFpvZE9iamVjdH0gVGhlIHBhcnRpYWwgWm9kIG9iamVjdCBzY2hlbWEuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHNjaGVtYSBpcyBub3QgYSBab2QgdjMgb3IgdjQgb2JqZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJvcFpvZE9iamVjdFBhcnRpYWwoc2NoZW1hKSB7XG4gICAgaWYgKGlzWm9kU2NoZW1hVjMoc2NoZW1hKSkge1xuICAgICAgICAvLyB6MzogLnBhcnRpYWwoKSBleGlzdHMgYW5kIHdvcmtzIGFzIGV4cGVjdGVkXG4gICAgICAgIHJldHVybiBzY2hlbWEucGFydGlhbCgpO1xuICAgIH1cbiAgICBpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSB7XG4gICAgICAgIC8vIHo0OiB1dGlsLnBhcnRpYWwgZXhpc3RzIGFuZCB3b3JrcyBhcyBleHBlY3RlZFxuICAgICAgICByZXR1cm4gdXRpbC5wYXJ0aWFsKCRab2RPcHRpb25hbCwgc2NoZW1hLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiB6My5ab2RPYmplY3Qgb3IgejQuJFpvZE9iamVjdFwiKTtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmljdCB2ZXJzaW9uIG9mIGEgWm9kIG9iamVjdCBzY2hlbWEsIGRpc2FsbG93aW5nIHVua25vd24ga2V5cy5cbiAqIFN1cHBvcnRzIGJvdGggWm9kIHYzIGFuZCB2NCBvYmplY3Qgc2NoZW1hcy4gSWYgYHJlY3Vyc2l2ZWAgaXMgdHJ1ZSwgYXBwbGllcyBzdHJpY3RuZXNzXG4gKiByZWN1cnNpdmVseSB0byBhbGwgbmVzdGVkIG9iamVjdCBzY2hlbWFzIGFuZCBhcnJheXMgb2Ygb2JqZWN0IHNjaGVtYXMuXG4gKlxuICogQHRlbXBsYXRlIFQgLSBUaGUgdHlwZSBvZiB0aGUgWm9kIG9iamVjdCBzY2hlbWEuXG4gKiBAcGFyYW0ge1R9IHNjaGVtYSAtIFRoZSBab2Qgb2JqZWN0IHNjaGVtYSBpbnN0YW5jZSAoZWl0aGVyIHYzIG9yIHY0KS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlY3Vyc2l2ZT1mYWxzZV0gLSBXaGV0aGVyIHRvIGFwcGx5IHN0cmljdG5lc3MgcmVjdXJzaXZlbHkgdG8gbmVzdGVkIG9iamVjdHMvYXJyYXlzLlxuICogQHJldHVybnMge0ludGVyb3Bab2RPYmplY3R9IFRoZSBzdHJpY3QgWm9kIG9iamVjdCBzY2hlbWEuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHNjaGVtYSBpcyBub3QgYSBab2QgdjMgb3IgdjQgb2JqZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJvcFpvZE9iamVjdFN0cmljdChzY2hlbWEsIHJlY3Vyc2l2ZSA9IGZhbHNlKSB7XG4gICAgaWYgKGlzWm9kU2NoZW1hVjMoc2NoZW1hKSkge1xuICAgICAgICAvLyBUT0RPOiB2MyBzY2hlbWFzIGFyZW4ndCByZWN1cnNpdmVseSBoYW5kbGVkIGhlcmVcbiAgICAgICAgLy8gKGN1cnJlbnRseSBub3QgbmVjZXNzYXJ5IHNpbmNlIHpvZFRvSnNvblNjaGVtYSBoYW5kbGVzIHRoaXMpXG4gICAgICAgIHJldHVybiBzY2hlbWEuc3RyaWN0KCk7XG4gICAgfVxuICAgIGlmIChpc1pvZE9iamVjdFY0KHNjaGVtYSkpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0U2hhcGUgPSBzY2hlbWEuX3pvZC5kZWYuc2hhcGU7XG4gICAgICAgIGlmIChyZWN1cnNpdmUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwga2V5U2NoZW1hXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEuX3pvZC5kZWYuc2hhcGUpKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHNoYXBlIGtleSBpcyBhIHY0IG9iamVjdCBzY2hlbWEsIHdlIG5lZWQgdG8gbWFrZSBpdCBzdHJpY3RcbiAgICAgICAgICAgICAgICBpZiAoaXNab2RPYmplY3RWNChrZXlTY2hlbWEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dFNjaGVtYSA9IGludGVyb3Bab2RPYmplY3RTdHJpY3Qoa2V5U2NoZW1hLCByZWN1cnNpdmUpO1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRTaGFwZVtrZXldID0gb3V0cHV0U2NoZW1hO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgc2hhcGUga2V5IGlzIGEgdjQgYXJyYXkgc2NoZW1hLCB3ZSBuZWVkIHRvIG1ha2UgdGhlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAvLyBzY2hlbWEgc3RyaWN0IGlmIGl0J3MgYW4gb2JqZWN0IHNjaGVtYVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzWm9kQXJyYXlWNChrZXlTY2hlbWEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlbGVtZW50U2NoZW1hID0ga2V5U2NoZW1hLl96b2QuZGVmLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdFY0KGVsZW1lbnRTY2hlbWEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50U2NoZW1hID0gaW50ZXJvcFpvZE9iamVjdFN0cmljdChlbGVtZW50U2NoZW1hLCByZWN1cnNpdmUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFNoYXBlW2tleV0gPSBjbG9uZShrZXlTY2hlbWEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmtleVNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRTY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGp1c3QgdXNlIHRoZSBrZXlTY2hlbWFcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0U2hhcGVba2V5XSA9IGtleVNjaGVtYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQXNzaWduIG1ldGEgZmllbGRzIHRvIHRoZSBrZXlTY2hlbWFcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gZ2xvYmFsUmVnaXN0cnkuZ2V0KGtleVNjaGVtYSk7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGEpXG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbFJlZ2lzdHJ5LmFkZChvdXRwdXRTaGFwZVtrZXldLCBtZXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RpZmllZFNjaGVtYSA9IGNsb25lKHNjaGVtYSwge1xuICAgICAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICAgICAgc2hhcGU6IG91dHB1dFNoYXBlLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IF9uZXZlcigkWm9kTmV2ZXIpLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbWV0YSA9IGdsb2JhbFJlZ2lzdHJ5LmdldChzY2hlbWEpO1xuICAgICAgICBpZiAobWV0YSlcbiAgICAgICAgICAgIGdsb2JhbFJlZ2lzdHJ5LmFkZChtb2RpZmllZFNjaGVtYSwgbWV0YSk7XG4gICAgICAgIHJldHVybiBtb2RpZmllZFNjaGVtYTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU2NoZW1hIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgejMuWm9kT2JqZWN0IG9yIHo0LiRab2RPYmplY3RcIik7XG59XG4vKipcbiAqIFJldHVybnMgYSBwYXNzdGhyb3VnaCB2ZXJzaW9uIG9mIGEgWm9kIG9iamVjdCBzY2hlbWEsIGFsbG93aW5nIHVua25vd24ga2V5cy5cbiAqIFN1cHBvcnRzIGJvdGggWm9kIHYzIGFuZCB2NCBvYmplY3Qgc2NoZW1hcy4gSWYgYHJlY3Vyc2l2ZWAgaXMgdHJ1ZSwgYXBwbGllcyBwYXNzdGhyb3VnaFxuICogcmVjdXJzaXZlbHkgdG8gYWxsIG5lc3RlZCBvYmplY3Qgc2NoZW1hcyBhbmQgYXJyYXlzIG9mIG9iamVjdCBzY2hlbWFzLlxuICpcbiAqIEB0ZW1wbGF0ZSBUIC0gVGhlIHR5cGUgb2YgdGhlIFpvZCBvYmplY3Qgc2NoZW1hLlxuICogQHBhcmFtIHtUfSBzY2hlbWEgLSBUaGUgWm9kIG9iamVjdCBzY2hlbWEgaW5zdGFuY2UgKGVpdGhlciB2MyBvciB2NCkuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtyZWN1cnNpdmU9ZmFsc2VdIC0gV2hldGhlciB0byBhcHBseSBwYXNzdGhyb3VnaCByZWN1cnNpdmVseSB0byBuZXN0ZWQgb2JqZWN0cy9hcnJheXMuXG4gKiBAcmV0dXJucyB7SW50ZXJvcFpvZE9iamVjdH0gVGhlIHBhc3N0aHJvdWdoIFpvZCBvYmplY3Qgc2NoZW1hLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBzY2hlbWEgaXMgbm90IGEgWm9kIHYzIG9yIHY0IG9iamVjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyb3Bab2RPYmplY3RQYXNzdGhyb3VnaChzY2hlbWEsIHJlY3Vyc2l2ZSA9IGZhbHNlKSB7XG4gICAgaWYgKGlzWm9kT2JqZWN0VjMoc2NoZW1hKSkge1xuICAgICAgICAvLyBUT0RPOiB2MyBzY2hlbWFzIGFyZW4ndCByZWN1cnNpdmVseSBoYW5kbGVkIGhlcmVcbiAgICAgICAgLy8gKGN1cnJlbnRseSBub3QgbmVjZXNzYXJ5IHNpbmNlIHpvZFRvSnNvblNjaGVtYSBoYW5kbGVzIHRoaXMpXG4gICAgICAgIHJldHVybiBzY2hlbWEucGFzc3Rocm91Z2goKTtcbiAgICB9XG4gICAgaWYgKGlzWm9kT2JqZWN0VjQoc2NoZW1hKSkge1xuICAgICAgICBjb25zdCBvdXRwdXRTaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICAgICAgaWYgKHJlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBrZXlTY2hlbWFdIG9mIE9iamVjdC5lbnRyaWVzKHNjaGVtYS5fem9kLmRlZi5zaGFwZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgc2hhcGUga2V5IGlzIGEgdjQgb2JqZWN0IHNjaGVtYSwgd2UgbmVlZCB0byBtYWtlIGl0IHBhc3N0aHJvdWdoXG4gICAgICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0VjQoa2V5U2NoZW1hKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRTY2hlbWEgPSBpbnRlcm9wWm9kT2JqZWN0UGFzc3Rocm91Z2goa2V5U2NoZW1hLCByZWN1cnNpdmUpO1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRTaGFwZVtrZXldID0gb3V0cHV0U2NoZW1hO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgc2hhcGUga2V5IGlzIGEgdjQgYXJyYXkgc2NoZW1hLCB3ZSBuZWVkIHRvIG1ha2UgdGhlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAvLyBzY2hlbWEgcGFzc3Rocm91Z2ggaWYgaXQncyBhbiBvYmplY3Qgc2NoZW1hXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNab2RBcnJheVY0KGtleVNjaGVtYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVsZW1lbnRTY2hlbWEgPSBrZXlTY2hlbWEuX3pvZC5kZWYuZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0VjQoZWxlbWVudFNjaGVtYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRTY2hlbWEgPSBpbnRlcm9wWm9kT2JqZWN0UGFzc3Rocm91Z2goZWxlbWVudFNjaGVtYSwgcmVjdXJzaXZlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRTaGFwZVtrZXldID0gY2xvbmUoa2V5U2NoZW1hLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5rZXlTY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50U2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBqdXN0IHVzZSB0aGUga2V5U2NoZW1hXG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFNoYXBlW2tleV0gPSBrZXlTY2hlbWE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEFzc2lnbiBtZXRhIGZpZWxkcyB0byB0aGUga2V5U2NoZW1hXG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YSA9IGdsb2JhbFJlZ2lzdHJ5LmdldChrZXlTY2hlbWEpO1xuICAgICAgICAgICAgICAgIGlmIChtZXRhKVxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxSZWdpc3RyeS5hZGQob3V0cHV0U2hhcGVba2V5XSwgbWV0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kaWZpZWRTY2hlbWEgPSBjbG9uZShzY2hlbWEsIHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgICAgIHNoYXBlOiBvdXRwdXRTaGFwZSxcbiAgICAgICAgICAgIGNhdGNoYWxsOiBfdW5rbm93bigkWm9kVW5rbm93biksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBtZXRhID0gZ2xvYmFsUmVnaXN0cnkuZ2V0KHNjaGVtYSk7XG4gICAgICAgIGlmIChtZXRhKVxuICAgICAgICAgICAgZ2xvYmFsUmVnaXN0cnkuYWRkKG1vZGlmaWVkU2NoZW1hLCBtZXRhKTtcbiAgICAgICAgcmV0dXJuIG1vZGlmaWVkU2NoZW1hO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiB6My5ab2RPYmplY3Qgb3IgejQuJFpvZE9iamVjdFwiKTtcbn1cbi8qKlxuICogUmV0dXJucyBhIGdldHRlciBmdW5jdGlvbiBmb3IgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYSBab2Qgc2NoZW1hLCBpZiBvbmUgaXMgZGVmaW5lZC5cbiAqIFN1cHBvcnRzIGJvdGggWm9kIHYzIGFuZCB2NCBzY2hlbWFzLiBJZiB0aGUgc2NoZW1hIGhhcyBhIGRlZmF1bHQgdmFsdWUsXG4gKiB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhhdCB2YWx1ZSB3aGVuIGNhbGxlZC4gSWYgbm8gZGVmYXVsdCBpcyBkZWZpbmVkLFxuICogcmV0dXJucyB1bmRlZmluZWQuXG4gKlxuICogQHRlbXBsYXRlIFQgLSBUaGUgdHlwZSBvZiB0aGUgWm9kIHNjaGVtYS5cbiAqIEBwYXJhbSB7VH0gc2NoZW1hIC0gVGhlIFpvZCBzY2hlbWEgaW5zdGFuY2UgKGVpdGhlciB2MyBvciB2NCkuXG4gKiBAcmV0dXJucyB7KCgpID0+IEluZmVySW50ZXJvcFpvZE91dHB1dDxUPikgfCB1bmRlZmluZWR9IEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBkZWZhdWx0IHZhbHVlLCBvciB1bmRlZmluZWQgaWYgbm8gZGVmYXVsdCBpcyBzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcm9wWm9kRGVmYXVsdEdldHRlcihzY2hlbWEpIHtcbiAgICBpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBzY2hlbWEucGFyc2UodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBwYXJzZShzY2hlbWEsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4gZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGlzWm9kVHJhbnNmb3JtVjMoc2NoZW1hKSB7XG4gICAgcmV0dXJuIChpc1pvZFNjaGVtYVYzKHNjaGVtYSkgJiZcbiAgICAgICAgXCJ0eXBlTmFtZVwiIGluIHNjaGVtYS5fZGVmICYmXG4gICAgICAgIHNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBcIlpvZEVmZmVjdHNcIik7XG59XG5mdW5jdGlvbiBpc1pvZFRyYW5zZm9ybVY0KHNjaGVtYSkge1xuICAgIHJldHVybiBpc1pvZFNjaGVtYVY0KHNjaGVtYSkgJiYgc2NoZW1hLl96b2QuZGVmLnR5cGUgPT09IFwicGlwZVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnB1dCB0eXBlIG9mIGEgWm9kIHRyYW5zZm9ybSBzY2hlbWEsIGZvciBib3RoIHYzIGFuZCB2NC5cbiAqIElmIHRoZSBzY2hlbWEgaXMgbm90IGEgdHJhbnNmb3JtLCByZXR1cm5zIHVuZGVmaW5lZC4gSWYgYHJlY3Vyc2l2ZWAgaXMgdHJ1ZSxcbiAqIHJlY3Vyc2l2ZWx5IHByb2Nlc3NlcyBuZXN0ZWQgb2JqZWN0IHNjaGVtYXMgYW5kIGFycmF5cyBvZiBvYmplY3Qgc2NoZW1hcy5cbiAqXG4gKiBAcGFyYW0gc2NoZW1hIC0gVGhlIFpvZCBzY2hlbWEgaW5zdGFuY2UgKHYzIG9yIHY0KVxuICogQHBhcmFtIHtib29sZWFufSBbcmVjdXJzaXZlPWZhbHNlXSAtIFdoZXRoZXIgdG8gcmVjdXJzaXZlbHkgcHJvY2VzcyBuZXN0ZWQgb2JqZWN0cy9hcnJheXMuXG4gKiBAcmV0dXJucyBUaGUgaW5wdXQgWm9kIHNjaGVtYSBvZiB0aGUgdHJhbnNmb3JtLCBvciB1bmRlZmluZWQgaWYgbm90IGEgdHJhbnNmb3JtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcm9wWm9kVHJhbnNmb3JtSW5wdXRTY2hlbWEoc2NoZW1hLCByZWN1cnNpdmUgPSBmYWxzZSkge1xuICAgIC8vIFpvZCB2MzogLl9kZWYuc2NoZW1hIGlzIHRoZSBpbnB1dCBzY2hlbWEgZm9yIFpvZEVmZmVjdHMgKHRyYW5zZm9ybSlcbiAgICBpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSB7XG4gICAgICAgIGlmIChpc1pvZFRyYW5zZm9ybVYzKHNjaGVtYSkpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcm9wWm9kVHJhbnNmb3JtSW5wdXRTY2hlbWEoc2NoZW1hLl9kZWYuc2NoZW1hLCByZWN1cnNpdmUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IHYzIHNjaGVtYXMgYXJlbid0IHJlY3Vyc2l2ZWx5IGhhbmRsZWQgaGVyZVxuICAgICAgICAvLyAoY3VycmVudGx5IG5vdCBuZWNlc3Nhcnkgc2luY2Ugem9kVG9Kc29uU2NoZW1hIGhhbmRsZXMgdGhpcylcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgLy8gWm9kIHY0OiBfZGVmLnR5cGUgaXMgdGhlIGlucHV0IHNjaGVtYSBmb3IgWm9kRWZmZWN0cyAodHJhbnNmb3JtKVxuICAgIGlmIChpc1pvZFNjaGVtYVY0KHNjaGVtYSkpIHtcbiAgICAgICAgbGV0IG91dHB1dFNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgaWYgKGlzWm9kVHJhbnNmb3JtVjQoc2NoZW1hKSkge1xuICAgICAgICAgICAgb3V0cHV0U2NoZW1hID0gaW50ZXJvcFpvZFRyYW5zZm9ybUlucHV0U2NoZW1hKHNjaGVtYS5fem9kLmRlZi5pbiwgcmVjdXJzaXZlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjdXJzaXZlKSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgbmVzdGVkIG9iamVjdCBzY2hlbWFzXG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3RWNChvdXRwdXRTY2hlbWEpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0U2hhcGUgPSBvdXRwdXRTY2hlbWEuX3pvZC5kZWYuc2hhcGU7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBrZXlTY2hlbWFdIG9mIE9iamVjdC5lbnRyaWVzKG91dHB1dFNjaGVtYS5fem9kLmRlZi5zaGFwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0U2hhcGVba2V5XSA9IGludGVyb3Bab2RUcmFuc2Zvcm1JbnB1dFNjaGVtYShrZXlTY2hlbWEsIHJlY3Vyc2l2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG91dHB1dFNjaGVtYSA9IGNsb25lKG91dHB1dFNjaGVtYSwge1xuICAgICAgICAgICAgICAgICAgICAuLi5vdXRwdXRTY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiBvdXRwdXRTaGFwZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEhhbmRsZSBuZXN0ZWQgYXJyYXkgc2NoZW1hc1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNab2RBcnJheVY0KG91dHB1dFNjaGVtYSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50U2NoZW1hID0gaW50ZXJvcFpvZFRyYW5zZm9ybUlucHV0U2NoZW1hKG91dHB1dFNjaGVtYS5fem9kLmRlZi5lbGVtZW50LCByZWN1cnNpdmUpO1xuICAgICAgICAgICAgICAgIG91dHB1dFNjaGVtYSA9IGNsb25lKG91dHB1dFNjaGVtYSwge1xuICAgICAgICAgICAgICAgICAgICAuLi5vdXRwdXRTY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRTY2hlbWEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWV0YSA9IGdsb2JhbFJlZ2lzdHJ5LmdldChzY2hlbWEpO1xuICAgICAgICBpZiAobWV0YSlcbiAgICAgICAgICAgIGdsb2JhbFJlZ2lzdHJ5LmFkZChvdXRwdXRTY2hlbWEsIG1ldGEpO1xuICAgICAgICByZXR1cm4gb3V0cHV0U2NoZW1hO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiB6My5ab2RUeXBlIG9yIHo0LiRab2RUeXBlXCIpO1xufVxuIl0sIm5hbWVzIjpbInBhcnNlIiwicGFyc2VBc3luYyIsImdsb2JhbFJlZ2lzdHJ5IiwidXRpbCIsImNsb25lIiwiX3Vua25vd24iLCJfbmV2ZXIiLCIkWm9kVW5rbm93biIsIiRab2ROZXZlciIsIiRab2RPcHRpb25hbCIsImlzWm9kU2NoZW1hVjQiLCJzY2hlbWEiLCJvYmoiLCJ6b2QiLCJfem9kIiwiaXNab2RTY2hlbWFWMyIsImRlZiIsIl9kZWYiLCJpc1pvZFNjaGVtYSIsImNvbnNvbGUiLCJ3YXJuIiwiaXNJbnRlcm9wWm9kU2NoZW1hIiwiaW5wdXQiLCJBcnJheSIsImlzQXJyYXkiLCJpbnRlcm9wU2FmZVBhcnNlQXN5bmMiLCJkYXRhIiwic3VjY2VzcyIsImVycm9yIiwic2FmZVBhcnNlIiwiRXJyb3IiLCJpbnRlcm9wUGFyc2VBc3luYyIsImludGVyb3BTYWZlUGFyc2UiLCJpbnRlcm9wUGFyc2UiLCJnZXRTY2hlbWFEZXNjcmlwdGlvbiIsImdldCIsImRlc2NyaXB0aW9uIiwidW5kZWZpbmVkIiwiaXNTaGFwZWxlc3Nab2RTY2hlbWEiLCJ0eXBlTmFtZSIsInNoYXBlIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInR5cGUiLCJpc1NpbXBsZVN0cmluZ1pvZFNjaGVtYSIsImlzWm9kT2JqZWN0VjMiLCJpc1pvZE9iamVjdFY0IiwiaXNab2RBcnJheVY0IiwiaXNJbnRlcm9wWm9kT2JqZWN0IiwiZ2V0SW50ZXJvcFpvZE9iamVjdFNoYXBlIiwiZXh0ZW5kSW50ZXJvcFpvZE9iamVjdCIsImV4dGVuc2lvbiIsImV4dGVuZCIsImludGVyb3Bab2RPYmplY3RQYXJ0aWFsIiwicGFydGlhbCIsImludGVyb3Bab2RPYmplY3RTdHJpY3QiLCJyZWN1cnNpdmUiLCJzdHJpY3QiLCJvdXRwdXRTaGFwZSIsImtleSIsImtleVNjaGVtYSIsImVudHJpZXMiLCJvdXRwdXRTY2hlbWEiLCJlbGVtZW50U2NoZW1hIiwiZWxlbWVudCIsIm1ldGEiLCJhZGQiLCJtb2RpZmllZFNjaGVtYSIsImNhdGNoYWxsIiwiaW50ZXJvcFpvZE9iamVjdFBhc3N0aHJvdWdoIiwicGFzc3Rocm91Z2giLCJnZXRJbnRlcm9wWm9kRGVmYXVsdEdldHRlciIsImRlZmF1bHRWYWx1ZSIsImlzWm9kVHJhbnNmb3JtVjMiLCJpc1pvZFRyYW5zZm9ybVY0IiwiaW50ZXJvcFpvZFRyYW5zZm9ybUlucHV0U2NoZW1hIiwiaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/types/zod.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/documents.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/documents.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/documents/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2RvY3VtZW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZG9jdW1lbnRzLmpzPzZkMTgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L2RvY3VtZW50cy9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/documents.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/embeddings.js":
/*!****************************************************!*\
  !*** ./node_modules/@langchain/core/embeddings.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* reexport safe */ _dist_embeddings_js__WEBPACK_IMPORTED_MODULE_0__.Embeddings)\n/* harmony export */ });\n/* harmony import */ var _dist_embeddings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/embeddings.js */ \"(rsc)/./node_modules/@langchain/core/dist/embeddings.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2VtYmVkZGluZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9lbWJlZGRpbmdzLmpzP2ZhMjgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L2VtYmVkZGluZ3MuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/language_models/base.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/language_models/base.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangChain: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseLangChain),\n/* harmony export */   BaseLanguageModel: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseLanguageModel),\n/* harmony export */   calculateMaxTokens: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.calculateMaxTokens),\n/* harmony export */   getEmbeddingContextSize: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.getEmbeddingContextSize),\n/* harmony export */   getModelContextSize: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.getModelContextSize),\n/* harmony export */   getModelNameForTiktoken: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.getModelNameForTiktoken),\n/* harmony export */   isOpenAITool: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.isOpenAITool)\n/* harmony export */ });\n/* harmony import */ var _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/language_models/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanM/NzY1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L2xhbmd1YWdlX21vZGVscy9iYXNlLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/language_models/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/language_models/chat_models.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/language_models/chat_models.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.SimpleChatModel),\n/* harmony export */   createChatMessageChunkEncoderStream: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.createChatMessageChunkEncoderStream)\n/* harmony export */ });\n/* harmony import */ var _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/language_models/chat_models.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLmpzP2MyYWQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHMuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/language_models/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/messages.js":
/*!**************************************************!*\
  !*** ./node_modules/@langchain/core/messages.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessageChunk),\n/* harmony export */   RemoveMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.RemoveMessage),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessageChunk),\n/* harmony export */   _isMessageFieldWithRole: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._isMessageFieldWithRole),\n/* harmony export */   _mergeDicts: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts),\n/* harmony export */   _mergeLists: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeLists),\n/* harmony export */   _mergeObj: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeObj),\n/* harmony export */   _mergeStatus: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeStatus),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.convertToChunk),\n/* harmony export */   convertToOpenAIImageBlock: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.convertToOpenAIImageBlock),\n/* harmony export */   convertToProviderContentBlock: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.convertToProviderContentBlock),\n/* harmony export */   defaultTextSplitter: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.defaultTextSplitter),\n/* harmony export */   filterMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.filterMessages),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString),\n/* harmony export */   isAIMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessage),\n/* harmony export */   isAIMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessageChunk),\n/* harmony export */   isBase64ContentBlock: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBase64ContentBlock),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessageChunk),\n/* harmony export */   isChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isChatMessage),\n/* harmony export */   isChatMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isChatMessageChunk),\n/* harmony export */   isDataContentBlock: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isDataContentBlock),\n/* harmony export */   isFunctionMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isFunctionMessage),\n/* harmony export */   isFunctionMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isFunctionMessageChunk),\n/* harmony export */   isHumanMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isHumanMessage),\n/* harmony export */   isHumanMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isHumanMessageChunk),\n/* harmony export */   isIDContentBlock: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isIDContentBlock),\n/* harmony export */   isOpenAIToolCallArray: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isOpenAIToolCallArray),\n/* harmony export */   isPlainTextContentBlock: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isPlainTextContentBlock),\n/* harmony export */   isSystemMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isSystemMessage),\n/* harmony export */   isSystemMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isSystemMessageChunk),\n/* harmony export */   isToolMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isToolMessage),\n/* harmony export */   isToolMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isToolMessageChunk),\n/* harmony export */   isURLContentBlock: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isURLContentBlock),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessagesToChatMessages),\n/* harmony export */   mergeContent: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent),\n/* harmony export */   mergeMessageRuns: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mergeMessageRuns),\n/* harmony export */   parseBase64DataUrl: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.parseBase64DataUrl),\n/* harmony export */   parseMimeType: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.parseMimeType),\n/* harmony export */   trimMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.trimMessages)\n/* harmony export */ });\n/* harmony import */ var _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXMuanM/ODI5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvbWVzc2FnZXMvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/messages.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/client.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/client.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AutoBatchQueue: () => (/* binding */ AutoBatchQueue),\n/* harmony export */   Client: () => (/* binding */ Client),\n/* harmony export */   DEFAULT_MAX_SIZE_BYTES: () => (/* binding */ DEFAULT_MAX_SIZE_BYTES),\n/* harmony export */   DEFAULT_UNCOMPRESSED_BATCH_SIZE_LIMIT_BYTES: () => (/* binding */ DEFAULT_UNCOMPRESSED_BATCH_SIZE_LIMIT_BYTES),\n/* harmony export */   mergeRuntimeEnvIntoRun: () => (/* binding */ mergeRuntimeEnvIntoRun)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _experimental_otel_translator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./experimental/otel/translator.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/experimental/otel/translator.js\");\n/* harmony import */ var _singletons_otel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./singletons/otel.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/otel.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/async_caller.js\");\n/* harmony import */ var _utils_messages_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/messages.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/messages.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/env.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/env.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/index.js\");\n/* harmony import */ var _utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/_uuid.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/_uuid.js\");\n/* harmony import */ var _utils_warn_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/warn.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/warn.js\");\n/* harmony import */ var _utils_prompts_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/prompts.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/prompts.js\");\n/* harmony import */ var _utils_error_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils/error.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/error.js\");\n/* harmony import */ var _singletons_fetch_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./singletons/fetch.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/fetch.js\");\n/* harmony import */ var _utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utils/fast-safe-stringify/index.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/fast-safe-stringify/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mergeRuntimeEnvIntoRun(run, cachedEnvVars) {\n    const runtimeEnv = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getRuntimeEnvironment)();\n    const envVars = cachedEnvVars ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getLangSmithEnvVarsMetadata)();\n    const extra = run.extra ?? {};\n    const metadata = extra.metadata;\n    run.extra = {\n        ...extra,\n        runtime: {\n            ...runtimeEnv,\n            ...extra?.runtime\n        },\n        metadata: {\n            ...envVars,\n            ...envVars.revision_id || \"revision_id\" in run && run.revision_id ? {\n                revision_id: (\"revision_id\" in run ? run.revision_id : undefined) ?? envVars.revision_id\n            } : {},\n            ...metadata\n        }\n    };\n    return run;\n}\nconst getTracingSamplingRate = (configRate)=>{\n    const samplingRateStr = configRate?.toString() ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getLangSmithEnvironmentVariable)(\"TRACING_SAMPLING_RATE\");\n    if (samplingRateStr === undefined) {\n        return undefined;\n    }\n    const samplingRate = parseFloat(samplingRateStr);\n    if (samplingRate < 0 || samplingRate > 1) {\n        throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${samplingRate}`);\n    }\n    return samplingRate;\n};\n// utility functions\nconst isLocalhost = (url)=>{\n    const strippedUrl = url.replace(\"http://\", \"\").replace(\"https://\", \"\");\n    const hostname = strippedUrl.split(\"/\")[0].split(\":\")[0];\n    return hostname === \"localhost\" || hostname === \"127.0.0.1\" || hostname === \"::1\";\n};\nasync function toArray(iterable) {\n    const result = [];\n    for await (const item of iterable){\n        result.push(item);\n    }\n    return result;\n}\nfunction trimQuotes(str) {\n    if (str === undefined) {\n        return undefined;\n    }\n    return str.trim().replace(/^\"(.*)\"$/, \"$1\").replace(/^'(.*)'$/, \"$1\");\n}\nconst handle429 = async (response)=>{\n    if (response?.status === 429) {\n        const retryAfter = parseInt(response.headers.get(\"retry-after\") ?? \"10\", 10) * 1000;\n        if (retryAfter > 0) {\n            await new Promise((resolve)=>setTimeout(resolve, retryAfter));\n            // Return directly after calling this check\n            return true;\n        }\n    }\n    // Fall back to existing status checks\n    return false;\n};\nfunction _formatFeedbackScore(score) {\n    if (typeof score === \"number\") {\n        // Truncate at 4 decimal places\n        return Number(score.toFixed(4));\n    }\n    return score;\n}\nconst DEFAULT_UNCOMPRESSED_BATCH_SIZE_LIMIT_BYTES = 24 * 1024 * 1024;\n/** Default maximum memory (1GB) for queue size limits. */ const DEFAULT_MAX_SIZE_BYTES = 1024 * 1024 * 1024; // 1GB\nconst SERVER_INFO_REQUEST_TIMEOUT_MS = 10000;\n/** Maximum number of operations to batch in a single request. */ const DEFAULT_BATCH_SIZE_LIMIT = 100;\nconst DEFAULT_API_URL = \"https://api.smith.langchain.com\";\nclass AutoBatchQueue {\n    constructor(maxSizeBytes){\n        Object.defineProperty(this, \"items\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"sizeBytes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"maxSizeBytes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxSizeBytes = maxSizeBytes ?? DEFAULT_MAX_SIZE_BYTES;\n    }\n    peek() {\n        return this.items[0];\n    }\n    push(item) {\n        let itemPromiseResolve;\n        const itemPromise = new Promise((resolve)=>{\n            // Setting itemPromiseResolve is synchronous with promise creation:\n            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/Promise\n            itemPromiseResolve = resolve;\n        });\n        const size = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(item.item, `Serializing run with id: ${item.item.id}`).length;\n        // Check if adding this item would exceed the size limit\n        // Allow the run if the queue is empty (to support large single traces)\n        if (this.sizeBytes + size > this.maxSizeBytes && this.items.length > 0) {\n            console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${item.item.id}. ` + `Current queue size: ${this.sizeBytes} bytes, attempted addition: ${size} bytes.`);\n            // Resolve immediately to avoid blocking caller\n            itemPromiseResolve();\n            return itemPromise;\n        }\n        this.items.push({\n            action: item.action,\n            payload: item.item,\n            otelContext: item.otelContext,\n            apiKey: item.apiKey,\n            apiUrl: item.apiUrl,\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            itemPromiseResolve: itemPromiseResolve,\n            itemPromise,\n            size\n        });\n        this.sizeBytes += size;\n        return itemPromise;\n    }\n    pop({ upToSizeBytes, upToSize }) {\n        if (upToSizeBytes < 1) {\n            throw new Error(\"Number of bytes to pop off may not be less than 1.\");\n        }\n        const popped = [];\n        let poppedSizeBytes = 0;\n        // Pop items until we reach or exceed the size limit\n        while(poppedSizeBytes + (this.peek()?.size ?? 0) < upToSizeBytes && this.items.length > 0 && popped.length < upToSize){\n            const item = this.items.shift();\n            if (item) {\n                popped.push(item);\n                poppedSizeBytes += item.size;\n                this.sizeBytes -= item.size;\n            }\n        }\n        // If there is an item on the queue we were unable to pop,\n        // just return it as a single batch.\n        if (popped.length === 0 && this.items.length > 0) {\n            const item = this.items.shift();\n            popped.push(item);\n            poppedSizeBytes += item.size;\n            this.sizeBytes -= item.size;\n        }\n        return [\n            popped.map((it)=>({\n                    action: it.action,\n                    item: it.payload,\n                    otelContext: it.otelContext,\n                    apiKey: it.apiKey,\n                    apiUrl: it.apiUrl,\n                    size: it.size\n                })),\n            ()=>popped.forEach((it)=>it.itemPromiseResolve())\n        ];\n    }\n}\nclass Client {\n    get _fetch() {\n        return this.fetchImplementation || (0,_singletons_fetch_js__WEBPACK_IMPORTED_MODULE_10__._getFetchImplementation)(this.debug);\n    }\n    constructor(config = {}){\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"webUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"workspaceId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"batchIngestCaller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timeout_ms\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_tenantId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"hideInputs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"hideOutputs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tracingSampleRate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"filteredPostUuids\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Set()\n        });\n        Object.defineProperty(this, \"autoBatchTracing\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"autoBatchQueue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"autoBatchTimeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"autoBatchAggregationDelayMs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 250\n        });\n        Object.defineProperty(this, \"batchSizeBytesLimit\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"batchSizeLimit\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fetchOptions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"settings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"blockOnRootRunFinalization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGSMITH_TRACING_BACKGROUND\") === \"false\"\n        });\n        Object.defineProperty(this, \"traceBatchConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 5\n        });\n        Object.defineProperty(this, \"_serverInfo\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"_getServerInfoPromise\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"manualFlushMode\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"langSmithToOTELTranslator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fetchImplementation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"cachedLSEnvVarsForMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"multipartStreamingDisabled\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"debug\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGSMITH_DEBUG\") === \"true\"\n        });\n        const defaultConfig = Client.getDefaultClientConfig();\n        this.tracingSampleRate = getTracingSamplingRate(config.tracingSamplingRate);\n        this.apiUrl = trimQuotes(config.apiUrl ?? defaultConfig.apiUrl) ?? \"\";\n        if (this.apiUrl.endsWith(\"/\")) {\n            this.apiUrl = this.apiUrl.slice(0, -1);\n        }\n        this.apiKey = trimQuotes(config.apiKey ?? defaultConfig.apiKey);\n        this.webUrl = trimQuotes(config.webUrl ?? defaultConfig.webUrl);\n        if (this.webUrl?.endsWith(\"/\")) {\n            this.webUrl = this.webUrl.slice(0, -1);\n        }\n        this.workspaceId = trimQuotes(config.workspaceId ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getLangSmithEnvironmentVariable)(\"WORKSPACE_ID\"));\n        this.timeout_ms = config.timeout_ms ?? 90000;\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_2__.AsyncCaller({\n            ...config.callerOptions ?? {},\n            maxRetries: 4,\n            debug: config.debug ?? this.debug\n        });\n        this.traceBatchConcurrency = config.traceBatchConcurrency ?? this.traceBatchConcurrency;\n        if (this.traceBatchConcurrency < 1) {\n            throw new Error(\"Trace batch concurrency must be positive.\");\n        }\n        this.debug = config.debug ?? this.debug;\n        this.fetchImplementation = config.fetchImplementation;\n        // Use maxIngestMemoryBytes for both queues\n        const maxMemory = config.maxIngestMemoryBytes ?? DEFAULT_MAX_SIZE_BYTES;\n        this.batchIngestCaller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_2__.AsyncCaller({\n            maxRetries: 4,\n            maxConcurrency: this.traceBatchConcurrency,\n            maxQueueSizeBytes: maxMemory,\n            ...config.callerOptions ?? {},\n            onFailedResponseHook: handle429,\n            debug: config.debug ?? this.debug\n        });\n        this.hideInputs = config.hideInputs ?? config.anonymizer ?? defaultConfig.hideInputs;\n        this.hideOutputs = config.hideOutputs ?? config.anonymizer ?? defaultConfig.hideOutputs;\n        this.autoBatchTracing = config.autoBatchTracing ?? this.autoBatchTracing;\n        this.autoBatchQueue = new AutoBatchQueue(maxMemory);\n        this.blockOnRootRunFinalization = config.blockOnRootRunFinalization ?? this.blockOnRootRunFinalization;\n        this.batchSizeBytesLimit = config.batchSizeBytesLimit;\n        this.batchSizeLimit = config.batchSizeLimit;\n        this.fetchOptions = config.fetchOptions || {};\n        this.manualFlushMode = config.manualFlushMode ?? this.manualFlushMode;\n        if ((0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getOtelEnabled)()) {\n            this.langSmithToOTELTranslator = new _experimental_otel_translator_js__WEBPACK_IMPORTED_MODULE_0__.LangSmithToOTELTranslator();\n        }\n        // Cache metadata env vars once during construction to avoid repeatedly scanning process.env\n        this.cachedLSEnvVarsForMetadata = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getLangSmithEnvVarsMetadata)();\n    }\n    static getDefaultClientConfig() {\n        const apiKey = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getLangSmithEnvironmentVariable)(\"API_KEY\");\n        const apiUrl = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getLangSmithEnvironmentVariable)(\"ENDPOINT\") ?? DEFAULT_API_URL;\n        const hideInputs = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getLangSmithEnvironmentVariable)(\"HIDE_INPUTS\") === \"true\";\n        const hideOutputs = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getLangSmithEnvironmentVariable)(\"HIDE_OUTPUTS\") === \"true\";\n        return {\n            apiUrl: apiUrl,\n            apiKey: apiKey,\n            webUrl: undefined,\n            hideInputs: hideInputs,\n            hideOutputs: hideOutputs\n        };\n    }\n    getHostUrl() {\n        if (this.webUrl) {\n            return this.webUrl;\n        } else if (isLocalhost(this.apiUrl)) {\n            this.webUrl = \"http://localhost:3000\";\n            return this.webUrl;\n        } else if (this.apiUrl.endsWith(\"/api/v1\")) {\n            this.webUrl = this.apiUrl.replace(\"/api/v1\", \"\");\n            return this.webUrl;\n        } else if (this.apiUrl.includes(\"/api\") && !this.apiUrl.split(\".\", 1)[0].endsWith(\"api\")) {\n            this.webUrl = this.apiUrl.replace(\"/api\", \"\");\n            return this.webUrl;\n        } else if (this.apiUrl.split(\".\", 1)[0].includes(\"dev\")) {\n            this.webUrl = \"https://dev.smith.langchain.com\";\n            return this.webUrl;\n        } else if (this.apiUrl.split(\".\", 1)[0].includes(\"eu\")) {\n            this.webUrl = \"https://eu.smith.langchain.com\";\n            return this.webUrl;\n        } else if (this.apiUrl.split(\".\", 1)[0].includes(\"beta\")) {\n            this.webUrl = \"https://beta.smith.langchain.com\";\n            return this.webUrl;\n        } else {\n            this.webUrl = \"https://smith.langchain.com\";\n            return this.webUrl;\n        }\n    }\n    get headers() {\n        const headers = {\n            \"User-Agent\": `langsmith-js/${_index_js__WEBPACK_IMPORTED_MODULE_5__.__version__}`\n        };\n        if (this.apiKey) {\n            headers[\"x-api-key\"] = `${this.apiKey}`;\n        }\n        if (this.workspaceId) {\n            headers[\"x-tenant-id\"] = this.workspaceId;\n        }\n        return headers;\n    }\n    _getPlatformEndpointPath(path) {\n        // Check if apiUrl already ends with /v1 or /v1/ to avoid double /v1/v1/ paths\n        const needsV1Prefix = this.apiUrl.slice(-3) !== \"/v1\" && this.apiUrl.slice(-4) !== \"/v1/\";\n        return needsV1Prefix ? `/v1/platform/${path}` : `/platform/${path}`;\n    }\n    async processInputs(inputs) {\n        if (this.hideInputs === false) {\n            return inputs;\n        }\n        if (this.hideInputs === true) {\n            return {};\n        }\n        if (typeof this.hideInputs === \"function\") {\n            return this.hideInputs(inputs);\n        }\n        return inputs;\n    }\n    async processOutputs(outputs) {\n        if (this.hideOutputs === false) {\n            return outputs;\n        }\n        if (this.hideOutputs === true) {\n            return {};\n        }\n        if (typeof this.hideOutputs === \"function\") {\n            return this.hideOutputs(outputs);\n        }\n        return outputs;\n    }\n    async prepareRunCreateOrUpdateInputs(run) {\n        const runParams = {\n            ...run\n        };\n        if (runParams.inputs !== undefined) {\n            runParams.inputs = await this.processInputs(runParams.inputs);\n        }\n        if (runParams.outputs !== undefined) {\n            runParams.outputs = await this.processOutputs(runParams.outputs);\n        }\n        return runParams;\n    }\n    async _getResponse(path, queryParams) {\n        const paramsString = queryParams?.toString() ?? \"\";\n        const url = `${this.apiUrl}${path}?${paramsString}`;\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(url, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, `fetch ${path}`);\n            return res;\n        });\n        return response;\n    }\n    async _get(path, queryParams) {\n        const response = await this._getResponse(path, queryParams);\n        return response.json();\n    }\n    async *_getPaginated(path, queryParams = new URLSearchParams(), transform) {\n        let offset = Number(queryParams.get(\"offset\")) || 0;\n        const limit = Number(queryParams.get(\"limit\")) || 100;\n        while(true){\n            queryParams.set(\"offset\", String(offset));\n            queryParams.set(\"limit\", String(limit));\n            const url = `${this.apiUrl}${path}?${queryParams}`;\n            const response = await this.caller.call(async ()=>{\n                const res = await this._fetch(url, {\n                    method: \"GET\",\n                    headers: this.headers,\n                    signal: AbortSignal.timeout(this.timeout_ms),\n                    ...this.fetchOptions\n                });\n                await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, `fetch ${path}`);\n                return res;\n            });\n            const items = transform ? transform(await response.json()) : await response.json();\n            if (items.length === 0) {\n                break;\n            }\n            yield items;\n            if (items.length < limit) {\n                break;\n            }\n            offset += items.length;\n        }\n    }\n    async *_getCursorPaginatedList(path, body = null, requestMethod = \"POST\", dataKey = \"runs\") {\n        const bodyParams = body ? {\n            ...body\n        } : {};\n        while(true){\n            const body = JSON.stringify(bodyParams);\n            const response = await this.caller.call(async ()=>{\n                const res = await this._fetch(`${this.apiUrl}${path}`, {\n                    method: requestMethod,\n                    headers: {\n                        ...this.headers,\n                        \"Content-Type\": \"application/json\"\n                    },\n                    signal: AbortSignal.timeout(this.timeout_ms),\n                    ...this.fetchOptions,\n                    body\n                });\n                await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, `fetch ${path}`);\n                return res;\n            });\n            const responseBody = await response.json();\n            if (!responseBody) {\n                break;\n            }\n            if (!responseBody[dataKey]) {\n                break;\n            }\n            yield responseBody[dataKey];\n            const cursors = responseBody.cursors;\n            if (!cursors) {\n                break;\n            }\n            if (!cursors.next) {\n                break;\n            }\n            bodyParams.cursor = cursors.next;\n        }\n    }\n    // Allows mocking for tests\n    _shouldSample() {\n        if (this.tracingSampleRate === undefined) {\n            return true;\n        }\n        return Math.random() < this.tracingSampleRate;\n    }\n    _filterForSampling(runs, patch = false) {\n        if (this.tracingSampleRate === undefined) {\n            return runs;\n        }\n        if (patch) {\n            const sampled = [];\n            for (const run of runs){\n                if (!this.filteredPostUuids.has(run.trace_id)) {\n                    sampled.push(run);\n                } else if (run.id === run.trace_id) {\n                    this.filteredPostUuids.delete(run.trace_id);\n                }\n            }\n            return sampled;\n        } else {\n            // For new runs, sample at trace level to maintain consistency\n            const sampled = [];\n            for (const run of runs){\n                const traceId = run.trace_id ?? run.id;\n                // If we've already made a decision about this trace, follow it\n                if (this.filteredPostUuids.has(traceId)) {\n                    continue;\n                }\n                // For new traces, apply sampling\n                if (run.id === traceId) {\n                    if (this._shouldSample()) {\n                        sampled.push(run);\n                    } else {\n                        this.filteredPostUuids.add(traceId);\n                    }\n                } else {\n                    // Child runs follow their trace's sampling decision\n                    sampled.push(run);\n                }\n            }\n            return sampled;\n        }\n    }\n    async _getBatchSizeLimitBytes() {\n        const serverInfo = await this._ensureServerInfo();\n        return this.batchSizeBytesLimit ?? serverInfo.batch_ingest_config?.size_limit_bytes ?? DEFAULT_UNCOMPRESSED_BATCH_SIZE_LIMIT_BYTES;\n    }\n    /**\n     * Get the maximum number of operations to batch in a single request.\n     */ async _getBatchSizeLimit() {\n        const serverInfo = await this._ensureServerInfo();\n        return this.batchSizeLimit ?? serverInfo.batch_ingest_config?.size_limit ?? DEFAULT_BATCH_SIZE_LIMIT;\n    }\n    async _getDatasetExamplesMultiPartSupport() {\n        const serverInfo = await this._ensureServerInfo();\n        return serverInfo.instance_flags?.dataset_examples_multipart_enabled ?? false;\n    }\n    drainAutoBatchQueue({ batchSizeLimitBytes, batchSizeLimit }) {\n        const promises = [];\n        while(this.autoBatchQueue.items.length > 0){\n            const [batch, done] = this.autoBatchQueue.pop({\n                upToSizeBytes: batchSizeLimitBytes,\n                upToSize: batchSizeLimit\n            });\n            if (!batch.length) {\n                done();\n                break;\n            }\n            const batchesByDestination = batch.reduce((acc, item)=>{\n                const apiUrl = item.apiUrl ?? this.apiUrl;\n                const apiKey = item.apiKey ?? this.apiKey;\n                const isDefault = item.apiKey === this.apiKey && item.apiUrl === this.apiUrl;\n                const batchKey = isDefault ? \"default\" : `${apiUrl}|${apiKey}`;\n                if (!acc[batchKey]) {\n                    acc[batchKey] = [];\n                }\n                acc[batchKey].push(item);\n                return acc;\n            }, {});\n            const batchPromises = [];\n            for (const [batchKey, batch] of Object.entries(batchesByDestination)){\n                const batchPromise = this._processBatch(batch, {\n                    apiUrl: batchKey === \"default\" ? undefined : batchKey.split(\"|\")[0],\n                    apiKey: batchKey === \"default\" ? undefined : batchKey.split(\"|\")[1]\n                });\n                batchPromises.push(batchPromise);\n            }\n            // Wait for all batches to complete, then call the overall done callback\n            const allBatchesPromise = Promise.all(batchPromises).finally(done);\n            promises.push(allBatchesPromise);\n        }\n        return Promise.all(promises);\n    }\n    async _processBatch(batch, options) {\n        if (!batch.length) {\n            return;\n        }\n        // Calculate total batch size for queue tracking\n        const batchSizeBytes = batch.reduce((sum, item)=>sum + (item.size ?? 0), 0);\n        try {\n            if (this.langSmithToOTELTranslator !== undefined) {\n                this._sendBatchToOTELTranslator(batch);\n            } else {\n                const ingestParams = {\n                    runCreates: batch.filter((item)=>item.action === \"create\").map((item)=>item.item),\n                    runUpdates: batch.filter((item)=>item.action === \"update\").map((item)=>item.item)\n                };\n                const serverInfo = await this._ensureServerInfo();\n                if (serverInfo?.batch_ingest_config?.use_multipart_endpoint) {\n                    const useGzip = serverInfo?.instance_flags?.gzip_body_enabled;\n                    await this.multipartIngestRuns(ingestParams, {\n                        ...options,\n                        useGzip,\n                        sizeBytes: batchSizeBytes\n                    });\n                } else {\n                    await this.batchIngestRuns(ingestParams, {\n                        ...options,\n                        sizeBytes: batchSizeBytes\n                    });\n                }\n            }\n        } catch (e) {\n            console.error(\"Error exporting batch:\", e);\n        }\n    }\n    _sendBatchToOTELTranslator(batch) {\n        if (this.langSmithToOTELTranslator !== undefined) {\n            const otelContextMap = new Map();\n            const operations = [];\n            for (const item of batch){\n                if (item.item.id && item.otelContext) {\n                    otelContextMap.set(item.item.id, item.otelContext);\n                    if (item.action === \"create\") {\n                        operations.push({\n                            operation: \"post\",\n                            id: item.item.id,\n                            trace_id: item.item.trace_id ?? item.item.id,\n                            run: item.item\n                        });\n                    } else {\n                        operations.push({\n                            operation: \"patch\",\n                            id: item.item.id,\n                            trace_id: item.item.trace_id ?? item.item.id,\n                            run: item.item\n                        });\n                    }\n                }\n            }\n            this.langSmithToOTELTranslator.exportBatch(operations, otelContextMap);\n        }\n    }\n    async processRunOperation(item) {\n        clearTimeout(this.autoBatchTimeout);\n        this.autoBatchTimeout = undefined;\n        item.item = mergeRuntimeEnvIntoRun(item.item, this.cachedLSEnvVarsForMetadata);\n        const itemPromise = this.autoBatchQueue.push(item);\n        if (this.manualFlushMode) {\n            // Rely on manual flushing in serverless environments\n            return itemPromise;\n        }\n        const sizeLimitBytes = await this._getBatchSizeLimitBytes();\n        const sizeLimit = await this._getBatchSizeLimit();\n        if (this.autoBatchQueue.sizeBytes > sizeLimitBytes || this.autoBatchQueue.items.length > sizeLimit) {\n            void this.drainAutoBatchQueue({\n                batchSizeLimitBytes: sizeLimitBytes,\n                batchSizeLimit: sizeLimit\n            });\n        }\n        if (this.autoBatchQueue.items.length > 0) {\n            this.autoBatchTimeout = setTimeout(()=>{\n                this.autoBatchTimeout = undefined;\n                void this.drainAutoBatchQueue({\n                    batchSizeLimitBytes: sizeLimitBytes,\n                    batchSizeLimit: sizeLimit\n                });\n            }, this.autoBatchAggregationDelayMs);\n        }\n        return itemPromise;\n    }\n    async _getServerInfo() {\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/info`, {\n                method: \"GET\",\n                headers: {\n                    Accept: \"application/json\"\n                },\n                signal: AbortSignal.timeout(SERVER_INFO_REQUEST_TIMEOUT_MS),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"get server info\");\n            return res;\n        });\n        const json = await response.json();\n        if (this.debug) {\n            console.log(\"\\n=== LangSmith Server Configuration ===\\n\" + JSON.stringify(json, null, 2) + \"\\n\");\n        }\n        return json;\n    }\n    async _ensureServerInfo() {\n        if (this._getServerInfoPromise === undefined) {\n            this._getServerInfoPromise = (async ()=>{\n                if (this._serverInfo === undefined) {\n                    try {\n                        this._serverInfo = await this._getServerInfo();\n                    } catch (e) {\n                        console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status ?? \"Unspecified status code\"} ${e.message}`);\n                    }\n                }\n                return this._serverInfo ?? {};\n            })();\n        }\n        return this._getServerInfoPromise.then((serverInfo)=>{\n            if (this._serverInfo === undefined) {\n                this._getServerInfoPromise = undefined;\n            }\n            return serverInfo;\n        });\n    }\n    async _getSettings() {\n        if (!this.settings) {\n            this.settings = this._get(\"/settings\");\n        }\n        return await this.settings;\n    }\n    /**\n     * Flushes current queued traces.\n     */ async flush() {\n        const sizeLimitBytes = await this._getBatchSizeLimitBytes();\n        const sizeLimit = await this._getBatchSizeLimit();\n        await this.drainAutoBatchQueue({\n            batchSizeLimitBytes: sizeLimitBytes,\n            batchSizeLimit: sizeLimit\n        });\n    }\n    _cloneCurrentOTELContext() {\n        const otel_trace = (0,_singletons_otel_js__WEBPACK_IMPORTED_MODULE_1__.getOTELTrace)();\n        const otel_context = (0,_singletons_otel_js__WEBPACK_IMPORTED_MODULE_1__.getOTELContext)();\n        if (this.langSmithToOTELTranslator !== undefined) {\n            const currentSpan = otel_trace.getActiveSpan();\n            if (currentSpan) {\n                return otel_trace.setSpan(otel_context.active(), currentSpan);\n            }\n        }\n        return undefined;\n    }\n    async createRun(run, options) {\n        if (!this._filterForSampling([\n            run\n        ]).length) {\n            return;\n        }\n        const headers = {\n            ...this.headers,\n            \"Content-Type\": \"application/json\"\n        };\n        const session_name = run.project_name;\n        delete run.project_name;\n        const runCreate = await this.prepareRunCreateOrUpdateInputs({\n            session_name,\n            ...run,\n            start_time: run.start_time ?? Date.now()\n        });\n        if (this.autoBatchTracing && runCreate.trace_id !== undefined && runCreate.dotted_order !== undefined) {\n            const otelContext = this._cloneCurrentOTELContext();\n            void this.processRunOperation({\n                action: \"create\",\n                item: runCreate,\n                otelContext,\n                apiKey: options?.apiKey,\n                apiUrl: options?.apiUrl\n            }).catch(console.error);\n            return;\n        }\n        const mergedRunCreateParam = mergeRuntimeEnvIntoRun(runCreate, this.cachedLSEnvVarsForMetadata);\n        if (options?.apiKey !== undefined) {\n            headers[\"x-api-key\"] = options.apiKey;\n        }\n        if (options?.workspaceId !== undefined) {\n            headers[\"x-tenant-id\"] = options.workspaceId;\n        }\n        const body = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(mergedRunCreateParam, `Creating run with id: ${mergedRunCreateParam.id}`);\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${options?.apiUrl ?? this.apiUrl}/runs`, {\n                method: \"POST\",\n                headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"create run\", true);\n            return res;\n        });\n    }\n    /**\n     * Batch ingest/upsert multiple runs in the Langsmith system.\n     * @param runs\n     */ async batchIngestRuns({ runCreates, runUpdates }, options) {\n        if (runCreates === undefined && runUpdates === undefined) {\n            return;\n        }\n        let preparedCreateParams = await Promise.all(runCreates?.map((create)=>this.prepareRunCreateOrUpdateInputs(create)) ?? []);\n        let preparedUpdateParams = await Promise.all(runUpdates?.map((update)=>this.prepareRunCreateOrUpdateInputs(update)) ?? []);\n        if (preparedCreateParams.length > 0 && preparedUpdateParams.length > 0) {\n            const createById = preparedCreateParams.reduce((params, run)=>{\n                if (!run.id) {\n                    return params;\n                }\n                params[run.id] = run;\n                return params;\n            }, {});\n            const standaloneUpdates = [];\n            for (const updateParam of preparedUpdateParams){\n                if (updateParam.id !== undefined && createById[updateParam.id]) {\n                    createById[updateParam.id] = {\n                        ...createById[updateParam.id],\n                        ...updateParam\n                    };\n                } else {\n                    standaloneUpdates.push(updateParam);\n                }\n            }\n            preparedCreateParams = Object.values(createById);\n            preparedUpdateParams = standaloneUpdates;\n        }\n        const rawBatch = {\n            post: preparedCreateParams,\n            patch: preparedUpdateParams\n        };\n        if (!rawBatch.post.length && !rawBatch.patch.length) {\n            return;\n        }\n        const batchChunks = {\n            post: [],\n            patch: []\n        };\n        for (const k of [\n            \"post\",\n            \"patch\"\n        ]){\n            const key = k;\n            const batchItems = rawBatch[key].reverse();\n            let batchItem = batchItems.pop();\n            while(batchItem !== undefined){\n                // Type is wrong but this is a deprecated code path anyway\n                batchChunks[key].push(batchItem);\n                batchItem = batchItems.pop();\n            }\n        }\n        if (batchChunks.post.length > 0 || batchChunks.patch.length > 0) {\n            const runIds = batchChunks.post.map((item)=>item.id).concat(batchChunks.patch.map((item)=>item.id)).join(\",\");\n            await this._postBatchIngestRuns((0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(batchChunks, `Ingesting runs with ids: ${runIds}`), options);\n        }\n    }\n    async _postBatchIngestRuns(body, options) {\n        const headers = {\n            ...this.headers,\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\"\n        };\n        if (options?.apiKey !== undefined) {\n            headers[\"x-api-key\"] = options.apiKey;\n        }\n        await this.batchIngestCaller.callWithOptions({\n            sizeBytes: options?.sizeBytes\n        }, async ()=>{\n            const res = await this._fetch(`${options?.apiUrl ?? this.apiUrl}/runs/batch`, {\n                method: \"POST\",\n                headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"batch create run\", true);\n            return res;\n        });\n    }\n    /**\n     * Batch ingest/upsert multiple runs in the Langsmith system.\n     * @param runs\n     */ async multipartIngestRuns({ runCreates, runUpdates }, options) {\n        if (runCreates === undefined && runUpdates === undefined) {\n            return;\n        }\n        // transform and convert to dicts\n        const allAttachments = {};\n        let preparedCreateParams = [];\n        for (const create of runCreates ?? []){\n            const preparedCreate = await this.prepareRunCreateOrUpdateInputs(create);\n            if (preparedCreate.id !== undefined && preparedCreate.attachments !== undefined) {\n                allAttachments[preparedCreate.id] = preparedCreate.attachments;\n            }\n            delete preparedCreate.attachments;\n            preparedCreateParams.push(preparedCreate);\n        }\n        let preparedUpdateParams = [];\n        for (const update of runUpdates ?? []){\n            preparedUpdateParams.push(await this.prepareRunCreateOrUpdateInputs(update));\n        }\n        // require trace_id and dotted_order\n        const invalidRunCreate = preparedCreateParams.find((runCreate)=>{\n            return runCreate.trace_id === undefined || runCreate.dotted_order === undefined;\n        });\n        if (invalidRunCreate !== undefined) {\n            throw new Error(`Multipart ingest requires \"trace_id\" and \"dotted_order\" to be set when creating a run`);\n        }\n        const invalidRunUpdate = preparedUpdateParams.find((runUpdate)=>{\n            return runUpdate.trace_id === undefined || runUpdate.dotted_order === undefined;\n        });\n        if (invalidRunUpdate !== undefined) {\n            throw new Error(`Multipart ingest requires \"trace_id\" and \"dotted_order\" to be set when updating a run`);\n        }\n        // combine post and patch dicts where possible\n        if (preparedCreateParams.length > 0 && preparedUpdateParams.length > 0) {\n            const createById = preparedCreateParams.reduce((params, run)=>{\n                if (!run.id) {\n                    return params;\n                }\n                params[run.id] = run;\n                return params;\n            }, {});\n            const standaloneUpdates = [];\n            for (const updateParam of preparedUpdateParams){\n                if (updateParam.id !== undefined && createById[updateParam.id]) {\n                    createById[updateParam.id] = {\n                        ...createById[updateParam.id],\n                        ...updateParam\n                    };\n                } else {\n                    standaloneUpdates.push(updateParam);\n                }\n            }\n            preparedCreateParams = Object.values(createById);\n            preparedUpdateParams = standaloneUpdates;\n        }\n        if (preparedCreateParams.length === 0 && preparedUpdateParams.length === 0) {\n            return;\n        }\n        // send the runs in multipart requests\n        const accumulatedContext = [];\n        const accumulatedParts = [];\n        for (const [method, payloads] of [\n            [\n                \"post\",\n                preparedCreateParams\n            ],\n            [\n                \"patch\",\n                preparedUpdateParams\n            ]\n        ]){\n            for (const originalPayload of payloads){\n                // collect fields to be sent as separate parts\n                const { inputs, outputs, events, extra, error, serialized, attachments, ...payload } = originalPayload;\n                const fields = {\n                    inputs,\n                    outputs,\n                    events,\n                    extra,\n                    error,\n                    serialized\n                };\n                // encode the main run payload\n                const stringifiedPayload = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(payload, `Serializing for multipart ingestion of run with id: ${payload.id}`);\n                accumulatedParts.push({\n                    name: `${method}.${payload.id}`,\n                    payload: new Blob([\n                        stringifiedPayload\n                    ], {\n                        type: `application/json; length=${stringifiedPayload.length}`\n                    })\n                });\n                // encode the fields we collected\n                for (const [key, value] of Object.entries(fields)){\n                    if (value === undefined) {\n                        continue;\n                    }\n                    const stringifiedValue = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(value, `Serializing ${key} for multipart ingestion of run with id: ${payload.id}`);\n                    accumulatedParts.push({\n                        name: `${method}.${payload.id}.${key}`,\n                        payload: new Blob([\n                            stringifiedValue\n                        ], {\n                            type: `application/json; length=${stringifiedValue.length}`\n                        })\n                    });\n                }\n                // encode the attachments\n                if (payload.id !== undefined) {\n                    const attachments = allAttachments[payload.id];\n                    if (attachments) {\n                        delete allAttachments[payload.id];\n                        for (const [name, attachment] of Object.entries(attachments)){\n                            let contentType;\n                            let content;\n                            if (Array.isArray(attachment)) {\n                                [contentType, content] = attachment;\n                            } else {\n                                contentType = attachment.mimeType;\n                                content = attachment.data;\n                            }\n                            // Validate that the attachment name doesn't contain a '.'\n                            if (name.includes(\".\")) {\n                                console.warn(`Skipping attachment '${name}' for run ${payload.id}: Invalid attachment name. ` + `Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);\n                                continue;\n                            }\n                            accumulatedParts.push({\n                                name: `attachment.${payload.id}.${name}`,\n                                payload: new Blob([\n                                    content\n                                ], {\n                                    type: `${contentType}; length=${content.byteLength}`\n                                })\n                            });\n                        }\n                    }\n                }\n                // compute context\n                accumulatedContext.push(`trace=${payload.trace_id},id=${payload.id}`);\n            }\n        }\n        await this._sendMultipartRequest(accumulatedParts, accumulatedContext.join(\"; \"), options);\n    }\n    async _createNodeFetchBody(parts, boundary) {\n        // Create multipart form data manually using Blobs\n        const chunks = [];\n        for (const part of parts){\n            // Add field boundary\n            chunks.push(new Blob([\n                `--${boundary}\\r\\n`\n            ]));\n            chunks.push(new Blob([\n                `Content-Disposition: form-data; name=\"${part.name}\"\\r\\n`,\n                `Content-Type: ${part.payload.type}\\r\\n\\r\\n`\n            ]));\n            chunks.push(part.payload);\n            chunks.push(new Blob([\n                \"\\r\\n\"\n            ]));\n        }\n        // Add final boundary\n        chunks.push(new Blob([\n            `--${boundary}--\\r\\n`\n        ]));\n        // Combine all chunks into a single Blob\n        const body = new Blob(chunks);\n        // Convert Blob to ArrayBuffer for compatibility\n        const arrayBuffer = await body.arrayBuffer();\n        return arrayBuffer;\n    }\n    async _createMultipartStream(parts, boundary) {\n        const encoder = new TextEncoder();\n        // Create a ReadableStream for streaming the multipart data\n        // Only do special handling if we're using node-fetch\n        const stream = new ReadableStream({\n            async start (controller) {\n                // Helper function to write a chunk to the stream\n                const writeChunk = async (chunk)=>{\n                    if (typeof chunk === \"string\") {\n                        controller.enqueue(encoder.encode(chunk));\n                    } else {\n                        controller.enqueue(chunk);\n                    }\n                };\n                // Write each part to the stream\n                for (const part of parts){\n                    // Write boundary and headers\n                    await writeChunk(`--${boundary}\\r\\n`);\n                    await writeChunk(`Content-Disposition: form-data; name=\"${part.name}\"\\r\\n`);\n                    await writeChunk(`Content-Type: ${part.payload.type}\\r\\n\\r\\n`);\n                    // Write the payload\n                    const payloadStream = part.payload.stream();\n                    const reader = payloadStream.getReader();\n                    try {\n                        let result;\n                        while(!(result = await reader.read()).done){\n                            controller.enqueue(result.value);\n                        }\n                    } finally{\n                        reader.releaseLock();\n                    }\n                    await writeChunk(\"\\r\\n\");\n                }\n                // Write final boundary\n                await writeChunk(`--${boundary}--\\r\\n`);\n                controller.close();\n            }\n        });\n        return stream;\n    }\n    async _sendMultipartRequest(parts, context, options) {\n        // Create multipart form data boundary\n        const boundary = \"----LangSmithFormBoundary\" + Math.random().toString(36).slice(2);\n        const isNodeFetch = (0,_singletons_fetch_js__WEBPACK_IMPORTED_MODULE_10__._globalFetchImplementationIsNodeFetch)();\n        const buildBuffered = ()=>this._createNodeFetchBody(parts, boundary);\n        const buildStream = ()=>this._createMultipartStream(parts, boundary);\n        const sendWithRetry = async (bodyFactory)=>{\n            return this.batchIngestCaller.callWithOptions({\n                sizeBytes: options?.sizeBytes\n            }, async ()=>{\n                const body = await bodyFactory();\n                const headers = {\n                    ...this.headers,\n                    \"Content-Type\": `multipart/form-data; boundary=${boundary}`\n                };\n                if (options?.apiKey !== undefined) {\n                    headers[\"x-api-key\"] = options.apiKey;\n                }\n                let transformedBody = body;\n                if (options?.useGzip && typeof body === \"object\" && \"pipeThrough\" in body) {\n                    transformedBody = body.pipeThrough(new CompressionStream(\"gzip\"));\n                    headers[\"Content-Encoding\"] = \"gzip\";\n                }\n                const response = await this._fetch(`${options?.apiUrl ?? this.apiUrl}/runs/multipart`, {\n                    method: \"POST\",\n                    headers,\n                    body: transformedBody,\n                    duplex: \"half\",\n                    signal: AbortSignal.timeout(this.timeout_ms),\n                    ...this.fetchOptions\n                });\n                await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(response, `Failed to send multipart request`, true);\n                return response;\n            });\n        };\n        try {\n            let res;\n            let streamedAttempt = false;\n            // attempt stream only if not disabled and not using node-fetch or Bun\n            if (!isNodeFetch && !this.multipartStreamingDisabled && (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnv)() !== \"bun\") {\n                streamedAttempt = true;\n                res = await sendWithRetry(buildStream);\n            } else {\n                res = await sendWithRetry(buildBuffered);\n            }\n            // if stream fails, fallback to buffered body\n            if ((!this.multipartStreamingDisabled || streamedAttempt) && res.status === 422 && (options?.apiUrl ?? this.apiUrl) !== DEFAULT_API_URL) {\n                console.warn(`Streaming multipart upload to ${options?.apiUrl ?? this.apiUrl}/runs/multipart failed. ` + `This usually means the host does not support chunked uploads. ` + `Retrying with a buffered upload for operation \"${context}\".`);\n                // Disable streaming for future requests\n                this.multipartStreamingDisabled = true;\n                // retry with fully-buffered body\n                res = await sendWithRetry(buildBuffered);\n            }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        } catch (e) {\n            console.warn(`${e.message.trim()}\\n\\nContext: ${context}`);\n        }\n    }\n    async updateRun(runId, run, options) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(runId);\n        if (run.inputs) {\n            run.inputs = await this.processInputs(run.inputs);\n        }\n        if (run.outputs) {\n            run.outputs = await this.processOutputs(run.outputs);\n        }\n        // TODO: Untangle types\n        const data = {\n            ...run,\n            id: runId\n        };\n        if (!this._filterForSampling([\n            data\n        ], true).length) {\n            return;\n        }\n        if (this.autoBatchTracing && data.trace_id !== undefined && data.dotted_order !== undefined) {\n            const otelContext = this._cloneCurrentOTELContext();\n            if (run.end_time !== undefined && data.parent_run_id === undefined && this.blockOnRootRunFinalization && !this.manualFlushMode) {\n                // Trigger batches as soon as a root trace ends and wait to ensure trace finishes\n                // in serverless environments.\n                await this.processRunOperation({\n                    action: \"update\",\n                    item: data,\n                    otelContext,\n                    apiKey: options?.apiKey,\n                    apiUrl: options?.apiUrl\n                }).catch(console.error);\n                return;\n            } else {\n                void this.processRunOperation({\n                    action: \"update\",\n                    item: data,\n                    otelContext,\n                    apiKey: options?.apiKey,\n                    apiUrl: options?.apiUrl\n                }).catch(console.error);\n            }\n            return;\n        }\n        const headers = {\n            ...this.headers,\n            \"Content-Type\": \"application/json\"\n        };\n        if (options?.apiKey !== undefined) {\n            headers[\"x-api-key\"] = options.apiKey;\n        }\n        if (options?.workspaceId !== undefined) {\n            headers[\"x-tenant-id\"] = options.workspaceId;\n        }\n        const body = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(run, `Serializing payload to update run with id: ${runId}`);\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${options?.apiUrl ?? this.apiUrl}/runs/${runId}`, {\n                method: \"PATCH\",\n                headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"update run\", true);\n            return res;\n        });\n    }\n    async readRun(runId, { loadChildRuns } = {\n        loadChildRuns: false\n    }) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(runId);\n        let run = await this._get(`/runs/${runId}`);\n        if (loadChildRuns) {\n            run = await this._loadChildRuns(run);\n        }\n        return run;\n    }\n    async getRunUrl({ runId, run, projectOpts }) {\n        if (run !== undefined) {\n            let sessionId;\n            if (run.session_id) {\n                sessionId = run.session_id;\n            } else if (projectOpts?.projectName) {\n                sessionId = (await this.readProject({\n                    projectName: projectOpts?.projectName\n                })).id;\n            } else if (projectOpts?.projectId) {\n                sessionId = projectOpts?.projectId;\n            } else {\n                const project = await this.readProject({\n                    projectName: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getLangSmithEnvironmentVariable)(\"PROJECT\") || \"default\"\n                });\n                sessionId = project.id;\n            }\n            const tenantId = await this._getTenantId();\n            return `${this.getHostUrl()}/o/${tenantId}/projects/p/${sessionId}/r/${run.id}?poll=true`;\n        } else if (runId !== undefined) {\n            const run_ = await this.readRun(runId);\n            if (!run_.app_path) {\n                throw new Error(`Run ${runId} has no app_path`);\n            }\n            const baseUrl = this.getHostUrl();\n            return `${baseUrl}${run_.app_path}`;\n        } else {\n            throw new Error(\"Must provide either runId or run\");\n        }\n    }\n    async _loadChildRuns(run) {\n        const childRuns = await toArray(this.listRuns({\n            isRoot: false,\n            projectId: run.session_id,\n            traceId: run.trace_id\n        }));\n        const treemap = {};\n        const runs = {};\n        // TODO: make dotted order required when the migration finishes\n        childRuns.sort((a, b)=>(a?.dotted_order ?? \"\").localeCompare(b?.dotted_order ?? \"\"));\n        for (const childRun of childRuns){\n            if (childRun.parent_run_id === null || childRun.parent_run_id === undefined) {\n                throw new Error(`Child run ${childRun.id} has no parent`);\n            }\n            if (childRun.dotted_order?.startsWith(run.dotted_order ?? \"\") && childRun.id !== run.id) {\n                if (!(childRun.parent_run_id in treemap)) {\n                    treemap[childRun.parent_run_id] = [];\n                }\n                treemap[childRun.parent_run_id].push(childRun);\n                runs[childRun.id] = childRun;\n            }\n        }\n        run.child_runs = treemap[run.id] || [];\n        for(const runId in treemap){\n            if (runId !== run.id) {\n                runs[runId].child_runs = treemap[runId];\n            }\n        }\n        return run;\n    }\n    /**\n     * List runs from the LangSmith server.\n     * @param projectId - The ID of the project to filter by.\n     * @param projectName - The name of the project to filter by.\n     * @param parentRunId - The ID of the parent run to filter by.\n     * @param traceId - The ID of the trace to filter by.\n     * @param referenceExampleId - The ID of the reference example to filter by.\n     * @param startTime - The start time to filter by.\n     * @param isRoot - Indicates whether to only return root runs.\n     * @param runType - The run type to filter by.\n     * @param error - Indicates whether to filter by error runs.\n     * @param id - The ID of the run to filter by.\n     * @param query - The query string to filter by.\n     * @param filter - The filter string to apply to the run spans.\n     * @param traceFilter - The filter string to apply on the root run of the trace.\n     * @param treeFilter - The filter string to apply on other runs in the trace.\n     * @param limit - The maximum number of runs to retrieve.\n     * @returns {AsyncIterable<Run>} - The runs.\n     *\n     * @example\n     * // List all runs in a project\n     * const projectRuns = client.listRuns({ projectName: \"<your_project>\" });\n     *\n     * @example\n     * // List LLM and Chat runs in the last 24 hours\n     * const todaysLLMRuns = client.listRuns({\n     *   projectName: \"<your_project>\",\n     *   start_time: new Date(Date.now() - 24 * 60 * 60 * 1000),\n     *   run_type: \"llm\",\n     * });\n     *\n     * @example\n     * // List traces in a project\n     * const rootRuns = client.listRuns({\n     *   projectName: \"<your_project>\",\n     *   execution_order: 1,\n     * });\n     *\n     * @example\n     * // List runs without errors\n     * const correctRuns = client.listRuns({\n     *   projectName: \"<your_project>\",\n     *   error: false,\n     * });\n     *\n     * @example\n     * // List runs by run ID\n     * const runIds = [\n     *   \"a36092d2-4ad5-4fb4-9c0d-0dba9a2ed836\",\n     *   \"9398e6be-964f-4aa4-8ae9-ad78cd4b7074\",\n     * ];\n     * const selectedRuns = client.listRuns({ run_ids: runIds });\n     *\n     * @example\n     * // List all \"chain\" type runs that took more than 10 seconds and had `total_tokens` greater than 5000\n     * const chainRuns = client.listRuns({\n     *   projectName: \"<your_project>\",\n     *   filter: 'and(eq(run_type, \"chain\"), gt(latency, 10), gt(total_tokens, 5000))',\n     * });\n     *\n     * @example\n     * // List all runs called \"extractor\" whose root of the trace was assigned feedback \"user_score\" score of 1\n     * const goodExtractorRuns = client.listRuns({\n     *   projectName: \"<your_project>\",\n     *   filter: 'eq(name, \"extractor\")',\n     *   traceFilter: 'and(eq(feedback_key, \"user_score\"), eq(feedback_score, 1))',\n     * });\n     *\n     * @example\n     * // List all runs that started after a specific timestamp and either have \"error\" not equal to null or a \"Correctness\" feedback score equal to 0\n     * const complexRuns = client.listRuns({\n     *   projectName: \"<your_project>\",\n     *   filter: 'and(gt(start_time, \"2023-07-15T12:34:56Z\"), or(neq(error, null), and(eq(feedback_key, \"Correctness\"), eq(feedback_score, 0.0))))',\n     * });\n     *\n     * @example\n     * // List all runs where `tags` include \"experimental\" or \"beta\" and `latency` is greater than 2 seconds\n     * const taggedRuns = client.listRuns({\n     *   projectName: \"<your_project>\",\n     *   filter: 'and(or(has(tags, \"experimental\"), has(tags, \"beta\")), gt(latency, 2))',\n     * });\n     */ async *listRuns(props) {\n        const { projectId, projectName, parentRunId, traceId, referenceExampleId, startTime, executionOrder, isRoot, runType, error, id, query, filter, traceFilter, treeFilter, limit, select, order } = props;\n        let projectIds = [];\n        if (projectId) {\n            projectIds = Array.isArray(projectId) ? projectId : [\n                projectId\n            ];\n        }\n        if (projectName) {\n            const projectNames = Array.isArray(projectName) ? projectName : [\n                projectName\n            ];\n            const projectIds_ = await Promise.all(projectNames.map((name)=>this.readProject({\n                    projectName: name\n                }).then((project)=>project.id)));\n            projectIds.push(...projectIds_);\n        }\n        const default_select = [\n            \"app_path\",\n            \"completion_cost\",\n            \"completion_tokens\",\n            \"dotted_order\",\n            \"end_time\",\n            \"error\",\n            \"events\",\n            \"extra\",\n            \"feedback_stats\",\n            \"first_token_time\",\n            \"id\",\n            \"inputs\",\n            \"name\",\n            \"outputs\",\n            \"parent_run_id\",\n            \"parent_run_ids\",\n            \"prompt_cost\",\n            \"prompt_tokens\",\n            \"reference_example_id\",\n            \"run_type\",\n            \"session_id\",\n            \"start_time\",\n            \"status\",\n            \"tags\",\n            \"total_cost\",\n            \"total_tokens\",\n            \"trace_id\"\n        ];\n        const body = {\n            session: projectIds.length ? projectIds : null,\n            run_type: runType,\n            reference_example: referenceExampleId,\n            query,\n            filter,\n            trace_filter: traceFilter,\n            tree_filter: treeFilter,\n            execution_order: executionOrder,\n            parent_run: parentRunId,\n            start_time: startTime ? startTime.toISOString() : null,\n            error,\n            id,\n            limit,\n            trace: traceId,\n            select: select ? select : default_select,\n            is_root: isRoot,\n            order\n        };\n        if (body.select.includes(\"child_run_ids\")) {\n            (0,_utils_warn_js__WEBPACK_IMPORTED_MODULE_7__.warnOnce)(\"Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.\");\n        }\n        let runsYielded = 0;\n        for await (const runs of this._getCursorPaginatedList(\"/runs/query\", body)){\n            if (limit) {\n                if (runsYielded >= limit) {\n                    break;\n                }\n                if (runs.length + runsYielded > limit) {\n                    const newRuns = runs.slice(0, limit - runsYielded);\n                    yield* newRuns;\n                    break;\n                }\n                runsYielded += runs.length;\n                yield* runs;\n            } else {\n                yield* runs;\n            }\n        }\n    }\n    async *listGroupRuns(props) {\n        const { projectId, projectName, groupBy, filter, startTime, endTime, limit, offset } = props;\n        const sessionId = projectId || (await this.readProject({\n            projectName\n        })).id;\n        const baseBody = {\n            session_id: sessionId,\n            group_by: groupBy,\n            filter,\n            start_time: startTime ? startTime.toISOString() : null,\n            end_time: endTime ? endTime.toISOString() : null,\n            limit: Number(limit) || 100\n        };\n        let currentOffset = Number(offset) || 0;\n        const path = \"/runs/group\";\n        const url = `${this.apiUrl}${path}`;\n        while(true){\n            const currentBody = {\n                ...baseBody,\n                offset: currentOffset\n            };\n            // Remove undefined values from the payload\n            const filteredPayload = Object.fromEntries(Object.entries(currentBody).filter(([_, value])=>value !== undefined));\n            const body = JSON.stringify(filteredPayload);\n            const response = await this.caller.call(async ()=>{\n                const res = await this._fetch(url, {\n                    method: \"POST\",\n                    headers: {\n                        ...this.headers,\n                        \"Content-Type\": \"application/json\"\n                    },\n                    signal: AbortSignal.timeout(this.timeout_ms),\n                    ...this.fetchOptions,\n                    body\n                });\n                await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, `Failed to fetch ${path}`);\n                return res;\n            });\n            const items = await response.json();\n            const { groups, total } = items;\n            if (groups.length === 0) {\n                break;\n            }\n            for (const thread of groups){\n                yield thread;\n            }\n            currentOffset += groups.length;\n            if (currentOffset >= total) {\n                break;\n            }\n        }\n    }\n    async getRunStats({ id, trace, parentRun, runType, projectNames, projectIds, referenceExampleIds, startTime, endTime, error, query, filter, traceFilter, treeFilter, isRoot, dataSourceType }) {\n        let projectIds_ = projectIds || [];\n        if (projectNames) {\n            projectIds_ = [\n                ...projectIds || [],\n                ...await Promise.all(projectNames.map((name)=>this.readProject({\n                        projectName: name\n                    }).then((project)=>project.id)))\n            ];\n        }\n        const payload = {\n            id,\n            trace,\n            parent_run: parentRun,\n            run_type: runType,\n            session: projectIds_,\n            reference_example: referenceExampleIds,\n            start_time: startTime,\n            end_time: endTime,\n            error,\n            query,\n            filter,\n            trace_filter: traceFilter,\n            tree_filter: treeFilter,\n            is_root: isRoot,\n            data_source_type: dataSourceType\n        };\n        // Remove undefined values from the payload\n        const filteredPayload = Object.fromEntries(Object.entries(payload).filter(([_, value])=>value !== undefined));\n        const body = JSON.stringify(filteredPayload);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/runs/stats`, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"get run stats\");\n            return res;\n        });\n        const result = await response.json();\n        return result;\n    }\n    async shareRun(runId, { shareId } = {}) {\n        const data = {\n            run_id: runId,\n            share_token: shareId || uuid__WEBPACK_IMPORTED_MODULE_12__[\"default\"]()\n        };\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(runId);\n        const body = JSON.stringify(data);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/runs/${runId}/share`, {\n                method: \"PUT\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"share run\");\n            return res;\n        });\n        const result = await response.json();\n        if (result === null || !(\"share_token\" in result)) {\n            throw new Error(\"Invalid response from server\");\n        }\n        return `${this.getHostUrl()}/public/${result[\"share_token\"]}/r`;\n    }\n    async unshareRun(runId) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(runId);\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/runs/${runId}/share`, {\n                method: \"DELETE\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"unshare run\", true);\n            return res;\n        });\n    }\n    async readRunSharedLink(runId) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(runId);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/runs/${runId}/share`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"read run shared link\");\n            return res;\n        });\n        const result = await response.json();\n        if (result === null || !(\"share_token\" in result)) {\n            return undefined;\n        }\n        return `${this.getHostUrl()}/public/${result[\"share_token\"]}/r`;\n    }\n    async listSharedRuns(shareToken, { runIds } = {}) {\n        const queryParams = new URLSearchParams({\n            share_token: shareToken\n        });\n        if (runIds !== undefined) {\n            for (const runId of runIds){\n                queryParams.append(\"id\", runId);\n            }\n        }\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(shareToken);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/public/${shareToken}/runs${queryParams}`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"list shared runs\");\n            return res;\n        });\n        const runs = await response.json();\n        return runs;\n    }\n    async readDatasetSharedSchema(datasetId, datasetName) {\n        if (!datasetId && !datasetName) {\n            throw new Error(\"Either datasetId or datasetName must be given\");\n        }\n        if (!datasetId) {\n            const dataset = await this.readDataset({\n                datasetName\n            });\n            datasetId = dataset.id;\n        }\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(datasetId);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets/${datasetId}/share`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"read dataset shared schema\");\n            return res;\n        });\n        const shareSchema = await response.json();\n        shareSchema.url = `${this.getHostUrl()}/public/${shareSchema.share_token}/d`;\n        return shareSchema;\n    }\n    async shareDataset(datasetId, datasetName) {\n        if (!datasetId && !datasetName) {\n            throw new Error(\"Either datasetId or datasetName must be given\");\n        }\n        if (!datasetId) {\n            const dataset = await this.readDataset({\n                datasetName\n            });\n            datasetId = dataset.id;\n        }\n        const data = {\n            dataset_id: datasetId\n        };\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(datasetId);\n        const body = JSON.stringify(data);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets/${datasetId}/share`, {\n                method: \"PUT\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"share dataset\");\n            return res;\n        });\n        const shareSchema = await response.json();\n        shareSchema.url = `${this.getHostUrl()}/public/${shareSchema.share_token}/d`;\n        return shareSchema;\n    }\n    async unshareDataset(datasetId) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(datasetId);\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets/${datasetId}/share`, {\n                method: \"DELETE\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"unshare dataset\", true);\n            return res;\n        });\n    }\n    async readSharedDataset(shareToken) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(shareToken);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/public/${shareToken}/datasets`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"read shared dataset\");\n            return res;\n        });\n        const dataset = await response.json();\n        return dataset;\n    }\n    /**\n     * Get shared examples.\n     *\n     * @param {string} shareToken The share token to get examples for. A share token is the UUID (or LangSmith URL, including UUID) generated when explicitly marking an example as public.\n     * @param {Object} [options] Additional options for listing the examples.\n     * @param {string[] | undefined} [options.exampleIds] A list of example IDs to filter by.\n     * @returns {Promise<Example[]>} The shared examples.\n     */ async listSharedExamples(shareToken, options) {\n        const params = {};\n        if (options?.exampleIds) {\n            params.id = options.exampleIds;\n        }\n        const urlParams = new URLSearchParams();\n        Object.entries(params).forEach(([key, value])=>{\n            if (Array.isArray(value)) {\n                value.forEach((v)=>urlParams.append(key, v));\n            } else {\n                urlParams.append(key, value);\n            }\n        });\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/public/${shareToken}/examples?${urlParams.toString()}`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"list shared examples\");\n            return res;\n        });\n        const result = await response.json();\n        if (!response.ok) {\n            if (\"detail\" in result) {\n                throw new Error(`Failed to list shared examples.\\nStatus: ${response.status}\\nMessage: ${Array.isArray(result.detail) ? result.detail.join(\"\\n\") : \"Unspecified error\"}`);\n            }\n            throw new Error(`Failed to list shared examples: ${response.status} ${response.statusText}`);\n        }\n        return result.map((example)=>({\n                ...example,\n                _hostUrl: this.getHostUrl()\n            }));\n    }\n    async createProject({ projectName, description = null, metadata = null, upsert = false, projectExtra = null, referenceDatasetId = null }) {\n        const upsert_ = upsert ? `?upsert=true` : \"\";\n        const endpoint = `${this.apiUrl}/sessions${upsert_}`;\n        const extra = projectExtra || {};\n        if (metadata) {\n            extra[\"metadata\"] = metadata;\n        }\n        const body = {\n            name: projectName,\n            extra,\n            description\n        };\n        if (referenceDatasetId !== null) {\n            body[\"reference_dataset_id\"] = referenceDatasetId;\n        }\n        const serializedBody = JSON.stringify(body);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(endpoint, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body: serializedBody\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"create project\");\n            return res;\n        });\n        const result = await response.json();\n        return result;\n    }\n    async updateProject(projectId, { name = null, description = null, metadata = null, projectExtra = null, endTime = null }) {\n        const endpoint = `${this.apiUrl}/sessions/${projectId}`;\n        let extra = projectExtra;\n        if (metadata) {\n            extra = {\n                ...extra || {},\n                metadata\n            };\n        }\n        const body = JSON.stringify({\n            name,\n            extra,\n            description,\n            end_time: endTime ? new Date(endTime).toISOString() : null\n        });\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(endpoint, {\n                method: \"PATCH\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"update project\");\n            return res;\n        });\n        const result = await response.json();\n        return result;\n    }\n    async hasProject({ projectId, projectName }) {\n        // TODO: Add a head request\n        let path = \"/sessions\";\n        const params = new URLSearchParams();\n        if (projectId !== undefined && projectName !== undefined) {\n            throw new Error(\"Must provide either projectName or projectId, not both\");\n        } else if (projectId !== undefined) {\n            (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(projectId);\n            path += `/${projectId}`;\n        } else if (projectName !== undefined) {\n            params.append(\"name\", projectName);\n        } else {\n            throw new Error(\"Must provide projectName or projectId\");\n        }\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}${path}?${params}`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"has project\");\n            return res;\n        });\n        // consume the response body to release the connection\n        // https://undici.nodejs.org/#/?id=garbage-collection\n        try {\n            const result = await response.json();\n            if (!response.ok) {\n                return false;\n            }\n            // If it's OK and we're querying by name, need to check the list is not empty\n            if (Array.isArray(result)) {\n                return result.length > 0;\n            }\n            // projectId querying\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n    async readProject({ projectId, projectName, includeStats }) {\n        let path = \"/sessions\";\n        const params = new URLSearchParams();\n        if (projectId !== undefined && projectName !== undefined) {\n            throw new Error(\"Must provide either projectName or projectId, not both\");\n        } else if (projectId !== undefined) {\n            (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(projectId);\n            path += `/${projectId}`;\n        } else if (projectName !== undefined) {\n            params.append(\"name\", projectName);\n        } else {\n            throw new Error(\"Must provide projectName or projectId\");\n        }\n        if (includeStats !== undefined) {\n            params.append(\"include_stats\", includeStats.toString());\n        }\n        const response = await this._get(path, params);\n        let result;\n        if (Array.isArray(response)) {\n            if (response.length === 0) {\n                throw new Error(`Project[id=${projectId}, name=${projectName}] not found`);\n            }\n            result = response[0];\n        } else {\n            result = response;\n        }\n        return result;\n    }\n    async getProjectUrl({ projectId, projectName }) {\n        if (projectId === undefined && projectName === undefined) {\n            throw new Error(\"Must provide either projectName or projectId\");\n        }\n        const project = await this.readProject({\n            projectId,\n            projectName\n        });\n        const tenantId = await this._getTenantId();\n        return `${this.getHostUrl()}/o/${tenantId}/projects/p/${project.id}`;\n    }\n    async getDatasetUrl({ datasetId, datasetName }) {\n        if (datasetId === undefined && datasetName === undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId\");\n        }\n        const dataset = await this.readDataset({\n            datasetId,\n            datasetName\n        });\n        const tenantId = await this._getTenantId();\n        return `${this.getHostUrl()}/o/${tenantId}/datasets/${dataset.id}`;\n    }\n    async _getTenantId() {\n        if (this._tenantId !== null) {\n            return this._tenantId;\n        }\n        const queryParams = new URLSearchParams({\n            limit: \"1\"\n        });\n        for await (const projects of this._getPaginated(\"/sessions\", queryParams)){\n            this._tenantId = projects[0].tenant_id;\n            return projects[0].tenant_id;\n        }\n        throw new Error(\"No projects found to resolve tenant.\");\n    }\n    async *listProjects({ projectIds, name, nameContains, referenceDatasetId, referenceDatasetName, includeStats, datasetVersion, referenceFree, metadata } = {}) {\n        const params = new URLSearchParams();\n        if (projectIds !== undefined) {\n            for (const projectId of projectIds){\n                params.append(\"id\", projectId);\n            }\n        }\n        if (name !== undefined) {\n            params.append(\"name\", name);\n        }\n        if (nameContains !== undefined) {\n            params.append(\"name_contains\", nameContains);\n        }\n        if (referenceDatasetId !== undefined) {\n            params.append(\"reference_dataset\", referenceDatasetId);\n        } else if (referenceDatasetName !== undefined) {\n            const dataset = await this.readDataset({\n                datasetName: referenceDatasetName\n            });\n            params.append(\"reference_dataset\", dataset.id);\n        }\n        if (includeStats !== undefined) {\n            params.append(\"include_stats\", includeStats.toString());\n        }\n        if (datasetVersion !== undefined) {\n            params.append(\"dataset_version\", datasetVersion);\n        }\n        if (referenceFree !== undefined) {\n            params.append(\"reference_free\", referenceFree.toString());\n        }\n        if (metadata !== undefined) {\n            params.append(\"metadata\", JSON.stringify(metadata));\n        }\n        for await (const projects of this._getPaginated(\"/sessions\", params)){\n            yield* projects;\n        }\n    }\n    async deleteProject({ projectId, projectName }) {\n        let projectId_;\n        if (projectId === undefined && projectName === undefined) {\n            throw new Error(\"Must provide projectName or projectId\");\n        } else if (projectId !== undefined && projectName !== undefined) {\n            throw new Error(\"Must provide either projectName or projectId, not both\");\n        } else if (projectId === undefined) {\n            projectId_ = (await this.readProject({\n                projectName\n            })).id;\n        } else {\n            projectId_ = projectId;\n        }\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(projectId_);\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/sessions/${projectId_}`, {\n                method: \"DELETE\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, `delete session ${projectId_} (${projectName})`, true);\n            return res;\n        });\n    }\n    async uploadCsv({ csvFile, fileName, inputKeys, outputKeys, description, dataType, name }) {\n        const url = `${this.apiUrl}/datasets/upload`;\n        const formData = new FormData();\n        formData.append(\"file\", csvFile, fileName);\n        inputKeys.forEach((key)=>{\n            formData.append(\"input_keys\", key);\n        });\n        outputKeys.forEach((key)=>{\n            formData.append(\"output_keys\", key);\n        });\n        if (description) {\n            formData.append(\"description\", description);\n        }\n        if (dataType) {\n            formData.append(\"data_type\", dataType);\n        }\n        if (name) {\n            formData.append(\"name\", name);\n        }\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(url, {\n                method: \"POST\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body: formData\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"upload CSV\");\n            return res;\n        });\n        const result = await response.json();\n        return result;\n    }\n    async createDataset(name, { description, dataType, inputsSchema, outputsSchema, metadata } = {}) {\n        const body = {\n            name,\n            description,\n            extra: metadata ? {\n                metadata\n            } : undefined\n        };\n        if (dataType) {\n            body.data_type = dataType;\n        }\n        if (inputsSchema) {\n            body.inputs_schema_definition = inputsSchema;\n        }\n        if (outputsSchema) {\n            body.outputs_schema_definition = outputsSchema;\n        }\n        const serializedBody = JSON.stringify(body);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets`, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body: serializedBody\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"create dataset\");\n            return res;\n        });\n        const result = await response.json();\n        return result;\n    }\n    async readDataset({ datasetId, datasetName }) {\n        let path = \"/datasets\";\n        // limit to 1 result\n        const params = new URLSearchParams({\n            limit: \"1\"\n        });\n        if (datasetId && datasetName) {\n            throw new Error(\"Must provide either datasetName or datasetId, not both\");\n        } else if (datasetId) {\n            (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(datasetId);\n            path += `/${datasetId}`;\n        } else if (datasetName) {\n            params.append(\"name\", datasetName);\n        } else {\n            throw new Error(\"Must provide datasetName or datasetId\");\n        }\n        const response = await this._get(path, params);\n        let result;\n        if (Array.isArray(response)) {\n            if (response.length === 0) {\n                throw new Error(`Dataset[id=${datasetId}, name=${datasetName}] not found`);\n            }\n            result = response[0];\n        } else {\n            result = response;\n        }\n        return result;\n    }\n    async hasDataset({ datasetId, datasetName }) {\n        try {\n            await this.readDataset({\n                datasetId,\n                datasetName\n            });\n            return true;\n        } catch (e) {\n            if (// eslint-disable-next-line no-instanceof/no-instanceof\n            e instanceof Error && e.message.toLocaleLowerCase().includes(\"not found\")) {\n                return false;\n            }\n            throw e;\n        }\n    }\n    async diffDatasetVersions({ datasetId, datasetName, fromVersion, toVersion }) {\n        let datasetId_ = datasetId;\n        if (datasetId_ === undefined && datasetName === undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId\");\n        } else if (datasetId_ !== undefined && datasetName !== undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId, not both\");\n        } else if (datasetId_ === undefined) {\n            const dataset = await this.readDataset({\n                datasetName\n            });\n            datasetId_ = dataset.id;\n        }\n        const urlParams = new URLSearchParams({\n            from_version: typeof fromVersion === \"string\" ? fromVersion : fromVersion.toISOString(),\n            to_version: typeof toVersion === \"string\" ? toVersion : toVersion.toISOString()\n        });\n        const response = await this._get(`/datasets/${datasetId_}/versions/diff`, urlParams);\n        return response;\n    }\n    async readDatasetOpenaiFinetuning({ datasetId, datasetName }) {\n        const path = \"/datasets\";\n        if (datasetId !== undefined) {\n        // do nothing\n        } else if (datasetName !== undefined) {\n            datasetId = (await this.readDataset({\n                datasetName\n            })).id;\n        } else {\n            throw new Error(\"Must provide either datasetName or datasetId\");\n        }\n        const response = await this._getResponse(`${path}/${datasetId}/openai_ft`);\n        const datasetText = await response.text();\n        const dataset = datasetText.trim().split(\"\\n\").map((line)=>JSON.parse(line));\n        return dataset;\n    }\n    async *listDatasets({ limit = 100, offset = 0, datasetIds, datasetName, datasetNameContains, metadata } = {}) {\n        const path = \"/datasets\";\n        const params = new URLSearchParams({\n            limit: limit.toString(),\n            offset: offset.toString()\n        });\n        if (datasetIds !== undefined) {\n            for (const id_ of datasetIds){\n                params.append(\"id\", id_);\n            }\n        }\n        if (datasetName !== undefined) {\n            params.append(\"name\", datasetName);\n        }\n        if (datasetNameContains !== undefined) {\n            params.append(\"name_contains\", datasetNameContains);\n        }\n        if (metadata !== undefined) {\n            params.append(\"metadata\", JSON.stringify(metadata));\n        }\n        for await (const datasets of this._getPaginated(path, params)){\n            yield* datasets;\n        }\n    }\n    /**\n     * Update a dataset\n     * @param props The dataset details to update\n     * @returns The updated dataset\n     */ async updateDataset(props) {\n        const { datasetId, datasetName, ...update } = props;\n        if (!datasetId && !datasetName) {\n            throw new Error(\"Must provide either datasetName or datasetId\");\n        }\n        const _datasetId = datasetId ?? (await this.readDataset({\n            datasetName\n        })).id;\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(_datasetId);\n        const body = JSON.stringify(update);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets/${_datasetId}`, {\n                method: \"PATCH\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"update dataset\");\n            return res;\n        });\n        return await response.json();\n    }\n    /**\n     * Updates a tag on a dataset.\n     *\n     * If the tag is already assigned to a different version of this dataset,\n     * the tag will be moved to the new version. The as_of parameter is used to\n     * determine which version of the dataset to apply the new tags to.\n     *\n     * It must be an exact version of the dataset to succeed. You can\n     * use the \"readDatasetVersion\" method to find the exact version\n     * to apply the tags to.\n     * @param params.datasetId The ID of the dataset to update. Must be provided if \"datasetName\" is not provided.\n     * @param params.datasetName The name of the dataset to update. Must be provided if \"datasetId\" is not provided.\n     * @param params.asOf The timestamp of the dataset to apply the new tags to.\n     * @param params.tag The new tag to apply to the dataset.\n     */ async updateDatasetTag(props) {\n        const { datasetId, datasetName, asOf, tag } = props;\n        if (!datasetId && !datasetName) {\n            throw new Error(\"Must provide either datasetName or datasetId\");\n        }\n        const _datasetId = datasetId ?? (await this.readDataset({\n            datasetName\n        })).id;\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(_datasetId);\n        const body = JSON.stringify({\n            as_of: typeof asOf === \"string\" ? asOf : asOf.toISOString(),\n            tag\n        });\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets/${_datasetId}/tags`, {\n                method: \"PUT\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"update dataset tags\", true);\n            return res;\n        });\n    }\n    async deleteDataset({ datasetId, datasetName }) {\n        let path = \"/datasets\";\n        let datasetId_ = datasetId;\n        if (datasetId !== undefined && datasetName !== undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId, not both\");\n        } else if (datasetName !== undefined) {\n            const dataset = await this.readDataset({\n                datasetName\n            });\n            datasetId_ = dataset.id;\n        }\n        if (datasetId_ !== undefined) {\n            (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(datasetId_);\n            path += `/${datasetId_}`;\n        } else {\n            throw new Error(\"Must provide datasetName or datasetId\");\n        }\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(this.apiUrl + path, {\n                method: \"DELETE\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, `delete ${path}`, true);\n            return res;\n        });\n    }\n    async indexDataset({ datasetId, datasetName, tag }) {\n        let datasetId_ = datasetId;\n        if (!datasetId_ && !datasetName) {\n            throw new Error(\"Must provide either datasetName or datasetId\");\n        } else if (datasetId_ && datasetName) {\n            throw new Error(\"Must provide either datasetName or datasetId, not both\");\n        } else if (!datasetId_) {\n            const dataset = await this.readDataset({\n                datasetName\n            });\n            datasetId_ = dataset.id;\n        }\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(datasetId_);\n        const data = {\n            tag: tag\n        };\n        const body = JSON.stringify(data);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets/${datasetId_}/index`, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"index dataset\");\n            return res;\n        });\n        await response.json();\n    }\n    /**\n     * Lets you run a similarity search query on a dataset.\n     *\n     * Requires the dataset to be indexed. Please see the `indexDataset` method to set up indexing.\n     *\n     * @param inputs      The input on which to run the similarity search. Must have the\n     *                    same schema as the dataset.\n     *\n     * @param datasetId   The dataset to search for similar examples.\n     *\n     * @param limit       The maximum number of examples to return. Will return the top `limit` most\n     *                    similar examples in order of most similar to least similar. If no similar\n     *                    examples are found, random examples will be returned.\n     *\n     * @param filter      A filter string to apply to the search. Only examples will be returned that\n     *                    match the filter string. Some examples of filters\n     *\n     *                    - eq(metadata.mykey, \"value\")\n     *                    - and(neq(metadata.my.nested.key, \"value\"), neq(metadata.mykey, \"value\"))\n     *                    - or(eq(metadata.mykey, \"value\"), eq(metadata.mykey, \"othervalue\"))\n     *\n     * @returns           A list of similar examples.\n     *\n     *\n     * @example\n     * dataset_id = \"123e4567-e89b-12d3-a456-426614174000\"\n     * inputs = {\"text\": \"How many people live in Berlin?\"}\n     * limit = 5\n     * examples = await client.similarExamples(inputs, dataset_id, limit)\n     */ async similarExamples(inputs, datasetId, limit, { filter } = {}) {\n        const data = {\n            limit: limit,\n            inputs: inputs\n        };\n        if (filter !== undefined) {\n            data[\"filter\"] = filter;\n        }\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(datasetId);\n        const body = JSON.stringify(data);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets/${datasetId}/search`, {\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                method: \"POST\",\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"fetch similar examples\");\n            return res;\n        });\n        const result = await response.json();\n        return result[\"examples\"];\n    }\n    async createExample(inputsOrUpdate, outputs, options) {\n        if (isExampleCreate(inputsOrUpdate)) {\n            if (outputs !== undefined || options !== undefined) {\n                throw new Error(\"Cannot provide outputs or options when using ExampleCreate object\");\n            }\n        }\n        let datasetId_ = outputs ? options?.datasetId : inputsOrUpdate.dataset_id;\n        const datasetName_ = outputs ? options?.datasetName : inputsOrUpdate.dataset_name;\n        if (datasetId_ === undefined && datasetName_ === undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId\");\n        } else if (datasetId_ !== undefined && datasetName_ !== undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId, not both\");\n        } else if (datasetId_ === undefined) {\n            const dataset = await this.readDataset({\n                datasetName: datasetName_\n            });\n            datasetId_ = dataset.id;\n        }\n        const createdAt_ = (outputs ? options?.createdAt : inputsOrUpdate.created_at) || new Date();\n        let data;\n        if (!isExampleCreate(inputsOrUpdate)) {\n            data = {\n                inputs: inputsOrUpdate,\n                outputs,\n                created_at: createdAt_?.toISOString(),\n                id: options?.exampleId,\n                metadata: options?.metadata,\n                split: options?.split,\n                source_run_id: options?.sourceRunId,\n                use_source_run_io: options?.useSourceRunIO,\n                use_source_run_attachments: options?.useSourceRunAttachments,\n                attachments: options?.attachments\n            };\n        } else {\n            data = inputsOrUpdate;\n        }\n        const response = await this._uploadExamplesMultipart(datasetId_, [\n            data\n        ]);\n        const example = await this.readExample(response.example_ids?.[0] ?? uuid__WEBPACK_IMPORTED_MODULE_12__[\"default\"]());\n        return example;\n    }\n    async createExamples(propsOrUploads) {\n        if (Array.isArray(propsOrUploads)) {\n            if (propsOrUploads.length === 0) {\n                return [];\n            }\n            const uploads = propsOrUploads;\n            let datasetId_ = uploads[0].dataset_id;\n            const datasetName_ = uploads[0].dataset_name;\n            if (datasetId_ === undefined && datasetName_ === undefined) {\n                throw new Error(\"Must provide either datasetName or datasetId\");\n            } else if (datasetId_ !== undefined && datasetName_ !== undefined) {\n                throw new Error(\"Must provide either datasetName or datasetId, not both\");\n            } else if (datasetId_ === undefined) {\n                const dataset = await this.readDataset({\n                    datasetName: datasetName_\n                });\n                datasetId_ = dataset.id;\n            }\n            const response = await this._uploadExamplesMultipart(datasetId_, uploads);\n            const examples = await Promise.all(response.example_ids.map((id)=>this.readExample(id)));\n            return examples;\n        }\n        const { inputs, outputs, metadata, splits, sourceRunIds, useSourceRunIOs, useSourceRunAttachments, attachments, exampleIds, datasetId, datasetName } = propsOrUploads;\n        if (inputs === undefined) {\n            throw new Error(\"Must provide inputs when using legacy parameters\");\n        }\n        let datasetId_ = datasetId;\n        const datasetName_ = datasetName;\n        if (datasetId_ === undefined && datasetName_ === undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId\");\n        } else if (datasetId_ !== undefined && datasetName_ !== undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId, not both\");\n        } else if (datasetId_ === undefined) {\n            const dataset = await this.readDataset({\n                datasetName: datasetName_\n            });\n            datasetId_ = dataset.id;\n        }\n        const formattedExamples = inputs.map((input, idx)=>{\n            return {\n                dataset_id: datasetId_,\n                inputs: input,\n                outputs: outputs?.[idx],\n                metadata: metadata?.[idx],\n                split: splits?.[idx],\n                id: exampleIds?.[idx],\n                attachments: attachments?.[idx],\n                source_run_id: sourceRunIds?.[idx],\n                use_source_run_io: useSourceRunIOs?.[idx],\n                use_source_run_attachments: useSourceRunAttachments?.[idx]\n            };\n        });\n        const response = await this._uploadExamplesMultipart(datasetId_, formattedExamples);\n        const examples = await Promise.all(response.example_ids.map((id)=>this.readExample(id)));\n        return examples;\n    }\n    async createLLMExample(input, generation, options) {\n        return this.createExample({\n            input\n        }, {\n            output: generation\n        }, options);\n    }\n    async createChatExample(input, generations, options) {\n        const finalInput = input.map((message)=>{\n            if ((0,_utils_messages_js__WEBPACK_IMPORTED_MODULE_3__.isLangChainMessage)(message)) {\n                return (0,_utils_messages_js__WEBPACK_IMPORTED_MODULE_3__.convertLangChainMessageToExample)(message);\n            }\n            return message;\n        });\n        const finalOutput = (0,_utils_messages_js__WEBPACK_IMPORTED_MODULE_3__.isLangChainMessage)(generations) ? (0,_utils_messages_js__WEBPACK_IMPORTED_MODULE_3__.convertLangChainMessageToExample)(generations) : generations;\n        return this.createExample({\n            input: finalInput\n        }, {\n            output: finalOutput\n        }, options);\n    }\n    async readExample(exampleId) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(exampleId);\n        const path = `/examples/${exampleId}`;\n        const rawExample = await this._get(path);\n        const { attachment_urls, ...rest } = rawExample;\n        const example = rest;\n        if (attachment_urls) {\n            example.attachments = Object.entries(attachment_urls).reduce((acc, [key, value])=>{\n                acc[key.slice(\"attachment.\".length)] = {\n                    presigned_url: value.presigned_url,\n                    mime_type: value.mime_type\n                };\n                return acc;\n            }, {});\n        }\n        return example;\n    }\n    async *listExamples({ datasetId, datasetName, exampleIds, asOf, splits, inlineS3Urls, metadata, limit, offset, filter, includeAttachments } = {}) {\n        let datasetId_;\n        if (datasetId !== undefined && datasetName !== undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId, not both\");\n        } else if (datasetId !== undefined) {\n            datasetId_ = datasetId;\n        } else if (datasetName !== undefined) {\n            const dataset = await this.readDataset({\n                datasetName\n            });\n            datasetId_ = dataset.id;\n        } else {\n            throw new Error(\"Must provide a datasetName or datasetId\");\n        }\n        const params = new URLSearchParams({\n            dataset: datasetId_\n        });\n        const dataset_version = asOf ? typeof asOf === \"string\" ? asOf : asOf?.toISOString() : undefined;\n        if (dataset_version) {\n            params.append(\"as_of\", dataset_version);\n        }\n        const inlineS3Urls_ = inlineS3Urls ?? true;\n        params.append(\"inline_s3_urls\", inlineS3Urls_.toString());\n        if (exampleIds !== undefined) {\n            for (const id_ of exampleIds){\n                params.append(\"id\", id_);\n            }\n        }\n        if (splits !== undefined) {\n            for (const split of splits){\n                params.append(\"splits\", split);\n            }\n        }\n        if (metadata !== undefined) {\n            const serializedMetadata = JSON.stringify(metadata);\n            params.append(\"metadata\", serializedMetadata);\n        }\n        if (limit !== undefined) {\n            params.append(\"limit\", limit.toString());\n        }\n        if (offset !== undefined) {\n            params.append(\"offset\", offset.toString());\n        }\n        if (filter !== undefined) {\n            params.append(\"filter\", filter);\n        }\n        if (includeAttachments === true) {\n            [\n                \"attachment_urls\",\n                \"outputs\",\n                \"metadata\"\n            ].forEach((field)=>params.append(\"select\", field));\n        }\n        let i = 0;\n        for await (const rawExamples of this._getPaginated(\"/examples\", params)){\n            for (const rawExample of rawExamples){\n                const { attachment_urls, ...rest } = rawExample;\n                const example = rest;\n                if (attachment_urls) {\n                    example.attachments = Object.entries(attachment_urls).reduce((acc, [key, value])=>{\n                        acc[key.slice(\"attachment.\".length)] = {\n                            presigned_url: value.presigned_url,\n                            mime_type: value.mime_type || undefined\n                        };\n                        return acc;\n                    }, {});\n                }\n                yield example;\n                i++;\n            }\n            if (limit !== undefined && i >= limit) {\n                break;\n            }\n        }\n    }\n    async deleteExample(exampleId) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(exampleId);\n        const path = `/examples/${exampleId}`;\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(this.apiUrl + path, {\n                method: \"DELETE\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, `delete ${path}`, true);\n            return res;\n        });\n    }\n    async updateExample(exampleIdOrUpdate, update) {\n        let exampleId;\n        if (update) {\n            exampleId = exampleIdOrUpdate;\n        } else {\n            exampleId = exampleIdOrUpdate.id;\n        }\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(exampleId);\n        let updateToUse;\n        if (update) {\n            updateToUse = {\n                id: exampleId,\n                ...update\n            };\n        } else {\n            updateToUse = exampleIdOrUpdate;\n        }\n        let datasetId;\n        if (updateToUse.dataset_id !== undefined) {\n            datasetId = updateToUse.dataset_id;\n        } else {\n            const example = await this.readExample(exampleId);\n            datasetId = example.dataset_id;\n        }\n        return this._updateExamplesMultipart(datasetId, [\n            updateToUse\n        ]);\n    }\n    async updateExamples(update) {\n        // We will naively get dataset id from first example and assume it works for all\n        let datasetId;\n        if (update[0].dataset_id === undefined) {\n            const example = await this.readExample(update[0].id);\n            datasetId = example.dataset_id;\n        } else {\n            datasetId = update[0].dataset_id;\n        }\n        return this._updateExamplesMultipart(datasetId, update);\n    }\n    /**\n     * Get dataset version by closest date or exact tag.\n     *\n     * Use this to resolve the nearest version to a given timestamp or for a given tag.\n     *\n     * @param options The options for getting the dataset version\n     * @param options.datasetId The ID of the dataset\n     * @param options.datasetName The name of the dataset\n     * @param options.asOf The timestamp of the dataset to retrieve\n     * @param options.tag The tag of the dataset to retrieve\n     * @returns The dataset version\n     */ async readDatasetVersion({ datasetId, datasetName, asOf, tag }) {\n        let resolvedDatasetId;\n        if (!datasetId) {\n            const dataset = await this.readDataset({\n                datasetName\n            });\n            resolvedDatasetId = dataset.id;\n        } else {\n            resolvedDatasetId = datasetId;\n        }\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(resolvedDatasetId);\n        if (asOf && tag || !asOf && !tag) {\n            throw new Error(\"Exactly one of asOf and tag must be specified.\");\n        }\n        const params = new URLSearchParams();\n        if (asOf !== undefined) {\n            params.append(\"as_of\", typeof asOf === \"string\" ? asOf : asOf.toISOString());\n        }\n        if (tag !== undefined) {\n            params.append(\"tag\", tag);\n        }\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets/${resolvedDatasetId}/version?${params.toString()}`, {\n                method: \"GET\",\n                headers: {\n                    ...this.headers\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"read dataset version\");\n            return res;\n        });\n        return await response.json();\n    }\n    async listDatasetSplits({ datasetId, datasetName, asOf }) {\n        let datasetId_;\n        if (datasetId === undefined && datasetName === undefined) {\n            throw new Error(\"Must provide dataset name or ID\");\n        } else if (datasetId !== undefined && datasetName !== undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId, not both\");\n        } else if (datasetId === undefined) {\n            const dataset = await this.readDataset({\n                datasetName\n            });\n            datasetId_ = dataset.id;\n        } else {\n            datasetId_ = datasetId;\n        }\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(datasetId_);\n        const params = new URLSearchParams();\n        const dataset_version = asOf ? typeof asOf === \"string\" ? asOf : asOf?.toISOString() : undefined;\n        if (dataset_version) {\n            params.append(\"as_of\", dataset_version);\n        }\n        const response = await this._get(`/datasets/${datasetId_}/splits`, params);\n        return response;\n    }\n    async updateDatasetSplits({ datasetId, datasetName, splitName, exampleIds, remove = false }) {\n        let datasetId_;\n        if (datasetId === undefined && datasetName === undefined) {\n            throw new Error(\"Must provide dataset name or ID\");\n        } else if (datasetId !== undefined && datasetName !== undefined) {\n            throw new Error(\"Must provide either datasetName or datasetId, not both\");\n        } else if (datasetId === undefined) {\n            const dataset = await this.readDataset({\n                datasetName\n            });\n            datasetId_ = dataset.id;\n        } else {\n            datasetId_ = datasetId;\n        }\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(datasetId_);\n        const data = {\n            split_name: splitName,\n            examples: exampleIds.map((id)=>{\n                (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(id);\n                return id;\n            }),\n            remove\n        };\n        const body = JSON.stringify(data);\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets/${datasetId_}/splits`, {\n                method: \"PUT\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"update dataset splits\", true);\n            return res;\n        });\n    }\n    /**\n     * @deprecated This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.\n     */ async evaluateRun(run, evaluator, { sourceInfo, loadChildRuns, referenceExample } = {\n        loadChildRuns: false\n    }) {\n        (0,_utils_warn_js__WEBPACK_IMPORTED_MODULE_7__.warnOnce)(\"This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.\");\n        let run_;\n        if (typeof run === \"string\") {\n            run_ = await this.readRun(run, {\n                loadChildRuns\n            });\n        } else if (typeof run === \"object\" && \"id\" in run) {\n            run_ = run;\n        } else {\n            throw new Error(`Invalid run type: ${typeof run}`);\n        }\n        if (run_.reference_example_id !== null && run_.reference_example_id !== undefined) {\n            referenceExample = await this.readExample(run_.reference_example_id);\n        }\n        const feedbackResult = await evaluator.evaluateRun(run_, referenceExample);\n        const [_, feedbacks] = await this._logEvaluationFeedback(feedbackResult, run_, sourceInfo);\n        return feedbacks[0];\n    }\n    async createFeedback(runId, key, { score, value, correction, comment, sourceInfo, feedbackSourceType = \"api\", sourceRunId, feedbackId, feedbackConfig, projectId, comparativeExperimentId }) {\n        if (!runId && !projectId) {\n            throw new Error(\"One of runId or projectId must be provided\");\n        }\n        if (runId && projectId) {\n            throw new Error(\"Only one of runId or projectId can be provided\");\n        }\n        const feedback_source = {\n            type: feedbackSourceType ?? \"api\",\n            metadata: sourceInfo ?? {}\n        };\n        if (sourceRunId !== undefined && feedback_source?.metadata !== undefined && !feedback_source.metadata[\"__run\"]) {\n            feedback_source.metadata[\"__run\"] = {\n                run_id: sourceRunId\n            };\n        }\n        if (feedback_source?.metadata !== undefined && feedback_source.metadata[\"__run\"]?.run_id !== undefined) {\n            (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(feedback_source.metadata[\"__run\"].run_id);\n        }\n        const feedback = {\n            id: feedbackId ?? uuid__WEBPACK_IMPORTED_MODULE_12__[\"default\"](),\n            run_id: runId,\n            key,\n            score: _formatFeedbackScore(score),\n            value,\n            correction,\n            comment,\n            feedback_source: feedback_source,\n            comparative_experiment_id: comparativeExperimentId,\n            feedbackConfig,\n            session_id: projectId\n        };\n        const body = JSON.stringify(feedback);\n        const url = `${this.apiUrl}/feedback`;\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(url, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"create feedback\", true);\n            return res;\n        });\n        return feedback;\n    }\n    async updateFeedback(feedbackId, { score, value, correction, comment }) {\n        const feedbackUpdate = {};\n        if (score !== undefined && score !== null) {\n            feedbackUpdate[\"score\"] = _formatFeedbackScore(score);\n        }\n        if (value !== undefined && value !== null) {\n            feedbackUpdate[\"value\"] = value;\n        }\n        if (correction !== undefined && correction !== null) {\n            feedbackUpdate[\"correction\"] = correction;\n        }\n        if (comment !== undefined && comment !== null) {\n            feedbackUpdate[\"comment\"] = comment;\n        }\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(feedbackId);\n        const body = JSON.stringify(feedbackUpdate);\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/feedback/${feedbackId}`, {\n                method: \"PATCH\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"update feedback\", true);\n            return res;\n        });\n    }\n    async readFeedback(feedbackId) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(feedbackId);\n        const path = `/feedback/${feedbackId}`;\n        const response = await this._get(path);\n        return response;\n    }\n    async deleteFeedback(feedbackId) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(feedbackId);\n        const path = `/feedback/${feedbackId}`;\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(this.apiUrl + path, {\n                method: \"DELETE\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, `delete ${path}`, true);\n            return res;\n        });\n    }\n    async *listFeedback({ runIds, feedbackKeys, feedbackSourceTypes } = {}) {\n        const queryParams = new URLSearchParams();\n        if (runIds) {\n            for (const runId of runIds){\n                (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(runId);\n                queryParams.append(\"run\", runId);\n            }\n        }\n        if (feedbackKeys) {\n            for (const key of feedbackKeys){\n                queryParams.append(\"key\", key);\n            }\n        }\n        if (feedbackSourceTypes) {\n            for (const type of feedbackSourceTypes){\n                queryParams.append(\"source\", type);\n            }\n        }\n        for await (const feedbacks of this._getPaginated(\"/feedback\", queryParams)){\n            yield* feedbacks;\n        }\n    }\n    /**\n     * Creates a presigned feedback token and URL.\n     *\n     * The token can be used to authorize feedback metrics without\n     * needing an API key. This is useful for giving browser-based\n     * applications the ability to submit feedback without needing\n     * to expose an API key.\n     *\n     * @param runId The ID of the run.\n     * @param feedbackKey The feedback key.\n     * @param options Additional options for the token.\n     * @param options.expiration The expiration time for the token.\n     *\n     * @returns A promise that resolves to a FeedbackIngestToken.\n     */ async createPresignedFeedbackToken(runId, feedbackKey, { expiration, feedbackConfig } = {}) {\n        const body = {\n            run_id: runId,\n            feedback_key: feedbackKey,\n            feedback_config: feedbackConfig\n        };\n        if (expiration) {\n            if (typeof expiration === \"string\") {\n                body[\"expires_at\"] = expiration;\n            } else if (expiration?.hours || expiration?.minutes || expiration?.days) {\n                body[\"expires_in\"] = expiration;\n            }\n        } else {\n            body[\"expires_in\"] = {\n                hours: 3\n            };\n        }\n        const serializedBody = JSON.stringify(body);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/feedback/tokens`, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body: serializedBody\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"create presigned feedback token\");\n            return res;\n        });\n        return await response.json();\n    }\n    async createComparativeExperiment({ name, experimentIds, referenceDatasetId, createdAt, description, metadata, id }) {\n        if (experimentIds.length === 0) {\n            throw new Error(\"At least one experiment is required\");\n        }\n        if (!referenceDatasetId) {\n            referenceDatasetId = (await this.readProject({\n                projectId: experimentIds[0]\n            })).reference_dataset_id;\n        }\n        if (!referenceDatasetId == null) {\n            throw new Error(\"A reference dataset is required\");\n        }\n        const body = {\n            id,\n            name,\n            experiment_ids: experimentIds,\n            reference_dataset_id: referenceDatasetId,\n            description,\n            created_at: (createdAt ?? new Date())?.toISOString(),\n            extra: {}\n        };\n        if (metadata) body.extra[\"metadata\"] = metadata;\n        const serializedBody = JSON.stringify(body);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/datasets/comparative`, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body: serializedBody\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"create comparative experiment\");\n            return res;\n        });\n        return response.json();\n    }\n    /**\n     * Retrieves a list of presigned feedback tokens for a given run ID.\n     * @param runId The ID of the run.\n     * @returns An async iterable of FeedbackIngestToken objects.\n     */ async *listPresignedFeedbackTokens(runId) {\n        (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(runId);\n        const params = new URLSearchParams({\n            run_id: runId\n        });\n        for await (const tokens of this._getPaginated(\"/feedback/tokens\", params)){\n            yield* tokens;\n        }\n    }\n    _selectEvalResults(results) {\n        let results_;\n        if (\"results\" in results) {\n            results_ = results.results;\n        } else if (Array.isArray(results)) {\n            results_ = results;\n        } else {\n            results_ = [\n                results\n            ];\n        }\n        return results_;\n    }\n    async _logEvaluationFeedback(evaluatorResponse, run, sourceInfo) {\n        const evalResults = this._selectEvalResults(evaluatorResponse);\n        const feedbacks = [];\n        for (const res of evalResults){\n            let sourceInfo_ = sourceInfo || {};\n            if (res.evaluatorInfo) {\n                sourceInfo_ = {\n                    ...res.evaluatorInfo,\n                    ...sourceInfo_\n                };\n            }\n            let runId_ = null;\n            if (res.targetRunId) {\n                runId_ = res.targetRunId;\n            } else if (run) {\n                runId_ = run.id;\n            }\n            feedbacks.push(await this.createFeedback(runId_, res.key, {\n                score: res.score,\n                value: res.value,\n                comment: res.comment,\n                correction: res.correction,\n                sourceInfo: sourceInfo_,\n                sourceRunId: res.sourceRunId,\n                feedbackConfig: res.feedbackConfig,\n                feedbackSourceType: \"model\"\n            }));\n        }\n        return [\n            evalResults,\n            feedbacks\n        ];\n    }\n    async logEvaluationFeedback(evaluatorResponse, run, sourceInfo) {\n        const [results] = await this._logEvaluationFeedback(evaluatorResponse, run, sourceInfo);\n        return results;\n    }\n    /**\n     * API for managing annotation queues\n     */ /**\n     * List the annotation queues on the LangSmith API.\n     * @param options - The options for listing annotation queues\n     * @param options.queueIds - The IDs of the queues to filter by\n     * @param options.name - The name of the queue to filter by\n     * @param options.nameContains - The substring that the queue name should contain\n     * @param options.limit - The maximum number of queues to return\n     * @returns An iterator of AnnotationQueue objects\n     */ async *listAnnotationQueues(options = {}) {\n        const { queueIds, name, nameContains, limit } = options;\n        const params = new URLSearchParams();\n        if (queueIds) {\n            queueIds.forEach((id, i)=>{\n                (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(id, `queueIds[${i}]`);\n                params.append(\"ids\", id);\n            });\n        }\n        if (name) params.append(\"name\", name);\n        if (nameContains) params.append(\"name_contains\", nameContains);\n        params.append(\"limit\", (limit !== undefined ? Math.min(limit, 100) : 100).toString());\n        let count = 0;\n        for await (const queues of this._getPaginated(\"/annotation-queues\", params)){\n            yield* queues;\n            count++;\n            if (limit !== undefined && count >= limit) break;\n        }\n    }\n    /**\n     * Create an annotation queue on the LangSmith API.\n     * @param options - The options for creating an annotation queue\n     * @param options.name - The name of the annotation queue\n     * @param options.description - The description of the annotation queue\n     * @param options.queueId - The ID of the annotation queue\n     * @returns The created AnnotationQueue object\n     */ async createAnnotationQueue(options) {\n        const { name, description, queueId, rubricInstructions } = options;\n        const body = {\n            name,\n            description,\n            id: queueId || uuid__WEBPACK_IMPORTED_MODULE_12__[\"default\"](),\n            rubric_instructions: rubricInstructions\n        };\n        const serializedBody = JSON.stringify(Object.fromEntries(Object.entries(body).filter(([_, v])=>v !== undefined)));\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/annotation-queues`, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body: serializedBody\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"create annotation queue\");\n            return res;\n        });\n        return response.json();\n    }\n    /**\n     * Read an annotation queue with the specified queue ID.\n     * @param queueId - The ID of the annotation queue to read\n     * @returns The AnnotationQueueWithDetails object\n     */ async readAnnotationQueue(queueId) {\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/annotation-queues/${(0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(queueId, \"queueId\")}`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"read annotation queue\");\n            return res;\n        });\n        return response.json();\n    }\n    /**\n     * Update an annotation queue with the specified queue ID.\n     * @param queueId - The ID of the annotation queue to update\n     * @param options - The options for updating the annotation queue\n     * @param options.name - The new name for the annotation queue\n     * @param options.description - The new description for the annotation queue\n     */ async updateAnnotationQueue(queueId, options) {\n        const { name, description, rubricInstructions } = options;\n        const body = JSON.stringify({\n            name,\n            description,\n            rubric_instructions: rubricInstructions\n        });\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/annotation-queues/${(0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(queueId, \"queueId\")}`, {\n                method: \"PATCH\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"update annotation queue\", true);\n            return res;\n        });\n    }\n    /**\n     * Delete an annotation queue with the specified queue ID.\n     * @param queueId - The ID of the annotation queue to delete\n     */ async deleteAnnotationQueue(queueId) {\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/annotation-queues/${(0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(queueId, \"queueId\")}`, {\n                method: \"DELETE\",\n                headers: {\n                    ...this.headers,\n                    Accept: \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"delete annotation queue\", true);\n            return res;\n        });\n    }\n    /**\n     * Add runs to an annotation queue with the specified queue ID.\n     * @param queueId - The ID of the annotation queue\n     * @param runIds - The IDs of the runs to be added to the annotation queue\n     */ async addRunsToAnnotationQueue(queueId, runIds) {\n        const body = JSON.stringify(runIds.map((id, i)=>(0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(id, `runIds[${i}]`).toString()));\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/annotation-queues/${(0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(queueId, \"queueId\")}/runs`, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"add runs to annotation queue\", true);\n            return res;\n        });\n    }\n    /**\n     * Get a run from an annotation queue at the specified index.\n     * @param queueId - The ID of the annotation queue\n     * @param index - The index of the run to retrieve\n     * @returns A Promise that resolves to a RunWithAnnotationQueueInfo object\n     * @throws {Error} If the run is not found at the given index or for other API-related errors\n     */ async getRunFromAnnotationQueue(queueId, index) {\n        const baseUrl = `/annotation-queues/${(0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(queueId, \"queueId\")}/run`;\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}${baseUrl}/${index}`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"get run from annotation queue\");\n            return res;\n        });\n        return response.json();\n    }\n    /**\n     * Delete a run from an an annotation queue.\n     * @param queueId - The ID of the annotation queue to delete the run from\n     * @param queueRunId - The ID of the run to delete from the annotation queue\n     */ async deleteRunFromAnnotationQueue(queueId, queueRunId) {\n        await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/annotation-queues/${(0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(queueId, \"queueId\")}/runs/${(0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(queueRunId, \"queueRunId\")}`, {\n                method: \"DELETE\",\n                headers: {\n                    ...this.headers,\n                    Accept: \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"delete run from annotation queue\", true);\n            return res;\n        });\n    }\n    /**\n     * Get the size of an annotation queue.\n     * @param queueId - The ID of the annotation queue\n     */ async getSizeFromAnnotationQueue(queueId) {\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/annotation-queues/${(0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(queueId, \"queueId\")}/size`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"get size from annotation queue\");\n            return res;\n        });\n        return response.json();\n    }\n    async _currentTenantIsOwner(owner) {\n        const settings = await this._getSettings();\n        return owner == \"-\" || settings.tenant_handle === owner;\n    }\n    async _ownerConflictError(action, owner) {\n        const settings = await this._getSettings();\n        return new Error(`Cannot ${action} for another tenant.\\n\n      Current tenant: ${settings.tenant_handle}\\n\n      Requested tenant: ${owner}`);\n    }\n    async _getLatestCommitHash(promptOwnerAndName) {\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/commits/${promptOwnerAndName}/?limit=${1}&offset=${0}`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"get latest commit hash\");\n            return res;\n        });\n        const json = await response.json();\n        if (json.commits.length === 0) {\n            return undefined;\n        }\n        return json.commits[0].commit_hash;\n    }\n    async _likeOrUnlikePrompt(promptIdentifier, like) {\n        const [owner, promptName, _] = (0,_utils_prompts_js__WEBPACK_IMPORTED_MODULE_8__.parsePromptIdentifier)(promptIdentifier);\n        const body = JSON.stringify({\n            like: like\n        });\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/likes/${owner}/${promptName}`, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, `${like ? \"like\" : \"unlike\"} prompt`);\n            return res;\n        });\n        return response.json();\n    }\n    async _getPromptUrl(promptIdentifier) {\n        const [owner, promptName, commitHash] = (0,_utils_prompts_js__WEBPACK_IMPORTED_MODULE_8__.parsePromptIdentifier)(promptIdentifier);\n        if (!await this._currentTenantIsOwner(owner)) {\n            if (commitHash !== \"latest\") {\n                return `${this.getHostUrl()}/hub/${owner}/${promptName}/${commitHash.substring(0, 8)}`;\n            } else {\n                return `${this.getHostUrl()}/hub/${owner}/${promptName}`;\n            }\n        } else {\n            const settings = await this._getSettings();\n            if (commitHash !== \"latest\") {\n                return `${this.getHostUrl()}/prompts/${promptName}/${commitHash.substring(0, 8)}?organizationId=${settings.id}`;\n            } else {\n                return `${this.getHostUrl()}/prompts/${promptName}?organizationId=${settings.id}`;\n            }\n        }\n    }\n    async promptExists(promptIdentifier) {\n        const prompt = await this.getPrompt(promptIdentifier);\n        return !!prompt;\n    }\n    async likePrompt(promptIdentifier) {\n        return this._likeOrUnlikePrompt(promptIdentifier, true);\n    }\n    async unlikePrompt(promptIdentifier) {\n        return this._likeOrUnlikePrompt(promptIdentifier, false);\n    }\n    async *listCommits(promptOwnerAndName) {\n        for await (const commits of this._getPaginated(`/commits/${promptOwnerAndName}/`, new URLSearchParams(), (res)=>res.commits)){\n            yield* commits;\n        }\n    }\n    async *listPrompts(options) {\n        const params = new URLSearchParams();\n        params.append(\"sort_field\", options?.sortField ?? \"updated_at\");\n        params.append(\"sort_direction\", \"desc\");\n        params.append(\"is_archived\", (!!options?.isArchived).toString());\n        if (options?.isPublic !== undefined) {\n            params.append(\"is_public\", options.isPublic.toString());\n        }\n        if (options?.query) {\n            params.append(\"query\", options.query);\n        }\n        for await (const prompts of this._getPaginated(\"/repos\", params, (res)=>res.repos)){\n            yield* prompts;\n        }\n    }\n    async getPrompt(promptIdentifier) {\n        const [owner, promptName, _] = (0,_utils_prompts_js__WEBPACK_IMPORTED_MODULE_8__.parsePromptIdentifier)(promptIdentifier);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/repos/${owner}/${promptName}`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            if (res?.status === 404) {\n                return null;\n            }\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"get prompt\");\n            return res;\n        });\n        const result = await response?.json();\n        if (result?.repo) {\n            return result.repo;\n        } else {\n            return null;\n        }\n    }\n    async createPrompt(promptIdentifier, options) {\n        const settings = await this._getSettings();\n        if (options?.isPublic && !settings.tenant_handle) {\n            throw new Error(`Cannot create a public prompt without first\\n\n        creating a LangChain Hub handle.\n        You can add a handle by creating a public prompt at:\\n\n        https://smith.langchain.com/prompts`);\n        }\n        const [owner, promptName, _] = (0,_utils_prompts_js__WEBPACK_IMPORTED_MODULE_8__.parsePromptIdentifier)(promptIdentifier);\n        if (!await this._currentTenantIsOwner(owner)) {\n            throw await this._ownerConflictError(\"create a prompt\", owner);\n        }\n        const data = {\n            repo_handle: promptName,\n            ...options?.description && {\n                description: options.description\n            },\n            ...options?.readme && {\n                readme: options.readme\n            },\n            ...options?.tags && {\n                tags: options.tags\n            },\n            is_public: !!options?.isPublic\n        };\n        const body = JSON.stringify(data);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/repos/`, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"create prompt\");\n            return res;\n        });\n        const { repo } = await response.json();\n        return repo;\n    }\n    async createCommit(promptIdentifier, object, options) {\n        if (!await this.promptExists(promptIdentifier)) {\n            throw new Error(\"Prompt does not exist, you must create it first.\");\n        }\n        const [owner, promptName, _] = (0,_utils_prompts_js__WEBPACK_IMPORTED_MODULE_8__.parsePromptIdentifier)(promptIdentifier);\n        const resolvedParentCommitHash = options?.parentCommitHash === \"latest\" || !options?.parentCommitHash ? await this._getLatestCommitHash(`${owner}/${promptName}`) : options?.parentCommitHash;\n        const payload = {\n            manifest: JSON.parse(JSON.stringify(object)),\n            parent_commit: resolvedParentCommitHash\n        };\n        const body = JSON.stringify(payload);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/commits/${owner}/${promptName}`, {\n                method: \"POST\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"create commit\");\n            return res;\n        });\n        const result = await response.json();\n        return this._getPromptUrl(`${owner}/${promptName}${result.commit_hash ? `:${result.commit_hash}` : \"\"}`);\n    }\n    /**\n     * Update examples with attachments using multipart form data.\n     * @param updates List of ExampleUpdateWithAttachments objects to upsert\n     * @returns Promise with the update response\n     */ async updateExamplesMultipart(datasetId, updates = []) {\n        return this._updateExamplesMultipart(datasetId, updates);\n    }\n    async _updateExamplesMultipart(datasetId, updates = []) {\n        if (!await this._getDatasetExamplesMultiPartSupport()) {\n            throw new Error(\"Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.\");\n        }\n        const formData = new FormData();\n        for (const example of updates){\n            const exampleId = example.id;\n            // Prepare the main example body\n            const exampleBody = {\n                ...example.metadata && {\n                    metadata: example.metadata\n                },\n                ...example.split && {\n                    split: example.split\n                }\n            };\n            // Add main example data\n            const stringifiedExample = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(exampleBody, `Serializing body for example with id: ${exampleId}`);\n            const exampleBlob = new Blob([\n                stringifiedExample\n            ], {\n                type: \"application/json\"\n            });\n            formData.append(exampleId, exampleBlob);\n            // Add inputs if present\n            if (example.inputs) {\n                const stringifiedInputs = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(example.inputs, `Serializing inputs for example with id: ${exampleId}`);\n                const inputsBlob = new Blob([\n                    stringifiedInputs\n                ], {\n                    type: \"application/json\"\n                });\n                formData.append(`${exampleId}.inputs`, inputsBlob);\n            }\n            // Add outputs if present\n            if (example.outputs) {\n                const stringifiedOutputs = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(example.outputs, `Serializing outputs whle updating example with id: ${exampleId}`);\n                const outputsBlob = new Blob([\n                    stringifiedOutputs\n                ], {\n                    type: \"application/json\"\n                });\n                formData.append(`${exampleId}.outputs`, outputsBlob);\n            }\n            // Add attachments if present\n            if (example.attachments) {\n                for (const [name, attachment] of Object.entries(example.attachments)){\n                    let mimeType;\n                    let data;\n                    if (Array.isArray(attachment)) {\n                        [mimeType, data] = attachment;\n                    } else {\n                        mimeType = attachment.mimeType;\n                        data = attachment.data;\n                    }\n                    const attachmentBlob = new Blob([\n                        data\n                    ], {\n                        type: `${mimeType}; length=${data.byteLength}`\n                    });\n                    formData.append(`${exampleId}.attachment.${name}`, attachmentBlob);\n                }\n            }\n            if (example.attachments_operations) {\n                const stringifiedAttachmentsOperations = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(example.attachments_operations, `Serializing attachments while updating example with id: ${exampleId}`);\n                const attachmentsOperationsBlob = new Blob([\n                    stringifiedAttachmentsOperations\n                ], {\n                    type: \"application/json\"\n                });\n                formData.append(`${exampleId}.attachments_operations`, attachmentsOperationsBlob);\n            }\n        }\n        const datasetIdToUse = datasetId ?? updates[0]?.dataset_id;\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${datasetIdToUse}/examples`)}`, {\n                method: \"PATCH\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body: formData\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"update examples\");\n            return res;\n        });\n        return response.json();\n    }\n    /**\n     * Upload examples with attachments using multipart form data.\n     * @param uploads List of ExampleUploadWithAttachments objects to upload\n     * @returns Promise with the upload response\n     * @deprecated This method is deprecated and will be removed in future LangSmith versions, please use `createExamples` instead\n     */ async uploadExamplesMultipart(datasetId, uploads = []) {\n        return this._uploadExamplesMultipart(datasetId, uploads);\n    }\n    async _uploadExamplesMultipart(datasetId, uploads = []) {\n        if (!await this._getDatasetExamplesMultiPartSupport()) {\n            throw new Error(\"Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.\");\n        }\n        const formData = new FormData();\n        for (const example of uploads){\n            const exampleId = (example.id ?? uuid__WEBPACK_IMPORTED_MODULE_12__[\"default\"]()).toString();\n            // Prepare the main example body\n            const exampleBody = {\n                created_at: example.created_at,\n                ...example.metadata && {\n                    metadata: example.metadata\n                },\n                ...example.split && {\n                    split: example.split\n                },\n                ...example.source_run_id && {\n                    source_run_id: example.source_run_id\n                },\n                ...example.use_source_run_io && {\n                    use_source_run_io: example.use_source_run_io\n                },\n                ...example.use_source_run_attachments && {\n                    use_source_run_attachments: example.use_source_run_attachments\n                }\n            };\n            // Add main example data\n            const stringifiedExample = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(exampleBody, `Serializing body for uploaded example with id: ${exampleId}`);\n            const exampleBlob = new Blob([\n                stringifiedExample\n            ], {\n                type: \"application/json\"\n            });\n            formData.append(exampleId, exampleBlob);\n            // Add inputs if present\n            if (example.inputs) {\n                const stringifiedInputs = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(example.inputs, `Serializing inputs for uploaded example with id: ${exampleId}`);\n                const inputsBlob = new Blob([\n                    stringifiedInputs\n                ], {\n                    type: \"application/json\"\n                });\n                formData.append(`${exampleId}.inputs`, inputsBlob);\n            }\n            // Add outputs if present\n            if (example.outputs) {\n                const stringifiedOutputs = (0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_11__.serialize)(example.outputs, `Serializing outputs for uploaded example with id: ${exampleId}`);\n                const outputsBlob = new Blob([\n                    stringifiedOutputs\n                ], {\n                    type: \"application/json\"\n                });\n                formData.append(`${exampleId}.outputs`, outputsBlob);\n            }\n            // Add attachments if present\n            if (example.attachments) {\n                for (const [name, attachment] of Object.entries(example.attachments)){\n                    let mimeType;\n                    let data;\n                    if (Array.isArray(attachment)) {\n                        [mimeType, data] = attachment;\n                    } else {\n                        mimeType = attachment.mimeType;\n                        data = attachment.data;\n                    }\n                    const attachmentBlob = new Blob([\n                        data\n                    ], {\n                        type: `${mimeType}; length=${data.byteLength}`\n                    });\n                    formData.append(`${exampleId}.attachment.${name}`, attachmentBlob);\n                }\n            }\n        }\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${datasetId}/examples`)}`, {\n                method: \"POST\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body: formData\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"upload examples\");\n            return res;\n        });\n        return response.json();\n    }\n    async updatePrompt(promptIdentifier, options) {\n        if (!await this.promptExists(promptIdentifier)) {\n            throw new Error(\"Prompt does not exist, you must create it first.\");\n        }\n        const [owner, promptName] = (0,_utils_prompts_js__WEBPACK_IMPORTED_MODULE_8__.parsePromptIdentifier)(promptIdentifier);\n        if (!await this._currentTenantIsOwner(owner)) {\n            throw await this._ownerConflictError(\"update a prompt\", owner);\n        }\n        const payload = {};\n        if (options?.description !== undefined) payload.description = options.description;\n        if (options?.readme !== undefined) payload.readme = options.readme;\n        if (options?.tags !== undefined) payload.tags = options.tags;\n        if (options?.isPublic !== undefined) payload.is_public = options.isPublic;\n        if (options?.isArchived !== undefined) payload.is_archived = options.isArchived;\n        // Check if payload is empty\n        if (Object.keys(payload).length === 0) {\n            throw new Error(\"No valid update options provided\");\n        }\n        const body = JSON.stringify(payload);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/repos/${owner}/${promptName}`, {\n                method: \"PATCH\",\n                headers: {\n                    ...this.headers,\n                    \"Content-Type\": \"application/json\"\n                },\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions,\n                body\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"update prompt\");\n            return res;\n        });\n        return response.json();\n    }\n    async deletePrompt(promptIdentifier) {\n        if (!await this.promptExists(promptIdentifier)) {\n            throw new Error(\"Prompt does not exist, you must create it first.\");\n        }\n        const [owner, promptName, _] = (0,_utils_prompts_js__WEBPACK_IMPORTED_MODULE_8__.parsePromptIdentifier)(promptIdentifier);\n        if (!await this._currentTenantIsOwner(owner)) {\n            throw await this._ownerConflictError(\"delete a prompt\", owner);\n        }\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/repos/${owner}/${promptName}`, {\n                method: \"DELETE\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"delete prompt\");\n            return res;\n        });\n        return response.json();\n    }\n    async pullPromptCommit(promptIdentifier, options) {\n        const [owner, promptName, commitHash] = (0,_utils_prompts_js__WEBPACK_IMPORTED_MODULE_8__.parsePromptIdentifier)(promptIdentifier);\n        const response = await this.caller.call(async ()=>{\n            const res = await this._fetch(`${this.apiUrl}/commits/${owner}/${promptName}/${commitHash}${options?.includeModel ? \"?include_model=true\" : \"\"}`, {\n                method: \"GET\",\n                headers: this.headers,\n                signal: AbortSignal.timeout(this.timeout_ms),\n                ...this.fetchOptions\n            });\n            await (0,_utils_error_js__WEBPACK_IMPORTED_MODULE_9__.raiseForStatus)(res, \"pull prompt commit\");\n            return res;\n        });\n        const result = await response.json();\n        return {\n            owner,\n            repo: promptName,\n            commit_hash: result.commit_hash,\n            manifest: result.manifest,\n            examples: result.examples\n        };\n    }\n    /**\n     * This method should not be used directly, use `import { pull } from \"langchain/hub\"` instead.\n     * Using this method directly returns the JSON string of the prompt rather than a LangChain object.\n     * @private\n     */ async _pullPrompt(promptIdentifier, options) {\n        const promptObject = await this.pullPromptCommit(promptIdentifier, {\n            includeModel: options?.includeModel\n        });\n        const prompt = JSON.stringify(promptObject.manifest);\n        return prompt;\n    }\n    async pushPrompt(promptIdentifier, options) {\n        // Create or update prompt metadata\n        if (await this.promptExists(promptIdentifier)) {\n            if (options && Object.keys(options).some((key)=>key !== \"object\")) {\n                await this.updatePrompt(promptIdentifier, {\n                    description: options?.description,\n                    readme: options?.readme,\n                    tags: options?.tags,\n                    isPublic: options?.isPublic\n                });\n            }\n        } else {\n            await this.createPrompt(promptIdentifier, {\n                description: options?.description,\n                readme: options?.readme,\n                tags: options?.tags,\n                isPublic: options?.isPublic\n            });\n        }\n        if (!options?.object) {\n            return await this._getPromptUrl(promptIdentifier);\n        }\n        // Create a commit with the new manifest\n        const url = await this.createCommit(promptIdentifier, options?.object, {\n            parentCommitHash: options?.parentCommitHash\n        });\n        return url;\n    }\n    /**\n     * Clone a public dataset to your own langsmith tenant.\n     * This operation is idempotent. If you already have a dataset with the given name,\n     * this function will do nothing.\n  \n     * @param {string} tokenOrUrl The token of the public dataset to clone.\n     * @param {Object} [options] Additional options for cloning the dataset.\n     * @param {string} [options.sourceApiUrl] The URL of the langsmith server where the data is hosted. Defaults to the API URL of your current client.\n     * @param {string} [options.datasetName] The name of the dataset to create in your tenant. Defaults to the name of the public dataset.\n     * @returns {Promise<void>}\n     */ async clonePublicDataset(tokenOrUrl, options = {}) {\n        const { sourceApiUrl = this.apiUrl, datasetName } = options;\n        const [parsedApiUrl, tokenUuid] = this.parseTokenOrUrl(tokenOrUrl, sourceApiUrl);\n        const sourceClient = new Client({\n            apiUrl: parsedApiUrl,\n            // Placeholder API key not needed anymore in most cases, but\n            // some private deployments may have API key-based rate limiting\n            // that would cause this to fail if we provide no value.\n            apiKey: \"placeholder\"\n        });\n        const ds = await sourceClient.readSharedDataset(tokenUuid);\n        const finalDatasetName = datasetName || ds.name;\n        try {\n            if (await this.hasDataset({\n                datasetId: finalDatasetName\n            })) {\n                console.log(`Dataset ${finalDatasetName} already exists in your tenant. Skipping.`);\n                return;\n            }\n        } catch (_) {\n        // `.hasDataset` will throw an error if the dataset does not exist.\n        // no-op in that case\n        }\n        // Fetch examples first, then create the dataset\n        const examples = await sourceClient.listSharedExamples(tokenUuid);\n        const dataset = await this.createDataset(finalDatasetName, {\n            description: ds.description,\n            dataType: ds.data_type || \"kv\",\n            inputsSchema: ds.inputs_schema_definition ?? undefined,\n            outputsSchema: ds.outputs_schema_definition ?? undefined\n        });\n        try {\n            await this.createExamples({\n                inputs: examples.map((e)=>e.inputs),\n                outputs: examples.flatMap((e)=>e.outputs ? [\n                        e.outputs\n                    ] : []),\n                datasetId: dataset.id\n            });\n        } catch (e) {\n            console.error(`An error occurred while creating dataset ${finalDatasetName}. ` + \"You should delete it manually.\");\n            throw e;\n        }\n    }\n    parseTokenOrUrl(urlOrToken, apiUrl, numParts = 2, kind = \"dataset\") {\n        // Try parsing as UUID\n        try {\n            (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_6__.assertUuid)(urlOrToken); // Will throw if it's not a UUID.\n            return [\n                apiUrl,\n                urlOrToken\n            ];\n        } catch (_) {\n        // no-op if it's not a uuid\n        }\n        // Parse as URL\n        try {\n            const parsedUrl = new URL(urlOrToken);\n            const pathParts = parsedUrl.pathname.split(\"/\").filter((part)=>part !== \"\");\n            if (pathParts.length >= numParts) {\n                const tokenUuid = pathParts[pathParts.length - numParts];\n                return [\n                    apiUrl,\n                    tokenUuid\n                ];\n            } else {\n                throw new Error(`Invalid public ${kind} URL: ${urlOrToken}`);\n            }\n        } catch (error) {\n            throw new Error(`Invalid public ${kind} URL or token: ${urlOrToken}`);\n        }\n    }\n    /**\n     * Awaits all pending trace batches. Useful for environments where\n     * you need to be sure that all tracing requests finish before execution ends,\n     * such as serverless environments.\n     *\n     * @example\n     * ```\n     * import { Client } from \"langsmith\";\n     *\n     * const client = new Client();\n     *\n     * try {\n     *   // Tracing happens here\n     *   ...\n     * } finally {\n     *   await client.awaitPendingTraceBatches();\n     * }\n     * ```\n     *\n     * @returns A promise that resolves once all currently pending traces have sent.\n     */ async awaitPendingTraceBatches() {\n        if (this.manualFlushMode) {\n            console.warn(\"[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches.\");\n            return Promise.resolve();\n        }\n        await Promise.all([\n            ...this.autoBatchQueue.items.map(({ itemPromise })=>itemPromise),\n            this.batchIngestCaller.queue.onIdle()\n        ]);\n        if (this.langSmithToOTELTranslator !== undefined) {\n            await (0,_singletons_otel_js__WEBPACK_IMPORTED_MODULE_1__.getDefaultOTLPTracerComponents)()?.DEFAULT_LANGSMITH_SPAN_PROCESSOR?.forceFlush();\n        }\n    }\n}\nfunction isExampleCreate(input) {\n    return \"dataset_id\" in input || \"dataset_name\" in input;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9jbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZCO0FBQ2tEO0FBQ3NCO0FBQy9DO0FBQ3NDO0FBQzBFO0FBQzdIO0FBQ0s7QUFDSDtBQUNnQjtBQUNUO0FBQ3NEO0FBQ1Q7QUFDeEYsU0FBU3VCLHVCQUF1QkMsR0FBRyxFQUFFQyxhQUFhO0lBQ3JELE1BQU1DLGFBQWFmLG9FQUFxQkE7SUFDeEMsTUFBTWdCLFVBQVVGLGlCQUFpQmhCLDBFQUEyQkE7SUFDNUQsTUFBTW1CLFFBQVFKLElBQUlJLEtBQUssSUFBSSxDQUFDO0lBQzVCLE1BQU1DLFdBQVdELE1BQU1DLFFBQVE7SUFDL0JMLElBQUlJLEtBQUssR0FBRztRQUNSLEdBQUdBLEtBQUs7UUFDUkUsU0FBUztZQUNMLEdBQUdKLFVBQVU7WUFDYixHQUFHRSxPQUFPRSxPQUFPO1FBQ3JCO1FBQ0FELFVBQVU7WUFDTixHQUFHRixPQUFPO1lBQ1YsR0FBSUEsUUFBUUksV0FBVyxJQUFLLGlCQUFpQlAsT0FBT0EsSUFBSU8sV0FBVyxHQUM3RDtnQkFDRUEsYUFBYSxDQUFDLGlCQUFpQlAsTUFBTUEsSUFBSU8sV0FBVyxHQUFHQyxTQUFRLEtBQzNETCxRQUFRSSxXQUFXO1lBQzNCLElBQ0UsQ0FBQyxDQUFDO1lBQ1IsR0FBR0YsUUFBUTtRQUNmO0lBQ0o7SUFDQSxPQUFPTDtBQUNYO0FBQ0EsTUFBTVMseUJBQXlCLENBQUNDO0lBQzVCLE1BQU1DLGtCQUFrQkQsWUFBWUUsY0FDaEMxQiw4RUFBK0JBLENBQUM7SUFDcEMsSUFBSXlCLG9CQUFvQkgsV0FBVztRQUMvQixPQUFPQTtJQUNYO0lBQ0EsTUFBTUssZUFBZUMsV0FBV0g7SUFDaEMsSUFBSUUsZUFBZSxLQUFLQSxlQUFlLEdBQUc7UUFDdEMsTUFBTSxJQUFJRSxNQUFNLENBQUMscUVBQXFFLEVBQUVGLGFBQWEs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Q0o7QUFDSjtBQUNBLFNBQVNwTixnQkFBZ0J3QixLQUFLO0lBQzFCLE9BQU8sZ0JBQWdCQSxTQUFTLGtCQUFrQkE7QUFDdEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9ub2RlX21vZHVsZXMvbGFuZ3NtaXRoL2Rpc3QvY2xpZW50LmpzPzBkMDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdXVpZCBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgTGFuZ1NtaXRoVG9PVEVMVHJhbnNsYXRvciwgfSBmcm9tIFwiLi9leHBlcmltZW50YWwvb3RlbC90cmFuc2xhdG9yLmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T1RMUFRyYWNlckNvbXBvbmVudHMsIGdldE9URUxUcmFjZSwgZ2V0T1RFTENvbnRleHQsIH0gZnJvbSBcIi4vc2luZ2xldG9ucy9vdGVsLmpzXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuL3V0aWxzL2FzeW5jX2NhbGxlci5qc1wiO1xuaW1wb3J0IHsgY29udmVydExhbmdDaGFpbk1lc3NhZ2VUb0V4YW1wbGUsIGlzTGFuZ0NoYWluTWVzc2FnZSwgfSBmcm9tIFwiLi91dGlscy9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSwgZ2V0TGFuZ1NtaXRoRW52VmFyc01ldGFkYXRhLCBnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlLCBnZXRSdW50aW1lRW52aXJvbm1lbnQsIGdldE90ZWxFbmFibGVkLCBnZXRFbnYsIH0gZnJvbSBcIi4vdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgeyBfX3ZlcnNpb25fXyB9IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBhc3NlcnRVdWlkIH0gZnJvbSBcIi4vdXRpbHMvX3V1aWQuanNcIjtcbmltcG9ydCB7IHdhcm5PbmNlIH0gZnJvbSBcIi4vdXRpbHMvd2Fybi5qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9tcHRJZGVudGlmaWVyIH0gZnJvbSBcIi4vdXRpbHMvcHJvbXB0cy5qc1wiO1xuaW1wb3J0IHsgcmFpc2VGb3JTdGF0dXMgfSBmcm9tIFwiLi91dGlscy9lcnJvci5qc1wiO1xuaW1wb3J0IHsgX2dsb2JhbEZldGNoSW1wbGVtZW50YXRpb25Jc05vZGVGZXRjaCwgX2dldEZldGNoSW1wbGVtZW50YXRpb24sIH0gZnJvbSBcIi4vc2luZ2xldG9ucy9mZXRjaC5qc1wiO1xuaW1wb3J0IHsgc2VyaWFsaXplIGFzIHNlcmlhbGl6ZVBheWxvYWRGb3JUcmFjaW5nIH0gZnJvbSBcIi4vdXRpbHMvZmFzdC1zYWZlLXN0cmluZ2lmeS9pbmRleC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlUnVudGltZUVudkludG9SdW4ocnVuLCBjYWNoZWRFbnZWYXJzKSB7XG4gICAgY29uc3QgcnVudGltZUVudiA9IGdldFJ1bnRpbWVFbnZpcm9ubWVudCgpO1xuICAgIGNvbnN0IGVudlZhcnMgPSBjYWNoZWRFbnZWYXJzID8/IGdldExhbmdTbWl0aEVudlZhcnNNZXRhZGF0YSgpO1xuICAgIGNvbnN0IGV4dHJhID0gcnVuLmV4dHJhID8/IHt9O1xuICAgIGNvbnN0IG1ldGFkYXRhID0gZXh0cmEubWV0YWRhdGE7XG4gICAgcnVuLmV4dHJhID0ge1xuICAgICAgICAuLi5leHRyYSxcbiAgICAgICAgcnVudGltZToge1xuICAgICAgICAgICAgLi4ucnVudGltZUVudixcbiAgICAgICAgICAgIC4uLmV4dHJhPy5ydW50aW1lLFxuICAgICAgICB9LFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgLi4uZW52VmFycyxcbiAgICAgICAgICAgIC4uLihlbnZWYXJzLnJldmlzaW9uX2lkIHx8IChcInJldmlzaW9uX2lkXCIgaW4gcnVuICYmIHJ1bi5yZXZpc2lvbl9pZClcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgcmV2aXNpb25faWQ6IChcInJldmlzaW9uX2lkXCIgaW4gcnVuID8gcnVuLnJldmlzaW9uX2lkIDogdW5kZWZpbmVkKSA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgZW52VmFycy5yZXZpc2lvbl9pZCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAuLi5tZXRhZGF0YSxcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIHJldHVybiBydW47XG59XG5jb25zdCBnZXRUcmFjaW5nU2FtcGxpbmdSYXRlID0gKGNvbmZpZ1JhdGUpID0+IHtcbiAgICBjb25zdCBzYW1wbGluZ1JhdGVTdHIgPSBjb25maWdSYXRlPy50b1N0cmluZygpID8/XG4gICAgICAgIGdldExhbmdTbWl0aEVudmlyb25tZW50VmFyaWFibGUoXCJUUkFDSU5HX1NBTVBMSU5HX1JBVEVcIik7XG4gICAgaWYgKHNhbXBsaW5nUmF0ZVN0ciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHNhbXBsaW5nUmF0ZSA9IHBhcnNlRmxvYXQoc2FtcGxpbmdSYXRlU3RyKTtcbiAgICBpZiAoc2FtcGxpbmdSYXRlIDwgMCB8fCBzYW1wbGluZ1JhdGUgPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTEFOR1NNSVRIX1RSQUNJTkdfU0FNUExJTkdfUkFURSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMSBpZiBzZXQuIEdvdDogJHtzYW1wbGluZ1JhdGV9YCk7XG4gICAgfVxuICAgIHJldHVybiBzYW1wbGluZ1JhdGU7XG59O1xuLy8gdXRpbGl0eSBmdW5jdGlvbnNcbmNvbnN0IGlzTG9jYWxob3N0ID0gKHVybCkgPT4ge1xuICAgIGNvbnN0IHN0cmlwcGVkVXJsID0gdXJsLnJlcGxhY2UoXCJodHRwOi8vXCIsIFwiXCIpLnJlcGxhY2UoXCJodHRwczovL1wiLCBcIlwiKTtcbiAgICBjb25zdCBob3N0bmFtZSA9IHN0cmlwcGVkVXJsLnNwbGl0KFwiL1wiKVswXS5zcGxpdChcIjpcIilbMF07XG4gICAgcmV0dXJuIChob3N0bmFtZSA9PT0gXCJsb2NhbGhvc3RcIiB8fCBob3N0bmFtZSA9PT0gXCIxMjcuMC4wLjFcIiB8fCBob3N0bmFtZSA9PT0gXCI6OjFcIik7XG59O1xuYXN5bmMgZnVuY3Rpb24gdG9BcnJheShpdGVyYWJsZSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiBpdGVyYWJsZSkge1xuICAgICAgICByZXN1bHQucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHRyaW1RdW90ZXMoc3RyKSB7XG4gICAgaWYgKHN0ciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBzdHJcbiAgICAgICAgLnRyaW0oKVxuICAgICAgICAucmVwbGFjZSgvXlwiKC4qKVwiJC8sIFwiJDFcIilcbiAgICAgICAgLnJlcGxhY2UoL14nKC4qKSckLywgXCIkMVwiKTtcbn1cbmNvbnN0IGhhbmRsZTQyOSA9IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgIGlmIChyZXNwb25zZT8uc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgY29uc3QgcmV0cnlBZnRlciA9IHBhcnNlSW50KHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwicmV0cnktYWZ0ZXJcIikgPz8gXCIxMFwiLCAxMCkgKiAxMDAwO1xuICAgICAgICBpZiAocmV0cnlBZnRlciA+IDApIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHJldHJ5QWZ0ZXIpKTtcbiAgICAgICAgICAgIC8vIFJldHVybiBkaXJlY3RseSBhZnRlciBjYWxsaW5nIHRoaXMgY2hlY2tcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEZhbGwgYmFjayB0byBleGlzdGluZyBzdGF0dXMgY2hlY2tzXG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmZ1bmN0aW9uIF9mb3JtYXRGZWVkYmFja1Njb3JlKHNjb3JlKSB7XG4gICAgaWYgKHR5cGVvZiBzY29yZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAvLyBUcnVuY2F0ZSBhdCA0IGRlY2ltYWwgcGxhY2VzXG4gICAgICAgIHJldHVybiBOdW1iZXIoc2NvcmUudG9GaXhlZCg0KSk7XG4gICAgfVxuICAgIHJldHVybiBzY29yZTtcbn1cbmV4cG9ydCBjb25zdCBERUZBVUxUX1VOQ09NUFJFU1NFRF9CQVRDSF9TSVpFX0xJTUlUX0JZVEVTID0gMjQgKiAxMDI0ICogMTAyNDtcbi8qKiBEZWZhdWx0IG1heGltdW0gbWVtb3J5ICgxR0IpIGZvciBxdWV1ZSBzaXplIGxpbWl0cy4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX01BWF9TSVpFX0JZVEVTID0gMTAyNCAqIDEwMjQgKiAxMDI0OyAvLyAxR0JcbmNvbnN0IFNFUlZFUl9JTkZPX1JFUVVFU1RfVElNRU9VVF9NUyA9IDEwMDAwO1xuLyoqIE1heGltdW0gbnVtYmVyIG9mIG9wZXJhdGlvbnMgdG8gYmF0Y2ggaW4gYSBzaW5nbGUgcmVxdWVzdC4gKi9cbmNvbnN0IERFRkFVTFRfQkFUQ0hfU0laRV9MSU1JVCA9IDEwMDtcbmNvbnN0IERFRkFVTFRfQVBJX1VSTCA9IFwiaHR0cHM6Ly9hcGkuc21pdGgubGFuZ2NoYWluLmNvbVwiO1xuZXhwb3J0IGNsYXNzIEF1dG9CYXRjaFF1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcihtYXhTaXplQnl0ZXMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaXRlbXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzaXplQnl0ZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heFNpemVCeXRlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heFNpemVCeXRlcyA9IG1heFNpemVCeXRlcyA/PyBERUZBVUxUX01BWF9TSVpFX0JZVEVTO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtc1swXTtcbiAgICB9XG4gICAgcHVzaChpdGVtKSB7XG4gICAgICAgIGxldCBpdGVtUHJvbWlzZVJlc29sdmU7XG4gICAgICAgIGNvbnN0IGl0ZW1Qcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIC8vIFNldHRpbmcgaXRlbVByb21pc2VSZXNvbHZlIGlzIHN5bmNocm9ub3VzIHdpdGggcHJvbWlzZSBjcmVhdGlvbjpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb21pc2UvUHJvbWlzZVxuICAgICAgICAgICAgaXRlbVByb21pc2VSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNpemUgPSBzZXJpYWxpemVQYXlsb2FkRm9yVHJhY2luZyhpdGVtLml0ZW0sIGBTZXJpYWxpemluZyBydW4gd2l0aCBpZDogJHtpdGVtLml0ZW0uaWR9YCkubGVuZ3RoO1xuICAgICAgICAvLyBDaGVjayBpZiBhZGRpbmcgdGhpcyBpdGVtIHdvdWxkIGV4Y2VlZCB0aGUgc2l6ZSBsaW1pdFxuICAgICAgICAvLyBBbGxvdyB0aGUgcnVuIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eSAodG8gc3VwcG9ydCBsYXJnZSBzaW5nbGUgdHJhY2VzKVxuICAgICAgICBpZiAodGhpcy5zaXplQnl0ZXMgKyBzaXplID4gdGhpcy5tYXhTaXplQnl0ZXMgJiYgdGhpcy5pdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEF1dG9CYXRjaFF1ZXVlIHNpemUgbGltaXQgKCR7dGhpcy5tYXhTaXplQnl0ZXN9IGJ5dGVzKSBleGNlZWRlZC4gRHJvcHBpbmcgcnVuIHdpdGggaWQ6ICR7aXRlbS5pdGVtLmlkfS4gYCArXG4gICAgICAgICAgICAgICAgYEN1cnJlbnQgcXVldWUgc2l6ZTogJHt0aGlzLnNpemVCeXRlc30gYnl0ZXMsIGF0dGVtcHRlZCBhZGRpdGlvbjogJHtzaXplfSBieXRlcy5gKTtcbiAgICAgICAgICAgIC8vIFJlc29sdmUgaW1tZWRpYXRlbHkgdG8gYXZvaWQgYmxvY2tpbmcgY2FsbGVyXG4gICAgICAgICAgICBpdGVtUHJvbWlzZVJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLml0ZW1zLnB1c2goe1xuICAgICAgICAgICAgYWN0aW9uOiBpdGVtLmFjdGlvbixcbiAgICAgICAgICAgIHBheWxvYWQ6IGl0ZW0uaXRlbSxcbiAgICAgICAgICAgIG90ZWxDb250ZXh0OiBpdGVtLm90ZWxDb250ZXh0LFxuICAgICAgICAgICAgYXBpS2V5OiBpdGVtLmFwaUtleSxcbiAgICAgICAgICAgIGFwaVVybDogaXRlbS5hcGlVcmwsXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgaXRlbVByb21pc2VSZXNvbHZlOiBpdGVtUHJvbWlzZVJlc29sdmUsXG4gICAgICAgICAgICBpdGVtUHJvbWlzZSxcbiAgICAgICAgICAgIHNpemUsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNpemVCeXRlcyArPSBzaXplO1xuICAgICAgICByZXR1cm4gaXRlbVByb21pc2U7XG4gICAgfVxuICAgIHBvcCh7IHVwVG9TaXplQnl0ZXMsIHVwVG9TaXplLCB9KSB7XG4gICAgICAgIGlmICh1cFRvU2l6ZUJ5dGVzIDwgMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTnVtYmVyIG9mIGJ5dGVzIHRvIHBvcCBvZmYgbWF5IG5vdCBiZSBsZXNzIHRoYW4gMS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9wcGVkID0gW107XG4gICAgICAgIGxldCBwb3BwZWRTaXplQnl0ZXMgPSAwO1xuICAgICAgICAvLyBQb3AgaXRlbXMgdW50aWwgd2UgcmVhY2ggb3IgZXhjZWVkIHRoZSBzaXplIGxpbWl0XG4gICAgICAgIHdoaWxlIChwb3BwZWRTaXplQnl0ZXMgKyAodGhpcy5wZWVrKCk/LnNpemUgPz8gMCkgPCB1cFRvU2l6ZUJ5dGVzICYmXG4gICAgICAgICAgICB0aGlzLml0ZW1zLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgIHBvcHBlZC5sZW5ndGggPCB1cFRvU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgcG9wcGVkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgcG9wcGVkU2l6ZUJ5dGVzICs9IGl0ZW0uc2l6ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNpemVCeXRlcyAtPSBpdGVtLnNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gaXRlbSBvbiB0aGUgcXVldWUgd2Ugd2VyZSB1bmFibGUgdG8gcG9wLFxuICAgICAgICAvLyBqdXN0IHJldHVybiBpdCBhcyBhIHNpbmdsZSBiYXRjaC5cbiAgICAgICAgaWYgKHBvcHBlZC5sZW5ndGggPT09IDAgJiYgdGhpcy5pdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5zaGlmdCgpO1xuICAgICAgICAgICAgcG9wcGVkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICBwb3BwZWRTaXplQnl0ZXMgKz0gaXRlbS5zaXplO1xuICAgICAgICAgICAgdGhpcy5zaXplQnl0ZXMgLT0gaXRlbS5zaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBwb3BwZWQubWFwKChpdCkgPT4gKHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGl0LmFjdGlvbixcbiAgICAgICAgICAgICAgICBpdGVtOiBpdC5wYXlsb2FkLFxuICAgICAgICAgICAgICAgIG90ZWxDb250ZXh0OiBpdC5vdGVsQ29udGV4dCxcbiAgICAgICAgICAgICAgICBhcGlLZXk6IGl0LmFwaUtleSxcbiAgICAgICAgICAgICAgICBhcGlVcmw6IGl0LmFwaVVybCxcbiAgICAgICAgICAgICAgICBzaXplOiBpdC5zaXplLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgKCkgPT4gcG9wcGVkLmZvckVhY2goKGl0KSA9PiBpdC5pdGVtUHJvbWlzZVJlc29sdmUoKSksXG4gICAgICAgIF07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENsaWVudCB7XG4gICAgZ2V0IF9mZXRjaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hJbXBsZW1lbnRhdGlvbiB8fCBfZ2V0RmV0Y2hJbXBsZW1lbnRhdGlvbih0aGlzLmRlYnVnKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFwaVVybFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3ZWJVcmxcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwid29ya3NwYWNlSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJhdGNoSW5nZXN0Q2FsbGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbWVvdXRfbXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3RlbmFudElkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoaWRlSW5wdXRzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhpZGVPdXRwdXRzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyYWNpbmdTYW1wbGVSYXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpbHRlcmVkUG9zdFV1aWRzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgU2V0KClcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF1dG9CYXRjaFRyYWNpbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF1dG9CYXRjaFF1ZXVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF1dG9CYXRjaFRpbWVvdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXV0b0JhdGNoQWdncmVnYXRpb25EZWxheU1zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAyNTBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJhdGNoU2l6ZUJ5dGVzTGltaXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYmF0Y2hTaXplTGltaXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmV0Y2hPcHRpb25zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNldHRpbmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJsb2NrT25Sb290UnVuRmluYWxpemF0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR1NNSVRIX1RSQUNJTkdfQkFDS0dST1VORFwiKSA9PT0gXCJmYWxzZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmFjZUJhdGNoQ29uY3VycmVuY3lcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9zZXJ2ZXJJbmZvXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9nZXRTZXJ2ZXJJbmZvUHJvbWlzZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYW51YWxGbHVzaE1vZGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYW5nU21pdGhUb09URUxUcmFuc2xhdG9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZldGNoSW1wbGVtZW50YXRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FjaGVkTFNFbnZWYXJzRm9yTWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibXVsdGlwYXJ0U3RyZWFtaW5nRGlzYWJsZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZWJ1Z1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdTTUlUSF9ERUJVR1wiKSA9PT0gXCJ0cnVlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDb25maWcgPSBDbGllbnQuZ2V0RGVmYXVsdENsaWVudENvbmZpZygpO1xuICAgICAgICB0aGlzLnRyYWNpbmdTYW1wbGVSYXRlID0gZ2V0VHJhY2luZ1NhbXBsaW5nUmF0ZShjb25maWcudHJhY2luZ1NhbXBsaW5nUmF0ZSk7XG4gICAgICAgIHRoaXMuYXBpVXJsID0gdHJpbVF1b3Rlcyhjb25maWcuYXBpVXJsID8/IGRlZmF1bHRDb25maWcuYXBpVXJsKSA/PyBcIlwiO1xuICAgICAgICBpZiAodGhpcy5hcGlVcmwuZW5kc1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmFwaVVybCA9IHRoaXMuYXBpVXJsLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFwaUtleSA9IHRyaW1RdW90ZXMoY29uZmlnLmFwaUtleSA/PyBkZWZhdWx0Q29uZmlnLmFwaUtleSk7XG4gICAgICAgIHRoaXMud2ViVXJsID0gdHJpbVF1b3Rlcyhjb25maWcud2ViVXJsID8/IGRlZmF1bHRDb25maWcud2ViVXJsKTtcbiAgICAgICAgaWYgKHRoaXMud2ViVXJsPy5lbmRzV2l0aChcIi9cIikpIHtcbiAgICAgICAgICAgIHRoaXMud2ViVXJsID0gdGhpcy53ZWJVcmwuc2xpY2UoMCwgLTEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud29ya3NwYWNlSWQgPSB0cmltUXVvdGVzKGNvbmZpZy53b3Jrc3BhY2VJZCA/PyBnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlKFwiV09SS1NQQUNFX0lEXCIpKTtcbiAgICAgICAgdGhpcy50aW1lb3V0X21zID0gY29uZmlnLnRpbWVvdXRfbXMgPz8gOTBfMDAwO1xuICAgICAgICB0aGlzLmNhbGxlciA9IG5ldyBBc3luY0NhbGxlcih7XG4gICAgICAgICAgICAuLi4oY29uZmlnLmNhbGxlck9wdGlvbnMgPz8ge30pLFxuICAgICAgICAgICAgbWF4UmV0cmllczogNCxcbiAgICAgICAgICAgIGRlYnVnOiBjb25maWcuZGVidWcgPz8gdGhpcy5kZWJ1ZyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHJhY2VCYXRjaENvbmN1cnJlbmN5ID1cbiAgICAgICAgICAgIGNvbmZpZy50cmFjZUJhdGNoQ29uY3VycmVuY3kgPz8gdGhpcy50cmFjZUJhdGNoQ29uY3VycmVuY3k7XG4gICAgICAgIGlmICh0aGlzLnRyYWNlQmF0Y2hDb25jdXJyZW5jeSA8IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyYWNlIGJhdGNoIGNvbmN1cnJlbmN5IG11c3QgYmUgcG9zaXRpdmUuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVidWcgPSBjb25maWcuZGVidWcgPz8gdGhpcy5kZWJ1ZztcbiAgICAgICAgdGhpcy5mZXRjaEltcGxlbWVudGF0aW9uID0gY29uZmlnLmZldGNoSW1wbGVtZW50YXRpb247XG4gICAgICAgIC8vIFVzZSBtYXhJbmdlc3RNZW1vcnlCeXRlcyBmb3IgYm90aCBxdWV1ZXNcbiAgICAgICAgY29uc3QgbWF4TWVtb3J5ID0gY29uZmlnLm1heEluZ2VzdE1lbW9yeUJ5dGVzID8/IERFRkFVTFRfTUFYX1NJWkVfQllURVM7XG4gICAgICAgIHRoaXMuYmF0Y2hJbmdlc3RDYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIoe1xuICAgICAgICAgICAgbWF4UmV0cmllczogNCxcbiAgICAgICAgICAgIG1heENvbmN1cnJlbmN5OiB0aGlzLnRyYWNlQmF0Y2hDb25jdXJyZW5jeSxcbiAgICAgICAgICAgIG1heFF1ZXVlU2l6ZUJ5dGVzOiBtYXhNZW1vcnksXG4gICAgICAgICAgICAuLi4oY29uZmlnLmNhbGxlck9wdGlvbnMgPz8ge30pLFxuICAgICAgICAgICAgb25GYWlsZWRSZXNwb25zZUhvb2s6IGhhbmRsZTQyOSxcbiAgICAgICAgICAgIGRlYnVnOiBjb25maWcuZGVidWcgPz8gdGhpcy5kZWJ1ZyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGlkZUlucHV0cyA9XG4gICAgICAgICAgICBjb25maWcuaGlkZUlucHV0cyA/PyBjb25maWcuYW5vbnltaXplciA/PyBkZWZhdWx0Q29uZmlnLmhpZGVJbnB1dHM7XG4gICAgICAgIHRoaXMuaGlkZU91dHB1dHMgPVxuICAgICAgICAgICAgY29uZmlnLmhpZGVPdXRwdXRzID8/IGNvbmZpZy5hbm9ueW1pemVyID8/IGRlZmF1bHRDb25maWcuaGlkZU91dHB1dHM7XG4gICAgICAgIHRoaXMuYXV0b0JhdGNoVHJhY2luZyA9IGNvbmZpZy5hdXRvQmF0Y2hUcmFjaW5nID8/IHRoaXMuYXV0b0JhdGNoVHJhY2luZztcbiAgICAgICAgdGhpcy5hdXRvQmF0Y2hRdWV1ZSA9IG5ldyBBdXRvQmF0Y2hRdWV1ZShtYXhNZW1vcnkpO1xuICAgICAgICB0aGlzLmJsb2NrT25Sb290UnVuRmluYWxpemF0aW9uID1cbiAgICAgICAgICAgIGNvbmZpZy5ibG9ja09uUm9vdFJ1bkZpbmFsaXphdGlvbiA/PyB0aGlzLmJsb2NrT25Sb290UnVuRmluYWxpemF0aW9uO1xuICAgICAgICB0aGlzLmJhdGNoU2l6ZUJ5dGVzTGltaXQgPSBjb25maWcuYmF0Y2hTaXplQnl0ZXNMaW1pdDtcbiAgICAgICAgdGhpcy5iYXRjaFNpemVMaW1pdCA9IGNvbmZpZy5iYXRjaFNpemVMaW1pdDtcbiAgICAgICAgdGhpcy5mZXRjaE9wdGlvbnMgPSBjb25maWcuZmV0Y2hPcHRpb25zIHx8IHt9O1xuICAgICAgICB0aGlzLm1hbnVhbEZsdXNoTW9kZSA9IGNvbmZpZy5tYW51YWxGbHVzaE1vZGUgPz8gdGhpcy5tYW51YWxGbHVzaE1vZGU7XG4gICAgICAgIGlmIChnZXRPdGVsRW5hYmxlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLmxhbmdTbWl0aFRvT1RFTFRyYW5zbGF0b3IgPSBuZXcgTGFuZ1NtaXRoVG9PVEVMVHJhbnNsYXRvcigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhY2hlIG1ldGFkYXRhIGVudiB2YXJzIG9uY2UgZHVyaW5nIGNvbnN0cnVjdGlvbiB0byBhdm9pZCByZXBlYXRlZGx5IHNjYW5uaW5nIHByb2Nlc3MuZW52XG4gICAgICAgIHRoaXMuY2FjaGVkTFNFbnZWYXJzRm9yTWV0YWRhdGEgPSBnZXRMYW5nU21pdGhFbnZWYXJzTWV0YWRhdGEoKTtcbiAgICB9XG4gICAgc3RhdGljIGdldERlZmF1bHRDbGllbnRDb25maWcoKSB7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IGdldExhbmdTbWl0aEVudmlyb25tZW50VmFyaWFibGUoXCJBUElfS0VZXCIpO1xuICAgICAgICBjb25zdCBhcGlVcmwgPSBnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlKFwiRU5EUE9JTlRcIikgPz8gREVGQVVMVF9BUElfVVJMO1xuICAgICAgICBjb25zdCBoaWRlSW5wdXRzID0gZ2V0TGFuZ1NtaXRoRW52aXJvbm1lbnRWYXJpYWJsZShcIkhJREVfSU5QVVRTXCIpID09PSBcInRydWVcIjtcbiAgICAgICAgY29uc3QgaGlkZU91dHB1dHMgPSBnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlKFwiSElERV9PVVRQVVRTXCIpID09PSBcInRydWVcIjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwaVVybDogYXBpVXJsLFxuICAgICAgICAgICAgYXBpS2V5OiBhcGlLZXksXG4gICAgICAgICAgICB3ZWJVcmw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGhpZGVJbnB1dHM6IGhpZGVJbnB1dHMsXG4gICAgICAgICAgICBoaWRlT3V0cHV0czogaGlkZU91dHB1dHMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldEhvc3RVcmwoKSB7XG4gICAgICAgIGlmICh0aGlzLndlYlVybCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2ViVXJsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzTG9jYWxob3N0KHRoaXMuYXBpVXJsKSkge1xuICAgICAgICAgICAgdGhpcy53ZWJVcmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2ViVXJsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYXBpVXJsLmVuZHNXaXRoKFwiL2FwaS92MVwiKSkge1xuICAgICAgICAgICAgdGhpcy53ZWJVcmwgPSB0aGlzLmFwaVVybC5yZXBsYWNlKFwiL2FwaS92MVwiLCBcIlwiKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndlYlVybDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFwaVVybC5pbmNsdWRlcyhcIi9hcGlcIikgJiZcbiAgICAgICAgICAgICF0aGlzLmFwaVVybC5zcGxpdChcIi5cIiwgMSlbMF0uZW5kc1dpdGgoXCJhcGlcIikpIHtcbiAgICAgICAgICAgIHRoaXMud2ViVXJsID0gdGhpcy5hcGlVcmwucmVwbGFjZShcIi9hcGlcIiwgXCJcIik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53ZWJVcmw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hcGlVcmwuc3BsaXQoXCIuXCIsIDEpWzBdLmluY2x1ZGVzKFwiZGV2XCIpKSB7XG4gICAgICAgICAgICB0aGlzLndlYlVybCA9IFwiaHR0cHM6Ly9kZXYuc21pdGgubGFuZ2NoYWluLmNvbVwiO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2ViVXJsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYXBpVXJsLnNwbGl0KFwiLlwiLCAxKVswXS5pbmNsdWRlcyhcImV1XCIpKSB7XG4gICAgICAgICAgICB0aGlzLndlYlVybCA9IFwiaHR0cHM6Ly9ldS5zbWl0aC5sYW5nY2hhaW4uY29tXCI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53ZWJVcmw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hcGlVcmwuc3BsaXQoXCIuXCIsIDEpWzBdLmluY2x1ZGVzKFwiYmV0YVwiKSkge1xuICAgICAgICAgICAgdGhpcy53ZWJVcmwgPSBcImh0dHBzOi8vYmV0YS5zbWl0aC5sYW5nY2hhaW4uY29tXCI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53ZWJVcmw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLndlYlVybCA9IFwiaHR0cHM6Ly9zbWl0aC5sYW5nY2hhaW4uY29tXCI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53ZWJVcmw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGhlYWRlcnMoKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICBcIlVzZXItQWdlbnRcIjogYGxhbmdzbWl0aC1qcy8ke19fdmVyc2lvbl9ffWAsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmFwaUtleSkge1xuICAgICAgICAgICAgaGVhZGVyc1tcIngtYXBpLWtleVwiXSA9IGAke3RoaXMuYXBpS2V5fWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMud29ya3NwYWNlSWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbXCJ4LXRlbmFudC1pZFwiXSA9IHRoaXMud29ya3NwYWNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICAgfVxuICAgIF9nZXRQbGF0Zm9ybUVuZHBvaW50UGF0aChwYXRoKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIGFwaVVybCBhbHJlYWR5IGVuZHMgd2l0aCAvdjEgb3IgL3YxLyB0byBhdm9pZCBkb3VibGUgL3YxL3YxLyBwYXRoc1xuICAgICAgICBjb25zdCBuZWVkc1YxUHJlZml4ID0gdGhpcy5hcGlVcmwuc2xpY2UoLTMpICE9PSBcIi92MVwiICYmIHRoaXMuYXBpVXJsLnNsaWNlKC00KSAhPT0gXCIvdjEvXCI7XG4gICAgICAgIHJldHVybiBuZWVkc1YxUHJlZml4ID8gYC92MS9wbGF0Zm9ybS8ke3BhdGh9YCA6IGAvcGxhdGZvcm0vJHtwYXRofWA7XG4gICAgfVxuICAgIGFzeW5jIHByb2Nlc3NJbnB1dHMoaW5wdXRzKSB7XG4gICAgICAgIGlmICh0aGlzLmhpZGVJbnB1dHMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhpZGVJbnB1dHMgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaGlkZUlucHV0cyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oaWRlSW5wdXRzKGlucHV0cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlucHV0cztcbiAgICB9XG4gICAgYXN5bmMgcHJvY2Vzc091dHB1dHMob3V0cHV0cykge1xuICAgICAgICBpZiAodGhpcy5oaWRlT3V0cHV0cyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhpZGVPdXRwdXRzID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmhpZGVPdXRwdXRzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhpZGVPdXRwdXRzKG91dHB1dHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgIH1cbiAgICBhc3luYyBwcmVwYXJlUnVuQ3JlYXRlT3JVcGRhdGVJbnB1dHMocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1blBhcmFtcyA9IHsgLi4ucnVuIH07XG4gICAgICAgIGlmIChydW5QYXJhbXMuaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJ1blBhcmFtcy5pbnB1dHMgPSBhd2FpdCB0aGlzLnByb2Nlc3NJbnB1dHMocnVuUGFyYW1zLmlucHV0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1blBhcmFtcy5vdXRwdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJ1blBhcmFtcy5vdXRwdXRzID0gYXdhaXQgdGhpcy5wcm9jZXNzT3V0cHV0cyhydW5QYXJhbXMub3V0cHV0cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1blBhcmFtcztcbiAgICB9XG4gICAgYXN5bmMgX2dldFJlc3BvbnNlKHBhdGgsIHF1ZXJ5UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtc1N0cmluZyA9IHF1ZXJ5UGFyYW1zPy50b1N0cmluZygpID8/IFwiXCI7XG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYXBpVXJsfSR7cGF0aH0/JHtwYXJhbXNTdHJpbmd9YDtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKHVybCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgYGZldGNoICR7cGF0aH1gKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICAgIGFzeW5jIF9nZXQocGF0aCwgcXVlcnlQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9nZXRSZXNwb25zZShwYXRoLCBxdWVyeVBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jICpfZ2V0UGFnaW5hdGVkKHBhdGgsIHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpLCB0cmFuc2Zvcm0pIHtcbiAgICAgICAgbGV0IG9mZnNldCA9IE51bWJlcihxdWVyeVBhcmFtcy5nZXQoXCJvZmZzZXRcIikpIHx8IDA7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gTnVtYmVyKHF1ZXJ5UGFyYW1zLmdldChcImxpbWl0XCIpKSB8fCAxMDA7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5zZXQoXCJvZmZzZXRcIiwgU3RyaW5nKG9mZnNldCkpO1xuICAgICAgICAgICAgcXVlcnlQYXJhbXMuc2V0KFwibGltaXRcIiwgU3RyaW5nKGxpbWl0KSk7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmFwaVVybH0ke3BhdGh9PyR7cXVlcnlQYXJhbXN9YDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBgZmV0Y2ggJHtwYXRofWApO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gdHJhbnNmb3JtXG4gICAgICAgICAgICAgICAgPyB0cmFuc2Zvcm0oYXdhaXQgcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAgICAgICAgIDogYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgaXRlbXM7XG4gICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoIDwgbGltaXQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZnNldCArPSBpdGVtcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgKl9nZXRDdXJzb3JQYWdpbmF0ZWRMaXN0KHBhdGgsIGJvZHkgPSBudWxsLCByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCIsIGRhdGFLZXkgPSBcInJ1bnNcIikge1xuICAgICAgICBjb25zdCBib2R5UGFyYW1zID0gYm9keSA/IHsgLi4uYm9keSB9IDoge307XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keVBhcmFtcyk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfSR7cGF0aH1gLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdE1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAuLi50aGlzLmhlYWRlcnMsIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIGBmZXRjaCAke3BhdGh9YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZUJvZHkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2VCb2R5W2RhdGFLZXldKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCByZXNwb25zZUJvZHlbZGF0YUtleV07XG4gICAgICAgICAgICBjb25zdCBjdXJzb3JzID0gcmVzcG9uc2VCb2R5LmN1cnNvcnM7XG4gICAgICAgICAgICBpZiAoIWN1cnNvcnMpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY3Vyc29ycy5uZXh0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib2R5UGFyYW1zLmN1cnNvciA9IGN1cnNvcnMubmV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBBbGxvd3MgbW9ja2luZyBmb3IgdGVzdHNcbiAgICBfc2hvdWxkU2FtcGxlKCkge1xuICAgICAgICBpZiAodGhpcy50cmFjaW5nU2FtcGxlUmF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSA8IHRoaXMudHJhY2luZ1NhbXBsZVJhdGU7XG4gICAgfVxuICAgIF9maWx0ZXJGb3JTYW1wbGluZyhydW5zLCBwYXRjaCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYWNpbmdTYW1wbGVSYXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBydW5zO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXRjaCkge1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlZCA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBydW4gb2YgcnVucykge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5maWx0ZXJlZFBvc3RVdWlkcy5oYXMocnVuLnRyYWNlX2lkKSkge1xuICAgICAgICAgICAgICAgICAgICBzYW1wbGVkLnB1c2gocnVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocnVuLmlkID09PSBydW4udHJhY2VfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJlZFBvc3RVdWlkcy5kZWxldGUocnVuLnRyYWNlX2lkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBuZXcgcnVucywgc2FtcGxlIGF0IHRyYWNlIGxldmVsIHRvIG1haW50YWluIGNvbnNpc3RlbmN5XG4gICAgICAgICAgICBjb25zdCBzYW1wbGVkID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJ1biBvZiBydW5zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhY2VJZCA9IHJ1bi50cmFjZV9pZCA/PyBydW4uaWQ7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBtYWRlIGEgZGVjaXNpb24gYWJvdXQgdGhpcyB0cmFjZSwgZm9sbG93IGl0XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyZWRQb3N0VXVpZHMuaGFzKHRyYWNlSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBGb3IgbmV3IHRyYWNlcywgYXBwbHkgc2FtcGxpbmdcbiAgICAgICAgICAgICAgICBpZiAocnVuLmlkID09PSB0cmFjZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zaG91bGRTYW1wbGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZC5wdXNoKHJ1bik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcmVkUG9zdFV1aWRzLmFkZCh0cmFjZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hpbGQgcnVucyBmb2xsb3cgdGhlaXIgdHJhY2UncyBzYW1wbGluZyBkZWNpc2lvblxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVkLnB1c2gocnVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfZ2V0QmF0Y2hTaXplTGltaXRCeXRlcygpIHtcbiAgICAgICAgY29uc3Qgc2VydmVySW5mbyA9IGF3YWl0IHRoaXMuX2Vuc3VyZVNlcnZlckluZm8oKTtcbiAgICAgICAgcmV0dXJuICh0aGlzLmJhdGNoU2l6ZUJ5dGVzTGltaXQgPz9cbiAgICAgICAgICAgIHNlcnZlckluZm8uYmF0Y2hfaW5nZXN0X2NvbmZpZz8uc2l6ZV9saW1pdF9ieXRlcyA/P1xuICAgICAgICAgICAgREVGQVVMVF9VTkNPTVBSRVNTRURfQkFUQ0hfU0laRV9MSU1JVF9CWVRFUyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWF4aW11bSBudW1iZXIgb2Ygb3BlcmF0aW9ucyB0byBiYXRjaCBpbiBhIHNpbmdsZSByZXF1ZXN0LlxuICAgICAqL1xuICAgIGFzeW5jIF9nZXRCYXRjaFNpemVMaW1pdCgpIHtcbiAgICAgICAgY29uc3Qgc2VydmVySW5mbyA9IGF3YWl0IHRoaXMuX2Vuc3VyZVNlcnZlckluZm8oKTtcbiAgICAgICAgcmV0dXJuICh0aGlzLmJhdGNoU2l6ZUxpbWl0ID8/XG4gICAgICAgICAgICBzZXJ2ZXJJbmZvLmJhdGNoX2luZ2VzdF9jb25maWc/LnNpemVfbGltaXQgPz9cbiAgICAgICAgICAgIERFRkFVTFRfQkFUQ0hfU0laRV9MSU1JVCk7XG4gICAgfVxuICAgIGFzeW5jIF9nZXREYXRhc2V0RXhhbXBsZXNNdWx0aVBhcnRTdXBwb3J0KCkge1xuICAgICAgICBjb25zdCBzZXJ2ZXJJbmZvID0gYXdhaXQgdGhpcy5fZW5zdXJlU2VydmVySW5mbygpO1xuICAgICAgICByZXR1cm4gKHNlcnZlckluZm8uaW5zdGFuY2VfZmxhZ3M/LmRhdGFzZXRfZXhhbXBsZXNfbXVsdGlwYXJ0X2VuYWJsZWQgPz8gZmFsc2UpO1xuICAgIH1cbiAgICBkcmFpbkF1dG9CYXRjaFF1ZXVlKHsgYmF0Y2hTaXplTGltaXRCeXRlcywgYmF0Y2hTaXplTGltaXQsIH0pIHtcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMuYXV0b0JhdGNoUXVldWUuaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgW2JhdGNoLCBkb25lXSA9IHRoaXMuYXV0b0JhdGNoUXVldWUucG9wKHtcbiAgICAgICAgICAgICAgICB1cFRvU2l6ZUJ5dGVzOiBiYXRjaFNpemVMaW1pdEJ5dGVzLFxuICAgICAgICAgICAgICAgIHVwVG9TaXplOiBiYXRjaFNpemVMaW1pdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFiYXRjaC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBiYXRjaGVzQnlEZXN0aW5hdGlvbiA9IGJhdGNoLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBpVXJsID0gaXRlbS5hcGlVcmwgPz8gdGhpcy5hcGlVcmw7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gaXRlbS5hcGlLZXkgPz8gdGhpcy5hcGlLZXk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNEZWZhdWx0ID0gaXRlbS5hcGlLZXkgPT09IHRoaXMuYXBpS2V5ICYmIGl0ZW0uYXBpVXJsID09PSB0aGlzLmFwaVVybDtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaEtleSA9IGlzRGVmYXVsdCA/IFwiZGVmYXVsdFwiIDogYCR7YXBpVXJsfXwke2FwaUtleX1gO1xuICAgICAgICAgICAgICAgIGlmICghYWNjW2JhdGNoS2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBhY2NbYmF0Y2hLZXldID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFjY1tiYXRjaEtleV0ucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hQcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBbYmF0Y2hLZXksIGJhdGNoXSBvZiBPYmplY3QuZW50cmllcyhiYXRjaGVzQnlEZXN0aW5hdGlvbikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaFByb21pc2UgPSB0aGlzLl9wcm9jZXNzQmF0Y2goYmF0Y2gsIHtcbiAgICAgICAgICAgICAgICAgICAgYXBpVXJsOiBiYXRjaEtleSA9PT0gXCJkZWZhdWx0XCIgPyB1bmRlZmluZWQgOiBiYXRjaEtleS5zcGxpdChcInxcIilbMF0sXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleTogYmF0Y2hLZXkgPT09IFwiZGVmYXVsdFwiID8gdW5kZWZpbmVkIDogYmF0Y2hLZXkuc3BsaXQoXCJ8XCIpWzFdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJhdGNoUHJvbWlzZXMucHVzaChiYXRjaFByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2FpdCBmb3IgYWxsIGJhdGNoZXMgdG8gY29tcGxldGUsIHRoZW4gY2FsbCB0aGUgb3ZlcmFsbCBkb25lIGNhbGxiYWNrXG4gICAgICAgICAgICBjb25zdCBhbGxCYXRjaGVzUHJvbWlzZSA9IFByb21pc2UuYWxsKGJhdGNoUHJvbWlzZXMpLmZpbmFsbHkoZG9uZSk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKGFsbEJhdGNoZXNQcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH1cbiAgICBhc3luYyBfcHJvY2Vzc0JhdGNoKGJhdGNoLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghYmF0Y2gubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIGJhdGNoIHNpemUgZm9yIHF1ZXVlIHRyYWNraW5nXG4gICAgICAgIGNvbnN0IGJhdGNoU2l6ZUJ5dGVzID0gYmF0Y2gucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIChpdGVtLnNpemUgPz8gMCksIDApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMubGFuZ1NtaXRoVG9PVEVMVHJhbnNsYXRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2VuZEJhdGNoVG9PVEVMVHJhbnNsYXRvcihiYXRjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmdlc3RQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bkNyZWF0ZXM6IGJhdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLmFjdGlvbiA9PT0gXCJjcmVhdGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0uaXRlbSksXG4gICAgICAgICAgICAgICAgICAgIHJ1blVwZGF0ZXM6IGJhdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLmFjdGlvbiA9PT0gXCJ1cGRhdGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0uaXRlbSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2ZXJJbmZvID0gYXdhaXQgdGhpcy5fZW5zdXJlU2VydmVySW5mbygpO1xuICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJJbmZvPy5iYXRjaF9pbmdlc3RfY29uZmlnPy51c2VfbXVsdGlwYXJ0X2VuZHBvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZUd6aXAgPSBzZXJ2ZXJJbmZvPy5pbnN0YW5jZV9mbGFncz8uZ3ppcF9ib2R5X2VuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubXVsdGlwYXJ0SW5nZXN0UnVucyhpbmdlc3RQYXJhbXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VHemlwLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZUJ5dGVzOiBiYXRjaFNpemVCeXRlcyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJhdGNoSW5nZXN0UnVucyhpbmdlc3RQYXJhbXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplQnl0ZXM6IGJhdGNoU2l6ZUJ5dGVzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBleHBvcnRpbmcgYmF0Y2g6XCIsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9zZW5kQmF0Y2hUb09URUxUcmFuc2xhdG9yKGJhdGNoKSB7XG4gICAgICAgIGlmICh0aGlzLmxhbmdTbWl0aFRvT1RFTFRyYW5zbGF0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qgb3RlbENvbnRleHRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBjb25zdCBvcGVyYXRpb25zID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYmF0Y2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pdGVtLmlkICYmIGl0ZW0ub3RlbENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3RlbENvbnRleHRNYXAuc2V0KGl0ZW0uaXRlbS5pZCwgaXRlbS5vdGVsQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmFjdGlvbiA9PT0gXCJjcmVhdGVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IFwicG9zdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2VfaWQ6IGl0ZW0uaXRlbS50cmFjZV9pZCA/PyBpdGVtLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVuOiBpdGVtLml0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBcInBhdGNoXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjZV9pZDogaXRlbS5pdGVtLnRyYWNlX2lkID8/IGl0ZW0uaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW46IGl0ZW0uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYW5nU21pdGhUb09URUxUcmFuc2xhdG9yLmV4cG9ydEJhdGNoKG9wZXJhdGlvbnMsIG90ZWxDb250ZXh0TWFwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBwcm9jZXNzUnVuT3BlcmF0aW9uKGl0ZW0pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuYXV0b0JhdGNoVGltZW91dCk7XG4gICAgICAgIHRoaXMuYXV0b0JhdGNoVGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaXRlbS5pdGVtID0gbWVyZ2VSdW50aW1lRW52SW50b1J1bihpdGVtLml0ZW0sIHRoaXMuY2FjaGVkTFNFbnZWYXJzRm9yTWV0YWRhdGEpO1xuICAgICAgICBjb25zdCBpdGVtUHJvbWlzZSA9IHRoaXMuYXV0b0JhdGNoUXVldWUucHVzaChpdGVtKTtcbiAgICAgICAgaWYgKHRoaXMubWFudWFsRmx1c2hNb2RlKSB7XG4gICAgICAgICAgICAvLyBSZWx5IG9uIG1hbnVhbCBmbHVzaGluZyBpbiBzZXJ2ZXJsZXNzIGVudmlyb25tZW50c1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW1Qcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpemVMaW1pdEJ5dGVzID0gYXdhaXQgdGhpcy5fZ2V0QmF0Y2hTaXplTGltaXRCeXRlcygpO1xuICAgICAgICBjb25zdCBzaXplTGltaXQgPSBhd2FpdCB0aGlzLl9nZXRCYXRjaFNpemVMaW1pdCgpO1xuICAgICAgICBpZiAodGhpcy5hdXRvQmF0Y2hRdWV1ZS5zaXplQnl0ZXMgPiBzaXplTGltaXRCeXRlcyB8fFxuICAgICAgICAgICAgdGhpcy5hdXRvQmF0Y2hRdWV1ZS5pdGVtcy5sZW5ndGggPiBzaXplTGltaXQpIHtcbiAgICAgICAgICAgIHZvaWQgdGhpcy5kcmFpbkF1dG9CYXRjaFF1ZXVlKHtcbiAgICAgICAgICAgICAgICBiYXRjaFNpemVMaW1pdEJ5dGVzOiBzaXplTGltaXRCeXRlcyxcbiAgICAgICAgICAgICAgICBiYXRjaFNpemVMaW1pdDogc2l6ZUxpbWl0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXV0b0JhdGNoUXVldWUuaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5hdXRvQmF0Y2hUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRvQmF0Y2hUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5kcmFpbkF1dG9CYXRjaFF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hTaXplTGltaXRCeXRlczogc2l6ZUxpbWl0Qnl0ZXMsXG4gICAgICAgICAgICAgICAgICAgIGJhdGNoU2l6ZUxpbWl0OiBzaXplTGltaXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCB0aGlzLmF1dG9CYXRjaEFnZ3JlZ2F0aW9uRGVsYXlNcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGl0ZW1Qcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBfZ2V0U2VydmVySW5mbygpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9pbmZvYCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoU0VSVkVSX0lORk9fUkVRVUVTVF9USU1FT1VUX01TKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcImdldCBzZXJ2ZXIgaW5mb1wiKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBpZiAodGhpcy5kZWJ1Zykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJcXG49PT0gTGFuZ1NtaXRoIFNlcnZlciBDb25maWd1cmF0aW9uID09PVxcblwiICtcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShqc29uLCBudWxsLCAyKSArXG4gICAgICAgICAgICAgICAgXCJcXG5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGpzb247XG4gICAgfVxuICAgIGFzeW5jIF9lbnN1cmVTZXJ2ZXJJbmZvKCkge1xuICAgICAgICBpZiAodGhpcy5fZ2V0U2VydmVySW5mb1Byb21pc2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fZ2V0U2VydmVySW5mb1Byb21pc2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZXJ2ZXJJbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlcnZlckluZm8gPSBhd2FpdCB0aGlzLl9nZXRTZXJ2ZXJJbmZvKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0xBTkdTTUlUSF06IEZhaWxlZCB0byBmZXRjaCBpbmZvIG9uIHN1cHBvcnRlZCBvcGVyYXRpb25zLiBGYWxsaW5nIGJhY2sgdG8gYmF0Y2ggb3BlcmF0aW9ucyBhbmQgZGVmYXVsdCBsaW1pdHMuIEluZm86ICR7ZS5zdGF0dXMgPz8gXCJVbnNwZWNpZmllZCBzdGF0dXMgY29kZVwifSAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VydmVySW5mbyA/PyB7fTtcbiAgICAgICAgICAgIH0pKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFNlcnZlckluZm9Qcm9taXNlLnRoZW4oKHNlcnZlckluZm8pID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZXJ2ZXJJbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9nZXRTZXJ2ZXJJbmZvUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZXJ2ZXJJbmZvO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgX2dldFNldHRpbmdzKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSB0aGlzLl9nZXQoXCIvc2V0dGluZ3NcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2V0dGluZ3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZsdXNoZXMgY3VycmVudCBxdWV1ZWQgdHJhY2VzLlxuICAgICAqL1xuICAgIGFzeW5jIGZsdXNoKCkge1xuICAgICAgICBjb25zdCBzaXplTGltaXRCeXRlcyA9IGF3YWl0IHRoaXMuX2dldEJhdGNoU2l6ZUxpbWl0Qnl0ZXMoKTtcbiAgICAgICAgY29uc3Qgc2l6ZUxpbWl0ID0gYXdhaXQgdGhpcy5fZ2V0QmF0Y2hTaXplTGltaXQoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5kcmFpbkF1dG9CYXRjaFF1ZXVlKHtcbiAgICAgICAgICAgIGJhdGNoU2l6ZUxpbWl0Qnl0ZXM6IHNpemVMaW1pdEJ5dGVzLFxuICAgICAgICAgICAgYmF0Y2hTaXplTGltaXQ6IHNpemVMaW1pdCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9jbG9uZUN1cnJlbnRPVEVMQ29udGV4dCgpIHtcbiAgICAgICAgY29uc3Qgb3RlbF90cmFjZSA9IGdldE9URUxUcmFjZSgpO1xuICAgICAgICBjb25zdCBvdGVsX2NvbnRleHQgPSBnZXRPVEVMQ29udGV4dCgpO1xuICAgICAgICBpZiAodGhpcy5sYW5nU21pdGhUb09URUxUcmFuc2xhdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gb3RlbF90cmFjZS5nZXRBY3RpdmVTcGFuKCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3RlbF90cmFjZS5zZXRTcGFuKG90ZWxfY29udGV4dC5hY3RpdmUoKSwgY3VycmVudFNwYW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZVJ1bihydW4sIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9maWx0ZXJGb3JTYW1wbGluZyhbcnVuXSkubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzZXNzaW9uX25hbWUgPSBydW4ucHJvamVjdF9uYW1lO1xuICAgICAgICBkZWxldGUgcnVuLnByb2plY3RfbmFtZTtcbiAgICAgICAgY29uc3QgcnVuQ3JlYXRlID0gYXdhaXQgdGhpcy5wcmVwYXJlUnVuQ3JlYXRlT3JVcGRhdGVJbnB1dHMoe1xuICAgICAgICAgICAgc2Vzc2lvbl9uYW1lLFxuICAgICAgICAgICAgLi4ucnVuLFxuICAgICAgICAgICAgc3RhcnRfdGltZTogcnVuLnN0YXJ0X3RpbWUgPz8gRGF0ZS5ub3coKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLmF1dG9CYXRjaFRyYWNpbmcgJiZcbiAgICAgICAgICAgIHJ1bkNyZWF0ZS50cmFjZV9pZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBydW5DcmVhdGUuZG90dGVkX29yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG90ZWxDb250ZXh0ID0gdGhpcy5fY2xvbmVDdXJyZW50T1RFTENvbnRleHQoKTtcbiAgICAgICAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUnVuT3BlcmF0aW9uKHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IFwiY3JlYXRlXCIsXG4gICAgICAgICAgICAgICAgaXRlbTogcnVuQ3JlYXRlLFxuICAgICAgICAgICAgICAgIG90ZWxDb250ZXh0LFxuICAgICAgICAgICAgICAgIGFwaUtleTogb3B0aW9ucz8uYXBpS2V5LFxuICAgICAgICAgICAgICAgIGFwaVVybDogb3B0aW9ucz8uYXBpVXJsLFxuICAgICAgICAgICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVyZ2VkUnVuQ3JlYXRlUGFyYW0gPSBtZXJnZVJ1bnRpbWVFbnZJbnRvUnVuKHJ1bkNyZWF0ZSwgdGhpcy5jYWNoZWRMU0VudlZhcnNGb3JNZXRhZGF0YSk7XG4gICAgICAgIGlmIChvcHRpb25zPy5hcGlLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVyc1tcIngtYXBpLWtleVwiXSA9IG9wdGlvbnMuYXBpS2V5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zPy53b3Jrc3BhY2VJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzW1wieC10ZW5hbnQtaWRcIl0gPSBvcHRpb25zLndvcmtzcGFjZUlkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvZHkgPSBzZXJpYWxpemVQYXlsb2FkRm9yVHJhY2luZyhtZXJnZWRSdW5DcmVhdGVQYXJhbSwgYENyZWF0aW5nIHJ1biB3aXRoIGlkOiAke21lcmdlZFJ1bkNyZWF0ZVBhcmFtLmlkfWApO1xuICAgICAgICBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke29wdGlvbnM/LmFwaVVybCA/PyB0aGlzLmFwaVVybH0vcnVuc2AsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcImNyZWF0ZSBydW5cIiwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmF0Y2ggaW5nZXN0L3Vwc2VydCBtdWx0aXBsZSBydW5zIGluIHRoZSBMYW5nc21pdGggc3lzdGVtLlxuICAgICAqIEBwYXJhbSBydW5zXG4gICAgICovXG4gICAgYXN5bmMgYmF0Y2hJbmdlc3RSdW5zKHsgcnVuQ3JlYXRlcywgcnVuVXBkYXRlcywgfSwgb3B0aW9ucykge1xuICAgICAgICBpZiAocnVuQ3JlYXRlcyA9PT0gdW5kZWZpbmVkICYmIHJ1blVwZGF0ZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwcmVwYXJlZENyZWF0ZVBhcmFtcyA9IGF3YWl0IFByb21pc2UuYWxsKHJ1bkNyZWF0ZXM/Lm1hcCgoY3JlYXRlKSA9PiB0aGlzLnByZXBhcmVSdW5DcmVhdGVPclVwZGF0ZUlucHV0cyhjcmVhdGUpKSA/PyBbXSk7XG4gICAgICAgIGxldCBwcmVwYXJlZFVwZGF0ZVBhcmFtcyA9IGF3YWl0IFByb21pc2UuYWxsKHJ1blVwZGF0ZXM/Lm1hcCgodXBkYXRlKSA9PiB0aGlzLnByZXBhcmVSdW5DcmVhdGVPclVwZGF0ZUlucHV0cyh1cGRhdGUpKSA/PyBbXSk7XG4gICAgICAgIGlmIChwcmVwYXJlZENyZWF0ZVBhcmFtcy5sZW5ndGggPiAwICYmIHByZXBhcmVkVXBkYXRlUGFyYW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZUJ5SWQgPSBwcmVwYXJlZENyZWF0ZVBhcmFtcy5yZWR1Y2UoKHBhcmFtcywgcnVuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFydW4uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyYW1zW3J1bi5pZF0gPSBydW47XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIGNvbnN0IHN0YW5kYWxvbmVVcGRhdGVzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZVBhcmFtIG9mIHByZXBhcmVkVXBkYXRlUGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZVBhcmFtLmlkICE9PSB1bmRlZmluZWQgJiYgY3JlYXRlQnlJZFt1cGRhdGVQYXJhbS5pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQnlJZFt1cGRhdGVQYXJhbS5pZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jcmVhdGVCeUlkW3VwZGF0ZVBhcmFtLmlkXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnVwZGF0ZVBhcmFtLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhbmRhbG9uZVVwZGF0ZXMucHVzaCh1cGRhdGVQYXJhbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJlcGFyZWRDcmVhdGVQYXJhbXMgPSBPYmplY3QudmFsdWVzKGNyZWF0ZUJ5SWQpO1xuICAgICAgICAgICAgcHJlcGFyZWRVcGRhdGVQYXJhbXMgPSBzdGFuZGFsb25lVXBkYXRlcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByYXdCYXRjaCA9IHtcbiAgICAgICAgICAgIHBvc3Q6IHByZXBhcmVkQ3JlYXRlUGFyYW1zLFxuICAgICAgICAgICAgcGF0Y2g6IHByZXBhcmVkVXBkYXRlUGFyYW1zLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXJhd0JhdGNoLnBvc3QubGVuZ3RoICYmICFyYXdCYXRjaC5wYXRjaC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiYXRjaENodW5rcyA9IHtcbiAgICAgICAgICAgIHBvc3Q6IFtdLFxuICAgICAgICAgICAgcGF0Y2g6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IGsgb2YgW1wicG9zdFwiLCBcInBhdGNoXCJdKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrO1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hJdGVtcyA9IHJhd0JhdGNoW2tleV0ucmV2ZXJzZSgpO1xuICAgICAgICAgICAgbGV0IGJhdGNoSXRlbSA9IGJhdGNoSXRlbXMucG9wKCk7XG4gICAgICAgICAgICB3aGlsZSAoYmF0Y2hJdGVtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBUeXBlIGlzIHdyb25nIGJ1dCB0aGlzIGlzIGEgZGVwcmVjYXRlZCBjb2RlIHBhdGggYW55d2F5XG4gICAgICAgICAgICAgICAgYmF0Y2hDaHVua3Nba2V5XS5wdXNoKGJhdGNoSXRlbSk7XG4gICAgICAgICAgICAgICAgYmF0Y2hJdGVtID0gYmF0Y2hJdGVtcy5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYmF0Y2hDaHVua3MucG9zdC5sZW5ndGggPiAwIHx8IGJhdGNoQ2h1bmtzLnBhdGNoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJ1bklkcyA9IGJhdGNoQ2h1bmtzLnBvc3RcbiAgICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLmlkKVxuICAgICAgICAgICAgICAgIC5jb25jYXQoYmF0Y2hDaHVua3MucGF0Y2gubWFwKChpdGVtKSA9PiBpdGVtLmlkKSlcbiAgICAgICAgICAgICAgICAuam9pbihcIixcIik7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wb3N0QmF0Y2hJbmdlc3RSdW5zKHNlcmlhbGl6ZVBheWxvYWRGb3JUcmFjaW5nKGJhdGNoQ2h1bmtzLCBgSW5nZXN0aW5nIHJ1bnMgd2l0aCBpZHM6ICR7cnVuSWRzfWApLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfcG9zdEJhdGNoSW5nZXN0UnVucyhib2R5LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvcHRpb25zPy5hcGlLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVyc1tcIngtYXBpLWtleVwiXSA9IG9wdGlvbnMuYXBpS2V5O1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuYmF0Y2hJbmdlc3RDYWxsZXIuY2FsbFdpdGhPcHRpb25zKHsgc2l6ZUJ5dGVzOiBvcHRpb25zPy5zaXplQnl0ZXMgfSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7b3B0aW9ucz8uYXBpVXJsID8/IHRoaXMuYXBpVXJsfS9ydW5zL2JhdGNoYCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwiYmF0Y2ggY3JlYXRlIHJ1blwiLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCYXRjaCBpbmdlc3QvdXBzZXJ0IG11bHRpcGxlIHJ1bnMgaW4gdGhlIExhbmdzbWl0aCBzeXN0ZW0uXG4gICAgICogQHBhcmFtIHJ1bnNcbiAgICAgKi9cbiAgICBhc3luYyBtdWx0aXBhcnRJbmdlc3RSdW5zKHsgcnVuQ3JlYXRlcywgcnVuVXBkYXRlcywgfSwgb3B0aW9ucykge1xuICAgICAgICBpZiAocnVuQ3JlYXRlcyA9PT0gdW5kZWZpbmVkICYmIHJ1blVwZGF0ZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRyYW5zZm9ybSBhbmQgY29udmVydCB0byBkaWN0c1xuICAgICAgICBjb25zdCBhbGxBdHRhY2htZW50cyA9IHt9O1xuICAgICAgICBsZXQgcHJlcGFyZWRDcmVhdGVQYXJhbXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBjcmVhdGUgb2YgcnVuQ3JlYXRlcyA/PyBbXSkge1xuICAgICAgICAgICAgY29uc3QgcHJlcGFyZWRDcmVhdGUgPSBhd2FpdCB0aGlzLnByZXBhcmVSdW5DcmVhdGVPclVwZGF0ZUlucHV0cyhjcmVhdGUpO1xuICAgICAgICAgICAgaWYgKHByZXBhcmVkQ3JlYXRlLmlkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBwcmVwYXJlZENyZWF0ZS5hdHRhY2htZW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYWxsQXR0YWNobWVudHNbcHJlcGFyZWRDcmVhdGUuaWRdID0gcHJlcGFyZWRDcmVhdGUuYXR0YWNobWVudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxldGUgcHJlcGFyZWRDcmVhdGUuYXR0YWNobWVudHM7XG4gICAgICAgICAgICBwcmVwYXJlZENyZWF0ZVBhcmFtcy5wdXNoKHByZXBhcmVkQ3JlYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcHJlcGFyZWRVcGRhdGVQYXJhbXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgcnVuVXBkYXRlcyA/PyBbXSkge1xuICAgICAgICAgICAgcHJlcGFyZWRVcGRhdGVQYXJhbXMucHVzaChhd2FpdCB0aGlzLnByZXBhcmVSdW5DcmVhdGVPclVwZGF0ZUlucHV0cyh1cGRhdGUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXF1aXJlIHRyYWNlX2lkIGFuZCBkb3R0ZWRfb3JkZXJcbiAgICAgICAgY29uc3QgaW52YWxpZFJ1bkNyZWF0ZSA9IHByZXBhcmVkQ3JlYXRlUGFyYW1zLmZpbmQoKHJ1bkNyZWF0ZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChydW5DcmVhdGUudHJhY2VfaWQgPT09IHVuZGVmaW5lZCB8fCBydW5DcmVhdGUuZG90dGVkX29yZGVyID09PSB1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGludmFsaWRSdW5DcmVhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNdWx0aXBhcnQgaW5nZXN0IHJlcXVpcmVzIFwidHJhY2VfaWRcIiBhbmQgXCJkb3R0ZWRfb3JkZXJcIiB0byBiZSBzZXQgd2hlbiBjcmVhdGluZyBhIHJ1bmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGludmFsaWRSdW5VcGRhdGUgPSBwcmVwYXJlZFVwZGF0ZVBhcmFtcy5maW5kKChydW5VcGRhdGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAocnVuVXBkYXRlLnRyYWNlX2lkID09PSB1bmRlZmluZWQgfHwgcnVuVXBkYXRlLmRvdHRlZF9vcmRlciA9PT0gdW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpbnZhbGlkUnVuVXBkYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTXVsdGlwYXJ0IGluZ2VzdCByZXF1aXJlcyBcInRyYWNlX2lkXCIgYW5kIFwiZG90dGVkX29yZGVyXCIgdG8gYmUgc2V0IHdoZW4gdXBkYXRpbmcgYSBydW5gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb21iaW5lIHBvc3QgYW5kIHBhdGNoIGRpY3RzIHdoZXJlIHBvc3NpYmxlXG4gICAgICAgIGlmIChwcmVwYXJlZENyZWF0ZVBhcmFtcy5sZW5ndGggPiAwICYmIHByZXBhcmVkVXBkYXRlUGFyYW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZUJ5SWQgPSBwcmVwYXJlZENyZWF0ZVBhcmFtcy5yZWR1Y2UoKHBhcmFtcywgcnVuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFydW4uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyYW1zW3J1bi5pZF0gPSBydW47XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIGNvbnN0IHN0YW5kYWxvbmVVcGRhdGVzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZVBhcmFtIG9mIHByZXBhcmVkVXBkYXRlUGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZVBhcmFtLmlkICE9PSB1bmRlZmluZWQgJiYgY3JlYXRlQnlJZFt1cGRhdGVQYXJhbS5pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQnlJZFt1cGRhdGVQYXJhbS5pZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jcmVhdGVCeUlkW3VwZGF0ZVBhcmFtLmlkXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnVwZGF0ZVBhcmFtLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhbmRhbG9uZVVwZGF0ZXMucHVzaCh1cGRhdGVQYXJhbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJlcGFyZWRDcmVhdGVQYXJhbXMgPSBPYmplY3QudmFsdWVzKGNyZWF0ZUJ5SWQpO1xuICAgICAgICAgICAgcHJlcGFyZWRVcGRhdGVQYXJhbXMgPSBzdGFuZGFsb25lVXBkYXRlcztcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlcGFyZWRDcmVhdGVQYXJhbXMubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgICBwcmVwYXJlZFVwZGF0ZVBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZW5kIHRoZSBydW5zIGluIG11bHRpcGFydCByZXF1ZXN0c1xuICAgICAgICBjb25zdCBhY2N1bXVsYXRlZENvbnRleHQgPSBbXTtcbiAgICAgICAgY29uc3QgYWNjdW11bGF0ZWRQYXJ0cyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IFttZXRob2QsIHBheWxvYWRzXSBvZiBbXG4gICAgICAgICAgICBbXCJwb3N0XCIsIHByZXBhcmVkQ3JlYXRlUGFyYW1zXSxcbiAgICAgICAgICAgIFtcInBhdGNoXCIsIHByZXBhcmVkVXBkYXRlUGFyYW1zXSxcbiAgICAgICAgXSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcmlnaW5hbFBheWxvYWQgb2YgcGF5bG9hZHMpIHtcbiAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IGZpZWxkcyB0byBiZSBzZW50IGFzIHNlcGFyYXRlIHBhcnRzXG4gICAgICAgICAgICAgICAgY29uc3QgeyBpbnB1dHMsIG91dHB1dHMsIGV2ZW50cywgZXh0cmEsIGVycm9yLCBzZXJpYWxpemVkLCBhdHRhY2htZW50cywgLi4ucGF5bG9hZCB9ID0gb3JpZ2luYWxQYXlsb2FkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHsgaW5wdXRzLCBvdXRwdXRzLCBldmVudHMsIGV4dHJhLCBlcnJvciwgc2VyaWFsaXplZCB9O1xuICAgICAgICAgICAgICAgIC8vIGVuY29kZSB0aGUgbWFpbiBydW4gcGF5bG9hZFxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ2lmaWVkUGF5bG9hZCA9IHNlcmlhbGl6ZVBheWxvYWRGb3JUcmFjaW5nKHBheWxvYWQsIGBTZXJpYWxpemluZyBmb3IgbXVsdGlwYXJ0IGluZ2VzdGlvbiBvZiBydW4gd2l0aCBpZDogJHtwYXlsb2FkLmlkfWApO1xuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUGFydHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGAke21ldGhvZH0uJHtwYXlsb2FkLmlkfWAsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IG5ldyBCbG9iKFtzdHJpbmdpZmllZFBheWxvYWRdLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBgYXBwbGljYXRpb24vanNvbjsgbGVuZ3RoPSR7c3RyaW5naWZpZWRQYXlsb2FkLmxlbmd0aH1gLCAvLyBlbmNvZGluZz1nemlwXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIGVuY29kZSB0aGUgZmllbGRzIHdlIGNvbGxlY3RlZFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ2lmaWVkVmFsdWUgPSBzZXJpYWxpemVQYXlsb2FkRm9yVHJhY2luZyh2YWx1ZSwgYFNlcmlhbGl6aW5nICR7a2V5fSBmb3IgbXVsdGlwYXJ0IGluZ2VzdGlvbiBvZiBydW4gd2l0aCBpZDogJHtwYXlsb2FkLmlkfWApO1xuICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFBhcnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYCR7bWV0aG9kfS4ke3BheWxvYWQuaWR9LiR7a2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBuZXcgQmxvYihbc3RyaW5naWZpZWRWYWx1ZV0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBgYXBwbGljYXRpb24vanNvbjsgbGVuZ3RoPSR7c3RyaW5naWZpZWRWYWx1ZS5sZW5ndGh9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZW5jb2RlIHRoZSBhdHRhY2htZW50c1xuICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLmlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0YWNobWVudHMgPSBhbGxBdHRhY2htZW50c1twYXlsb2FkLmlkXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGFjaG1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYWxsQXR0YWNobWVudHNbcGF5bG9hZC5pZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCBhdHRhY2htZW50XSBvZiBPYmplY3QuZW50cmllcyhhdHRhY2htZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudFR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXR0YWNobWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NvbnRlbnRUeXBlLCBjb250ZW50XSA9IGF0dGFjaG1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IGF0dGFjaG1lbnQubWltZVR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhdHRhY2htZW50LmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIHRoYXQgdGhlIGF0dGFjaG1lbnQgbmFtZSBkb2Vzbid0IGNvbnRhaW4gYSAnLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5pbmNsdWRlcyhcIi5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBTa2lwcGluZyBhdHRhY2htZW50ICcke25hbWV9JyBmb3IgcnVuICR7cGF5bG9hZC5pZH06IEludmFsaWQgYXR0YWNobWVudCBuYW1lLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBBdHRhY2htZW50IG5hbWVzIG11c3Qgbm90IGNvbnRhaW4gcGVyaW9kcyAoJy4nKS4gUGxlYXNlIHJlbmFtZSB0aGUgYXR0YWNobWVudCBhbmQgdHJ5IGFnYWluLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRQYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYGF0dGFjaG1lbnQuJHtwYXlsb2FkLmlkfS4ke25hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogbmV3IEJsb2IoW2NvbnRlbnRdLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBgJHtjb250ZW50VHlwZX07IGxlbmd0aD0ke2NvbnRlbnQuYnl0ZUxlbmd0aH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjb21wdXRlIGNvbnRleHRcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZENvbnRleHQucHVzaChgdHJhY2U9JHtwYXlsb2FkLnRyYWNlX2lkfSxpZD0ke3BheWxvYWQuaWR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5fc2VuZE11bHRpcGFydFJlcXVlc3QoYWNjdW11bGF0ZWRQYXJ0cywgYWNjdW11bGF0ZWRDb250ZXh0LmpvaW4oXCI7IFwiKSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIF9jcmVhdGVOb2RlRmV0Y2hCb2R5KHBhcnRzLCBib3VuZGFyeSkge1xuICAgICAgICAvLyBDcmVhdGUgbXVsdGlwYXJ0IGZvcm0gZGF0YSBtYW51YWxseSB1c2luZyBCbG9ic1xuICAgICAgICBjb25zdCBjaHVua3MgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICAgICAgICAvLyBBZGQgZmllbGQgYm91bmRhcnlcbiAgICAgICAgICAgIGNodW5rcy5wdXNoKG5ldyBCbG9iKFtgLS0ke2JvdW5kYXJ5fVxcclxcbmBdKSk7XG4gICAgICAgICAgICBjaHVua3MucHVzaChuZXcgQmxvYihbXG4gICAgICAgICAgICAgICAgYENvbnRlbnQtRGlzcG9zaXRpb246IGZvcm0tZGF0YTsgbmFtZT1cIiR7cGFydC5uYW1lfVwiXFxyXFxuYCxcbiAgICAgICAgICAgICAgICBgQ29udGVudC1UeXBlOiAke3BhcnQucGF5bG9hZC50eXBlfVxcclxcblxcclxcbmAsXG4gICAgICAgICAgICBdKSk7XG4gICAgICAgICAgICBjaHVua3MucHVzaChwYXJ0LnBheWxvYWQpO1xuICAgICAgICAgICAgY2h1bmtzLnB1c2gobmV3IEJsb2IoW1wiXFxyXFxuXCJdKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIGZpbmFsIGJvdW5kYXJ5XG4gICAgICAgIGNodW5rcy5wdXNoKG5ldyBCbG9iKFtgLS0ke2JvdW5kYXJ5fS0tXFxyXFxuYF0pKTtcbiAgICAgICAgLy8gQ29tYmluZSBhbGwgY2h1bmtzIGludG8gYSBzaW5nbGUgQmxvYlxuICAgICAgICBjb25zdCBib2R5ID0gbmV3IEJsb2IoY2h1bmtzKTtcbiAgICAgICAgLy8gQ29udmVydCBCbG9iIHRvIEFycmF5QnVmZmVyIGZvciBjb21wYXRpYmlsaXR5XG4gICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYm9keS5hcnJheUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gYXJyYXlCdWZmZXI7XG4gICAgfVxuICAgIGFzeW5jIF9jcmVhdGVNdWx0aXBhcnRTdHJlYW0ocGFydHMsIGJvdW5kYXJ5KSB7XG4gICAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICAgICAgLy8gQ3JlYXRlIGEgUmVhZGFibGVTdHJlYW0gZm9yIHN0cmVhbWluZyB0aGUgbXVsdGlwYXJ0IGRhdGFcbiAgICAgICAgLy8gT25seSBkbyBzcGVjaWFsIGhhbmRsaW5nIGlmIHdlJ3JlIHVzaW5nIG5vZGUtZmV0Y2hcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgIGFzeW5jIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gd3JpdGUgYSBjaHVuayB0byB0aGUgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3Qgd3JpdGVDaHVuayA9IGFzeW5jIChjaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNodW5rID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoY2h1bmspKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIFdyaXRlIGVhY2ggcGFydCB0byB0aGUgc3RyZWFtXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdyaXRlIGJvdW5kYXJ5IGFuZCBoZWFkZXJzXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlQ2h1bmsoYC0tJHtib3VuZGFyeX1cXHJcXG5gKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVDaHVuayhgQ29udGVudC1EaXNwb3NpdGlvbjogZm9ybS1kYXRhOyBuYW1lPVwiJHtwYXJ0Lm5hbWV9XCJcXHJcXG5gKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVDaHVuayhgQ29udGVudC1UeXBlOiAke3BhcnQucGF5bG9hZC50eXBlfVxcclxcblxcclxcbmApO1xuICAgICAgICAgICAgICAgICAgICAvLyBXcml0ZSB0aGUgcGF5bG9hZFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkU3RyZWFtID0gcGFydC5wYXlsb2FkLnN0cmVhbSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBwYXlsb2FkU3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICghKHJlc3VsdCA9IGF3YWl0IHJlYWRlci5yZWFkKCkpLmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlQ2h1bmsoXCJcXHJcXG5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdyaXRlIGZpbmFsIGJvdW5kYXJ5XG4gICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVDaHVuayhgLS0ke2JvdW5kYXJ5fS0tXFxyXFxuYCk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgfVxuICAgIGFzeW5jIF9zZW5kTXVsdGlwYXJ0UmVxdWVzdChwYXJ0cywgY29udGV4dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBDcmVhdGUgbXVsdGlwYXJ0IGZvcm0gZGF0YSBib3VuZGFyeVxuICAgICAgICBjb25zdCBib3VuZGFyeSA9IFwiLS0tLUxhbmdTbWl0aEZvcm1Cb3VuZGFyeVwiICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7XG4gICAgICAgIGNvbnN0IGlzTm9kZUZldGNoID0gX2dsb2JhbEZldGNoSW1wbGVtZW50YXRpb25Jc05vZGVGZXRjaCgpO1xuICAgICAgICBjb25zdCBidWlsZEJ1ZmZlcmVkID0gKCkgPT4gdGhpcy5fY3JlYXRlTm9kZUZldGNoQm9keShwYXJ0cywgYm91bmRhcnkpO1xuICAgICAgICBjb25zdCBidWlsZFN0cmVhbSA9ICgpID0+IHRoaXMuX2NyZWF0ZU11bHRpcGFydFN0cmVhbShwYXJ0cywgYm91bmRhcnkpO1xuICAgICAgICBjb25zdCBzZW5kV2l0aFJldHJ5ID0gYXN5bmMgKGJvZHlGYWN0b3J5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iYXRjaEluZ2VzdENhbGxlci5jYWxsV2l0aE9wdGlvbnMoeyBzaXplQnl0ZXM6IG9wdGlvbnM/LnNpemVCeXRlcyB9LCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IGJvZHlGYWN0b3J5KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBgbXVsdGlwYXJ0L2Zvcm0tZGF0YTsgYm91bmRhcnk9JHtib3VuZGFyeX1gLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnM/LmFwaUtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbXCJ4LWFwaS1rZXlcIl0gPSBvcHRpb25zLmFwaUtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHRyYW5zZm9ybWVkQm9keSA9IGJvZHk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnM/LnVzZUd6aXAgJiZcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGJvZHkgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgXCJwaXBlVGhyb3VnaFwiIGluIGJvZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtZWRCb2R5ID0gYm9keS5waXBlVGhyb3VnaChuZXcgQ29tcHJlc3Npb25TdHJlYW0oXCJnemlwXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tcIkNvbnRlbnQtRW5jb2RpbmdcIl0gPSBcImd6aXBcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHtvcHRpb25zPy5hcGlVcmwgPz8gdGhpcy5hcGlVcmx9L3J1bnMvbXVsdGlwYXJ0YCwge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiB0cmFuc2Zvcm1lZEJvZHksXG4gICAgICAgICAgICAgICAgICAgIGR1cGxleDogXCJoYWxmXCIsXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXNwb25zZSwgYEZhaWxlZCB0byBzZW5kIG11bHRpcGFydCByZXF1ZXN0YCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgcmVzO1xuICAgICAgICAgICAgbGV0IHN0cmVhbWVkQXR0ZW1wdCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gYXR0ZW1wdCBzdHJlYW0gb25seSBpZiBub3QgZGlzYWJsZWQgYW5kIG5vdCB1c2luZyBub2RlLWZldGNoIG9yIEJ1blxuICAgICAgICAgICAgaWYgKCFpc05vZGVGZXRjaCAmJlxuICAgICAgICAgICAgICAgICF0aGlzLm11bHRpcGFydFN0cmVhbWluZ0Rpc2FibGVkICYmXG4gICAgICAgICAgICAgICAgZ2V0RW52KCkgIT09IFwiYnVuXCIpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1lZEF0dGVtcHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlcyA9IGF3YWl0IHNlbmRXaXRoUmV0cnkoYnVpbGRTdHJlYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzID0gYXdhaXQgc2VuZFdpdGhSZXRyeShidWlsZEJ1ZmZlcmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIHN0cmVhbSBmYWlscywgZmFsbGJhY2sgdG8gYnVmZmVyZWQgYm9keVxuICAgICAgICAgICAgaWYgKCghdGhpcy5tdWx0aXBhcnRTdHJlYW1pbmdEaXNhYmxlZCB8fCBzdHJlYW1lZEF0dGVtcHQpICYmXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyA9PT0gNDIyICYmXG4gICAgICAgICAgICAgICAgKG9wdGlvbnM/LmFwaVVybCA/PyB0aGlzLmFwaVVybCkgIT09IERFRkFVTFRfQVBJX1VSTCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgU3RyZWFtaW5nIG11bHRpcGFydCB1cGxvYWQgdG8gJHtvcHRpb25zPy5hcGlVcmwgPz8gdGhpcy5hcGlVcmx9L3J1bnMvbXVsdGlwYXJ0IGZhaWxlZC4gYCArXG4gICAgICAgICAgICAgICAgICAgIGBUaGlzIHVzdWFsbHkgbWVhbnMgdGhlIGhvc3QgZG9lcyBub3Qgc3VwcG9ydCBjaHVua2VkIHVwbG9hZHMuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgUmV0cnlpbmcgd2l0aCBhIGJ1ZmZlcmVkIHVwbG9hZCBmb3Igb3BlcmF0aW9uIFwiJHtjb250ZXh0fVwiLmApO1xuICAgICAgICAgICAgICAgIC8vIERpc2FibGUgc3RyZWFtaW5nIGZvciBmdXR1cmUgcmVxdWVzdHNcbiAgICAgICAgICAgICAgICB0aGlzLm11bHRpcGFydFN0cmVhbWluZ0Rpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyByZXRyeSB3aXRoIGZ1bGx5LWJ1ZmZlcmVkIGJvZHlcbiAgICAgICAgICAgICAgICByZXMgPSBhd2FpdCBzZW5kV2l0aFJldHJ5KGJ1aWxkQnVmZmVyZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGAke2UubWVzc2FnZS50cmltKCl9XFxuXFxuQ29udGV4dDogJHtjb250ZXh0fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVJ1bihydW5JZCwgcnVuLCBvcHRpb25zKSB7XG4gICAgICAgIGFzc2VydFV1aWQocnVuSWQpO1xuICAgICAgICBpZiAocnVuLmlucHV0cykge1xuICAgICAgICAgICAgcnVuLmlucHV0cyA9IGF3YWl0IHRoaXMucHJvY2Vzc0lucHV0cyhydW4uaW5wdXRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocnVuLm91dHB1dHMpIHtcbiAgICAgICAgICAgIHJ1bi5vdXRwdXRzID0gYXdhaXQgdGhpcy5wcm9jZXNzT3V0cHV0cyhydW4ub3V0cHV0cyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogVW50YW5nbGUgdHlwZXNcbiAgICAgICAgY29uc3QgZGF0YSA9IHsgLi4ucnVuLCBpZDogcnVuSWQgfTtcbiAgICAgICAgaWYgKCF0aGlzLl9maWx0ZXJGb3JTYW1wbGluZyhbZGF0YV0sIHRydWUpLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF1dG9CYXRjaFRyYWNpbmcgJiZcbiAgICAgICAgICAgIGRhdGEudHJhY2VfaWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZGF0YS5kb3R0ZWRfb3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qgb3RlbENvbnRleHQgPSB0aGlzLl9jbG9uZUN1cnJlbnRPVEVMQ29udGV4dCgpO1xuICAgICAgICAgICAgaWYgKHJ1bi5lbmRfdGltZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZGF0YS5wYXJlbnRfcnVuX2lkID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrT25Sb290UnVuRmluYWxpemF0aW9uICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWFudWFsRmx1c2hNb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciBiYXRjaGVzIGFzIHNvb24gYXMgYSByb290IHRyYWNlIGVuZHMgYW5kIHdhaXQgdG8gZW5zdXJlIHRyYWNlIGZpbmlzaGVzXG4gICAgICAgICAgICAgICAgLy8gaW4gc2VydmVybGVzcyBlbnZpcm9ubWVudHMuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzUnVuT3BlcmF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcInVwZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICBpdGVtOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBvdGVsQ29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5OiBvcHRpb25zPy5hcGlLZXksXG4gICAgICAgICAgICAgICAgICAgIGFwaVVybDogb3B0aW9ucz8uYXBpVXJsLFxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUnVuT3BlcmF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcInVwZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICBpdGVtOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBvdGVsQ29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5OiBvcHRpb25zPy5hcGlLZXksXG4gICAgICAgICAgICAgICAgICAgIGFwaVVybDogb3B0aW9ucz8uYXBpVXJsLFxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG9wdGlvbnM/LmFwaUtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzW1wieC1hcGkta2V5XCJdID0gb3B0aW9ucy5hcGlLZXk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnM/LndvcmtzcGFjZUlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbXCJ4LXRlbmFudC1pZFwiXSA9IG9wdGlvbnMud29ya3NwYWNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm9keSA9IHNlcmlhbGl6ZVBheWxvYWRGb3JUcmFjaW5nKHJ1biwgYFNlcmlhbGl6aW5nIHBheWxvYWQgdG8gdXBkYXRlIHJ1biB3aXRoIGlkOiAke3J1bklkfWApO1xuICAgICAgICBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke29wdGlvbnM/LmFwaVVybCA/PyB0aGlzLmFwaVVybH0vcnVucy8ke3J1bklkfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJ1cGRhdGUgcnVuXCIsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHJlYWRSdW4ocnVuSWQsIHsgbG9hZENoaWxkUnVucyB9ID0geyBsb2FkQ2hpbGRSdW5zOiBmYWxzZSB9KSB7XG4gICAgICAgIGFzc2VydFV1aWQocnVuSWQpO1xuICAgICAgICBsZXQgcnVuID0gYXdhaXQgdGhpcy5fZ2V0KGAvcnVucy8ke3J1bklkfWApO1xuICAgICAgICBpZiAobG9hZENoaWxkUnVucykge1xuICAgICAgICAgICAgcnVuID0gYXdhaXQgdGhpcy5fbG9hZENoaWxkUnVucyhydW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGdldFJ1blVybCh7IHJ1bklkLCBydW4sIHByb2plY3RPcHRzLCB9KSB7XG4gICAgICAgIGlmIChydW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IHNlc3Npb25JZDtcbiAgICAgICAgICAgIGlmIChydW4uc2Vzc2lvbl9pZCkge1xuICAgICAgICAgICAgICAgIHNlc3Npb25JZCA9IHJ1bi5zZXNzaW9uX2lkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocHJvamVjdE9wdHM/LnByb2plY3ROYW1lKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkID0gKGF3YWl0IHRoaXMucmVhZFByb2plY3QoeyBwcm9qZWN0TmFtZTogcHJvamVjdE9wdHM/LnByb2plY3ROYW1lIH0pKS5pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHByb2plY3RPcHRzPy5wcm9qZWN0SWQpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQgPSBwcm9qZWN0T3B0cz8ucHJvamVjdElkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IHRoaXMucmVhZFByb2plY3Qoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0TmFtZTogZ2V0TGFuZ1NtaXRoRW52aXJvbm1lbnRWYXJpYWJsZShcIlBST0pFQ1RcIikgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkID0gcHJvamVjdC5pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRlbmFudElkID0gYXdhaXQgdGhpcy5fZ2V0VGVuYW50SWQoKTtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmdldEhvc3RVcmwoKX0vby8ke3RlbmFudElkfS9wcm9qZWN0cy9wLyR7c2Vzc2lvbklkfS9yLyR7cnVuLmlkfT9wb2xsPXRydWVgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJ1bklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJ1bl8gPSBhd2FpdCB0aGlzLnJlYWRSdW4ocnVuSWQpO1xuICAgICAgICAgICAgaWYgKCFydW5fLmFwcF9wYXRoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSdW4gJHtydW5JZH0gaGFzIG5vIGFwcF9wYXRoYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBiYXNlVXJsID0gdGhpcy5nZXRIb3N0VXJsKCk7XG4gICAgICAgICAgICByZXR1cm4gYCR7YmFzZVVybH0ke3J1bl8uYXBwX3BhdGh9YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBlaXRoZXIgcnVuSWQgb3IgcnVuXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIF9sb2FkQ2hpbGRSdW5zKHJ1bikge1xuICAgICAgICBjb25zdCBjaGlsZFJ1bnMgPSBhd2FpdCB0b0FycmF5KHRoaXMubGlzdFJ1bnMoe1xuICAgICAgICAgICAgaXNSb290OiBmYWxzZSxcbiAgICAgICAgICAgIHByb2plY3RJZDogcnVuLnNlc3Npb25faWQsXG4gICAgICAgICAgICB0cmFjZUlkOiBydW4udHJhY2VfaWQsXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgdHJlZW1hcCA9IHt9O1xuICAgICAgICBjb25zdCBydW5zID0ge307XG4gICAgICAgIC8vIFRPRE86IG1ha2UgZG90dGVkIG9yZGVyIHJlcXVpcmVkIHdoZW4gdGhlIG1pZ3JhdGlvbiBmaW5pc2hlc1xuICAgICAgICBjaGlsZFJ1bnMuc29ydCgoYSwgYikgPT4gKGE/LmRvdHRlZF9vcmRlciA/PyBcIlwiKS5sb2NhbGVDb21wYXJlKGI/LmRvdHRlZF9vcmRlciA/PyBcIlwiKSk7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGRSdW4gb2YgY2hpbGRSdW5zKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGRSdW4ucGFyZW50X3J1bl9pZCA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIGNoaWxkUnVuLnBhcmVudF9ydW5faWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hpbGQgcnVuICR7Y2hpbGRSdW4uaWR9IGhhcyBubyBwYXJlbnRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGlsZFJ1bi5kb3R0ZWRfb3JkZXI/LnN0YXJ0c1dpdGgocnVuLmRvdHRlZF9vcmRlciA/PyBcIlwiKSAmJlxuICAgICAgICAgICAgICAgIGNoaWxkUnVuLmlkICE9PSBydW4uaWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShjaGlsZFJ1bi5wYXJlbnRfcnVuX2lkIGluIHRyZWVtYXApKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZWVtYXBbY2hpbGRSdW4ucGFyZW50X3J1bl9pZF0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJlZW1hcFtjaGlsZFJ1bi5wYXJlbnRfcnVuX2lkXS5wdXNoKGNoaWxkUnVuKTtcbiAgICAgICAgICAgICAgICBydW5zW2NoaWxkUnVuLmlkXSA9IGNoaWxkUnVuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJ1bi5jaGlsZF9ydW5zID0gdHJlZW1hcFtydW4uaWRdIHx8IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHJ1bklkIGluIHRyZWVtYXApIHtcbiAgICAgICAgICAgIGlmIChydW5JZCAhPT0gcnVuLmlkKSB7XG4gICAgICAgICAgICAgICAgcnVuc1tydW5JZF0uY2hpbGRfcnVucyA9IHRyZWVtYXBbcnVuSWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExpc3QgcnVucyBmcm9tIHRoZSBMYW5nU21pdGggc2VydmVyLlxuICAgICAqIEBwYXJhbSBwcm9qZWN0SWQgLSBUaGUgSUQgb2YgdGhlIHByb2plY3QgdG8gZmlsdGVyIGJ5LlxuICAgICAqIEBwYXJhbSBwcm9qZWN0TmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9qZWN0IHRvIGZpbHRlciBieS5cbiAgICAgKiBAcGFyYW0gcGFyZW50UnVuSWQgLSBUaGUgSUQgb2YgdGhlIHBhcmVudCBydW4gdG8gZmlsdGVyIGJ5LlxuICAgICAqIEBwYXJhbSB0cmFjZUlkIC0gVGhlIElEIG9mIHRoZSB0cmFjZSB0byBmaWx0ZXIgYnkuXG4gICAgICogQHBhcmFtIHJlZmVyZW5jZUV4YW1wbGVJZCAtIFRoZSBJRCBvZiB0aGUgcmVmZXJlbmNlIGV4YW1wbGUgdG8gZmlsdGVyIGJ5LlxuICAgICAqIEBwYXJhbSBzdGFydFRpbWUgLSBUaGUgc3RhcnQgdGltZSB0byBmaWx0ZXIgYnkuXG4gICAgICogQHBhcmFtIGlzUm9vdCAtIEluZGljYXRlcyB3aGV0aGVyIHRvIG9ubHkgcmV0dXJuIHJvb3QgcnVucy5cbiAgICAgKiBAcGFyYW0gcnVuVHlwZSAtIFRoZSBydW4gdHlwZSB0byBmaWx0ZXIgYnkuXG4gICAgICogQHBhcmFtIGVycm9yIC0gSW5kaWNhdGVzIHdoZXRoZXIgdG8gZmlsdGVyIGJ5IGVycm9yIHJ1bnMuXG4gICAgICogQHBhcmFtIGlkIC0gVGhlIElEIG9mIHRoZSBydW4gdG8gZmlsdGVyIGJ5LlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSBzdHJpbmcgdG8gZmlsdGVyIGJ5LlxuICAgICAqIEBwYXJhbSBmaWx0ZXIgLSBUaGUgZmlsdGVyIHN0cmluZyB0byBhcHBseSB0byB0aGUgcnVuIHNwYW5zLlxuICAgICAqIEBwYXJhbSB0cmFjZUZpbHRlciAtIFRoZSBmaWx0ZXIgc3RyaW5nIHRvIGFwcGx5IG9uIHRoZSByb290IHJ1biBvZiB0aGUgdHJhY2UuXG4gICAgICogQHBhcmFtIHRyZWVGaWx0ZXIgLSBUaGUgZmlsdGVyIHN0cmluZyB0byBhcHBseSBvbiBvdGhlciBydW5zIGluIHRoZSB0cmFjZS5cbiAgICAgKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgcnVucyB0byByZXRyaWV2ZS5cbiAgICAgKiBAcmV0dXJucyB7QXN5bmNJdGVyYWJsZTxSdW4+fSAtIFRoZSBydW5zLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBMaXN0IGFsbCBydW5zIGluIGEgcHJvamVjdFxuICAgICAqIGNvbnN0IHByb2plY3RSdW5zID0gY2xpZW50Lmxpc3RSdW5zKHsgcHJvamVjdE5hbWU6IFwiPHlvdXJfcHJvamVjdD5cIiB9KTtcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gTGlzdCBMTE0gYW5kIENoYXQgcnVucyBpbiB0aGUgbGFzdCAyNCBob3Vyc1xuICAgICAqIGNvbnN0IHRvZGF5c0xMTVJ1bnMgPSBjbGllbnQubGlzdFJ1bnMoe1xuICAgICAqICAgcHJvamVjdE5hbWU6IFwiPHlvdXJfcHJvamVjdD5cIixcbiAgICAgKiAgIHN0YXJ0X3RpbWU6IG5ldyBEYXRlKERhdGUubm93KCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgKiAgIHJ1bl90eXBlOiBcImxsbVwiLFxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBMaXN0IHRyYWNlcyBpbiBhIHByb2plY3RcbiAgICAgKiBjb25zdCByb290UnVucyA9IGNsaWVudC5saXN0UnVucyh7XG4gICAgICogICBwcm9qZWN0TmFtZTogXCI8eW91cl9wcm9qZWN0PlwiLFxuICAgICAqICAgZXhlY3V0aW9uX29yZGVyOiAxLFxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBMaXN0IHJ1bnMgd2l0aG91dCBlcnJvcnNcbiAgICAgKiBjb25zdCBjb3JyZWN0UnVucyA9IGNsaWVudC5saXN0UnVucyh7XG4gICAgICogICBwcm9qZWN0TmFtZTogXCI8eW91cl9wcm9qZWN0PlwiLFxuICAgICAqICAgZXJyb3I6IGZhbHNlLFxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBMaXN0IHJ1bnMgYnkgcnVuIElEXG4gICAgICogY29uc3QgcnVuSWRzID0gW1xuICAgICAqICAgXCJhMzYwOTJkMi00YWQ1LTRmYjQtOWMwZC0wZGJhOWEyZWQ4MzZcIixcbiAgICAgKiAgIFwiOTM5OGU2YmUtOTY0Zi00YWE0LThhZTktYWQ3OGNkNGI3MDc0XCIsXG4gICAgICogXTtcbiAgICAgKiBjb25zdCBzZWxlY3RlZFJ1bnMgPSBjbGllbnQubGlzdFJ1bnMoeyBydW5faWRzOiBydW5JZHMgfSk7XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIExpc3QgYWxsIFwiY2hhaW5cIiB0eXBlIHJ1bnMgdGhhdCB0b29rIG1vcmUgdGhhbiAxMCBzZWNvbmRzIGFuZCBoYWQgYHRvdGFsX3Rva2Vuc2AgZ3JlYXRlciB0aGFuIDUwMDBcbiAgICAgKiBjb25zdCBjaGFpblJ1bnMgPSBjbGllbnQubGlzdFJ1bnMoe1xuICAgICAqICAgcHJvamVjdE5hbWU6IFwiPHlvdXJfcHJvamVjdD5cIixcbiAgICAgKiAgIGZpbHRlcjogJ2FuZChlcShydW5fdHlwZSwgXCJjaGFpblwiKSwgZ3QobGF0ZW5jeSwgMTApLCBndCh0b3RhbF90b2tlbnMsIDUwMDApKScsXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIExpc3QgYWxsIHJ1bnMgY2FsbGVkIFwiZXh0cmFjdG9yXCIgd2hvc2Ugcm9vdCBvZiB0aGUgdHJhY2Ugd2FzIGFzc2lnbmVkIGZlZWRiYWNrIFwidXNlcl9zY29yZVwiIHNjb3JlIG9mIDFcbiAgICAgKiBjb25zdCBnb29kRXh0cmFjdG9yUnVucyA9IGNsaWVudC5saXN0UnVucyh7XG4gICAgICogICBwcm9qZWN0TmFtZTogXCI8eW91cl9wcm9qZWN0PlwiLFxuICAgICAqICAgZmlsdGVyOiAnZXEobmFtZSwgXCJleHRyYWN0b3JcIiknLFxuICAgICAqICAgdHJhY2VGaWx0ZXI6ICdhbmQoZXEoZmVlZGJhY2tfa2V5LCBcInVzZXJfc2NvcmVcIiksIGVxKGZlZWRiYWNrX3Njb3JlLCAxKSknLFxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBMaXN0IGFsbCBydW5zIHRoYXQgc3RhcnRlZCBhZnRlciBhIHNwZWNpZmljIHRpbWVzdGFtcCBhbmQgZWl0aGVyIGhhdmUgXCJlcnJvclwiIG5vdCBlcXVhbCB0byBudWxsIG9yIGEgXCJDb3JyZWN0bmVzc1wiIGZlZWRiYWNrIHNjb3JlIGVxdWFsIHRvIDBcbiAgICAgKiBjb25zdCBjb21wbGV4UnVucyA9IGNsaWVudC5saXN0UnVucyh7XG4gICAgICogICBwcm9qZWN0TmFtZTogXCI8eW91cl9wcm9qZWN0PlwiLFxuICAgICAqICAgZmlsdGVyOiAnYW5kKGd0KHN0YXJ0X3RpbWUsIFwiMjAyMy0wNy0xNVQxMjozNDo1NlpcIiksIG9yKG5lcShlcnJvciwgbnVsbCksIGFuZChlcShmZWVkYmFja19rZXksIFwiQ29ycmVjdG5lc3NcIiksIGVxKGZlZWRiYWNrX3Njb3JlLCAwLjApKSkpJyxcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gTGlzdCBhbGwgcnVucyB3aGVyZSBgdGFnc2AgaW5jbHVkZSBcImV4cGVyaW1lbnRhbFwiIG9yIFwiYmV0YVwiIGFuZCBgbGF0ZW5jeWAgaXMgZ3JlYXRlciB0aGFuIDIgc2Vjb25kc1xuICAgICAqIGNvbnN0IHRhZ2dlZFJ1bnMgPSBjbGllbnQubGlzdFJ1bnMoe1xuICAgICAqICAgcHJvamVjdE5hbWU6IFwiPHlvdXJfcHJvamVjdD5cIixcbiAgICAgKiAgIGZpbHRlcjogJ2FuZChvcihoYXModGFncywgXCJleHBlcmltZW50YWxcIiksIGhhcyh0YWdzLCBcImJldGFcIikpLCBndChsYXRlbmN5LCAyKSknLFxuICAgICAqIH0pO1xuICAgICAqL1xuICAgIGFzeW5jICpsaXN0UnVucyhwcm9wcykge1xuICAgICAgICBjb25zdCB7IHByb2plY3RJZCwgcHJvamVjdE5hbWUsIHBhcmVudFJ1bklkLCB0cmFjZUlkLCByZWZlcmVuY2VFeGFtcGxlSWQsIHN0YXJ0VGltZSwgZXhlY3V0aW9uT3JkZXIsIGlzUm9vdCwgcnVuVHlwZSwgZXJyb3IsIGlkLCBxdWVyeSwgZmlsdGVyLCB0cmFjZUZpbHRlciwgdHJlZUZpbHRlciwgbGltaXQsIHNlbGVjdCwgb3JkZXIsIH0gPSBwcm9wcztcbiAgICAgICAgbGV0IHByb2plY3RJZHMgPSBbXTtcbiAgICAgICAgaWYgKHByb2plY3RJZCkge1xuICAgICAgICAgICAgcHJvamVjdElkcyA9IEFycmF5LmlzQXJyYXkocHJvamVjdElkKSA/IHByb2plY3RJZCA6IFtwcm9qZWN0SWRdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9qZWN0TmFtZSkge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdE5hbWVzID0gQXJyYXkuaXNBcnJheShwcm9qZWN0TmFtZSlcbiAgICAgICAgICAgICAgICA/IHByb2plY3ROYW1lXG4gICAgICAgICAgICAgICAgOiBbcHJvamVjdE5hbWVdO1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdElkc18gPSBhd2FpdCBQcm9taXNlLmFsbChwcm9qZWN0TmFtZXMubWFwKChuYW1lKSA9PiB0aGlzLnJlYWRQcm9qZWN0KHsgcHJvamVjdE5hbWU6IG5hbWUgfSkudGhlbigocHJvamVjdCkgPT4gcHJvamVjdC5pZCkpKTtcbiAgICAgICAgICAgIHByb2plY3RJZHMucHVzaCguLi5wcm9qZWN0SWRzXyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmYXVsdF9zZWxlY3QgPSBbXG4gICAgICAgICAgICBcImFwcF9wYXRoXCIsXG4gICAgICAgICAgICBcImNvbXBsZXRpb25fY29zdFwiLFxuICAgICAgICAgICAgXCJjb21wbGV0aW9uX3Rva2Vuc1wiLFxuICAgICAgICAgICAgXCJkb3R0ZWRfb3JkZXJcIixcbiAgICAgICAgICAgIFwiZW5kX3RpbWVcIixcbiAgICAgICAgICAgIFwiZXJyb3JcIixcbiAgICAgICAgICAgIFwiZXZlbnRzXCIsXG4gICAgICAgICAgICBcImV4dHJhXCIsXG4gICAgICAgICAgICBcImZlZWRiYWNrX3N0YXRzXCIsXG4gICAgICAgICAgICBcImZpcnN0X3Rva2VuX3RpbWVcIixcbiAgICAgICAgICAgIFwiaWRcIixcbiAgICAgICAgICAgIFwiaW5wdXRzXCIsXG4gICAgICAgICAgICBcIm5hbWVcIixcbiAgICAgICAgICAgIFwib3V0cHV0c1wiLFxuICAgICAgICAgICAgXCJwYXJlbnRfcnVuX2lkXCIsXG4gICAgICAgICAgICBcInBhcmVudF9ydW5faWRzXCIsXG4gICAgICAgICAgICBcInByb21wdF9jb3N0XCIsXG4gICAgICAgICAgICBcInByb21wdF90b2tlbnNcIixcbiAgICAgICAgICAgIFwicmVmZXJlbmNlX2V4YW1wbGVfaWRcIixcbiAgICAgICAgICAgIFwicnVuX3R5cGVcIixcbiAgICAgICAgICAgIFwic2Vzc2lvbl9pZFwiLFxuICAgICAgICAgICAgXCJzdGFydF90aW1lXCIsXG4gICAgICAgICAgICBcInN0YXR1c1wiLFxuICAgICAgICAgICAgXCJ0YWdzXCIsXG4gICAgICAgICAgICBcInRvdGFsX2Nvc3RcIixcbiAgICAgICAgICAgIFwidG90YWxfdG9rZW5zXCIsXG4gICAgICAgICAgICBcInRyYWNlX2lkXCIsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICBzZXNzaW9uOiBwcm9qZWN0SWRzLmxlbmd0aCA/IHByb2plY3RJZHMgOiBudWxsLFxuICAgICAgICAgICAgcnVuX3R5cGU6IHJ1blR5cGUsXG4gICAgICAgICAgICByZWZlcmVuY2VfZXhhbXBsZTogcmVmZXJlbmNlRXhhbXBsZUlkLFxuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICB0cmFjZV9maWx0ZXI6IHRyYWNlRmlsdGVyLFxuICAgICAgICAgICAgdHJlZV9maWx0ZXI6IHRyZWVGaWx0ZXIsXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbk9yZGVyLFxuICAgICAgICAgICAgcGFyZW50X3J1bjogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lOiBzdGFydFRpbWUgPyBzdGFydFRpbWUudG9JU09TdHJpbmcoKSA6IG51bGwsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgbGltaXQsXG4gICAgICAgICAgICB0cmFjZTogdHJhY2VJZCxcbiAgICAgICAgICAgIHNlbGVjdDogc2VsZWN0ID8gc2VsZWN0IDogZGVmYXVsdF9zZWxlY3QsXG4gICAgICAgICAgICBpc19yb290OiBpc1Jvb3QsXG4gICAgICAgICAgICBvcmRlcixcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGJvZHkuc2VsZWN0LmluY2x1ZGVzKFwiY2hpbGRfcnVuX2lkc1wiKSkge1xuICAgICAgICAgICAgd2Fybk9uY2UoXCJEZXByZWNhdGVkOiAnY2hpbGRfcnVuX2lkcycgaW4gdGhlIGxpc3RSdW5zIHNlbGVjdCBwYXJhbWV0ZXIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBydW5zWWllbGRlZCA9IDA7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgcnVucyBvZiB0aGlzLl9nZXRDdXJzb3JQYWdpbmF0ZWRMaXN0KFwiL3J1bnMvcXVlcnlcIiwgYm9keSkpIHtcbiAgICAgICAgICAgIGlmIChsaW1pdCkge1xuICAgICAgICAgICAgICAgIGlmIChydW5zWWllbGRlZCA+PSBsaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJ1bnMubGVuZ3RoICsgcnVuc1lpZWxkZWQgPiBsaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSdW5zID0gcnVucy5zbGljZSgwLCBsaW1pdCAtIHJ1bnNZaWVsZGVkKTtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQqIG5ld1J1bnM7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBydW5zWWllbGRlZCArPSBydW5zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB5aWVsZCogcnVucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHlpZWxkKiBydW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICpsaXN0R3JvdXBSdW5zKHByb3BzKSB7XG4gICAgICAgIGNvbnN0IHsgcHJvamVjdElkLCBwcm9qZWN0TmFtZSwgZ3JvdXBCeSwgZmlsdGVyLCBzdGFydFRpbWUsIGVuZFRpbWUsIGxpbWl0LCBvZmZzZXQsIH0gPSBwcm9wcztcbiAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gcHJvamVjdElkIHx8IChhd2FpdCB0aGlzLnJlYWRQcm9qZWN0KHsgcHJvamVjdE5hbWUgfSkpLmlkO1xuICAgICAgICBjb25zdCBiYXNlQm9keSA9IHtcbiAgICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb25JZCxcbiAgICAgICAgICAgIGdyb3VwX2J5OiBncm91cEJ5LFxuICAgICAgICAgICAgZmlsdGVyLFxuICAgICAgICAgICAgc3RhcnRfdGltZTogc3RhcnRUaW1lID8gc3RhcnRUaW1lLnRvSVNPU3RyaW5nKCkgOiBudWxsLFxuICAgICAgICAgICAgZW5kX3RpbWU6IGVuZFRpbWUgPyBlbmRUaW1lLnRvSVNPU3RyaW5nKCkgOiBudWxsLFxuICAgICAgICAgICAgbGltaXQ6IE51bWJlcihsaW1pdCkgfHwgMTAwLFxuICAgICAgICB9O1xuICAgICAgICBsZXQgY3VycmVudE9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDA7XG4gICAgICAgIGNvbnN0IHBhdGggPSBcIi9ydW5zL2dyb3VwXCI7XG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYXBpVXJsfSR7cGF0aH1gO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEJvZHkgPSB7XG4gICAgICAgICAgICAgICAgLi4uYmFzZUJvZHksXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBjdXJyZW50T2Zmc2V0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB1bmRlZmluZWQgdmFsdWVzIGZyb20gdGhlIHBheWxvYWRcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUGF5bG9hZCA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhjdXJyZW50Qm9keSkuZmlsdGVyKChbXywgdmFsdWVdKSA9PiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSk7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoZmlsdGVyZWRQYXlsb2FkKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5oZWFkZXJzLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBgRmFpbGVkIHRvIGZldGNoICR7cGF0aH1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZ3JvdXBzLCB0b3RhbCB9ID0gaXRlbXM7XG4gICAgICAgICAgICBpZiAoZ3JvdXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB0aHJlYWQgb2YgZ3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhyZWFkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudE9mZnNldCArPSBncm91cHMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRPZmZzZXQgPj0gdG90YWwpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXRSdW5TdGF0cyh7IGlkLCB0cmFjZSwgcGFyZW50UnVuLCBydW5UeXBlLCBwcm9qZWN0TmFtZXMsIHByb2plY3RJZHMsIHJlZmVyZW5jZUV4YW1wbGVJZHMsIHN0YXJ0VGltZSwgZW5kVGltZSwgZXJyb3IsIHF1ZXJ5LCBmaWx0ZXIsIHRyYWNlRmlsdGVyLCB0cmVlRmlsdGVyLCBpc1Jvb3QsIGRhdGFTb3VyY2VUeXBlLCB9KSB7XG4gICAgICAgIGxldCBwcm9qZWN0SWRzXyA9IHByb2plY3RJZHMgfHwgW107XG4gICAgICAgIGlmIChwcm9qZWN0TmFtZXMpIHtcbiAgICAgICAgICAgIHByb2plY3RJZHNfID0gW1xuICAgICAgICAgICAgICAgIC4uLihwcm9qZWN0SWRzIHx8IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4oYXdhaXQgUHJvbWlzZS5hbGwocHJvamVjdE5hbWVzLm1hcCgobmFtZSkgPT4gdGhpcy5yZWFkUHJvamVjdCh7IHByb2plY3ROYW1lOiBuYW1lIH0pLnRoZW4oKHByb2plY3QpID0+IHByb2plY3QuaWQpKSkpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICB0cmFjZSxcbiAgICAgICAgICAgIHBhcmVudF9ydW46IHBhcmVudFJ1bixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBydW5UeXBlLFxuICAgICAgICAgICAgc2Vzc2lvbjogcHJvamVjdElkc18sXG4gICAgICAgICAgICByZWZlcmVuY2VfZXhhbXBsZTogcmVmZXJlbmNlRXhhbXBsZUlkcyxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHN0YXJ0VGltZSxcbiAgICAgICAgICAgIGVuZF90aW1lOiBlbmRUaW1lLFxuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIGZpbHRlcixcbiAgICAgICAgICAgIHRyYWNlX2ZpbHRlcjogdHJhY2VGaWx0ZXIsXG4gICAgICAgICAgICB0cmVlX2ZpbHRlcjogdHJlZUZpbHRlcixcbiAgICAgICAgICAgIGlzX3Jvb3Q6IGlzUm9vdCxcbiAgICAgICAgICAgIGRhdGFfc291cmNlX3R5cGU6IGRhdGFTb3VyY2VUeXBlLFxuICAgICAgICB9O1xuICAgICAgICAvLyBSZW1vdmUgdW5kZWZpbmVkIHZhbHVlcyBmcm9tIHRoZSBwYXlsb2FkXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkUGF5bG9hZCA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhwYXlsb2FkKS5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB1bmRlZmluZWQpKTtcbiAgICAgICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KGZpbHRlcmVkUGF5bG9hZCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vcnVucy9zdGF0c2AsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5oZWFkZXJzLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJnZXQgcnVuIHN0YXRzXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgc2hhcmVSdW4ocnVuSWQsIHsgc2hhcmVJZCB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuSWQsXG4gICAgICAgICAgICBzaGFyZV90b2tlbjogc2hhcmVJZCB8fCB1dWlkLnY0KCksXG4gICAgICAgIH07XG4gICAgICAgIGFzc2VydFV1aWQocnVuSWQpO1xuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vcnVucy8ke3J1bklkfS9zaGFyZWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJzaGFyZSBydW5cIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8ICEoXCJzaGFyZV90b2tlblwiIGluIHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcmVzcG9uc2UgZnJvbSBzZXJ2ZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0SG9zdFVybCgpfS9wdWJsaWMvJHtyZXN1bHRbXCJzaGFyZV90b2tlblwiXX0vcmA7XG4gICAgfVxuICAgIGFzeW5jIHVuc2hhcmVSdW4ocnVuSWQpIHtcbiAgICAgICAgYXNzZXJ0VXVpZChydW5JZCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9L3J1bnMvJHtydW5JZH0vc2hhcmVgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcInVuc2hhcmUgcnVuXCIsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHJlYWRSdW5TaGFyZWRMaW5rKHJ1bklkKSB7XG4gICAgICAgIGFzc2VydFV1aWQocnVuSWQpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9L3J1bnMvJHtydW5JZH0vc2hhcmVgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcInJlYWQgcnVuIHNoYXJlZCBsaW5rXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCAhKFwic2hhcmVfdG9rZW5cIiBpbiByZXN1bHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmdldEhvc3RVcmwoKX0vcHVibGljLyR7cmVzdWx0W1wic2hhcmVfdG9rZW5cIl19L3JgO1xuICAgIH1cbiAgICBhc3luYyBsaXN0U2hhcmVkUnVucyhzaGFyZVRva2VuLCB7IHJ1bklkcywgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICBzaGFyZV90b2tlbjogc2hhcmVUb2tlbixcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChydW5JZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBydW5JZCBvZiBydW5JZHMpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcy5hcHBlbmQoXCJpZFwiLCBydW5JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0VXVpZChzaGFyZVRva2VuKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9wdWJsaWMvJHtzaGFyZVRva2VufS9ydW5zJHtxdWVyeVBhcmFtc31gLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcImxpc3Qgc2hhcmVkIHJ1bnNcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcnVucyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJ1bnM7XG4gICAgfVxuICAgIGFzeW5jIHJlYWREYXRhc2V0U2hhcmVkU2NoZW1hKGRhdGFzZXRJZCwgZGF0YXNldE5hbWUpIHtcbiAgICAgICAgaWYgKCFkYXRhc2V0SWQgJiYgIWRhdGFzZXROYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFaXRoZXIgZGF0YXNldElkIG9yIGRhdGFzZXROYW1lIG11c3QgYmUgZ2l2ZW5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkYXRhc2V0SWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFzZXQgPSBhd2FpdCB0aGlzLnJlYWREYXRhc2V0KHsgZGF0YXNldE5hbWUgfSk7XG4gICAgICAgICAgICBkYXRhc2V0SWQgPSBkYXRhc2V0LmlkO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydFV1aWQoZGF0YXNldElkKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9kYXRhc2V0cy8ke2RhdGFzZXRJZH0vc2hhcmVgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcInJlYWQgZGF0YXNldCBzaGFyZWQgc2NoZW1hXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNoYXJlU2NoZW1hID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBzaGFyZVNjaGVtYS51cmwgPSBgJHt0aGlzLmdldEhvc3RVcmwoKX0vcHVibGljLyR7c2hhcmVTY2hlbWEuc2hhcmVfdG9rZW59L2RgO1xuICAgICAgICByZXR1cm4gc2hhcmVTY2hlbWE7XG4gICAgfVxuICAgIGFzeW5jIHNoYXJlRGF0YXNldChkYXRhc2V0SWQsIGRhdGFzZXROYW1lKSB7XG4gICAgICAgIGlmICghZGF0YXNldElkICYmICFkYXRhc2V0TmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRWl0aGVyIGRhdGFzZXRJZCBvciBkYXRhc2V0TmFtZSBtdXN0IGJlIGdpdmVuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGF0YXNldElkKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhc2V0ID0gYXdhaXQgdGhpcy5yZWFkRGF0YXNldCh7IGRhdGFzZXROYW1lIH0pO1xuICAgICAgICAgICAgZGF0YXNldElkID0gZGF0YXNldC5pZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgZGF0YXNldF9pZDogZGF0YXNldElkLFxuICAgICAgICB9O1xuICAgICAgICBhc3NlcnRVdWlkKGRhdGFzZXRJZCk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9kYXRhc2V0cy8ke2RhdGFzZXRJZH0vc2hhcmVgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwic2hhcmUgZGF0YXNldFwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzaGFyZVNjaGVtYSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgc2hhcmVTY2hlbWEudXJsID0gYCR7dGhpcy5nZXRIb3N0VXJsKCl9L3B1YmxpYy8ke3NoYXJlU2NoZW1hLnNoYXJlX3Rva2VufS9kYDtcbiAgICAgICAgcmV0dXJuIHNoYXJlU2NoZW1hO1xuICAgIH1cbiAgICBhc3luYyB1bnNoYXJlRGF0YXNldChkYXRhc2V0SWQpIHtcbiAgICAgICAgYXNzZXJ0VXVpZChkYXRhc2V0SWQpO1xuICAgICAgICBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9kYXRhc2V0cy8ke2RhdGFzZXRJZH0vc2hhcmVgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcInVuc2hhcmUgZGF0YXNldFwiLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyByZWFkU2hhcmVkRGF0YXNldChzaGFyZVRva2VuKSB7XG4gICAgICAgIGFzc2VydFV1aWQoc2hhcmVUb2tlbik7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vcHVibGljLyR7c2hhcmVUb2tlbn0vZGF0YXNldHNgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcInJlYWQgc2hhcmVkIGRhdGFzZXRcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGF0YXNldCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIGRhdGFzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBzaGFyZWQgZXhhbXBsZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2hhcmVUb2tlbiBUaGUgc2hhcmUgdG9rZW4gdG8gZ2V0IGV4YW1wbGVzIGZvci4gQSBzaGFyZSB0b2tlbiBpcyB0aGUgVVVJRCAob3IgTGFuZ1NtaXRoIFVSTCwgaW5jbHVkaW5nIFVVSUQpIGdlbmVyYXRlZCB3aGVuIGV4cGxpY2l0bHkgbWFya2luZyBhbiBleGFtcGxlIGFzIHB1YmxpYy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEFkZGl0aW9uYWwgb3B0aW9ucyBmb3IgbGlzdGluZyB0aGUgZXhhbXBsZXMuXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXSB8IHVuZGVmaW5lZH0gW29wdGlvbnMuZXhhbXBsZUlkc10gQSBsaXN0IG9mIGV4YW1wbGUgSURzIHRvIGZpbHRlciBieS5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxFeGFtcGxlW10+fSBUaGUgc2hhcmVkIGV4YW1wbGVzLlxuICAgICAqL1xuICAgIGFzeW5jIGxpc3RTaGFyZWRFeGFtcGxlcyhzaGFyZVRva2VuLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucz8uZXhhbXBsZUlkcykge1xuICAgICAgICAgICAgcGFyYW1zLmlkID0gb3B0aW9ucy5leGFtcGxlSWRzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMocGFyYW1zKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlLmZvckVhY2goKHYpID0+IHVybFBhcmFtcy5hcHBlbmQoa2V5LCB2KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbXMuYXBwZW5kKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9wdWJsaWMvJHtzaGFyZVRva2VufS9leGFtcGxlcz8ke3VybFBhcmFtcy50b1N0cmluZygpfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwibGlzdCBzaGFyZWQgZXhhbXBsZXNcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBpZiAoXCJkZXRhaWxcIiBpbiByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsaXN0IHNoYXJlZCBleGFtcGxlcy5cXG5TdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfVxcbk1lc3NhZ2U6ICR7QXJyYXkuaXNBcnJheShyZXN1bHQuZGV0YWlsKVxuICAgICAgICAgICAgICAgICAgICA/IHJlc3VsdC5kZXRhaWwuam9pbihcIlxcblwiKVxuICAgICAgICAgICAgICAgICAgICA6IFwiVW5zcGVjaWZpZWQgZXJyb3JcIn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxpc3Qgc2hhcmVkIGV4YW1wbGVzOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQubWFwKChleGFtcGxlKSA9PiAoe1xuICAgICAgICAgICAgLi4uZXhhbXBsZSxcbiAgICAgICAgICAgIF9ob3N0VXJsOiB0aGlzLmdldEhvc3RVcmwoKSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVQcm9qZWN0KHsgcHJvamVjdE5hbWUsIGRlc2NyaXB0aW9uID0gbnVsbCwgbWV0YWRhdGEgPSBudWxsLCB1cHNlcnQgPSBmYWxzZSwgcHJvamVjdEV4dHJhID0gbnVsbCwgcmVmZXJlbmNlRGF0YXNldElkID0gbnVsbCwgfSkge1xuICAgICAgICBjb25zdCB1cHNlcnRfID0gdXBzZXJ0ID8gYD91cHNlcnQ9dHJ1ZWAgOiBcIlwiO1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IGAke3RoaXMuYXBpVXJsfS9zZXNzaW9ucyR7dXBzZXJ0X31gO1xuICAgICAgICBjb25zdCBleHRyYSA9IHByb2plY3RFeHRyYSB8fCB7fTtcbiAgICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgICAgICBleHRyYVtcIm1ldGFkYXRhXCJdID0gbWV0YWRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgIG5hbWU6IHByb2plY3ROYW1lLFxuICAgICAgICAgICAgZXh0cmEsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHJlZmVyZW5jZURhdGFzZXRJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgYm9keVtcInJlZmVyZW5jZV9kYXRhc2V0X2lkXCJdID0gcmVmZXJlbmNlRGF0YXNldElkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRCb2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChlbmRwb2ludCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAuLi50aGlzLmhlYWRlcnMsIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYm9keTogc2VyaWFsaXplZEJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJjcmVhdGUgcHJvamVjdFwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVByb2plY3QocHJvamVjdElkLCB7IG5hbWUgPSBudWxsLCBkZXNjcmlwdGlvbiA9IG51bGwsIG1ldGFkYXRhID0gbnVsbCwgcHJvamVjdEV4dHJhID0gbnVsbCwgZW5kVGltZSA9IG51bGwsIH0pIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmFwaVVybH0vc2Vzc2lvbnMvJHtwcm9qZWN0SWR9YDtcbiAgICAgICAgbGV0IGV4dHJhID0gcHJvamVjdEV4dHJhO1xuICAgICAgICBpZiAobWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGV4dHJhID0geyAuLi4oZXh0cmEgfHwge30pLCBtZXRhZGF0YSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZXh0cmEsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGVuZF90aW1lOiBlbmRUaW1lID8gbmV3IERhdGUoZW5kVGltZSkudG9JU09TdHJpbmcoKSA6IG51bGwsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuaGVhZGVycywgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwidXBkYXRlIHByb2plY3RcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBoYXNQcm9qZWN0KHsgcHJvamVjdElkLCBwcm9qZWN0TmFtZSwgfSkge1xuICAgICAgICAvLyBUT0RPOiBBZGQgYSBoZWFkIHJlcXVlc3RcbiAgICAgICAgbGV0IHBhdGggPSBcIi9zZXNzaW9uc1wiO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICAgIGlmIChwcm9qZWN0SWQgIT09IHVuZGVmaW5lZCAmJiBwcm9qZWN0TmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZWl0aGVyIHByb2plY3ROYW1lIG9yIHByb2plY3RJZCwgbm90IGJvdGhcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJvamVjdElkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFzc2VydFV1aWQocHJvamVjdElkKTtcbiAgICAgICAgICAgIHBhdGggKz0gYC8ke3Byb2plY3RJZH1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByb2plY3ROYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJuYW1lXCIsIHByb2plY3ROYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBwcm9qZWN0TmFtZSBvciBwcm9qZWN0SWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfSR7cGF0aH0/JHtwYXJhbXN9YCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJoYXMgcHJvamVjdFwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjb25zdW1lIHRoZSByZXNwb25zZSBib2R5IHRvIHJlbGVhc2UgdGhlIGNvbm5lY3Rpb25cbiAgICAgICAgLy8gaHR0cHM6Ly91bmRpY2kubm9kZWpzLm9yZy8jLz9pZD1nYXJiYWdlLWNvbGxlY3Rpb25cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBpdCdzIE9LIGFuZCB3ZSdyZSBxdWVyeWluZyBieSBuYW1lLCBuZWVkIHRvIGNoZWNrIHRoZSBsaXN0IGlzIG5vdCBlbXB0eVxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHByb2plY3RJZCBxdWVyeWluZ1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyByZWFkUHJvamVjdCh7IHByb2plY3RJZCwgcHJvamVjdE5hbWUsIGluY2x1ZGVTdGF0cywgfSkge1xuICAgICAgICBsZXQgcGF0aCA9IFwiL3Nlc3Npb25zXCI7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgaWYgKHByb2plY3RJZCAhPT0gdW5kZWZpbmVkICYmIHByb2plY3ROYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBlaXRoZXIgcHJvamVjdE5hbWUgb3IgcHJvamVjdElkLCBub3QgYm90aFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcm9qZWN0SWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXNzZXJ0VXVpZChwcm9qZWN0SWQpO1xuICAgICAgICAgICAgcGF0aCArPSBgLyR7cHJvamVjdElkfWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJvamVjdE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcIm5hbWVcIiwgcHJvamVjdE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIHByb2plY3ROYW1lIG9yIHByb2plY3RJZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jbHVkZVN0YXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJpbmNsdWRlX3N0YXRzXCIsIGluY2x1ZGVTdGF0cy50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX2dldChwYXRoLCBwYXJhbXMpO1xuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZSkpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb2plY3RbaWQ9JHtwcm9qZWN0SWR9LCBuYW1lPSR7cHJvamVjdE5hbWV9XSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3BvbnNlWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgZ2V0UHJvamVjdFVybCh7IHByb2plY3RJZCwgcHJvamVjdE5hbWUsIH0pIHtcbiAgICAgICAgaWYgKHByb2plY3RJZCA9PT0gdW5kZWZpbmVkICYmIHByb2plY3ROYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBlaXRoZXIgcHJvamVjdE5hbWUgb3IgcHJvamVjdElkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCB0aGlzLnJlYWRQcm9qZWN0KHsgcHJvamVjdElkLCBwcm9qZWN0TmFtZSB9KTtcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPSBhd2FpdCB0aGlzLl9nZXRUZW5hbnRJZCgpO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXRIb3N0VXJsKCl9L28vJHt0ZW5hbnRJZH0vcHJvamVjdHMvcC8ke3Byb2plY3QuaWR9YDtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RGF0YXNldFVybCh7IGRhdGFzZXRJZCwgZGF0YXNldE5hbWUsIH0pIHtcbiAgICAgICAgaWYgKGRhdGFzZXRJZCA9PT0gdW5kZWZpbmVkICYmIGRhdGFzZXROYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBlaXRoZXIgZGF0YXNldE5hbWUgb3IgZGF0YXNldElkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFzZXQgPSBhd2FpdCB0aGlzLnJlYWREYXRhc2V0KHsgZGF0YXNldElkLCBkYXRhc2V0TmFtZSB9KTtcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPSBhd2FpdCB0aGlzLl9nZXRUZW5hbnRJZCgpO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXRIb3N0VXJsKCl9L28vJHt0ZW5hbnRJZH0vZGF0YXNldHMvJHtkYXRhc2V0LmlkfWA7XG4gICAgfVxuICAgIGFzeW5jIF9nZXRUZW5hbnRJZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RlbmFudElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGVuYW50SWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgbGltaXQ6IFwiMVwiIH0pO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHByb2plY3RzIG9mIHRoaXMuX2dldFBhZ2luYXRlZChcIi9zZXNzaW9uc1wiLCBxdWVyeVBhcmFtcykpIHtcbiAgICAgICAgICAgIHRoaXMuX3RlbmFudElkID0gcHJvamVjdHNbMF0udGVuYW50X2lkO1xuICAgICAgICAgICAgcmV0dXJuIHByb2plY3RzWzBdLnRlbmFudF9pZDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBwcm9qZWN0cyBmb3VuZCB0byByZXNvbHZlIHRlbmFudC5cIik7XG4gICAgfVxuICAgIGFzeW5jICpsaXN0UHJvamVjdHMoeyBwcm9qZWN0SWRzLCBuYW1lLCBuYW1lQ29udGFpbnMsIHJlZmVyZW5jZURhdGFzZXRJZCwgcmVmZXJlbmNlRGF0YXNldE5hbWUsIGluY2x1ZGVTdGF0cywgZGF0YXNldFZlcnNpb24sIHJlZmVyZW5jZUZyZWUsIG1ldGFkYXRhLCB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgICBpZiAocHJvamVjdElkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHByb2plY3RJZCBvZiBwcm9qZWN0SWRzKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcImlkXCIsIHByb2plY3RJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcIm5hbWVcIiwgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWVDb250YWlucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwibmFtZV9jb250YWluc1wiLCBuYW1lQ29udGFpbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWZlcmVuY2VEYXRhc2V0SWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcInJlZmVyZW5jZV9kYXRhc2V0XCIsIHJlZmVyZW5jZURhdGFzZXRJZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVmZXJlbmNlRGF0YXNldE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YXNldCA9IGF3YWl0IHRoaXMucmVhZERhdGFzZXQoe1xuICAgICAgICAgICAgICAgIGRhdGFzZXROYW1lOiByZWZlcmVuY2VEYXRhc2V0TmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcInJlZmVyZW5jZV9kYXRhc2V0XCIsIGRhdGFzZXQuaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNsdWRlU3RhdHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcImluY2x1ZGVfc3RhdHNcIiwgaW5jbHVkZVN0YXRzLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhc2V0VmVyc2lvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwiZGF0YXNldF92ZXJzaW9uXCIsIGRhdGFzZXRWZXJzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVmZXJlbmNlRnJlZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwicmVmZXJlbmNlX2ZyZWVcIiwgcmVmZXJlbmNlRnJlZS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0YWRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcIm1ldGFkYXRhXCIsIEpTT04uc3RyaW5naWZ5KG1ldGFkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBwcm9qZWN0cyBvZiB0aGlzLl9nZXRQYWdpbmF0ZWQoXCIvc2Vzc2lvbnNcIiwgcGFyYW1zKSkge1xuICAgICAgICAgICAgeWllbGQqIHByb2plY3RzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZVByb2plY3QoeyBwcm9qZWN0SWQsIHByb2plY3ROYW1lLCB9KSB7XG4gICAgICAgIGxldCBwcm9qZWN0SWRfO1xuICAgICAgICBpZiAocHJvamVjdElkID09PSB1bmRlZmluZWQgJiYgcHJvamVjdE5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIHByb2plY3ROYW1lIG9yIHByb2plY3RJZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcm9qZWN0SWQgIT09IHVuZGVmaW5lZCAmJiBwcm9qZWN0TmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZWl0aGVyIHByb2plY3ROYW1lIG9yIHByb2plY3RJZCwgbm90IGJvdGhcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJvamVjdElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHByb2plY3RJZF8gPSAoYXdhaXQgdGhpcy5yZWFkUHJvamVjdCh7IHByb2plY3ROYW1lIH0pKS5pZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByb2plY3RJZF8gPSBwcm9qZWN0SWQ7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0VXVpZChwcm9qZWN0SWRfKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vc2Vzc2lvbnMvJHtwcm9qZWN0SWRffWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIGBkZWxldGUgc2Vzc2lvbiAke3Byb2plY3RJZF99ICgke3Byb2plY3ROYW1lfSlgLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGxvYWRDc3YoeyBjc3ZGaWxlLCBmaWxlTmFtZSwgaW5wdXRLZXlzLCBvdXRwdXRLZXlzLCBkZXNjcmlwdGlvbiwgZGF0YVR5cGUsIG5hbWUsIH0pIHtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5hcGlVcmx9L2RhdGFzZXRzL3VwbG9hZGA7XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChcImZpbGVcIiwgY3N2RmlsZSwgZmlsZU5hbWUpO1xuICAgICAgICBpbnB1dEtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJpbnB1dF9rZXlzXCIsIGtleSk7XG4gICAgICAgIH0pO1xuICAgICAgICBvdXRwdXRLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwib3V0cHV0X2tleXNcIiwga2V5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChkZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZGVzY3JpcHRpb25cIiwgZGVzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhVHlwZSkge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZGF0YV90eXBlXCIsIGRhdGFUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwibmFtZVwiLCBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJ1cGxvYWQgQ1NWXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlRGF0YXNldChuYW1lLCB7IGRlc2NyaXB0aW9uLCBkYXRhVHlwZSwgaW5wdXRzU2NoZW1hLCBvdXRwdXRzU2NoZW1hLCBtZXRhZGF0YSwgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBleHRyYTogbWV0YWRhdGEgPyB7IG1ldGFkYXRhIH0gOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChkYXRhVHlwZSkge1xuICAgICAgICAgICAgYm9keS5kYXRhX3R5cGUgPSBkYXRhVHlwZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXRzU2NoZW1hKSB7XG4gICAgICAgICAgICBib2R5LmlucHV0c19zY2hlbWFfZGVmaW5pdGlvbiA9IGlucHV0c1NjaGVtYTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3V0cHV0c1NjaGVtYSkge1xuICAgICAgICAgICAgYm9keS5vdXRwdXRzX3NjaGVtYV9kZWZpbml0aW9uID0gb3V0cHV0c1NjaGVtYTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXJpYWxpemVkQm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9L2RhdGFzZXRzYCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAuLi50aGlzLmhlYWRlcnMsIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYm9keTogc2VyaWFsaXplZEJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJjcmVhdGUgZGF0YXNldFwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIHJlYWREYXRhc2V0KHsgZGF0YXNldElkLCBkYXRhc2V0TmFtZSwgfSkge1xuICAgICAgICBsZXQgcGF0aCA9IFwiL2RhdGFzZXRzXCI7XG4gICAgICAgIC8vIGxpbWl0IHRvIDEgcmVzdWx0XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoeyBsaW1pdDogXCIxXCIgfSk7XG4gICAgICAgIGlmIChkYXRhc2V0SWQgJiYgZGF0YXNldE5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBlaXRoZXIgZGF0YXNldE5hbWUgb3IgZGF0YXNldElkLCBub3QgYm90aFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhc2V0SWQpIHtcbiAgICAgICAgICAgIGFzc2VydFV1aWQoZGF0YXNldElkKTtcbiAgICAgICAgICAgIHBhdGggKz0gYC8ke2RhdGFzZXRJZH1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRhdGFzZXROYW1lKSB7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwibmFtZVwiLCBkYXRhc2V0TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZGF0YXNldE5hbWUgb3IgZGF0YXNldElkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fZ2V0KHBhdGgsIHBhcmFtcyk7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRGF0YXNldFtpZD0ke2RhdGFzZXRJZH0sIG5hbWU9JHtkYXRhc2V0TmFtZX1dIG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2VbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBoYXNEYXRhc2V0KHsgZGF0YXNldElkLCBkYXRhc2V0TmFtZSwgfSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWFkRGF0YXNldCh7IGRhdGFzZXRJZCwgZGF0YXNldE5hbWUgfSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgZSBpbnN0YW5jZW9mIEVycm9yICYmXG4gICAgICAgICAgICAgICAgZS5tZXNzYWdlLnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJub3QgZm91bmRcIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGRpZmZEYXRhc2V0VmVyc2lvbnMoeyBkYXRhc2V0SWQsIGRhdGFzZXROYW1lLCBmcm9tVmVyc2lvbiwgdG9WZXJzaW9uLCB9KSB7XG4gICAgICAgIGxldCBkYXRhc2V0SWRfID0gZGF0YXNldElkO1xuICAgICAgICBpZiAoZGF0YXNldElkXyA9PT0gdW5kZWZpbmVkICYmIGRhdGFzZXROYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBlaXRoZXIgZGF0YXNldE5hbWUgb3IgZGF0YXNldElkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRhdGFzZXRJZF8gIT09IHVuZGVmaW5lZCAmJiBkYXRhc2V0TmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZWl0aGVyIGRhdGFzZXROYW1lIG9yIGRhdGFzZXRJZCwgbm90IGJvdGhcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF0YXNldElkXyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhc2V0ID0gYXdhaXQgdGhpcy5yZWFkRGF0YXNldCh7IGRhdGFzZXROYW1lIH0pO1xuICAgICAgICAgICAgZGF0YXNldElkXyA9IGRhdGFzZXQuaWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICBmcm9tX3ZlcnNpb246IHR5cGVvZiBmcm9tVmVyc2lvbiA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgID8gZnJvbVZlcnNpb25cbiAgICAgICAgICAgICAgICA6IGZyb21WZXJzaW9uLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB0b192ZXJzaW9uOiB0eXBlb2YgdG9WZXJzaW9uID09PSBcInN0cmluZ1wiID8gdG9WZXJzaW9uIDogdG9WZXJzaW9uLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX2dldChgL2RhdGFzZXRzLyR7ZGF0YXNldElkX30vdmVyc2lvbnMvZGlmZmAsIHVybFBhcmFtcyk7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgYXN5bmMgcmVhZERhdGFzZXRPcGVuYWlGaW5ldHVuaW5nKHsgZGF0YXNldElkLCBkYXRhc2V0TmFtZSwgfSkge1xuICAgICAgICBjb25zdCBwYXRoID0gXCIvZGF0YXNldHNcIjtcbiAgICAgICAgaWYgKGRhdGFzZXRJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF0YXNldE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YXNldElkID0gKGF3YWl0IHRoaXMucmVhZERhdGFzZXQoeyBkYXRhc2V0TmFtZSB9KSkuaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZWl0aGVyIGRhdGFzZXROYW1lIG9yIGRhdGFzZXRJZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX2dldFJlc3BvbnNlKGAke3BhdGh9LyR7ZGF0YXNldElkfS9vcGVuYWlfZnRgKTtcbiAgICAgICAgY29uc3QgZGF0YXNldFRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIGNvbnN0IGRhdGFzZXQgPSBkYXRhc2V0VGV4dFxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgICAgLnNwbGl0KFwiXFxuXCIpXG4gICAgICAgICAgICAubWFwKChsaW5lKSA9PiBKU09OLnBhcnNlKGxpbmUpKTtcbiAgICAgICAgcmV0dXJuIGRhdGFzZXQ7XG4gICAgfVxuICAgIGFzeW5jICpsaXN0RGF0YXNldHMoeyBsaW1pdCA9IDEwMCwgb2Zmc2V0ID0gMCwgZGF0YXNldElkcywgZGF0YXNldE5hbWUsIGRhdGFzZXROYW1lQ29udGFpbnMsIG1ldGFkYXRhLCB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IFwiL2RhdGFzZXRzXCI7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgbGltaXQ6IGxpbWl0LnRvU3RyaW5nKCksXG4gICAgICAgICAgICBvZmZzZXQ6IG9mZnNldC50b1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGRhdGFzZXRJZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpZF8gb2YgZGF0YXNldElkcykge1xuICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJpZFwiLCBpZF8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhc2V0TmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwibmFtZVwiLCBkYXRhc2V0TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGFzZXROYW1lQ29udGFpbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcIm5hbWVfY29udGFpbnNcIiwgZGF0YXNldE5hbWVDb250YWlucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ldGFkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJtZXRhZGF0YVwiLCBKU09OLnN0cmluZ2lmeShtZXRhZGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgZGF0YXNldHMgb2YgdGhpcy5fZ2V0UGFnaW5hdGVkKHBhdGgsIHBhcmFtcykpIHtcbiAgICAgICAgICAgIHlpZWxkKiBkYXRhc2V0cztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYSBkYXRhc2V0XG4gICAgICogQHBhcmFtIHByb3BzIFRoZSBkYXRhc2V0IGRldGFpbHMgdG8gdXBkYXRlXG4gICAgICogQHJldHVybnMgVGhlIHVwZGF0ZWQgZGF0YXNldFxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZURhdGFzZXQocHJvcHMpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhc2V0SWQsIGRhdGFzZXROYW1lLCAuLi51cGRhdGUgfSA9IHByb3BzO1xuICAgICAgICBpZiAoIWRhdGFzZXRJZCAmJiAhZGF0YXNldE5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBlaXRoZXIgZGF0YXNldE5hbWUgb3IgZGF0YXNldElkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9kYXRhc2V0SWQgPSBkYXRhc2V0SWQgPz8gKGF3YWl0IHRoaXMucmVhZERhdGFzZXQoeyBkYXRhc2V0TmFtZSB9KSkuaWQ7XG4gICAgICAgIGFzc2VydFV1aWQoX2RhdGFzZXRJZCk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh1cGRhdGUpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9L2RhdGFzZXRzLyR7X2RhdGFzZXRJZH1gLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAuLi50aGlzLmhlYWRlcnMsIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcInVwZGF0ZSBkYXRhc2V0XCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhIHRhZyBvbiBhIGRhdGFzZXQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgdGFnIGlzIGFscmVhZHkgYXNzaWduZWQgdG8gYSBkaWZmZXJlbnQgdmVyc2lvbiBvZiB0aGlzIGRhdGFzZXQsXG4gICAgICogdGhlIHRhZyB3aWxsIGJlIG1vdmVkIHRvIHRoZSBuZXcgdmVyc2lvbi4gVGhlIGFzX29mIHBhcmFtZXRlciBpcyB1c2VkIHRvXG4gICAgICogZGV0ZXJtaW5lIHdoaWNoIHZlcnNpb24gb2YgdGhlIGRhdGFzZXQgdG8gYXBwbHkgdGhlIG5ldyB0YWdzIHRvLlxuICAgICAqXG4gICAgICogSXQgbXVzdCBiZSBhbiBleGFjdCB2ZXJzaW9uIG9mIHRoZSBkYXRhc2V0IHRvIHN1Y2NlZWQuIFlvdSBjYW5cbiAgICAgKiB1c2UgdGhlIFwicmVhZERhdGFzZXRWZXJzaW9uXCIgbWV0aG9kIHRvIGZpbmQgdGhlIGV4YWN0IHZlcnNpb25cbiAgICAgKiB0byBhcHBseSB0aGUgdGFncyB0by5cbiAgICAgKiBAcGFyYW0gcGFyYW1zLmRhdGFzZXRJZCBUaGUgSUQgb2YgdGhlIGRhdGFzZXQgdG8gdXBkYXRlLiBNdXN0IGJlIHByb3ZpZGVkIGlmIFwiZGF0YXNldE5hbWVcIiBpcyBub3QgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHBhcmFtcy5kYXRhc2V0TmFtZSBUaGUgbmFtZSBvZiB0aGUgZGF0YXNldCB0byB1cGRhdGUuIE11c3QgYmUgcHJvdmlkZWQgaWYgXCJkYXRhc2V0SWRcIiBpcyBub3QgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHBhcmFtcy5hc09mIFRoZSB0aW1lc3RhbXAgb2YgdGhlIGRhdGFzZXQgdG8gYXBwbHkgdGhlIG5ldyB0YWdzIHRvLlxuICAgICAqIEBwYXJhbSBwYXJhbXMudGFnIFRoZSBuZXcgdGFnIHRvIGFwcGx5IHRvIHRoZSBkYXRhc2V0LlxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZURhdGFzZXRUYWcocHJvcHMpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhc2V0SWQsIGRhdGFzZXROYW1lLCBhc09mLCB0YWcgfSA9IHByb3BzO1xuICAgICAgICBpZiAoIWRhdGFzZXRJZCAmJiAhZGF0YXNldE5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBlaXRoZXIgZGF0YXNldE5hbWUgb3IgZGF0YXNldElkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9kYXRhc2V0SWQgPSBkYXRhc2V0SWQgPz8gKGF3YWl0IHRoaXMucmVhZERhdGFzZXQoeyBkYXRhc2V0TmFtZSB9KSkuaWQ7XG4gICAgICAgIGFzc2VydFV1aWQoX2RhdGFzZXRJZCk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBhc19vZjogdHlwZW9mIGFzT2YgPT09IFwic3RyaW5nXCIgPyBhc09mIDogYXNPZi50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgdGFnLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vZGF0YXNldHMvJHtfZGF0YXNldElkfS90YWdzYCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuaGVhZGVycywgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwidXBkYXRlIGRhdGFzZXQgdGFnc1wiLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVEYXRhc2V0KHsgZGF0YXNldElkLCBkYXRhc2V0TmFtZSwgfSkge1xuICAgICAgICBsZXQgcGF0aCA9IFwiL2RhdGFzZXRzXCI7XG4gICAgICAgIGxldCBkYXRhc2V0SWRfID0gZGF0YXNldElkO1xuICAgICAgICBpZiAoZGF0YXNldElkICE9PSB1bmRlZmluZWQgJiYgZGF0YXNldE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGVpdGhlciBkYXRhc2V0TmFtZSBvciBkYXRhc2V0SWQsIG5vdCBib3RoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRhdGFzZXROYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFzZXQgPSBhd2FpdCB0aGlzLnJlYWREYXRhc2V0KHsgZGF0YXNldE5hbWUgfSk7XG4gICAgICAgICAgICBkYXRhc2V0SWRfID0gZGF0YXNldC5pZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YXNldElkXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhc3NlcnRVdWlkKGRhdGFzZXRJZF8pO1xuICAgICAgICAgICAgcGF0aCArPSBgLyR7ZGF0YXNldElkX31gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGRhdGFzZXROYW1lIG9yIGRhdGFzZXRJZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKHRoaXMuYXBpVXJsICsgcGF0aCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgYGRlbGV0ZSAke3BhdGh9YCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaW5kZXhEYXRhc2V0KHsgZGF0YXNldElkLCBkYXRhc2V0TmFtZSwgdGFnLCB9KSB7XG4gICAgICAgIGxldCBkYXRhc2V0SWRfID0gZGF0YXNldElkO1xuICAgICAgICBpZiAoIWRhdGFzZXRJZF8gJiYgIWRhdGFzZXROYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZWl0aGVyIGRhdGFzZXROYW1lIG9yIGRhdGFzZXRJZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhc2V0SWRfICYmIGRhdGFzZXROYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZWl0aGVyIGRhdGFzZXROYW1lIG9yIGRhdGFzZXRJZCwgbm90IGJvdGhcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWRhdGFzZXRJZF8pIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFzZXQgPSBhd2FpdCB0aGlzLnJlYWREYXRhc2V0KHsgZGF0YXNldE5hbWUgfSk7XG4gICAgICAgICAgICBkYXRhc2V0SWRfID0gZGF0YXNldC5pZDtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnRVdWlkKGRhdGFzZXRJZF8pO1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgdGFnOiB0YWcsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9kYXRhc2V0cy8ke2RhdGFzZXRJZF99L2luZGV4YCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAuLi50aGlzLmhlYWRlcnMsIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcImluZGV4IGRhdGFzZXRcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMZXRzIHlvdSBydW4gYSBzaW1pbGFyaXR5IHNlYXJjaCBxdWVyeSBvbiBhIGRhdGFzZXQuXG4gICAgICpcbiAgICAgKiBSZXF1aXJlcyB0aGUgZGF0YXNldCB0byBiZSBpbmRleGVkLiBQbGVhc2Ugc2VlIHRoZSBgaW5kZXhEYXRhc2V0YCBtZXRob2QgdG8gc2V0IHVwIGluZGV4aW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlucHV0cyAgICAgIFRoZSBpbnB1dCBvbiB3aGljaCB0byBydW4gdGhlIHNpbWlsYXJpdHkgc2VhcmNoLiBNdXN0IGhhdmUgdGhlXG4gICAgICogICAgICAgICAgICAgICAgICAgIHNhbWUgc2NoZW1hIGFzIHRoZSBkYXRhc2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFzZXRJZCAgIFRoZSBkYXRhc2V0IHRvIHNlYXJjaCBmb3Igc2ltaWxhciBleGFtcGxlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaW1pdCAgICAgICBUaGUgbWF4aW11bSBudW1iZXIgb2YgZXhhbXBsZXMgdG8gcmV0dXJuLiBXaWxsIHJldHVybiB0aGUgdG9wIGBsaW1pdGAgbW9zdFxuICAgICAqICAgICAgICAgICAgICAgICAgICBzaW1pbGFyIGV4YW1wbGVzIGluIG9yZGVyIG9mIG1vc3Qgc2ltaWxhciB0byBsZWFzdCBzaW1pbGFyLiBJZiBubyBzaW1pbGFyXG4gICAgICogICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzIGFyZSBmb3VuZCwgcmFuZG9tIGV4YW1wbGVzIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsdGVyICAgICAgQSBmaWx0ZXIgc3RyaW5nIHRvIGFwcGx5IHRvIHRoZSBzZWFyY2guIE9ubHkgZXhhbXBsZXMgd2lsbCBiZSByZXR1cm5lZCB0aGF0XG4gICAgICogICAgICAgICAgICAgICAgICAgIG1hdGNoIHRoZSBmaWx0ZXIgc3RyaW5nLiBTb21lIGV4YW1wbGVzIG9mIGZpbHRlcnNcbiAgICAgKlxuICAgICAqICAgICAgICAgICAgICAgICAgICAtIGVxKG1ldGFkYXRhLm15a2V5LCBcInZhbHVlXCIpXG4gICAgICogICAgICAgICAgICAgICAgICAgIC0gYW5kKG5lcShtZXRhZGF0YS5teS5uZXN0ZWQua2V5LCBcInZhbHVlXCIpLCBuZXEobWV0YWRhdGEubXlrZXksIFwidmFsdWVcIikpXG4gICAgICogICAgICAgICAgICAgICAgICAgIC0gb3IoZXEobWV0YWRhdGEubXlrZXksIFwidmFsdWVcIiksIGVxKG1ldGFkYXRhLm15a2V5LCBcIm90aGVydmFsdWVcIikpXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyAgICAgICAgICAgQSBsaXN0IG9mIHNpbWlsYXIgZXhhbXBsZXMuXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogZGF0YXNldF9pZCA9IFwiMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwXCJcbiAgICAgKiBpbnB1dHMgPSB7XCJ0ZXh0XCI6IFwiSG93IG1hbnkgcGVvcGxlIGxpdmUgaW4gQmVybGluP1wifVxuICAgICAqIGxpbWl0ID0gNVxuICAgICAqIGV4YW1wbGVzID0gYXdhaXQgY2xpZW50LnNpbWlsYXJFeGFtcGxlcyhpbnB1dHMsIGRhdGFzZXRfaWQsIGxpbWl0KVxuICAgICAqL1xuICAgIGFzeW5jIHNpbWlsYXJFeGFtcGxlcyhpbnB1dHMsIGRhdGFzZXRJZCwgbGltaXQsIHsgZmlsdGVyLCB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgICAgICAgIGlucHV0czogaW5wdXRzLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZmlsdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRhdGFbXCJmaWx0ZXJcIl0gPSBmaWx0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0VXVpZChkYXRhc2V0SWQpO1xuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vZGF0YXNldHMvJHtkYXRhc2V0SWR9L3NlYXJjaGAsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuaGVhZGVycywgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJmZXRjaCBzaW1pbGFyIGV4YW1wbGVzXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFtcImV4YW1wbGVzXCJdO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVFeGFtcGxlKGlucHV0c09yVXBkYXRlLCBvdXRwdXRzLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChpc0V4YW1wbGVDcmVhdGUoaW5wdXRzT3JVcGRhdGUpKSB7XG4gICAgICAgICAgICBpZiAob3V0cHV0cyAhPT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBwcm92aWRlIG91dHB1dHMgb3Igb3B0aW9ucyB3aGVuIHVzaW5nIEV4YW1wbGVDcmVhdGUgb2JqZWN0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRhc2V0SWRfID0gb3V0cHV0cyA/IG9wdGlvbnM/LmRhdGFzZXRJZCA6IGlucHV0c09yVXBkYXRlLmRhdGFzZXRfaWQ7XG4gICAgICAgIGNvbnN0IGRhdGFzZXROYW1lXyA9IG91dHB1dHNcbiAgICAgICAgICAgID8gb3B0aW9ucz8uZGF0YXNldE5hbWVcbiAgICAgICAgICAgIDogaW5wdXRzT3JVcGRhdGUuZGF0YXNldF9uYW1lO1xuICAgICAgICBpZiAoZGF0YXNldElkXyA9PT0gdW5kZWZpbmVkICYmIGRhdGFzZXROYW1lXyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZWl0aGVyIGRhdGFzZXROYW1lIG9yIGRhdGFzZXRJZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhc2V0SWRfICE9PSB1bmRlZmluZWQgJiYgZGF0YXNldE5hbWVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBlaXRoZXIgZGF0YXNldE5hbWUgb3IgZGF0YXNldElkLCBub3QgYm90aFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhc2V0SWRfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFzZXQgPSBhd2FpdCB0aGlzLnJlYWREYXRhc2V0KHsgZGF0YXNldE5hbWU6IGRhdGFzZXROYW1lXyB9KTtcbiAgICAgICAgICAgIGRhdGFzZXRJZF8gPSBkYXRhc2V0LmlkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRBdF8gPSAob3V0cHV0cyA/IG9wdGlvbnM/LmNyZWF0ZWRBdCA6IGlucHV0c09yVXBkYXRlLmNyZWF0ZWRfYXQpIHx8IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCBkYXRhO1xuICAgICAgICBpZiAoIWlzRXhhbXBsZUNyZWF0ZShpbnB1dHNPclVwZGF0ZSkpIHtcbiAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5wdXRzOiBpbnB1dHNPclVwZGF0ZSxcbiAgICAgICAgICAgICAgICBvdXRwdXRzLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGNyZWF0ZWRBdF8/LnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgaWQ6IG9wdGlvbnM/LmV4YW1wbGVJZCxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogb3B0aW9ucz8ubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgc3BsaXQ6IG9wdGlvbnM/LnNwbGl0LFxuICAgICAgICAgICAgICAgIHNvdXJjZV9ydW5faWQ6IG9wdGlvbnM/LnNvdXJjZVJ1bklkLFxuICAgICAgICAgICAgICAgIHVzZV9zb3VyY2VfcnVuX2lvOiBvcHRpb25zPy51c2VTb3VyY2VSdW5JTyxcbiAgICAgICAgICAgICAgICB1c2Vfc291cmNlX3J1bl9hdHRhY2htZW50czogb3B0aW9ucz8udXNlU291cmNlUnVuQXR0YWNobWVudHMsXG4gICAgICAgICAgICAgICAgYXR0YWNobWVudHM6IG9wdGlvbnM/LmF0dGFjaG1lbnRzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEgPSBpbnB1dHNPclVwZGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3VwbG9hZEV4YW1wbGVzTXVsdGlwYXJ0KGRhdGFzZXRJZF8sIFtkYXRhXSk7XG4gICAgICAgIGNvbnN0IGV4YW1wbGUgPSBhd2FpdCB0aGlzLnJlYWRFeGFtcGxlKHJlc3BvbnNlLmV4YW1wbGVfaWRzPy5bMF0gPz8gdXVpZC52NCgpKTtcbiAgICAgICAgcmV0dXJuIGV4YW1wbGU7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZUV4YW1wbGVzKHByb3BzT3JVcGxvYWRzKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3BzT3JVcGxvYWRzKSkge1xuICAgICAgICAgICAgaWYgKHByb3BzT3JVcGxvYWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVwbG9hZHMgPSBwcm9wc09yVXBsb2FkcztcbiAgICAgICAgICAgIGxldCBkYXRhc2V0SWRfID0gdXBsb2Fkc1swXS5kYXRhc2V0X2lkO1xuICAgICAgICAgICAgY29uc3QgZGF0YXNldE5hbWVfID0gdXBsb2Fkc1swXS5kYXRhc2V0X25hbWU7XG4gICAgICAgICAgICBpZiAoZGF0YXNldElkXyA9PT0gdW5kZWZpbmVkICYmIGRhdGFzZXROYW1lXyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGVpdGhlciBkYXRhc2V0TmFtZSBvciBkYXRhc2V0SWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhc2V0SWRfICE9PSB1bmRlZmluZWQgJiYgZGF0YXNldE5hbWVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZWl0aGVyIGRhdGFzZXROYW1lIG9yIGRhdGFzZXRJZCwgbm90IGJvdGhcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhc2V0SWRfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhc2V0ID0gYXdhaXQgdGhpcy5yZWFkRGF0YXNldCh7IGRhdGFzZXROYW1lOiBkYXRhc2V0TmFtZV8gfSk7XG4gICAgICAgICAgICAgICAgZGF0YXNldElkXyA9IGRhdGFzZXQuaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3VwbG9hZEV4YW1wbGVzTXVsdGlwYXJ0KGRhdGFzZXRJZF8sIHVwbG9hZHMpO1xuICAgICAgICAgICAgY29uc3QgZXhhbXBsZXMgPSBhd2FpdCBQcm9taXNlLmFsbChyZXNwb25zZS5leGFtcGxlX2lkcy5tYXAoKGlkKSA9PiB0aGlzLnJlYWRFeGFtcGxlKGlkKSkpO1xuICAgICAgICAgICAgcmV0dXJuIGV4YW1wbGVzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgaW5wdXRzLCBvdXRwdXRzLCBtZXRhZGF0YSwgc3BsaXRzLCBzb3VyY2VSdW5JZHMsIHVzZVNvdXJjZVJ1bklPcywgdXNlU291cmNlUnVuQXR0YWNobWVudHMsIGF0dGFjaG1lbnRzLCBleGFtcGxlSWRzLCBkYXRhc2V0SWQsIGRhdGFzZXROYW1lLCB9ID0gcHJvcHNPclVwbG9hZHM7XG4gICAgICAgIGlmIChpbnB1dHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGlucHV0cyB3aGVuIHVzaW5nIGxlZ2FjeSBwYXJhbWV0ZXJzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRhc2V0SWRfID0gZGF0YXNldElkO1xuICAgICAgICBjb25zdCBkYXRhc2V0TmFtZV8gPSBkYXRhc2V0TmFtZTtcbiAgICAgICAgaWYgKGRhdGFzZXRJZF8gPT09IHVuZGVmaW5lZCAmJiBkYXRhc2V0TmFtZV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGVpdGhlciBkYXRhc2V0TmFtZSBvciBkYXRhc2V0SWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF0YXNldElkXyAhPT0gdW5kZWZpbmVkICYmIGRhdGFzZXROYW1lXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZWl0aGVyIGRhdGFzZXROYW1lIG9yIGRhdGFzZXRJZCwgbm90IGJvdGhcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF0YXNldElkXyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhc2V0ID0gYXdhaXQgdGhpcy5yZWFkRGF0YXNldCh7IGRhdGFzZXROYW1lOiBkYXRhc2V0TmFtZV8gfSk7XG4gICAgICAgICAgICBkYXRhc2V0SWRfID0gZGF0YXNldC5pZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRFeGFtcGxlcyA9IGlucHV0cy5tYXAoKGlucHV0LCBpZHgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGF0YXNldF9pZDogZGF0YXNldElkXyxcbiAgICAgICAgICAgICAgICBpbnB1dHM6IGlucHV0LFxuICAgICAgICAgICAgICAgIG91dHB1dHM6IG91dHB1dHM/LltpZHhdLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YT8uW2lkeF0sXG4gICAgICAgICAgICAgICAgc3BsaXQ6IHNwbGl0cz8uW2lkeF0sXG4gICAgICAgICAgICAgICAgaWQ6IGV4YW1wbGVJZHM/LltpZHhdLFxuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBhdHRhY2htZW50cz8uW2lkeF0sXG4gICAgICAgICAgICAgICAgc291cmNlX3J1bl9pZDogc291cmNlUnVuSWRzPy5baWR4XSxcbiAgICAgICAgICAgICAgICB1c2Vfc291cmNlX3J1bl9pbzogdXNlU291cmNlUnVuSU9zPy5baWR4XSxcbiAgICAgICAgICAgICAgICB1c2Vfc291cmNlX3J1bl9hdHRhY2htZW50czogdXNlU291cmNlUnVuQXR0YWNobWVudHM/LltpZHhdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fdXBsb2FkRXhhbXBsZXNNdWx0aXBhcnQoZGF0YXNldElkXywgZm9ybWF0dGVkRXhhbXBsZXMpO1xuICAgICAgICBjb25zdCBleGFtcGxlcyA9IGF3YWl0IFByb21pc2UuYWxsKHJlc3BvbnNlLmV4YW1wbGVfaWRzLm1hcCgoaWQpID0+IHRoaXMucmVhZEV4YW1wbGUoaWQpKSk7XG4gICAgICAgIHJldHVybiBleGFtcGxlcztcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlTExNRXhhbXBsZShpbnB1dCwgZ2VuZXJhdGlvbiwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFeGFtcGxlKHsgaW5wdXQgfSwgeyBvdXRwdXQ6IGdlbmVyYXRpb24gfSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZUNoYXRFeGFtcGxlKGlucHV0LCBnZW5lcmF0aW9ucywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBmaW5hbElucHV0ID0gaW5wdXQubWFwKChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNMYW5nQ2hhaW5NZXNzYWdlKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRMYW5nQ2hhaW5NZXNzYWdlVG9FeGFtcGxlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmaW5hbE91dHB1dCA9IGlzTGFuZ0NoYWluTWVzc2FnZShnZW5lcmF0aW9ucylcbiAgICAgICAgICAgID8gY29udmVydExhbmdDaGFpbk1lc3NhZ2VUb0V4YW1wbGUoZ2VuZXJhdGlvbnMpXG4gICAgICAgICAgICA6IGdlbmVyYXRpb25zO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFeGFtcGxlKHsgaW5wdXQ6IGZpbmFsSW5wdXQgfSwgeyBvdXRwdXQ6IGZpbmFsT3V0cHV0IH0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyByZWFkRXhhbXBsZShleGFtcGxlSWQpIHtcbiAgICAgICAgYXNzZXJ0VXVpZChleGFtcGxlSWQpO1xuICAgICAgICBjb25zdCBwYXRoID0gYC9leGFtcGxlcy8ke2V4YW1wbGVJZH1gO1xuICAgICAgICBjb25zdCByYXdFeGFtcGxlID0gYXdhaXQgdGhpcy5fZ2V0KHBhdGgpO1xuICAgICAgICBjb25zdCB7IGF0dGFjaG1lbnRfdXJscywgLi4ucmVzdCB9ID0gcmF3RXhhbXBsZTtcbiAgICAgICAgY29uc3QgZXhhbXBsZSA9IHJlc3Q7XG4gICAgICAgIGlmIChhdHRhY2htZW50X3VybHMpIHtcbiAgICAgICAgICAgIGV4YW1wbGUuYXR0YWNobWVudHMgPSBPYmplY3QuZW50cmllcyhhdHRhY2htZW50X3VybHMpLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICBhY2Nba2V5LnNsaWNlKFwiYXR0YWNobWVudC5cIi5sZW5ndGgpXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcHJlc2lnbmVkX3VybDogdmFsdWUucHJlc2lnbmVkX3VybCxcbiAgICAgICAgICAgICAgICAgICAgbWltZV90eXBlOiB2YWx1ZS5taW1lX3R5cGUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleGFtcGxlO1xuICAgIH1cbiAgICBhc3luYyAqbGlzdEV4YW1wbGVzKHsgZGF0YXNldElkLCBkYXRhc2V0TmFtZSwgZXhhbXBsZUlkcywgYXNPZiwgc3BsaXRzLCBpbmxpbmVTM1VybHMsIG1ldGFkYXRhLCBsaW1pdCwgb2Zmc2V0LCBmaWx0ZXIsIGluY2x1ZGVBdHRhY2htZW50cywgfSA9IHt9KSB7XG4gICAgICAgIGxldCBkYXRhc2V0SWRfO1xuICAgICAgICBpZiAoZGF0YXNldElkICE9PSB1bmRlZmluZWQgJiYgZGF0YXNldE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGVpdGhlciBkYXRhc2V0TmFtZSBvciBkYXRhc2V0SWQsIG5vdCBib3RoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRhdGFzZXRJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhc2V0SWRfID0gZGF0YXNldElkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRhdGFzZXROYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFzZXQgPSBhd2FpdCB0aGlzLnJlYWREYXRhc2V0KHsgZGF0YXNldE5hbWUgfSk7XG4gICAgICAgICAgICBkYXRhc2V0SWRfID0gZGF0YXNldC5pZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBhIGRhdGFzZXROYW1lIG9yIGRhdGFzZXRJZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgZGF0YXNldDogZGF0YXNldElkXyB9KTtcbiAgICAgICAgY29uc3QgZGF0YXNldF92ZXJzaW9uID0gYXNPZlxuICAgICAgICAgICAgPyB0eXBlb2YgYXNPZiA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgID8gYXNPZlxuICAgICAgICAgICAgICAgIDogYXNPZj8udG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChkYXRhc2V0X3ZlcnNpb24pIHtcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJhc19vZlwiLCBkYXRhc2V0X3ZlcnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlubGluZVMzVXJsc18gPSBpbmxpbmVTM1VybHMgPz8gdHJ1ZTtcbiAgICAgICAgcGFyYW1zLmFwcGVuZChcImlubGluZV9zM191cmxzXCIsIGlubGluZVMzVXJsc18udG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChleGFtcGxlSWRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaWRfIG9mIGV4YW1wbGVJZHMpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwiaWRcIiwgaWRfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3BsaXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3BsaXQgb2Ygc3BsaXRzKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcInNwbGl0c1wiLCBzcGxpdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ldGFkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRNZXRhZGF0YSA9IEpTT04uc3RyaW5naWZ5KG1ldGFkYXRhKTtcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJtZXRhZGF0YVwiLCBzZXJpYWxpemVkTWV0YWRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaW1pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwibGltaXRcIiwgbGltaXQudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9mZnNldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwib2Zmc2V0XCIsIG9mZnNldC50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJmaWx0ZXJcIiwgZmlsdGVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jbHVkZUF0dGFjaG1lbnRzID09PSB0cnVlKSB7XG4gICAgICAgICAgICBbXCJhdHRhY2htZW50X3VybHNcIiwgXCJvdXRwdXRzXCIsIFwibWV0YWRhdGFcIl0uZm9yRWFjaCgoZmllbGQpID0+IHBhcmFtcy5hcHBlbmQoXCJzZWxlY3RcIiwgZmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgcmF3RXhhbXBsZXMgb2YgdGhpcy5fZ2V0UGFnaW5hdGVkKFwiL2V4YW1wbGVzXCIsIHBhcmFtcykpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmF3RXhhbXBsZSBvZiByYXdFeGFtcGxlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYXR0YWNobWVudF91cmxzLCAuLi5yZXN0IH0gPSByYXdFeGFtcGxlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGUgPSByZXN0O1xuICAgICAgICAgICAgICAgIGlmIChhdHRhY2htZW50X3VybHMpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZS5hdHRhY2htZW50cyA9IE9iamVjdC5lbnRyaWVzKGF0dGFjaG1lbnRfdXJscykucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjW2tleS5zbGljZShcImF0dGFjaG1lbnQuXCIubGVuZ3RoKV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlc2lnbmVkX3VybDogdmFsdWUucHJlc2lnbmVkX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW1lX3R5cGU6IHZhbHVlLm1pbWVfdHlwZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB5aWVsZCBleGFtcGxlO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaW1pdCAhPT0gdW5kZWZpbmVkICYmIGkgPj0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBkZWxldGVFeGFtcGxlKGV4YW1wbGVJZCkge1xuICAgICAgICBhc3NlcnRVdWlkKGV4YW1wbGVJZCk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBgL2V4YW1wbGVzLyR7ZXhhbXBsZUlkfWA7XG4gICAgICAgIGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2godGhpcy5hcGlVcmwgKyBwYXRoLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBgZGVsZXRlICR7cGF0aH1gLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVFeGFtcGxlKGV4YW1wbGVJZE9yVXBkYXRlLCB1cGRhdGUpIHtcbiAgICAgICAgbGV0IGV4YW1wbGVJZDtcbiAgICAgICAgaWYgKHVwZGF0ZSkge1xuICAgICAgICAgICAgZXhhbXBsZUlkID0gZXhhbXBsZUlkT3JVcGRhdGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleGFtcGxlSWQgPSBleGFtcGxlSWRPclVwZGF0ZS5pZDtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnRVdWlkKGV4YW1wbGVJZCk7XG4gICAgICAgIGxldCB1cGRhdGVUb1VzZTtcbiAgICAgICAgaWYgKHVwZGF0ZSkge1xuICAgICAgICAgICAgdXBkYXRlVG9Vc2UgPSB7IGlkOiBleGFtcGxlSWQsIC4uLnVwZGF0ZSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlVG9Vc2UgPSBleGFtcGxlSWRPclVwZGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGF0YXNldElkO1xuICAgICAgICBpZiAodXBkYXRlVG9Vc2UuZGF0YXNldF9pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhc2V0SWQgPSB1cGRhdGVUb1VzZS5kYXRhc2V0X2lkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZXhhbXBsZSA9IGF3YWl0IHRoaXMucmVhZEV4YW1wbGUoZXhhbXBsZUlkKTtcbiAgICAgICAgICAgIGRhdGFzZXRJZCA9IGV4YW1wbGUuZGF0YXNldF9pZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlRXhhbXBsZXNNdWx0aXBhcnQoZGF0YXNldElkLCBbdXBkYXRlVG9Vc2VdKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlRXhhbXBsZXModXBkYXRlKSB7XG4gICAgICAgIC8vIFdlIHdpbGwgbmFpdmVseSBnZXQgZGF0YXNldCBpZCBmcm9tIGZpcnN0IGV4YW1wbGUgYW5kIGFzc3VtZSBpdCB3b3JrcyBmb3IgYWxsXG4gICAgICAgIGxldCBkYXRhc2V0SWQ7XG4gICAgICAgIGlmICh1cGRhdGVbMF0uZGF0YXNldF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBleGFtcGxlID0gYXdhaXQgdGhpcy5yZWFkRXhhbXBsZSh1cGRhdGVbMF0uaWQpO1xuICAgICAgICAgICAgZGF0YXNldElkID0gZXhhbXBsZS5kYXRhc2V0X2lkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGF0YXNldElkID0gdXBkYXRlWzBdLmRhdGFzZXRfaWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUV4YW1wbGVzTXVsdGlwYXJ0KGRhdGFzZXRJZCwgdXBkYXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGRhdGFzZXQgdmVyc2lvbiBieSBjbG9zZXN0IGRhdGUgb3IgZXhhY3QgdGFnLlxuICAgICAqXG4gICAgICogVXNlIHRoaXMgdG8gcmVzb2x2ZSB0aGUgbmVhcmVzdCB2ZXJzaW9uIHRvIGEgZ2l2ZW4gdGltZXN0YW1wIG9yIGZvciBhIGdpdmVuIHRhZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zIGZvciBnZXR0aW5nIHRoZSBkYXRhc2V0IHZlcnNpb25cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5kYXRhc2V0SWQgVGhlIElEIG9mIHRoZSBkYXRhc2V0XG4gICAgICogQHBhcmFtIG9wdGlvbnMuZGF0YXNldE5hbWUgVGhlIG5hbWUgb2YgdGhlIGRhdGFzZXRcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5hc09mIFRoZSB0aW1lc3RhbXAgb2YgdGhlIGRhdGFzZXQgdG8gcmV0cmlldmVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy50YWcgVGhlIHRhZyBvZiB0aGUgZGF0YXNldCB0byByZXRyaWV2ZVxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhc2V0IHZlcnNpb25cbiAgICAgKi9cbiAgICBhc3luYyByZWFkRGF0YXNldFZlcnNpb24oeyBkYXRhc2V0SWQsIGRhdGFzZXROYW1lLCBhc09mLCB0YWcsIH0pIHtcbiAgICAgICAgbGV0IHJlc29sdmVkRGF0YXNldElkO1xuICAgICAgICBpZiAoIWRhdGFzZXRJZCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YXNldCA9IGF3YWl0IHRoaXMucmVhZERhdGFzZXQoeyBkYXRhc2V0TmFtZSB9KTtcbiAgICAgICAgICAgIHJlc29sdmVkRGF0YXNldElkID0gZGF0YXNldC5pZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmVkRGF0YXNldElkID0gZGF0YXNldElkO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydFV1aWQocmVzb2x2ZWREYXRhc2V0SWQpO1xuICAgICAgICBpZiAoKGFzT2YgJiYgdGFnKSB8fCAoIWFzT2YgJiYgIXRhZykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4YWN0bHkgb25lIG9mIGFzT2YgYW5kIHRhZyBtdXN0IGJlIHNwZWNpZmllZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgICBpZiAoYXNPZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwiYXNfb2ZcIiwgdHlwZW9mIGFzT2YgPT09IFwic3RyaW5nXCIgPyBhc09mIDogYXNPZi50b0lTT1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJ0YWdcIiwgdGFnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9L2RhdGFzZXRzLyR7cmVzb2x2ZWREYXRhc2V0SWR9L3ZlcnNpb24/JHtwYXJhbXMudG9TdHJpbmcoKX1gLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5oZWFkZXJzIH0sXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJyZWFkIGRhdGFzZXQgdmVyc2lvblwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0RGF0YXNldFNwbGl0cyh7IGRhdGFzZXRJZCwgZGF0YXNldE5hbWUsIGFzT2YsIH0pIHtcbiAgICAgICAgbGV0IGRhdGFzZXRJZF87XG4gICAgICAgIGlmIChkYXRhc2V0SWQgPT09IHVuZGVmaW5lZCAmJiBkYXRhc2V0TmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZGF0YXNldCBuYW1lIG9yIElEXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRhdGFzZXRJZCAhPT0gdW5kZWZpbmVkICYmIGRhdGFzZXROYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBlaXRoZXIgZGF0YXNldE5hbWUgb3IgZGF0YXNldElkLCBub3QgYm90aFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhc2V0SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YXNldCA9IGF3YWl0IHRoaXMucmVhZERhdGFzZXQoeyBkYXRhc2V0TmFtZSB9KTtcbiAgICAgICAgICAgIGRhdGFzZXRJZF8gPSBkYXRhc2V0LmlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGF0YXNldElkXyA9IGRhdGFzZXRJZDtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnRVdWlkKGRhdGFzZXRJZF8pO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICAgIGNvbnN0IGRhdGFzZXRfdmVyc2lvbiA9IGFzT2ZcbiAgICAgICAgICAgID8gdHlwZW9mIGFzT2YgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICA/IGFzT2ZcbiAgICAgICAgICAgICAgICA6IGFzT2Y/LnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoZGF0YXNldF92ZXJzaW9uKSB7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwiYXNfb2ZcIiwgZGF0YXNldF92ZXJzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX2dldChgL2RhdGFzZXRzLyR7ZGF0YXNldElkX30vc3BsaXRzYCwgcGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVEYXRhc2V0U3BsaXRzKHsgZGF0YXNldElkLCBkYXRhc2V0TmFtZSwgc3BsaXROYW1lLCBleGFtcGxlSWRzLCByZW1vdmUgPSBmYWxzZSwgfSkge1xuICAgICAgICBsZXQgZGF0YXNldElkXztcbiAgICAgICAgaWYgKGRhdGFzZXRJZCA9PT0gdW5kZWZpbmVkICYmIGRhdGFzZXROYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBkYXRhc2V0IG5hbWUgb3IgSURcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF0YXNldElkICE9PSB1bmRlZmluZWQgJiYgZGF0YXNldE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGVpdGhlciBkYXRhc2V0TmFtZSBvciBkYXRhc2V0SWQsIG5vdCBib3RoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRhdGFzZXRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhc2V0ID0gYXdhaXQgdGhpcy5yZWFkRGF0YXNldCh7IGRhdGFzZXROYW1lIH0pO1xuICAgICAgICAgICAgZGF0YXNldElkXyA9IGRhdGFzZXQuaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkYXRhc2V0SWRfID0gZGF0YXNldElkO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydFV1aWQoZGF0YXNldElkXyk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICBzcGxpdF9uYW1lOiBzcGxpdE5hbWUsXG4gICAgICAgICAgICBleGFtcGxlczogZXhhbXBsZUlkcy5tYXAoKGlkKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0VXVpZChpZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICByZW1vdmUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vZGF0YXNldHMvJHtkYXRhc2V0SWRffS9zcGxpdHNgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5oZWFkZXJzLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJ1cGRhdGUgZGF0YXNldCBzcGxpdHNcIiwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGZ1dHVyZSBMYW5nU21pdGggdmVyc2lvbnMsIHVzZSBgZXZhbHVhdGVgIGZyb20gYGxhbmdzbWl0aC9ldmFsdWF0aW9uYCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGFzeW5jIGV2YWx1YXRlUnVuKHJ1biwgZXZhbHVhdG9yLCB7IHNvdXJjZUluZm8sIGxvYWRDaGlsZFJ1bnMsIHJlZmVyZW5jZUV4YW1wbGUsIH0gPSB7IGxvYWRDaGlsZFJ1bnM6IGZhbHNlIH0pIHtcbiAgICAgICAgd2Fybk9uY2UoXCJUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gZnV0dXJlIExhbmdTbWl0aCB2ZXJzaW9ucywgdXNlIGBldmFsdWF0ZWAgZnJvbSBgbGFuZ3NtaXRoL2V2YWx1YXRpb25gIGluc3RlYWQuXCIpO1xuICAgICAgICBsZXQgcnVuXztcbiAgICAgICAgaWYgKHR5cGVvZiBydW4gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJ1bl8gPSBhd2FpdCB0aGlzLnJlYWRSdW4ocnVuLCB7IGxvYWRDaGlsZFJ1bnMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJ1biA9PT0gXCJvYmplY3RcIiAmJiBcImlkXCIgaW4gcnVuKSB7XG4gICAgICAgICAgICBydW5fID0gcnVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJ1biB0eXBlOiAke3R5cGVvZiBydW59YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1bl8ucmVmZXJlbmNlX2V4YW1wbGVfaWQgIT09IG51bGwgJiZcbiAgICAgICAgICAgIHJ1bl8ucmVmZXJlbmNlX2V4YW1wbGVfaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVmZXJlbmNlRXhhbXBsZSA9IGF3YWl0IHRoaXMucmVhZEV4YW1wbGUocnVuXy5yZWZlcmVuY2VfZXhhbXBsZV9pZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmVlZGJhY2tSZXN1bHQgPSBhd2FpdCBldmFsdWF0b3IuZXZhbHVhdGVSdW4ocnVuXywgcmVmZXJlbmNlRXhhbXBsZSk7XG4gICAgICAgIGNvbnN0IFtfLCBmZWVkYmFja3NdID0gYXdhaXQgdGhpcy5fbG9nRXZhbHVhdGlvbkZlZWRiYWNrKGZlZWRiYWNrUmVzdWx0LCBydW5fLCBzb3VyY2VJbmZvKTtcbiAgICAgICAgcmV0dXJuIGZlZWRiYWNrc1swXTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlRmVlZGJhY2socnVuSWQsIGtleSwgeyBzY29yZSwgdmFsdWUsIGNvcnJlY3Rpb24sIGNvbW1lbnQsIHNvdXJjZUluZm8sIGZlZWRiYWNrU291cmNlVHlwZSA9IFwiYXBpXCIsIHNvdXJjZVJ1bklkLCBmZWVkYmFja0lkLCBmZWVkYmFja0NvbmZpZywgcHJvamVjdElkLCBjb21wYXJhdGl2ZUV4cGVyaW1lbnRJZCwgfSkge1xuICAgICAgICBpZiAoIXJ1bklkICYmICFwcm9qZWN0SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9uZSBvZiBydW5JZCBvciBwcm9qZWN0SWQgbXVzdCBiZSBwcm92aWRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocnVuSWQgJiYgcHJvamVjdElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPbmx5IG9uZSBvZiBydW5JZCBvciBwcm9qZWN0SWQgY2FuIGJlIHByb3ZpZGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZlZWRiYWNrX3NvdXJjZSA9IHtcbiAgICAgICAgICAgIHR5cGU6IGZlZWRiYWNrU291cmNlVHlwZSA/PyBcImFwaVwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHNvdXJjZUluZm8gPz8ge30sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChzb3VyY2VSdW5JZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBmZWVkYmFja19zb3VyY2U/Lm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICFmZWVkYmFja19zb3VyY2UubWV0YWRhdGFbXCJfX3J1blwiXSkge1xuICAgICAgICAgICAgZmVlZGJhY2tfc291cmNlLm1ldGFkYXRhW1wiX19ydW5cIl0gPSB7IHJ1bl9pZDogc291cmNlUnVuSWQgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmVlZGJhY2tfc291cmNlPy5tZXRhZGF0YSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBmZWVkYmFja19zb3VyY2UubWV0YWRhdGFbXCJfX3J1blwiXT8ucnVuX2lkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFzc2VydFV1aWQoZmVlZGJhY2tfc291cmNlLm1ldGFkYXRhW1wiX19ydW5cIl0ucnVuX2lkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmZWVkYmFjayA9IHtcbiAgICAgICAgICAgIGlkOiBmZWVkYmFja0lkID8/IHV1aWQudjQoKSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuSWQsXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBzY29yZTogX2Zvcm1hdEZlZWRiYWNrU2NvcmUoc2NvcmUpLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBjb3JyZWN0aW9uLFxuICAgICAgICAgICAgY29tbWVudCxcbiAgICAgICAgICAgIGZlZWRiYWNrX3NvdXJjZTogZmVlZGJhY2tfc291cmNlLFxuICAgICAgICAgICAgY29tcGFyYXRpdmVfZXhwZXJpbWVudF9pZDogY29tcGFyYXRpdmVFeHBlcmltZW50SWQsXG4gICAgICAgICAgICBmZWVkYmFja0NvbmZpZyxcbiAgICAgICAgICAgIHNlc3Npb25faWQ6IHByb2plY3RJZCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KGZlZWRiYWNrKTtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5hcGlVcmx9L2ZlZWRiYWNrYDtcbiAgICAgICAgYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5oZWFkZXJzLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJjcmVhdGUgZmVlZGJhY2tcIiwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZlZWRiYWNrO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVGZWVkYmFjayhmZWVkYmFja0lkLCB7IHNjb3JlLCB2YWx1ZSwgY29ycmVjdGlvbiwgY29tbWVudCwgfSkge1xuICAgICAgICBjb25zdCBmZWVkYmFja1VwZGF0ZSA9IHt9O1xuICAgICAgICBpZiAoc2NvcmUgIT09IHVuZGVmaW5lZCAmJiBzY29yZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZmVlZGJhY2tVcGRhdGVbXCJzY29yZVwiXSA9IF9mb3JtYXRGZWVkYmFja1Njb3JlKHNjb3JlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZmVlZGJhY2tVcGRhdGVbXCJ2YWx1ZVwiXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb3JyZWN0aW9uICE9PSB1bmRlZmluZWQgJiYgY29ycmVjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZmVlZGJhY2tVcGRhdGVbXCJjb3JyZWN0aW9uXCJdID0gY29ycmVjdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tbWVudCAhPT0gdW5kZWZpbmVkICYmIGNvbW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZlZWRiYWNrVXBkYXRlW1wiY29tbWVudFwiXSA9IGNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0VXVpZChmZWVkYmFja0lkKTtcbiAgICAgICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KGZlZWRiYWNrVXBkYXRlKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vZmVlZGJhY2svJHtmZWVkYmFja0lkfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuaGVhZGVycywgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwidXBkYXRlIGZlZWRiYWNrXCIsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHJlYWRGZWVkYmFjayhmZWVkYmFja0lkKSB7XG4gICAgICAgIGFzc2VydFV1aWQoZmVlZGJhY2tJZCk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBgL2ZlZWRiYWNrLyR7ZmVlZGJhY2tJZH1gO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX2dldChwYXRoKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVGZWVkYmFjayhmZWVkYmFja0lkKSB7XG4gICAgICAgIGFzc2VydFV1aWQoZmVlZGJhY2tJZCk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBgL2ZlZWRiYWNrLyR7ZmVlZGJhY2tJZH1gO1xuICAgICAgICBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKHRoaXMuYXBpVXJsICsgcGF0aCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgYGRlbGV0ZSAke3BhdGh9YCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgKmxpc3RGZWVkYmFjayh7IHJ1bklkcywgZmVlZGJhY2tLZXlzLCBmZWVkYmFja1NvdXJjZVR5cGVzLCB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICAgIGlmIChydW5JZHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcnVuSWQgb2YgcnVuSWRzKSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0VXVpZChydW5JZCk7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMuYXBwZW5kKFwicnVuXCIsIHJ1bklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmVlZGJhY2tLZXlzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBmZWVkYmFja0tleXMpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcy5hcHBlbmQoXCJrZXlcIiwga2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmVlZGJhY2tTb3VyY2VUeXBlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0eXBlIG9mIGZlZWRiYWNrU291cmNlVHlwZXMpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcy5hcHBlbmQoXCJzb3VyY2VcIiwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBmZWVkYmFja3Mgb2YgdGhpcy5fZ2V0UGFnaW5hdGVkKFwiL2ZlZWRiYWNrXCIsIHF1ZXJ5UGFyYW1zKSkge1xuICAgICAgICAgICAgeWllbGQqIGZlZWRiYWNrcztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcHJlc2lnbmVkIGZlZWRiYWNrIHRva2VuIGFuZCBVUkwuXG4gICAgICpcbiAgICAgKiBUaGUgdG9rZW4gY2FuIGJlIHVzZWQgdG8gYXV0aG9yaXplIGZlZWRiYWNrIG1ldHJpY3Mgd2l0aG91dFxuICAgICAqIG5lZWRpbmcgYW4gQVBJIGtleS4gVGhpcyBpcyB1c2VmdWwgZm9yIGdpdmluZyBicm93c2VyLWJhc2VkXG4gICAgICogYXBwbGljYXRpb25zIHRoZSBhYmlsaXR5IHRvIHN1Ym1pdCBmZWVkYmFjayB3aXRob3V0IG5lZWRpbmdcbiAgICAgKiB0byBleHBvc2UgYW4gQVBJIGtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBydW5JZCBUaGUgSUQgb2YgdGhlIHJ1bi5cbiAgICAgKiBAcGFyYW0gZmVlZGJhY2tLZXkgVGhlIGZlZWRiYWNrIGtleS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIG9wdGlvbnMgZm9yIHRoZSB0b2tlbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5leHBpcmF0aW9uIFRoZSBleHBpcmF0aW9uIHRpbWUgZm9yIHRoZSB0b2tlbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgRmVlZGJhY2tJbmdlc3RUb2tlbi5cbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVQcmVzaWduZWRGZWVkYmFja1Rva2VuKHJ1bklkLCBmZWVkYmFja0tleSwgeyBleHBpcmF0aW9uLCBmZWVkYmFja0NvbmZpZywgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICBydW5faWQ6IHJ1bklkLFxuICAgICAgICAgICAgZmVlZGJhY2tfa2V5OiBmZWVkYmFja0tleSxcbiAgICAgICAgICAgIGZlZWRiYWNrX2NvbmZpZzogZmVlZGJhY2tDb25maWcsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChleHBpcmF0aW9uKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGV4cGlyYXRpb24gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBib2R5W1wiZXhwaXJlc19hdFwiXSA9IGV4cGlyYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChleHBpcmF0aW9uPy5ob3VycyB8fCBleHBpcmF0aW9uPy5taW51dGVzIHx8IGV4cGlyYXRpb24/LmRheXMpIHtcbiAgICAgICAgICAgICAgICBib2R5W1wiZXhwaXJlc19pblwiXSA9IGV4cGlyYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBib2R5W1wiZXhwaXJlc19pblwiXSA9IHtcbiAgICAgICAgICAgICAgICBob3VyczogMyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VyaWFsaXplZEJvZHkgPSBKU09OLnN0cmluZ2lmeShib2R5KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9mZWVkYmFjay90b2tlbnNgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuaGVhZGVycywgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBib2R5OiBzZXJpYWxpemVkQm9keSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcImNyZWF0ZSBwcmVzaWduZWQgZmVlZGJhY2sgdG9rZW5cIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlQ29tcGFyYXRpdmVFeHBlcmltZW50KHsgbmFtZSwgZXhwZXJpbWVudElkcywgcmVmZXJlbmNlRGF0YXNldElkLCBjcmVhdGVkQXQsIGRlc2NyaXB0aW9uLCBtZXRhZGF0YSwgaWQsIH0pIHtcbiAgICAgICAgaWYgKGV4cGVyaW1lbnRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdCBsZWFzdCBvbmUgZXhwZXJpbWVudCBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZmVyZW5jZURhdGFzZXRJZCkge1xuICAgICAgICAgICAgcmVmZXJlbmNlRGF0YXNldElkID0gKGF3YWl0IHRoaXMucmVhZFByb2plY3Qoe1xuICAgICAgICAgICAgICAgIHByb2plY3RJZDogZXhwZXJpbWVudElkc1swXSxcbiAgICAgICAgICAgIH0pKS5yZWZlcmVuY2VfZGF0YXNldF9pZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZmVyZW5jZURhdGFzZXRJZCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBIHJlZmVyZW5jZSBkYXRhc2V0IGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBleHBlcmltZW50X2lkczogZXhwZXJpbWVudElkcyxcbiAgICAgICAgICAgIHJlZmVyZW5jZV9kYXRhc2V0X2lkOiByZWZlcmVuY2VEYXRhc2V0SWQsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IChjcmVhdGVkQXQgPz8gbmV3IERhdGUoKSk/LnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBleHRyYToge30sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChtZXRhZGF0YSlcbiAgICAgICAgICAgIGJvZHkuZXh0cmFbXCJtZXRhZGF0YVwiXSA9IG1ldGFkYXRhO1xuICAgICAgICBjb25zdCBzZXJpYWxpemVkQm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9L2RhdGFzZXRzL2NvbXBhcmF0aXZlYCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAuLi50aGlzLmhlYWRlcnMsIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYm9keTogc2VyaWFsaXplZEJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJjcmVhdGUgY29tcGFyYXRpdmUgZXhwZXJpbWVudFwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYSBsaXN0IG9mIHByZXNpZ25lZCBmZWVkYmFjayB0b2tlbnMgZm9yIGEgZ2l2ZW4gcnVuIElELlxuICAgICAqIEBwYXJhbSBydW5JZCBUaGUgSUQgb2YgdGhlIHJ1bi5cbiAgICAgKiBAcmV0dXJucyBBbiBhc3luYyBpdGVyYWJsZSBvZiBGZWVkYmFja0luZ2VzdFRva2VuIG9iamVjdHMuXG4gICAgICovXG4gICAgYXN5bmMgKmxpc3RQcmVzaWduZWRGZWVkYmFja1Rva2VucyhydW5JZCkge1xuICAgICAgICBhc3NlcnRVdWlkKHJ1bklkKTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7IHJ1bl9pZDogcnVuSWQgfSk7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgdG9rZW5zIG9mIHRoaXMuX2dldFBhZ2luYXRlZChcIi9mZWVkYmFjay90b2tlbnNcIiwgcGFyYW1zKSkge1xuICAgICAgICAgICAgeWllbGQqIHRva2VucztcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc2VsZWN0RXZhbFJlc3VsdHMocmVzdWx0cykge1xuICAgICAgICBsZXQgcmVzdWx0c187XG4gICAgICAgIGlmIChcInJlc3VsdHNcIiBpbiByZXN1bHRzKSB7XG4gICAgICAgICAgICByZXN1bHRzXyA9IHJlc3VsdHMucmVzdWx0cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdHMpKSB7XG4gICAgICAgICAgICByZXN1bHRzXyA9IHJlc3VsdHM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzXyA9IFtyZXN1bHRzXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0c187XG4gICAgfVxuICAgIGFzeW5jIF9sb2dFdmFsdWF0aW9uRmVlZGJhY2soZXZhbHVhdG9yUmVzcG9uc2UsIHJ1biwgc291cmNlSW5mbykge1xuICAgICAgICBjb25zdCBldmFsUmVzdWx0cyA9IHRoaXMuX3NlbGVjdEV2YWxSZXN1bHRzKGV2YWx1YXRvclJlc3BvbnNlKTtcbiAgICAgICAgY29uc3QgZmVlZGJhY2tzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcmVzIG9mIGV2YWxSZXN1bHRzKSB7XG4gICAgICAgICAgICBsZXQgc291cmNlSW5mb18gPSBzb3VyY2VJbmZvIHx8IHt9O1xuICAgICAgICAgICAgaWYgKHJlcy5ldmFsdWF0b3JJbmZvKSB7XG4gICAgICAgICAgICAgICAgc291cmNlSW5mb18gPSB7IC4uLnJlcy5ldmFsdWF0b3JJbmZvLCAuLi5zb3VyY2VJbmZvXyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJ1bklkXyA9IG51bGw7XG4gICAgICAgICAgICBpZiAocmVzLnRhcmdldFJ1bklkKSB7XG4gICAgICAgICAgICAgICAgcnVuSWRfID0gcmVzLnRhcmdldFJ1bklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocnVuKSB7XG4gICAgICAgICAgICAgICAgcnVuSWRfID0gcnVuLmlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmVlZGJhY2tzLnB1c2goYXdhaXQgdGhpcy5jcmVhdGVGZWVkYmFjayhydW5JZF8sIHJlcy5rZXksIHtcbiAgICAgICAgICAgICAgICBzY29yZTogcmVzLnNjb3JlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXMudmFsdWUsXG4gICAgICAgICAgICAgICAgY29tbWVudDogcmVzLmNvbW1lbnQsXG4gICAgICAgICAgICAgICAgY29ycmVjdGlvbjogcmVzLmNvcnJlY3Rpb24sXG4gICAgICAgICAgICAgICAgc291cmNlSW5mbzogc291cmNlSW5mb18sXG4gICAgICAgICAgICAgICAgc291cmNlUnVuSWQ6IHJlcy5zb3VyY2VSdW5JZCxcbiAgICAgICAgICAgICAgICBmZWVkYmFja0NvbmZpZzogcmVzLmZlZWRiYWNrQ29uZmlnLFxuICAgICAgICAgICAgICAgIGZlZWRiYWNrU291cmNlVHlwZTogXCJtb2RlbFwiLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbZXZhbFJlc3VsdHMsIGZlZWRiYWNrc107XG4gICAgfVxuICAgIGFzeW5jIGxvZ0V2YWx1YXRpb25GZWVkYmFjayhldmFsdWF0b3JSZXNwb25zZSwgcnVuLCBzb3VyY2VJbmZvKSB7XG4gICAgICAgIGNvbnN0IFtyZXN1bHRzXSA9IGF3YWl0IHRoaXMuX2xvZ0V2YWx1YXRpb25GZWVkYmFjayhldmFsdWF0b3JSZXNwb25zZSwgcnVuLCBzb3VyY2VJbmZvKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFQSSBmb3IgbWFuYWdpbmcgYW5ub3RhdGlvbiBxdWV1ZXNcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBMaXN0IHRoZSBhbm5vdGF0aW9uIHF1ZXVlcyBvbiB0aGUgTGFuZ1NtaXRoIEFQSS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciBsaXN0aW5nIGFubm90YXRpb24gcXVldWVzXG4gICAgICogQHBhcmFtIG9wdGlvbnMucXVldWVJZHMgLSBUaGUgSURzIG9mIHRoZSBxdWV1ZXMgdG8gZmlsdGVyIGJ5XG4gICAgICogQHBhcmFtIG9wdGlvbnMubmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBxdWV1ZSB0byBmaWx0ZXIgYnlcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5uYW1lQ29udGFpbnMgLSBUaGUgc3Vic3RyaW5nIHRoYXQgdGhlIHF1ZXVlIG5hbWUgc2hvdWxkIGNvbnRhaW5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5saW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBxdWV1ZXMgdG8gcmV0dXJuXG4gICAgICogQHJldHVybnMgQW4gaXRlcmF0b3Igb2YgQW5ub3RhdGlvblF1ZXVlIG9iamVjdHNcbiAgICAgKi9cbiAgICBhc3luYyAqbGlzdEFubm90YXRpb25RdWV1ZXMob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHsgcXVldWVJZHMsIG5hbWUsIG5hbWVDb250YWlucywgbGltaXQgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgaWYgKHF1ZXVlSWRzKSB7XG4gICAgICAgICAgICBxdWV1ZUlkcy5mb3JFYWNoKChpZCwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGFzc2VydFV1aWQoaWQsIGBxdWV1ZUlkc1ske2l9XWApO1xuICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJpZHNcIiwgaWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUpXG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwibmFtZVwiLCBuYW1lKTtcbiAgICAgICAgaWYgKG5hbWVDb250YWlucylcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJuYW1lX2NvbnRhaW5zXCIsIG5hbWVDb250YWlucyk7XG4gICAgICAgIHBhcmFtcy5hcHBlbmQoXCJsaW1pdFwiLCAobGltaXQgIT09IHVuZGVmaW5lZCA/IE1hdGgubWluKGxpbWl0LCAxMDApIDogMTAwKS50b1N0cmluZygpKTtcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBxdWV1ZXMgb2YgdGhpcy5fZ2V0UGFnaW5hdGVkKFwiL2Fubm90YXRpb24tcXVldWVzXCIsIHBhcmFtcykpIHtcbiAgICAgICAgICAgIHlpZWxkKiBxdWV1ZXM7XG4gICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgaWYgKGxpbWl0ICE9PSB1bmRlZmluZWQgJiYgY291bnQgPj0gbGltaXQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGFubm90YXRpb24gcXVldWUgb24gdGhlIExhbmdTbWl0aCBBUEkuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgY3JlYXRpbmcgYW4gYW5ub3RhdGlvbiBxdWV1ZVxuICAgICAqIEBwYXJhbSBvcHRpb25zLm5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgYW5ub3RhdGlvbiBxdWV1ZVxuICAgICAqIEBwYXJhbSBvcHRpb25zLmRlc2NyaXB0aW9uIC0gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBhbm5vdGF0aW9uIHF1ZXVlXG4gICAgICogQHBhcmFtIG9wdGlvbnMucXVldWVJZCAtIFRoZSBJRCBvZiB0aGUgYW5ub3RhdGlvbiBxdWV1ZVxuICAgICAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIEFubm90YXRpb25RdWV1ZSBvYmplY3RcbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVBbm5vdGF0aW9uUXVldWUob3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uLCBxdWV1ZUlkLCBydWJyaWNJbnN0cnVjdGlvbnMgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBpZDogcXVldWVJZCB8fCB1dWlkLnY0KCksXG4gICAgICAgICAgICBydWJyaWNfaW5zdHJ1Y3Rpb25zOiBydWJyaWNJbnN0cnVjdGlvbnMsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRCb2R5ID0gSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGJvZHkpLmZpbHRlcigoW18sIHZdKSA9PiB2ICE9PSB1bmRlZmluZWQpKSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vYW5ub3RhdGlvbi1xdWV1ZXNgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuaGVhZGVycywgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBib2R5OiBzZXJpYWxpemVkQm9keSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcImNyZWF0ZSBhbm5vdGF0aW9uIHF1ZXVlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWQgYW4gYW5ub3RhdGlvbiBxdWV1ZSB3aXRoIHRoZSBzcGVjaWZpZWQgcXVldWUgSUQuXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgLSBUaGUgSUQgb2YgdGhlIGFubm90YXRpb24gcXVldWUgdG8gcmVhZFxuICAgICAqIEByZXR1cm5zIFRoZSBBbm5vdGF0aW9uUXVldWVXaXRoRGV0YWlscyBvYmplY3RcbiAgICAgKi9cbiAgICBhc3luYyByZWFkQW5ub3RhdGlvblF1ZXVlKHF1ZXVlSWQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9hbm5vdGF0aW9uLXF1ZXVlcy8ke2Fzc2VydFV1aWQocXVldWVJZCwgXCJxdWV1ZUlkXCIpfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwicmVhZCBhbm5vdGF0aW9uIHF1ZXVlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbiBhbm5vdGF0aW9uIHF1ZXVlIHdpdGggdGhlIHNwZWNpZmllZCBxdWV1ZSBJRC5cbiAgICAgKiBAcGFyYW0gcXVldWVJZCAtIFRoZSBJRCBvZiB0aGUgYW5ub3RhdGlvbiBxdWV1ZSB0byB1cGRhdGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB1cGRhdGluZyB0aGUgYW5ub3RhdGlvbiBxdWV1ZVxuICAgICAqIEBwYXJhbSBvcHRpb25zLm5hbWUgLSBUaGUgbmV3IG5hbWUgZm9yIHRoZSBhbm5vdGF0aW9uIHF1ZXVlXG4gICAgICogQHBhcmFtIG9wdGlvbnMuZGVzY3JpcHRpb24gLSBUaGUgbmV3IGRlc2NyaXB0aW9uIGZvciB0aGUgYW5ub3RhdGlvbiBxdWV1ZVxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZUFubm90YXRpb25RdWV1ZShxdWV1ZUlkLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24sIHJ1YnJpY0luc3RydWN0aW9ucyB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHJ1YnJpY19pbnN0cnVjdGlvbnM6IHJ1YnJpY0luc3RydWN0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9L2Fubm90YXRpb24tcXVldWVzLyR7YXNzZXJ0VXVpZChxdWV1ZUlkLCBcInF1ZXVlSWRcIil9YCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5oZWFkZXJzLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJ1cGRhdGUgYW5ub3RhdGlvbiBxdWV1ZVwiLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYW4gYW5ub3RhdGlvbiBxdWV1ZSB3aXRoIHRoZSBzcGVjaWZpZWQgcXVldWUgSUQuXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgLSBUaGUgSUQgb2YgdGhlIGFubm90YXRpb24gcXVldWUgdG8gZGVsZXRlXG4gICAgICovXG4gICAgYXN5bmMgZGVsZXRlQW5ub3RhdGlvblF1ZXVlKHF1ZXVlSWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vYW5ub3RhdGlvbi1xdWV1ZXMvJHthc3NlcnRVdWlkKHF1ZXVlSWQsIFwicXVldWVJZFwiKX1gLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5oZWFkZXJzLCBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJkZWxldGUgYW5ub3RhdGlvbiBxdWV1ZVwiLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgcnVucyB0byBhbiBhbm5vdGF0aW9uIHF1ZXVlIHdpdGggdGhlIHNwZWNpZmllZCBxdWV1ZSBJRC5cbiAgICAgKiBAcGFyYW0gcXVldWVJZCAtIFRoZSBJRCBvZiB0aGUgYW5ub3RhdGlvbiBxdWV1ZVxuICAgICAqIEBwYXJhbSBydW5JZHMgLSBUaGUgSURzIG9mIHRoZSBydW5zIHRvIGJlIGFkZGVkIHRvIHRoZSBhbm5vdGF0aW9uIHF1ZXVlXG4gICAgICovXG4gICAgYXN5bmMgYWRkUnVuc1RvQW5ub3RhdGlvblF1ZXVlKHF1ZXVlSWQsIHJ1bklkcykge1xuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkocnVuSWRzLm1hcCgoaWQsIGkpID0+IGFzc2VydFV1aWQoaWQsIGBydW5JZHNbJHtpfV1gKS50b1N0cmluZygpKSk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9L2Fubm90YXRpb24tcXVldWVzLyR7YXNzZXJ0VXVpZChxdWV1ZUlkLCBcInF1ZXVlSWRcIil9L3J1bnNgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuaGVhZGVycywgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwiYWRkIHJ1bnMgdG8gYW5ub3RhdGlvbiBxdWV1ZVwiLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSBydW4gZnJvbSBhbiBhbm5vdGF0aW9uIHF1ZXVlIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgLSBUaGUgSUQgb2YgdGhlIGFubm90YXRpb24gcXVldWVcbiAgICAgKiBAcGFyYW0gaW5kZXggLSBUaGUgaW5kZXggb2YgdGhlIHJ1biB0byByZXRyaWV2ZVxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgUnVuV2l0aEFubm90YXRpb25RdWV1ZUluZm8gb2JqZWN0XG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBydW4gaXMgbm90IGZvdW5kIGF0IHRoZSBnaXZlbiBpbmRleCBvciBmb3Igb3RoZXIgQVBJLXJlbGF0ZWQgZXJyb3JzXG4gICAgICovXG4gICAgYXN5bmMgZ2V0UnVuRnJvbUFubm90YXRpb25RdWV1ZShxdWV1ZUlkLCBpbmRleCkge1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gYC9hbm5vdGF0aW9uLXF1ZXVlcy8ke2Fzc2VydFV1aWQocXVldWVJZCwgXCJxdWV1ZUlkXCIpfS9ydW5gO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9JHtiYXNlVXJsfS8ke2luZGV4fWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwiZ2V0IHJ1biBmcm9tIGFubm90YXRpb24gcXVldWVcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIGEgcnVuIGZyb20gYW4gYW4gYW5ub3RhdGlvbiBxdWV1ZS5cbiAgICAgKiBAcGFyYW0gcXVldWVJZCAtIFRoZSBJRCBvZiB0aGUgYW5ub3RhdGlvbiBxdWV1ZSB0byBkZWxldGUgdGhlIHJ1biBmcm9tXG4gICAgICogQHBhcmFtIHF1ZXVlUnVuSWQgLSBUaGUgSUQgb2YgdGhlIHJ1biB0byBkZWxldGUgZnJvbSB0aGUgYW5ub3RhdGlvbiBxdWV1ZVxuICAgICAqL1xuICAgIGFzeW5jIGRlbGV0ZVJ1bkZyb21Bbm5vdGF0aW9uUXVldWUocXVldWVJZCwgcXVldWVSdW5JZCkge1xuICAgICAgICBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9hbm5vdGF0aW9uLXF1ZXVlcy8ke2Fzc2VydFV1aWQocXVldWVJZCwgXCJxdWV1ZUlkXCIpfS9ydW5zLyR7YXNzZXJ0VXVpZChxdWV1ZVJ1bklkLCBcInF1ZXVlUnVuSWRcIil9YCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuaGVhZGVycywgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwiZGVsZXRlIHJ1biBmcm9tIGFubm90YXRpb24gcXVldWVcIiwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzaXplIG9mIGFuIGFubm90YXRpb24gcXVldWUuXG4gICAgICogQHBhcmFtIHF1ZXVlSWQgLSBUaGUgSUQgb2YgdGhlIGFubm90YXRpb24gcXVldWVcbiAgICAgKi9cbiAgICBhc3luYyBnZXRTaXplRnJvbUFubm90YXRpb25RdWV1ZShxdWV1ZUlkKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vYW5ub3RhdGlvbi1xdWV1ZXMvJHthc3NlcnRVdWlkKHF1ZXVlSWQsIFwicXVldWVJZFwiKX0vc2l6ZWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwiZ2V0IHNpemUgZnJvbSBhbm5vdGF0aW9uIHF1ZXVlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIGFzeW5jIF9jdXJyZW50VGVuYW50SXNPd25lcihvd25lcikge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IGF3YWl0IHRoaXMuX2dldFNldHRpbmdzKCk7XG4gICAgICAgIHJldHVybiBvd25lciA9PSBcIi1cIiB8fCBzZXR0aW5ncy50ZW5hbnRfaGFuZGxlID09PSBvd25lcjtcbiAgICB9XG4gICAgYXN5bmMgX293bmVyQ29uZmxpY3RFcnJvcihhY3Rpb24sIG93bmVyKSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gYXdhaXQgdGhpcy5fZ2V0U2V0dGluZ3MoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihgQ2Fubm90ICR7YWN0aW9ufSBmb3IgYW5vdGhlciB0ZW5hbnQuXFxuXG4gICAgICBDdXJyZW50IHRlbmFudDogJHtzZXR0aW5ncy50ZW5hbnRfaGFuZGxlfVxcblxuICAgICAgUmVxdWVzdGVkIHRlbmFudDogJHtvd25lcn1gKTtcbiAgICB9XG4gICAgYXN5bmMgX2dldExhdGVzdENvbW1pdEhhc2gocHJvbXB0T3duZXJBbmROYW1lKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vY29tbWl0cy8ke3Byb21wdE93bmVyQW5kTmFtZX0vP2xpbWl0PSR7MX0mb2Zmc2V0PSR7MH1gLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcImdldCBsYXRlc3QgY29tbWl0IGhhc2hcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgaWYgKGpzb24uY29tbWl0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGpzb24uY29tbWl0c1swXS5jb21taXRfaGFzaDtcbiAgICB9XG4gICAgYXN5bmMgX2xpa2VPclVubGlrZVByb21wdChwcm9tcHRJZGVudGlmaWVyLCBsaWtlKSB7XG4gICAgICAgIGNvbnN0IFtvd25lciwgcHJvbXB0TmFtZSwgX10gPSBwYXJzZVByb21wdElkZW50aWZpZXIocHJvbXB0SWRlbnRpZmllcik7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7IGxpa2U6IGxpa2UgfSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vbGlrZXMvJHtvd25lcn0vJHtwcm9tcHROYW1lfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5oZWFkZXJzLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgYCR7bGlrZSA/IFwibGlrZVwiIDogXCJ1bmxpa2VcIn0gcHJvbXB0YCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgX2dldFByb21wdFVybChwcm9tcHRJZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IFtvd25lciwgcHJvbXB0TmFtZSwgY29tbWl0SGFzaF0gPSBwYXJzZVByb21wdElkZW50aWZpZXIocHJvbXB0SWRlbnRpZmllcik7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuX2N1cnJlbnRUZW5hbnRJc093bmVyKG93bmVyKSkpIHtcbiAgICAgICAgICAgIGlmIChjb21taXRIYXNoICE9PSBcImxhdGVzdFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0SG9zdFVybCgpfS9odWIvJHtvd25lcn0vJHtwcm9tcHROYW1lfS8ke2NvbW1pdEhhc2guc3Vic3RyaW5nKDAsIDgpfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXRIb3N0VXJsKCl9L2h1Yi8ke293bmVyfS8ke3Byb21wdE5hbWV9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gYXdhaXQgdGhpcy5fZ2V0U2V0dGluZ3MoKTtcbiAgICAgICAgICAgIGlmIChjb21taXRIYXNoICE9PSBcImxhdGVzdFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0SG9zdFVybCgpfS9wcm9tcHRzLyR7cHJvbXB0TmFtZX0vJHtjb21taXRIYXNoLnN1YnN0cmluZygwLCA4KX0/b3JnYW5pemF0aW9uSWQ9JHtzZXR0aW5ncy5pZH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0SG9zdFVybCgpfS9wcm9tcHRzLyR7cHJvbXB0TmFtZX0/b3JnYW5pemF0aW9uSWQ9JHtzZXR0aW5ncy5pZH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHByb21wdEV4aXN0cyhwcm9tcHRJZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IHByb21wdCA9IGF3YWl0IHRoaXMuZ2V0UHJvbXB0KHByb21wdElkZW50aWZpZXIpO1xuICAgICAgICByZXR1cm4gISFwcm9tcHQ7XG4gICAgfVxuICAgIGFzeW5jIGxpa2VQcm9tcHQocHJvbXB0SWRlbnRpZmllcikge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlrZU9yVW5saWtlUHJvbXB0KHByb21wdElkZW50aWZpZXIsIHRydWUpO1xuICAgIH1cbiAgICBhc3luYyB1bmxpa2VQcm9tcHQocHJvbXB0SWRlbnRpZmllcikge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlrZU9yVW5saWtlUHJvbXB0KHByb21wdElkZW50aWZpZXIsIGZhbHNlKTtcbiAgICB9XG4gICAgYXN5bmMgKmxpc3RDb21taXRzKHByb21wdE93bmVyQW5kTmFtZSkge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNvbW1pdHMgb2YgdGhpcy5fZ2V0UGFnaW5hdGVkKGAvY29tbWl0cy8ke3Byb21wdE93bmVyQW5kTmFtZX0vYCwgbmV3IFVSTFNlYXJjaFBhcmFtcygpLCAocmVzKSA9PiByZXMuY29tbWl0cykpIHtcbiAgICAgICAgICAgIHlpZWxkKiBjb21taXRzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICpsaXN0UHJvbXB0cyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgcGFyYW1zLmFwcGVuZChcInNvcnRfZmllbGRcIiwgb3B0aW9ucz8uc29ydEZpZWxkID8/IFwidXBkYXRlZF9hdFwiKTtcbiAgICAgICAgcGFyYW1zLmFwcGVuZChcInNvcnRfZGlyZWN0aW9uXCIsIFwiZGVzY1wiKTtcbiAgICAgICAgcGFyYW1zLmFwcGVuZChcImlzX2FyY2hpdmVkXCIsICghIW9wdGlvbnM/LmlzQXJjaGl2ZWQpLnRvU3RyaW5nKCkpO1xuICAgICAgICBpZiAob3B0aW9ucz8uaXNQdWJsaWMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcImlzX3B1YmxpY1wiLCBvcHRpb25zLmlzUHVibGljLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zPy5xdWVyeSkge1xuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcInF1ZXJ5XCIsIG9wdGlvbnMucXVlcnkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgcHJvbXB0cyBvZiB0aGlzLl9nZXRQYWdpbmF0ZWQoXCIvcmVwb3NcIiwgcGFyYW1zLCAocmVzKSA9PiByZXMucmVwb3MpKSB7XG4gICAgICAgICAgICB5aWVsZCogcHJvbXB0cztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXRQcm9tcHQocHJvbXB0SWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBbb3duZXIsIHByb21wdE5hbWUsIF9dID0gcGFyc2VQcm9tcHRJZGVudGlmaWVyKHByb21wdElkZW50aWZpZXIpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9L3JlcG9zLyR7b3duZXJ9LyR7cHJvbXB0TmFtZX1gLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlcz8uc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJnZXQgcHJvbXB0XCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlPy5qc29uKCk7XG4gICAgICAgIGlmIChyZXN1bHQ/LnJlcG8pIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVwbztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZVByb21wdChwcm9tcHRJZGVudGlmaWVyLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gYXdhaXQgdGhpcy5fZ2V0U2V0dGluZ3MoKTtcbiAgICAgICAgaWYgKG9wdGlvbnM/LmlzUHVibGljICYmICFzZXR0aW5ncy50ZW5hbnRfaGFuZGxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjcmVhdGUgYSBwdWJsaWMgcHJvbXB0IHdpdGhvdXQgZmlyc3RcXG5cbiAgICAgICAgY3JlYXRpbmcgYSBMYW5nQ2hhaW4gSHViIGhhbmRsZS5cbiAgICAgICAgWW91IGNhbiBhZGQgYSBoYW5kbGUgYnkgY3JlYXRpbmcgYSBwdWJsaWMgcHJvbXB0IGF0OlxcblxuICAgICAgICBodHRwczovL3NtaXRoLmxhbmdjaGFpbi5jb20vcHJvbXB0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtvd25lciwgcHJvbXB0TmFtZSwgX10gPSBwYXJzZVByb21wdElkZW50aWZpZXIocHJvbXB0SWRlbnRpZmllcik7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuX2N1cnJlbnRUZW5hbnRJc093bmVyKG93bmVyKSkpIHtcbiAgICAgICAgICAgIHRocm93IGF3YWl0IHRoaXMuX293bmVyQ29uZmxpY3RFcnJvcihcImNyZWF0ZSBhIHByb21wdFwiLCBvd25lcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIHJlcG9faGFuZGxlOiBwcm9tcHROYW1lLFxuICAgICAgICAgICAgLi4uKG9wdGlvbnM/LmRlc2NyaXB0aW9uICYmIHsgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24gfSksXG4gICAgICAgICAgICAuLi4ob3B0aW9ucz8ucmVhZG1lICYmIHsgcmVhZG1lOiBvcHRpb25zLnJlYWRtZSB9KSxcbiAgICAgICAgICAgIC4uLihvcHRpb25zPy50YWdzICYmIHsgdGFnczogb3B0aW9ucy50YWdzIH0pLFxuICAgICAgICAgICAgaXNfcHVibGljOiAhIW9wdGlvbnM/LmlzUHVibGljLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vcmVwb3MvYCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAuLi50aGlzLmhlYWRlcnMsIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFpc2VGb3JTdGF0dXMocmVzLCBcImNyZWF0ZSBwcm9tcHRcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyByZXBvIH0gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiByZXBvO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVDb21taXQocHJvbXB0SWRlbnRpZmllciwgb2JqZWN0LCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMucHJvbXB0RXhpc3RzKHByb21wdElkZW50aWZpZXIpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvbXB0IGRvZXMgbm90IGV4aXN0LCB5b3UgbXVzdCBjcmVhdGUgaXQgZmlyc3QuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtvd25lciwgcHJvbXB0TmFtZSwgX10gPSBwYXJzZVByb21wdElkZW50aWZpZXIocHJvbXB0SWRlbnRpZmllcik7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkUGFyZW50Q29tbWl0SGFzaCA9IG9wdGlvbnM/LnBhcmVudENvbW1pdEhhc2ggPT09IFwibGF0ZXN0XCIgfHwgIW9wdGlvbnM/LnBhcmVudENvbW1pdEhhc2hcbiAgICAgICAgICAgID8gYXdhaXQgdGhpcy5fZ2V0TGF0ZXN0Q29tbWl0SGFzaChgJHtvd25lcn0vJHtwcm9tcHROYW1lfWApXG4gICAgICAgICAgICA6IG9wdGlvbnM/LnBhcmVudENvbW1pdEhhc2g7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICBtYW5pZmVzdDogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmplY3QpKSxcbiAgICAgICAgICAgIHBhcmVudF9jb21taXQ6IHJlc29sdmVkUGFyZW50Q29tbWl0SGFzaCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5fZmV0Y2goYCR7dGhpcy5hcGlVcmx9L2NvbW1pdHMvJHtvd25lcn0vJHtwcm9tcHROYW1lfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5oZWFkZXJzLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJjcmVhdGUgY29tbWl0XCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFByb21wdFVybChgJHtvd25lcn0vJHtwcm9tcHROYW1lfSR7cmVzdWx0LmNvbW1pdF9oYXNoID8gYDoke3Jlc3VsdC5jb21taXRfaGFzaH1gIDogXCJcIn1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIGV4YW1wbGVzIHdpdGggYXR0YWNobWVudHMgdXNpbmcgbXVsdGlwYXJ0IGZvcm0gZGF0YS5cbiAgICAgKiBAcGFyYW0gdXBkYXRlcyBMaXN0IG9mIEV4YW1wbGVVcGRhdGVXaXRoQXR0YWNobWVudHMgb2JqZWN0cyB0byB1cHNlcnRcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHdpdGggdGhlIHVwZGF0ZSByZXNwb25zZVxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZUV4YW1wbGVzTXVsdGlwYXJ0KGRhdGFzZXRJZCwgdXBkYXRlcyA9IFtdKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVFeGFtcGxlc011bHRpcGFydChkYXRhc2V0SWQsIHVwZGF0ZXMpO1xuICAgIH1cbiAgICBhc3luYyBfdXBkYXRlRXhhbXBsZXNNdWx0aXBhcnQoZGF0YXNldElkLCB1cGRhdGVzID0gW10pIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5fZ2V0RGF0YXNldEV4YW1wbGVzTXVsdGlQYXJ0U3VwcG9ydCgpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91ciBMYW5nU21pdGggZGVwbG95bWVudCBkb2VzIG5vdCBhbGxvdyB1c2luZyB0aGUgbXVsdGlwYXJ0IGV4YW1wbGVzIGVuZHBvaW50LCBwbGVhc2UgdXBncmFkZSB5b3VyIGRlcGxveW1lbnQgdG8gdGhlIGxhdGVzdCB2ZXJzaW9uLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3IgKGNvbnN0IGV4YW1wbGUgb2YgdXBkYXRlcykge1xuICAgICAgICAgICAgY29uc3QgZXhhbXBsZUlkID0gZXhhbXBsZS5pZDtcbiAgICAgICAgICAgIC8vIFByZXBhcmUgdGhlIG1haW4gZXhhbXBsZSBib2R5XG4gICAgICAgICAgICBjb25zdCBleGFtcGxlQm9keSA9IHtcbiAgICAgICAgICAgICAgICAuLi4oZXhhbXBsZS5tZXRhZGF0YSAmJiB7IG1ldGFkYXRhOiBleGFtcGxlLm1ldGFkYXRhIH0pLFxuICAgICAgICAgICAgICAgIC4uLihleGFtcGxlLnNwbGl0ICYmIHsgc3BsaXQ6IGV4YW1wbGUuc3BsaXQgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gQWRkIG1haW4gZXhhbXBsZSBkYXRhXG4gICAgICAgICAgICBjb25zdCBzdHJpbmdpZmllZEV4YW1wbGUgPSBzZXJpYWxpemVQYXlsb2FkRm9yVHJhY2luZyhleGFtcGxlQm9keSwgYFNlcmlhbGl6aW5nIGJvZHkgZm9yIGV4YW1wbGUgd2l0aCBpZDogJHtleGFtcGxlSWR9YCk7XG4gICAgICAgICAgICBjb25zdCBleGFtcGxlQmxvYiA9IG5ldyBCbG9iKFtzdHJpbmdpZmllZEV4YW1wbGVdLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChleGFtcGxlSWQsIGV4YW1wbGVCbG9iKTtcbiAgICAgICAgICAgIC8vIEFkZCBpbnB1dHMgaWYgcHJlc2VudFxuICAgICAgICAgICAgaWYgKGV4YW1wbGUuaW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRJbnB1dHMgPSBzZXJpYWxpemVQYXlsb2FkRm9yVHJhY2luZyhleGFtcGxlLmlucHV0cywgYFNlcmlhbGl6aW5nIGlucHV0cyBmb3IgZXhhbXBsZSB3aXRoIGlkOiAke2V4YW1wbGVJZH1gKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dHNCbG9iID0gbmV3IEJsb2IoW3N0cmluZ2lmaWVkSW5wdXRzXSwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoYCR7ZXhhbXBsZUlkfS5pbnB1dHNgLCBpbnB1dHNCbG9iKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFkZCBvdXRwdXRzIGlmIHByZXNlbnRcbiAgICAgICAgICAgIGlmIChleGFtcGxlLm91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdpZmllZE91dHB1dHMgPSBzZXJpYWxpemVQYXlsb2FkRm9yVHJhY2luZyhleGFtcGxlLm91dHB1dHMsIGBTZXJpYWxpemluZyBvdXRwdXRzIHdobGUgdXBkYXRpbmcgZXhhbXBsZSB3aXRoIGlkOiAke2V4YW1wbGVJZH1gKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRzQmxvYiA9IG5ldyBCbG9iKFtzdHJpbmdpZmllZE91dHB1dHNdLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChgJHtleGFtcGxlSWR9Lm91dHB1dHNgLCBvdXRwdXRzQmxvYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBZGQgYXR0YWNobWVudHMgaWYgcHJlc2VudFxuICAgICAgICAgICAgaWYgKGV4YW1wbGUuYXR0YWNobWVudHMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCBhdHRhY2htZW50XSBvZiBPYmplY3QuZW50cmllcyhleGFtcGxlLmF0dGFjaG1lbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWltZVR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRhO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRhY2htZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgW21pbWVUeXBlLCBkYXRhXSA9IGF0dGFjaG1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZSA9IGF0dGFjaG1lbnQubWltZVR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gYXR0YWNobWVudC5kYXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dGFjaG1lbnRCbG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBgJHttaW1lVHlwZX07IGxlbmd0aD0ke2RhdGEuYnl0ZUxlbmd0aH1gLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGAke2V4YW1wbGVJZH0uYXR0YWNobWVudC4ke25hbWV9YCwgYXR0YWNobWVudEJsb2IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleGFtcGxlLmF0dGFjaG1lbnRzX29wZXJhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdpZmllZEF0dGFjaG1lbnRzT3BlcmF0aW9ucyA9IHNlcmlhbGl6ZVBheWxvYWRGb3JUcmFjaW5nKGV4YW1wbGUuYXR0YWNobWVudHNfb3BlcmF0aW9ucywgYFNlcmlhbGl6aW5nIGF0dGFjaG1lbnRzIHdoaWxlIHVwZGF0aW5nIGV4YW1wbGUgd2l0aCBpZDogJHtleGFtcGxlSWR9YCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0YWNobWVudHNPcGVyYXRpb25zQmxvYiA9IG5ldyBCbG9iKFtzdHJpbmdpZmllZEF0dGFjaG1lbnRzT3BlcmF0aW9uc10sIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGAke2V4YW1wbGVJZH0uYXR0YWNobWVudHNfb3BlcmF0aW9uc2AsIGF0dGFjaG1lbnRzT3BlcmF0aW9uc0Jsb2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFzZXRJZFRvVXNlID0gZGF0YXNldElkID8/IHVwZGF0ZXNbMF0/LmRhdGFzZXRfaWQ7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0ke3RoaXMuX2dldFBsYXRmb3JtRW5kcG9pbnRQYXRoKGBkYXRhc2V0cy8ke2RhdGFzZXRJZFRvVXNlfS9leGFtcGxlc2ApfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJ1cGRhdGUgZXhhbXBsZXNcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBsb2FkIGV4YW1wbGVzIHdpdGggYXR0YWNobWVudHMgdXNpbmcgbXVsdGlwYXJ0IGZvcm0gZGF0YS5cbiAgICAgKiBAcGFyYW0gdXBsb2FkcyBMaXN0IG9mIEV4YW1wbGVVcGxvYWRXaXRoQXR0YWNobWVudHMgb2JqZWN0cyB0byB1cGxvYWRcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHdpdGggdGhlIHVwbG9hZCByZXNwb25zZVxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBmdXR1cmUgTGFuZ1NtaXRoIHZlcnNpb25zLCBwbGVhc2UgdXNlIGBjcmVhdGVFeGFtcGxlc2AgaW5zdGVhZFxuICAgICAqL1xuICAgIGFzeW5jIHVwbG9hZEV4YW1wbGVzTXVsdGlwYXJ0KGRhdGFzZXRJZCwgdXBsb2FkcyA9IFtdKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91cGxvYWRFeGFtcGxlc011bHRpcGFydChkYXRhc2V0SWQsIHVwbG9hZHMpO1xuICAgIH1cbiAgICBhc3luYyBfdXBsb2FkRXhhbXBsZXNNdWx0aXBhcnQoZGF0YXNldElkLCB1cGxvYWRzID0gW10pIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5fZ2V0RGF0YXNldEV4YW1wbGVzTXVsdGlQYXJ0U3VwcG9ydCgpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91ciBMYW5nU21pdGggZGVwbG95bWVudCBkb2VzIG5vdCBhbGxvdyB1c2luZyB0aGUgbXVsdGlwYXJ0IGV4YW1wbGVzIGVuZHBvaW50LCBwbGVhc2UgdXBncmFkZSB5b3VyIGRlcGxveW1lbnQgdG8gdGhlIGxhdGVzdCB2ZXJzaW9uLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3IgKGNvbnN0IGV4YW1wbGUgb2YgdXBsb2Fkcykge1xuICAgICAgICAgICAgY29uc3QgZXhhbXBsZUlkID0gKGV4YW1wbGUuaWQgPz8gdXVpZC52NCgpKS50b1N0cmluZygpO1xuICAgICAgICAgICAgLy8gUHJlcGFyZSB0aGUgbWFpbiBleGFtcGxlIGJvZHlcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVCb2R5ID0ge1xuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGV4YW1wbGUuY3JlYXRlZF9hdCxcbiAgICAgICAgICAgICAgICAuLi4oZXhhbXBsZS5tZXRhZGF0YSAmJiB7IG1ldGFkYXRhOiBleGFtcGxlLm1ldGFkYXRhIH0pLFxuICAgICAgICAgICAgICAgIC4uLihleGFtcGxlLnNwbGl0ICYmIHsgc3BsaXQ6IGV4YW1wbGUuc3BsaXQgfSksXG4gICAgICAgICAgICAgICAgLi4uKGV4YW1wbGUuc291cmNlX3J1bl9pZCAmJiB7IHNvdXJjZV9ydW5faWQ6IGV4YW1wbGUuc291cmNlX3J1bl9pZCB9KSxcbiAgICAgICAgICAgICAgICAuLi4oZXhhbXBsZS51c2Vfc291cmNlX3J1bl9pbyAmJiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZV9zb3VyY2VfcnVuX2lvOiBleGFtcGxlLnVzZV9zb3VyY2VfcnVuX2lvLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIC4uLihleGFtcGxlLnVzZV9zb3VyY2VfcnVuX2F0dGFjaG1lbnRzICYmIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlX3NvdXJjZV9ydW5fYXR0YWNobWVudHM6IGV4YW1wbGUudXNlX3NvdXJjZV9ydW5fYXR0YWNobWVudHMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gQWRkIG1haW4gZXhhbXBsZSBkYXRhXG4gICAgICAgICAgICBjb25zdCBzdHJpbmdpZmllZEV4YW1wbGUgPSBzZXJpYWxpemVQYXlsb2FkRm9yVHJhY2luZyhleGFtcGxlQm9keSwgYFNlcmlhbGl6aW5nIGJvZHkgZm9yIHVwbG9hZGVkIGV4YW1wbGUgd2l0aCBpZDogJHtleGFtcGxlSWR9YCk7XG4gICAgICAgICAgICBjb25zdCBleGFtcGxlQmxvYiA9IG5ldyBCbG9iKFtzdHJpbmdpZmllZEV4YW1wbGVdLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChleGFtcGxlSWQsIGV4YW1wbGVCbG9iKTtcbiAgICAgICAgICAgIC8vIEFkZCBpbnB1dHMgaWYgcHJlc2VudFxuICAgICAgICAgICAgaWYgKGV4YW1wbGUuaW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRJbnB1dHMgPSBzZXJpYWxpemVQYXlsb2FkRm9yVHJhY2luZyhleGFtcGxlLmlucHV0cywgYFNlcmlhbGl6aW5nIGlucHV0cyBmb3IgdXBsb2FkZWQgZXhhbXBsZSB3aXRoIGlkOiAke2V4YW1wbGVJZH1gKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dHNCbG9iID0gbmV3IEJsb2IoW3N0cmluZ2lmaWVkSW5wdXRzXSwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoYCR7ZXhhbXBsZUlkfS5pbnB1dHNgLCBpbnB1dHNCbG9iKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFkZCBvdXRwdXRzIGlmIHByZXNlbnRcbiAgICAgICAgICAgIGlmIChleGFtcGxlLm91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdpZmllZE91dHB1dHMgPSBzZXJpYWxpemVQYXlsb2FkRm9yVHJhY2luZyhleGFtcGxlLm91dHB1dHMsIGBTZXJpYWxpemluZyBvdXRwdXRzIGZvciB1cGxvYWRlZCBleGFtcGxlIHdpdGggaWQ6ICR7ZXhhbXBsZUlkfWApO1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dHNCbG9iID0gbmV3IEJsb2IoW3N0cmluZ2lmaWVkT3V0cHV0c10sIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGAke2V4YW1wbGVJZH0ub3V0cHV0c2AsIG91dHB1dHNCbG9iKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFkZCBhdHRhY2htZW50cyBpZiBwcmVzZW50XG4gICAgICAgICAgICBpZiAoZXhhbXBsZS5hdHRhY2htZW50cykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIGF0dGFjaG1lbnRdIG9mIE9iamVjdC5lbnRyaWVzKGV4YW1wbGUuYXR0YWNobWVudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtaW1lVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF0dGFjaG1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbbWltZVR5cGUsIGRhdGFdID0gYXR0YWNobWVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlID0gYXR0YWNobWVudC5taW1lVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBhdHRhY2htZW50LmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0YWNobWVudEJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGAke21pbWVUeXBlfTsgbGVuZ3RoPSR7ZGF0YS5ieXRlTGVuZ3RofWAsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoYCR7ZXhhbXBsZUlkfS5hdHRhY2htZW50LiR7bmFtZX1gLCBhdHRhY2htZW50QmxvYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0ke3RoaXMuX2dldFBsYXRmb3JtRW5kcG9pbnRQYXRoKGBkYXRhc2V0cy8ke2RhdGFzZXRJZH0vZXhhbXBsZXNgKX1gLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMudGltZW91dF9tcyksXG4gICAgICAgICAgICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhaXNlRm9yU3RhdHVzKHJlcywgXCJ1cGxvYWQgZXhhbXBsZXNcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUHJvbXB0KHByb21wdElkZW50aWZpZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5wcm9tcHRFeGlzdHMocHJvbXB0SWRlbnRpZmllcikpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9tcHQgZG9lcyBub3QgZXhpc3QsIHlvdSBtdXN0IGNyZWF0ZSBpdCBmaXJzdC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW293bmVyLCBwcm9tcHROYW1lXSA9IHBhcnNlUHJvbXB0SWRlbnRpZmllcihwcm9tcHRJZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5fY3VycmVudFRlbmFudElzT3duZXIob3duZXIpKSkge1xuICAgICAgICAgICAgdGhyb3cgYXdhaXQgdGhpcy5fb3duZXJDb25mbGljdEVycm9yKFwidXBkYXRlIGEgcHJvbXB0XCIsIG93bmVyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXlsb2FkID0ge307XG4gICAgICAgIGlmIChvcHRpb25zPy5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcGF5bG9hZC5kZXNjcmlwdGlvbiA9IG9wdGlvbnMuZGVzY3JpcHRpb247XG4gICAgICAgIGlmIChvcHRpb25zPy5yZWFkbWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHBheWxvYWQucmVhZG1lID0gb3B0aW9ucy5yZWFkbWU7XG4gICAgICAgIGlmIChvcHRpb25zPy50YWdzICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBwYXlsb2FkLnRhZ3MgPSBvcHRpb25zLnRhZ3M7XG4gICAgICAgIGlmIChvcHRpb25zPy5pc1B1YmxpYyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcGF5bG9hZC5pc19wdWJsaWMgPSBvcHRpb25zLmlzUHVibGljO1xuICAgICAgICBpZiAob3B0aW9ucz8uaXNBcmNoaXZlZCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcGF5bG9hZC5pc19hcmNoaXZlZCA9IG9wdGlvbnMuaXNBcmNoaXZlZDtcbiAgICAgICAgLy8gQ2hlY2sgaWYgcGF5bG9hZCBpcyBlbXB0eVxuICAgICAgICBpZiAoT2JqZWN0LmtleXMocGF5bG9hZCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB2YWxpZCB1cGRhdGUgb3B0aW9ucyBwcm92aWRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vcmVwb3MvJHtvd25lcn0vJHtwcm9tcHROYW1lfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0X21zKSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwidXBkYXRlIHByb21wdFwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVQcm9tcHQocHJvbXB0SWRlbnRpZmllcikge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLnByb21wdEV4aXN0cyhwcm9tcHRJZGVudGlmaWVyKSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb21wdCBkb2VzIG5vdCBleGlzdCwgeW91IG11c3QgY3JlYXRlIGl0IGZpcnN0LlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbb3duZXIsIHByb21wdE5hbWUsIF9dID0gcGFyc2VQcm9tcHRJZGVudGlmaWVyKHByb21wdElkZW50aWZpZXIpO1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLl9jdXJyZW50VGVuYW50SXNPd25lcihvd25lcikpKSB7XG4gICAgICAgICAgICB0aHJvdyBhd2FpdCB0aGlzLl9vd25lckNvbmZsaWN0RXJyb3IoXCJkZWxldGUgYSBwcm9tcHRcIiwgb3duZXIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9mZXRjaChgJHt0aGlzLmFwaVVybH0vcmVwb3MvJHtvd25lcn0vJHtwcm9tcHROYW1lfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwiZGVsZXRlIHByb21wdFwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBhc3luYyBwdWxsUHJvbXB0Q29tbWl0KHByb21wdElkZW50aWZpZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgW293bmVyLCBwcm9tcHROYW1lLCBjb21taXRIYXNoXSA9IHBhcnNlUHJvbXB0SWRlbnRpZmllcihwcm9tcHRJZGVudGlmaWVyKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2ZldGNoKGAke3RoaXMuYXBpVXJsfS9jb21taXRzLyR7b3duZXJ9LyR7cHJvbXB0TmFtZX0vJHtjb21taXRIYXNofSR7b3B0aW9ucz8uaW5jbHVkZU1vZGVsID8gXCI/aW5jbHVkZV9tb2RlbD10cnVlXCIgOiBcIlwifWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRfbXMpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByYWlzZUZvclN0YXR1cyhyZXMsIFwicHVsbCBwcm9tcHQgY29tbWl0XCIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG93bmVyLFxuICAgICAgICAgICAgcmVwbzogcHJvbXB0TmFtZSxcbiAgICAgICAgICAgIGNvbW1pdF9oYXNoOiByZXN1bHQuY29tbWl0X2hhc2gsXG4gICAgICAgICAgICBtYW5pZmVzdDogcmVzdWx0Lm1hbmlmZXN0LFxuICAgICAgICAgICAgZXhhbXBsZXM6IHJlc3VsdC5leGFtcGxlcyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LCB1c2UgYGltcG9ydCB7IHB1bGwgfSBmcm9tIFwibGFuZ2NoYWluL2h1YlwiYCBpbnN0ZWFkLlxuICAgICAqIFVzaW5nIHRoaXMgbWV0aG9kIGRpcmVjdGx5IHJldHVybnMgdGhlIEpTT04gc3RyaW5nIG9mIHRoZSBwcm9tcHQgcmF0aGVyIHRoYW4gYSBMYW5nQ2hhaW4gb2JqZWN0LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgYXN5bmMgX3B1bGxQcm9tcHQocHJvbXB0SWRlbnRpZmllciwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcm9tcHRPYmplY3QgPSBhd2FpdCB0aGlzLnB1bGxQcm9tcHRDb21taXQocHJvbXB0SWRlbnRpZmllciwge1xuICAgICAgICAgICAgaW5jbHVkZU1vZGVsOiBvcHRpb25zPy5pbmNsdWRlTW9kZWwsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwcm9tcHQgPSBKU09OLnN0cmluZ2lmeShwcm9tcHRPYmplY3QubWFuaWZlc3QpO1xuICAgICAgICByZXR1cm4gcHJvbXB0O1xuICAgIH1cbiAgICBhc3luYyBwdXNoUHJvbXB0KHByb21wdElkZW50aWZpZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQ3JlYXRlIG9yIHVwZGF0ZSBwcm9tcHQgbWV0YWRhdGFcbiAgICAgICAgaWYgKGF3YWl0IHRoaXMucHJvbXB0RXhpc3RzKHByb21wdElkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBPYmplY3Qua2V5cyhvcHRpb25zKS5zb21lKChrZXkpID0+IGtleSAhPT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVByb21wdChwcm9tcHRJZGVudGlmaWVyLCB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zPy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcmVhZG1lOiBvcHRpb25zPy5yZWFkbWUsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IG9wdGlvbnM/LnRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIGlzUHVibGljOiBvcHRpb25zPy5pc1B1YmxpYyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUHJvbXB0KHByb21wdElkZW50aWZpZXIsIHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogb3B0aW9ucz8uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgcmVhZG1lOiBvcHRpb25zPy5yZWFkbWUsXG4gICAgICAgICAgICAgICAgdGFnczogb3B0aW9ucz8udGFncyxcbiAgICAgICAgICAgICAgICBpc1B1YmxpYzogb3B0aW9ucz8uaXNQdWJsaWMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbnM/Lm9iamVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2dldFByb21wdFVybChwcm9tcHRJZGVudGlmaWVyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhdGUgYSBjb21taXQgd2l0aCB0aGUgbmV3IG1hbmlmZXN0XG4gICAgICAgIGNvbnN0IHVybCA9IGF3YWl0IHRoaXMuY3JlYXRlQ29tbWl0KHByb21wdElkZW50aWZpZXIsIG9wdGlvbnM/Lm9iamVjdCwge1xuICAgICAgICAgICAgcGFyZW50Q29tbWl0SGFzaDogb3B0aW9ucz8ucGFyZW50Q29tbWl0SGFzaCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb25lIGEgcHVibGljIGRhdGFzZXQgdG8geW91ciBvd24gbGFuZ3NtaXRoIHRlbmFudC5cbiAgICAgKiBUaGlzIG9wZXJhdGlvbiBpcyBpZGVtcG90ZW50LiBJZiB5b3UgYWxyZWFkeSBoYXZlIGEgZGF0YXNldCB3aXRoIHRoZSBnaXZlbiBuYW1lLFxuICAgICAqIHRoaXMgZnVuY3Rpb24gd2lsbCBkbyBub3RoaW5nLlxuICBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW5PclVybCBUaGUgdG9rZW4gb2YgdGhlIHB1YmxpYyBkYXRhc2V0IHRvIGNsb25lLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gQWRkaXRpb25hbCBvcHRpb25zIGZvciBjbG9uaW5nIHRoZSBkYXRhc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5zb3VyY2VBcGlVcmxdIFRoZSBVUkwgb2YgdGhlIGxhbmdzbWl0aCBzZXJ2ZXIgd2hlcmUgdGhlIGRhdGEgaXMgaG9zdGVkLiBEZWZhdWx0cyB0byB0aGUgQVBJIFVSTCBvZiB5b3VyIGN1cnJlbnQgY2xpZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5kYXRhc2V0TmFtZV0gVGhlIG5hbWUgb2YgdGhlIGRhdGFzZXQgdG8gY3JlYXRlIGluIHlvdXIgdGVuYW50LiBEZWZhdWx0cyB0byB0aGUgbmFtZSBvZiB0aGUgcHVibGljIGRhdGFzZXQuXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAgICovXG4gICAgYXN5bmMgY2xvbmVQdWJsaWNEYXRhc2V0KHRva2VuT3JVcmwsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCB7IHNvdXJjZUFwaVVybCA9IHRoaXMuYXBpVXJsLCBkYXRhc2V0TmFtZSB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgW3BhcnNlZEFwaVVybCwgdG9rZW5VdWlkXSA9IHRoaXMucGFyc2VUb2tlbk9yVXJsKHRva2VuT3JVcmwsIHNvdXJjZUFwaVVybCk7XG4gICAgICAgIGNvbnN0IHNvdXJjZUNsaWVudCA9IG5ldyBDbGllbnQoe1xuICAgICAgICAgICAgYXBpVXJsOiBwYXJzZWRBcGlVcmwsXG4gICAgICAgICAgICAvLyBQbGFjZWhvbGRlciBBUEkga2V5IG5vdCBuZWVkZWQgYW55bW9yZSBpbiBtb3N0IGNhc2VzLCBidXRcbiAgICAgICAgICAgIC8vIHNvbWUgcHJpdmF0ZSBkZXBsb3ltZW50cyBtYXkgaGF2ZSBBUEkga2V5LWJhc2VkIHJhdGUgbGltaXRpbmdcbiAgICAgICAgICAgIC8vIHRoYXQgd291bGQgY2F1c2UgdGhpcyB0byBmYWlsIGlmIHdlIHByb3ZpZGUgbm8gdmFsdWUuXG4gICAgICAgICAgICBhcGlLZXk6IFwicGxhY2Vob2xkZXJcIixcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRzID0gYXdhaXQgc291cmNlQ2xpZW50LnJlYWRTaGFyZWREYXRhc2V0KHRva2VuVXVpZCk7XG4gICAgICAgIGNvbnN0IGZpbmFsRGF0YXNldE5hbWUgPSBkYXRhc2V0TmFtZSB8fCBkcy5uYW1lO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGF3YWl0IHRoaXMuaGFzRGF0YXNldCh7IGRhdGFzZXRJZDogZmluYWxEYXRhc2V0TmFtZSB9KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBEYXRhc2V0ICR7ZmluYWxEYXRhc2V0TmFtZX0gYWxyZWFkeSBleGlzdHMgaW4geW91ciB0ZW5hbnQuIFNraXBwaW5nLmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoXykge1xuICAgICAgICAgICAgLy8gYC5oYXNEYXRhc2V0YCB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBkYXRhc2V0IGRvZXMgbm90IGV4aXN0LlxuICAgICAgICAgICAgLy8gbm8tb3AgaW4gdGhhdCBjYXNlXG4gICAgICAgIH1cbiAgICAgICAgLy8gRmV0Y2ggZXhhbXBsZXMgZmlyc3QsIHRoZW4gY3JlYXRlIHRoZSBkYXRhc2V0XG4gICAgICAgIGNvbnN0IGV4YW1wbGVzID0gYXdhaXQgc291cmNlQ2xpZW50Lmxpc3RTaGFyZWRFeGFtcGxlcyh0b2tlblV1aWQpO1xuICAgICAgICBjb25zdCBkYXRhc2V0ID0gYXdhaXQgdGhpcy5jcmVhdGVEYXRhc2V0KGZpbmFsRGF0YXNldE5hbWUsIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGRhdGFUeXBlOiBkcy5kYXRhX3R5cGUgfHwgXCJrdlwiLFxuICAgICAgICAgICAgaW5wdXRzU2NoZW1hOiBkcy5pbnB1dHNfc2NoZW1hX2RlZmluaXRpb24gPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgb3V0cHV0c1NjaGVtYTogZHMub3V0cHV0c19zY2hlbWFfZGVmaW5pdGlvbiA/PyB1bmRlZmluZWQsXG4gICAgICAgIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFeGFtcGxlcyh7XG4gICAgICAgICAgICAgICAgaW5wdXRzOiBleGFtcGxlcy5tYXAoKGUpID0+IGUuaW5wdXRzKSxcbiAgICAgICAgICAgICAgICBvdXRwdXRzOiBleGFtcGxlcy5mbGF0TWFwKChlKSA9PiAoZS5vdXRwdXRzID8gW2Uub3V0cHV0c10gOiBbXSkpLFxuICAgICAgICAgICAgICAgIGRhdGFzZXRJZDogZGF0YXNldC5pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBjcmVhdGluZyBkYXRhc2V0ICR7ZmluYWxEYXRhc2V0TmFtZX0uIGAgK1xuICAgICAgICAgICAgICAgIFwiWW91IHNob3VsZCBkZWxldGUgaXQgbWFudWFsbHkuXCIpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXJzZVRva2VuT3JVcmwodXJsT3JUb2tlbiwgYXBpVXJsLCBudW1QYXJ0cyA9IDIsIGtpbmQgPSBcImRhdGFzZXRcIikge1xuICAgICAgICAvLyBUcnkgcGFyc2luZyBhcyBVVUlEXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhc3NlcnRVdWlkKHVybE9yVG9rZW4pOyAvLyBXaWxsIHRocm93IGlmIGl0J3Mgbm90IGEgVVVJRC5cbiAgICAgICAgICAgIHJldHVybiBbYXBpVXJsLCB1cmxPclRva2VuXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoXykge1xuICAgICAgICAgICAgLy8gbm8tb3AgaWYgaXQncyBub3QgYSB1dWlkXG4gICAgICAgIH1cbiAgICAgICAgLy8gUGFyc2UgYXMgVVJMXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHVybE9yVG9rZW4pO1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcnRzID0gcGFyc2VkVXJsLnBhdGhuYW1lXG4gICAgICAgICAgICAgICAgLnNwbGl0KFwiL1wiKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHBhcnQpID0+IHBhcnQgIT09IFwiXCIpO1xuICAgICAgICAgICAgaWYgKHBhdGhQYXJ0cy5sZW5ndGggPj0gbnVtUGFydHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblV1aWQgPSBwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIG51bVBhcnRzXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FwaVVybCwgdG9rZW5VdWlkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwdWJsaWMgJHtraW5kfSBVUkw6ICR7dXJsT3JUb2tlbn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwdWJsaWMgJHtraW5kfSBVUkwgb3IgdG9rZW46ICR7dXJsT3JUb2tlbn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBd2FpdHMgYWxsIHBlbmRpbmcgdHJhY2UgYmF0Y2hlcy4gVXNlZnVsIGZvciBlbnZpcm9ubWVudHMgd2hlcmVcbiAgICAgKiB5b3UgbmVlZCB0byBiZSBzdXJlIHRoYXQgYWxsIHRyYWNpbmcgcmVxdWVzdHMgZmluaXNoIGJlZm9yZSBleGVjdXRpb24gZW5kcyxcbiAgICAgKiBzdWNoIGFzIHNlcnZlcmxlc3MgZW52aXJvbm1lbnRzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBpbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwibGFuZ3NtaXRoXCI7XG4gICAgICpcbiAgICAgKiBjb25zdCBjbGllbnQgPSBuZXcgQ2xpZW50KCk7XG4gICAgICpcbiAgICAgKiB0cnkge1xuICAgICAqICAgLy8gVHJhY2luZyBoYXBwZW5zIGhlcmVcbiAgICAgKiAgIC4uLlxuICAgICAqIH0gZmluYWxseSB7XG4gICAgICogICBhd2FpdCBjbGllbnQuYXdhaXRQZW5kaW5nVHJhY2VCYXRjaGVzKCk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSBhbGwgY3VycmVudGx5IHBlbmRpbmcgdHJhY2VzIGhhdmUgc2VudC5cbiAgICAgKi9cbiAgICBhc3luYyBhd2FpdFBlbmRpbmdUcmFjZUJhdGNoZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLm1hbnVhbEZsdXNoTW9kZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiW1dBUk5JTkddOiBXaGVuIHRyYWNpbmcgaW4gbWFudWFsIGZsdXNoIG1vZGUsIHlvdSBtdXN0IGNhbGwgYGF3YWl0IGNsaWVudC5mbHVzaCgpYCBtYW51YWxseSB0byBzdWJtaXQgdHJhY2UgYmF0Y2hlcy5cIik7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgLi4udGhpcy5hdXRvQmF0Y2hRdWV1ZS5pdGVtcy5tYXAoKHsgaXRlbVByb21pc2UgfSkgPT4gaXRlbVByb21pc2UpLFxuICAgICAgICAgICAgdGhpcy5iYXRjaEluZ2VzdENhbGxlci5xdWV1ZS5vbklkbGUoKSxcbiAgICAgICAgXSk7XG4gICAgICAgIGlmICh0aGlzLmxhbmdTbWl0aFRvT1RFTFRyYW5zbGF0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXdhaXQgZ2V0RGVmYXVsdE9UTFBUcmFjZXJDb21wb25lbnRzKCk/LkRFRkFVTFRfTEFOR1NNSVRIX1NQQU5fUFJPQ0VTU09SPy5mb3JjZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc0V4YW1wbGVDcmVhdGUoaW5wdXQpIHtcbiAgICByZXR1cm4gXCJkYXRhc2V0X2lkXCIgaW4gaW5wdXQgfHwgXCJkYXRhc2V0X25hbWVcIiBpbiBpbnB1dDtcbn1cbiJdLCJuYW1lcyI6WyJ1dWlkIiwiTGFuZ1NtaXRoVG9PVEVMVHJhbnNsYXRvciIsImdldERlZmF1bHRPVExQVHJhY2VyQ29tcG9uZW50cyIsImdldE9URUxUcmFjZSIsImdldE9URUxDb250ZXh0IiwiQXN5bmNDYWxsZXIiLCJjb252ZXJ0TGFuZ0NoYWluTWVzc2FnZVRvRXhhbXBsZSIsImlzTGFuZ0NoYWluTWVzc2FnZSIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJnZXRMYW5nU21pdGhFbnZWYXJzTWV0YWRhdGEiLCJnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlIiwiZ2V0UnVudGltZUVudmlyb25tZW50IiwiZ2V0T3RlbEVuYWJsZWQiLCJnZXRFbnYiLCJfX3ZlcnNpb25fXyIsImFzc2VydFV1aWQiLCJ3YXJuT25jZSIsInBhcnNlUHJvbXB0SWRlbnRpZmllciIsInJhaXNlRm9yU3RhdHVzIiwiX2dsb2JhbEZldGNoSW1wbGVtZW50YXRpb25Jc05vZGVGZXRjaCIsIl9nZXRGZXRjaEltcGxlbWVudGF0aW9uIiwic2VyaWFsaXplIiwic2VyaWFsaXplUGF5bG9hZEZvclRyYWNpbmciLCJtZXJnZVJ1bnRpbWVFbnZJbnRvUnVuIiwicnVuIiwiY2FjaGVkRW52VmFycyIsInJ1bnRpbWVFbnYiLCJlbnZWYXJzIiwiZXh0cmEiLCJtZXRhZGF0YSIsInJ1bnRpbWUiLCJyZXZpc2lvbl9pZCIsInVuZGVmaW5lZCIsImdldFRyYWNpbmdTYW1wbGluZ1JhdGUiLCJjb25maWdSYXRlIiwic2FtcGxpbmdSYXRlU3RyIiwidG9TdHJpbmciLCJzYW1wbGluZ1JhdGUiLCJwYXJzZUZsb2F0IiwiRXJyb3IiLCJpc0xvY2FsaG9zdCIsInVybCIsInN0cmlwcGVkVXJsIiwicmVwbGFjZSIsImhvc3RuYW1lIiwic3BsaXQiLCJ0b0FycmF5IiwiaXRlcmFibGUiLCJyZXN1bHQiLCJpdGVtIiwicHVzaCIsInRyaW1RdW90ZXMiLCJzdHIiLCJ0cmltIiwiaGFuZGxlNDI5IiwicmVzcG9uc2UiLCJzdGF0dXMiLCJyZXRyeUFmdGVyIiwicGFyc2VJbnQiLCJoZWFkZXJzIiwiZ2V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiX2Zvcm1hdEZlZWRiYWNrU2NvcmUiLCJzY29yZSIsIk51bWJlciIsInRvRml4ZWQiLCJERUZBVUxUX1VOQ09NUFJFU1NFRF9CQVRDSF9TSVpFX0xJTUlUX0JZVEVTIiwiREVGQVVMVF9NQVhfU0laRV9CWVRFUyIsIlNFUlZFUl9JTkZPX1JFUVVFU1RfVElNRU9VVF9NUyIsIkRFRkFVTFRfQkFUQ0hfU0laRV9MSU1JVCIsIkRFRkFVTFRfQVBJX1VSTCIsIkF1dG9CYXRjaFF1ZXVlIiwiY29uc3RydWN0b3IiLCJtYXhTaXplQnl0ZXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwicGVlayIsIml0ZW1zIiwiaXRlbVByb21pc2VSZXNvbHZlIiwiaXRlbVByb21pc2UiLCJzaXplIiwiaWQiLCJsZW5ndGgiLCJzaXplQnl0ZXMiLCJjb25zb2xlIiwid2FybiIsImFjdGlvbiIsInBheWxvYWQiLCJvdGVsQ29udGV4dCIsImFwaUtleSIsImFwaVVybCIsInBvcCIsInVwVG9TaXplQnl0ZXMiLCJ1cFRvU2l6ZSIsInBvcHBlZCIsInBvcHBlZFNpemVCeXRlcyIsInNoaWZ0IiwibWFwIiwiaXQiLCJmb3JFYWNoIiwiQ2xpZW50IiwiX2ZldGNoIiwiZmV0Y2hJbXBsZW1lbnRhdGlvbiIsImRlYnVnIiwiY29uZmlnIiwiU2V0IiwiZGVmYXVsdENvbmZpZyIsImdldERlZmF1bHRDbGllbnRDb25maWciLCJ0cmFjaW5nU2FtcGxlUmF0ZSIsInRyYWNpbmdTYW1wbGluZ1JhdGUiLCJlbmRzV2l0aCIsInNsaWNlIiwid2ViVXJsIiwid29ya3NwYWNlSWQiLCJ0aW1lb3V0X21zIiwiY2FsbGVyIiwiY2FsbGVyT3B0aW9ucyIsIm1heFJldHJpZXMiLCJ0cmFjZUJhdGNoQ29uY3VycmVuY3kiLCJtYXhNZW1vcnkiLCJtYXhJbmdlc3RNZW1vcnlCeXRlcyIsImJhdGNoSW5nZXN0Q2FsbGVyIiwibWF4Q29uY3VycmVuY3kiLCJtYXhRdWV1ZVNpemVCeXRlcyIsIm9uRmFpbGVkUmVzcG9uc2VIb29rIiwiaGlkZUlucHV0cyIsImFub255bWl6ZXIiLCJoaWRlT3V0cHV0cyIsImF1dG9CYXRjaFRyYWNpbmciLCJhdXRvQmF0Y2hRdWV1ZSIsImJsb2NrT25Sb290UnVuRmluYWxpemF0aW9uIiwiYmF0Y2hTaXplQnl0ZXNMaW1pdCIsImJhdGNoU2l6ZUxpbWl0IiwiZmV0Y2hPcHRpb25zIiwibWFudWFsRmx1c2hNb2RlIiwibGFuZ1NtaXRoVG9PVEVMVHJhbnNsYXRvciIsImNhY2hlZExTRW52VmFyc0Zvck1ldGFkYXRhIiwiZ2V0SG9zdFVybCIsImluY2x1ZGVzIiwiX2dldFBsYXRmb3JtRW5kcG9pbnRQYXRoIiwicGF0aCIsIm5lZWRzVjFQcmVmaXgiLCJwcm9jZXNzSW5wdXRzIiwiaW5wdXRzIiwicHJvY2Vzc091dHB1dHMiLCJvdXRwdXRzIiwicHJlcGFyZVJ1bkNyZWF0ZU9yVXBkYXRlSW5wdXRzIiwicnVuUGFyYW1zIiwiX2dldFJlc3BvbnNlIiwicXVlcnlQYXJhbXMiLCJwYXJhbXNTdHJpbmciLCJjYWxsIiwicmVzIiwibWV0aG9kIiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJ0aW1lb3V0IiwiX2dldCIsImpzb24iLCJfZ2V0UGFnaW5hdGVkIiwiVVJMU2VhcmNoUGFyYW1zIiwidHJhbnNmb3JtIiwib2Zmc2V0IiwibGltaXQiLCJzZXQiLCJTdHJpbmciLCJfZ2V0Q3Vyc29yUGFnaW5hdGVkTGlzdCIsImJvZHkiLCJyZXF1ZXN0TWV0aG9kIiwiZGF0YUtleSIsImJvZHlQYXJhbXMiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzcG9uc2VCb2R5IiwiY3Vyc29ycyIsIm5leHQiLCJjdXJzb3IiLCJfc2hvdWxkU2FtcGxlIiwiTWF0aCIsInJhbmRvbSIsIl9maWx0ZXJGb3JTYW1wbGluZyIsInJ1bnMiLCJwYXRjaCIsInNhbXBsZWQiLCJmaWx0ZXJlZFBvc3RVdWlkcyIsImhhcyIsInRyYWNlX2lkIiwiZGVsZXRlIiwidHJhY2VJZCIsImFkZCIsIl9nZXRCYXRjaFNpemVMaW1pdEJ5dGVzIiwic2VydmVySW5mbyIsIl9lbnN1cmVTZXJ2ZXJJbmZvIiwiYmF0Y2hfaW5nZXN0X2NvbmZpZyIsInNpemVfbGltaXRfYnl0ZXMiLCJfZ2V0QmF0Y2hTaXplTGltaXQiLCJzaXplX2xpbWl0IiwiX2dldERhdGFzZXRFeGFtcGxlc011bHRpUGFydFN1cHBvcnQiLCJpbnN0YW5jZV9mbGFncyIsImRhdGFzZXRfZXhhbXBsZXNfbXVsdGlwYXJ0X2VuYWJsZWQiLCJkcmFpbkF1dG9CYXRjaFF1ZXVlIiwiYmF0Y2hTaXplTGltaXRCeXRlcyIsInByb21pc2VzIiwiYmF0Y2giLCJkb25lIiwiYmF0Y2hlc0J5RGVzdGluYXRpb24iLCJyZWR1Y2UiLCJhY2MiLCJpc0RlZmF1bHQiLCJiYXRjaEtleSIsImJhdGNoUHJvbWlzZXMiLCJlbnRyaWVzIiwiYmF0Y2hQcm9taXNlIiwiX3Byb2Nlc3NCYXRjaCIsImFsbEJhdGNoZXNQcm9taXNlIiwiYWxsIiwiZmluYWxseSIsIm9wdGlvbnMiLCJiYXRjaFNpemVCeXRlcyIsInN1bSIsIl9zZW5kQmF0Y2hUb09URUxUcmFuc2xhdG9yIiwiaW5nZXN0UGFyYW1zIiwicnVuQ3JlYXRlcyIsImZpbHRlciIsInJ1blVwZGF0ZXMiLCJ1c2VfbXVsdGlwYXJ0X2VuZHBvaW50IiwidXNlR3ppcCIsImd6aXBfYm9keV9lbmFibGVkIiwibXVsdGlwYXJ0SW5nZXN0UnVucyIsImJhdGNoSW5nZXN0UnVucyIsImUiLCJlcnJvciIsIm90ZWxDb250ZXh0TWFwIiwiTWFwIiwib3BlcmF0aW9ucyIsIm9wZXJhdGlvbiIsImV4cG9ydEJhdGNoIiwicHJvY2Vzc1J1bk9wZXJhdGlvbiIsImNsZWFyVGltZW91dCIsImF1dG9CYXRjaFRpbWVvdXQiLCJzaXplTGltaXRCeXRlcyIsInNpemVMaW1pdCIsImF1dG9CYXRjaEFnZ3JlZ2F0aW9uRGVsYXlNcyIsIl9nZXRTZXJ2ZXJJbmZvIiwiQWNjZXB0IiwibG9nIiwiX2dldFNlcnZlckluZm9Qcm9taXNlIiwiX3NlcnZlckluZm8iLCJtZXNzYWdlIiwidGhlbiIsIl9nZXRTZXR0aW5ncyIsInNldHRpbmdzIiwiZmx1c2giLCJfY2xvbmVDdXJyZW50T1RFTENvbnRleHQiLCJvdGVsX3RyYWNlIiwib3RlbF9jb250ZXh0IiwiY3VycmVudFNwYW4iLCJnZXRBY3RpdmVTcGFuIiwic2V0U3BhbiIsImFjdGl2ZSIsImNyZWF0ZVJ1biIsInNlc3Npb25fbmFtZSIsInByb2plY3RfbmFtZSIsInJ1bkNyZWF0ZSIsInN0YXJ0X3RpbWUiLCJEYXRlIiwibm93IiwiZG90dGVkX29yZGVyIiwiY2F0Y2giLCJtZXJnZWRSdW5DcmVhdGVQYXJhbSIsInByZXBhcmVkQ3JlYXRlUGFyYW1zIiwiY3JlYXRlIiwicHJlcGFyZWRVcGRhdGVQYXJhbXMiLCJ1cGRhdGUiLCJjcmVhdGVCeUlkIiwicGFyYW1zIiwic3RhbmRhbG9uZVVwZGF0ZXMiLCJ1cGRhdGVQYXJhbSIsInZhbHVlcyIsInJhd0JhdGNoIiwicG9zdCIsImJhdGNoQ2h1bmtzIiwiayIsImtleSIsImJhdGNoSXRlbXMiLCJyZXZlcnNlIiwiYmF0Y2hJdGVtIiwicnVuSWRzIiwiY29uY2F0Iiwiam9pbiIsIl9wb3N0QmF0Y2hJbmdlc3RSdW5zIiwiY2FsbFdpdGhPcHRpb25zIiwiYWxsQXR0YWNobWVudHMiLCJwcmVwYXJlZENyZWF0ZSIsImF0dGFjaG1lbnRzIiwiaW52YWxpZFJ1bkNyZWF0ZSIsImZpbmQiLCJpbnZhbGlkUnVuVXBkYXRlIiwicnVuVXBkYXRlIiwiYWNjdW11bGF0ZWRDb250ZXh0IiwiYWNjdW11bGF0ZWRQYXJ0cyIsInBheWxvYWRzIiwib3JpZ2luYWxQYXlsb2FkIiwiZXZlbnRzIiwic2VyaWFsaXplZCIsImZpZWxkcyIsInN0cmluZ2lmaWVkUGF5bG9hZCIsIm5hbWUiLCJCbG9iIiwidHlwZSIsInN0cmluZ2lmaWVkVmFsdWUiLCJhdHRhY2htZW50IiwiY29udGVudFR5cGUiLCJjb250ZW50IiwiQXJyYXkiLCJpc0FycmF5IiwibWltZVR5cGUiLCJkYXRhIiwiYnl0ZUxlbmd0aCIsIl9zZW5kTXVsdGlwYXJ0UmVxdWVzdCIsIl9jcmVhdGVOb2RlRmV0Y2hCb2R5IiwicGFydHMiLCJib3VuZGFyeSIsImNodW5rcyIsInBhcnQiLCJhcnJheUJ1ZmZlciIsIl9jcmVhdGVNdWx0aXBhcnRTdHJlYW0iLCJlbmNvZGVyIiwiVGV4dEVuY29kZXIiLCJzdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsInN0YXJ0IiwiY29udHJvbGxlciIsIndyaXRlQ2h1bmsiLCJjaHVuayIsImVucXVldWUiLCJlbmNvZGUiLCJwYXlsb2FkU3RyZWFtIiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwicmVhZCIsInJlbGVhc2VMb2NrIiwiY2xvc2UiLCJjb250ZXh0IiwiaXNOb2RlRmV0Y2giLCJidWlsZEJ1ZmZlcmVkIiwiYnVpbGRTdHJlYW0iLCJzZW5kV2l0aFJldHJ5IiwiYm9keUZhY3RvcnkiLCJ0cmFuc2Zvcm1lZEJvZHkiLCJwaXBlVGhyb3VnaCIsIkNvbXByZXNzaW9uU3RyZWFtIiwiZHVwbGV4Iiwic3RyZWFtZWRBdHRlbXB0IiwibXVsdGlwYXJ0U3RyZWFtaW5nRGlzYWJsZWQiLCJ1cGRhdGVSdW4iLCJydW5JZCIsImVuZF90aW1lIiwicGFyZW50X3J1bl9pZCIsInJlYWRSdW4iLCJsb2FkQ2hpbGRSdW5zIiwiX2xvYWRDaGlsZFJ1bnMiLCJnZXRSdW5VcmwiLCJwcm9qZWN0T3B0cyIsInNlc3Npb25JZCIsInNlc3Npb25faWQiLCJwcm9qZWN0TmFtZSIsInJlYWRQcm9qZWN0IiwicHJvamVjdElkIiwicHJvamVjdCIsInRlbmFudElkIiwiX2dldFRlbmFudElkIiwicnVuXyIsImFwcF9wYXRoIiwiYmFzZVVybCIsImNoaWxkUnVucyIsImxpc3RSdW5zIiwiaXNSb290IiwidHJlZW1hcCIsInNvcnQiLCJhIiwiYiIsImxvY2FsZUNvbXBhcmUiLCJjaGlsZFJ1biIsInN0YXJ0c1dpdGgiLCJjaGlsZF9ydW5zIiwicHJvcHMiLCJwYXJlbnRSdW5JZCIsInJlZmVyZW5jZUV4YW1wbGVJZCIsInN0YXJ0VGltZSIsImV4ZWN1dGlvbk9yZGVyIiwicnVuVHlwZSIsInF1ZXJ5IiwidHJhY2VGaWx0ZXIiLCJ0cmVlRmlsdGVyIiwic2VsZWN0Iiwib3JkZXIiLCJwcm9qZWN0SWRzIiwicHJvamVjdE5hbWVzIiwicHJvamVjdElkc18iLCJkZWZhdWx0X3NlbGVjdCIsInNlc3Npb24iLCJydW5fdHlwZSIsInJlZmVyZW5jZV9leGFtcGxlIiwidHJhY2VfZmlsdGVyIiwidHJlZV9maWx0ZXIiLCJleGVjdXRpb25fb3JkZXIiLCJwYXJlbnRfcnVuIiwidG9JU09TdHJpbmciLCJ0cmFjZSIsImlzX3Jvb3QiLCJydW5zWWllbGRlZCIsIm5ld1J1bnMiLCJsaXN0R3JvdXBSdW5zIiwiZ3JvdXBCeSIsImVuZFRpbWUiLCJiYXNlQm9keSIsImdyb3VwX2J5IiwiY3VycmVudE9mZnNldCIsImN1cnJlbnRCb2R5IiwiZmlsdGVyZWRQYXlsb2FkIiwiZnJvbUVudHJpZXMiLCJfIiwiZ3JvdXBzIiwidG90YWwiLCJ0aHJlYWQiLCJnZXRSdW5TdGF0cyIsInBhcmVudFJ1biIsInJlZmVyZW5jZUV4YW1wbGVJZHMiLCJkYXRhU291cmNlVHlwZSIsImRhdGFfc291cmNlX3R5cGUiLCJzaGFyZVJ1biIsInNoYXJlSWQiLCJydW5faWQiLCJzaGFyZV90b2tlbiIsInY0IiwidW5zaGFyZVJ1biIsInJlYWRSdW5TaGFyZWRMaW5rIiwibGlzdFNoYXJlZFJ1bnMiLCJzaGFyZVRva2VuIiwiYXBwZW5kIiwicmVhZERhdGFzZXRTaGFyZWRTY2hlbWEiLCJkYXRhc2V0SWQiLCJkYXRhc2V0TmFtZSIsImRhdGFzZXQiLCJyZWFkRGF0YXNldCIsInNoYXJlU2NoZW1hIiwic2hhcmVEYXRhc2V0IiwiZGF0YXNldF9pZCIsInVuc2hhcmVEYXRhc2V0IiwicmVhZFNoYXJlZERhdGFzZXQiLCJsaXN0U2hhcmVkRXhhbXBsZXMiLCJleGFtcGxlSWRzIiwidXJsUGFyYW1zIiwidiIsIm9rIiwiZGV0YWlsIiwic3RhdHVzVGV4dCIsImV4YW1wbGUiLCJfaG9zdFVybCIsImNyZWF0ZVByb2plY3QiLCJkZXNjcmlwdGlvbiIsInVwc2VydCIsInByb2plY3RFeHRyYSIsInJlZmVyZW5jZURhdGFzZXRJZCIsInVwc2VydF8iLCJlbmRwb2ludCIsInNlcmlhbGl6ZWRCb2R5IiwidXBkYXRlUHJvamVjdCIsImhhc1Byb2plY3QiLCJpbmNsdWRlU3RhdHMiLCJnZXRQcm9qZWN0VXJsIiwiZ2V0RGF0YXNldFVybCIsIl90ZW5hbnRJZCIsInByb2plY3RzIiwidGVuYW50X2lkIiwibGlzdFByb2plY3RzIiwibmFtZUNvbnRhaW5zIiwicmVmZXJlbmNlRGF0YXNldE5hbWUiLCJkYXRhc2V0VmVyc2lvbiIsInJlZmVyZW5jZUZyZWUiLCJkZWxldGVQcm9qZWN0IiwicHJvamVjdElkXyIsInVwbG9hZENzdiIsImNzdkZpbGUiLCJmaWxlTmFtZSIsImlucHV0S2V5cyIsIm91dHB1dEtleXMiLCJkYXRhVHlwZSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJjcmVhdGVEYXRhc2V0IiwiaW5wdXRzU2NoZW1hIiwib3V0cHV0c1NjaGVtYSIsImRhdGFfdHlwZSIsImlucHV0c19zY2hlbWFfZGVmaW5pdGlvbiIsIm91dHB1dHNfc2NoZW1hX2RlZmluaXRpb24iLCJoYXNEYXRhc2V0IiwidG9Mb2NhbGVMb3dlckNhc2UiLCJkaWZmRGF0YXNldFZlcnNpb25zIiwiZnJvbVZlcnNpb24iLCJ0b1ZlcnNpb24iLCJkYXRhc2V0SWRfIiwiZnJvbV92ZXJzaW9uIiwidG9fdmVyc2lvbiIsInJlYWREYXRhc2V0T3BlbmFpRmluZXR1bmluZyIsImRhdGFzZXRUZXh0IiwidGV4dCIsImxpbmUiLCJwYXJzZSIsImxpc3REYXRhc2V0cyIsImRhdGFzZXRJZHMiLCJkYXRhc2V0TmFtZUNvbnRhaW5zIiwiaWRfIiwiZGF0YXNldHMiLCJ1cGRhdGVEYXRhc2V0IiwiX2RhdGFzZXRJZCIsInVwZGF0ZURhdGFzZXRUYWciLCJhc09mIiwidGFnIiwiYXNfb2YiLCJkZWxldGVEYXRhc2V0IiwiaW5kZXhEYXRhc2V0Iiwic2ltaWxhckV4YW1wbGVzIiwiY3JlYXRlRXhhbXBsZSIsImlucHV0c09yVXBkYXRlIiwiaXNFeGFtcGxlQ3JlYXRlIiwiZGF0YXNldE5hbWVfIiwiZGF0YXNldF9uYW1lIiwiY3JlYXRlZEF0XyIsImNyZWF0ZWRBdCIsImNyZWF0ZWRfYXQiLCJleGFtcGxlSWQiLCJzb3VyY2VfcnVuX2lkIiwic291cmNlUnVuSWQiLCJ1c2Vfc291cmNlX3J1bl9pbyIsInVzZVNvdXJjZVJ1bklPIiwidXNlX3NvdXJjZV9ydW5fYXR0YWNobWVudHMiLCJ1c2VTb3VyY2VSdW5BdHRhY2htZW50cyIsIl91cGxvYWRFeGFtcGxlc011bHRpcGFydCIsInJlYWRFeGFtcGxlIiwiZXhhbXBsZV9pZHMiLCJjcmVhdGVFeGFtcGxlcyIsInByb3BzT3JVcGxvYWRzIiwidXBsb2FkcyIsImV4YW1wbGVzIiwic3BsaXRzIiwic291cmNlUnVuSWRzIiwidXNlU291cmNlUnVuSU9zIiwiZm9ybWF0dGVkRXhhbXBsZXMiLCJpbnB1dCIsImlkeCIsImNyZWF0ZUxMTUV4YW1wbGUiLCJnZW5lcmF0aW9uIiwib3V0cHV0IiwiY3JlYXRlQ2hhdEV4YW1wbGUiLCJnZW5lcmF0aW9ucyIsImZpbmFsSW5wdXQiLCJmaW5hbE91dHB1dCIsInJhd0V4YW1wbGUiLCJhdHRhY2htZW50X3VybHMiLCJyZXN0IiwicHJlc2lnbmVkX3VybCIsIm1pbWVfdHlwZSIsImxpc3RFeGFtcGxlcyIsImlubGluZVMzVXJscyIsImluY2x1ZGVBdHRhY2htZW50cyIsImRhdGFzZXRfdmVyc2lvbiIsImlubGluZVMzVXJsc18iLCJzZXJpYWxpemVkTWV0YWRhdGEiLCJmaWVsZCIsImkiLCJyYXdFeGFtcGxlcyIsImRlbGV0ZUV4YW1wbGUiLCJ1cGRhdGVFeGFtcGxlIiwiZXhhbXBsZUlkT3JVcGRhdGUiLCJ1cGRhdGVUb1VzZSIsIl91cGRhdGVFeGFtcGxlc011bHRpcGFydCIsInVwZGF0ZUV4YW1wbGVzIiwicmVhZERhdGFzZXRWZXJzaW9uIiwicmVzb2x2ZWREYXRhc2V0SWQiLCJsaXN0RGF0YXNldFNwbGl0cyIsInVwZGF0ZURhdGFzZXRTcGxpdHMiLCJzcGxpdE5hbWUiLCJyZW1vdmUiLCJzcGxpdF9uYW1lIiwiZXZhbHVhdGVSdW4iLCJldmFsdWF0b3IiLCJzb3VyY2VJbmZvIiwicmVmZXJlbmNlRXhhbXBsZSIsInJlZmVyZW5jZV9leGFtcGxlX2lkIiwiZmVlZGJhY2tSZXN1bHQiLCJmZWVkYmFja3MiLCJfbG9nRXZhbHVhdGlvbkZlZWRiYWNrIiwiY3JlYXRlRmVlZGJhY2siLCJjb3JyZWN0aW9uIiwiY29tbWVudCIsImZlZWRiYWNrU291cmNlVHlwZSIsImZlZWRiYWNrSWQiLCJmZWVkYmFja0NvbmZpZyIsImNvbXBhcmF0aXZlRXhwZXJpbWVudElkIiwiZmVlZGJhY2tfc291cmNlIiwiZmVlZGJhY2siLCJjb21wYXJhdGl2ZV9leHBlcmltZW50X2lkIiwidXBkYXRlRmVlZGJhY2siLCJmZWVkYmFja1VwZGF0ZSIsInJlYWRGZWVkYmFjayIsImRlbGV0ZUZlZWRiYWNrIiwibGlzdEZlZWRiYWNrIiwiZmVlZGJhY2tLZXlzIiwiZmVlZGJhY2tTb3VyY2VUeXBlcyIsImNyZWF0ZVByZXNpZ25lZEZlZWRiYWNrVG9rZW4iLCJmZWVkYmFja0tleSIsImV4cGlyYXRpb24iLCJmZWVkYmFja19rZXkiLCJmZWVkYmFja19jb25maWciLCJob3VycyIsIm1pbnV0ZXMiLCJkYXlzIiwiY3JlYXRlQ29tcGFyYXRpdmVFeHBlcmltZW50IiwiZXhwZXJpbWVudElkcyIsInJlZmVyZW5jZV9kYXRhc2V0X2lkIiwiZXhwZXJpbWVudF9pZHMiLCJsaXN0UHJlc2lnbmVkRmVlZGJhY2tUb2tlbnMiLCJ0b2tlbnMiLCJfc2VsZWN0RXZhbFJlc3VsdHMiLCJyZXN1bHRzIiwicmVzdWx0c18iLCJldmFsdWF0b3JSZXNwb25zZSIsImV2YWxSZXN1bHRzIiwic291cmNlSW5mb18iLCJldmFsdWF0b3JJbmZvIiwicnVuSWRfIiwidGFyZ2V0UnVuSWQiLCJsb2dFdmFsdWF0aW9uRmVlZGJhY2siLCJsaXN0QW5ub3RhdGlvblF1ZXVlcyIsInF1ZXVlSWRzIiwibWluIiwiY291bnQiLCJxdWV1ZXMiLCJjcmVhdGVBbm5vdGF0aW9uUXVldWUiLCJxdWV1ZUlkIiwicnVicmljSW5zdHJ1Y3Rpb25zIiwicnVicmljX2luc3RydWN0aW9ucyIsInJlYWRBbm5vdGF0aW9uUXVldWUiLCJ1cGRhdGVBbm5vdGF0aW9uUXVldWUiLCJkZWxldGVBbm5vdGF0aW9uUXVldWUiLCJhZGRSdW5zVG9Bbm5vdGF0aW9uUXVldWUiLCJnZXRSdW5Gcm9tQW5ub3RhdGlvblF1ZXVlIiwiaW5kZXgiLCJkZWxldGVSdW5Gcm9tQW5ub3RhdGlvblF1ZXVlIiwicXVldWVSdW5JZCIsImdldFNpemVGcm9tQW5ub3RhdGlvblF1ZXVlIiwiX2N1cnJlbnRUZW5hbnRJc093bmVyIiwib3duZXIiLCJ0ZW5hbnRfaGFuZGxlIiwiX293bmVyQ29uZmxpY3RFcnJvciIsIl9nZXRMYXRlc3RDb21taXRIYXNoIiwicHJvbXB0T3duZXJBbmROYW1lIiwiY29tbWl0cyIsImNvbW1pdF9oYXNoIiwiX2xpa2VPclVubGlrZVByb21wdCIsInByb21wdElkZW50aWZpZXIiLCJsaWtlIiwicHJvbXB0TmFtZSIsIl9nZXRQcm9tcHRVcmwiLCJjb21taXRIYXNoIiwic3Vic3RyaW5nIiwicHJvbXB0RXhpc3RzIiwicHJvbXB0IiwiZ2V0UHJvbXB0IiwibGlrZVByb21wdCIsInVubGlrZVByb21wdCIsImxpc3RDb21taXRzIiwibGlzdFByb21wdHMiLCJzb3J0RmllbGQiLCJpc0FyY2hpdmVkIiwiaXNQdWJsaWMiLCJwcm9tcHRzIiwicmVwb3MiLCJyZXBvIiwiY3JlYXRlUHJvbXB0IiwicmVwb19oYW5kbGUiLCJyZWFkbWUiLCJ0YWdzIiwiaXNfcHVibGljIiwiY3JlYXRlQ29tbWl0Iiwib2JqZWN0IiwicmVzb2x2ZWRQYXJlbnRDb21taXRIYXNoIiwicGFyZW50Q29tbWl0SGFzaCIsIm1hbmlmZXN0IiwicGFyZW50X2NvbW1pdCIsInVwZGF0ZUV4YW1wbGVzTXVsdGlwYXJ0IiwidXBkYXRlcyIsImV4YW1wbGVCb2R5Iiwic3RyaW5naWZpZWRFeGFtcGxlIiwiZXhhbXBsZUJsb2IiLCJzdHJpbmdpZmllZElucHV0cyIsImlucHV0c0Jsb2IiLCJzdHJpbmdpZmllZE91dHB1dHMiLCJvdXRwdXRzQmxvYiIsImF0dGFjaG1lbnRCbG9iIiwiYXR0YWNobWVudHNfb3BlcmF0aW9ucyIsInN0cmluZ2lmaWVkQXR0YWNobWVudHNPcGVyYXRpb25zIiwiYXR0YWNobWVudHNPcGVyYXRpb25zQmxvYiIsImRhdGFzZXRJZFRvVXNlIiwidXBsb2FkRXhhbXBsZXNNdWx0aXBhcnQiLCJ1cGRhdGVQcm9tcHQiLCJpc19hcmNoaXZlZCIsImtleXMiLCJkZWxldGVQcm9tcHQiLCJwdWxsUHJvbXB0Q29tbWl0IiwiaW5jbHVkZU1vZGVsIiwiX3B1bGxQcm9tcHQiLCJwcm9tcHRPYmplY3QiLCJwdXNoUHJvbXB0Iiwic29tZSIsImNsb25lUHVibGljRGF0YXNldCIsInRva2VuT3JVcmwiLCJzb3VyY2VBcGlVcmwiLCJwYXJzZWRBcGlVcmwiLCJ0b2tlblV1aWQiLCJwYXJzZVRva2VuT3JVcmwiLCJzb3VyY2VDbGllbnQiLCJkcyIsImZpbmFsRGF0YXNldE5hbWUiLCJmbGF0TWFwIiwidXJsT3JUb2tlbiIsIm51bVBhcnRzIiwia2luZCIsInBhcnNlZFVybCIsIlVSTCIsInBhdGhQYXJ0cyIsInBhdGhuYW1lIiwiYXdhaXRQZW5kaW5nVHJhY2VCYXRjaGVzIiwicXVldWUiLCJvbklkbGUiLCJERUZBVUxUX0xBTkdTTUlUSF9TUEFOX1BST0NFU1NPUiIsImZvcmNlRmx1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/client.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/env.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/env.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isTracingEnabled: () => (/* binding */ isTracingEnabled)\n/* harmony export */ });\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/env.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/env.js\");\n\nconst isTracingEnabled = (tracingEnabled)=>{\n    if (tracingEnabled !== undefined) {\n        return tracingEnabled;\n    }\n    const envVars = [\n        \"TRACING_V2\",\n        \"TRACING\"\n    ];\n    return !!envVars.find((envVar)=>(0,_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getLangSmithEnvironmentVariable)(envVar) === \"true\");\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9lbnYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBaUU7QUFDMUQsTUFBTUMsbUJBQW1CLENBQUNDO0lBQzdCLElBQUlBLG1CQUFtQkMsV0FBVztRQUM5QixPQUFPRDtJQUNYO0lBQ0EsTUFBTUUsVUFBVTtRQUFDO1FBQWM7S0FBVTtJQUN6QyxPQUFPLENBQUMsQ0FBQ0EsUUFBUUMsSUFBSSxDQUFDLENBQUNDLFNBQVdOLDhFQUErQkEsQ0FBQ00sWUFBWTtBQUNsRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9kaXN0L2Vudi5qcz85MzMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldExhbmdTbWl0aEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi91dGlscy9lbnYuanNcIjtcbmV4cG9ydCBjb25zdCBpc1RyYWNpbmdFbmFibGVkID0gKHRyYWNpbmdFbmFibGVkKSA9PiB7XG4gICAgaWYgKHRyYWNpbmdFbmFibGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRyYWNpbmdFbmFibGVkO1xuICAgIH1cbiAgICBjb25zdCBlbnZWYXJzID0gW1wiVFJBQ0lOR19WMlwiLCBcIlRSQUNJTkdcIl07XG4gICAgcmV0dXJuICEhZW52VmFycy5maW5kKChlbnZWYXIpID0+IGdldExhbmdTbWl0aEVudmlyb25tZW50VmFyaWFibGUoZW52VmFyKSA9PT0gXCJ0cnVlXCIpO1xufTtcbiJdLCJuYW1lcyI6WyJnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlIiwiaXNUcmFjaW5nRW5hYmxlZCIsInRyYWNpbmdFbmFibGVkIiwidW5kZWZpbmVkIiwiZW52VmFycyIsImZpbmQiLCJlbnZWYXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/experimental/otel/constants.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/experimental/otel/constants.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AI_SDK_LLM_OPERATIONS: () => (/* binding */ AI_SDK_LLM_OPERATIONS),\n/* harmony export */   AI_SDK_TOOL_OPERATIONS: () => (/* binding */ AI_SDK_TOOL_OPERATIONS),\n/* harmony export */   GENAI_COMPLETION: () => (/* binding */ GENAI_COMPLETION),\n/* harmony export */   GENAI_PROMPT: () => (/* binding */ GENAI_PROMPT),\n/* harmony export */   GEN_AI_ASSISTANT_MESSAGE: () => (/* binding */ GEN_AI_ASSISTANT_MESSAGE),\n/* harmony export */   GEN_AI_CHOICE: () => (/* binding */ GEN_AI_CHOICE),\n/* harmony export */   GEN_AI_OPERATION_NAME: () => (/* binding */ GEN_AI_OPERATION_NAME),\n/* harmony export */   GEN_AI_REQUEST_EXTRA_BODY: () => (/* binding */ GEN_AI_REQUEST_EXTRA_BODY),\n/* harmony export */   GEN_AI_REQUEST_EXTRA_QUERY: () => (/* binding */ GEN_AI_REQUEST_EXTRA_QUERY),\n/* harmony export */   GEN_AI_REQUEST_FREQUENCY_PENALTY: () => (/* binding */ GEN_AI_REQUEST_FREQUENCY_PENALTY),\n/* harmony export */   GEN_AI_REQUEST_MAX_TOKENS: () => (/* binding */ GEN_AI_REQUEST_MAX_TOKENS),\n/* harmony export */   GEN_AI_REQUEST_MODEL: () => (/* binding */ GEN_AI_REQUEST_MODEL),\n/* harmony export */   GEN_AI_REQUEST_PRESENCE_PENALTY: () => (/* binding */ GEN_AI_REQUEST_PRESENCE_PENALTY),\n/* harmony export */   GEN_AI_REQUEST_TEMPERATURE: () => (/* binding */ GEN_AI_REQUEST_TEMPERATURE),\n/* harmony export */   GEN_AI_REQUEST_TOP_P: () => (/* binding */ GEN_AI_REQUEST_TOP_P),\n/* harmony export */   GEN_AI_RESPONSE_FINISH_REASONS: () => (/* binding */ GEN_AI_RESPONSE_FINISH_REASONS),\n/* harmony export */   GEN_AI_RESPONSE_ID: () => (/* binding */ GEN_AI_RESPONSE_ID),\n/* harmony export */   GEN_AI_RESPONSE_MODEL: () => (/* binding */ GEN_AI_RESPONSE_MODEL),\n/* harmony export */   GEN_AI_RESPONSE_SERVICE_TIER: () => (/* binding */ GEN_AI_RESPONSE_SERVICE_TIER),\n/* harmony export */   GEN_AI_RESPONSE_SYSTEM_FINGERPRINT: () => (/* binding */ GEN_AI_RESPONSE_SYSTEM_FINGERPRINT),\n/* harmony export */   GEN_AI_SERIALIZED_DOC: () => (/* binding */ GEN_AI_SERIALIZED_DOC),\n/* harmony export */   GEN_AI_SERIALIZED_NAME: () => (/* binding */ GEN_AI_SERIALIZED_NAME),\n/* harmony export */   GEN_AI_SERIALIZED_SIGNATURE: () => (/* binding */ GEN_AI_SERIALIZED_SIGNATURE),\n/* harmony export */   GEN_AI_SYSTEM: () => (/* binding */ GEN_AI_SYSTEM),\n/* harmony export */   GEN_AI_SYSTEM_MESSAGE: () => (/* binding */ GEN_AI_SYSTEM_MESSAGE),\n/* harmony export */   GEN_AI_USAGE_INPUT_TOKENS: () => (/* binding */ GEN_AI_USAGE_INPUT_TOKENS),\n/* harmony export */   GEN_AI_USAGE_INPUT_TOKEN_DETAILS: () => (/* binding */ GEN_AI_USAGE_INPUT_TOKEN_DETAILS),\n/* harmony export */   GEN_AI_USAGE_OUTPUT_TOKENS: () => (/* binding */ GEN_AI_USAGE_OUTPUT_TOKENS),\n/* harmony export */   GEN_AI_USAGE_OUTPUT_TOKEN_DETAILS: () => (/* binding */ GEN_AI_USAGE_OUTPUT_TOKEN_DETAILS),\n/* harmony export */   GEN_AI_USAGE_TOTAL_TOKENS: () => (/* binding */ GEN_AI_USAGE_TOTAL_TOKENS),\n/* harmony export */   GEN_AI_USER_MESSAGE: () => (/* binding */ GEN_AI_USER_MESSAGE),\n/* harmony export */   LANGSMITH_DOTTED_ORDER: () => (/* binding */ LANGSMITH_DOTTED_ORDER),\n/* harmony export */   LANGSMITH_IS_ROOT: () => (/* binding */ LANGSMITH_IS_ROOT),\n/* harmony export */   LANGSMITH_METADATA: () => (/* binding */ LANGSMITH_METADATA),\n/* harmony export */   LANGSMITH_NAME: () => (/* binding */ LANGSMITH_NAME),\n/* harmony export */   LANGSMITH_PARENT_RUN_ID: () => (/* binding */ LANGSMITH_PARENT_RUN_ID),\n/* harmony export */   LANGSMITH_REFERENCE_EXAMPLE_ID: () => (/* binding */ LANGSMITH_REFERENCE_EXAMPLE_ID),\n/* harmony export */   LANGSMITH_REQUEST_HEADERS: () => (/* binding */ LANGSMITH_REQUEST_HEADERS),\n/* harmony export */   LANGSMITH_REQUEST_STREAMING: () => (/* binding */ LANGSMITH_REQUEST_STREAMING),\n/* harmony export */   LANGSMITH_RUNTIME: () => (/* binding */ LANGSMITH_RUNTIME),\n/* harmony export */   LANGSMITH_RUN_ID: () => (/* binding */ LANGSMITH_RUN_ID),\n/* harmony export */   LANGSMITH_RUN_TYPE: () => (/* binding */ LANGSMITH_RUN_TYPE),\n/* harmony export */   LANGSMITH_SESSION_ID: () => (/* binding */ LANGSMITH_SESSION_ID),\n/* harmony export */   LANGSMITH_SESSION_NAME: () => (/* binding */ LANGSMITH_SESSION_NAME),\n/* harmony export */   LANGSMITH_TAGS: () => (/* binding */ LANGSMITH_TAGS),\n/* harmony export */   LANGSMITH_TRACEABLE: () => (/* binding */ LANGSMITH_TRACEABLE),\n/* harmony export */   LANGSMITH_TRACEABLE_PARENT_OTEL_SPAN_ID: () => (/* binding */ LANGSMITH_TRACEABLE_PARENT_OTEL_SPAN_ID),\n/* harmony export */   LANGSMITH_TRACE_ID: () => (/* binding */ LANGSMITH_TRACE_ID),\n/* harmony export */   LANGSMITH_USAGE_METADATA: () => (/* binding */ LANGSMITH_USAGE_METADATA)\n/* harmony export */ });\n// OpenTelemetry GenAI semantic convention attribute names\nconst GEN_AI_OPERATION_NAME = \"gen_ai.operation.name\";\nconst GEN_AI_SYSTEM = \"gen_ai.system\";\nconst GEN_AI_REQUEST_MODEL = \"gen_ai.request.model\";\nconst GEN_AI_RESPONSE_MODEL = \"gen_ai.response.model\";\nconst GEN_AI_USAGE_INPUT_TOKENS = \"gen_ai.usage.input_tokens\";\nconst GEN_AI_USAGE_OUTPUT_TOKENS = \"gen_ai.usage.output_tokens\";\nconst GEN_AI_USAGE_TOTAL_TOKENS = \"gen_ai.usage.total_tokens\";\nconst GEN_AI_REQUEST_MAX_TOKENS = \"gen_ai.request.max_tokens\";\nconst GEN_AI_REQUEST_TEMPERATURE = \"gen_ai.request.temperature\";\nconst GEN_AI_REQUEST_TOP_P = \"gen_ai.request.top_p\";\nconst GEN_AI_REQUEST_FREQUENCY_PENALTY = \"gen_ai.request.frequency_penalty\";\nconst GEN_AI_REQUEST_PRESENCE_PENALTY = \"gen_ai.request.presence_penalty\";\nconst GEN_AI_RESPONSE_FINISH_REASONS = \"gen_ai.response.finish_reasons\";\nconst GENAI_PROMPT = \"gen_ai.prompt\";\nconst GENAI_COMPLETION = \"gen_ai.completion\";\nconst GEN_AI_REQUEST_EXTRA_QUERY = \"gen_ai.request.extra_query\";\nconst GEN_AI_REQUEST_EXTRA_BODY = \"gen_ai.request.extra_body\";\nconst GEN_AI_SERIALIZED_NAME = \"gen_ai.serialized.name\";\nconst GEN_AI_SERIALIZED_SIGNATURE = \"gen_ai.serialized.signature\";\nconst GEN_AI_SERIALIZED_DOC = \"gen_ai.serialized.doc\";\nconst GEN_AI_RESPONSE_ID = \"gen_ai.response.id\";\nconst GEN_AI_RESPONSE_SERVICE_TIER = \"gen_ai.response.service_tier\";\nconst GEN_AI_RESPONSE_SYSTEM_FINGERPRINT = \"gen_ai.response.system_fingerprint\";\nconst GEN_AI_USAGE_INPUT_TOKEN_DETAILS = \"gen_ai.usage.input_token_details\";\nconst GEN_AI_USAGE_OUTPUT_TOKEN_DETAILS = \"gen_ai.usage.output_token_details\";\n// LangSmith custom attributes\nconst LANGSMITH_SESSION_ID = \"langsmith.trace.session_id\";\nconst LANGSMITH_SESSION_NAME = \"langsmith.trace.session_name\";\nconst LANGSMITH_RUN_TYPE = \"langsmith.span.kind\";\nconst LANGSMITH_NAME = \"langsmith.trace.name\";\nconst LANGSMITH_METADATA = \"langsmith.metadata\";\nconst LANGSMITH_TAGS = \"langsmith.span.tags\";\nconst LANGSMITH_RUNTIME = \"langsmith.span.runtime\";\nconst LANGSMITH_REQUEST_STREAMING = \"langsmith.request.streaming\";\nconst LANGSMITH_REQUEST_HEADERS = \"langsmith.request.headers\";\nconst LANGSMITH_RUN_ID = \"langsmith.span.id\";\nconst LANGSMITH_TRACE_ID = \"langsmith.trace.id\";\nconst LANGSMITH_DOTTED_ORDER = \"langsmith.span.dotted_order\";\nconst LANGSMITH_PARENT_RUN_ID = \"langsmith.span.parent_id\";\nconst LANGSMITH_USAGE_METADATA = \"langsmith.usage_metadata\";\nconst LANGSMITH_REFERENCE_EXAMPLE_ID = \"langsmith.reference_example_id\";\nconst LANGSMITH_TRACEABLE = \"langsmith.traceable\";\nconst LANGSMITH_IS_ROOT = \"langsmith.is_root\";\nconst LANGSMITH_TRACEABLE_PARENT_OTEL_SPAN_ID = \"langsmith.traceable_parent_otel_span_id\";\n// GenAI event names\nconst GEN_AI_SYSTEM_MESSAGE = \"gen_ai.system.message\";\nconst GEN_AI_USER_MESSAGE = \"gen_ai.user.message\";\nconst GEN_AI_ASSISTANT_MESSAGE = \"gen_ai.assistant.message\";\nconst GEN_AI_CHOICE = \"gen_ai.choice\";\nconst AI_SDK_LLM_OPERATIONS = [\n    \"ai.generateText.doGenerate\",\n    \"ai.streamText.doStream\",\n    \"ai.generateObject.doGenerate\",\n    \"ai.streamObject.doStream\"\n];\nconst AI_SDK_TOOL_OPERATIONS = [\n    \"ai.toolCall\"\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9leHBlcmltZW50YWwvb3RlbC9jb25zdGFudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDBEQUEwRDtBQUNuRCxNQUFNQSx3QkFBd0Isd0JBQXdCO0FBQ3RELE1BQU1DLGdCQUFnQixnQkFBZ0I7QUFDdEMsTUFBTUMsdUJBQXVCLHVCQUF1QjtBQUNwRCxNQUFNQyx3QkFBd0Isd0JBQXdCO0FBQ3RELE1BQU1DLDRCQUE0Qiw0QkFBNEI7QUFDOUQsTUFBTUMsNkJBQTZCLDZCQUE2QjtBQUNoRSxNQUFNQyw0QkFBNEIsNEJBQTRCO0FBQzlELE1BQU1DLDRCQUE0Qiw0QkFBNEI7QUFDOUQsTUFBTUMsNkJBQTZCLDZCQUE2QjtBQUNoRSxNQUFNQyx1QkFBdUIsdUJBQXVCO0FBQ3BELE1BQU1DLG1DQUFtQyxtQ0FBbUM7QUFDNUUsTUFBTUMsa0NBQWtDLGtDQUFrQztBQUMxRSxNQUFNQyxpQ0FBaUMsaUNBQWlDO0FBQ3hFLE1BQU1DLGVBQWUsZ0JBQWdCO0FBQ3JDLE1BQU1DLG1CQUFtQixvQkFBb0I7QUFDN0MsTUFBTUMsNkJBQTZCLDZCQUE2QjtBQUNoRSxNQUFNQyw0QkFBNEIsNEJBQTRCO0FBQzlELE1BQU1DLHlCQUF5Qix5QkFBeUI7QUFDeEQsTUFBTUMsOEJBQThCLDhCQUE4QjtBQUNsRSxNQUFNQyx3QkFBd0Isd0JBQXdCO0FBQ3RELE1BQU1DLHFCQUFxQixxQkFBcUI7QUFDaEQsTUFBTUMsK0JBQStCLCtCQUErQjtBQUNwRSxNQUFNQyxxQ0FBcUMscUNBQXFDO0FBQ2hGLE1BQU1DLG1DQUFtQyxtQ0FBbUM7QUFDNUUsTUFBTUMsb0NBQW9DLG9DQUFvQztBQUNyRiw4QkFBOEI7QUFDdkIsTUFBTUMsdUJBQXVCLDZCQUE2QjtBQUMxRCxNQUFNQyx5QkFBeUIsK0JBQStCO0FBQzlELE1BQU1DLHFCQUFxQixzQkFBc0I7QUFDakQsTUFBTUMsaUJBQWlCLHVCQUF1QjtBQUM5QyxNQUFNQyxxQkFBcUIscUJBQXFCO0FBQ2hELE1BQU1DLGlCQUFpQixzQkFBc0I7QUFDN0MsTUFBTUMsb0JBQW9CLHlCQUF5QjtBQUNuRCxNQUFNQyw4QkFBOEIsOEJBQThCO0FBQ2xFLE1BQU1DLDRCQUE0Qiw0QkFBNEI7QUFDOUQsTUFBTUMsbUJBQW1CLG9CQUFvQjtBQUM3QyxNQUFNQyxxQkFBcUIscUJBQXFCO0FBQ2hELE1BQU1DLHlCQUF5Qiw4QkFBOEI7QUFDN0QsTUFBTUMsMEJBQTBCLDJCQUEyQjtBQUMzRCxNQUFNQywyQkFBMkIsMkJBQTJCO0FBQzVELE1BQU1DLGlDQUFpQyxpQ0FBaUM7QUFDeEUsTUFBTUMsc0JBQXNCLHNCQUFzQjtBQUNsRCxNQUFNQyxvQkFBb0Isb0JBQW9CO0FBQzlDLE1BQU1DLDBDQUEwQywwQ0FBMEM7QUFDakcsb0JBQW9CO0FBQ2IsTUFBTUMsd0JBQXdCLHdCQUF3QjtBQUN0RCxNQUFNQyxzQkFBc0Isc0JBQXNCO0FBQ2xELE1BQU1DLDJCQUEyQiwyQkFBMkI7QUFDNUQsTUFBTUMsZ0JBQWdCLGdCQUFnQjtBQUN0QyxNQUFNQyx3QkFBd0I7SUFDakM7SUFDQTtJQUNBO0lBQ0E7Q0FDSCxDQUFDO0FBQ0ssTUFBTUMseUJBQXlCO0lBQUM7Q0FBYyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9kaXN0L2V4cGVyaW1lbnRhbC9vdGVsL2NvbnN0YW50cy5qcz84ODBlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIE9wZW5UZWxlbWV0cnkgR2VuQUkgc2VtYW50aWMgY29udmVudGlvbiBhdHRyaWJ1dGUgbmFtZXNcbmV4cG9ydCBjb25zdCBHRU5fQUlfT1BFUkFUSU9OX05BTUUgPSBcImdlbl9haS5vcGVyYXRpb24ubmFtZVwiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9TWVNURU0gPSBcImdlbl9haS5zeXN0ZW1cIjtcbmV4cG9ydCBjb25zdCBHRU5fQUlfUkVRVUVTVF9NT0RFTCA9IFwiZ2VuX2FpLnJlcXVlc3QubW9kZWxcIjtcbmV4cG9ydCBjb25zdCBHRU5fQUlfUkVTUE9OU0VfTU9ERUwgPSBcImdlbl9haS5yZXNwb25zZS5tb2RlbFwiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9VU0FHRV9JTlBVVF9UT0tFTlMgPSBcImdlbl9haS51c2FnZS5pbnB1dF90b2tlbnNcIjtcbmV4cG9ydCBjb25zdCBHRU5fQUlfVVNBR0VfT1VUUFVUX1RPS0VOUyA9IFwiZ2VuX2FpLnVzYWdlLm91dHB1dF90b2tlbnNcIjtcbmV4cG9ydCBjb25zdCBHRU5fQUlfVVNBR0VfVE9UQUxfVE9LRU5TID0gXCJnZW5fYWkudXNhZ2UudG90YWxfdG9rZW5zXCI7XG5leHBvcnQgY29uc3QgR0VOX0FJX1JFUVVFU1RfTUFYX1RPS0VOUyA9IFwiZ2VuX2FpLnJlcXVlc3QubWF4X3Rva2Vuc1wiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9SRVFVRVNUX1RFTVBFUkFUVVJFID0gXCJnZW5fYWkucmVxdWVzdC50ZW1wZXJhdHVyZVwiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9SRVFVRVNUX1RPUF9QID0gXCJnZW5fYWkucmVxdWVzdC50b3BfcFwiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9SRVFVRVNUX0ZSRVFVRU5DWV9QRU5BTFRZID0gXCJnZW5fYWkucmVxdWVzdC5mcmVxdWVuY3lfcGVuYWx0eVwiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9SRVFVRVNUX1BSRVNFTkNFX1BFTkFMVFkgPSBcImdlbl9haS5yZXF1ZXN0LnByZXNlbmNlX3BlbmFsdHlcIjtcbmV4cG9ydCBjb25zdCBHRU5fQUlfUkVTUE9OU0VfRklOSVNIX1JFQVNPTlMgPSBcImdlbl9haS5yZXNwb25zZS5maW5pc2hfcmVhc29uc1wiO1xuZXhwb3J0IGNvbnN0IEdFTkFJX1BST01QVCA9IFwiZ2VuX2FpLnByb21wdFwiO1xuZXhwb3J0IGNvbnN0IEdFTkFJX0NPTVBMRVRJT04gPSBcImdlbl9haS5jb21wbGV0aW9uXCI7XG5leHBvcnQgY29uc3QgR0VOX0FJX1JFUVVFU1RfRVhUUkFfUVVFUlkgPSBcImdlbl9haS5yZXF1ZXN0LmV4dHJhX3F1ZXJ5XCI7XG5leHBvcnQgY29uc3QgR0VOX0FJX1JFUVVFU1RfRVhUUkFfQk9EWSA9IFwiZ2VuX2FpLnJlcXVlc3QuZXh0cmFfYm9keVwiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9TRVJJQUxJWkVEX05BTUUgPSBcImdlbl9haS5zZXJpYWxpemVkLm5hbWVcIjtcbmV4cG9ydCBjb25zdCBHRU5fQUlfU0VSSUFMSVpFRF9TSUdOQVRVUkUgPSBcImdlbl9haS5zZXJpYWxpemVkLnNpZ25hdHVyZVwiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9TRVJJQUxJWkVEX0RPQyA9IFwiZ2VuX2FpLnNlcmlhbGl6ZWQuZG9jXCI7XG5leHBvcnQgY29uc3QgR0VOX0FJX1JFU1BPTlNFX0lEID0gXCJnZW5fYWkucmVzcG9uc2UuaWRcIjtcbmV4cG9ydCBjb25zdCBHRU5fQUlfUkVTUE9OU0VfU0VSVklDRV9USUVSID0gXCJnZW5fYWkucmVzcG9uc2Uuc2VydmljZV90aWVyXCI7XG5leHBvcnQgY29uc3QgR0VOX0FJX1JFU1BPTlNFX1NZU1RFTV9GSU5HRVJQUklOVCA9IFwiZ2VuX2FpLnJlc3BvbnNlLnN5c3RlbV9maW5nZXJwcmludFwiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9VU0FHRV9JTlBVVF9UT0tFTl9ERVRBSUxTID0gXCJnZW5fYWkudXNhZ2UuaW5wdXRfdG9rZW5fZGV0YWlsc1wiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9VU0FHRV9PVVRQVVRfVE9LRU5fREVUQUlMUyA9IFwiZ2VuX2FpLnVzYWdlLm91dHB1dF90b2tlbl9kZXRhaWxzXCI7XG4vLyBMYW5nU21pdGggY3VzdG9tIGF0dHJpYnV0ZXNcbmV4cG9ydCBjb25zdCBMQU5HU01JVEhfU0VTU0lPTl9JRCA9IFwibGFuZ3NtaXRoLnRyYWNlLnNlc3Npb25faWRcIjtcbmV4cG9ydCBjb25zdCBMQU5HU01JVEhfU0VTU0lPTl9OQU1FID0gXCJsYW5nc21pdGgudHJhY2Uuc2Vzc2lvbl9uYW1lXCI7XG5leHBvcnQgY29uc3QgTEFOR1NNSVRIX1JVTl9UWVBFID0gXCJsYW5nc21pdGguc3Bhbi5raW5kXCI7XG5leHBvcnQgY29uc3QgTEFOR1NNSVRIX05BTUUgPSBcImxhbmdzbWl0aC50cmFjZS5uYW1lXCI7XG5leHBvcnQgY29uc3QgTEFOR1NNSVRIX01FVEFEQVRBID0gXCJsYW5nc21pdGgubWV0YWRhdGFcIjtcbmV4cG9ydCBjb25zdCBMQU5HU01JVEhfVEFHUyA9IFwibGFuZ3NtaXRoLnNwYW4udGFnc1wiO1xuZXhwb3J0IGNvbnN0IExBTkdTTUlUSF9SVU5USU1FID0gXCJsYW5nc21pdGguc3Bhbi5ydW50aW1lXCI7XG5leHBvcnQgY29uc3QgTEFOR1NNSVRIX1JFUVVFU1RfU1RSRUFNSU5HID0gXCJsYW5nc21pdGgucmVxdWVzdC5zdHJlYW1pbmdcIjtcbmV4cG9ydCBjb25zdCBMQU5HU01JVEhfUkVRVUVTVF9IRUFERVJTID0gXCJsYW5nc21pdGgucmVxdWVzdC5oZWFkZXJzXCI7XG5leHBvcnQgY29uc3QgTEFOR1NNSVRIX1JVTl9JRCA9IFwibGFuZ3NtaXRoLnNwYW4uaWRcIjtcbmV4cG9ydCBjb25zdCBMQU5HU01JVEhfVFJBQ0VfSUQgPSBcImxhbmdzbWl0aC50cmFjZS5pZFwiO1xuZXhwb3J0IGNvbnN0IExBTkdTTUlUSF9ET1RURURfT1JERVIgPSBcImxhbmdzbWl0aC5zcGFuLmRvdHRlZF9vcmRlclwiO1xuZXhwb3J0IGNvbnN0IExBTkdTTUlUSF9QQVJFTlRfUlVOX0lEID0gXCJsYW5nc21pdGguc3Bhbi5wYXJlbnRfaWRcIjtcbmV4cG9ydCBjb25zdCBMQU5HU01JVEhfVVNBR0VfTUVUQURBVEEgPSBcImxhbmdzbWl0aC51c2FnZV9tZXRhZGF0YVwiO1xuZXhwb3J0IGNvbnN0IExBTkdTTUlUSF9SRUZFUkVOQ0VfRVhBTVBMRV9JRCA9IFwibGFuZ3NtaXRoLnJlZmVyZW5jZV9leGFtcGxlX2lkXCI7XG5leHBvcnQgY29uc3QgTEFOR1NNSVRIX1RSQUNFQUJMRSA9IFwibGFuZ3NtaXRoLnRyYWNlYWJsZVwiO1xuZXhwb3J0IGNvbnN0IExBTkdTTUlUSF9JU19ST09UID0gXCJsYW5nc21pdGguaXNfcm9vdFwiO1xuZXhwb3J0IGNvbnN0IExBTkdTTUlUSF9UUkFDRUFCTEVfUEFSRU5UX09URUxfU1BBTl9JRCA9IFwibGFuZ3NtaXRoLnRyYWNlYWJsZV9wYXJlbnRfb3RlbF9zcGFuX2lkXCI7XG4vLyBHZW5BSSBldmVudCBuYW1lc1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9TWVNURU1fTUVTU0FHRSA9IFwiZ2VuX2FpLnN5c3RlbS5tZXNzYWdlXCI7XG5leHBvcnQgY29uc3QgR0VOX0FJX1VTRVJfTUVTU0FHRSA9IFwiZ2VuX2FpLnVzZXIubWVzc2FnZVwiO1xuZXhwb3J0IGNvbnN0IEdFTl9BSV9BU1NJU1RBTlRfTUVTU0FHRSA9IFwiZ2VuX2FpLmFzc2lzdGFudC5tZXNzYWdlXCI7XG5leHBvcnQgY29uc3QgR0VOX0FJX0NIT0lDRSA9IFwiZ2VuX2FpLmNob2ljZVwiO1xuZXhwb3J0IGNvbnN0IEFJX1NES19MTE1fT1BFUkFUSU9OUyA9IFtcbiAgICBcImFpLmdlbmVyYXRlVGV4dC5kb0dlbmVyYXRlXCIsXG4gICAgXCJhaS5zdHJlYW1UZXh0LmRvU3RyZWFtXCIsXG4gICAgXCJhaS5nZW5lcmF0ZU9iamVjdC5kb0dlbmVyYXRlXCIsXG4gICAgXCJhaS5zdHJlYW1PYmplY3QuZG9TdHJlYW1cIixcbl07XG5leHBvcnQgY29uc3QgQUlfU0RLX1RPT0xfT1BFUkFUSU9OUyA9IFtcImFpLnRvb2xDYWxsXCJdO1xuIl0sIm5hbWVzIjpbIkdFTl9BSV9PUEVSQVRJT05fTkFNRSIsIkdFTl9BSV9TWVNURU0iLCJHRU5fQUlfUkVRVUVTVF9NT0RFTCIsIkdFTl9BSV9SRVNQT05TRV9NT0RFTCIsIkdFTl9BSV9VU0FHRV9JTlBVVF9UT0tFTlMiLCJHRU5fQUlfVVNBR0VfT1VUUFVUX1RPS0VOUyIsIkdFTl9BSV9VU0FHRV9UT1RBTF9UT0tFTlMiLCJHRU5fQUlfUkVRVUVTVF9NQVhfVE9LRU5TIiwiR0VOX0FJX1JFUVVFU1RfVEVNUEVSQVRVUkUiLCJHRU5fQUlfUkVRVUVTVF9UT1BfUCIsIkdFTl9BSV9SRVFVRVNUX0ZSRVFVRU5DWV9QRU5BTFRZIiwiR0VOX0FJX1JFUVVFU1RfUFJFU0VOQ0VfUEVOQUxUWSIsIkdFTl9BSV9SRVNQT05TRV9GSU5JU0hfUkVBU09OUyIsIkdFTkFJX1BST01QVCIsIkdFTkFJX0NPTVBMRVRJT04iLCJHRU5fQUlfUkVRVUVTVF9FWFRSQV9RVUVSWSIsIkdFTl9BSV9SRVFVRVNUX0VYVFJBX0JPRFkiLCJHRU5fQUlfU0VSSUFMSVpFRF9OQU1FIiwiR0VOX0FJX1NFUklBTElaRURfU0lHTkFUVVJFIiwiR0VOX0FJX1NFUklBTElaRURfRE9DIiwiR0VOX0FJX1JFU1BPTlNFX0lEIiwiR0VOX0FJX1JFU1BPTlNFX1NFUlZJQ0VfVElFUiIsIkdFTl9BSV9SRVNQT05TRV9TWVNURU1fRklOR0VSUFJJTlQiLCJHRU5fQUlfVVNBR0VfSU5QVVRfVE9LRU5fREVUQUlMUyIsIkdFTl9BSV9VU0FHRV9PVVRQVVRfVE9LRU5fREVUQUlMUyIsIkxBTkdTTUlUSF9TRVNTSU9OX0lEIiwiTEFOR1NNSVRIX1NFU1NJT05fTkFNRSIsIkxBTkdTTUlUSF9SVU5fVFlQRSIsIkxBTkdTTUlUSF9OQU1FIiwiTEFOR1NNSVRIX01FVEFEQVRBIiwiTEFOR1NNSVRIX1RBR1MiLCJMQU5HU01JVEhfUlVOVElNRSIsIkxBTkdTTUlUSF9SRVFVRVNUX1NUUkVBTUlORyIsIkxBTkdTTUlUSF9SRVFVRVNUX0hFQURFUlMiLCJMQU5HU01JVEhfUlVOX0lEIiwiTEFOR1NNSVRIX1RSQUNFX0lEIiwiTEFOR1NNSVRIX0RPVFRFRF9PUkRFUiIsIkxBTkdTTUlUSF9QQVJFTlRfUlVOX0lEIiwiTEFOR1NNSVRIX1VTQUdFX01FVEFEQVRBIiwiTEFOR1NNSVRIX1JFRkVSRU5DRV9FWEFNUExFX0lEIiwiTEFOR1NNSVRIX1RSQUNFQUJMRSIsIkxBTkdTTUlUSF9JU19ST09UIiwiTEFOR1NNSVRIX1RSQUNFQUJMRV9QQVJFTlRfT1RFTF9TUEFOX0lEIiwiR0VOX0FJX1NZU1RFTV9NRVNTQUdFIiwiR0VOX0FJX1VTRVJfTUVTU0FHRSIsIkdFTl9BSV9BU1NJU1RBTlRfTUVTU0FHRSIsIkdFTl9BSV9DSE9JQ0UiLCJBSV9TREtfTExNX09QRVJBVElPTlMiLCJBSV9TREtfVE9PTF9PUEVSQVRJT05TIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/experimental/otel/constants.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/experimental/otel/translator.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/experimental/otel/translator.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangSmithToOTELTranslator: () => (/* binding */ LangSmithToOTELTranslator)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/experimental/otel/constants.js\");\n/* harmony import */ var _singletons_otel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../singletons/otel.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/otel.js\");\n\n\nconst WELL_KNOWN_OPERATION_NAMES = {\n    llm: \"chat\",\n    tool: \"execute_tool\",\n    retriever: \"embeddings\",\n    embedding: \"embeddings\",\n    prompt: \"chat\"\n};\nfunction getOperationName(runType) {\n    return WELL_KNOWN_OPERATION_NAMES[runType] || runType;\n}\nclass LangSmithToOTELTranslator {\n    constructor(){\n        Object.defineProperty(this, \"spans\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n    }\n    exportBatch(operations, otelContextMap) {\n        for (const op of operations){\n            try {\n                if (!op.run) {\n                    continue;\n                }\n                if (op.operation === \"post\") {\n                    const span = this.createSpanForRun(op, op.run, otelContextMap.get(op.id));\n                    if (span && !op.run.end_time) {\n                        this.spans.set(op.id, span);\n                    }\n                } else {\n                    this.updateSpanForRun(op, op.run);\n                }\n            } catch (e) {\n                console.error(`Error processing operation ${op.id}:`, e);\n            }\n        }\n    }\n    createSpanForRun(op, runInfo, otelContext) {\n        const activeSpan = otelContext && (0,_singletons_otel_js__WEBPACK_IMPORTED_MODULE_1__.getOTELTrace)().getSpan(otelContext);\n        if (!activeSpan) {\n            return;\n        }\n        try {\n            return this.finishSpanSetup(activeSpan, runInfo, op);\n        } catch (e) {\n            console.error(`Failed to create span for run ${op.id}:`, e);\n            return undefined;\n        }\n    }\n    finishSpanSetup(span, runInfo, op) {\n        // Set all attributes\n        this.setSpanAttributes(span, runInfo, op);\n        // Set status based on error\n        if (runInfo.error) {\n            span.setStatus({\n                code: 2\n            }); // ERROR status\n            span.recordException(new Error(runInfo.error));\n        } else {\n            span.setStatus({\n                code: 1\n            }); // OK status\n        }\n        // End the span if end_time is present\n        if (runInfo.end_time) {\n            span.end(new Date(runInfo.end_time));\n        }\n        return span;\n    }\n    updateSpanForRun(op, runInfo) {\n        try {\n            const span = this.spans.get(op.id);\n            if (!span) {\n                console.debug(`No span found for run ${op.id} during update`);\n                return;\n            }\n            // Update attributes\n            this.setSpanAttributes(span, runInfo, op);\n            // Update status based on error\n            if (runInfo.error) {\n                span.setStatus({\n                    code: 2\n                }); // ERROR status\n                span.recordException(new Error(runInfo.error));\n            } else {\n                span.setStatus({\n                    code: 1\n                }); // OK status\n            }\n            // End the span if end_time is present\n            const endTime = runInfo.end_time;\n            if (endTime) {\n                span.end(new Date(endTime));\n                this.spans.delete(op.id);\n            }\n        } catch (e) {\n            console.error(`Failed to update span for run ${op.id}:`, e);\n        }\n    }\n    extractModelName(runInfo) {\n        // Try to get model name from metadata\n        if (runInfo.extra?.metadata) {\n            const metadata = runInfo.extra.metadata;\n            // First check for ls_model_name in metadata\n            if (metadata.ls_model_name) {\n                return metadata.ls_model_name;\n            }\n            // Then check invocation_params for model info\n            if (metadata.invocation_params) {\n                const invocationParams = metadata.invocation_params;\n                if (invocationParams.model) {\n                    return invocationParams.model;\n                } else if (invocationParams.model_name) {\n                    return invocationParams.model_name;\n                }\n            }\n        }\n        return;\n    }\n    setSpanAttributes(span, runInfo, op) {\n        if (\"run_type\" in runInfo && runInfo.run_type) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.LANGSMITH_RUN_TYPE, runInfo.run_type);\n            // Set GenAI attributes according to OTEL semantic conventions\n            const operationName = getOperationName(runInfo.run_type || \"chain\");\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_OPERATION_NAME, operationName);\n        }\n        if (\"name\" in runInfo && runInfo.name) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.LANGSMITH_NAME, runInfo.name);\n        }\n        if (\"session_id\" in runInfo && runInfo.session_id) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.LANGSMITH_SESSION_ID, runInfo.session_id);\n        }\n        if (\"session_name\" in runInfo && runInfo.session_name) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.LANGSMITH_SESSION_NAME, runInfo.session_name);\n        }\n        // Set gen_ai.system\n        this.setGenAiSystem(span, runInfo);\n        // Set model name if available\n        const modelName = this.extractModelName(runInfo);\n        if (modelName) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_REQUEST_MODEL, modelName);\n        }\n        // Set token usage information\n        if (\"prompt_tokens\" in runInfo && typeof runInfo.prompt_tokens === \"number\") {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_USAGE_INPUT_TOKENS, runInfo.prompt_tokens);\n        }\n        if (\"completion_tokens\" in runInfo && typeof runInfo.completion_tokens === \"number\") {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_USAGE_OUTPUT_TOKENS, runInfo.completion_tokens);\n        }\n        if (\"total_tokens\" in runInfo && typeof runInfo.total_tokens === \"number\") {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_USAGE_TOTAL_TOKENS, runInfo.total_tokens);\n        }\n        // Set other parameters from invocation_params\n        this.setInvocationParameters(span, runInfo);\n        // Set metadata and tags if available\n        const metadata = runInfo.extra?.metadata || {};\n        for (const [key, value] of Object.entries(metadata)){\n            if (value !== null && value !== undefined) {\n                span.setAttribute(`${_constants_js__WEBPACK_IMPORTED_MODULE_0__.LANGSMITH_METADATA}.${key}`, String(value));\n            }\n        }\n        const tags = runInfo.tags;\n        if (tags && Array.isArray(tags)) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.LANGSMITH_TAGS, tags.join(\", \"));\n        } else if (tags) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.LANGSMITH_TAGS, String(tags));\n        }\n        // Support additional serialized attributes, if present\n        if (\"serialized\" in runInfo && typeof runInfo.serialized === \"object\") {\n            const serialized = runInfo.serialized;\n            if (serialized.name) {\n                span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_SERIALIZED_NAME, String(serialized.name));\n            }\n            if (serialized.signature) {\n                span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_SERIALIZED_SIGNATURE, String(serialized.signature));\n            }\n            if (serialized.doc) {\n                span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_SERIALIZED_DOC, String(serialized.doc));\n            }\n        }\n        // Set inputs/outputs if available\n        this.setIOAttributes(span, op);\n    }\n    setGenAiSystem(span, runInfo) {\n        // Default to \"langchain\" if we can't determine the system\n        let system = \"langchain\";\n        // Extract model name to determine the system\n        const modelName = this.extractModelName(runInfo);\n        if (modelName) {\n            const modelLower = modelName.toLowerCase();\n            if (modelLower.includes(\"anthropic\") || modelLower.startsWith(\"claude\")) {\n                system = \"anthropic\";\n            } else if (modelLower.includes(\"bedrock\")) {\n                system = \"aws.bedrock\";\n            } else if (modelLower.includes(\"azure\") && modelLower.includes(\"openai\")) {\n                system = \"az.ai.openai\";\n            } else if (modelLower.includes(\"azure\") && modelLower.includes(\"inference\")) {\n                system = \"az.ai.inference\";\n            } else if (modelLower.includes(\"cohere\")) {\n                system = \"cohere\";\n            } else if (modelLower.includes(\"deepseek\")) {\n                system = \"deepseek\";\n            } else if (modelLower.includes(\"gemini\")) {\n                system = \"gemini\";\n            } else if (modelLower.includes(\"groq\")) {\n                system = \"groq\";\n            } else if (modelLower.includes(\"watson\") || modelLower.includes(\"ibm\")) {\n                system = \"ibm.watsonx.ai\";\n            } else if (modelLower.includes(\"mistral\")) {\n                system = \"mistral_ai\";\n            } else if (modelLower.includes(\"gpt\") || modelLower.includes(\"openai\")) {\n                system = \"openai\";\n            } else if (modelLower.includes(\"perplexity\") || modelLower.includes(\"sonar\")) {\n                system = \"perplexity\";\n            } else if (modelLower.includes(\"vertex\")) {\n                system = \"vertex_ai\";\n            } else if (modelLower.includes(\"xai\") || modelLower.includes(\"grok\")) {\n                system = \"xai\";\n            }\n        }\n        span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_SYSTEM, system);\n    }\n    setInvocationParameters(span, runInfo) {\n        if (!runInfo.extra?.metadata?.invocation_params) {\n            return;\n        }\n        const invocationParams = runInfo.extra.metadata.invocation_params;\n        // Set relevant invocation parameters\n        if (invocationParams.max_tokens !== undefined) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_REQUEST_MAX_TOKENS, invocationParams.max_tokens);\n        }\n        if (invocationParams.temperature !== undefined) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_REQUEST_TEMPERATURE, invocationParams.temperature);\n        }\n        if (invocationParams.top_p !== undefined) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_REQUEST_TOP_P, invocationParams.top_p);\n        }\n        if (invocationParams.frequency_penalty !== undefined) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_REQUEST_FREQUENCY_PENALTY, invocationParams.frequency_penalty);\n        }\n        if (invocationParams.presence_penalty !== undefined) {\n            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_REQUEST_PRESENCE_PENALTY, invocationParams.presence_penalty);\n        }\n    }\n    setIOAttributes(span, op) {\n        if (op.run.inputs) {\n            try {\n                const inputs = op.run.inputs;\n                if (typeof inputs === \"object\" && inputs !== null) {\n                    if (inputs.model && Array.isArray(inputs.messages)) {\n                        span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_REQUEST_MODEL, inputs.model);\n                    }\n                    // Set additional request attributes if available\n                    if (inputs.stream !== undefined) {\n                        span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.LANGSMITH_REQUEST_STREAMING, inputs.stream);\n                    }\n                    if (inputs.extra_headers) {\n                        span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.LANGSMITH_REQUEST_HEADERS, JSON.stringify(inputs.extra_headers));\n                    }\n                    if (inputs.extra_query) {\n                        span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_REQUEST_EXTRA_QUERY, JSON.stringify(inputs.extra_query));\n                    }\n                    if (inputs.extra_body) {\n                        span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_REQUEST_EXTRA_BODY, JSON.stringify(inputs.extra_body));\n                    }\n                }\n                span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GENAI_PROMPT, JSON.stringify(inputs));\n            } catch (e) {\n                console.debug(`Failed to process inputs for run ${op.id}`, e);\n            }\n        }\n        if (op.run.outputs) {\n            try {\n                const outputs = op.run.outputs;\n                // Extract token usage from outputs (for LLM runs)\n                const tokenUsage = this.getUnifiedRunTokens(outputs);\n                if (tokenUsage) {\n                    span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_USAGE_INPUT_TOKENS, tokenUsage[0]);\n                    span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_USAGE_OUTPUT_TOKENS, tokenUsage[1]);\n                    span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_USAGE_TOTAL_TOKENS, tokenUsage[0] + tokenUsage[1]);\n                }\n                if (outputs && typeof outputs === \"object\") {\n                    if (outputs.model) {\n                        span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_RESPONSE_MODEL, String(outputs.model));\n                    }\n                    // Extract additional response attributes\n                    if (outputs.id) {\n                        span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_RESPONSE_ID, outputs.id);\n                    }\n                    if (outputs.choices && Array.isArray(outputs.choices)) {\n                        const finishReasons = outputs.choices// eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        .map((choice)=>choice.finish_reason)// eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        .filter((reason)=>reason).map(String);\n                        if (finishReasons.length > 0) {\n                            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_RESPONSE_FINISH_REASONS, finishReasons.join(\", \"));\n                        }\n                    }\n                    if (outputs.service_tier) {\n                        span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_RESPONSE_SERVICE_TIER, outputs.service_tier);\n                    }\n                    if (outputs.system_fingerprint) {\n                        span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_RESPONSE_SYSTEM_FINGERPRINT, outputs.system_fingerprint);\n                    }\n                    if (outputs.usage_metadata && typeof outputs.usage_metadata === \"object\") {\n                        const usageMetadata = outputs.usage_metadata;\n                        if (usageMetadata.input_token_details) {\n                            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_USAGE_INPUT_TOKEN_DETAILS, JSON.stringify(usageMetadata.input_token_details));\n                        }\n                        if (usageMetadata.output_token_details) {\n                            span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GEN_AI_USAGE_OUTPUT_TOKEN_DETAILS, JSON.stringify(usageMetadata.output_token_details));\n                        }\n                    }\n                }\n                span.setAttribute(_constants_js__WEBPACK_IMPORTED_MODULE_0__.GENAI_COMPLETION, JSON.stringify(outputs));\n            } catch (e) {\n                console.debug(`Failed to process outputs for run ${op.id}`, e);\n            }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getUnifiedRunTokens(outputs) {\n        if (!outputs) {\n            return null;\n        }\n        // Search in non-generations lists\n        let tokenUsage = this.extractUnifiedRunTokens(outputs.usage_metadata);\n        if (tokenUsage) {\n            return tokenUsage;\n        }\n        // Find if direct kwarg in outputs\n        const keys = Object.keys(outputs);\n        for (const key of keys){\n            const haystack = outputs[key];\n            if (!haystack || typeof haystack !== \"object\") {\n                continue;\n            }\n            tokenUsage = this.extractUnifiedRunTokens(haystack.usage_metadata);\n            if (tokenUsage) {\n                return tokenUsage;\n            }\n            if (haystack.lc === 1 && haystack.kwargs && typeof haystack.kwargs === \"object\") {\n                tokenUsage = this.extractUnifiedRunTokens(haystack.kwargs.usage_metadata);\n                if (tokenUsage) {\n                    return tokenUsage;\n                }\n            }\n        }\n        // Find in generations\n        const generations = outputs.generations || [];\n        if (!Array.isArray(generations)) {\n            return null;\n        }\n        const flatGenerations = Array.isArray(generations[0]) ? generations.flat() : generations;\n        for (const generation of flatGenerations){\n            if (typeof generation === \"object\" && generation.message && typeof generation.message === \"object\" && generation.message.kwargs && typeof generation.message.kwargs === \"object\") {\n                tokenUsage = this.extractUnifiedRunTokens(generation.message.kwargs.usage_metadata);\n                if (tokenUsage) {\n                    return tokenUsage;\n                }\n            }\n        }\n        return null;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    extractUnifiedRunTokens(outputs) {\n        if (!outputs || typeof outputs !== \"object\") {\n            return null;\n        }\n        if (typeof outputs.input_tokens !== \"number\" || typeof outputs.output_tokens !== \"number\") {\n            return null;\n        }\n        return [\n            outputs.input_tokens,\n            outputs.output_tokens\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9leHBlcmltZW50YWwvb3RlbC90cmFuc2xhdG9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QztBQUNZO0FBQ3hELE1BQU1FLDZCQUE2QjtJQUMvQkMsS0FBSztJQUNMQyxNQUFNO0lBQ05DLFdBQVc7SUFDWEMsV0FBVztJQUNYQyxRQUFRO0FBQ1o7QUFDQSxTQUFTQyxpQkFBaUJDLE9BQU87SUFDN0IsT0FBT1AsMEJBQTBCLENBQUNPLFFBQVEsSUFBSUE7QUFDbEQ7QUFDTyxNQUFNQztJQUNUQyxhQUFjO1FBQ1ZDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxJQUFJQztRQUNmO0lBQ0o7SUFDQUMsWUFBWUMsVUFBVSxFQUFFQyxjQUFjLEVBQUU7UUFDcEMsS0FBSyxNQUFNQyxNQUFNRixXQUFZO1lBQ3pCLElBQUk7Z0JBQ0EsSUFBSSxDQUFDRSxHQUFHQyxHQUFHLEVBQUU7b0JBQ1Q7Z0JBQ0o7Z0JBQ0EsSUFBSUQsR0FBR0UsU0FBUyxLQUFLLFFBQVE7b0JBQ3pCLE1BQU1DLE9BQU8sSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQ0osSUFBSUEsR0FBR0MsR0FBRyxFQUFFRixlQUFlTSxHQUFHLENBQUNMLEdBQUdNLEVBQUU7b0JBQ3ZFLElBQUlILFFBQVEsQ0FBQ0gsR0FBR0MsR0FBRyxDQUFDTSxRQUFRLEVBQUU7d0JBQzFCLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxHQUFHLENBQUNULEdBQUdNLEVBQUUsRUFBRUg7b0JBQzFCO2dCQUNKLE9BQ0s7b0JBQ0QsSUFBSSxDQUFDTyxnQkFBZ0IsQ0FBQ1YsSUFBSUEsR0FBR0MsR0FBRztnQkFDcEM7WUFDSixFQUNBLE9BQU9VLEdBQUc7Z0JBQ05DLFFBQVFDLEtBQUssQ0FBQyxDQUFDLDJCQUEyQixFQUFFYixH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QUN0QkEsV0FBV0MsT0FBTyxJQUNsQixPQUFPRCxXQUFXQyxPQUFPLEtBQUssWUFDOUJELFdBQVdDLE9BQU8sQ0FBQ0wsTUFBTSxJQUN6QixPQUFPSSxXQUFXQyxPQUFPLENBQUNMLE1BQU0sS0FBSyxVQUFVO2dCQUMvQzVCLGFBQWEsSUFBSSxDQUFDd0IsdUJBQXVCLENBQUNRLFdBQVdDLE9BQU8sQ0FBQ0wsTUFBTSxDQUFDWCxjQUFjO2dCQUNsRixJQUFJakIsWUFBWTtvQkFDWixPQUFPQTtnQkFDWDtZQUNKO1FBQ0o7UUFDQSxPQUFPO0lBQ1g7SUFDQSw4REFBOEQ7SUFDOUR3Qix3QkFBd0J6QixPQUFPLEVBQUU7UUFDN0IsSUFBSSxDQUFDQSxXQUFXLE9BQU9BLFlBQVksVUFBVTtZQUN6QyxPQUFPO1FBQ1g7UUFDQSxJQUFJLE9BQU9BLFFBQVFtQyxZQUFZLEtBQUssWUFDaEMsT0FBT25DLFFBQVFvQyxhQUFhLEtBQUssVUFBVTtZQUMzQyxPQUFPO1FBQ1g7UUFDQSxPQUFPO1lBQUNwQyxRQUFRbUMsWUFBWTtZQUFFbkMsUUFBUW9DLGFBQWE7U0FBQztJQUN4RDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9kaXN0L2V4cGVyaW1lbnRhbC9vdGVsL3RyYW5zbGF0b3IuanM/MmJlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBnZXRPVEVMVHJhY2UgfSBmcm9tIFwiLi4vLi4vc2luZ2xldG9ucy9vdGVsLmpzXCI7XG5jb25zdCBXRUxMX0tOT1dOX09QRVJBVElPTl9OQU1FUyA9IHtcbiAgICBsbG06IFwiY2hhdFwiLFxuICAgIHRvb2w6IFwiZXhlY3V0ZV90b29sXCIsXG4gICAgcmV0cmlldmVyOiBcImVtYmVkZGluZ3NcIixcbiAgICBlbWJlZGRpbmc6IFwiZW1iZWRkaW5nc1wiLFxuICAgIHByb21wdDogXCJjaGF0XCIsXG59O1xuZnVuY3Rpb24gZ2V0T3BlcmF0aW9uTmFtZShydW5UeXBlKSB7XG4gICAgcmV0dXJuIFdFTExfS05PV05fT1BFUkFUSU9OX05BTUVTW3J1blR5cGVdIHx8IHJ1blR5cGU7XG59XG5leHBvcnQgY2xhc3MgTGFuZ1NtaXRoVG9PVEVMVHJhbnNsYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNwYW5zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4cG9ydEJhdGNoKG9wZXJhdGlvbnMsIG90ZWxDb250ZXh0TWFwKSB7XG4gICAgICAgIGZvciAoY29uc3Qgb3Agb2Ygb3BlcmF0aW9ucykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wLnJ1bikge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wLm9wZXJhdGlvbiA9PT0gXCJwb3N0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BhbiA9IHRoaXMuY3JlYXRlU3BhbkZvclJ1bihvcCwgb3AucnVuLCBvdGVsQ29udGV4dE1hcC5nZXQob3AuaWQpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwYW4gJiYgIW9wLnJ1bi5lbmRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGFucy5zZXQob3AuaWQsIHNwYW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNwYW5Gb3JSdW4ob3AsIG9wLnJ1bik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIG9wZXJhdGlvbiAke29wLmlkfTpgLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVTcGFuRm9yUnVuKG9wLCBydW5JbmZvLCBvdGVsQ29udGV4dCkge1xuICAgICAgICBjb25zdCBhY3RpdmVTcGFuID0gb3RlbENvbnRleHQgJiYgZ2V0T1RFTFRyYWNlKCkuZ2V0U3BhbihvdGVsQ29udGV4dCk7XG4gICAgICAgIGlmICghYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5pc2hTcGFuU2V0dXAoYWN0aXZlU3BhbiwgcnVuSW5mbywgb3ApO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIHNwYW4gZm9yIHJ1biAke29wLmlkfTpgLCBlKTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluaXNoU3BhblNldHVwKHNwYW4sIHJ1bkluZm8sIG9wKSB7XG4gICAgICAgIC8vIFNldCBhbGwgYXR0cmlidXRlc1xuICAgICAgICB0aGlzLnNldFNwYW5BdHRyaWJ1dGVzKHNwYW4sIHJ1bkluZm8sIG9wKTtcbiAgICAgICAgLy8gU2V0IHN0YXR1cyBiYXNlZCBvbiBlcnJvclxuICAgICAgICBpZiAocnVuSW5mby5lcnJvcikge1xuICAgICAgICAgICAgc3Bhbi5zZXRTdGF0dXMoeyBjb2RlOiAyIH0pOyAvLyBFUlJPUiBzdGF0dXNcbiAgICAgICAgICAgIHNwYW4ucmVjb3JkRXhjZXB0aW9uKG5ldyBFcnJvcihydW5JbmZvLmVycm9yKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzcGFuLnNldFN0YXR1cyh7IGNvZGU6IDEgfSk7IC8vIE9LIHN0YXR1c1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuZCB0aGUgc3BhbiBpZiBlbmRfdGltZSBpcyBwcmVzZW50XG4gICAgICAgIGlmIChydW5JbmZvLmVuZF90aW1lKSB7XG4gICAgICAgICAgICBzcGFuLmVuZChuZXcgRGF0ZShydW5JbmZvLmVuZF90aW1lKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxuICAgIHVwZGF0ZVNwYW5Gb3JSdW4ob3AsIHJ1bkluZm8pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNwYW4gPSB0aGlzLnNwYW5zLmdldChvcC5pZCk7XG4gICAgICAgICAgICBpZiAoIXNwYW4pIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKGBObyBzcGFuIGZvdW5kIGZvciBydW4gJHtvcC5pZH0gZHVyaW5nIHVwZGF0ZWApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICB0aGlzLnNldFNwYW5BdHRyaWJ1dGVzKHNwYW4sIHJ1bkluZm8sIG9wKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBzdGF0dXMgYmFzZWQgb24gZXJyb3JcbiAgICAgICAgICAgIGlmIChydW5JbmZvLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRTdGF0dXMoeyBjb2RlOiAyIH0pOyAvLyBFUlJPUiBzdGF0dXNcbiAgICAgICAgICAgICAgICBzcGFuLnJlY29yZEV4Y2VwdGlvbihuZXcgRXJyb3IocnVuSW5mby5lcnJvcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRTdGF0dXMoeyBjb2RlOiAxIH0pOyAvLyBPSyBzdGF0dXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEVuZCB0aGUgc3BhbiBpZiBlbmRfdGltZSBpcyBwcmVzZW50XG4gICAgICAgICAgICBjb25zdCBlbmRUaW1lID0gcnVuSW5mby5lbmRfdGltZTtcbiAgICAgICAgICAgIGlmIChlbmRUaW1lKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5lbmQobmV3IERhdGUoZW5kVGltZSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3BhbnMuZGVsZXRlKG9wLmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHVwZGF0ZSBzcGFuIGZvciBydW4gJHtvcC5pZH06YCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXh0cmFjdE1vZGVsTmFtZShydW5JbmZvKSB7XG4gICAgICAgIC8vIFRyeSB0byBnZXQgbW9kZWwgbmFtZSBmcm9tIG1ldGFkYXRhXG4gICAgICAgIGlmIChydW5JbmZvLmV4dHJhPy5tZXRhZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBydW5JbmZvLmV4dHJhLm1ldGFkYXRhO1xuICAgICAgICAgICAgLy8gRmlyc3QgY2hlY2sgZm9yIGxzX21vZGVsX25hbWUgaW4gbWV0YWRhdGFcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YS5sc19tb2RlbF9uYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhLmxzX21vZGVsX25hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGVuIGNoZWNrIGludm9jYXRpb25fcGFyYW1zIGZvciBtb2RlbCBpbmZvXG4gICAgICAgICAgICBpZiAobWV0YWRhdGEuaW52b2NhdGlvbl9wYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnZvY2F0aW9uUGFyYW1zID0gbWV0YWRhdGEuaW52b2NhdGlvbl9wYXJhbXM7XG4gICAgICAgICAgICAgICAgaWYgKGludm9jYXRpb25QYXJhbXMubW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludm9jYXRpb25QYXJhbXMubW9kZWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGludm9jYXRpb25QYXJhbXMubW9kZWxfbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW52b2NhdGlvblBhcmFtcy5tb2RlbF9uYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldFNwYW5BdHRyaWJ1dGVzKHNwYW4sIHJ1bkluZm8sIG9wKSB7XG4gICAgICAgIGlmIChcInJ1bl90eXBlXCIgaW4gcnVuSW5mbyAmJiBydW5JbmZvLnJ1bl90eXBlKSB7XG4gICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShjb25zdGFudHMuTEFOR1NNSVRIX1JVTl9UWVBFLCBydW5JbmZvLnJ1bl90eXBlKTtcbiAgICAgICAgICAgIC8vIFNldCBHZW5BSSBhdHRyaWJ1dGVzIGFjY29yZGluZyB0byBPVEVMIHNlbWFudGljIGNvbnZlbnRpb25zXG4gICAgICAgICAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gZ2V0T3BlcmF0aW9uTmFtZShydW5JbmZvLnJ1bl90eXBlIHx8IFwiY2hhaW5cIik7XG4gICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShjb25zdGFudHMuR0VOX0FJX09QRVJBVElPTl9OQU1FLCBvcGVyYXRpb25OYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJuYW1lXCIgaW4gcnVuSW5mbyAmJiBydW5JbmZvLm5hbWUpIHtcbiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5MQU5HU01JVEhfTkFNRSwgcnVuSW5mby5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJzZXNzaW9uX2lkXCIgaW4gcnVuSW5mbyAmJiBydW5JbmZvLnNlc3Npb25faWQpIHtcbiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5MQU5HU01JVEhfU0VTU0lPTl9JRCwgcnVuSW5mby5zZXNzaW9uX2lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJzZXNzaW9uX25hbWVcIiBpbiBydW5JbmZvICYmIHJ1bkluZm8uc2Vzc2lvbl9uYW1lKSB7XG4gICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShjb25zdGFudHMuTEFOR1NNSVRIX1NFU1NJT05fTkFNRSwgcnVuSW5mby5zZXNzaW9uX25hbWUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNldCBnZW5fYWkuc3lzdGVtXG4gICAgICAgIHRoaXMuc2V0R2VuQWlTeXN0ZW0oc3BhbiwgcnVuSW5mbyk7XG4gICAgICAgIC8vIFNldCBtb2RlbCBuYW1lIGlmIGF2YWlsYWJsZVxuICAgICAgICBjb25zdCBtb2RlbE5hbWUgPSB0aGlzLmV4dHJhY3RNb2RlbE5hbWUocnVuSW5mbyk7XG4gICAgICAgIGlmIChtb2RlbE5hbWUpIHtcbiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfUkVRVUVTVF9NT0RFTCwgbW9kZWxOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgdG9rZW4gdXNhZ2UgaW5mb3JtYXRpb25cbiAgICAgICAgaWYgKFwicHJvbXB0X3Rva2Vuc1wiIGluIHJ1bkluZm8gJiZcbiAgICAgICAgICAgIHR5cGVvZiBydW5JbmZvLnByb21wdF90b2tlbnMgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfVVNBR0VfSU5QVVRfVE9LRU5TLCBydW5JbmZvLnByb21wdF90b2tlbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcImNvbXBsZXRpb25fdG9rZW5zXCIgaW4gcnVuSW5mbyAmJlxuICAgICAgICAgICAgdHlwZW9mIHJ1bkluZm8uY29tcGxldGlvbl90b2tlbnMgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfVVNBR0VfT1VUUFVUX1RPS0VOUywgcnVuSW5mby5jb21wbGV0aW9uX3Rva2Vucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwidG90YWxfdG9rZW5zXCIgaW4gcnVuSW5mbyAmJiB0eXBlb2YgcnVuSW5mby50b3RhbF90b2tlbnMgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfVVNBR0VfVE9UQUxfVE9LRU5TLCBydW5JbmZvLnRvdGFsX3Rva2Vucyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IG90aGVyIHBhcmFtZXRlcnMgZnJvbSBpbnZvY2F0aW9uX3BhcmFtc1xuICAgICAgICB0aGlzLnNldEludm9jYXRpb25QYXJhbWV0ZXJzKHNwYW4sIHJ1bkluZm8pO1xuICAgICAgICAvLyBTZXQgbWV0YWRhdGEgYW5kIHRhZ3MgaWYgYXZhaWxhYmxlXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gcnVuSW5mby5leHRyYT8ubWV0YWRhdGEgfHwge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG1ldGFkYXRhKSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShgJHtjb25zdGFudHMuTEFOR1NNSVRIX01FVEFEQVRBfS4ke2tleX1gLCBTdHJpbmcodmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0YWdzID0gcnVuSW5mby50YWdzO1xuICAgICAgICBpZiAodGFncyAmJiBBcnJheS5pc0FycmF5KHRhZ3MpKSB7XG4gICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShjb25zdGFudHMuTEFOR1NNSVRIX1RBR1MsIHRhZ3Muam9pbihcIiwgXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0YWdzKSB7XG4gICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShjb25zdGFudHMuTEFOR1NNSVRIX1RBR1MsIFN0cmluZyh0YWdzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU3VwcG9ydCBhZGRpdGlvbmFsIHNlcmlhbGl6ZWQgYXR0cmlidXRlcywgaWYgcHJlc2VudFxuICAgICAgICBpZiAoXCJzZXJpYWxpemVkXCIgaW4gcnVuSW5mbyAmJiB0eXBlb2YgcnVuSW5mby5zZXJpYWxpemVkID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkID0gcnVuSW5mby5zZXJpYWxpemVkO1xuICAgICAgICAgICAgaWYgKHNlcmlhbGl6ZWQubmFtZSkge1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfU0VSSUFMSVpFRF9OQU1FLCBTdHJpbmcoc2VyaWFsaXplZC5uYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VyaWFsaXplZC5zaWduYXR1cmUpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShjb25zdGFudHMuR0VOX0FJX1NFUklBTElaRURfU0lHTkFUVVJFLCBTdHJpbmcoc2VyaWFsaXplZC5zaWduYXR1cmUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZXJpYWxpemVkLmRvYykge1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfU0VSSUFMSVpFRF9ET0MsIFN0cmluZyhzZXJpYWxpemVkLmRvYykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFNldCBpbnB1dHMvb3V0cHV0cyBpZiBhdmFpbGFibGVcbiAgICAgICAgdGhpcy5zZXRJT0F0dHJpYnV0ZXMoc3Bhbiwgb3ApO1xuICAgIH1cbiAgICBzZXRHZW5BaVN5c3RlbShzcGFuLCBydW5JbmZvKSB7XG4gICAgICAgIC8vIERlZmF1bHQgdG8gXCJsYW5nY2hhaW5cIiBpZiB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIHN5c3RlbVxuICAgICAgICBsZXQgc3lzdGVtID0gXCJsYW5nY2hhaW5cIjtcbiAgICAgICAgLy8gRXh0cmFjdCBtb2RlbCBuYW1lIHRvIGRldGVybWluZSB0aGUgc3lzdGVtXG4gICAgICAgIGNvbnN0IG1vZGVsTmFtZSA9IHRoaXMuZXh0cmFjdE1vZGVsTmFtZShydW5JbmZvKTtcbiAgICAgICAgaWYgKG1vZGVsTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgbW9kZWxMb3dlciA9IG1vZGVsTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKG1vZGVsTG93ZXIuaW5jbHVkZXMoXCJhbnRocm9waWNcIikgfHwgbW9kZWxMb3dlci5zdGFydHNXaXRoKFwiY2xhdWRlXCIpKSB7XG4gICAgICAgICAgICAgICAgc3lzdGVtID0gXCJhbnRocm9waWNcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1vZGVsTG93ZXIuaW5jbHVkZXMoXCJiZWRyb2NrXCIpKSB7XG4gICAgICAgICAgICAgICAgc3lzdGVtID0gXCJhd3MuYmVkcm9ja1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZWxMb3dlci5pbmNsdWRlcyhcImF6dXJlXCIpICYmXG4gICAgICAgICAgICAgICAgbW9kZWxMb3dlci5pbmNsdWRlcyhcIm9wZW5haVwiKSkge1xuICAgICAgICAgICAgICAgIHN5c3RlbSA9IFwiYXouYWkub3BlbmFpXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RlbExvd2VyLmluY2x1ZGVzKFwiYXp1cmVcIikgJiZcbiAgICAgICAgICAgICAgICBtb2RlbExvd2VyLmluY2x1ZGVzKFwiaW5mZXJlbmNlXCIpKSB7XG4gICAgICAgICAgICAgICAgc3lzdGVtID0gXCJhei5haS5pbmZlcmVuY2VcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1vZGVsTG93ZXIuaW5jbHVkZXMoXCJjb2hlcmVcIikpIHtcbiAgICAgICAgICAgICAgICBzeXN0ZW0gPSBcImNvaGVyZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZWxMb3dlci5pbmNsdWRlcyhcImRlZXBzZWVrXCIpKSB7XG4gICAgICAgICAgICAgICAgc3lzdGVtID0gXCJkZWVwc2Vla1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZWxMb3dlci5pbmNsdWRlcyhcImdlbWluaVwiKSkge1xuICAgICAgICAgICAgICAgIHN5c3RlbSA9IFwiZ2VtaW5pXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RlbExvd2VyLmluY2x1ZGVzKFwiZ3JvcVwiKSkge1xuICAgICAgICAgICAgICAgIHN5c3RlbSA9IFwiZ3JvcVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZWxMb3dlci5pbmNsdWRlcyhcIndhdHNvblwiKSB8fCBtb2RlbExvd2VyLmluY2x1ZGVzKFwiaWJtXCIpKSB7XG4gICAgICAgICAgICAgICAgc3lzdGVtID0gXCJpYm0ud2F0c29ueC5haVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZWxMb3dlci5pbmNsdWRlcyhcIm1pc3RyYWxcIikpIHtcbiAgICAgICAgICAgICAgICBzeXN0ZW0gPSBcIm1pc3RyYWxfYWlcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1vZGVsTG93ZXIuaW5jbHVkZXMoXCJncHRcIikgfHwgbW9kZWxMb3dlci5pbmNsdWRlcyhcIm9wZW5haVwiKSkge1xuICAgICAgICAgICAgICAgIHN5c3RlbSA9IFwib3BlbmFpXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RlbExvd2VyLmluY2x1ZGVzKFwicGVycGxleGl0eVwiKSB8fFxuICAgICAgICAgICAgICAgIG1vZGVsTG93ZXIuaW5jbHVkZXMoXCJzb25hclwiKSkge1xuICAgICAgICAgICAgICAgIHN5c3RlbSA9IFwicGVycGxleGl0eVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZWxMb3dlci5pbmNsdWRlcyhcInZlcnRleFwiKSkge1xuICAgICAgICAgICAgICAgIHN5c3RlbSA9IFwidmVydGV4X2FpXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RlbExvd2VyLmluY2x1ZGVzKFwieGFpXCIpIHx8IG1vZGVsTG93ZXIuaW5jbHVkZXMoXCJncm9rXCIpKSB7XG4gICAgICAgICAgICAgICAgc3lzdGVtID0gXCJ4YWlcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShjb25zdGFudHMuR0VOX0FJX1NZU1RFTSwgc3lzdGVtKTtcbiAgICB9XG4gICAgc2V0SW52b2NhdGlvblBhcmFtZXRlcnMoc3BhbiwgcnVuSW5mbykge1xuICAgICAgICBpZiAoIXJ1bkluZm8uZXh0cmE/Lm1ldGFkYXRhPy5pbnZvY2F0aW9uX3BhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGludm9jYXRpb25QYXJhbXMgPSBydW5JbmZvLmV4dHJhLm1ldGFkYXRhLmludm9jYXRpb25fcGFyYW1zO1xuICAgICAgICAvLyBTZXQgcmVsZXZhbnQgaW52b2NhdGlvbiBwYXJhbWV0ZXJzXG4gICAgICAgIGlmIChpbnZvY2F0aW9uUGFyYW1zLm1heF90b2tlbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoY29uc3RhbnRzLkdFTl9BSV9SRVFVRVNUX01BWF9UT0tFTlMsIGludm9jYXRpb25QYXJhbXMubWF4X3Rva2Vucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludm9jYXRpb25QYXJhbXMudGVtcGVyYXR1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoY29uc3RhbnRzLkdFTl9BSV9SRVFVRVNUX1RFTVBFUkFUVVJFLCBpbnZvY2F0aW9uUGFyYW1zLnRlbXBlcmF0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW52b2NhdGlvblBhcmFtcy50b3BfcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShjb25zdGFudHMuR0VOX0FJX1JFUVVFU1RfVE9QX1AsIGludm9jYXRpb25QYXJhbXMudG9wX3ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnZvY2F0aW9uUGFyYW1zLmZyZXF1ZW5jeV9wZW5hbHR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfUkVRVUVTVF9GUkVRVUVOQ1lfUEVOQUxUWSwgaW52b2NhdGlvblBhcmFtcy5mcmVxdWVuY3lfcGVuYWx0eSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludm9jYXRpb25QYXJhbXMucHJlc2VuY2VfcGVuYWx0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShjb25zdGFudHMuR0VOX0FJX1JFUVVFU1RfUFJFU0VOQ0VfUEVOQUxUWSwgaW52b2NhdGlvblBhcmFtcy5wcmVzZW5jZV9wZW5hbHR5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRJT0F0dHJpYnV0ZXMoc3Bhbiwgb3ApIHtcbiAgICAgICAgaWYgKG9wLnJ1bi5pbnB1dHMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gb3AucnVuLmlucHV0cztcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0cyA9PT0gXCJvYmplY3RcIiAmJiBpbnB1dHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0cy5tb2RlbCAmJiBBcnJheS5pc0FycmF5KGlucHV0cy5tZXNzYWdlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfUkVRVUVTVF9NT0RFTCwgaW5wdXRzLm1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgYWRkaXRpb25hbCByZXF1ZXN0IGF0dHJpYnV0ZXMgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dHMuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5MQU5HU01JVEhfUkVRVUVTVF9TVFJFQU1JTkcsIGlucHV0cy5zdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dHMuZXh0cmFfaGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoY29uc3RhbnRzLkxBTkdTTUlUSF9SRVFVRVNUX0hFQURFUlMsIEpTT04uc3RyaW5naWZ5KGlucHV0cy5leHRyYV9oZWFkZXJzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0cy5leHRyYV9xdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoY29uc3RhbnRzLkdFTl9BSV9SRVFVRVNUX0VYVFJBX1FVRVJZLCBKU09OLnN0cmluZ2lmeShpbnB1dHMuZXh0cmFfcXVlcnkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRzLmV4dHJhX2JvZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfUkVRVUVTVF9FWFRSQV9CT0RZLCBKU09OLnN0cmluZ2lmeShpbnB1dHMuZXh0cmFfYm9keSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5BSV9QUk9NUFQsIEpTT04uc3RyaW5naWZ5KGlucHV0cykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKGBGYWlsZWQgdG8gcHJvY2VzcyBpbnB1dHMgZm9yIHJ1biAke29wLmlkfWAsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcC5ydW4ub3V0cHV0cykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRzID0gb3AucnVuLm91dHB1dHM7XG4gICAgICAgICAgICAgICAgLy8gRXh0cmFjdCB0b2tlbiB1c2FnZSBmcm9tIG91dHB1dHMgKGZvciBMTE0gcnVucylcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblVzYWdlID0gdGhpcy5nZXRVbmlmaWVkUnVuVG9rZW5zKG91dHB1dHMpO1xuICAgICAgICAgICAgICAgIGlmICh0b2tlblVzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfVVNBR0VfSU5QVVRfVE9LRU5TLCB0b2tlblVzYWdlWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoY29uc3RhbnRzLkdFTl9BSV9VU0FHRV9PVVRQVVRfVE9LRU5TLCB0b2tlblVzYWdlWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoY29uc3RhbnRzLkdFTl9BSV9VU0FHRV9UT1RBTF9UT0tFTlMsIHRva2VuVXNhZ2VbMF0gKyB0b2tlblVzYWdlWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dHMgJiYgdHlwZW9mIG91dHB1dHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dHMubW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfUkVTUE9OU0VfTU9ERUwsIFN0cmluZyhvdXRwdXRzLm1vZGVsKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBhZGRpdGlvbmFsIHJlc3BvbnNlIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dHMuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfUkVTUE9OU0VfSUQsIG91dHB1dHMuaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXRzLmNob2ljZXMgJiYgQXJyYXkuaXNBcnJheShvdXRwdXRzLmNob2ljZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5pc2hSZWFzb25zID0gb3V0cHV0cy5jaG9pY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChjaG9pY2UpID0+IGNob2ljZS5maW5pc2hfcmVhc29uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigocmVhc29uKSA9PiByZWFzb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmlzaFJlYXNvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfUkVTUE9OU0VfRklOSVNIX1JFQVNPTlMsIGZpbmlzaFJlYXNvbnMuam9pbihcIiwgXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0cy5zZXJ2aWNlX3RpZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5fQUlfUkVTUE9OU0VfU0VSVklDRV9USUVSLCBvdXRwdXRzLnNlcnZpY2VfdGllcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dHMuc3lzdGVtX2ZpbmdlcnByaW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShjb25zdGFudHMuR0VOX0FJX1JFU1BPTlNFX1NZU1RFTV9GSU5HRVJQUklOVCwgb3V0cHV0cy5zeXN0ZW1fZmluZ2VycHJpbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXRzLnVzYWdlX21ldGFkYXRhICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb3V0cHV0cy51c2FnZV9tZXRhZGF0YSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNhZ2VNZXRhZGF0YSA9IG91dHB1dHMudXNhZ2VfbWV0YWRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNhZ2VNZXRhZGF0YS5pbnB1dF90b2tlbl9kZXRhaWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoY29uc3RhbnRzLkdFTl9BSV9VU0FHRV9JTlBVVF9UT0tFTl9ERVRBSUxTLCBKU09OLnN0cmluZ2lmeSh1c2FnZU1ldGFkYXRhLmlucHV0X3Rva2VuX2RldGFpbHMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2FnZU1ldGFkYXRhLm91dHB1dF90b2tlbl9kZXRhaWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoY29uc3RhbnRzLkdFTl9BSV9VU0FHRV9PVVRQVVRfVE9LRU5fREVUQUlMUywgSlNPTi5zdHJpbmdpZnkodXNhZ2VNZXRhZGF0YS5vdXRwdXRfdG9rZW5fZGV0YWlscykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKGNvbnN0YW50cy5HRU5BSV9DT01QTEVUSU9OLCBKU09OLnN0cmluZ2lmeShvdXRwdXRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoYEZhaWxlZCB0byBwcm9jZXNzIG91dHB1dHMgZm9yIHJ1biAke29wLmlkfWAsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0VW5pZmllZFJ1blRva2VucyhvdXRwdXRzKSB7XG4gICAgICAgIGlmICghb3V0cHV0cykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2VhcmNoIGluIG5vbi1nZW5lcmF0aW9ucyBsaXN0c1xuICAgICAgICBsZXQgdG9rZW5Vc2FnZSA9IHRoaXMuZXh0cmFjdFVuaWZpZWRSdW5Ub2tlbnMob3V0cHV0cy51c2FnZV9tZXRhZGF0YSk7XG4gICAgICAgIGlmICh0b2tlblVzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW5Vc2FnZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBGaW5kIGlmIGRpcmVjdCBrd2FyZyBpbiBvdXRwdXRzXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvdXRwdXRzKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgICAgICAgY29uc3QgaGF5c3RhY2sgPSBvdXRwdXRzW2tleV07XG4gICAgICAgICAgICBpZiAoIWhheXN0YWNrIHx8IHR5cGVvZiBoYXlzdGFjayAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9rZW5Vc2FnZSA9IHRoaXMuZXh0cmFjdFVuaWZpZWRSdW5Ub2tlbnMoaGF5c3RhY2sudXNhZ2VfbWV0YWRhdGEpO1xuICAgICAgICAgICAgaWYgKHRva2VuVXNhZ2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW5Vc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXlzdGFjay5sYyA9PT0gMSAmJlxuICAgICAgICAgICAgICAgIGhheXN0YWNrLmt3YXJncyAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBoYXlzdGFjay5rd2FyZ3MgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICB0b2tlblVzYWdlID0gdGhpcy5leHRyYWN0VW5pZmllZFJ1blRva2VucyhoYXlzdGFjay5rd2FyZ3MudXNhZ2VfbWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICh0b2tlblVzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2tlblVzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBGaW5kIGluIGdlbmVyYXRpb25zXG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gb3V0cHV0cy5nZW5lcmF0aW9ucyB8fCBbXTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGdlbmVyYXRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmxhdEdlbmVyYXRpb25zID0gQXJyYXkuaXNBcnJheShnZW5lcmF0aW9uc1swXSlcbiAgICAgICAgICAgID8gZ2VuZXJhdGlvbnMuZmxhdCgpXG4gICAgICAgICAgICA6IGdlbmVyYXRpb25zO1xuICAgICAgICBmb3IgKGNvbnN0IGdlbmVyYXRpb24gb2YgZmxhdEdlbmVyYXRpb25zKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGdlbmVyYXRpb24gPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uLm1lc3NhZ2UgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZ2VuZXJhdGlvbi5tZXNzYWdlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbi5tZXNzYWdlLmt3YXJncyAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBnZW5lcmF0aW9uLm1lc3NhZ2Uua3dhcmdzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5Vc2FnZSA9IHRoaXMuZXh0cmFjdFVuaWZpZWRSdW5Ub2tlbnMoZ2VuZXJhdGlvbi5tZXNzYWdlLmt3YXJncy51c2FnZV9tZXRhZGF0YSk7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuVXNhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuVXNhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGV4dHJhY3RVbmlmaWVkUnVuVG9rZW5zKG91dHB1dHMpIHtcbiAgICAgICAgaWYgKCFvdXRwdXRzIHx8IHR5cGVvZiBvdXRwdXRzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG91dHB1dHMuaW5wdXRfdG9rZW5zICE9PSBcIm51bWJlclwiIHx8XG4gICAgICAgICAgICB0eXBlb2Ygb3V0cHV0cy5vdXRwdXRfdG9rZW5zICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW291dHB1dHMuaW5wdXRfdG9rZW5zLCBvdXRwdXRzLm91dHB1dF90b2tlbnNdO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJjb25zdGFudHMiLCJnZXRPVEVMVHJhY2UiLCJXRUxMX0tOT1dOX09QRVJBVElPTl9OQU1FUyIsImxsbSIsInRvb2wiLCJyZXRyaWV2ZXIiLCJlbWJlZGRpbmciLCJwcm9tcHQiLCJnZXRPcGVyYXRpb25OYW1lIiwicnVuVHlwZSIsIkxhbmdTbWl0aFRvT1RFTFRyYW5zbGF0b3IiLCJjb25zdHJ1Y3RvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJNYXAiLCJleHBvcnRCYXRjaCIsIm9wZXJhdGlvbnMiLCJvdGVsQ29udGV4dE1hcCIsIm9wIiwicnVuIiwib3BlcmF0aW9uIiwic3BhbiIsImNyZWF0ZVNwYW5Gb3JSdW4iLCJnZXQiLCJpZCIsImVuZF90aW1lIiwic3BhbnMiLCJzZXQiLCJ1cGRhdGVTcGFuRm9yUnVuIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsInJ1bkluZm8iLCJvdGVsQ29udGV4dCIsImFjdGl2ZVNwYW4iLCJnZXRTcGFuIiwiZmluaXNoU3BhblNldHVwIiwidW5kZWZpbmVkIiwic2V0U3BhbkF0dHJpYnV0ZXMiLCJzZXRTdGF0dXMiLCJjb2RlIiwicmVjb3JkRXhjZXB0aW9uIiwiRXJyb3IiLCJlbmQiLCJEYXRlIiwiZGVidWciLCJlbmRUaW1lIiwiZGVsZXRlIiwiZXh0cmFjdE1vZGVsTmFtZSIsImV4dHJhIiwibWV0YWRhdGEiLCJsc19tb2RlbF9uYW1lIiwiaW52b2NhdGlvbl9wYXJhbXMiLCJpbnZvY2F0aW9uUGFyYW1zIiwibW9kZWwiLCJtb2RlbF9uYW1lIiwicnVuX3R5cGUiLCJzZXRBdHRyaWJ1dGUiLCJMQU5HU01JVEhfUlVOX1RZUEUiLCJvcGVyYXRpb25OYW1lIiwiR0VOX0FJX09QRVJBVElPTl9OQU1FIiwibmFtZSIsIkxBTkdTTUlUSF9OQU1FIiwic2Vzc2lvbl9pZCIsIkxBTkdTTUlUSF9TRVNTSU9OX0lEIiwic2Vzc2lvbl9uYW1lIiwiTEFOR1NNSVRIX1NFU1NJT05fTkFNRSIsInNldEdlbkFpU3lzdGVtIiwibW9kZWxOYW1lIiwiR0VOX0FJX1JFUVVFU1RfTU9ERUwiLCJwcm9tcHRfdG9rZW5zIiwiR0VOX0FJX1VTQUdFX0lOUFVUX1RPS0VOUyIsImNvbXBsZXRpb25fdG9rZW5zIiwiR0VOX0FJX1VTQUdFX09VVFBVVF9UT0tFTlMiLCJ0b3RhbF90b2tlbnMiLCJHRU5fQUlfVVNBR0VfVE9UQUxfVE9LRU5TIiwic2V0SW52b2NhdGlvblBhcmFtZXRlcnMiLCJrZXkiLCJlbnRyaWVzIiwiTEFOR1NNSVRIX01FVEFEQVRBIiwiU3RyaW5nIiwidGFncyIsIkFycmF5IiwiaXNBcnJheSIsIkxBTkdTTUlUSF9UQUdTIiwiam9pbiIsInNlcmlhbGl6ZWQiLCJHRU5fQUlfU0VSSUFMSVpFRF9OQU1FIiwic2lnbmF0dXJlIiwiR0VOX0FJX1NFUklBTElaRURfU0lHTkFUVVJFIiwiZG9jIiwiR0VOX0FJX1NFUklBTElaRURfRE9DIiwic2V0SU9BdHRyaWJ1dGVzIiwic3lzdGVtIiwibW9kZWxMb3dlciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJzdGFydHNXaXRoIiwiR0VOX0FJX1NZU1RFTSIsIm1heF90b2tlbnMiLCJHRU5fQUlfUkVRVUVTVF9NQVhfVE9LRU5TIiwidGVtcGVyYXR1cmUiLCJHRU5fQUlfUkVRVUVTVF9URU1QRVJBVFVSRSIsInRvcF9wIiwiR0VOX0FJX1JFUVVFU1RfVE9QX1AiLCJmcmVxdWVuY3lfcGVuYWx0eSIsIkdFTl9BSV9SRVFVRVNUX0ZSRVFVRU5DWV9QRU5BTFRZIiwicHJlc2VuY2VfcGVuYWx0eSIsIkdFTl9BSV9SRVFVRVNUX1BSRVNFTkNFX1BFTkFMVFkiLCJpbnB1dHMiLCJtZXNzYWdlcyIsInN0cmVhbSIsIkxBTkdTTUlUSF9SRVFVRVNUX1NUUkVBTUlORyIsImV4dHJhX2hlYWRlcnMiLCJMQU5HU01JVEhfUkVRVUVTVF9IRUFERVJTIiwiSlNPTiIsInN0cmluZ2lmeSIsImV4dHJhX3F1ZXJ5IiwiR0VOX0FJX1JFUVVFU1RfRVhUUkFfUVVFUlkiLCJleHRyYV9ib2R5IiwiR0VOX0FJX1JFUVVFU1RfRVhUUkFfQk9EWSIsIkdFTkFJX1BST01QVCIsIm91dHB1dHMiLCJ0b2tlblVzYWdlIiwiZ2V0VW5pZmllZFJ1blRva2VucyIsIkdFTl9BSV9SRVNQT05TRV9NT0RFTCIsIkdFTl9BSV9SRVNQT05TRV9JRCIsImNob2ljZXMiLCJmaW5pc2hSZWFzb25zIiwibWFwIiwiY2hvaWNlIiwiZmluaXNoX3JlYXNvbiIsImZpbHRlciIsInJlYXNvbiIsImxlbmd0aCIsIkdFTl9BSV9SRVNQT05TRV9GSU5JU0hfUkVBU09OUyIsInNlcnZpY2VfdGllciIsIkdFTl9BSV9SRVNQT05TRV9TRVJWSUNFX1RJRVIiLCJzeXN0ZW1fZmluZ2VycHJpbnQiLCJHRU5fQUlfUkVTUE9OU0VfU1lTVEVNX0ZJTkdFUlBSSU5UIiwidXNhZ2VfbWV0YWRhdGEiLCJ1c2FnZU1ldGFkYXRhIiwiaW5wdXRfdG9rZW5fZGV0YWlscyIsIkdFTl9BSV9VU0FHRV9JTlBVVF9UT0tFTl9ERVRBSUxTIiwib3V0cHV0X3Rva2VuX2RldGFpbHMiLCJHRU5fQUlfVVNBR0VfT1VUUFVUX1RPS0VOX0RFVEFJTFMiLCJHRU5BSV9DT01QTEVUSU9OIiwiZXh0cmFjdFVuaWZpZWRSdW5Ub2tlbnMiLCJrZXlzIiwiaGF5c3RhY2siLCJsYyIsImt3YXJncyIsImdlbmVyYXRpb25zIiwiZmxhdEdlbmVyYXRpb25zIiwiZmxhdCIsImdlbmVyYXRpb24iLCJtZXNzYWdlIiwiaW5wdXRfdG9rZW5zIiwib3V0cHV0X3Rva2VucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/experimental/otel/translator.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Client: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_0__.Client),\n/* harmony export */   RunTree: () => (/* reexport safe */ _run_trees_js__WEBPACK_IMPORTED_MODULE_1__.RunTree),\n/* harmony export */   __version__: () => (/* binding */ __version__),\n/* harmony export */   getDefaultProjectName: () => (/* reexport safe */ _utils_project_js__WEBPACK_IMPORTED_MODULE_3__.getDefaultProjectName),\n/* harmony export */   overrideFetchImplementation: () => (/* reexport safe */ _singletons_fetch_js__WEBPACK_IMPORTED_MODULE_2__.overrideFetchImplementation),\n/* harmony export */   uuid7: () => (/* reexport safe */ _uuid_js__WEBPACK_IMPORTED_MODULE_4__.uuid7),\n/* harmony export */   uuid7FromTime: () => (/* reexport safe */ _uuid_js__WEBPACK_IMPORTED_MODULE_4__.uuid7FromTime)\n/* harmony export */ });\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/client.js\");\n/* harmony import */ var _run_trees_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./run_trees.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/run_trees.js\");\n/* harmony import */ var _singletons_fetch_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./singletons/fetch.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/fetch.js\");\n/* harmony import */ var _utils_project_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/project.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/project.js\");\n/* harmony import */ var _uuid_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./uuid.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/uuid.js\");\n\n\n\n\n\n// Update using yarn bump-version\nconst __version__ = \"0.3.82\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0M7QUFDRztBQUMyQjtBQUNUO0FBQ1Y7QUFDakQsaUNBQWlDO0FBQzFCLE1BQU1NLGNBQWMsU0FBUyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9pbmRleC5qcz83YTI1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IENsaWVudCwgfSBmcm9tIFwiLi9jbGllbnQuanNcIjtcbmV4cG9ydCB7IFJ1blRyZWUgfSBmcm9tIFwiLi9ydW5fdHJlZXMuanNcIjtcbmV4cG9ydCB7IG92ZXJyaWRlRmV0Y2hJbXBsZW1lbnRhdGlvbiB9IGZyb20gXCIuL3NpbmdsZXRvbnMvZmV0Y2guanNcIjtcbmV4cG9ydCB7IGdldERlZmF1bHRQcm9qZWN0TmFtZSB9IGZyb20gXCIuL3V0aWxzL3Byb2plY3QuanNcIjtcbmV4cG9ydCB7IHV1aWQ3LCB1dWlkN0Zyb21UaW1lIH0gZnJvbSBcIi4vdXVpZC5qc1wiO1xuLy8gVXBkYXRlIHVzaW5nIHlhcm4gYnVtcC12ZXJzaW9uXG5leHBvcnQgY29uc3QgX192ZXJzaW9uX18gPSBcIjAuMy44MlwiO1xuIl0sIm5hbWVzIjpbIkNsaWVudCIsIlJ1blRyZWUiLCJvdmVycmlkZUZldGNoSW1wbGVtZW50YXRpb24iLCJnZXREZWZhdWx0UHJvamVjdE5hbWUiLCJ1dWlkNyIsInV1aWQ3RnJvbVRpbWUiLCJfX3ZlcnNpb25fXyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/run_trees.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/run_trees.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunTree: () => (/* binding */ RunTree),\n/* harmony export */   convertToDottedOrderFormat: () => (/* binding */ convertToDottedOrderFormat),\n/* harmony export */   isRunTree: () => (/* binding */ isRunTree),\n/* harmony export */   isRunnableConfigLike: () => (/* binding */ isRunnableConfigLike)\n/* harmony export */ });\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/client.js\");\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./env.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/env.js\");\n/* harmony import */ var _utils_error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/error.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/error.js\");\n/* harmony import */ var _singletons_constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./singletons/constants.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/constants.js\");\n/* harmony import */ var _utils_context_vars_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/context_vars.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/context_vars.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/env.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/env.js\");\n/* harmony import */ var _utils_project_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/project.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/project.js\");\n/* harmony import */ var _utils_warn_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/warn.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/warn.js\");\n/* harmony import */ var _utils_uuid_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/_uuid.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/_uuid.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v5.js\");\n\n\n\n\n\n\n\n\n\n\n\nconst TIMESTAMP_LENGTH = 36;\n// DNS namespace for UUID v5 (same as Python's uuid.NAMESPACE_DNS)\nconst UUID_NAMESPACE_DNS = \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\";\nfunction getReplicaKey(replica) {\n    // Generate a unique key by hashing the replica's identifying properties\n    // This ensures each unique replica (combination of projectName, apiUrl, workspaceId, apiKey) gets a unique key\n    // Sort keys to ensure consistent hashing\n    const sortedKeys = Object.keys(replica).sort();\n    const keyData = sortedKeys.map((key)=>`${key}:${replica[key] ?? \"\"}`).join(\"|\");\n    return (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(keyData, UUID_NAMESPACE_DNS);\n}\nfunction stripNonAlphanumeric(input) {\n    return input.replace(/[-:.]/g, \"\");\n}\nfunction getMicrosecondPrecisionDatestring(epoch, executionOrder = 1) {\n    // Date only has millisecond precision, so we use the microseconds to break\n    // possible ties, avoiding incorrect run order\n    const paddedOrder = executionOrder.toFixed(0).slice(0, 3).padStart(3, \"0\");\n    return `${new Date(epoch).toISOString().slice(0, -1)}${paddedOrder}Z`;\n}\nfunction convertToDottedOrderFormat(epoch, runId, executionOrder = 1) {\n    const microsecondPrecisionDatestring = getMicrosecondPrecisionDatestring(epoch, executionOrder);\n    return {\n        dottedOrder: stripNonAlphanumeric(microsecondPrecisionDatestring) + runId,\n        microsecondPrecisionDatestring\n    };\n}\n/**\n * Baggage header information\n */ class Baggage {\n    constructor(metadata, tags, project_name, replicas){\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"project_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"replicas\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.metadata = metadata;\n        this.tags = tags;\n        this.project_name = project_name;\n        this.replicas = replicas;\n    }\n    static fromHeader(value) {\n        const items = value.split(\",\");\n        let metadata = {};\n        let tags = [];\n        let project_name;\n        let replicas;\n        for (const item of items){\n            const [key, uriValue] = item.split(\"=\");\n            const value = decodeURIComponent(uriValue);\n            if (key === \"langsmith-metadata\") {\n                metadata = JSON.parse(value);\n            } else if (key === \"langsmith-tags\") {\n                tags = value.split(\",\");\n            } else if (key === \"langsmith-project\") {\n                project_name = value;\n            } else if (key === \"langsmith-replicas\") {\n                replicas = JSON.parse(value);\n            }\n        }\n        return new Baggage(metadata, tags, project_name, replicas);\n    }\n    toHeader() {\n        const items = [];\n        if (this.metadata && Object.keys(this.metadata).length > 0) {\n            items.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`);\n        }\n        if (this.tags && this.tags.length > 0) {\n            items.push(`langsmith-tags=${encodeURIComponent(this.tags.join(\",\"))}`);\n        }\n        if (this.project_name) {\n            items.push(`langsmith-project=${encodeURIComponent(this.project_name)}`);\n        }\n        return items.join(\",\");\n    }\n}\nclass RunTree {\n    constructor(originalConfig){\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"run_type\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"project_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"parent_run\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"parent_run_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"child_runs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"start_time\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"end_time\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"extra\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"error\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"serialized\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"reference_example_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"events\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"trace_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"dotted_order\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tracingEnabled\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"execution_order\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"child_execution_order\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Attachments associated with the run.\n         * Each entry is a tuple of [mime_type, bytes]\n         */ Object.defineProperty(this, \"attachments\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Projects to replicate this run to with optional updates.\n         */ Object.defineProperty(this, \"replicas\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"distributedParentId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_serialized_start_time\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // If you pass in a run tree directly, return a shallow clone\n        if (isRunTree(originalConfig)) {\n            Object.assign(this, {\n                ...originalConfig\n            });\n            return;\n        }\n        const defaultConfig = RunTree.getDefaultConfig();\n        const { metadata, ...config } = originalConfig;\n        const client = config.client ?? RunTree.getSharedClient();\n        const dedupedMetadata = {\n            ...metadata,\n            ...config?.extra?.metadata\n        };\n        config.extra = {\n            ...config.extra,\n            metadata: dedupedMetadata\n        };\n        if (\"id\" in config && config.id == null) {\n            delete config.id;\n        }\n        Object.assign(this, {\n            ...defaultConfig,\n            ...config,\n            client\n        });\n        this.execution_order ??= 1;\n        this.child_execution_order ??= 1;\n        // Generate serialized start time for ID generation\n        if (!this.dotted_order) {\n            this._serialized_start_time = getMicrosecondPrecisionDatestring(this.start_time, this.execution_order);\n        }\n        // Generate id from serialized start_time if not provided\n        if (!this.id) {\n            this.id = (0,_utils_uuid_js__WEBPACK_IMPORTED_MODULE_8__.uuid7FromTime)(this._serialized_start_time ?? this.start_time);\n        }\n        if (!this.trace_id) {\n            if (this.parent_run) {\n                this.trace_id = this.parent_run.trace_id ?? this.id;\n            } else {\n                this.trace_id = this.id;\n            }\n        }\n        this.replicas = _ensureWriteReplicas(this.replicas);\n        // Now set the dotted order with the actual ID\n        if (!this.dotted_order) {\n            const { dottedOrder } = convertToDottedOrderFormat(this.start_time, this.id, this.execution_order);\n            if (this.parent_run) {\n                this.dotted_order = this.parent_run.dotted_order + \".\" + dottedOrder;\n            } else {\n                this.dotted_order = dottedOrder;\n            }\n        }\n    }\n    set metadata(metadata) {\n        this.extra = {\n            ...this.extra,\n            metadata: {\n                ...this.extra?.metadata,\n                ...metadata\n            }\n        };\n    }\n    get metadata() {\n        return this.extra?.metadata;\n    }\n    static getDefaultConfig() {\n        const start_time = Date.now();\n        return {\n            run_type: \"chain\",\n            project_name: (0,_utils_project_js__WEBPACK_IMPORTED_MODULE_6__.getDefaultProjectName)(),\n            child_runs: [],\n            api_url: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_5__.getEnvironmentVariable)(\"LANGCHAIN_ENDPOINT\") ?? \"http://localhost:1984\",\n            api_key: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_5__.getEnvironmentVariable)(\"LANGCHAIN_API_KEY\"),\n            caller_options: {},\n            start_time,\n            serialized: {},\n            inputs: {},\n            extra: {}\n        };\n    }\n    static getSharedClient() {\n        if (!RunTree.sharedClient) {\n            RunTree.sharedClient = new _client_js__WEBPACK_IMPORTED_MODULE_0__.Client();\n        }\n        return RunTree.sharedClient;\n    }\n    createChild(config) {\n        const child_execution_order = this.child_execution_order + 1;\n        // Handle replicas: if child has its own replicas, use those; otherwise inherit parent's (with reroot stripped)\n        // Reroot should only apply to the run where it's explicitly configured, not propagate down\n        const inheritedReplicas = this.replicas?.map((replica)=>{\n            const { reroot, ...rest } = replica;\n            return rest;\n        });\n        const childReplicas = config.replicas ?? inheritedReplicas;\n        const child = new RunTree({\n            ...config,\n            parent_run: this,\n            project_name: this.project_name,\n            replicas: childReplicas,\n            client: this.client,\n            tracingEnabled: this.tracingEnabled,\n            execution_order: child_execution_order,\n            child_execution_order: child_execution_order\n        });\n        // Copy context vars over into the new run tree.\n        if (_singletons_constants_js__WEBPACK_IMPORTED_MODULE_3__._LC_CONTEXT_VARIABLES_KEY in this) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            child[_singletons_constants_js__WEBPACK_IMPORTED_MODULE_3__._LC_CONTEXT_VARIABLES_KEY] = this[_singletons_constants_js__WEBPACK_IMPORTED_MODULE_3__._LC_CONTEXT_VARIABLES_KEY];\n        }\n        const LC_CHILD = Symbol.for(\"lc:child_config\");\n        const presentConfig = config.extra?.[LC_CHILD] ?? this.extra[LC_CHILD];\n        // tracing for LangChain is defined by the _parentRunId and runMap of the tracer\n        if (isRunnableConfigLike(presentConfig)) {\n            const newConfig = {\n                ...presentConfig\n            };\n            const callbacks = isCallbackManagerLike(newConfig.callbacks) ? newConfig.callbacks.copy?.() : undefined;\n            if (callbacks) {\n                // update the parent run id\n                Object.assign(callbacks, {\n                    _parentRunId: child.id\n                });\n                // only populate if we're in a newer LC.JS version\n                callbacks.handlers?.find(isLangChainTracerLike)?.updateFromRunTree?.(child);\n                newConfig.callbacks = callbacks;\n            }\n            child.extra[LC_CHILD] = newConfig;\n        }\n        // propagate child_execution_order upwards\n        const visited = new Set();\n        let current = this;\n        while(current != null && !visited.has(current.id)){\n            visited.add(current.id);\n            current.child_execution_order = Math.max(current.child_execution_order, child_execution_order);\n            current = current.parent_run;\n        }\n        this.child_runs.push(child);\n        return child;\n    }\n    async end(outputs, error, endTime = Date.now(), metadata) {\n        this.outputs = this.outputs ?? outputs;\n        this.error = this.error ?? error;\n        this.end_time = this.end_time ?? endTime;\n        if (metadata && Object.keys(metadata).length > 0) {\n            this.extra = this.extra ? {\n                ...this.extra,\n                metadata: {\n                    ...this.extra.metadata,\n                    ...metadata\n                }\n            } : {\n                metadata\n            };\n        }\n    }\n    _convertToCreate(run, runtimeEnv, excludeChildRuns = true) {\n        const runExtra = run.extra ?? {};\n        // Avoid overwriting the runtime environment if it's already set\n        if (runExtra?.runtime?.library === undefined) {\n            if (!runExtra.runtime) {\n                runExtra.runtime = {};\n            }\n            if (runtimeEnv) {\n                for (const [k, v] of Object.entries(runtimeEnv)){\n                    if (!runExtra.runtime[k]) {\n                        runExtra.runtime[k] = v;\n                    }\n                }\n            }\n        }\n        let child_runs;\n        let parent_run_id;\n        if (!excludeChildRuns) {\n            child_runs = run.child_runs.map((child_run)=>this._convertToCreate(child_run, runtimeEnv, excludeChildRuns));\n            parent_run_id = undefined;\n        } else {\n            parent_run_id = run.parent_run?.id ?? run.parent_run_id;\n            child_runs = [];\n        }\n        return {\n            id: run.id,\n            name: run.name,\n            start_time: run._serialized_start_time ?? run.start_time,\n            end_time: run.end_time,\n            run_type: run.run_type,\n            reference_example_id: run.reference_example_id,\n            extra: runExtra,\n            serialized: run.serialized,\n            error: run.error,\n            inputs: run.inputs,\n            outputs: run.outputs,\n            session_name: run.project_name,\n            child_runs: child_runs,\n            parent_run_id: parent_run_id,\n            trace_id: run.trace_id,\n            dotted_order: run.dotted_order,\n            tags: run.tags,\n            attachments: run.attachments,\n            events: run.events\n        };\n    }\n    _sliceParentId(parentId, run) {\n        /**\n         * Slice the parent id from dotted order.\n         * Additionally check if the current run is a child of the parent. If so, update\n         * the parent_run_id to undefined, and set the trace id to the new root id after\n         * parent_id.\n         */ if (run.dotted_order) {\n            const segs = run.dotted_order.split(\".\");\n            let startIdx = null;\n            // Find the index of the parent ID in the dotted order\n            for(let idx = 0; idx < segs.length; idx++){\n                const segId = segs[idx].slice(-TIMESTAMP_LENGTH);\n                if (segId === parentId) {\n                    startIdx = idx;\n                    break;\n                }\n            }\n            if (startIdx !== null) {\n                // Trim segments to start after parent_id (exclusive)\n                const trimmedSegs = segs.slice(startIdx + 1);\n                // Rebuild dotted_order\n                run.dotted_order = trimmedSegs.join(\".\");\n                if (trimmedSegs.length > 0) {\n                    run.trace_id = trimmedSegs[0].slice(-TIMESTAMP_LENGTH);\n                } else {\n                    run.trace_id = run.id;\n                }\n            }\n        }\n        if (run.parent_run_id === parentId) {\n            // We've found the new root node.\n            run.parent_run_id = undefined;\n        }\n    }\n    _setReplicaTraceRoot(replicaKey, traceRootId) {\n        // Set the replica trace root in context vars on this run and all descendants\n        const replicaTraceRoots = (0,_utils_context_vars_js__WEBPACK_IMPORTED_MODULE_4__.getContextVar)(this, _singletons_constants_js__WEBPACK_IMPORTED_MODULE_3__._REPLICA_TRACE_ROOTS_KEY) ?? {};\n        replicaTraceRoots[replicaKey] = traceRootId;\n        (0,_utils_context_vars_js__WEBPACK_IMPORTED_MODULE_4__.setContextVar)(this, _singletons_constants_js__WEBPACK_IMPORTED_MODULE_3__._REPLICA_TRACE_ROOTS_KEY, replicaTraceRoots);\n        // Recursively update all descendants to avoid race conditions\n        // around run tree creation vs processing time\n        for (const child of this.child_runs){\n            child._setReplicaTraceRoot(replicaKey, traceRootId);\n        }\n    }\n    _remapForProject(params) {\n        const { projectName, runtimeEnv, excludeChildRuns = true, reroot = false, distributedParentId, apiUrl, apiKey, workspaceId } = params;\n        const baseRun = this._convertToCreate(this, runtimeEnv, excludeChildRuns);\n        // Skip remapping if project name is the same\n        if (projectName === this.project_name) {\n            return {\n                ...baseRun,\n                session_name: projectName\n            };\n        }\n        // Apply reroot logic before ID remapping\n        if (reroot) {\n            if (distributedParentId) {\n                // If we have a distributed parent ID, slice at that point\n                this._sliceParentId(distributedParentId, baseRun);\n            } else {\n                // If no distributed parent ID, simply make this run a root run\n                // by removing parent_run_id and resetting trace info\n                baseRun.parent_run_id = undefined;\n                // Keep the current run as the trace root\n                if (baseRun.dotted_order) {\n                    // Reset dotted order to just this run\n                    const segs = baseRun.dotted_order.split(\".\");\n                    if (segs.length > 0) {\n                        baseRun.dotted_order = segs[segs.length - 1];\n                        baseRun.trace_id = baseRun.id;\n                    }\n                }\n            }\n            // Store this run's original ID in context vars so descendants know the new trace root\n            // We store the original ID (before remapping) so it can be found in dotted_order\n            const replicaKey = getReplicaKey({\n                projectName,\n                apiUrl,\n                apiKey,\n                workspaceId\n            });\n            this._setReplicaTraceRoot(replicaKey, baseRun.id);\n        }\n        // If an ancestor was rerooted for this replica, update trace_id and dotted_order\n        // to reflect the new trace hierarchy. This is tracked via context variables.\n        let ancestorRerootedTraceId;\n        if (!reroot) {\n            const replicaTraceRoots = (0,_utils_context_vars_js__WEBPACK_IMPORTED_MODULE_4__.getContextVar)(this, _singletons_constants_js__WEBPACK_IMPORTED_MODULE_3__._REPLICA_TRACE_ROOTS_KEY) ?? {};\n            const replicaKey = getReplicaKey({\n                projectName,\n                apiUrl,\n                apiKey,\n                workspaceId\n            });\n            ancestorRerootedTraceId = replicaTraceRoots[replicaKey];\n            if (ancestorRerootedTraceId) {\n                // An ancestor was rerooted for this replica, so set our trace_id\n                // to the ancestor's original (unmapped) ID. It will be remapped along with other IDs.\n                baseRun.trace_id = ancestorRerootedTraceId;\n                // Also slice the dotted_order to start from the new trace root\n                // This ensures descendants of a rerooted ancestor have correct hierarchy\n                if (baseRun.dotted_order) {\n                    const segs = baseRun.dotted_order.split(\".\");\n                    let rootIdx = null;\n                    // Find the new trace root's segment in dotted_order\n                    for(let idx = 0; idx < segs.length; idx++){\n                        const segId = segs[idx].slice(-TIMESTAMP_LENGTH);\n                        if (segId === ancestorRerootedTraceId) {\n                            rootIdx = idx;\n                            break;\n                        }\n                    }\n                    if (rootIdx !== null) {\n                        // Keep segments from new trace root onwards\n                        const trimmedSegs = segs.slice(rootIdx);\n                        baseRun.dotted_order = trimmedSegs.join(\".\");\n                    }\n                }\n            }\n        }\n        // Remap IDs for the replica using uuid5 (deterministic)\n        // This ensures consistency across runs in the same replica\n        const oldId = baseRun.id;\n        const newId = (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(`${oldId}:${projectName}`, UUID_NAMESPACE_DNS);\n        // Remap trace_id\n        let newTraceId;\n        if (baseRun.trace_id) {\n            newTraceId = (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(`${baseRun.trace_id}:${projectName}`, UUID_NAMESPACE_DNS);\n        } else {\n            newTraceId = newId;\n        }\n        // Remap parent_run_id\n        let newParentId;\n        if (baseRun.parent_run_id) {\n            newParentId = (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(`${baseRun.parent_run_id}:${projectName}`, UUID_NAMESPACE_DNS);\n        }\n        // Remap dotted_order segments\n        let newDottedOrder;\n        if (baseRun.dotted_order) {\n            const segs = baseRun.dotted_order.split(\".\");\n            const remappedSegs = segs.map((seg)=>{\n                // Extract the UUID from the segment (last TIMESTAMP_LENGTH characters)\n                const segId = seg.slice(-TIMESTAMP_LENGTH);\n                const remappedId = (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(`${segId}:${projectName}`, UUID_NAMESPACE_DNS);\n                // Replace the UUID part while keeping the timestamp prefix\n                return seg.slice(0, -TIMESTAMP_LENGTH) + remappedId;\n            });\n            newDottedOrder = remappedSegs.join(\".\");\n        }\n        return {\n            ...baseRun,\n            id: newId,\n            trace_id: newTraceId,\n            parent_run_id: newParentId,\n            dotted_order: newDottedOrder,\n            session_name: projectName\n        };\n    }\n    async postRun(excludeChildRuns = true) {\n        try {\n            const runtimeEnv = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_5__.getRuntimeEnvironment)();\n            if (this.replicas && this.replicas.length > 0) {\n                for (const { projectName, apiKey, apiUrl, workspaceId, reroot } of this.replicas){\n                    const runCreate = this._remapForProject({\n                        projectName: projectName ?? this.project_name,\n                        runtimeEnv,\n                        excludeChildRuns: true,\n                        reroot,\n                        distributedParentId: this.distributedParentId,\n                        apiUrl,\n                        apiKey,\n                        workspaceId\n                    });\n                    await this.client.createRun(runCreate, {\n                        apiKey,\n                        apiUrl,\n                        workspaceId\n                    });\n                }\n            } else {\n                const runCreate = this._convertToCreate(this, runtimeEnv, excludeChildRuns);\n                await this.client.createRun(runCreate);\n            }\n            if (!excludeChildRuns) {\n                (0,_utils_warn_js__WEBPACK_IMPORTED_MODULE_7__.warnOnce)(\"Posting with excludeChildRuns=false is deprecated and will be removed in a future version.\");\n                for (const childRun of this.child_runs){\n                    await childRun.postRun(false);\n                }\n            }\n        } catch (error) {\n            console.error(`Error in postRun for run ${this.id}:`, error);\n        }\n    }\n    async patchRun(options) {\n        if (this.replicas && this.replicas.length > 0) {\n            for (const { projectName, apiKey, apiUrl, workspaceId, updates, reroot } of this.replicas){\n                const runData = this._remapForProject({\n                    projectName: projectName ?? this.project_name,\n                    runtimeEnv: undefined,\n                    excludeChildRuns: true,\n                    reroot,\n                    distributedParentId: this.distributedParentId,\n                    apiUrl,\n                    apiKey,\n                    workspaceId\n                });\n                const updatePayload = {\n                    id: runData.id,\n                    name: runData.name,\n                    run_type: runData.run_type,\n                    start_time: runData.start_time,\n                    outputs: runData.outputs,\n                    error: runData.error,\n                    parent_run_id: runData.parent_run_id,\n                    session_name: runData.session_name,\n                    reference_example_id: runData.reference_example_id,\n                    end_time: runData.end_time,\n                    dotted_order: runData.dotted_order,\n                    trace_id: runData.trace_id,\n                    events: runData.events,\n                    tags: runData.tags,\n                    extra: runData.extra,\n                    attachments: this.attachments,\n                    ...updates\n                };\n                // Important that inputs is not a key in the run update\n                // if excluded because it will overwrite the run create if the\n                // two operations are merged during batching\n                if (!options?.excludeInputs) {\n                    updatePayload.inputs = runData.inputs;\n                }\n                await this.client.updateRun(runData.id, updatePayload, {\n                    apiKey,\n                    apiUrl,\n                    workspaceId\n                });\n            }\n        } else {\n            try {\n                const runUpdate = {\n                    name: this.name,\n                    run_type: this.run_type,\n                    start_time: this._serialized_start_time ?? this.start_time,\n                    end_time: this.end_time,\n                    error: this.error,\n                    outputs: this.outputs,\n                    parent_run_id: this.parent_run?.id ?? this.parent_run_id,\n                    reference_example_id: this.reference_example_id,\n                    extra: this.extra,\n                    events: this.events,\n                    dotted_order: this.dotted_order,\n                    trace_id: this.trace_id,\n                    tags: this.tags,\n                    attachments: this.attachments,\n                    session_name: this.project_name\n                };\n                // Important that inputs is not a key in the run update\n                // if excluded because it will overwrite the run create if the\n                // two operations are merged during batching\n                if (!options?.excludeInputs) {\n                    runUpdate.inputs = this.inputs;\n                }\n                await this.client.updateRun(this.id, runUpdate);\n            } catch (error) {\n                console.error(`Error in patchRun for run ${this.id}`, error);\n            }\n        }\n    }\n    toJSON() {\n        return this._convertToCreate(this, undefined, false);\n    }\n    /**\n     * Add an event to the run tree.\n     * @param event - A single event or string to add\n     */ addEvent(event) {\n        if (!this.events) {\n            this.events = [];\n        }\n        if (typeof event === \"string\") {\n            this.events.push({\n                name: \"event\",\n                time: new Date().toISOString(),\n                message: event\n            });\n        } else {\n            this.events.push({\n                ...event,\n                time: event.time ?? new Date().toISOString()\n            });\n        }\n    }\n    static fromRunnableConfig(parentConfig, props) {\n        // We only handle the callback manager case for now\n        const callbackManager = parentConfig?.callbacks;\n        let parentRun;\n        let projectName;\n        let client;\n        let tracingEnabled = (0,_env_js__WEBPACK_IMPORTED_MODULE_1__.isTracingEnabled)();\n        if (callbackManager) {\n            const parentRunId = callbackManager?.getParentRunId?.() ?? \"\";\n            const langChainTracer = callbackManager?.handlers?.find((handler)=>handler?.name == \"langchain_tracer\");\n            parentRun = langChainTracer?.getRun?.(parentRunId);\n            projectName = langChainTracer?.projectName;\n            client = langChainTracer?.client;\n            tracingEnabled = tracingEnabled || !!langChainTracer;\n        }\n        if (!parentRun) {\n            return new RunTree({\n                ...props,\n                client,\n                tracingEnabled,\n                project_name: projectName\n            });\n        }\n        const parentRunTree = new RunTree({\n            name: parentRun.name,\n            id: parentRun.id,\n            trace_id: parentRun.trace_id,\n            dotted_order: parentRun.dotted_order,\n            client,\n            tracingEnabled,\n            project_name: projectName,\n            tags: [\n                ...new Set((parentRun?.tags ?? []).concat(parentConfig?.tags ?? []))\n            ],\n            extra: {\n                metadata: {\n                    ...parentRun?.extra?.metadata,\n                    ...parentConfig?.metadata\n                }\n            }\n        });\n        return parentRunTree.createChild(props);\n    }\n    static fromDottedOrder(dottedOrder) {\n        return this.fromHeaders({\n            \"langsmith-trace\": dottedOrder\n        });\n    }\n    static fromHeaders(headers, inheritArgs) {\n        const rawHeaders = \"get\" in headers && typeof headers.get === \"function\" ? {\n            \"langsmith-trace\": headers.get(\"langsmith-trace\"),\n            baggage: headers.get(\"baggage\")\n        } : headers;\n        const headerTrace = rawHeaders[\"langsmith-trace\"];\n        if (!headerTrace || typeof headerTrace !== \"string\") return undefined;\n        const parentDottedOrder = headerTrace.trim();\n        const parsedDottedOrder = parentDottedOrder.split(\".\").map((part)=>{\n            const [strTime, uuid] = part.split(\"Z\");\n            return {\n                strTime,\n                time: Date.parse(strTime + \"Z\"),\n                uuid\n            };\n        });\n        const traceId = parsedDottedOrder[0].uuid;\n        const config = {\n            ...inheritArgs,\n            name: inheritArgs?.[\"name\"] ?? \"parent\",\n            run_type: inheritArgs?.[\"run_type\"] ?? \"chain\",\n            start_time: inheritArgs?.[\"start_time\"] ?? Date.now(),\n            id: parsedDottedOrder.at(-1)?.uuid,\n            trace_id: traceId,\n            dotted_order: parentDottedOrder\n        };\n        if (rawHeaders[\"baggage\"] && typeof rawHeaders[\"baggage\"] === \"string\") {\n            const baggage = Baggage.fromHeader(rawHeaders[\"baggage\"]);\n            config.metadata = baggage.metadata;\n            config.tags = baggage.tags;\n            config.project_name = baggage.project_name;\n            config.replicas = baggage.replicas;\n        }\n        const runTree = new RunTree(config);\n        // Set the distributed parent ID to this run's ID for rerooting\n        runTree.distributedParentId = runTree.id;\n        return runTree;\n    }\n    toHeaders(headers) {\n        const result = {\n            \"langsmith-trace\": this.dotted_order,\n            baggage: new Baggage(this.extra?.metadata, this.tags, this.project_name, this.replicas).toHeader()\n        };\n        if (headers) {\n            for (const [key, value] of Object.entries(result)){\n                headers.set(key, value);\n            }\n        }\n        return result;\n    }\n}\nObject.defineProperty(RunTree, \"sharedClient\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: null\n});\nfunction isRunTree(x) {\n    return x != null && typeof x.createChild === \"function\" && typeof x.postRun === \"function\";\n}\nfunction isLangChainTracerLike(x) {\n    return typeof x === \"object\" && x != null && typeof x.name === \"string\" && x.name === \"langchain_tracer\";\n}\nfunction containsLangChainTracerLike(x) {\n    return Array.isArray(x) && x.some((callback)=>isLangChainTracerLike(callback));\n}\nfunction isCallbackManagerLike(x) {\n    return typeof x === \"object\" && x != null && Array.isArray(x.handlers);\n}\nfunction isRunnableConfigLike(x) {\n    // Check that it's an object with a callbacks arg\n    // that has either a CallbackManagerLike object with a langchain tracer within it\n    // or an array with a LangChainTracerLike object within it\n    return x != null && typeof x.callbacks === \"object\" && // Callback manager with a langchain tracer\n    (containsLangChainTracerLike(x.callbacks?.handlers) || // Or it's an array with a LangChainTracerLike object within it\n    containsLangChainTracerLike(x.callbacks));\n}\nfunction _getWriteReplicasFromEnv() {\n    const envVar = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_5__.getEnvironmentVariable)(\"LANGSMITH_RUNS_ENDPOINTS\");\n    if (!envVar) return [];\n    try {\n        const parsed = JSON.parse(envVar);\n        if (Array.isArray(parsed)) {\n            const replicas = [];\n            for (const item of parsed){\n                if (typeof item !== \"object\" || item === null) {\n                    console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: ` + `expected object, got ${typeof item}`);\n                    continue;\n                }\n                if (typeof item.api_url !== \"string\") {\n                    console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: ` + `expected string, got ${typeof item.api_url}`);\n                    continue;\n                }\n                if (typeof item.api_key !== \"string\") {\n                    console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: ` + `expected string, got ${typeof item.api_key}`);\n                    continue;\n                }\n                replicas.push({\n                    apiUrl: item.api_url.replace(/\\/$/, \"\"),\n                    apiKey: item.api_key\n                });\n            }\n            return replicas;\n        } else if (typeof parsed === \"object\" && parsed !== null) {\n            _checkEndpointEnvUnset(parsed);\n            const replicas = [];\n            for (const [url, key] of Object.entries(parsed)){\n                const cleanUrl = url.replace(/\\/$/, \"\");\n                if (typeof key === \"string\") {\n                    replicas.push({\n                        apiUrl: cleanUrl,\n                        apiKey: key\n                    });\n                } else {\n                    console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${url}: ` + `expected string, got ${typeof key}`);\n                    continue;\n                }\n            }\n            return replicas;\n        } else {\n            console.warn(\"Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of \" + `objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof parsed}`);\n            return [];\n        }\n    } catch (e) {\n        if ((0,_utils_error_js__WEBPACK_IMPORTED_MODULE_2__.isConflictingEndpointsError)(e)) {\n            throw e;\n        }\n        console.warn(\"Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of \" + \"objects with api_url and api_key properties, or object mapping url->apiKey\");\n        return [];\n    }\n}\nfunction _ensureWriteReplicas(replicas) {\n    // If null -> fetch from env\n    if (replicas) {\n        return replicas.map((replica)=>{\n            if (Array.isArray(replica)) {\n                return {\n                    projectName: replica[0],\n                    updates: replica[1]\n                };\n            }\n            return replica;\n        });\n    }\n    return _getWriteReplicasFromEnv();\n}\nfunction _checkEndpointEnvUnset(parsed) {\n    if (Object.keys(parsed).length > 0 && (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_5__.getLangSmithEnvironmentVariable)(\"ENDPOINT\")) {\n        throw new _utils_error_js__WEBPACK_IMPORTED_MODULE_2__.ConflictingEndpointsError();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9ydW5fdHJlZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUM7QUFDTztBQUMrQztBQUNNO0FBQzFCO0FBQ1M7QUFDckI7QUFDTTtBQUN0QjtBQUNNO0FBQ2I7QUFDcEMsTUFBTWdCLG1CQUFtQjtBQUN6QixrRUFBa0U7QUFDbEUsTUFBTUMscUJBQXFCO0FBQzNCLFNBQVNDLGNBQWNDLE9BQU87SUFDMUIsd0VBQXdFO0lBQ3hFLCtHQUErRztJQUMvRyx5Q0FBeUM7SUFDekMsTUFBTUMsYUFBYUMsT0FBT0MsSUFBSSxDQUFDSCxTQUFTSSxJQUFJO0lBQzVDLE1BQU1DLFVBQVVKLFdBQ1hLLEdBQUcsQ0FBQyxDQUFDQyxNQUFRLENBQUMsRUFBRUEsSUFBSSxDQUFDLEVBQUVQLE9BQU8sQ0FBQ08sSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUMzQ0MsSUFBSSxDQUFDO0lBQ1YsT0FBT1osZ0RBQU1BLENBQUNTLFNBQVNQO0FBQzNCO0FBQ0EsU0FBU1cscUJBQXFCQyxLQUFLO0lBQy9CLE9BQU9BLE1BQU1DLE9BQU8sQ0FBQyxVQUFVO0FBQ25DO0FBQ0EsU0FBU0Msa0NBQWtDQyxLQUFLLEVBQUVDLGlCQUFpQixDQUFDO0lBQ2hFLDJFQUEyRTtJQUMzRSw4Q0FBOEM7SUFDOUMsTUFBTUMsY0FBY0QsZUFBZUUsT0FBTyxDQUFDLEdBQUdDLEtBQUssQ0FBQyxHQUFHLEdBQUdDLFFBQVEsQ0FBQyxHQUFHO0lBQ3RFLE9BQU8sQ0FBQyxFQUFFLElBQUlDLEtBQUtOLE9BQU9PLFdBQVcsR0FBR0gsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUVGLFlBQVksQ0FBQyxDQUFDO0FBQ3pFO0FBQ08sU0FBU00sMkJBQTJCUixLQUFLLEVBQUVTLEtBQUssRUFBRVIsaUJBQWlCLENBQUM7SUFDdkUsTUFBTVMsaUNBQWlDWCxrQ0FBa0NDLE9BQU9DO0lBQ2hGLE9BQU87UUFDSFUsYUFBYWYscUJBQXFCYyxrQ0FBa0NEO1FBQ3BFQztJQUNKO0FBQ0o7QUFDQTs7Q0FFQyxHQUNELE1BQU1FO0lBQ0ZDLFlBQVlDLFFBQVEsRUFBRUMsSUFBSSxFQUFFQyxZQUFZLEVBQUVDLFFBQVEsQ0FBRTtRQUNoRDVCLE9BQU82QixjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FqQyxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDUixRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0MsWUFBWSxHQUFHQTtRQUNwQixJQUFJLENBQUNDLFFBQVEsR0FBR0E7SUFDcEI7SUFDQSxPQUFPTSxXQUFXRCxLQUFLLEVBQUU7UUFDckIsTUFBTUUsUUFBUUYsTUFBTUcsS0FBSyxDQUFDO1FBQzFCLElBQUlYLFdBQVcsQ0FBQztRQUNoQixJQUFJQyxPQUFPLEVBQUU7UUFDYixJQUFJQztRQUNKLElBQUlDO1FBQ0osS0FBSyxNQUFNUyxRQUFRRixNQUFPO1lBQ3RCLE1BQU0sQ0FBQzlCLEtBQUtpQyxTQUFTLEdBQUdELEtBQUtELEtBQUssQ0FBQztZQUNuQyxNQUFNSCxRQUFRTSxtQkFBbUJEO1lBQ2pDLElBQUlqQyxRQUFRLHNCQUFzQjtnQkFDOUJvQixXQUFXZSxLQUFLQyxLQUFLLENBQUNSO1lBQzFCLE9BQ0ssSUFBSTVCLFFBQVEsa0JBQWtCO2dCQUMvQnFCLE9BQU9PLE1BQU1HLEtBQUssQ0FBQztZQUN2QixPQUNLLElBQUkvQixRQUFRLHFCQUFxQjtnQkFDbENzQixlQUFlTTtZQUNuQixPQUNLLElBQUk1QixRQUFRLHNCQUFzQjtnQkFDbkN1QixXQUFXWSxLQUFLQyxLQUFLLENBQUNSO1lBQzFCO1FBQ0o7UUFDQSxPQUFPLElBQUlWLFFBQVFFLFVBQVVDLE1BQU1DLGNBQWNDO0lBQ3JEO0lBQ0FjLFdBQVc7UUFDUCxNQUFNUCxRQUFRLEVBQUU7UUFDaEIsSUFBSSxJQUFJLENBQUNWLFFBQVEsSUFBSXpCLE9BQU9DLElBQUksQ0FBQyxJQUFJLENBQUN3QixRQUFRLEVBQUVrQixNQUFNLEdBQUcsR0FBRztZQUN4RFIsTUFBTVMsSUFBSSxDQUFDLENBQUMsbUJBQW1CLEVBQUVDLG1CQUFtQkwsS0FBS00sU0FBUyxDQUFDLElBQUksQ0FBQ3JCLFFBQVEsR0FBRyxDQUFDO1FBQ3hGO1FBQ0EsSUFBSSxJQUFJLENBQUNDLElBQUksSUFBSSxJQUFJLENBQUNBLElBQUksQ0FBQ2lCLE1BQU0sR0FBRyxHQUFHO1lBQ25DUixNQUFNUyxJQUFJLENBQUMsQ0FBQyxlQUFlLEVBQUVDLG1CQUFtQixJQUFJLENBQUNuQixJQUFJLENBQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDO1FBQzFFO1FBQ0EsSUFBSSxJQUFJLENBQUNxQixZQUFZLEVBQUU7WUFDbkJRLE1BQU1TLElBQUksQ0FBQyxDQUFDLGtCQUFrQixFQUFFQyxtQkFBbUIsSUFBSSxDQUFDbEIsWUFBWSxFQUFFLENBQUM7UUFDM0U7UUFDQSxPQUFPUSxNQUFNN0IsSUFBSSxDQUFDO0lBQ3RCO0FBQ0o7QUFDTyxNQUFNeUM7SUFDVHZCLFlBQVl3QixjQUFjLENBQUU7UUFDeEJoRCxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSxNQUFNO1lBQzlCQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQWpDLE9BQU82QixjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FqQyxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FqQyxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSxpQkFBaUI7WUFDekNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FqQyxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQWpDLE9BQU82QixjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FqQyxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQWpDLE9BQU82QixjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FqQyxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQWpDLE9BQU82QixjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsd0JBQXdCO1lBQ2hEQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQWpDLE9BQU82QixjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FqQyxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQWpDLE9BQU82QixjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FqQyxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSxrQkFBa0I7WUFDMUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQWpDLE9BQU82QixjQUFjLENBQUMsSUFBSSxFQUFFLHlCQUF5QjtZQUNqREMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0E7OztTQUdDLEdBQ0RqQyxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQTs7U0FFQyxHQUNEakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FqQyxPQUFPNkIsY0FBYyxDQUFDLElBQUksRUFBRSx1QkFBdUI7WUFDL0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBakMsT0FBTzZCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsMEJBQTBCO1lBQ2xEQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSw2REFBNkQ7UUFDN0QsSUFBSWdCLFVBQVVELGlCQUFpQjtZQUMzQmhELE9BQU9rRCxNQUFNLENBQUMsSUFBSSxFQUFFO2dCQUFFLEdBQUdGLGNBQWM7WUFBQztZQUN4QztRQUNKO1FBQ0EsTUFBTUcsZ0JBQWdCSixRQUFRSyxnQkFBZ0I7UUFDOUMsTUFBTSxFQUFFM0IsUUFBUSxFQUFFLEdBQUc0QixRQUFRLEdBQUdMO1FBQ2hDLE1BQU1NLFNBQVNELE9BQU9DLE1BQU0sSUFBSVAsUUFBUVEsZUFBZTtRQUN2RCxNQUFNQyxrQkFBa0I7WUFDcEIsR0FBRy9CLFFBQVE7WUFDWCxHQUFHNEIsUUFBUUksT0FBT2hDLFFBQVE7UUFDOUI7UUFDQTRCLE9BQU9JLEtBQUssR0FBRztZQUFFLEdBQUdKLE9BQU9JLEtBQUs7WUFBRWhDLFVBQVUrQjtRQUFnQjtRQUM1RCxJQUFJLFFBQVFILFVBQVVBLE9BQU9LLEVBQUUsSUFBSSxNQUFNO1lBQ3JDLE9BQU9MLE9BQU9LLEVBQUU7UUFDcEI7UUFDQTFELE9BQU9rRCxNQUFNLENBQUMsSUFBSSxFQUFFO1lBQUUsR0FBR0MsYUFBYTtZQUFFLEdBQUdFLE1BQU07WUFBRUM7UUFBTztRQUMxRCxJQUFJLENBQUNLLGVBQWUsS0FBSztRQUN6QixJQUFJLENBQUNDLHFCQUFxQixLQUFLO1FBQy9CLG1EQUFtRDtRQUNuRCxJQUFJLENBQUMsSUFBSSxDQUFDQyxZQUFZLEVBQUU7WUFDcEIsSUFBSSxDQUFDQyxzQkFBc0IsR0FBR3BELGtDQUFrQyxJQUFJLENBQUNxRCxVQUFVLEVBQUUsSUFBSSxDQUFDSixlQUFlO1FBQ3pHO1FBQ0EseURBQXlEO1FBQ3pELElBQUksQ0FBQyxJQUFJLENBQUNELEVBQUUsRUFBRTtZQUNWLElBQUksQ0FBQ0EsRUFBRSxHQUFHbEUsNkRBQWFBLENBQUMsSUFBSSxDQUFDc0Usc0JBQXNCLElBQUksSUFBSSxDQUFDQyxVQUFVO1FBQzFFO1FBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQ0MsUUFBUSxFQUFFO1lBQ2hCLElBQUksSUFBSSxDQUFDQyxVQUFVLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQ0QsUUFBUSxHQUFHLElBQUksQ0FBQ0MsVUFBVSxDQUFDRCxRQUFRLElBQUksSUFBSSxDQUFDTixFQUFFO1lBQ3ZELE9BQ0s7Z0JBQ0QsSUFBSSxDQUFDTSxRQUFRLEdBQUcsSUFBSSxDQUFDTixFQUFFO1lBQzNCO1FBQ0o7UUFDQSxJQUFJLENBQUM5QixRQUFRLEdBQUdzQyxxQkFBcUIsSUFBSSxDQUFDdEMsUUFBUTtRQUNsRCw4Q0FBOEM7UUFDOUMsSUFBSSxDQUFDLElBQUksQ0FBQ2lDLFlBQVksRUFBRTtZQUNwQixNQUFNLEVBQUV2QyxXQUFXLEVBQUUsR0FBR0gsMkJBQTJCLElBQUksQ0FBQzRDLFVBQVUsRUFBRSxJQUFJLENBQUNMLEVBQUUsRUFBRSxJQUFJLENBQUNDLGVBQWU7WUFDakcsSUFBSSxJQUFJLENBQUNNLFVBQVUsRUFBRTtnQkFDakIsSUFBSSxDQUFDSixZQUFZLEdBQUcsSUFBSSxDQUFDSSxVQUFVLENBQUNKLFlBQVksR0FBRyxNQUFNdkM7WUFDN0QsT0FDSztnQkFDRCxJQUFJLENBQUN1QyxZQUFZLEdBQUd2QztZQUN4QjtRQUNKO0lBQ0o7SUFDQSxJQUFJRyxTQUFTQSxRQUFRLEVBQUU7UUFDbkIsSUFBSSxDQUFDZ0MsS0FBSyxHQUFHO1lBQ1QsR0FBRyxJQUFJLENBQUNBLEtBQUs7WUFDYmhDLFVBQVU7Z0JBQ04sR0FBRyxJQUFJLENBQUNnQyxLQUFLLEVBQUVoQyxRQUFRO2dCQUN2QixHQUFHQSxRQUFRO1lBQ2Y7UUFDSjtJQUNKO0lBQ0EsSUFBSUEsV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDZ0MsS0FBSyxFQUFFaEM7SUFDdkI7SUFDQSxPQUFPMkIsbUJBQW1CO1FBQ3RCLE1BQU1XLGFBQWE5QyxLQUFLa0QsR0FBRztRQUMzQixPQUFPO1lBQ0hDLFVBQVU7WUFDVnpDLGNBQWN0Qyx3RUFBcUJBO1lBQ25DZ0YsWUFBWSxFQUFFO1lBQ2RDLFNBQVNuRixxRUFBc0JBLENBQUMseUJBQXlCO1lBQ3pEb0YsU0FBU3BGLHFFQUFzQkEsQ0FBQztZQUNoQ3FGLGdCQUFnQixDQUFDO1lBQ2pCVDtZQUNBVSxZQUFZLENBQUM7WUFDYkMsUUFBUSxDQUFDO1lBQ1RqQixPQUFPLENBQUM7UUFDWjtJQUNKO0lBQ0EsT0FBT0Ysa0JBQWtCO1FBQ3JCLElBQUksQ0FBQ1IsUUFBUTRCLFlBQVksRUFBRTtZQUN2QjVCLFFBQVE0QixZQUFZLEdBQUcsSUFBSWhHLDhDQUFNQTtRQUNyQztRQUNBLE9BQU9vRSxRQUFRNEIsWUFBWTtJQUMvQjtJQUNBQyxZQUFZdkIsTUFBTSxFQUFFO1FBQ2hCLE1BQU1PLHdCQUF3QixJQUFJLENBQUNBLHFCQUFxQixHQUFHO1FBQzNELCtHQUErRztRQUMvRywyRkFBMkY7UUFDM0YsTUFBTWlCLG9CQUFvQixJQUFJLENBQUNqRCxRQUFRLEVBQUV4QixJQUFJLENBQUNOO1lBQzFDLE1BQU0sRUFBRWdGLE1BQU0sRUFBRSxHQUFHQyxNQUFNLEdBQUdqRjtZQUM1QixPQUFPaUY7UUFDWDtRQUNBLE1BQU1DLGdCQUFnQjNCLE9BQU96QixRQUFRLElBQUlpRDtRQUN6QyxNQUFNSSxRQUFRLElBQUlsQyxRQUFRO1lBQ3RCLEdBQUdNLE1BQU07WUFDVFksWUFBWSxJQUFJO1lBQ2hCdEMsY0FBYyxJQUFJLENBQUNBLFlBQVk7WUFDL0JDLFVBQVVvRDtZQUNWMUIsUUFBUSxJQUFJLENBQUNBLE1BQU07WUFDbkI0QixnQkFBZ0IsSUFBSSxDQUFDQSxjQUFjO1lBQ25DdkIsaUJBQWlCQztZQUNqQkEsdUJBQXVCQTtRQUMzQjtRQUNBLGdEQUFnRDtRQUNoRCxJQUFJN0UsK0VBQXlCQSxJQUFJLElBQUksRUFBRTtZQUNuQyw4REFBOEQ7WUFDOURrRyxLQUFLLENBQUNsRywrRUFBeUJBLENBQUMsR0FDNUIsSUFBSSxDQUFDQSwrRUFBeUJBLENBQUM7UUFDdkM7UUFDQSxNQUFNb0csV0FBV0MsT0FBT0MsR0FBRyxDQUFDO1FBQzVCLE1BQU1DLGdCQUFnQmpDLE9BQU9JLEtBQUssRUFBRSxDQUFDMEIsU0FBUyxJQUMxQyxJQUFJLENBQUMxQixLQUFLLENBQUMwQixTQUFTO1FBQ3hCLGdGQUFnRjtRQUNoRixJQUFJSSxxQkFBcUJELGdCQUFnQjtZQUNyQyxNQUFNRSxZQUFZO2dCQUFFLEdBQUdGLGFBQWE7WUFBQztZQUNyQyxNQUFNRyxZQUFZQyxzQkFBc0JGLFVBQVVDLFNBQVMsSUFDckRELFVBQVVDLFNBQVMsQ0FBQ0UsSUFBSSxPQUN4QkM7WUFDTixJQUFJSCxXQUFXO2dCQUNYLDJCQUEyQjtnQkFDM0J6RixPQUFPa0QsTUFBTSxDQUFDdUMsV0FBVztvQkFBRUksY0FBY1osTUFBTXZCLEVBQUU7Z0JBQUM7Z0JBQ2xELGtEQUFrRDtnQkFDbEQrQixVQUFVSyxRQUFRLEVBQ1pDLEtBQUtDLHdCQUNMQyxvQkFBb0JoQjtnQkFDMUJPLFVBQVVDLFNBQVMsR0FBR0E7WUFDMUI7WUFDQVIsTUFBTXhCLEtBQUssQ0FBQzBCLFNBQVMsR0FBR0s7UUFDNUI7UUFDQSwwQ0FBMEM7UUFDMUMsTUFBTVUsVUFBVSxJQUFJQztRQUNwQixJQUFJQyxVQUFVLElBQUk7UUFDbEIsTUFBT0EsV0FBVyxRQUFRLENBQUNGLFFBQVFHLEdBQUcsQ0FBQ0QsUUFBUTFDLEVBQUUsRUFBRztZQUNoRHdDLFFBQVFJLEdBQUcsQ0FBQ0YsUUFBUTFDLEVBQUU7WUFDdEIwQyxRQUFReEMscUJBQXFCLEdBQUcyQyxLQUFLQyxHQUFHLENBQUNKLFFBQVF4QyxxQkFBcUIsRUFBRUE7WUFDeEV3QyxVQUFVQSxRQUFRbkMsVUFBVTtRQUNoQztRQUNBLElBQUksQ0FBQ0ksVUFBVSxDQUFDekIsSUFBSSxDQUFDcUM7UUFDckIsT0FBT0E7SUFDWDtJQUNBLE1BQU13QixJQUFJQyxPQUFPLEVBQUVDLEtBQUssRUFBRUMsVUFBVTNGLEtBQUtrRCxHQUFHLEVBQUUsRUFBRTFDLFFBQVEsRUFBRTtRQUN0RCxJQUFJLENBQUNpRixPQUFPLEdBQUcsSUFBSSxDQUFDQSxPQUFPLElBQUlBO1FBQy9CLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSyxJQUFJQTtRQUMzQixJQUFJLENBQUNFLFFBQVEsR0FBRyxJQUFJLENBQUNBLFFBQVEsSUFBSUQ7UUFDakMsSUFBSW5GLFlBQVl6QixPQUFPQyxJQUFJLENBQUN3QixVQUFVa0IsTUFBTSxHQUFHLEdBQUc7WUFDOUMsSUFBSSxDQUFDYyxLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLEdBQ2pCO2dCQUFFLEdBQUcsSUFBSSxDQUFDQSxLQUFLO2dCQUFFaEMsVUFBVTtvQkFBRSxHQUFHLElBQUksQ0FBQ2dDLEtBQUssQ0FBQ2hDLFFBQVE7b0JBQUUsR0FBR0EsUUFBUTtnQkFBQztZQUFFLElBQ25FO2dCQUFFQTtZQUFTO1FBQ3JCO0lBQ0o7SUFDQXFGLGlCQUFpQkMsR0FBRyxFQUFFQyxVQUFVLEVBQUVDLG1CQUFtQixJQUFJLEVBQUU7UUFDdkQsTUFBTUMsV0FBV0gsSUFBSXRELEtBQUssSUFBSSxDQUFDO1FBQy9CLGdFQUFnRTtRQUNoRSxJQUFJeUQsVUFBVUMsU0FBU0MsWUFBWXhCLFdBQVc7WUFDMUMsSUFBSSxDQUFDc0IsU0FBU0MsT0FBTyxFQUFFO2dCQUNuQkQsU0FBU0MsT0FBTyxHQUFHLENBQUM7WUFDeEI7WUFDQSxJQUFJSCxZQUFZO2dCQUNaLEtBQUssTUFBTSxDQUFDSyxHQUFHQyxFQUFFLElBQUl0SCxPQUFPdUgsT0FBTyxDQUFDUCxZQUFhO29CQUM3QyxJQUFJLENBQUNFLFNBQVNDLE9BQU8sQ0FBQ0UsRUFBRSxFQUFFO3dCQUN0QkgsU0FBU0MsT0FBTyxDQUFDRSxFQUFFLEdBQUdDO29CQUMxQjtnQkFDSjtZQUNKO1FBQ0o7UUFDQSxJQUFJakQ7UUFDSixJQUFJbUQ7UUFDSixJQUFJLENBQUNQLGtCQUFrQjtZQUNuQjVDLGFBQWEwQyxJQUFJMUMsVUFBVSxDQUFDakUsR0FBRyxDQUFDLENBQUNxSCxZQUFjLElBQUksQ0FBQ1gsZ0JBQWdCLENBQUNXLFdBQVdULFlBQVlDO1lBQzVGTyxnQkFBZ0I1QjtRQUNwQixPQUNLO1lBQ0Q0QixnQkFBZ0JULElBQUk5QyxVQUFVLEVBQUVQLE1BQU1xRCxJQUFJUyxhQUFhO1lBQ3ZEbkQsYUFBYSxFQUFFO1FBQ25CO1FBQ0EsT0FBTztZQUNIWCxJQUFJcUQsSUFBSXJELEVBQUU7WUFDVmdFLE1BQU1YLElBQUlXLElBQUk7WUFDZDNELFlBQVlnRCxJQUFJakQsc0JBQXNCLElBQUlpRCxJQUFJaEQsVUFBVTtZQUN4RDhDLFVBQVVFLElBQUlGLFFBQVE7WUFDdEJ6QyxVQUFVMkMsSUFBSTNDLFFBQVE7WUFDdEJ1RCxzQkFBc0JaLElBQUlZLG9CQUFvQjtZQUM5Q2xFLE9BQU95RDtZQUNQekMsWUFBWXNDLElBQUl0QyxVQUFVO1lBQzFCa0MsT0FBT0ksSUFBSUosS0FBSztZQUNoQmpDLFFBQVFxQyxJQUFJckMsTUFBTTtZQUNsQmdDLFNBQVNLLElBQUlMLE9BQU87WUFDcEJrQixjQUFjYixJQUFJcEYsWUFBWTtZQUM5QjBDLFlBQVlBO1lBQ1ptRCxlQUFlQTtZQUNmeEQsVUFBVStDLElBQUkvQyxRQUFRO1lBQ3RCSCxjQUFja0QsSUFBSWxELFlBQVk7WUFDOUJuQyxNQUFNcUYsSUFBSXJGLElBQUk7WUFDZG1HLGFBQWFkLElBQUljLFdBQVc7WUFDNUJDLFFBQVFmLElBQUllLE1BQU07UUFDdEI7SUFDSjtJQUNBQyxlQUFlQyxRQUFRLEVBQUVqQixHQUFHLEVBQUU7UUFDMUI7Ozs7O1NBS0MsR0FDRCxJQUFJQSxJQUFJbEQsWUFBWSxFQUFFO1lBQ2xCLE1BQU1vRSxPQUFPbEIsSUFBSWxELFlBQVksQ0FBQ3pCLEtBQUssQ0FBQztZQUNwQyxJQUFJOEYsV0FBVztZQUNmLHNEQUFzRDtZQUN0RCxJQUFLLElBQUlDLE1BQU0sR0FBR0EsTUFBTUYsS0FBS3RGLE1BQU0sRUFBRXdGLE1BQU87Z0JBQ3hDLE1BQU1DLFFBQVFILElBQUksQ0FBQ0UsSUFBSSxDQUFDcEgsS0FBSyxDQUFDLENBQUNwQjtnQkFDL0IsSUFBSXlJLFVBQVVKLFVBQVU7b0JBQ3BCRSxXQUFXQztvQkFDWDtnQkFDSjtZQUNKO1lBQ0EsSUFBSUQsYUFBYSxNQUFNO2dCQUNuQixxREFBcUQ7Z0JBQ3JELE1BQU1HLGNBQWNKLEtBQUtsSCxLQUFLLENBQUNtSCxXQUFXO2dCQUMxQyx1QkFBdUI7Z0JBQ3ZCbkIsSUFBSWxELFlBQVksR0FBR3dFLFlBQVkvSCxJQUFJLENBQUM7Z0JBQ3BDLElBQUkrSCxZQUFZMUYsTUFBTSxHQUFHLEdBQUc7b0JBQ3hCb0UsSUFBSS9DLFFBQVEsR0FBR3FFLFdBQVcsQ0FBQyxFQUFFLENBQUN0SCxLQUFLLENBQUMsQ0FBQ3BCO2dCQUN6QyxPQUNLO29CQUNEb0gsSUFBSS9DLFFBQVEsR0FBRytDLElBQUlyRCxFQUFFO2dCQUN6QjtZQUNKO1FBQ0o7UUFDQSxJQUFJcUQsSUFBSVMsYUFBYSxLQUFLUSxVQUFVO1lBQ2hDLGlDQUFpQztZQUNqQ2pCLElBQUlTLGFBQWEsR0FBRzVCO1FBQ3hCO0lBQ0o7SUFDQTBDLHFCQUFxQkMsVUFBVSxFQUFFQyxXQUFXLEVBQUU7UUFDMUMsNkVBQTZFO1FBQzdFLE1BQU1DLG9CQUFvQnhKLHFFQUFhQSxDQUFDLElBQUksRUFBRUQsOEVBQXdCQSxLQUFLLENBQUM7UUFDNUV5SixpQkFBaUIsQ0FBQ0YsV0FBVyxHQUFHQztRQUNoQ3RKLHFFQUFhQSxDQUFDLElBQUksRUFBRUYsOEVBQXdCQSxFQUFFeUo7UUFDOUMsOERBQThEO1FBQzlELDhDQUE4QztRQUM5QyxLQUFLLE1BQU14RCxTQUFTLElBQUksQ0FBQ1osVUFBVSxDQUFFO1lBQ2pDWSxNQUFNcUQsb0JBQW9CLENBQUNDLFlBQVlDO1FBQzNDO0lBQ0o7SUFDQUUsaUJBQWlCQyxNQUFNLEVBQUU7UUFDckIsTUFBTSxFQUFFQyxXQUFXLEVBQUU1QixVQUFVLEVBQUVDLG1CQUFtQixJQUFJLEVBQUVuQyxTQUFTLEtBQUssRUFBRStELG1CQUFtQixFQUFFQyxNQUFNLEVBQUVDLE1BQU0sRUFBRUMsV0FBVyxFQUFHLEdBQUdMO1FBQ2hJLE1BQU1NLFVBQVUsSUFBSSxDQUFDbkMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFRSxZQUFZQztRQUN4RCw2Q0FBNkM7UUFDN0MsSUFBSTJCLGdCQUFnQixJQUFJLENBQUNqSCxZQUFZLEVBQUU7WUFDbkMsT0FBTztnQkFDSCxHQUFHc0gsT0FBTztnQkFDVnJCLGNBQWNnQjtZQUNsQjtRQUNKO1FBQ0EseUNBQXlDO1FBQ3pDLElBQUk5RCxRQUFRO1lBQ1IsSUFBSStELHFCQUFxQjtnQkFDckIsMERBQTBEO2dCQUMxRCxJQUFJLENBQUNkLGNBQWMsQ0FBQ2MscUJBQXFCSTtZQUM3QyxPQUNLO2dCQUNELCtEQUErRDtnQkFDL0QscURBQXFEO2dCQUNyREEsUUFBUXpCLGFBQWEsR0FBRzVCO2dCQUN4Qix5Q0FBeUM7Z0JBQ3pDLElBQUlxRCxRQUFRcEYsWUFBWSxFQUFFO29CQUN0QixzQ0FBc0M7b0JBQ3RDLE1BQU1vRSxPQUFPZ0IsUUFBUXBGLFlBQVksQ0FBQ3pCLEtBQUssQ0FBQztvQkFDeEMsSUFBSTZGLEtBQUt0RixNQUFNLEdBQUcsR0FBRzt3QkFDakJzRyxRQUFRcEYsWUFBWSxHQUFHb0UsSUFBSSxDQUFDQSxLQUFLdEYsTUFBTSxHQUFHLEVBQUU7d0JBQzVDc0csUUFBUWpGLFFBQVEsR0FBR2lGLFFBQVF2RixFQUFFO29CQUNqQztnQkFDSjtZQUNKO1lBQ0Esc0ZBQXNGO1lBQ3RGLGlGQUFpRjtZQUNqRixNQUFNNkUsYUFBYTFJLGNBQWM7Z0JBQzdCK0k7Z0JBQ0FFO2dCQUNBQztnQkFDQUM7WUFDSjtZQUNBLElBQUksQ0FBQ1Ysb0JBQW9CLENBQUNDLFlBQVlVLFFBQVF2RixFQUFFO1FBQ3BEO1FBQ0EsaUZBQWlGO1FBQ2pGLDZFQUE2RTtRQUM3RSxJQUFJd0Y7UUFDSixJQUFJLENBQUNwRSxRQUFRO1lBQ1QsTUFBTTJELG9CQUFvQnhKLHFFQUFhQSxDQUFDLElBQUksRUFBRUQsOEVBQXdCQSxLQUFLLENBQUM7WUFDNUUsTUFBTXVKLGFBQWExSSxjQUFjO2dCQUM3QitJO2dCQUNBRTtnQkFDQUM7Z0JBQ0FDO1lBQ0o7WUFDQUUsMEJBQTBCVCxpQkFBaUIsQ0FBQ0YsV0FBVztZQUN2RCxJQUFJVyx5QkFBeUI7Z0JBQ3pCLGlFQUFpRTtnQkFDakUsc0ZBQXNGO2dCQUN0RkQsUUFBUWpGLFFBQVEsR0FBR2tGO2dCQUNuQiwrREFBK0Q7Z0JBQy9ELHlFQUF5RTtnQkFDekUsSUFBSUQsUUFBUXBGLFlBQVksRUFBRTtvQkFDdEIsTUFBTW9FLE9BQU9nQixRQUFRcEYsWUFBWSxDQUFDekIsS0FBSyxDQUFDO29CQUN4QyxJQUFJK0csVUFBVTtvQkFDZCxvREFBb0Q7b0JBQ3BELElBQUssSUFBSWhCLE1BQU0sR0FBR0EsTUFBTUYsS0FBS3RGLE1BQU0sRUFBRXdGLE1BQU87d0JBQ3hDLE1BQU1DLFFBQVFILElBQUksQ0FBQ0UsSUFBSSxDQUFDcEgsS0FBSyxDQUFDLENBQUNwQjt3QkFDL0IsSUFBSXlJLFVBQVVjLHlCQUF5Qjs0QkFDbkNDLFVBQVVoQjs0QkFDVjt3QkFDSjtvQkFDSjtvQkFDQSxJQUFJZ0IsWUFBWSxNQUFNO3dCQUNsQiw0Q0FBNEM7d0JBQzVDLE1BQU1kLGNBQWNKLEtBQUtsSCxLQUFLLENBQUNvSTt3QkFDL0JGLFFBQVFwRixZQUFZLEdBQUd3RSxZQUFZL0gsSUFBSSxDQUFDO29CQUM1QztnQkFDSjtZQUNKO1FBQ0o7UUFDQSx3REFBd0Q7UUFDeEQsMkRBQTJEO1FBQzNELE1BQU04SSxRQUFRSCxRQUFRdkYsRUFBRTtRQUN4QixNQUFNMkYsUUFBUTNKLGdEQUFNQSxDQUFDLENBQUMsRUFBRTBKLE1BQU0sQ0FBQyxFQUFFUixZQUFZLENBQUMsRUFBRWhKO1FBQ2hELGlCQUFpQjtRQUNqQixJQUFJMEo7UUFDSixJQUFJTCxRQUFRakYsUUFBUSxFQUFFO1lBQ2xCc0YsYUFBYTVKLGdEQUFNQSxDQUFDLENBQUMsRUFBRXVKLFFBQVFqRixRQUFRLENBQUMsQ0FBQyxFQUFFNEUsWUFBWSxDQUFDLEVBQUVoSjtRQUM5RCxPQUNLO1lBQ0QwSixhQUFhRDtRQUNqQjtRQUNBLHNCQUFzQjtRQUN0QixJQUFJRTtRQUNKLElBQUlOLFFBQVF6QixhQUFhLEVBQUU7WUFDdkIrQixjQUFjN0osZ0RBQU1BLENBQUMsQ0FBQyxFQUFFdUosUUFBUXpCLGFBQWEsQ0FBQyxDQUFDLEVBQUVvQixZQUFZLENBQUMsRUFBRWhKO1FBQ3BFO1FBQ0EsOEJBQThCO1FBQzlCLElBQUk0SjtRQUNKLElBQUlQLFFBQVFwRixZQUFZLEVBQUU7WUFDdEIsTUFBTW9FLE9BQU9nQixRQUFRcEYsWUFBWSxDQUFDekIsS0FBSyxDQUFDO1lBQ3hDLE1BQU1xSCxlQUFleEIsS0FBSzdILEdBQUcsQ0FBQyxDQUFDc0o7Z0JBQzNCLHVFQUF1RTtnQkFDdkUsTUFBTXRCLFFBQVFzQixJQUFJM0ksS0FBSyxDQUFDLENBQUNwQjtnQkFDekIsTUFBTWdLLGFBQWFqSyxnREFBTUEsQ0FBQyxDQUFDLEVBQUUwSSxNQUFNLENBQUMsRUFBRVEsWUFBWSxDQUFDLEVBQUVoSjtnQkFDckQsMkRBQTJEO2dCQUMzRCxPQUFPOEosSUFBSTNJLEtBQUssQ0FBQyxHQUFHLENBQUNwQixvQkFBb0JnSztZQUM3QztZQUNBSCxpQkFBaUJDLGFBQWFuSixJQUFJLENBQUM7UUFDdkM7UUFDQSxPQUFPO1lBQ0gsR0FBRzJJLE9BQU87WUFDVnZGLElBQUkyRjtZQUNKckYsVUFBVXNGO1lBQ1Y5QixlQUFlK0I7WUFDZjFGLGNBQWMyRjtZQUNkNUIsY0FBY2dCO1FBQ2xCO0lBQ0o7SUFDQSxNQUFNZ0IsUUFBUTNDLG1CQUFtQixJQUFJLEVBQUU7UUFDbkMsSUFBSTtZQUNBLE1BQU1ELGFBQWE1SCxvRUFBcUJBO1lBQ3hDLElBQUksSUFBSSxDQUFDd0MsUUFBUSxJQUFJLElBQUksQ0FBQ0EsUUFBUSxDQUFDZSxNQUFNLEdBQUcsR0FBRztnQkFDM0MsS0FBSyxNQUFNLEVBQUVpRyxXQUFXLEVBQUVHLE1BQU0sRUFBRUQsTUFBTSxFQUFFRSxXQUFXLEVBQUVsRSxNQUFNLEVBQUUsSUFBSSxJQUFJLENBQ2xFbEQsUUFBUSxDQUFFO29CQUNYLE1BQU1pSSxZQUFZLElBQUksQ0FBQ25CLGdCQUFnQixDQUFDO3dCQUNwQ0UsYUFBYUEsZUFBZSxJQUFJLENBQUNqSCxZQUFZO3dCQUM3Q3FGO3dCQUNBQyxrQkFBa0I7d0JBQ2xCbkM7d0JBQ0ErRCxxQkFBcUIsSUFBSSxDQUFDQSxtQkFBbUI7d0JBQzdDQzt3QkFDQUM7d0JBQ0FDO29CQUNKO29CQUNBLE1BQU0sSUFBSSxDQUFDMUYsTUFBTSxDQUFDd0csU0FBUyxDQUFDRCxXQUFXO3dCQUNuQ2Q7d0JBQ0FEO3dCQUNBRTtvQkFDSjtnQkFDSjtZQUNKLE9BQ0s7Z0JBQ0QsTUFBTWEsWUFBWSxJQUFJLENBQUMvQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUVFLFlBQVlDO2dCQUMxRCxNQUFNLElBQUksQ0FBQzNELE1BQU0sQ0FBQ3dHLFNBQVMsQ0FBQ0Q7WUFDaEM7WUFDQSxJQUFJLENBQUM1QyxrQkFBa0I7Z0JBQ25CMUgsd0RBQVFBLENBQUM7Z0JBQ1QsS0FBSyxNQUFNd0ssWUFBWSxJQUFJLENBQUMxRixVQUFVLENBQUU7b0JBQ3BDLE1BQU0wRixTQUFTSCxPQUFPLENBQUM7Z0JBQzNCO1lBQ0o7UUFDSixFQUNBLE9BQU9qRCxPQUFPO1lBQ1ZxRCxRQUFRckQsS0FBSyxDQUFDLENBQUMseUJBQXlCLEVBQUUsSUFBSSxDQUFDakQsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFaUQ7UUFDMUQ7SUFDSjtJQUNBLE1BQU1zRCxTQUFTQyxPQUFPLEVBQUU7UUFDcEIsSUFBSSxJQUFJLENBQUN0SSxRQUFRLElBQUksSUFBSSxDQUFDQSxRQUFRLENBQUNlLE1BQU0sR0FBRyxHQUFHO1lBQzNDLEtBQUssTUFBTSxFQUFFaUcsV0FBVyxFQUFFRyxNQUFNLEVBQUVELE1BQU0sRUFBRUUsV0FBVyxFQUFFbUIsT0FBTyxFQUFFckYsTUFBTSxFQUFHLElBQUksSUFBSSxDQUFDbEQsUUFBUSxDQUFFO2dCQUN4RixNQUFNd0ksVUFBVSxJQUFJLENBQUMxQixnQkFBZ0IsQ0FBQztvQkFDbENFLGFBQWFBLGVBQWUsSUFBSSxDQUFDakgsWUFBWTtvQkFDN0NxRixZQUFZcEI7b0JBQ1pxQixrQkFBa0I7b0JBQ2xCbkM7b0JBQ0ErRCxxQkFBcUIsSUFBSSxDQUFDQSxtQkFBbUI7b0JBQzdDQztvQkFDQUM7b0JBQ0FDO2dCQUNKO2dCQUNBLE1BQU1xQixnQkFBZ0I7b0JBQ2xCM0csSUFBSTBHLFFBQVExRyxFQUFFO29CQUNkZ0UsTUFBTTBDLFFBQVExQyxJQUFJO29CQUNsQnRELFVBQVVnRyxRQUFRaEcsUUFBUTtvQkFDMUJMLFlBQVlxRyxRQUFRckcsVUFBVTtvQkFDOUIyQyxTQUFTMEQsUUFBUTFELE9BQU87b0JBQ3hCQyxPQUFPeUQsUUFBUXpELEtBQUs7b0JBQ3BCYSxlQUFlNEMsUUFBUTVDLGFBQWE7b0JBQ3BDSSxjQUFjd0MsUUFBUXhDLFlBQVk7b0JBQ2xDRCxzQkFBc0J5QyxRQUFRekMsb0JBQW9CO29CQUNsRGQsVUFBVXVELFFBQVF2RCxRQUFRO29CQUMxQmhELGNBQWN1RyxRQUFRdkcsWUFBWTtvQkFDbENHLFVBQVVvRyxRQUFRcEcsUUFBUTtvQkFDMUI4RCxRQUFRc0MsUUFBUXRDLE1BQU07b0JBQ3RCcEcsTUFBTTBJLFFBQVExSSxJQUFJO29CQUNsQitCLE9BQU8yRyxRQUFRM0csS0FBSztvQkFDcEJvRSxhQUFhLElBQUksQ0FBQ0EsV0FBVztvQkFDN0IsR0FBR3NDLE9BQU87Z0JBQ2Q7Z0JBQ0EsdURBQXVEO2dCQUN2RCw4REFBOEQ7Z0JBQzlELDRDQUE0QztnQkFDNUMsSUFBSSxDQUFDRCxTQUFTSSxlQUFlO29CQUN6QkQsY0FBYzNGLE1BQU0sR0FBRzBGLFFBQVExRixNQUFNO2dCQUN6QztnQkFDQSxNQUFNLElBQUksQ0FBQ3BCLE1BQU0sQ0FBQ2lILFNBQVMsQ0FBQ0gsUUFBUTFHLEVBQUUsRUFBRTJHLGVBQWU7b0JBQ25EdEI7b0JBQ0FEO29CQUNBRTtnQkFDSjtZQUNKO1FBQ0osT0FDSztZQUNELElBQUk7Z0JBQ0EsTUFBTXdCLFlBQVk7b0JBQ2Q5QyxNQUFNLElBQUksQ0FBQ0EsSUFBSTtvQkFDZnRELFVBQVUsSUFBSSxDQUFDQSxRQUFRO29CQUN2QkwsWUFBWSxJQUFJLENBQUNELHNCQUFzQixJQUFJLElBQUksQ0FBQ0MsVUFBVTtvQkFDMUQ4QyxVQUFVLElBQUksQ0FBQ0EsUUFBUTtvQkFDdkJGLE9BQU8sSUFBSSxDQUFDQSxLQUFLO29CQUNqQkQsU0FBUyxJQUFJLENBQUNBLE9BQU87b0JBQ3JCYyxlQUFlLElBQUksQ0FBQ3ZELFVBQVUsRUFBRVAsTUFBTSxJQUFJLENBQUM4RCxhQUFhO29CQUN4REcsc0JBQXNCLElBQUksQ0FBQ0Esb0JBQW9CO29CQUMvQ2xFLE9BQU8sSUFBSSxDQUFDQSxLQUFLO29CQUNqQnFFLFFBQVEsSUFBSSxDQUFDQSxNQUFNO29CQUNuQmpFLGNBQWMsSUFBSSxDQUFDQSxZQUFZO29CQUMvQkcsVUFBVSxJQUFJLENBQUNBLFFBQVE7b0JBQ3ZCdEMsTUFBTSxJQUFJLENBQUNBLElBQUk7b0JBQ2ZtRyxhQUFhLElBQUksQ0FBQ0EsV0FBVztvQkFDN0JELGNBQWMsSUFBSSxDQUFDakcsWUFBWTtnQkFDbkM7Z0JBQ0EsdURBQXVEO2dCQUN2RCw4REFBOEQ7Z0JBQzlELDRDQUE0QztnQkFDNUMsSUFBSSxDQUFDdUksU0FBU0ksZUFBZTtvQkFDekJFLFVBQVU5RixNQUFNLEdBQUcsSUFBSSxDQUFDQSxNQUFNO2dCQUNsQztnQkFDQSxNQUFNLElBQUksQ0FBQ3BCLE1BQU0sQ0FBQ2lILFNBQVMsQ0FBQyxJQUFJLENBQUM3RyxFQUFFLEVBQUU4RztZQUN6QyxFQUNBLE9BQU83RCxPQUFPO2dCQUNWcUQsUUFBUXJELEtBQUssQ0FBQyxDQUFDLDBCQUEwQixFQUFFLElBQUksQ0FBQ2pELEVBQUUsQ0FBQyxDQUFDLEVBQUVpRDtZQUMxRDtRQUNKO0lBQ0o7SUFDQThELFNBQVM7UUFDTCxPQUFPLElBQUksQ0FBQzNELGdCQUFnQixDQUFDLElBQUksRUFBRWxCLFdBQVc7SUFDbEQ7SUFDQTs7O0tBR0MsR0FDRDhFLFNBQVNDLEtBQUssRUFBRTtRQUNaLElBQUksQ0FBQyxJQUFJLENBQUM3QyxNQUFNLEVBQUU7WUFDZCxJQUFJLENBQUNBLE1BQU0sR0FBRyxFQUFFO1FBQ3BCO1FBQ0EsSUFBSSxPQUFPNkMsVUFBVSxVQUFVO1lBQzNCLElBQUksQ0FBQzdDLE1BQU0sQ0FBQ2xGLElBQUksQ0FBQztnQkFDYjhFLE1BQU07Z0JBQ05rRCxNQUFNLElBQUkzSixPQUFPQyxXQUFXO2dCQUM1QjJKLFNBQVNGO1lBQ2I7UUFDSixPQUNLO1lBQ0QsSUFBSSxDQUFDN0MsTUFBTSxDQUFDbEYsSUFBSSxDQUFDO2dCQUNiLEdBQUcrSCxLQUFLO2dCQUNSQyxNQUFNRCxNQUFNQyxJQUFJLElBQUksSUFBSTNKLE9BQU9DLFdBQVc7WUFDOUM7UUFDSjtJQUNKO0lBQ0EsT0FBTzRKLG1CQUFtQkMsWUFBWSxFQUFFQyxLQUFLLEVBQUU7UUFDM0MsbURBQW1EO1FBQ25ELE1BQU1DLGtCQUFrQkYsY0FBY3RGO1FBQ3RDLElBQUl5RjtRQUNKLElBQUl0QztRQUNKLElBQUl0RjtRQUNKLElBQUk0QixpQkFBaUJ0Ryx5REFBZ0JBO1FBQ3JDLElBQUlxTSxpQkFBaUI7WUFDakIsTUFBTUUsY0FBY0YsaUJBQWlCRyxzQkFBc0I7WUFDM0QsTUFBTUMsa0JBQWtCSixpQkFBaUJuRixVQUFVQyxLQUFLLENBQUN1RixVQUFZQSxTQUFTNUQsUUFBUTtZQUN0RndELFlBQVlHLGlCQUFpQkUsU0FBU0o7WUFDdEN2QyxjQUFjeUMsaUJBQWlCekM7WUFDL0J0RixTQUFTK0gsaUJBQWlCL0g7WUFDMUI0QixpQkFBaUJBLGtCQUFrQixDQUFDLENBQUNtRztRQUN6QztRQUNBLElBQUksQ0FBQ0gsV0FBVztZQUNaLE9BQU8sSUFBSW5JLFFBQVE7Z0JBQ2YsR0FBR2lJLEtBQUs7Z0JBQ1IxSDtnQkFDQTRCO2dCQUNBdkQsY0FBY2lIO1lBQ2xCO1FBQ0o7UUFDQSxNQUFNNEMsZ0JBQWdCLElBQUl6SSxRQUFRO1lBQzlCMkUsTUFBTXdELFVBQVV4RCxJQUFJO1lBQ3BCaEUsSUFBSXdILFVBQVV4SCxFQUFFO1lBQ2hCTSxVQUFVa0gsVUFBVWxILFFBQVE7WUFDNUJILGNBQWNxSCxVQUFVckgsWUFBWTtZQUNwQ1A7WUFDQTRCO1lBQ0F2RCxjQUFjaUg7WUFDZGxILE1BQU07bUJBQ0MsSUFBSXlFLElBQUksQ0FBQytFLFdBQVd4SixRQUFRLEVBQUUsRUFBRStKLE1BQU0sQ0FBQ1YsY0FBY3JKLFFBQVEsRUFBRTthQUNyRTtZQUNEK0IsT0FBTztnQkFDSGhDLFVBQVU7b0JBQ04sR0FBR3lKLFdBQVd6SCxPQUFPaEMsUUFBUTtvQkFDN0IsR0FBR3NKLGNBQWN0SixRQUFRO2dCQUM3QjtZQUNKO1FBQ0o7UUFDQSxPQUFPK0osY0FBYzVHLFdBQVcsQ0FBQ29HO0lBQ3JDO0lBQ0EsT0FBT1UsZ0JBQWdCcEssV0FBVyxFQUFFO1FBQ2hDLE9BQU8sSUFBSSxDQUFDcUssV0FBVyxDQUFDO1lBQUUsbUJBQW1Ccks7UUFBWTtJQUM3RDtJQUNBLE9BQU9xSyxZQUFZQyxPQUFPLEVBQUVDLFdBQVcsRUFBRTtRQUNyQyxNQUFNQyxhQUFhLFNBQVNGLFdBQVcsT0FBT0EsUUFBUUcsR0FBRyxLQUFLLGFBQ3hEO1lBQ0UsbUJBQW1CSCxRQUFRRyxHQUFHLENBQUM7WUFDL0JDLFNBQVNKLFFBQVFHLEdBQUcsQ0FBQztRQUN6QixJQUNFSDtRQUNOLE1BQU1LLGNBQWNILFVBQVUsQ0FBQyxrQkFBa0I7UUFDakQsSUFBSSxDQUFDRyxlQUFlLE9BQU9BLGdCQUFnQixVQUN2QyxPQUFPckc7UUFDWCxNQUFNc0csb0JBQW9CRCxZQUFZRSxJQUFJO1FBQzFDLE1BQU1DLG9CQUFvQkYsa0JBQWtCOUosS0FBSyxDQUFDLEtBQUtoQyxHQUFHLENBQUMsQ0FBQ2lNO1lBQ3hELE1BQU0sQ0FBQ0MsU0FBU0MsS0FBSyxHQUFHRixLQUFLakssS0FBSyxDQUFDO1lBQ25DLE9BQU87Z0JBQUVrSztnQkFBUzFCLE1BQU0zSixLQUFLd0IsS0FBSyxDQUFDNkosVUFBVTtnQkFBTUM7WUFBSztRQUM1RDtRQUNBLE1BQU1DLFVBQVVKLGlCQUFpQixDQUFDLEVBQUUsQ0FBQ0csSUFBSTtRQUN6QyxNQUFNbEosU0FBUztZQUNYLEdBQUd3SSxXQUFXO1lBQ2RuRSxNQUFNbUUsYUFBYSxDQUFDLE9BQU8sSUFBSTtZQUMvQnpILFVBQVV5SCxhQUFhLENBQUMsV0FBVyxJQUFJO1lBQ3ZDOUgsWUFBWThILGFBQWEsQ0FBQyxhQUFhLElBQUk1SyxLQUFLa0QsR0FBRztZQUNuRFQsSUFBSTBJLGtCQUFrQkssRUFBRSxDQUFDLENBQUMsSUFBSUY7WUFDOUJ2SSxVQUFVd0k7WUFDVjNJLGNBQWNxSTtRQUNsQjtRQUNBLElBQUlKLFVBQVUsQ0FBQyxVQUFVLElBQUksT0FBT0EsVUFBVSxDQUFDLFVBQVUsS0FBSyxVQUFVO1lBQ3BFLE1BQU1FLFVBQVV6SyxRQUFRVyxVQUFVLENBQUM0SixVQUFVLENBQUMsVUFBVTtZQUN4RHpJLE9BQU81QixRQUFRLEdBQUd1SyxRQUFRdkssUUFBUTtZQUNsQzRCLE9BQU8zQixJQUFJLEdBQUdzSyxRQUFRdEssSUFBSTtZQUMxQjJCLE9BQU8xQixZQUFZLEdBQUdxSyxRQUFRckssWUFBWTtZQUMxQzBCLE9BQU96QixRQUFRLEdBQUdvSyxRQUFRcEssUUFBUTtRQUN0QztRQUNBLE1BQU04SyxVQUFVLElBQUkzSixRQUFRTTtRQUM1QiwrREFBK0Q7UUFDL0RxSixRQUFRN0QsbUJBQW1CLEdBQUc2RCxRQUFRaEosRUFBRTtRQUN4QyxPQUFPZ0o7SUFDWDtJQUNBQyxVQUFVZixPQUFPLEVBQUU7UUFDZixNQUFNZ0IsU0FBUztZQUNYLG1CQUFtQixJQUFJLENBQUMvSSxZQUFZO1lBQ3BDbUksU0FBUyxJQUFJekssUUFBUSxJQUFJLENBQUNrQyxLQUFLLEVBQUVoQyxVQUFVLElBQUksQ0FBQ0MsSUFBSSxFQUFFLElBQUksQ0FBQ0MsWUFBWSxFQUFFLElBQUksQ0FBQ0MsUUFBUSxFQUFFYyxRQUFRO1FBQ3BHO1FBQ0EsSUFBSWtKLFNBQVM7WUFDVCxLQUFLLE1BQU0sQ0FBQ3ZMLEtBQUs0QixNQUFNLElBQUlqQyxPQUFPdUgsT0FBTyxDQUFDcUYsUUFBUztnQkFDL0NoQixRQUFRaUIsR0FBRyxDQUFDeE0sS0FBSzRCO1lBQ3JCO1FBQ0o7UUFDQSxPQUFPMks7SUFDWDtBQUNKO0FBQ0E1TSxPQUFPNkIsY0FBYyxDQUFDa0IsU0FBUyxnQkFBZ0I7SUFDM0NqQixZQUFZO0lBQ1pDLGNBQWM7SUFDZEMsVUFBVTtJQUNWQyxPQUFPO0FBQ1g7QUFDTyxTQUFTZ0IsVUFBVTZKLENBQUM7SUFDdkIsT0FBUUEsS0FBSyxRQUNULE9BQU9BLEVBQUVsSSxXQUFXLEtBQUssY0FDekIsT0FBT2tJLEVBQUVsRCxPQUFPLEtBQUs7QUFDN0I7QUFDQSxTQUFTNUQsc0JBQXNCOEcsQ0FBQztJQUM1QixPQUFRLE9BQU9BLE1BQU0sWUFDakJBLEtBQUssUUFDTCxPQUFPQSxFQUFFcEYsSUFBSSxLQUFLLFlBQ2xCb0YsRUFBRXBGLElBQUksS0FBSztBQUNuQjtBQUNBLFNBQVNxRiw0QkFBNEJELENBQUM7SUFDbEMsT0FBUUUsTUFBTUMsT0FBTyxDQUFDSCxNQUFNQSxFQUFFSSxJQUFJLENBQUMsQ0FBQ0MsV0FBYW5ILHNCQUFzQm1IO0FBQzNFO0FBQ0EsU0FBU3pILHNCQUFzQm9ILENBQUM7SUFDNUIsT0FBUSxPQUFPQSxNQUFNLFlBQ2pCQSxLQUFLLFFBQ0xFLE1BQU1DLE9BQU8sQ0FBQ0gsRUFBRWhILFFBQVE7QUFDaEM7QUFDTyxTQUFTUCxxQkFBcUJ1SCxDQUFDO0lBQ2xDLGlEQUFpRDtJQUNqRCxpRkFBaUY7SUFDakYsMERBQTBEO0lBQzFELE9BQVFBLEtBQUssUUFDVCxPQUFPQSxFQUFFckgsU0FBUyxLQUFLLFlBQ3ZCLDJDQUEyQztJQUMxQ3NILENBQUFBLDRCQUE0QkQsRUFBRXJILFNBQVMsRUFBRUssYUFDdEMsK0RBQStEO0lBQy9EaUgsNEJBQTRCRCxFQUFFckgsU0FBUztBQUNuRDtBQUNBLFNBQVMySDtJQUNMLE1BQU1DLFNBQVNsTyxxRUFBc0JBLENBQUM7SUFDdEMsSUFBSSxDQUFDa08sUUFDRCxPQUFPLEVBQUU7SUFDYixJQUFJO1FBQ0EsTUFBTUMsU0FBUzlLLEtBQUtDLEtBQUssQ0FBQzRLO1FBQzFCLElBQUlMLE1BQU1DLE9BQU8sQ0FBQ0ssU0FBUztZQUN2QixNQUFNMUwsV0FBVyxFQUFFO1lBQ25CLEtBQUssTUFBTVMsUUFBUWlMLE9BQVE7Z0JBQ3ZCLElBQUksT0FBT2pMLFNBQVMsWUFBWUEsU0FBUyxNQUFNO29CQUMzQzJILFFBQVF1RCxJQUFJLENBQUMsQ0FBQywrQ0FBK0MsQ0FBQyxHQUMxRCxDQUFDLHFCQUFxQixFQUFFLE9BQU9sTCxLQUFLLENBQUM7b0JBQ3pDO2dCQUNKO2dCQUNBLElBQUksT0FBT0EsS0FBS2lDLE9BQU8sS0FBSyxVQUFVO29CQUNsQzBGLFFBQVF1RCxJQUFJLENBQUMsQ0FBQyxrREFBa0QsQ0FBQyxHQUM3RCxDQUFDLHFCQUFxQixFQUFFLE9BQU9sTCxLQUFLaUMsT0FBTyxDQUFDLENBQUM7b0JBQ2pEO2dCQUNKO2dCQUNBLElBQUksT0FBT2pDLEtBQUtrQyxPQUFPLEtBQUssVUFBVTtvQkFDbEN5RixRQUFRdUQsSUFBSSxDQUFDLENBQUMsa0RBQWtELENBQUMsR0FDN0QsQ0FBQyxxQkFBcUIsRUFBRSxPQUFPbEwsS0FBS2tDLE9BQU8sQ0FBQyxDQUFDO29CQUNqRDtnQkFDSjtnQkFDQTNDLFNBQVNnQixJQUFJLENBQUM7b0JBQ1ZrRyxRQUFRekcsS0FBS2lDLE9BQU8sQ0FBQzdELE9BQU8sQ0FBQyxPQUFPO29CQUNwQ3NJLFFBQVExRyxLQUFLa0MsT0FBTztnQkFDeEI7WUFDSjtZQUNBLE9BQU8zQztRQUNYLE9BQ0ssSUFBSSxPQUFPMEwsV0FBVyxZQUFZQSxXQUFXLE1BQU07WUFDcERFLHVCQUF1QkY7WUFDdkIsTUFBTTFMLFdBQVcsRUFBRTtZQUNuQixLQUFLLE1BQU0sQ0FBQzZMLEtBQUtwTixJQUFJLElBQUlMLE9BQU91SCxPQUFPLENBQUMrRixRQUFTO2dCQUM3QyxNQUFNSSxXQUFXRCxJQUFJaE4sT0FBTyxDQUFDLE9BQU87Z0JBQ3BDLElBQUksT0FBT0osUUFBUSxVQUFVO29CQUN6QnVCLFNBQVNnQixJQUFJLENBQUM7d0JBQ1ZrRyxRQUFRNEU7d0JBQ1IzRSxRQUFRMUk7b0JBQ1o7Z0JBQ0osT0FDSztvQkFDRDJKLFFBQVF1RCxJQUFJLENBQUMsQ0FBQyx1REFBdUQsRUFBRUUsSUFBSSxFQUFFLENBQUMsR0FDMUUsQ0FBQyxxQkFBcUIsRUFBRSxPQUFPcE4sSUFBSSxDQUFDO29CQUN4QztnQkFDSjtZQUNKO1lBQ0EsT0FBT3VCO1FBQ1gsT0FDSztZQUNEb0ksUUFBUXVELElBQUksQ0FBQyxvRUFDVCxDQUFDLGdGQUFnRixFQUFFLE9BQU9ELE9BQU8sQ0FBQztZQUN0RyxPQUFPLEVBQUU7UUFDYjtJQUNKLEVBQ0EsT0FBT0ssR0FBRztRQUNOLElBQUk5Tyw0RUFBMkJBLENBQUM4TyxJQUFJO1lBQ2hDLE1BQU1BO1FBQ1Y7UUFDQTNELFFBQVF1RCxJQUFJLENBQUMsb0VBQ1Q7UUFDSixPQUFPLEVBQUU7SUFDYjtBQUNKO0FBQ0EsU0FBU3JKLHFCQUFxQnRDLFFBQVE7SUFDbEMsNEJBQTRCO0lBQzVCLElBQUlBLFVBQVU7UUFDVixPQUFPQSxTQUFTeEIsR0FBRyxDQUFDLENBQUNOO1lBQ2pCLElBQUlrTixNQUFNQyxPQUFPLENBQUNuTixVQUFVO2dCQUN4QixPQUFPO29CQUNIOEksYUFBYTlJLE9BQU8sQ0FBQyxFQUFFO29CQUN2QnFLLFNBQVNySyxPQUFPLENBQUMsRUFBRTtnQkFDdkI7WUFDSjtZQUNBLE9BQU9BO1FBQ1g7SUFDSjtJQUNBLE9BQU9zTjtBQUNYO0FBQ0EsU0FBU0ksdUJBQXVCRixNQUFNO0lBQ2xDLElBQUl0TixPQUFPQyxJQUFJLENBQUNxTixRQUFRM0ssTUFBTSxHQUFHLEtBQzdCckQsOEVBQStCQSxDQUFDLGFBQWE7UUFDN0MsTUFBTSxJQUFJUixzRUFBeUJBO0lBQ3ZDO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9ub2RlX21vZHVsZXMvbGFuZ3NtaXRoL2Rpc3QvcnVuX3RyZWVzLmpzPzY4MGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSBcIi4vY2xpZW50LmpzXCI7XG5pbXBvcnQgeyBpc1RyYWNpbmdFbmFibGVkIH0gZnJvbSBcIi4vZW52LmpzXCI7XG5pbXBvcnQgeyBpc0NvbmZsaWN0aW5nRW5kcG9pbnRzRXJyb3IsIENvbmZsaWN0aW5nRW5kcG9pbnRzRXJyb3IsIH0gZnJvbSBcIi4vdXRpbHMvZXJyb3IuanNcIjtcbmltcG9ydCB7IF9MQ19DT05URVhUX1ZBUklBQkxFU19LRVksIF9SRVBMSUNBX1RSQUNFX1JPT1RTX0tFWSwgfSBmcm9tIFwiLi9zaW5nbGV0b25zL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgZ2V0Q29udGV4dFZhciwgc2V0Q29udGV4dFZhciB9IGZyb20gXCIuL3V0aWxzL2NvbnRleHRfdmFycy5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSwgZ2V0UnVudGltZUVudmlyb25tZW50LCB9IGZyb20gXCIuL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdFByb2plY3ROYW1lIH0gZnJvbSBcIi4vdXRpbHMvcHJvamVjdC5qc1wiO1xuaW1wb3J0IHsgZ2V0TGFuZ1NtaXRoRW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHsgd2Fybk9uY2UgfSBmcm9tIFwiLi91dGlscy93YXJuLmpzXCI7XG5pbXBvcnQgeyB1dWlkN0Zyb21UaW1lIH0gZnJvbSBcIi4vdXRpbHMvX3V1aWQuanNcIjtcbmltcG9ydCB7IHY1IGFzIHV1aWR2NSB9IGZyb20gXCJ1dWlkXCI7XG5jb25zdCBUSU1FU1RBTVBfTEVOR1RIID0gMzY7XG4vLyBETlMgbmFtZXNwYWNlIGZvciBVVUlEIHY1IChzYW1lIGFzIFB5dGhvbidzIHV1aWQuTkFNRVNQQUNFX0ROUylcbmNvbnN0IFVVSURfTkFNRVNQQUNFX0ROUyA9IFwiNmJhN2I4MTAtOWRhZC0xMWQxLTgwYjQtMDBjMDRmZDQzMGM4XCI7XG5mdW5jdGlvbiBnZXRSZXBsaWNhS2V5KHJlcGxpY2EpIHtcbiAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBrZXkgYnkgaGFzaGluZyB0aGUgcmVwbGljYSdzIGlkZW50aWZ5aW5nIHByb3BlcnRpZXNcbiAgICAvLyBUaGlzIGVuc3VyZXMgZWFjaCB1bmlxdWUgcmVwbGljYSAoY29tYmluYXRpb24gb2YgcHJvamVjdE5hbWUsIGFwaVVybCwgd29ya3NwYWNlSWQsIGFwaUtleSkgZ2V0cyBhIHVuaXF1ZSBrZXlcbiAgICAvLyBTb3J0IGtleXMgdG8gZW5zdXJlIGNvbnNpc3RlbnQgaGFzaGluZ1xuICAgIGNvbnN0IHNvcnRlZEtleXMgPSBPYmplY3Qua2V5cyhyZXBsaWNhKS5zb3J0KCk7XG4gICAgY29uc3Qga2V5RGF0YSA9IHNvcnRlZEtleXNcbiAgICAgICAgLm1hcCgoa2V5KSA9PiBgJHtrZXl9OiR7cmVwbGljYVtrZXldID8/IFwiXCJ9YClcbiAgICAgICAgLmpvaW4oXCJ8XCIpO1xuICAgIHJldHVybiB1dWlkdjUoa2V5RGF0YSwgVVVJRF9OQU1FU1BBQ0VfRE5TKTtcbn1cbmZ1bmN0aW9uIHN0cmlwTm9uQWxwaGFudW1lcmljKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL1stOi5dL2csIFwiXCIpO1xufVxuZnVuY3Rpb24gZ2V0TWljcm9zZWNvbmRQcmVjaXNpb25EYXRlc3RyaW5nKGVwb2NoLCBleGVjdXRpb25PcmRlciA9IDEpIHtcbiAgICAvLyBEYXRlIG9ubHkgaGFzIG1pbGxpc2Vjb25kIHByZWNpc2lvbiwgc28gd2UgdXNlIHRoZSBtaWNyb3NlY29uZHMgdG8gYnJlYWtcbiAgICAvLyBwb3NzaWJsZSB0aWVzLCBhdm9pZGluZyBpbmNvcnJlY3QgcnVuIG9yZGVyXG4gICAgY29uc3QgcGFkZGVkT3JkZXIgPSBleGVjdXRpb25PcmRlci50b0ZpeGVkKDApLnNsaWNlKDAsIDMpLnBhZFN0YXJ0KDMsIFwiMFwiKTtcbiAgICByZXR1cm4gYCR7bmV3IERhdGUoZXBvY2gpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgLTEpfSR7cGFkZGVkT3JkZXJ9WmA7XG59XG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQoZXBvY2gsIHJ1bklkLCBleGVjdXRpb25PcmRlciA9IDEpIHtcbiAgICBjb25zdCBtaWNyb3NlY29uZFByZWNpc2lvbkRhdGVzdHJpbmcgPSBnZXRNaWNyb3NlY29uZFByZWNpc2lvbkRhdGVzdHJpbmcoZXBvY2gsIGV4ZWN1dGlvbk9yZGVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBkb3R0ZWRPcmRlcjogc3RyaXBOb25BbHBoYW51bWVyaWMobWljcm9zZWNvbmRQcmVjaXNpb25EYXRlc3RyaW5nKSArIHJ1bklkLFxuICAgICAgICBtaWNyb3NlY29uZFByZWNpc2lvbkRhdGVzdHJpbmcsXG4gICAgfTtcbn1cbi8qKlxuICogQmFnZ2FnZSBoZWFkZXIgaW5mb3JtYXRpb25cbiAqL1xuY2xhc3MgQmFnZ2FnZSB7XG4gICAgY29uc3RydWN0b3IobWV0YWRhdGEsIHRhZ3MsIHByb2plY3RfbmFtZSwgcmVwbGljYXMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9qZWN0X25hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVwbGljYXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG1ldGFkYXRhO1xuICAgICAgICB0aGlzLnRhZ3MgPSB0YWdzO1xuICAgICAgICB0aGlzLnByb2plY3RfbmFtZSA9IHByb2plY3RfbmFtZTtcbiAgICAgICAgdGhpcy5yZXBsaWNhcyA9IHJlcGxpY2FzO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUhlYWRlcih2YWx1ZSkge1xuICAgICAgICBjb25zdCBpdGVtcyA9IHZhbHVlLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgbGV0IG1ldGFkYXRhID0ge307XG4gICAgICAgIGxldCB0YWdzID0gW107XG4gICAgICAgIGxldCBwcm9qZWN0X25hbWU7XG4gICAgICAgIGxldCByZXBsaWNhcztcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBjb25zdCBba2V5LCB1cmlWYWx1ZV0gPSBpdGVtLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KHVyaVZhbHVlKTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwibGFuZ3NtaXRoLW1ldGFkYXRhXCIpIHtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcImxhbmdzbWl0aC10YWdzXCIpIHtcbiAgICAgICAgICAgICAgICB0YWdzID0gdmFsdWUuc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcImxhbmdzbWl0aC1wcm9qZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0X25hbWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJsYW5nc21pdGgtcmVwbGljYXNcIikge1xuICAgICAgICAgICAgICAgIHJlcGxpY2FzID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCYWdnYWdlKG1ldGFkYXRhLCB0YWdzLCBwcm9qZWN0X25hbWUsIHJlcGxpY2FzKTtcbiAgICB9XG4gICAgdG9IZWFkZXIoKSB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhICYmIE9iamVjdC5rZXlzKHRoaXMubWV0YWRhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goYGxhbmdzbWl0aC1tZXRhZGF0YT0ke2VuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSh0aGlzLm1ldGFkYXRhKSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGFncyAmJiB0aGlzLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaXRlbXMucHVzaChgbGFuZ3NtaXRoLXRhZ3M9JHtlbmNvZGVVUklDb21wb25lbnQodGhpcy50YWdzLmpvaW4oXCIsXCIpKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9qZWN0X25hbWUpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goYGxhbmdzbWl0aC1wcm9qZWN0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucHJvamVjdF9uYW1lKX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbXMuam9pbihcIixcIik7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRyZWUge1xuICAgIGNvbnN0cnVjdG9yKG9yaWdpbmFsQ29uZmlnKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuX3R5cGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvamVjdF9uYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhcmVudF9ydW5cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicGFyZW50X3J1bl9pZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaGlsZF9ydW5zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXJ0X3RpbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZW5kX3RpbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXh0cmFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlcnJvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZXJpYWxpemVkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlucHV0c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvdXRwdXRzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlZmVyZW5jZV9leGFtcGxlX2lkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJldmVudHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidHJhY2VfaWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZG90dGVkX29yZGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyYWNpbmdFbmFibGVkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4ZWN1dGlvbl9vcmRlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaGlsZF9leGVjdXRpb25fb3JkZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEF0dGFjaG1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcnVuLlxuICAgICAgICAgKiBFYWNoIGVudHJ5IGlzIGEgdHVwbGUgb2YgW21pbWVfdHlwZSwgYnl0ZXNdXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhdHRhY2htZW50c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogUHJvamVjdHMgdG8gcmVwbGljYXRlIHRoaXMgcnVuIHRvIHdpdGggb3B0aW9uYWwgdXBkYXRlcy5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlcGxpY2FzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRpc3RyaWJ1dGVkUGFyZW50SWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3NlcmlhbGl6ZWRfc3RhcnRfdGltZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBJZiB5b3UgcGFzcyBpbiBhIHJ1biB0cmVlIGRpcmVjdGx5LCByZXR1cm4gYSBzaGFsbG93IGNsb25lXG4gICAgICAgIGlmIChpc1J1blRyZWUob3JpZ2luYWxDb25maWcpKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIHsgLi4ub3JpZ2luYWxDb25maWcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmYXVsdENvbmZpZyA9IFJ1blRyZWUuZ2V0RGVmYXVsdENvbmZpZygpO1xuICAgICAgICBjb25zdCB7IG1ldGFkYXRhLCAuLi5jb25maWcgfSA9IG9yaWdpbmFsQ29uZmlnO1xuICAgICAgICBjb25zdCBjbGllbnQgPSBjb25maWcuY2xpZW50ID8/IFJ1blRyZWUuZ2V0U2hhcmVkQ2xpZW50KCk7XG4gICAgICAgIGNvbnN0IGRlZHVwZWRNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIC4uLm1ldGFkYXRhLFxuICAgICAgICAgICAgLi4uY29uZmlnPy5leHRyYT8ubWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgICAgIGNvbmZpZy5leHRyYSA9IHsgLi4uY29uZmlnLmV4dHJhLCBtZXRhZGF0YTogZGVkdXBlZE1ldGFkYXRhIH07XG4gICAgICAgIGlmIChcImlkXCIgaW4gY29uZmlnICYmIGNvbmZpZy5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnLmlkO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgeyAuLi5kZWZhdWx0Q29uZmlnLCAuLi5jb25maWcsIGNsaWVudCB9KTtcbiAgICAgICAgdGhpcy5leGVjdXRpb25fb3JkZXIgPz89IDE7XG4gICAgICAgIHRoaXMuY2hpbGRfZXhlY3V0aW9uX29yZGVyID8/PSAxO1xuICAgICAgICAvLyBHZW5lcmF0ZSBzZXJpYWxpemVkIHN0YXJ0IHRpbWUgZm9yIElEIGdlbmVyYXRpb25cbiAgICAgICAgaWYgKCF0aGlzLmRvdHRlZF9vcmRlcikge1xuICAgICAgICAgICAgdGhpcy5fc2VyaWFsaXplZF9zdGFydF90aW1lID0gZ2V0TWljcm9zZWNvbmRQcmVjaXNpb25EYXRlc3RyaW5nKHRoaXMuc3RhcnRfdGltZSwgdGhpcy5leGVjdXRpb25fb3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEdlbmVyYXRlIGlkIGZyb20gc2VyaWFsaXplZCBzdGFydF90aW1lIGlmIG5vdCBwcm92aWRlZFxuICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgIHRoaXMuaWQgPSB1dWlkN0Zyb21UaW1lKHRoaXMuX3NlcmlhbGl6ZWRfc3RhcnRfdGltZSA/PyB0aGlzLnN0YXJ0X3RpbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy50cmFjZV9pZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50X3J1bikge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2VfaWQgPSB0aGlzLnBhcmVudF9ydW4udHJhY2VfaWQgPz8gdGhpcy5pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2VfaWQgPSB0aGlzLmlkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwbGljYXMgPSBfZW5zdXJlV3JpdGVSZXBsaWNhcyh0aGlzLnJlcGxpY2FzKTtcbiAgICAgICAgLy8gTm93IHNldCB0aGUgZG90dGVkIG9yZGVyIHdpdGggdGhlIGFjdHVhbCBJRFxuICAgICAgICBpZiAoIXRoaXMuZG90dGVkX29yZGVyKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRvdHRlZE9yZGVyIH0gPSBjb252ZXJ0VG9Eb3R0ZWRPcmRlckZvcm1hdCh0aGlzLnN0YXJ0X3RpbWUsIHRoaXMuaWQsIHRoaXMuZXhlY3V0aW9uX29yZGVyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudF9ydW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvdHRlZF9vcmRlciA9IHRoaXMucGFyZW50X3J1bi5kb3R0ZWRfb3JkZXIgKyBcIi5cIiArIGRvdHRlZE9yZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb3R0ZWRfb3JkZXIgPSBkb3R0ZWRPcmRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXQgbWV0YWRhdGEobWV0YWRhdGEpIHtcbiAgICAgICAgdGhpcy5leHRyYSA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuZXh0cmEsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuZXh0cmE/Lm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIC4uLm1ldGFkYXRhLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IG1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRyYT8ubWV0YWRhdGE7XG4gICAgfVxuICAgIHN0YXRpYyBnZXREZWZhdWx0Q29uZmlnKCkge1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImNoYWluXCIsXG4gICAgICAgICAgICBwcm9qZWN0X25hbWU6IGdldERlZmF1bHRQcm9qZWN0TmFtZSgpLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBhcGlfdXJsOiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0VORFBPSU5UXCIpID8/IFwiaHR0cDovL2xvY2FsaG9zdDoxOTg0XCIsXG4gICAgICAgICAgICBhcGlfa2V5OiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0FQSV9LRVlcIiksXG4gICAgICAgICAgICBjYWxsZXJfb3B0aW9uczoge30sXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDoge30sXG4gICAgICAgICAgICBpbnB1dHM6IHt9LFxuICAgICAgICAgICAgZXh0cmE6IHt9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0U2hhcmVkQ2xpZW50KCkge1xuICAgICAgICBpZiAoIVJ1blRyZWUuc2hhcmVkQ2xpZW50KSB7XG4gICAgICAgICAgICBSdW5UcmVlLnNoYXJlZENsaWVudCA9IG5ldyBDbGllbnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUnVuVHJlZS5zaGFyZWRDbGllbnQ7XG4gICAgfVxuICAgIGNyZWF0ZUNoaWxkKGNvbmZpZykge1xuICAgICAgICBjb25zdCBjaGlsZF9leGVjdXRpb25fb3JkZXIgPSB0aGlzLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciArIDE7XG4gICAgICAgIC8vIEhhbmRsZSByZXBsaWNhczogaWYgY2hpbGQgaGFzIGl0cyBvd24gcmVwbGljYXMsIHVzZSB0aG9zZTsgb3RoZXJ3aXNlIGluaGVyaXQgcGFyZW50J3MgKHdpdGggcmVyb290IHN0cmlwcGVkKVxuICAgICAgICAvLyBSZXJvb3Qgc2hvdWxkIG9ubHkgYXBwbHkgdG8gdGhlIHJ1biB3aGVyZSBpdCdzIGV4cGxpY2l0bHkgY29uZmlndXJlZCwgbm90IHByb3BhZ2F0ZSBkb3duXG4gICAgICAgIGNvbnN0IGluaGVyaXRlZFJlcGxpY2FzID0gdGhpcy5yZXBsaWNhcz8ubWFwKChyZXBsaWNhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHJlcm9vdCwgLi4ucmVzdCB9ID0gcmVwbGljYTtcbiAgICAgICAgICAgIHJldHVybiByZXN0O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY2hpbGRSZXBsaWNhcyA9IGNvbmZpZy5yZXBsaWNhcyA/PyBpbmhlcml0ZWRSZXBsaWNhcztcbiAgICAgICAgY29uc3QgY2hpbGQgPSBuZXcgUnVuVHJlZSh7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBwYXJlbnRfcnVuOiB0aGlzLFxuICAgICAgICAgICAgcHJvamVjdF9uYW1lOiB0aGlzLnByb2plY3RfbmFtZSxcbiAgICAgICAgICAgIHJlcGxpY2FzOiBjaGlsZFJlcGxpY2FzLFxuICAgICAgICAgICAgY2xpZW50OiB0aGlzLmNsaWVudCxcbiAgICAgICAgICAgIHRyYWNpbmdFbmFibGVkOiB0aGlzLnRyYWNpbmdFbmFibGVkLFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyOiBjaGlsZF9leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGNoaWxkX2V4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENvcHkgY29udGV4dCB2YXJzIG92ZXIgaW50byB0aGUgbmV3IHJ1biB0cmVlLlxuICAgICAgICBpZiAoX0xDX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSBpbiB0aGlzKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgY2hpbGRbX0xDX0NPTlRFWFRfVkFSSUFCTEVTX0tFWV0gPVxuICAgICAgICAgICAgICAgIHRoaXNbX0xDX0NPTlRFWFRfVkFSSUFCTEVTX0tFWV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgTENfQ0hJTEQgPSBTeW1ib2wuZm9yKFwibGM6Y2hpbGRfY29uZmlnXCIpO1xuICAgICAgICBjb25zdCBwcmVzZW50Q29uZmlnID0gY29uZmlnLmV4dHJhPy5bTENfQ0hJTERdID8/XG4gICAgICAgICAgICB0aGlzLmV4dHJhW0xDX0NISUxEXTtcbiAgICAgICAgLy8gdHJhY2luZyBmb3IgTGFuZ0NoYWluIGlzIGRlZmluZWQgYnkgdGhlIF9wYXJlbnRSdW5JZCBhbmQgcnVuTWFwIG9mIHRoZSB0cmFjZXJcbiAgICAgICAgaWYgKGlzUnVubmFibGVDb25maWdMaWtlKHByZXNlbnRDb25maWcpKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdDb25maWcgPSB7IC4uLnByZXNlbnRDb25maWcgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IGlzQ2FsbGJhY2tNYW5hZ2VyTGlrZShuZXdDb25maWcuY2FsbGJhY2tzKVxuICAgICAgICAgICAgICAgID8gbmV3Q29uZmlnLmNhbGxiYWNrcy5jb3B5Py4oKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgcGFyZW50IHJ1biBpZFxuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY2FsbGJhY2tzLCB7IF9wYXJlbnRSdW5JZDogY2hpbGQuaWQgfSk7XG4gICAgICAgICAgICAgICAgLy8gb25seSBwb3B1bGF0ZSBpZiB3ZSdyZSBpbiBhIG5ld2VyIExDLkpTIHZlcnNpb25cbiAgICAgICAgICAgICAgICBjYWxsYmFja3MuaGFuZGxlcnNcbiAgICAgICAgICAgICAgICAgICAgPy5maW5kKGlzTGFuZ0NoYWluVHJhY2VyTGlrZSlcbiAgICAgICAgICAgICAgICAgICAgPy51cGRhdGVGcm9tUnVuVHJlZT8uKGNoaWxkKTtcbiAgICAgICAgICAgICAgICBuZXdDb25maWcuY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGQuZXh0cmFbTENfQ0hJTERdID0gbmV3Q29uZmlnO1xuICAgICAgICB9XG4gICAgICAgIC8vIHByb3BhZ2F0ZSBjaGlsZF9leGVjdXRpb25fb3JkZXIgdXB3YXJkc1xuICAgICAgICBjb25zdCB2aXNpdGVkID0gbmV3IFNldCgpO1xuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChjdXJyZW50ICE9IG51bGwgJiYgIXZpc2l0ZWQuaGFzKGN1cnJlbnQuaWQpKSB7XG4gICAgICAgICAgICB2aXNpdGVkLmFkZChjdXJyZW50LmlkKTtcbiAgICAgICAgICAgIGN1cnJlbnQuY2hpbGRfZXhlY3V0aW9uX29yZGVyID0gTWF0aC5tYXgoY3VycmVudC5jaGlsZF9leGVjdXRpb25fb3JkZXIsIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcik7XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRfcnVuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hpbGRfcnVucy5wdXNoKGNoaWxkKTtcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgICBhc3luYyBlbmQob3V0cHV0cywgZXJyb3IsIGVuZFRpbWUgPSBEYXRlLm5vdygpLCBtZXRhZGF0YSkge1xuICAgICAgICB0aGlzLm91dHB1dHMgPSB0aGlzLm91dHB1dHMgPz8gb3V0cHV0cztcbiAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMuZXJyb3IgPz8gZXJyb3I7XG4gICAgICAgIHRoaXMuZW5kX3RpbWUgPSB0aGlzLmVuZF90aW1lID8/IGVuZFRpbWU7XG4gICAgICAgIGlmIChtZXRhZGF0YSAmJiBPYmplY3Qua2V5cyhtZXRhZGF0YSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5leHRyYSA9IHRoaXMuZXh0cmFcbiAgICAgICAgICAgICAgICA/IHsgLi4udGhpcy5leHRyYSwgbWV0YWRhdGE6IHsgLi4udGhpcy5leHRyYS5tZXRhZGF0YSwgLi4ubWV0YWRhdGEgfSB9XG4gICAgICAgICAgICAgICAgOiB7IG1ldGFkYXRhIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2NvbnZlcnRUb0NyZWF0ZShydW4sIHJ1bnRpbWVFbnYsIGV4Y2x1ZGVDaGlsZFJ1bnMgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IHJ1bkV4dHJhID0gcnVuLmV4dHJhID8/IHt9O1xuICAgICAgICAvLyBBdm9pZCBvdmVyd3JpdGluZyB0aGUgcnVudGltZSBlbnZpcm9ubWVudCBpZiBpdCdzIGFscmVhZHkgc2V0XG4gICAgICAgIGlmIChydW5FeHRyYT8ucnVudGltZT8ubGlicmFyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIXJ1bkV4dHJhLnJ1bnRpbWUpIHtcbiAgICAgICAgICAgICAgICBydW5FeHRyYS5ydW50aW1lID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVudGltZUVudikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHJ1bnRpbWVFbnYpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcnVuRXh0cmEucnVudGltZVtrXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcnVuRXh0cmEucnVudGltZVtrXSA9IHY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNoaWxkX3J1bnM7XG4gICAgICAgIGxldCBwYXJlbnRfcnVuX2lkO1xuICAgICAgICBpZiAoIWV4Y2x1ZGVDaGlsZFJ1bnMpIHtcbiAgICAgICAgICAgIGNoaWxkX3J1bnMgPSBydW4uY2hpbGRfcnVucy5tYXAoKGNoaWxkX3J1bikgPT4gdGhpcy5fY29udmVydFRvQ3JlYXRlKGNoaWxkX3J1biwgcnVudGltZUVudiwgZXhjbHVkZUNoaWxkUnVucykpO1xuICAgICAgICAgICAgcGFyZW50X3J1bl9pZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQgPSBydW4ucGFyZW50X3J1bj8uaWQgPz8gcnVuLnBhcmVudF9ydW5faWQ7XG4gICAgICAgICAgICBjaGlsZF9ydW5zID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBydW4uaWQsXG4gICAgICAgICAgICBuYW1lOiBydW4ubmFtZSxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHJ1bi5fc2VyaWFsaXplZF9zdGFydF90aW1lID8/IHJ1bi5zdGFydF90aW1lLFxuICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgIHJ1bl90eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICByZWZlcmVuY2VfZXhhbXBsZV9pZDogcnVuLnJlZmVyZW5jZV9leGFtcGxlX2lkLFxuICAgICAgICAgICAgZXh0cmE6IHJ1bkV4dHJhLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogcnVuLnNlcmlhbGl6ZWQsXG4gICAgICAgICAgICBlcnJvcjogcnVuLmVycm9yLFxuICAgICAgICAgICAgaW5wdXRzOiBydW4uaW5wdXRzLFxuICAgICAgICAgICAgb3V0cHV0czogcnVuLm91dHB1dHMsXG4gICAgICAgICAgICBzZXNzaW9uX25hbWU6IHJ1bi5wcm9qZWN0X25hbWUsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBjaGlsZF9ydW5zLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50X3J1bl9pZCxcbiAgICAgICAgICAgIHRyYWNlX2lkOiBydW4udHJhY2VfaWQsXG4gICAgICAgICAgICBkb3R0ZWRfb3JkZXI6IHJ1bi5kb3R0ZWRfb3JkZXIsXG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBydW4uYXR0YWNobWVudHMsXG4gICAgICAgICAgICBldmVudHM6IHJ1bi5ldmVudHMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9zbGljZVBhcmVudElkKHBhcmVudElkLCBydW4pIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNsaWNlIHRoZSBwYXJlbnQgaWQgZnJvbSBkb3R0ZWQgb3JkZXIuXG4gICAgICAgICAqIEFkZGl0aW9uYWxseSBjaGVjayBpZiB0aGUgY3VycmVudCBydW4gaXMgYSBjaGlsZCBvZiB0aGUgcGFyZW50LiBJZiBzbywgdXBkYXRlXG4gICAgICAgICAqIHRoZSBwYXJlbnRfcnVuX2lkIHRvIHVuZGVmaW5lZCwgYW5kIHNldCB0aGUgdHJhY2UgaWQgdG8gdGhlIG5ldyByb290IGlkIGFmdGVyXG4gICAgICAgICAqIHBhcmVudF9pZC5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChydW4uZG90dGVkX29yZGVyKSB7XG4gICAgICAgICAgICBjb25zdCBzZWdzID0gcnVuLmRvdHRlZF9vcmRlci5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICBsZXQgc3RhcnRJZHggPSBudWxsO1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgaW5kZXggb2YgdGhlIHBhcmVudCBJRCBpbiB0aGUgZG90dGVkIG9yZGVyXG4gICAgICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBzZWdzLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWdJZCA9IHNlZ3NbaWR4XS5zbGljZSgtVElNRVNUQU1QX0xFTkdUSCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlZ0lkID09PSBwYXJlbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICBzdGFydElkeCA9IGlkeDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXJ0SWR4ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gVHJpbSBzZWdtZW50cyB0byBzdGFydCBhZnRlciBwYXJlbnRfaWQgKGV4Y2x1c2l2ZSlcbiAgICAgICAgICAgICAgICBjb25zdCB0cmltbWVkU2VncyA9IHNlZ3Muc2xpY2Uoc3RhcnRJZHggKyAxKTtcbiAgICAgICAgICAgICAgICAvLyBSZWJ1aWxkIGRvdHRlZF9vcmRlclxuICAgICAgICAgICAgICAgIHJ1bi5kb3R0ZWRfb3JkZXIgPSB0cmltbWVkU2Vncy5qb2luKFwiLlwiKTtcbiAgICAgICAgICAgICAgICBpZiAodHJpbW1lZFNlZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBydW4udHJhY2VfaWQgPSB0cmltbWVkU2Vnc1swXS5zbGljZSgtVElNRVNUQU1QX0xFTkdUSCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBydW4udHJhY2VfaWQgPSBydW4uaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChydW4ucGFyZW50X3J1bl9pZCA9PT0gcGFyZW50SWQpIHtcbiAgICAgICAgICAgIC8vIFdlJ3ZlIGZvdW5kIHRoZSBuZXcgcm9vdCBub2RlLlxuICAgICAgICAgICAgcnVuLnBhcmVudF9ydW5faWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3NldFJlcGxpY2FUcmFjZVJvb3QocmVwbGljYUtleSwgdHJhY2VSb290SWQpIHtcbiAgICAgICAgLy8gU2V0IHRoZSByZXBsaWNhIHRyYWNlIHJvb3QgaW4gY29udGV4dCB2YXJzIG9uIHRoaXMgcnVuIGFuZCBhbGwgZGVzY2VuZGFudHNcbiAgICAgICAgY29uc3QgcmVwbGljYVRyYWNlUm9vdHMgPSBnZXRDb250ZXh0VmFyKHRoaXMsIF9SRVBMSUNBX1RSQUNFX1JPT1RTX0tFWSkgPz8ge307XG4gICAgICAgIHJlcGxpY2FUcmFjZVJvb3RzW3JlcGxpY2FLZXldID0gdHJhY2VSb290SWQ7XG4gICAgICAgIHNldENvbnRleHRWYXIodGhpcywgX1JFUExJQ0FfVFJBQ0VfUk9PVFNfS0VZLCByZXBsaWNhVHJhY2VSb290cyk7XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IHVwZGF0ZSBhbGwgZGVzY2VuZGFudHMgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICAgIC8vIGFyb3VuZCBydW4gdHJlZSBjcmVhdGlvbiB2cyBwcm9jZXNzaW5nIHRpbWVcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLmNoaWxkX3J1bnMpIHtcbiAgICAgICAgICAgIGNoaWxkLl9zZXRSZXBsaWNhVHJhY2VSb290KHJlcGxpY2FLZXksIHRyYWNlUm9vdElkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcmVtYXBGb3JQcm9qZWN0KHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHByb2plY3ROYW1lLCBydW50aW1lRW52LCBleGNsdWRlQ2hpbGRSdW5zID0gdHJ1ZSwgcmVyb290ID0gZmFsc2UsIGRpc3RyaWJ1dGVkUGFyZW50SWQsIGFwaVVybCwgYXBpS2V5LCB3b3Jrc3BhY2VJZCwgfSA9IHBhcmFtcztcbiAgICAgICAgY29uc3QgYmFzZVJ1biA9IHRoaXMuX2NvbnZlcnRUb0NyZWF0ZSh0aGlzLCBydW50aW1lRW52LCBleGNsdWRlQ2hpbGRSdW5zKTtcbiAgICAgICAgLy8gU2tpcCByZW1hcHBpbmcgaWYgcHJvamVjdCBuYW1lIGlzIHRoZSBzYW1lXG4gICAgICAgIGlmIChwcm9qZWN0TmFtZSA9PT0gdGhpcy5wcm9qZWN0X25hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uYmFzZVJ1bixcbiAgICAgICAgICAgICAgICBzZXNzaW9uX25hbWU6IHByb2plY3ROYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBcHBseSByZXJvb3QgbG9naWMgYmVmb3JlIElEIHJlbWFwcGluZ1xuICAgICAgICBpZiAocmVyb290KSB7XG4gICAgICAgICAgICBpZiAoZGlzdHJpYnV0ZWRQYXJlbnRJZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgYSBkaXN0cmlidXRlZCBwYXJlbnQgSUQsIHNsaWNlIGF0IHRoYXQgcG9pbnRcbiAgICAgICAgICAgICAgICB0aGlzLl9zbGljZVBhcmVudElkKGRpc3RyaWJ1dGVkUGFyZW50SWQsIGJhc2VSdW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gZGlzdHJpYnV0ZWQgcGFyZW50IElELCBzaW1wbHkgbWFrZSB0aGlzIHJ1biBhIHJvb3QgcnVuXG4gICAgICAgICAgICAgICAgLy8gYnkgcmVtb3ZpbmcgcGFyZW50X3J1bl9pZCBhbmQgcmVzZXR0aW5nIHRyYWNlIGluZm9cbiAgICAgICAgICAgICAgICBiYXNlUnVuLnBhcmVudF9ydW5faWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgY3VycmVudCBydW4gYXMgdGhlIHRyYWNlIHJvb3RcbiAgICAgICAgICAgICAgICBpZiAoYmFzZVJ1bi5kb3R0ZWRfb3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgZG90dGVkIG9yZGVyIHRvIGp1c3QgdGhpcyBydW5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VncyA9IGJhc2VSdW4uZG90dGVkX29yZGVyLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVJ1bi5kb3R0ZWRfb3JkZXIgPSBzZWdzW3NlZ3MubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlUnVuLnRyYWNlX2lkID0gYmFzZVJ1bi5pZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFN0b3JlIHRoaXMgcnVuJ3Mgb3JpZ2luYWwgSUQgaW4gY29udGV4dCB2YXJzIHNvIGRlc2NlbmRhbnRzIGtub3cgdGhlIG5ldyB0cmFjZSByb290XG4gICAgICAgICAgICAvLyBXZSBzdG9yZSB0aGUgb3JpZ2luYWwgSUQgKGJlZm9yZSByZW1hcHBpbmcpIHNvIGl0IGNhbiBiZSBmb3VuZCBpbiBkb3R0ZWRfb3JkZXJcbiAgICAgICAgICAgIGNvbnN0IHJlcGxpY2FLZXkgPSBnZXRSZXBsaWNhS2V5KHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0TmFtZSxcbiAgICAgICAgICAgICAgICBhcGlVcmwsXG4gICAgICAgICAgICAgICAgYXBpS2V5LFxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9zZXRSZXBsaWNhVHJhY2VSb290KHJlcGxpY2FLZXksIGJhc2VSdW4uaWQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGFuIGFuY2VzdG9yIHdhcyByZXJvb3RlZCBmb3IgdGhpcyByZXBsaWNhLCB1cGRhdGUgdHJhY2VfaWQgYW5kIGRvdHRlZF9vcmRlclxuICAgICAgICAvLyB0byByZWZsZWN0IHRoZSBuZXcgdHJhY2UgaGllcmFyY2h5LiBUaGlzIGlzIHRyYWNrZWQgdmlhIGNvbnRleHQgdmFyaWFibGVzLlxuICAgICAgICBsZXQgYW5jZXN0b3JSZXJvb3RlZFRyYWNlSWQ7XG4gICAgICAgIGlmICghcmVyb290KSB7XG4gICAgICAgICAgICBjb25zdCByZXBsaWNhVHJhY2VSb290cyA9IGdldENvbnRleHRWYXIodGhpcywgX1JFUExJQ0FfVFJBQ0VfUk9PVFNfS0VZKSA/PyB7fTtcbiAgICAgICAgICAgIGNvbnN0IHJlcGxpY2FLZXkgPSBnZXRSZXBsaWNhS2V5KHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0TmFtZSxcbiAgICAgICAgICAgICAgICBhcGlVcmwsXG4gICAgICAgICAgICAgICAgYXBpS2V5LFxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZUlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhbmNlc3RvclJlcm9vdGVkVHJhY2VJZCA9IHJlcGxpY2FUcmFjZVJvb3RzW3JlcGxpY2FLZXldO1xuICAgICAgICAgICAgaWYgKGFuY2VzdG9yUmVyb290ZWRUcmFjZUlkKSB7XG4gICAgICAgICAgICAgICAgLy8gQW4gYW5jZXN0b3Igd2FzIHJlcm9vdGVkIGZvciB0aGlzIHJlcGxpY2EsIHNvIHNldCBvdXIgdHJhY2VfaWRcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgYW5jZXN0b3IncyBvcmlnaW5hbCAodW5tYXBwZWQpIElELiBJdCB3aWxsIGJlIHJlbWFwcGVkIGFsb25nIHdpdGggb3RoZXIgSURzLlxuICAgICAgICAgICAgICAgIGJhc2VSdW4udHJhY2VfaWQgPSBhbmNlc3RvclJlcm9vdGVkVHJhY2VJZDtcbiAgICAgICAgICAgICAgICAvLyBBbHNvIHNsaWNlIHRoZSBkb3R0ZWRfb3JkZXIgdG8gc3RhcnQgZnJvbSB0aGUgbmV3IHRyYWNlIHJvb3RcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgZGVzY2VuZGFudHMgb2YgYSByZXJvb3RlZCBhbmNlc3RvciBoYXZlIGNvcnJlY3QgaGllcmFyY2h5XG4gICAgICAgICAgICAgICAgaWYgKGJhc2VSdW4uZG90dGVkX29yZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlZ3MgPSBiYXNlUnVuLmRvdHRlZF9vcmRlci5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICAgICAgICAgIGxldCByb290SWR4ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgbmV3IHRyYWNlIHJvb3QncyBzZWdtZW50IGluIGRvdHRlZF9vcmRlclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBzZWdzLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlZ0lkID0gc2Vnc1tpZHhdLnNsaWNlKC1USU1FU1RBTVBfTEVOR1RIKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdJZCA9PT0gYW5jZXN0b3JSZXJvb3RlZFRyYWNlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290SWR4ID0gaWR4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb290SWR4ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHNlZ21lbnRzIGZyb20gbmV3IHRyYWNlIHJvb3Qgb253YXJkc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpbW1lZFNlZ3MgPSBzZWdzLnNsaWNlKHJvb3RJZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVJ1bi5kb3R0ZWRfb3JkZXIgPSB0cmltbWVkU2Vncy5qb2luKFwiLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBSZW1hcCBJRHMgZm9yIHRoZSByZXBsaWNhIHVzaW5nIHV1aWQ1IChkZXRlcm1pbmlzdGljKVxuICAgICAgICAvLyBUaGlzIGVuc3VyZXMgY29uc2lzdGVuY3kgYWNyb3NzIHJ1bnMgaW4gdGhlIHNhbWUgcmVwbGljYVxuICAgICAgICBjb25zdCBvbGRJZCA9IGJhc2VSdW4uaWQ7XG4gICAgICAgIGNvbnN0IG5ld0lkID0gdXVpZHY1KGAke29sZElkfToke3Byb2plY3ROYW1lfWAsIFVVSURfTkFNRVNQQUNFX0ROUyk7XG4gICAgICAgIC8vIFJlbWFwIHRyYWNlX2lkXG4gICAgICAgIGxldCBuZXdUcmFjZUlkO1xuICAgICAgICBpZiAoYmFzZVJ1bi50cmFjZV9pZCkge1xuICAgICAgICAgICAgbmV3VHJhY2VJZCA9IHV1aWR2NShgJHtiYXNlUnVuLnRyYWNlX2lkfToke3Byb2plY3ROYW1lfWAsIFVVSURfTkFNRVNQQUNFX0ROUyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXdUcmFjZUlkID0gbmV3SWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtYXAgcGFyZW50X3J1bl9pZFxuICAgICAgICBsZXQgbmV3UGFyZW50SWQ7XG4gICAgICAgIGlmIChiYXNlUnVuLnBhcmVudF9ydW5faWQpIHtcbiAgICAgICAgICAgIG5ld1BhcmVudElkID0gdXVpZHY1KGAke2Jhc2VSdW4ucGFyZW50X3J1bl9pZH06JHtwcm9qZWN0TmFtZX1gLCBVVUlEX05BTUVTUEFDRV9ETlMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlbWFwIGRvdHRlZF9vcmRlciBzZWdtZW50c1xuICAgICAgICBsZXQgbmV3RG90dGVkT3JkZXI7XG4gICAgICAgIGlmIChiYXNlUnVuLmRvdHRlZF9vcmRlcikge1xuICAgICAgICAgICAgY29uc3Qgc2VncyA9IGJhc2VSdW4uZG90dGVkX29yZGVyLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbWFwcGVkU2VncyA9IHNlZ3MubWFwKChzZWcpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBVVUlEIGZyb20gdGhlIHNlZ21lbnQgKGxhc3QgVElNRVNUQU1QX0xFTkdUSCBjaGFyYWN0ZXJzKVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlZ0lkID0gc2VnLnNsaWNlKC1USU1FU1RBTVBfTEVOR1RIKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1hcHBlZElkID0gdXVpZHY1KGAke3NlZ0lkfToke3Byb2plY3ROYW1lfWAsIFVVSURfTkFNRVNQQUNFX0ROUyk7XG4gICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgVVVJRCBwYXJ0IHdoaWxlIGtlZXBpbmcgdGhlIHRpbWVzdGFtcCBwcmVmaXhcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VnLnNsaWNlKDAsIC1USU1FU1RBTVBfTEVOR1RIKSArIHJlbWFwcGVkSWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5ld0RvdHRlZE9yZGVyID0gcmVtYXBwZWRTZWdzLmpvaW4oXCIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5iYXNlUnVuLFxuICAgICAgICAgICAgaWQ6IG5ld0lkLFxuICAgICAgICAgICAgdHJhY2VfaWQ6IG5ld1RyYWNlSWQsXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBuZXdQYXJlbnRJZCxcbiAgICAgICAgICAgIGRvdHRlZF9vcmRlcjogbmV3RG90dGVkT3JkZXIsXG4gICAgICAgICAgICBzZXNzaW9uX25hbWU6IHByb2plY3ROYW1lLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBwb3N0UnVuKGV4Y2x1ZGVDaGlsZFJ1bnMgPSB0cnVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBydW50aW1lRW52ID0gZ2V0UnVudGltZUVudmlyb25tZW50KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXBsaWNhcyAmJiB0aGlzLnJlcGxpY2FzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgcHJvamVjdE5hbWUsIGFwaUtleSwgYXBpVXJsLCB3b3Jrc3BhY2VJZCwgcmVyb290IH0gb2YgdGhpc1xuICAgICAgICAgICAgICAgICAgICAucmVwbGljYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcnVuQ3JlYXRlID0gdGhpcy5fcmVtYXBGb3JQcm9qZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0TmFtZSA/PyB0aGlzLnByb2plY3RfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVFbnYsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGNsdWRlQ2hpbGRSdW5zOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVyb290LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdHJpYnV0ZWRQYXJlbnRJZDogdGhpcy5kaXN0cmlidXRlZFBhcmVudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlSWQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5jcmVhdGVSdW4ocnVuQ3JlYXRlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3Jrc3BhY2VJZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcnVuQ3JlYXRlID0gdGhpcy5fY29udmVydFRvQ3JlYXRlKHRoaXMsIHJ1bnRpbWVFbnYsIGV4Y2x1ZGVDaGlsZFJ1bnMpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmNyZWF0ZVJ1bihydW5DcmVhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFleGNsdWRlQ2hpbGRSdW5zKSB7XG4gICAgICAgICAgICAgICAgd2Fybk9uY2UoXCJQb3N0aW5nIHdpdGggZXhjbHVkZUNoaWxkUnVucz1mYWxzZSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbi5cIik7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZFJ1biBvZiB0aGlzLmNoaWxkX3J1bnMpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2hpbGRSdW4ucG9zdFJ1bihmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gcG9zdFJ1biBmb3IgcnVuICR7dGhpcy5pZH06YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHBhdGNoUnVuKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMucmVwbGljYXMgJiYgdGhpcy5yZXBsaWNhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHsgcHJvamVjdE5hbWUsIGFwaUtleSwgYXBpVXJsLCB3b3Jrc3BhY2VJZCwgdXBkYXRlcywgcmVyb290LCB9IG9mIHRoaXMucmVwbGljYXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBydW5EYXRhID0gdGhpcy5fcmVtYXBGb3JQcm9qZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdE5hbWU6IHByb2plY3ROYW1lID8/IHRoaXMucHJvamVjdF9uYW1lLFxuICAgICAgICAgICAgICAgICAgICBydW50aW1lRW52OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVDaGlsZFJ1bnM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcm9vdCxcbiAgICAgICAgICAgICAgICAgICAgZGlzdHJpYnV0ZWRQYXJlbnRJZDogdGhpcy5kaXN0cmlidXRlZFBhcmVudElkLFxuICAgICAgICAgICAgICAgICAgICBhcGlVcmwsXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleSxcbiAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlSWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlUGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJ1bkRhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJ1bkRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcnVuX3R5cGU6IHJ1bkRhdGEucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHJ1bkRhdGEuc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0czogcnVuRGF0YS5vdXRwdXRzLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogcnVuRGF0YS5lcnJvcixcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcnVuRGF0YS5wYXJlbnRfcnVuX2lkLFxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uX25hbWU6IHJ1bkRhdGEuc2Vzc2lvbl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VfZXhhbXBsZV9pZDogcnVuRGF0YS5yZWZlcmVuY2VfZXhhbXBsZV9pZCxcbiAgICAgICAgICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bkRhdGEuZW5kX3RpbWUsXG4gICAgICAgICAgICAgICAgICAgIGRvdHRlZF9vcmRlcjogcnVuRGF0YS5kb3R0ZWRfb3JkZXIsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNlX2lkOiBydW5EYXRhLnRyYWNlX2lkLFxuICAgICAgICAgICAgICAgICAgICBldmVudHM6IHJ1bkRhdGEuZXZlbnRzLFxuICAgICAgICAgICAgICAgICAgICB0YWdzOiBydW5EYXRhLnRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhOiBydW5EYXRhLmV4dHJhLFxuICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50czogdGhpcy5hdHRhY2htZW50cyxcbiAgICAgICAgICAgICAgICAgICAgLi4udXBkYXRlcyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIEltcG9ydGFudCB0aGF0IGlucHV0cyBpcyBub3QgYSBrZXkgaW4gdGhlIHJ1biB1cGRhdGVcbiAgICAgICAgICAgICAgICAvLyBpZiBleGNsdWRlZCBiZWNhdXNlIGl0IHdpbGwgb3ZlcndyaXRlIHRoZSBydW4gY3JlYXRlIGlmIHRoZVxuICAgICAgICAgICAgICAgIC8vIHR3byBvcGVyYXRpb25zIGFyZSBtZXJnZWQgZHVyaW5nIGJhdGNoaW5nXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zPy5leGNsdWRlSW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBheWxvYWQuaW5wdXRzID0gcnVuRGF0YS5pbnB1dHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnVwZGF0ZVJ1bihydW5EYXRhLmlkLCB1cGRhdGVQYXlsb2FkLCB7XG4gICAgICAgICAgICAgICAgICAgIGFwaUtleSxcbiAgICAgICAgICAgICAgICAgICAgYXBpVXJsLFxuICAgICAgICAgICAgICAgICAgICB3b3Jrc3BhY2VJZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcnVuVXBkYXRlID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl90eXBlOiB0aGlzLnJ1bl90eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGFydF90aW1lOiB0aGlzLl9zZXJpYWxpemVkX3N0YXJ0X3RpbWUgPz8gdGhpcy5zdGFydF90aW1lLFxuICAgICAgICAgICAgICAgICAgICBlbmRfdGltZTogdGhpcy5lbmRfdGltZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRoaXMuZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dHM6IHRoaXMub3V0cHV0cyxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogdGhpcy5wYXJlbnRfcnVuPy5pZCA/PyB0aGlzLnBhcmVudF9ydW5faWQsXG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZV9leGFtcGxlX2lkOiB0aGlzLnJlZmVyZW5jZV9leGFtcGxlX2lkLFxuICAgICAgICAgICAgICAgICAgICBleHRyYTogdGhpcy5leHRyYSxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiB0aGlzLmV2ZW50cyxcbiAgICAgICAgICAgICAgICAgICAgZG90dGVkX29yZGVyOiB0aGlzLmRvdHRlZF9vcmRlcixcbiAgICAgICAgICAgICAgICAgICAgdHJhY2VfaWQ6IHRoaXMudHJhY2VfaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IHRoaXMudGFncyxcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudHM6IHRoaXMuYXR0YWNobWVudHMsXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25fbmFtZTogdGhpcy5wcm9qZWN0X25hbWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBJbXBvcnRhbnQgdGhhdCBpbnB1dHMgaXMgbm90IGEga2V5IGluIHRoZSBydW4gdXBkYXRlXG4gICAgICAgICAgICAgICAgLy8gaWYgZXhjbHVkZWQgYmVjYXVzZSBpdCB3aWxsIG92ZXJ3cml0ZSB0aGUgcnVuIGNyZWF0ZSBpZiB0aGVcbiAgICAgICAgICAgICAgICAvLyB0d28gb3BlcmF0aW9ucyBhcmUgbWVyZ2VkIGR1cmluZyBiYXRjaGluZ1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucz8uZXhjbHVkZUlucHV0cykge1xuICAgICAgICAgICAgICAgICAgICBydW5VcGRhdGUuaW5wdXRzID0gdGhpcy5pbnB1dHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnVwZGF0ZVJ1bih0aGlzLmlkLCBydW5VcGRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gcGF0Y2hSdW4gZm9yIHJ1biAke3RoaXMuaWR9YCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRUb0NyZWF0ZSh0aGlzLCB1bmRlZmluZWQsIGZhbHNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGFuIGV2ZW50IHRvIHRoZSBydW4gdHJlZS5cbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBBIHNpbmdsZSBldmVudCBvciBzdHJpbmcgdG8gYWRkXG4gICAgICovXG4gICAgYWRkRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50cykge1xuICAgICAgICAgICAgdGhpcy5ldmVudHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGV2ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImV2ZW50XCIsXG4gICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGV2ZW50LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAuLi5ldmVudCxcbiAgICAgICAgICAgICAgICB0aW1lOiBldmVudC50aW1lID8/IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUnVubmFibGVDb25maWcocGFyZW50Q29uZmlnLCBwcm9wcykge1xuICAgICAgICAvLyBXZSBvbmx5IGhhbmRsZSB0aGUgY2FsbGJhY2sgbWFuYWdlciBjYXNlIGZvciBub3dcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyID0gcGFyZW50Q29uZmlnPy5jYWxsYmFja3M7XG4gICAgICAgIGxldCBwYXJlbnRSdW47XG4gICAgICAgIGxldCBwcm9qZWN0TmFtZTtcbiAgICAgICAgbGV0IGNsaWVudDtcbiAgICAgICAgbGV0IHRyYWNpbmdFbmFibGVkID0gaXNUcmFjaW5nRW5hYmxlZCgpO1xuICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRSdW5JZCA9IGNhbGxiYWNrTWFuYWdlcj8uZ2V0UGFyZW50UnVuSWQ/LigpID8/IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBsYW5nQ2hhaW5UcmFjZXIgPSBjYWxsYmFja01hbmFnZXI/LmhhbmRsZXJzPy5maW5kKChoYW5kbGVyKSA9PiBoYW5kbGVyPy5uYW1lID09IFwibGFuZ2NoYWluX3RyYWNlclwiKTtcbiAgICAgICAgICAgIHBhcmVudFJ1biA9IGxhbmdDaGFpblRyYWNlcj8uZ2V0UnVuPy4ocGFyZW50UnVuSWQpO1xuICAgICAgICAgICAgcHJvamVjdE5hbWUgPSBsYW5nQ2hhaW5UcmFjZXI/LnByb2plY3ROYW1lO1xuICAgICAgICAgICAgY2xpZW50ID0gbGFuZ0NoYWluVHJhY2VyPy5jbGllbnQ7XG4gICAgICAgICAgICB0cmFjaW5nRW5hYmxlZCA9IHRyYWNpbmdFbmFibGVkIHx8ICEhbGFuZ0NoYWluVHJhY2VyO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcGFyZW50UnVuKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRyZWUoe1xuICAgICAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgICAgIGNsaWVudCxcbiAgICAgICAgICAgICAgICB0cmFjaW5nRW5hYmxlZCxcbiAgICAgICAgICAgICAgICBwcm9qZWN0X25hbWU6IHByb2plY3ROYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50UnVuVHJlZSA9IG5ldyBSdW5UcmVlKHtcbiAgICAgICAgICAgIG5hbWU6IHBhcmVudFJ1bi5uYW1lLFxuICAgICAgICAgICAgaWQ6IHBhcmVudFJ1bi5pZCxcbiAgICAgICAgICAgIHRyYWNlX2lkOiBwYXJlbnRSdW4udHJhY2VfaWQsXG4gICAgICAgICAgICBkb3R0ZWRfb3JkZXI6IHBhcmVudFJ1bi5kb3R0ZWRfb3JkZXIsXG4gICAgICAgICAgICBjbGllbnQsXG4gICAgICAgICAgICB0cmFjaW5nRW5hYmxlZCxcbiAgICAgICAgICAgIHByb2plY3RfbmFtZTogcHJvamVjdE5hbWUsXG4gICAgICAgICAgICB0YWdzOiBbXG4gICAgICAgICAgICAgICAgLi4ubmV3IFNldCgocGFyZW50UnVuPy50YWdzID8/IFtdKS5jb25jYXQocGFyZW50Q29uZmlnPy50YWdzID8/IFtdKSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZXh0cmE6IHtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXJlbnRSdW4/LmV4dHJhPy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyZW50Q29uZmlnPy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXJlbnRSdW5UcmVlLmNyZWF0ZUNoaWxkKHByb3BzKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21Eb3R0ZWRPcmRlcihkb3R0ZWRPcmRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tSGVhZGVycyh7IFwibGFuZ3NtaXRoLXRyYWNlXCI6IGRvdHRlZE9yZGVyIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUhlYWRlcnMoaGVhZGVycywgaW5oZXJpdEFyZ3MpIHtcbiAgICAgICAgY29uc3QgcmF3SGVhZGVycyA9IFwiZ2V0XCIgaW4gaGVhZGVycyAmJiB0eXBlb2YgaGVhZGVycy5nZXQgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgXCJsYW5nc21pdGgtdHJhY2VcIjogaGVhZGVycy5nZXQoXCJsYW5nc21pdGgtdHJhY2VcIiksXG4gICAgICAgICAgICAgICAgYmFnZ2FnZTogaGVhZGVycy5nZXQoXCJiYWdnYWdlXCIpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBoZWFkZXJzO1xuICAgICAgICBjb25zdCBoZWFkZXJUcmFjZSA9IHJhd0hlYWRlcnNbXCJsYW5nc21pdGgtdHJhY2VcIl07XG4gICAgICAgIGlmICghaGVhZGVyVHJhY2UgfHwgdHlwZW9mIGhlYWRlclRyYWNlICE9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcGFyZW50RG90dGVkT3JkZXIgPSBoZWFkZXJUcmFjZS50cmltKCk7XG4gICAgICAgIGNvbnN0IHBhcnNlZERvdHRlZE9yZGVyID0gcGFyZW50RG90dGVkT3JkZXIuc3BsaXQoXCIuXCIpLm1hcCgocGFydCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3N0clRpbWUsIHV1aWRdID0gcGFydC5zcGxpdChcIlpcIik7XG4gICAgICAgICAgICByZXR1cm4geyBzdHJUaW1lLCB0aW1lOiBEYXRlLnBhcnNlKHN0clRpbWUgKyBcIlpcIiksIHV1aWQgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRyYWNlSWQgPSBwYXJzZWREb3R0ZWRPcmRlclswXS51dWlkO1xuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICAuLi5pbmhlcml0QXJncyxcbiAgICAgICAgICAgIG5hbWU6IGluaGVyaXRBcmdzPy5bXCJuYW1lXCJdID8/IFwicGFyZW50XCIsXG4gICAgICAgICAgICBydW5fdHlwZTogaW5oZXJpdEFyZ3M/LltcInJ1bl90eXBlXCJdID8/IFwiY2hhaW5cIixcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IGluaGVyaXRBcmdzPy5bXCJzdGFydF90aW1lXCJdID8/IERhdGUubm93KCksXG4gICAgICAgICAgICBpZDogcGFyc2VkRG90dGVkT3JkZXIuYXQoLTEpPy51dWlkLFxuICAgICAgICAgICAgdHJhY2VfaWQ6IHRyYWNlSWQsXG4gICAgICAgICAgICBkb3R0ZWRfb3JkZXI6IHBhcmVudERvdHRlZE9yZGVyLFxuICAgICAgICB9O1xuICAgICAgICBpZiAocmF3SGVhZGVyc1tcImJhZ2dhZ2VcIl0gJiYgdHlwZW9mIHJhd0hlYWRlcnNbXCJiYWdnYWdlXCJdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBiYWdnYWdlID0gQmFnZ2FnZS5mcm9tSGVhZGVyKHJhd0hlYWRlcnNbXCJiYWdnYWdlXCJdKTtcbiAgICAgICAgICAgIGNvbmZpZy5tZXRhZGF0YSA9IGJhZ2dhZ2UubWV0YWRhdGE7XG4gICAgICAgICAgICBjb25maWcudGFncyA9IGJhZ2dhZ2UudGFncztcbiAgICAgICAgICAgIGNvbmZpZy5wcm9qZWN0X25hbWUgPSBiYWdnYWdlLnByb2plY3RfbmFtZTtcbiAgICAgICAgICAgIGNvbmZpZy5yZXBsaWNhcyA9IGJhZ2dhZ2UucmVwbGljYXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVuVHJlZSA9IG5ldyBSdW5UcmVlKGNvbmZpZyk7XG4gICAgICAgIC8vIFNldCB0aGUgZGlzdHJpYnV0ZWQgcGFyZW50IElEIHRvIHRoaXMgcnVuJ3MgSUQgZm9yIHJlcm9vdGluZ1xuICAgICAgICBydW5UcmVlLmRpc3RyaWJ1dGVkUGFyZW50SWQgPSBydW5UcmVlLmlkO1xuICAgICAgICByZXR1cm4gcnVuVHJlZTtcbiAgICB9XG4gICAgdG9IZWFkZXJzKGhlYWRlcnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgXCJsYW5nc21pdGgtdHJhY2VcIjogdGhpcy5kb3R0ZWRfb3JkZXIsXG4gICAgICAgICAgICBiYWdnYWdlOiBuZXcgQmFnZ2FnZSh0aGlzLmV4dHJhPy5tZXRhZGF0YSwgdGhpcy50YWdzLCB0aGlzLnByb2plY3RfbmFtZSwgdGhpcy5yZXBsaWNhcykudG9IZWFkZXIoKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSdW5UcmVlLCBcInNoYXJlZENsaWVudFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgdmFsdWU6IG51bGxcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGlzUnVuVHJlZSh4KSB7XG4gICAgcmV0dXJuICh4ICE9IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIHguY3JlYXRlQ2hpbGQgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICB0eXBlb2YgeC5wb3N0UnVuID09PSBcImZ1bmN0aW9uXCIpO1xufVxuZnVuY3Rpb24gaXNMYW5nQ2hhaW5UcmFjZXJMaWtlKHgpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHggIT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgeC5uYW1lID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIHgubmFtZSA9PT0gXCJsYW5nY2hhaW5fdHJhY2VyXCIpO1xufVxuZnVuY3Rpb24gY29udGFpbnNMYW5nQ2hhaW5UcmFjZXJMaWtlKHgpIHtcbiAgICByZXR1cm4gKEFycmF5LmlzQXJyYXkoeCkgJiYgeC5zb21lKChjYWxsYmFjaykgPT4gaXNMYW5nQ2hhaW5UcmFjZXJMaWtlKGNhbGxiYWNrKSkpO1xufVxuZnVuY3Rpb24gaXNDYWxsYmFja01hbmFnZXJMaWtlKHgpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHggIT0gbnVsbCAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHguaGFuZGxlcnMpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1J1bm5hYmxlQ29uZmlnTGlrZSh4KSB7XG4gICAgLy8gQ2hlY2sgdGhhdCBpdCdzIGFuIG9iamVjdCB3aXRoIGEgY2FsbGJhY2tzIGFyZ1xuICAgIC8vIHRoYXQgaGFzIGVpdGhlciBhIENhbGxiYWNrTWFuYWdlckxpa2Ugb2JqZWN0IHdpdGggYSBsYW5nY2hhaW4gdHJhY2VyIHdpdGhpbiBpdFxuICAgIC8vIG9yIGFuIGFycmF5IHdpdGggYSBMYW5nQ2hhaW5UcmFjZXJMaWtlIG9iamVjdCB3aXRoaW4gaXRcbiAgICByZXR1cm4gKHggIT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgeC5jYWxsYmFja3MgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgLy8gQ2FsbGJhY2sgbWFuYWdlciB3aXRoIGEgbGFuZ2NoYWluIHRyYWNlclxuICAgICAgICAoY29udGFpbnNMYW5nQ2hhaW5UcmFjZXJMaWtlKHguY2FsbGJhY2tzPy5oYW5kbGVycykgfHxcbiAgICAgICAgICAgIC8vIE9yIGl0J3MgYW4gYXJyYXkgd2l0aCBhIExhbmdDaGFpblRyYWNlckxpa2Ugb2JqZWN0IHdpdGhpbiBpdFxuICAgICAgICAgICAgY29udGFpbnNMYW5nQ2hhaW5UcmFjZXJMaWtlKHguY2FsbGJhY2tzKSkpO1xufVxuZnVuY3Rpb24gX2dldFdyaXRlUmVwbGljYXNGcm9tRW52KCkge1xuICAgIGNvbnN0IGVudlZhciA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HU01JVEhfUlVOU19FTkRQT0lOVFNcIik7XG4gICAgaWYgKCFlbnZWYXIpXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGVudlZhcik7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcGxpY2FzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcGFyc2VkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSBcIm9iamVjdFwiIHx8IGl0ZW0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBJbnZhbGlkIGl0ZW0gdHlwZSBpbiBMQU5HU01JVEhfUlVOU19FTkRQT0lOVFM6IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGV4cGVjdGVkIG9iamVjdCwgZ290ICR7dHlwZW9mIGl0ZW19YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0uYXBpX3VybCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgYXBpX3VybCB0eXBlIGluIExBTkdTTUlUSF9SVU5TX0VORFBPSU5UUzogYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgZXhwZWN0ZWQgc3RyaW5nLCBnb3QgJHt0eXBlb2YgaXRlbS5hcGlfdXJsfWApO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLmFwaV9rZXkgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBJbnZhbGlkIGFwaV9rZXkgdHlwZSBpbiBMQU5HU01JVEhfUlVOU19FTkRQT0lOVFM6IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGV4cGVjdGVkIHN0cmluZywgZ290ICR7dHlwZW9mIGl0ZW0uYXBpX2tleX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcGxpY2FzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBhcGlVcmw6IGl0ZW0uYXBpX3VybC5yZXBsYWNlKC9cXC8kLywgXCJcIiksXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleTogaXRlbS5hcGlfa2V5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcGxpY2FzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwYXJzZWQgPT09IFwib2JqZWN0XCIgJiYgcGFyc2VkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBfY2hlY2tFbmRwb2ludEVudlVuc2V0KHBhcnNlZCk7XG4gICAgICAgICAgICBjb25zdCByZXBsaWNhcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBbdXJsLCBrZXldIG9mIE9iamVjdC5lbnRyaWVzKHBhcnNlZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGVhblVybCA9IHVybC5yZXBsYWNlKC9cXC8kLywgXCJcIik7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwbGljYXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlVcmw6IGNsZWFuVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpS2V5OiBrZXksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBJbnZhbGlkIHZhbHVlIHR5cGUgaW4gTEFOR1NNSVRIX1JVTlNfRU5EUE9JTlRTIGZvciBVUkwgJHt1cmx9OiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBleHBlY3RlZCBzdHJpbmcsIGdvdCAke3R5cGVvZiBrZXl9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXBsaWNhcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkludmFsaWQgTEFOR1NNSVRIX1JVTlNfRU5EUE9JTlRTIOKAkyBtdXN0IGJlIHZhbGlkIEpTT04gYXJyYXkgb2YgXCIgK1xuICAgICAgICAgICAgICAgIGBvYmplY3RzIHdpdGggYXBpX3VybCBhbmQgYXBpX2tleSBwcm9wZXJ0aWVzLCBvciBvYmplY3QgbWFwcGluZyB1cmwtPmFwaUtleSwgZ290ICR7dHlwZW9mIHBhcnNlZH1gKTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoaXNDb25mbGljdGluZ0VuZHBvaW50c0Vycm9yKGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUud2FybihcIkludmFsaWQgTEFOR1NNSVRIX1JVTlNfRU5EUE9JTlRTIOKAkyBtdXN0IGJlIHZhbGlkIEpTT04gYXJyYXkgb2YgXCIgK1xuICAgICAgICAgICAgXCJvYmplY3RzIHdpdGggYXBpX3VybCBhbmQgYXBpX2tleSBwcm9wZXJ0aWVzLCBvciBvYmplY3QgbWFwcGluZyB1cmwtPmFwaUtleVwiKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9lbnN1cmVXcml0ZVJlcGxpY2FzKHJlcGxpY2FzKSB7XG4gICAgLy8gSWYgbnVsbCAtPiBmZXRjaCBmcm9tIGVudlxuICAgIGlmIChyZXBsaWNhcykge1xuICAgICAgICByZXR1cm4gcmVwbGljYXMubWFwKChyZXBsaWNhKSA9PiB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXBsaWNhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3ROYW1lOiByZXBsaWNhWzBdLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVzOiByZXBsaWNhWzFdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVwbGljYTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBfZ2V0V3JpdGVSZXBsaWNhc0Zyb21FbnYoKTtcbn1cbmZ1bmN0aW9uIF9jaGVja0VuZHBvaW50RW52VW5zZXQocGFyc2VkKSB7XG4gICAgaWYgKE9iamVjdC5rZXlzKHBhcnNlZCkubGVuZ3RoID4gMCAmJlxuICAgICAgICBnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlKFwiRU5EUE9JTlRcIikpIHtcbiAgICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nRW5kcG9pbnRzRXJyb3IoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQ2xpZW50IiwiaXNUcmFjaW5nRW5hYmxlZCIsImlzQ29uZmxpY3RpbmdFbmRwb2ludHNFcnJvciIsIkNvbmZsaWN0aW5nRW5kcG9pbnRzRXJyb3IiLCJfTENfQ09OVEVYVF9WQVJJQUJMRVNfS0VZIiwiX1JFUExJQ0FfVFJBQ0VfUk9PVFNfS0VZIiwiZ2V0Q29udGV4dFZhciIsInNldENvbnRleHRWYXIiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiZ2V0UnVudGltZUVudmlyb25tZW50IiwiZ2V0RGVmYXVsdFByb2plY3ROYW1lIiwiZ2V0TGFuZ1NtaXRoRW52aXJvbm1lbnRWYXJpYWJsZSIsIndhcm5PbmNlIiwidXVpZDdGcm9tVGltZSIsInY1IiwidXVpZHY1IiwiVElNRVNUQU1QX0xFTkdUSCIsIlVVSURfTkFNRVNQQUNFX0ROUyIsImdldFJlcGxpY2FLZXkiLCJyZXBsaWNhIiwic29ydGVkS2V5cyIsIk9iamVjdCIsImtleXMiLCJzb3J0Iiwia2V5RGF0YSIsIm1hcCIsImtleSIsImpvaW4iLCJzdHJpcE5vbkFscGhhbnVtZXJpYyIsImlucHV0IiwicmVwbGFjZSIsImdldE1pY3Jvc2Vjb25kUHJlY2lzaW9uRGF0ZXN0cmluZyIsImVwb2NoIiwiZXhlY3V0aW9uT3JkZXIiLCJwYWRkZWRPcmRlciIsInRvRml4ZWQiLCJzbGljZSIsInBhZFN0YXJ0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQiLCJydW5JZCIsIm1pY3Jvc2Vjb25kUHJlY2lzaW9uRGF0ZXN0cmluZyIsImRvdHRlZE9yZGVyIiwiQmFnZ2FnZSIsImNvbnN0cnVjdG9yIiwibWV0YWRhdGEiLCJ0YWdzIiwicHJvamVjdF9uYW1lIiwicmVwbGljYXMiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZnJvbUhlYWRlciIsIml0ZW1zIiwic3BsaXQiLCJpdGVtIiwidXJpVmFsdWUiLCJkZWNvZGVVUklDb21wb25lbnQiLCJKU09OIiwicGFyc2UiLCJ0b0hlYWRlciIsImxlbmd0aCIsInB1c2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJzdHJpbmdpZnkiLCJSdW5UcmVlIiwib3JpZ2luYWxDb25maWciLCJpc1J1blRyZWUiLCJhc3NpZ24iLCJkZWZhdWx0Q29uZmlnIiwiZ2V0RGVmYXVsdENvbmZpZyIsImNvbmZpZyIsImNsaWVudCIsImdldFNoYXJlZENsaWVudCIsImRlZHVwZWRNZXRhZGF0YSIsImV4dHJhIiwiaWQiLCJleGVjdXRpb25fb3JkZXIiLCJjaGlsZF9leGVjdXRpb25fb3JkZXIiLCJkb3R0ZWRfb3JkZXIiLCJfc2VyaWFsaXplZF9zdGFydF90aW1lIiwic3RhcnRfdGltZSIsInRyYWNlX2lkIiwicGFyZW50X3J1biIsIl9lbnN1cmVXcml0ZVJlcGxpY2FzIiwibm93IiwicnVuX3R5cGUiLCJjaGlsZF9ydW5zIiwiYXBpX3VybCIsImFwaV9rZXkiLCJjYWxsZXJfb3B0aW9ucyIsInNlcmlhbGl6ZWQiLCJpbnB1dHMiLCJzaGFyZWRDbGllbnQiLCJjcmVhdGVDaGlsZCIsImluaGVyaXRlZFJlcGxpY2FzIiwicmVyb290IiwicmVzdCIsImNoaWxkUmVwbGljYXMiLCJjaGlsZCIsInRyYWNpbmdFbmFibGVkIiwiTENfQ0hJTEQiLCJTeW1ib2wiLCJmb3IiLCJwcmVzZW50Q29uZmlnIiwiaXNSdW5uYWJsZUNvbmZpZ0xpa2UiLCJuZXdDb25maWciLCJjYWxsYmFja3MiLCJpc0NhbGxiYWNrTWFuYWdlckxpa2UiLCJjb3B5IiwidW5kZWZpbmVkIiwiX3BhcmVudFJ1bklkIiwiaGFuZGxlcnMiLCJmaW5kIiwiaXNMYW5nQ2hhaW5UcmFjZXJMaWtlIiwidXBkYXRlRnJvbVJ1blRyZWUiLCJ2aXNpdGVkIiwiU2V0IiwiY3VycmVudCIsImhhcyIsImFkZCIsIk1hdGgiLCJtYXgiLCJlbmQiLCJvdXRwdXRzIiwiZXJyb3IiLCJlbmRUaW1lIiwiZW5kX3RpbWUiLCJfY29udmVydFRvQ3JlYXRlIiwicnVuIiwicnVudGltZUVudiIsImV4Y2x1ZGVDaGlsZFJ1bnMiLCJydW5FeHRyYSIsInJ1bnRpbWUiLCJsaWJyYXJ5IiwiayIsInYiLCJlbnRyaWVzIiwicGFyZW50X3J1bl9pZCIsImNoaWxkX3J1biIsIm5hbWUiLCJyZWZlcmVuY2VfZXhhbXBsZV9pZCIsInNlc3Npb25fbmFtZSIsImF0dGFjaG1lbnRzIiwiZXZlbnRzIiwiX3NsaWNlUGFyZW50SWQiLCJwYXJlbnRJZCIsInNlZ3MiLCJzdGFydElkeCIsImlkeCIsInNlZ0lkIiwidHJpbW1lZFNlZ3MiLCJfc2V0UmVwbGljYVRyYWNlUm9vdCIsInJlcGxpY2FLZXkiLCJ0cmFjZVJvb3RJZCIsInJlcGxpY2FUcmFjZVJvb3RzIiwiX3JlbWFwRm9yUHJvamVjdCIsInBhcmFtcyIsInByb2plY3ROYW1lIiwiZGlzdHJpYnV0ZWRQYXJlbnRJZCIsImFwaVVybCIsImFwaUtleSIsIndvcmtzcGFjZUlkIiwiYmFzZVJ1biIsImFuY2VzdG9yUmVyb290ZWRUcmFjZUlkIiwicm9vdElkeCIsIm9sZElkIiwibmV3SWQiLCJuZXdUcmFjZUlkIiwibmV3UGFyZW50SWQiLCJuZXdEb3R0ZWRPcmRlciIsInJlbWFwcGVkU2VncyIsInNlZyIsInJlbWFwcGVkSWQiLCJwb3N0UnVuIiwicnVuQ3JlYXRlIiwiY3JlYXRlUnVuIiwiY2hpbGRSdW4iLCJjb25zb2xlIiwicGF0Y2hSdW4iLCJvcHRpb25zIiwidXBkYXRlcyIsInJ1bkRhdGEiLCJ1cGRhdGVQYXlsb2FkIiwiZXhjbHVkZUlucHV0cyIsInVwZGF0ZVJ1biIsInJ1blVwZGF0ZSIsInRvSlNPTiIsImFkZEV2ZW50IiwiZXZlbnQiLCJ0aW1lIiwibWVzc2FnZSIsImZyb21SdW5uYWJsZUNvbmZpZyIsInBhcmVudENvbmZpZyIsInByb3BzIiwiY2FsbGJhY2tNYW5hZ2VyIiwicGFyZW50UnVuIiwicGFyZW50UnVuSWQiLCJnZXRQYXJlbnRSdW5JZCIsImxhbmdDaGFpblRyYWNlciIsImhhbmRsZXIiLCJnZXRSdW4iLCJwYXJlbnRSdW5UcmVlIiwiY29uY2F0IiwiZnJvbURvdHRlZE9yZGVyIiwiZnJvbUhlYWRlcnMiLCJoZWFkZXJzIiwiaW5oZXJpdEFyZ3MiLCJyYXdIZWFkZXJzIiwiZ2V0IiwiYmFnZ2FnZSIsImhlYWRlclRyYWNlIiwicGFyZW50RG90dGVkT3JkZXIiLCJ0cmltIiwicGFyc2VkRG90dGVkT3JkZXIiLCJwYXJ0Iiwic3RyVGltZSIsInV1aWQiLCJ0cmFjZUlkIiwiYXQiLCJydW5UcmVlIiwidG9IZWFkZXJzIiwicmVzdWx0Iiwic2V0IiwieCIsImNvbnRhaW5zTGFuZ0NoYWluVHJhY2VyTGlrZSIsIkFycmF5IiwiaXNBcnJheSIsInNvbWUiLCJjYWxsYmFjayIsIl9nZXRXcml0ZVJlcGxpY2FzRnJvbUVudiIsImVudlZhciIsInBhcnNlZCIsIndhcm4iLCJfY2hlY2tFbmRwb2ludEVudlVuc2V0IiwidXJsIiwiY2xlYW5VcmwiLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/run_trees.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/constants.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/constants.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _LC_CONTEXT_VARIABLES_KEY: () => (/* binding */ _LC_CONTEXT_VARIABLES_KEY),\n/* harmony export */   _REPLICA_TRACE_ROOTS_KEY: () => (/* binding */ _REPLICA_TRACE_ROOTS_KEY)\n/* harmony export */ });\nconst _LC_CONTEXT_VARIABLES_KEY = Symbol.for(\"lc:context_variables\");\nconst _REPLICA_TRACE_ROOTS_KEY = Symbol.for(\"langsmith:replica_trace_roots\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9zaW5nbGV0b25zL2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLE1BQU1BLDRCQUE0QkMsT0FBT0MsR0FBRyxDQUFDLHdCQUF3QjtBQUNyRSxNQUFNQywyQkFBMkJGLE9BQU9DLEdBQUcsQ0FBQyxpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9ub2RlX21vZHVsZXMvbGFuZ3NtaXRoL2Rpc3Qvc2luZ2xldG9ucy9jb25zdGFudHMuanM/YzYxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgX0xDX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSA9IFN5bWJvbC5mb3IoXCJsYzpjb250ZXh0X3ZhcmlhYmxlc1wiKTtcbmV4cG9ydCBjb25zdCBfUkVQTElDQV9UUkFDRV9ST09UU19LRVkgPSBTeW1ib2wuZm9yKFwibGFuZ3NtaXRoOnJlcGxpY2FfdHJhY2Vfcm9vdHNcIik7XG4iXSwibmFtZXMiOlsiX0xDX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSIsIlN5bWJvbCIsImZvciIsIl9SRVBMSUNBX1RSQUNFX1JPT1RTX0tFWSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/constants.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/fetch.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/fetch.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _getFetchImplementation: () => (/* binding */ _getFetchImplementation),\n/* harmony export */   _globalFetchImplementationIsNodeFetch: () => (/* binding */ _globalFetchImplementationIsNodeFetch),\n/* harmony export */   clearFetchImplementation: () => (/* binding */ clearFetchImplementation),\n/* harmony export */   overrideFetchImplementation: () => (/* binding */ overrideFetchImplementation)\n/* harmony export */ });\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/env.js\");\n\n// Wrap the default fetch call due to issues with illegal invocations\n// in some environments:\n// https://stackoverflow.com/questions/69876859/why-does-bind-fix-failed-to-execute-fetch-on-window-illegal-invocation-err\n// @ts-expect-error Broad typing to support a range of fetch implementations\nconst DEFAULT_FETCH_IMPLEMENTATION = (...args)=>fetch(...args);\nconst LANGSMITH_FETCH_IMPLEMENTATION_KEY = Symbol.for(\"ls:fetch_implementation\");\n/**\n * Overrides the fetch implementation used for LangSmith calls.\n * You should use this if you need to use an implementation of fetch\n * other than the default global (e.g. for dealing with proxies).\n * @param fetch The new fetch functino to use.\n */ const overrideFetchImplementation = (fetch1)=>{\n    globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY] = fetch1;\n};\nconst clearFetchImplementation = ()=>{\n    delete globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY];\n};\nconst _globalFetchImplementationIsNodeFetch = ()=>{\n    const fetchImpl = globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY];\n    if (!fetchImpl) return false;\n    // Check if the implementation has node-fetch specific properties\n    return typeof fetchImpl === \"function\" && \"Headers\" in fetchImpl && \"Request\" in fetchImpl && \"Response\" in fetchImpl;\n};\n/**\n * @internal\n */ const _getFetchImplementation = (debug)=>{\n    return async (...args)=>{\n        if (debug || (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getLangSmithEnvironmentVariable)(\"DEBUG\") === \"true\") {\n            const [url, options] = args;\n            console.log(` ${options?.method || \"GET\"} ${url}`);\n        }\n        const res = await (globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY] ?? DEFAULT_FETCH_IMPLEMENTATION)(...args);\n        if (debug || (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getLangSmithEnvironmentVariable)(\"DEBUG\") === \"true\") {\n            console.log(` ${res.status} ${res.statusText} ${res.url}`);\n        }\n        return res;\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9zaW5nbGV0b25zL2ZldGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWtFO0FBQ2xFLHFFQUFxRTtBQUNyRSx3QkFBd0I7QUFDeEIsMEhBQTBIO0FBQzFILDRFQUE0RTtBQUM1RSxNQUFNQywrQkFBK0IsQ0FBQyxHQUFHQyxPQUFTQyxTQUFTRDtBQUMzRCxNQUFNRSxxQ0FBcUNDLE9BQU9DLEdBQUcsQ0FBQztBQUN0RDs7Ozs7Q0FLQyxHQUNNLE1BQU1DLDhCQUE4QixDQUFDSjtJQUN4Q0ssVUFBVSxDQUFDSixtQ0FBbUMsR0FBR0Q7QUFDckQsRUFBRTtBQUNLLE1BQU1NLDJCQUEyQjtJQUNwQyxPQUFPRCxVQUFVLENBQUNKLG1DQUFtQztBQUN6RCxFQUFFO0FBQ0ssTUFBTU0sd0NBQXdDO0lBQ2pELE1BQU1DLFlBQVlILFVBQVUsQ0FBQ0osbUNBQW1DO0lBQ2hFLElBQUksQ0FBQ08sV0FDRCxPQUFPO0lBQ1gsaUVBQWlFO0lBQ2pFLE9BQVEsT0FBT0EsY0FBYyxjQUN6QixhQUFhQSxhQUNiLGFBQWFBLGFBQ2IsY0FBY0E7QUFDdEIsRUFBRTtBQUNGOztDQUVDLEdBQ00sTUFBTUMsMEJBQTBCLENBQUNDO0lBQ3BDLE9BQU8sT0FBTyxHQUFHWDtRQUNiLElBQUlXLFNBQVNiLDhFQUErQkEsQ0FBQyxhQUFhLFFBQVE7WUFDOUQsTUFBTSxDQUFDYyxLQUFLQyxRQUFRLEdBQUdiO1lBQ3ZCYyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUVGLFNBQVNHLFVBQVUsTUFBTSxDQUFDLEVBQUVKLElBQUksQ0FBQztRQUN0RDtRQUNBLE1BQU1LLE1BQU0sTUFBTSxDQUFDWCxVQUFVLENBQUNKLG1DQUFtQyxJQUM3REgsNEJBQTJCLEtBQU1DO1FBQ3JDLElBQUlXLFNBQVNiLDhFQUErQkEsQ0FBQyxhQUFhLFFBQVE7WUFDOURnQixRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUVFLElBQUlDLE1BQU0sQ0FBQyxDQUFDLEVBQUVELElBQUlFLFVBQVUsQ0FBQyxDQUFDLEVBQUVGLElBQUlMLEdBQUcsQ0FBQyxDQUFDO1FBQzlEO1FBQ0EsT0FBT0s7SUFDWDtBQUNKLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9ub2RlX21vZHVsZXMvbGFuZ3NtaXRoL2Rpc3Qvc2luZ2xldG9ucy9mZXRjaC5qcz80OGQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldExhbmdTbWl0aEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG4vLyBXcmFwIHRoZSBkZWZhdWx0IGZldGNoIGNhbGwgZHVlIHRvIGlzc3VlcyB3aXRoIGlsbGVnYWwgaW52b2NhdGlvbnNcbi8vIGluIHNvbWUgZW52aXJvbm1lbnRzOlxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNjk4NzY4NTkvd2h5LWRvZXMtYmluZC1maXgtZmFpbGVkLXRvLWV4ZWN1dGUtZmV0Y2gtb24td2luZG93LWlsbGVnYWwtaW52b2NhdGlvbi1lcnJcbi8vIEB0cy1leHBlY3QtZXJyb3IgQnJvYWQgdHlwaW5nIHRvIHN1cHBvcnQgYSByYW5nZSBvZiBmZXRjaCBpbXBsZW1lbnRhdGlvbnNcbmNvbnN0IERFRkFVTFRfRkVUQ0hfSU1QTEVNRU5UQVRJT04gPSAoLi4uYXJncykgPT4gZmV0Y2goLi4uYXJncyk7XG5jb25zdCBMQU5HU01JVEhfRkVUQ0hfSU1QTEVNRU5UQVRJT05fS0VZID0gU3ltYm9sLmZvcihcImxzOmZldGNoX2ltcGxlbWVudGF0aW9uXCIpO1xuLyoqXG4gKiBPdmVycmlkZXMgdGhlIGZldGNoIGltcGxlbWVudGF0aW9uIHVzZWQgZm9yIExhbmdTbWl0aCBjYWxscy5cbiAqIFlvdSBzaG91bGQgdXNlIHRoaXMgaWYgeW91IG5lZWQgdG8gdXNlIGFuIGltcGxlbWVudGF0aW9uIG9mIGZldGNoXG4gKiBvdGhlciB0aGFuIHRoZSBkZWZhdWx0IGdsb2JhbCAoZS5nLiBmb3IgZGVhbGluZyB3aXRoIHByb3hpZXMpLlxuICogQHBhcmFtIGZldGNoIFRoZSBuZXcgZmV0Y2ggZnVuY3Rpbm8gdG8gdXNlLlxuICovXG5leHBvcnQgY29uc3Qgb3ZlcnJpZGVGZXRjaEltcGxlbWVudGF0aW9uID0gKGZldGNoKSA9PiB7XG4gICAgZ2xvYmFsVGhpc1tMQU5HU01JVEhfRkVUQ0hfSU1QTEVNRU5UQVRJT05fS0VZXSA9IGZldGNoO1xufTtcbmV4cG9ydCBjb25zdCBjbGVhckZldGNoSW1wbGVtZW50YXRpb24gPSAoKSA9PiB7XG4gICAgZGVsZXRlIGdsb2JhbFRoaXNbTEFOR1NNSVRIX0ZFVENIX0lNUExFTUVOVEFUSU9OX0tFWV07XG59O1xuZXhwb3J0IGNvbnN0IF9nbG9iYWxGZXRjaEltcGxlbWVudGF0aW9uSXNOb2RlRmV0Y2ggPSAoKSA9PiB7XG4gICAgY29uc3QgZmV0Y2hJbXBsID0gZ2xvYmFsVGhpc1tMQU5HU01JVEhfRkVUQ0hfSU1QTEVNRU5UQVRJT05fS0VZXTtcbiAgICBpZiAoIWZldGNoSW1wbClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIENoZWNrIGlmIHRoZSBpbXBsZW1lbnRhdGlvbiBoYXMgbm9kZS1mZXRjaCBzcGVjaWZpYyBwcm9wZXJ0aWVzXG4gICAgcmV0dXJuICh0eXBlb2YgZmV0Y2hJbXBsID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgXCJIZWFkZXJzXCIgaW4gZmV0Y2hJbXBsICYmXG4gICAgICAgIFwiUmVxdWVzdFwiIGluIGZldGNoSW1wbCAmJlxuICAgICAgICBcIlJlc3BvbnNlXCIgaW4gZmV0Y2hJbXBsKTtcbn07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgX2dldEZldGNoSW1wbGVtZW50YXRpb24gPSAoZGVidWcpID0+IHtcbiAgICByZXR1cm4gYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKGRlYnVnIHx8IGdldExhbmdTbWl0aEVudmlyb25tZW50VmFyaWFibGUoXCJERUJVR1wiKSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IFt1cmwsIG9wdGlvbnNdID0gYXJncztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDihpIgJHtvcHRpb25zPy5tZXRob2QgfHwgXCJHRVRcIn0gJHt1cmx9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgKGdsb2JhbFRoaXNbTEFOR1NNSVRIX0ZFVENIX0lNUExFTUVOVEFUSU9OX0tFWV0gPz9cbiAgICAgICAgICAgIERFRkFVTFRfRkVUQ0hfSU1QTEVNRU5UQVRJT04pKC4uLmFyZ3MpO1xuICAgICAgICBpZiAoZGVidWcgfHwgZ2V0TGFuZ1NtaXRoRW52aXJvbm1lbnRWYXJpYWJsZShcIkRFQlVHXCIpID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYOKGkCAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9ICR7cmVzLnVybH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG59O1xuIl0sIm5hbWVzIjpbImdldExhbmdTbWl0aEVudmlyb25tZW50VmFyaWFibGUiLCJERUZBVUxUX0ZFVENIX0lNUExFTUVOVEFUSU9OIiwiYXJncyIsImZldGNoIiwiTEFOR1NNSVRIX0ZFVENIX0lNUExFTUVOVEFUSU9OX0tFWSIsIlN5bWJvbCIsImZvciIsIm92ZXJyaWRlRmV0Y2hJbXBsZW1lbnRhdGlvbiIsImdsb2JhbFRoaXMiLCJjbGVhckZldGNoSW1wbGVtZW50YXRpb24iLCJfZ2xvYmFsRmV0Y2hJbXBsZW1lbnRhdGlvbklzTm9kZUZldGNoIiwiZmV0Y2hJbXBsIiwiX2dldEZldGNoSW1wbGVtZW50YXRpb24iLCJkZWJ1ZyIsInVybCIsIm9wdGlvbnMiLCJjb25zb2xlIiwibG9nIiwibWV0aG9kIiwicmVzIiwic3RhdHVzIiwic3RhdHVzVGV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/fetch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/otel.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/otel.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OTELProviderSingleton: () => (/* binding */ OTELProviderSingleton),\n/* harmony export */   getDefaultOTLPTracerComponents: () => (/* binding */ getDefaultOTLPTracerComponents),\n/* harmony export */   getOTELContext: () => (/* binding */ getOTELContext),\n/* harmony export */   getOTELTrace: () => (/* binding */ getOTELTrace),\n/* harmony export */   setDefaultOTLPTracerComponents: () => (/* binding */ setDefaultOTLPTracerComponents),\n/* harmony export */   setOTELInstances: () => (/* binding */ setOTELInstances)\n/* harmony export */ });\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/env.js\");\n// Should not import any OTEL packages to avoid pulling in optional deps.\n\nclass MockTracer {\n    constructor(){\n        Object.defineProperty(this, \"hasWarned\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    startActiveSpan(_name, ...args) {\n        if (!this.hasWarned && (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getOtelEnabled)()) {\n            console.warn(\"You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. \" + 'Please add:\\n```\\nimport { initializeOTEL } from \"langsmith/experimental/otel/setup\";\\ninitializeOTEL();\\n```\\nat the beginning of your code.');\n            this.hasWarned = true;\n        }\n        // Handle different overloads:\n        // startActiveSpan(name, fn)\n        // startActiveSpan(name, options, fn)\n        // startActiveSpan(name, options, context, fn)\n        let fn;\n        if (args.length === 1 && typeof args[0] === \"function\") {\n            fn = args[0];\n        } else if (args.length === 2 && typeof args[1] === \"function\") {\n            fn = args[1];\n        } else if (args.length === 3 && typeof args[2] === \"function\") {\n            fn = args[2];\n        }\n        if (typeof fn === \"function\") {\n            return fn();\n        }\n        return undefined;\n    }\n}\nclass MockOTELTrace {\n    constructor(){\n        Object.defineProperty(this, \"mockTracer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new MockTracer()\n        });\n    }\n    getTracer(_name, _version) {\n        return this.mockTracer;\n    }\n    getActiveSpan() {\n        return undefined;\n    }\n    setSpan(context, _span) {\n        return context;\n    }\n    getSpan(_context) {\n        return undefined;\n    }\n    setSpanContext(context, _spanContext) {\n        return context;\n    }\n    getTracerProvider() {\n        return undefined;\n    }\n    setGlobalTracerProvider(_tracerProvider) {\n        return false;\n    }\n}\nclass MockOTELContext {\n    active() {\n        return {};\n    }\n    with(_context, fn) {\n        return fn();\n    }\n}\nconst OTEL_TRACE_KEY = Symbol.for(\"ls:otel_trace\");\nconst OTEL_CONTEXT_KEY = Symbol.for(\"ls:otel_context\");\nconst OTEL_GET_DEFAULT_OTLP_TRACER_PROVIDER_KEY = Symbol.for(\"ls:otel_get_default_otlp_tracer_provider\");\nconst mockOTELTrace = new MockOTELTrace();\nconst mockOTELContext = new MockOTELContext();\nclass OTELProvider {\n    getTraceInstance() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return globalThis[OTEL_TRACE_KEY] ?? mockOTELTrace;\n    }\n    getContextInstance() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return globalThis[OTEL_CONTEXT_KEY] ?? mockOTELContext;\n    }\n    initializeGlobalInstances(otel) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (globalThis[OTEL_TRACE_KEY] === undefined) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            globalThis[OTEL_TRACE_KEY] = otel.trace;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (globalThis[OTEL_CONTEXT_KEY] === undefined) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            globalThis[OTEL_CONTEXT_KEY] = otel.context;\n        }\n    }\n    setDefaultOTLPTracerComponents(components) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        globalThis[OTEL_GET_DEFAULT_OTLP_TRACER_PROVIDER_KEY] = components;\n    }\n    getDefaultOTLPTracerComponents() {\n        return globalThis[OTEL_GET_DEFAULT_OTLP_TRACER_PROVIDER_KEY] ?? undefined;\n    }\n}\nconst OTELProviderSingleton = new OTELProvider();\n/**\n * Get the current OTEL trace instance.\n * Returns a mock implementation if OTEL is not available.\n */ function getOTELTrace() {\n    return OTELProviderSingleton.getTraceInstance();\n}\n/**\n * Get the current OTEL context instance.\n * Returns a mock implementation if OTEL is not available.\n */ function getOTELContext() {\n    return OTELProviderSingleton.getContextInstance();\n}\n/**\n * Initialize the global OTEL instances.\n * Should be called once when OTEL packages are available.\n */ function setOTELInstances(otel) {\n    OTELProviderSingleton.initializeGlobalInstances(otel);\n}\n/**\n * Set a getter function for the default OTLP tracer provider.\n * This allows lazy initialization of the tracer provider.\n */ function setDefaultOTLPTracerComponents(components) {\n    OTELProviderSingleton.setDefaultOTLPTracerComponents(components);\n}\n/**\n * Get the default OTLP tracer provider instance.\n * Returns undefined if not set.\n */ function getDefaultOTLPTracerComponents() {\n    return OTELProviderSingleton.getDefaultOTLPTracerComponents();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9zaW5nbGV0b25zL290ZWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHlFQUF5RTtBQUN4QjtBQUNqRCxNQUFNQztJQUNGQyxhQUFjO1FBQ1ZDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO0lBQ0o7SUFDQUMsZ0JBQWdCQyxLQUFLLEVBQUUsR0FBR0MsSUFBSSxFQUFFO1FBQzVCLElBQUksQ0FBQyxJQUFJLENBQUNDLFNBQVMsSUFBSVosNkRBQWNBLElBQUk7WUFDckNhLFFBQVFDLElBQUksQ0FBQyxpS0FDVDtZQUNKLElBQUksQ0FBQ0YsU0FBUyxHQUFHO1FBQ3JCO1FBQ0EsOEJBQThCO1FBQzlCLDRCQUE0QjtRQUM1QixxQ0FBcUM7UUFDckMsOENBQThDO1FBQzlDLElBQUlHO1FBQ0osSUFBSUosS0FBS0ssTUFBTSxLQUFLLEtBQUssT0FBT0wsSUFBSSxDQUFDLEVBQUUsS0FBSyxZQUFZO1lBQ3BESSxLQUFLSixJQUFJLENBQUMsRUFBRTtRQUNoQixPQUNLLElBQUlBLEtBQUtLLE1BQU0sS0FBSyxLQUFLLE9BQU9MLElBQUksQ0FBQyxFQUFFLEtBQUssWUFBWTtZQUN6REksS0FBS0osSUFBSSxDQUFDLEVBQUU7UUFDaEIsT0FDSyxJQUFJQSxLQUFLSyxNQUFNLEtBQUssS0FBSyxPQUFPTCxJQUFJLENBQUMsRUFBRSxLQUFLLFlBQVk7WUFDekRJLEtBQUtKLElBQUksQ0FBQyxFQUFFO1FBQ2hCO1FBQ0EsSUFBSSxPQUFPSSxPQUFPLFlBQVk7WUFDMUIsT0FBT0E7UUFDWDtRQUNBLE9BQU9FO0lBQ1g7QUFDSjtBQUNBLE1BQU1DO0lBQ0ZoQixhQUFjO1FBQ1ZDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxJQUFJUDtRQUNmO0lBQ0o7SUFDQWtCLFVBQVVULEtBQUssRUFBRVUsUUFBUSxFQUFFO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDQyxVQUFVO0lBQzFCO0lBQ0FDLGdCQUFnQjtRQUNaLE9BQU9MO0lBQ1g7SUFDQU0sUUFBUUMsT0FBTyxFQUFFQyxLQUFLLEVBQUU7UUFDcEIsT0FBT0Q7SUFDWDtJQUNBRSxRQUFRQyxRQUFRLEVBQUU7UUFDZCxPQUFPVjtJQUNYO0lBQ0FXLGVBQWVKLE9BQU8sRUFBRUssWUFBWSxFQUFFO1FBQ2xDLE9BQU9MO0lBQ1g7SUFDQU0sb0JBQW9CO1FBQ2hCLE9BQU9iO0lBQ1g7SUFDQWMsd0JBQXdCQyxlQUFlLEVBQUU7UUFDckMsT0FBTztJQUNYO0FBQ0o7QUFDQSxNQUFNQztJQUNGQyxTQUFTO1FBQ0wsT0FBTyxDQUFDO0lBQ1o7SUFDQUMsS0FBS1IsUUFBUSxFQUFFWixFQUFFLEVBQUU7UUFDZixPQUFPQTtJQUNYO0FBQ0o7QUFDQSxNQUFNcUIsaUJBQWlCQyxPQUFPQyxHQUFHLENBQUM7QUFDbEMsTUFBTUMsbUJBQW1CRixPQUFPQyxHQUFHLENBQUM7QUFDcEMsTUFBTUUsNENBQTRDSCxPQUFPQyxHQUFHLENBQUM7QUFDN0QsTUFBTUcsZ0JBQWdCLElBQUl2QjtBQUMxQixNQUFNd0Isa0JBQWtCLElBQUlUO0FBQzVCLE1BQU1VO0lBQ0ZDLG1CQUFtQjtRQUNmLDhEQUE4RDtRQUM5RCxPQUFPQyxVQUFVLENBQUNULGVBQWUsSUFBSUs7SUFDekM7SUFDQUsscUJBQXFCO1FBQ2pCLDhEQUE4RDtRQUM5RCxPQUFPRCxVQUFVLENBQUNOLGlCQUFpQixJQUFJRztJQUMzQztJQUNBSywwQkFBMEJDLElBQUksRUFBRTtRQUM1Qiw4REFBOEQ7UUFDOUQsSUFBSUgsVUFBVSxDQUFDVCxlQUFlLEtBQUtuQixXQUFXO1lBQzFDLDhEQUE4RDtZQUM5RDRCLFVBQVUsQ0FBQ1QsZUFBZSxHQUFHWSxLQUFLQyxLQUFLO1FBQzNDO1FBQ0EsOERBQThEO1FBQzlELElBQUlKLFVBQVUsQ0FBQ04saUJBQWlCLEtBQUt0QixXQUFXO1lBQzVDLDhEQUE4RDtZQUM5RDRCLFVBQVUsQ0FBQ04saUJBQWlCLEdBQUdTLEtBQUt4QixPQUFPO1FBQy9DO0lBQ0o7SUFDQTBCLCtCQUErQkMsVUFBVSxFQUFFO1FBQ3ZDLDhEQUE4RDtRQUM5RE4sVUFBVSxDQUFDTCwwQ0FBMEMsR0FBR1c7SUFDNUQ7SUFDQUMsaUNBQWlDO1FBQzdCLE9BQVFQLFVBQVUsQ0FBQ0wsMENBQTBDLElBQ3pEdkI7SUFDUjtBQUNKO0FBQ08sTUFBTW9DLHdCQUF3QixJQUFJVixlQUFlO0FBQ3hEOzs7Q0FHQyxHQUNNLFNBQVNXO0lBQ1osT0FBT0Qsc0JBQXNCVCxnQkFBZ0I7QUFDakQ7QUFDQTs7O0NBR0MsR0FDTSxTQUFTVztJQUNaLE9BQU9GLHNCQUFzQlAsa0JBQWtCO0FBQ25EO0FBQ0E7OztDQUdDLEdBQ00sU0FBU1UsaUJBQWlCUixJQUFJO0lBQ2pDSyxzQkFBc0JOLHlCQUF5QixDQUFDQztBQUNwRDtBQUNBOzs7Q0FHQyxHQUNNLFNBQVNFLCtCQUErQkMsVUFBVTtJQUNyREUsc0JBQXNCSCw4QkFBOEIsQ0FBQ0M7QUFDekQ7QUFDQTs7O0NBR0MsR0FDTSxTQUFTQztJQUNaLE9BQU9DLHNCQUFzQkQsOEJBQThCO0FBQy9EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9kaXN0L3NpbmdsZXRvbnMvb3RlbC5qcz8yM2QzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNob3VsZCBub3QgaW1wb3J0IGFueSBPVEVMIHBhY2thZ2VzIHRvIGF2b2lkIHB1bGxpbmcgaW4gb3B0aW9uYWwgZGVwcy5cbmltcG9ydCB7IGdldE90ZWxFbmFibGVkIH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xuY2xhc3MgTW9ja1RyYWNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhc1dhcm5lZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXJ0QWN0aXZlU3BhbihfbmFtZSwgLi4uYXJncykge1xuICAgICAgICBpZiAoIXRoaXMuaGFzV2FybmVkICYmIGdldE90ZWxFbmFibGVkKCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIllvdSBoYXZlIGVuYWJsZWQgT1RFTCBleHBvcnQgdmlhIHRoZSBgT1RFTF9FTkFCTEVEYCBvciBgTEFOR1NNSVRIX09URUxfRU5BQkxFRGAgZW52aXJvbm1lbnQgdmFyaWFibGUsIGJ1dCBoYXZlIG5vdCBpbml0aWFsaXplZCB0aGUgcmVxdWlyZWQgT1RFTCBpbnN0YW5jZXMuIFwiICtcbiAgICAgICAgICAgICAgICAnUGxlYXNlIGFkZDpcXG5gYGBcXG5pbXBvcnQgeyBpbml0aWFsaXplT1RFTCB9IGZyb20gXCJsYW5nc21pdGgvZXhwZXJpbWVudGFsL290ZWwvc2V0dXBcIjtcXG5pbml0aWFsaXplT1RFTCgpO1xcbmBgYFxcbmF0IHRoZSBiZWdpbm5pbmcgb2YgeW91ciBjb2RlLicpO1xuICAgICAgICAgICAgdGhpcy5oYXNXYXJuZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgb3ZlcmxvYWRzOlxuICAgICAgICAvLyBzdGFydEFjdGl2ZVNwYW4obmFtZSwgZm4pXG4gICAgICAgIC8vIHN0YXJ0QWN0aXZlU3BhbihuYW1lLCBvcHRpb25zLCBmbilcbiAgICAgICAgLy8gc3RhcnRBY3RpdmVTcGFuKG5hbWUsIG9wdGlvbnMsIGNvbnRleHQsIGZuKVxuICAgICAgICBsZXQgZm47XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJnc1swXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBmbiA9IGFyZ3NbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIGFyZ3NbMV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgZm4gPSBhcmdzWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAzICYmIHR5cGVvZiBhcmdzWzJdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGZuID0gYXJnc1syXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuY2xhc3MgTW9ja09URUxUcmFjZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vY2tUcmFjZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBNb2NrVHJhY2VyKClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFRyYWNlcihfbmFtZSwgX3ZlcnNpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9ja1RyYWNlcjtcbiAgICB9XG4gICAgZ2V0QWN0aXZlU3BhbigpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgc2V0U3Bhbihjb250ZXh0LCBfc3Bhbikge1xuICAgICAgICByZXR1cm4gY29udGV4dDtcbiAgICB9XG4gICAgZ2V0U3BhbihfY29udGV4dCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBzZXRTcGFuQ29udGV4dChjb250ZXh0LCBfc3BhbkNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgfVxuICAgIGdldFRyYWNlclByb3ZpZGVyKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBzZXRHbG9iYWxUcmFjZXJQcm92aWRlcihfdHJhY2VyUHJvdmlkZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmNsYXNzIE1vY2tPVEVMQ29udGV4dCB7XG4gICAgYWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHdpdGgoX2NvbnRleHQsIGZuKSB7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgIH1cbn1cbmNvbnN0IE9URUxfVFJBQ0VfS0VZID0gU3ltYm9sLmZvcihcImxzOm90ZWxfdHJhY2VcIik7XG5jb25zdCBPVEVMX0NPTlRFWFRfS0VZID0gU3ltYm9sLmZvcihcImxzOm90ZWxfY29udGV4dFwiKTtcbmNvbnN0IE9URUxfR0VUX0RFRkFVTFRfT1RMUF9UUkFDRVJfUFJPVklERVJfS0VZID0gU3ltYm9sLmZvcihcImxzOm90ZWxfZ2V0X2RlZmF1bHRfb3RscF90cmFjZXJfcHJvdmlkZXJcIik7XG5jb25zdCBtb2NrT1RFTFRyYWNlID0gbmV3IE1vY2tPVEVMVHJhY2UoKTtcbmNvbnN0IG1vY2tPVEVMQ29udGV4dCA9IG5ldyBNb2NrT1RFTENvbnRleHQoKTtcbmNsYXNzIE9URUxQcm92aWRlciB7XG4gICAgZ2V0VHJhY2VJbnN0YW5jZSgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXNbT1RFTF9UUkFDRV9LRVldID8/IG1vY2tPVEVMVHJhY2U7XG4gICAgfVxuICAgIGdldENvbnRleHRJbnN0YW5jZSgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXNbT1RFTF9DT05URVhUX0tFWV0gPz8gbW9ja09URUxDb250ZXh0O1xuICAgIH1cbiAgICBpbml0aWFsaXplR2xvYmFsSW5zdGFuY2VzKG90ZWwpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgaWYgKGdsb2JhbFRoaXNbT1RFTF9UUkFDRV9LRVldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBnbG9iYWxUaGlzW09URUxfVFJBQ0VfS0VZXSA9IG90ZWwudHJhY2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgaWYgKGdsb2JhbFRoaXNbT1RFTF9DT05URVhUX0tFWV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGdsb2JhbFRoaXNbT1RFTF9DT05URVhUX0tFWV0gPSBvdGVsLmNvbnRleHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0RGVmYXVsdE9UTFBUcmFjZXJDb21wb25lbnRzKGNvbXBvbmVudHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgZ2xvYmFsVGhpc1tPVEVMX0dFVF9ERUZBVUxUX09UTFBfVFJBQ0VSX1BST1ZJREVSX0tFWV0gPSBjb21wb25lbnRzO1xuICAgIH1cbiAgICBnZXREZWZhdWx0T1RMUFRyYWNlckNvbXBvbmVudHMoKSB7XG4gICAgICAgIHJldHVybiAoZ2xvYmFsVGhpc1tPVEVMX0dFVF9ERUZBVUxUX09UTFBfVFJBQ0VSX1BST1ZJREVSX0tFWV0gPz9cbiAgICAgICAgICAgIHVuZGVmaW5lZCk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IE9URUxQcm92aWRlclNpbmdsZXRvbiA9IG5ldyBPVEVMUHJvdmlkZXIoKTtcbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IE9URUwgdHJhY2UgaW5zdGFuY2UuXG4gKiBSZXR1cm5zIGEgbW9jayBpbXBsZW1lbnRhdGlvbiBpZiBPVEVMIGlzIG5vdCBhdmFpbGFibGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPVEVMVHJhY2UoKSB7XG4gICAgcmV0dXJuIE9URUxQcm92aWRlclNpbmdsZXRvbi5nZXRUcmFjZUluc3RhbmNlKCk7XG59XG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBPVEVMIGNvbnRleHQgaW5zdGFuY2UuXG4gKiBSZXR1cm5zIGEgbW9jayBpbXBsZW1lbnRhdGlvbiBpZiBPVEVMIGlzIG5vdCBhdmFpbGFibGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPVEVMQ29udGV4dCgpIHtcbiAgICByZXR1cm4gT1RFTFByb3ZpZGVyU2luZ2xldG9uLmdldENvbnRleHRJbnN0YW5jZSgpO1xufVxuLyoqXG4gKiBJbml0aWFsaXplIHRoZSBnbG9iYWwgT1RFTCBpbnN0YW5jZXMuXG4gKiBTaG91bGQgYmUgY2FsbGVkIG9uY2Ugd2hlbiBPVEVMIHBhY2thZ2VzIGFyZSBhdmFpbGFibGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRPVEVMSW5zdGFuY2VzKG90ZWwpIHtcbiAgICBPVEVMUHJvdmlkZXJTaW5nbGV0b24uaW5pdGlhbGl6ZUdsb2JhbEluc3RhbmNlcyhvdGVsKTtcbn1cbi8qKlxuICogU2V0IGEgZ2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgZGVmYXVsdCBPVExQIHRyYWNlciBwcm92aWRlci5cbiAqIFRoaXMgYWxsb3dzIGxhenkgaW5pdGlhbGl6YXRpb24gb2YgdGhlIHRyYWNlciBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRPVExQVHJhY2VyQ29tcG9uZW50cyhjb21wb25lbnRzKSB7XG4gICAgT1RFTFByb3ZpZGVyU2luZ2xldG9uLnNldERlZmF1bHRPVExQVHJhY2VyQ29tcG9uZW50cyhjb21wb25lbnRzKTtcbn1cbi8qKlxuICogR2V0IHRoZSBkZWZhdWx0IE9UTFAgdHJhY2VyIHByb3ZpZGVyIGluc3RhbmNlLlxuICogUmV0dXJucyB1bmRlZmluZWQgaWYgbm90IHNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRPVExQVHJhY2VyQ29tcG9uZW50cygpIHtcbiAgICByZXR1cm4gT1RFTFByb3ZpZGVyU2luZ2xldG9uLmdldERlZmF1bHRPVExQVHJhY2VyQ29tcG9uZW50cygpO1xufVxuIl0sIm5hbWVzIjpbImdldE90ZWxFbmFibGVkIiwiTW9ja1RyYWNlciIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInN0YXJ0QWN0aXZlU3BhbiIsIl9uYW1lIiwiYXJncyIsImhhc1dhcm5lZCIsImNvbnNvbGUiLCJ3YXJuIiwiZm4iLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJNb2NrT1RFTFRyYWNlIiwiZ2V0VHJhY2VyIiwiX3ZlcnNpb24iLCJtb2NrVHJhY2VyIiwiZ2V0QWN0aXZlU3BhbiIsInNldFNwYW4iLCJjb250ZXh0IiwiX3NwYW4iLCJnZXRTcGFuIiwiX2NvbnRleHQiLCJzZXRTcGFuQ29udGV4dCIsIl9zcGFuQ29udGV4dCIsImdldFRyYWNlclByb3ZpZGVyIiwic2V0R2xvYmFsVHJhY2VyUHJvdmlkZXIiLCJfdHJhY2VyUHJvdmlkZXIiLCJNb2NrT1RFTENvbnRleHQiLCJhY3RpdmUiLCJ3aXRoIiwiT1RFTF9UUkFDRV9LRVkiLCJTeW1ib2wiLCJmb3IiLCJPVEVMX0NPTlRFWFRfS0VZIiwiT1RFTF9HRVRfREVGQVVMVF9PVExQX1RSQUNFUl9QUk9WSURFUl9LRVkiLCJtb2NrT1RFTFRyYWNlIiwibW9ja09URUxDb250ZXh0IiwiT1RFTFByb3ZpZGVyIiwiZ2V0VHJhY2VJbnN0YW5jZSIsImdsb2JhbFRoaXMiLCJnZXRDb250ZXh0SW5zdGFuY2UiLCJpbml0aWFsaXplR2xvYmFsSW5zdGFuY2VzIiwib3RlbCIsInRyYWNlIiwic2V0RGVmYXVsdE9UTFBUcmFjZXJDb21wb25lbnRzIiwiY29tcG9uZW50cyIsImdldERlZmF1bHRPVExQVHJhY2VyQ29tcG9uZW50cyIsIk9URUxQcm92aWRlclNpbmdsZXRvbiIsImdldE9URUxUcmFjZSIsImdldE9URUxDb250ZXh0Iiwic2V0T1RFTEluc3RhbmNlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/otel.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/traceable.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/traceable.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* binding */ AsyncLocalStorageProviderSingleton),\n/* harmony export */   ROOT: () => (/* binding */ ROOT),\n/* harmony export */   getCurrentRunTree: () => (/* binding */ getCurrentRunTree),\n/* harmony export */   isTraceableFunction: () => (/* binding */ isTraceableFunction),\n/* harmony export */   withRunTree: () => (/* binding */ withRunTree)\n/* harmony export */ });\nclass MockAsyncLocalStorage {\n    getStore() {\n        return undefined;\n    }\n    run(_, callback) {\n        return callback();\n    }\n}\nconst TRACING_ALS_KEY = Symbol.for(\"ls:tracing_async_local_storage\");\nconst mockAsyncLocalStorage = new MockAsyncLocalStorage();\nclass AsyncLocalStorageProvider {\n    getInstance() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return globalThis[TRACING_ALS_KEY] ?? mockAsyncLocalStorage;\n    }\n    initializeGlobalInstance(instance) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (globalThis[TRACING_ALS_KEY] === undefined) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            globalThis[TRACING_ALS_KEY] = instance;\n        }\n    }\n}\nconst AsyncLocalStorageProviderSingleton = new AsyncLocalStorageProvider();\nfunction getCurrentRunTree(permitAbsentRunTree = false) {\n    const runTree = AsyncLocalStorageProviderSingleton.getInstance().getStore();\n    if (!permitAbsentRunTree && runTree === undefined) {\n        throw new Error(\"Could not get the current run tree.\\n\\nPlease make sure you are calling this method within a traceable function and that tracing is enabled.\");\n    }\n    return runTree;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction withRunTree(runTree, fn) {\n    const storage = AsyncLocalStorageProviderSingleton.getInstance();\n    return new Promise((resolve, reject)=>{\n        storage.run(runTree, ()=>void Promise.resolve(fn()).then(resolve).catch(reject));\n    });\n}\nconst ROOT = Symbol.for(\"langsmith:traceable:root\");\nfunction isTraceableFunction(x) {\n    return typeof x === \"function\" && \"langsmith:traceable\" in x;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC9zaW5nbGV0b25zL3RyYWNlYWJsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLE1BQU1BO0lBQ0ZDLFdBQVc7UUFDUCxPQUFPQztJQUNYO0lBQ0FDLElBQUlDLENBQUMsRUFBRUMsUUFBUSxFQUFFO1FBQ2IsT0FBT0E7SUFDWDtBQUNKO0FBQ0EsTUFBTUMsa0JBQWtCQyxPQUFPQyxHQUFHLENBQUM7QUFDbkMsTUFBTUMsd0JBQXdCLElBQUlUO0FBQ2xDLE1BQU1VO0lBQ0ZDLGNBQWM7UUFDViw4REFBOEQ7UUFDOUQsT0FBT0MsVUFBVSxDQUFDTixnQkFBZ0IsSUFBSUc7SUFDMUM7SUFDQUkseUJBQXlCQyxRQUFRLEVBQUU7UUFDL0IsOERBQThEO1FBQzlELElBQUlGLFVBQVUsQ0FBQ04sZ0JBQWdCLEtBQUtKLFdBQVc7WUFDM0MsOERBQThEO1lBQzlEVSxVQUFVLENBQUNOLGdCQUFnQixHQUFHUTtRQUNsQztJQUNKO0FBQ0o7QUFDTyxNQUFNQyxxQ0FBcUMsSUFBSUwsNEJBQTRCO0FBQzNFLFNBQVNNLGtCQUFrQkMsc0JBQXNCLEtBQUs7SUFDekQsTUFBTUMsVUFBVUgsbUNBQW1DSixXQUFXLEdBQUdWLFFBQVE7SUFDekUsSUFBSSxDQUFDZ0IsdUJBQXVCQyxZQUFZaEIsV0FBVztRQUMvQyxNQUFNLElBQUlpQixNQUFNO0lBQ3BCO0lBQ0EsT0FBT0Q7QUFDWDtBQUNBLDhEQUE4RDtBQUN2RCxTQUFTRSxZQUFZRixPQUFPLEVBQUVHLEVBQUU7SUFDbkMsTUFBTUMsVUFBVVAsbUNBQW1DSixXQUFXO0lBQzlELE9BQU8sSUFBSVksUUFBUSxDQUFDQyxTQUFTQztRQUN6QkgsUUFBUW5CLEdBQUcsQ0FBQ2UsU0FBUyxJQUFNLEtBQUtLLFFBQVFDLE9BQU8sQ0FBQ0gsTUFBTUssSUFBSSxDQUFDRixTQUFTRyxLQUFLLENBQUNGO0lBQzlFO0FBQ0o7QUFDTyxNQUFNRyxPQUFPckIsT0FBT0MsR0FBRyxDQUFDLDRCQUE0QjtBQUNwRCxTQUFTcUIsb0JBQW9CQyxDQUFDO0lBR2pDLE9BQU8sT0FBT0EsTUFBTSxjQUFjLHlCQUF5QkE7QUFDL0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9ub2RlX21vZHVsZXMvbGFuZ3NtaXRoL2Rpc3Qvc2luZ2xldG9ucy90cmFjZWFibGUuanM/MDNkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBNb2NrQXN5bmNMb2NhbFN0b3JhZ2Uge1xuICAgIGdldFN0b3JlKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBydW4oXywgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfVxufVxuY29uc3QgVFJBQ0lOR19BTFNfS0VZID0gU3ltYm9sLmZvcihcImxzOnRyYWNpbmdfYXN5bmNfbG9jYWxfc3RvcmFnZVwiKTtcbmNvbnN0IG1vY2tBc3luY0xvY2FsU3RvcmFnZSA9IG5ldyBNb2NrQXN5bmNMb2NhbFN0b3JhZ2UoKTtcbmNsYXNzIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIge1xuICAgIGdldEluc3RhbmNlKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpc1tUUkFDSU5HX0FMU19LRVldID8/IG1vY2tBc3luY0xvY2FsU3RvcmFnZTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZUdsb2JhbEluc3RhbmNlKGluc3RhbmNlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGlmIChnbG9iYWxUaGlzW1RSQUNJTkdfQUxTX0tFWV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGdsb2JhbFRoaXNbVFJBQ0lOR19BTFNfS0VZXSA9IGluc3RhbmNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gPSBuZXcgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlcigpO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRSdW5UcmVlKHBlcm1pdEFic2VudFJ1blRyZWUgPSBmYWxzZSkge1xuICAgIGNvbnN0IHJ1blRyZWUgPSBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldEluc3RhbmNlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoIXBlcm1pdEFic2VudFJ1blRyZWUgJiYgcnVuVHJlZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBnZXQgdGhlIGN1cnJlbnQgcnVuIHRyZWUuXFxuXFxuUGxlYXNlIG1ha2Ugc3VyZSB5b3UgYXJlIGNhbGxpbmcgdGhpcyBtZXRob2Qgd2l0aGluIGEgdHJhY2VhYmxlIGZ1bmN0aW9uIGFuZCB0aGF0IHRyYWNpbmcgaXMgZW5hYmxlZC5cIik7XG4gICAgfVxuICAgIHJldHVybiBydW5UcmVlO1xufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiB3aXRoUnVuVHJlZShydW5UcmVlLCBmbikge1xuICAgIGNvbnN0IHN0b3JhZ2UgPSBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldEluc3RhbmNlKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgc3RvcmFnZS5ydW4ocnVuVHJlZSwgKCkgPT4gdm9pZCBQcm9taXNlLnJlc29sdmUoZm4oKSkudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBST09UID0gU3ltYm9sLmZvcihcImxhbmdzbWl0aDp0cmFjZWFibGU6cm9vdFwiKTtcbmV4cG9ydCBmdW5jdGlvbiBpc1RyYWNlYWJsZUZ1bmN0aW9uKHhcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4pIHtcbiAgICByZXR1cm4gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIiAmJiBcImxhbmdzbWl0aDp0cmFjZWFibGVcIiBpbiB4O1xufVxuIl0sIm5hbWVzIjpbIk1vY2tBc3luY0xvY2FsU3RvcmFnZSIsImdldFN0b3JlIiwidW5kZWZpbmVkIiwicnVuIiwiXyIsImNhbGxiYWNrIiwiVFJBQ0lOR19BTFNfS0VZIiwiU3ltYm9sIiwiZm9yIiwibW9ja0FzeW5jTG9jYWxTdG9yYWdlIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlciIsImdldEluc3RhbmNlIiwiZ2xvYmFsVGhpcyIsImluaXRpYWxpemVHbG9iYWxJbnN0YW5jZSIsImluc3RhbmNlIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiIsImdldEN1cnJlbnRSdW5UcmVlIiwicGVybWl0QWJzZW50UnVuVHJlZSIsInJ1blRyZWUiLCJFcnJvciIsIndpdGhSdW5UcmVlIiwiZm4iLCJzdG9yYWdlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ0aGVuIiwiY2F0Y2giLCJST09UIiwiaXNUcmFjZWFibGVGdW5jdGlvbiIsIngiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/traceable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/_uuid.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/_uuid.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertUuid: () => (/* binding */ assertUuid),\n/* harmony export */   getUuidVersion: () => (/* binding */ getUuidVersion),\n/* harmony export */   uuid7FromTime: () => (/* binding */ uuid7FromTime),\n/* harmony export */   warnIfNotUuidV7: () => (/* binding */ warnIfNotUuidV7)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v7.js\");\n/* harmony import */ var _warn_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./warn.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/warn.js\");\n// Relaxed UUID validation regex (allows any valid UUID format including nil UUIDs)\nconst UUID_REGEX = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n\n\nlet UUID7_WARNING_EMITTED = false;\nfunction assertUuid(str, which) {\n    // Use relaxed regex validation instead of strict uuid.validate()\n    // This allows edge cases like nil UUIDs or test UUIDs that might not pass strict validation\n    if (!UUID_REGEX.test(str)) {\n        const msg = which !== undefined ? `Invalid UUID for ${which}: ${str}` : `Invalid UUID: ${str}`;\n        throw new Error(msg);\n    }\n    return str;\n}\n/**\n * Generate a UUID v7 from a timestamp.\n *\n * @param timestamp - The timestamp in milliseconds\n * @returns A UUID v7 string\n */ function uuid7FromTime(timestamp) {\n    const msecs = typeof timestamp === \"string\" ? Date.parse(timestamp) : timestamp;\n    // Work around uuid@10 behavior where providing only { msecs }\n    // may not set the internal timestamp used for stringification.\n    // Providing a seq ensures the implementation updates its internal state\n    // and encodes the provided milliseconds into the UUID bytes.\n    return (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n        msecs,\n        seq: 0\n    });\n}\n/**\n * Get the version of a UUID string.\n * @param uuidStr - The UUID string to check\n * @returns The version number (1-7) or null if invalid\n */ function getUuidVersion(uuidStr) {\n    if (!UUID_REGEX.test(uuidStr)) {\n        return null;\n    }\n    // Version is in bits 48-51\n    // Format: xxxxxxxx-xxxx-Vxxx-xxxx-xxxxxxxxxxxx\n    const versionChar = uuidStr[14];\n    return parseInt(versionChar, 16);\n}\n/**\n * Warn if a UUID is not version 7.\n *\n * @param uuidStr - The UUID string to check\n * @param idType - The type of ID (e.g., \"run_id\", \"trace_id\") for the warning message\n */ function warnIfNotUuidV7(uuidStr, _idType) {\n    const version = getUuidVersion(uuidStr);\n    if (version !== null && version !== 7 && !UUID7_WARNING_EMITTED) {\n        UUID7_WARNING_EMITTED = true;\n        (0,_warn_js__WEBPACK_IMPORTED_MODULE_0__.warnOnce)(`LangSmith now uses UUID v7 for run and trace identifiers. ` + `This warning appears when passing custom IDs. ` + `Please use: import { uuidv7 } from 'langsmith'; const id = uuidv7(); ` + `Future versions will require UUID v7.`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9fdXVpZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxtRkFBbUY7QUFDbkYsTUFBTUEsYUFBYTtBQUNpQjtBQUNDO0FBQ3JDLElBQUlJLHdCQUF3QjtBQUNyQixTQUFTQyxXQUFXQyxHQUFHLEVBQUVDLEtBQUs7SUFDakMsaUVBQWlFO0lBQ2pFLDRGQUE0RjtJQUM1RixJQUFJLENBQUNQLFdBQVdRLElBQUksQ0FBQ0YsTUFBTTtRQUN2QixNQUFNRyxNQUFNRixVQUFVRyxZQUNoQixDQUFDLGlCQUFpQixFQUFFSCxNQUFNLEVBQUUsRUFBRUQsSUFBSSxDQUFDLEdBQ25DLENBQUMsY0FBYyxFQUFFQSxJQUFJLENBQUM7UUFDNUIsTUFBTSxJQUFJSyxNQUFNRjtJQUNwQjtJQUNBLE9BQU9IO0FBQ1g7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNNLGNBQWNDLFNBQVM7SUFDbkMsTUFBTUMsUUFBUSxPQUFPRCxjQUFjLFdBQVdFLEtBQUtDLEtBQUssQ0FBQ0gsYUFBYUE7SUFDdEUsOERBQThEO0lBQzlELCtEQUErRDtJQUMvRCx3RUFBd0U7SUFDeEUsNkRBQTZEO0lBQzdELE9BQU9YLGdEQUFNQSxDQUFDO1FBQUVZO1FBQU9HLEtBQUs7SUFBRTtBQUNsQztBQUNBOzs7O0NBSUMsR0FDTSxTQUFTQyxlQUFlQyxPQUFPO0lBQ2xDLElBQUksQ0FBQ25CLFdBQVdRLElBQUksQ0FBQ1csVUFBVTtRQUMzQixPQUFPO0lBQ1g7SUFDQSwyQkFBMkI7SUFDM0IsK0NBQStDO0lBQy9DLE1BQU1DLGNBQWNELE9BQU8sQ0FBQyxHQUFHO0lBQy9CLE9BQU9FLFNBQVNELGFBQWE7QUFDakM7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNFLGdCQUFnQkgsT0FBTyxFQUFFSSxPQUFPO0lBQzVDLE1BQU1DLFVBQVVOLGVBQWVDO0lBQy9CLElBQUlLLFlBQVksUUFBUUEsWUFBWSxLQUFLLENBQUNwQix1QkFBdUI7UUFDN0RBLHdCQUF3QjtRQUN4QkQsa0RBQVFBLENBQUMsQ0FBQywwREFBMEQsQ0FBQyxHQUNqRSxDQUFDLDhDQUE4QyxDQUFDLEdBQ2hELENBQUMscUVBQXFFLENBQUMsR0FDdkUsQ0FBQyxxQ0FBcUMsQ0FBQztJQUMvQztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9kaXN0L3V0aWxzL191dWlkLmpzP2Y2MGQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUmVsYXhlZCBVVUlEIHZhbGlkYXRpb24gcmVnZXggKGFsbG93cyBhbnkgdmFsaWQgVVVJRCBmb3JtYXQgaW5jbHVkaW5nIG5pbCBVVUlEcylcbmNvbnN0IFVVSURfUkVHRVggPSAvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LVswLTlhLWZdezR9LVswLTlhLWZdezR9LVswLTlhLWZdezEyfSQvaTtcbmltcG9ydCB7IHY3IGFzIHV1aWR2NyB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyB3YXJuT25jZSB9IGZyb20gXCIuL3dhcm4uanNcIjtcbmxldCBVVUlEN19XQVJOSU5HX0VNSVRURUQgPSBmYWxzZTtcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRVdWlkKHN0ciwgd2hpY2gpIHtcbiAgICAvLyBVc2UgcmVsYXhlZCByZWdleCB2YWxpZGF0aW9uIGluc3RlYWQgb2Ygc3RyaWN0IHV1aWQudmFsaWRhdGUoKVxuICAgIC8vIFRoaXMgYWxsb3dzIGVkZ2UgY2FzZXMgbGlrZSBuaWwgVVVJRHMgb3IgdGVzdCBVVUlEcyB0aGF0IG1pZ2h0IG5vdCBwYXNzIHN0cmljdCB2YWxpZGF0aW9uXG4gICAgaWYgKCFVVUlEX1JFR0VYLnRlc3Qoc3RyKSkge1xuICAgICAgICBjb25zdCBtc2cgPSB3aGljaCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGBJbnZhbGlkIFVVSUQgZm9yICR7d2hpY2h9OiAke3N0cn1gXG4gICAgICAgICAgICA6IGBJbnZhbGlkIFVVSUQ6ICR7c3RyfWA7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIFVVSUQgdjcgZnJvbSBhIHRpbWVzdGFtcC5cbiAqXG4gKiBAcGFyYW0gdGltZXN0YW1wIC0gVGhlIHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHNcbiAqIEByZXR1cm5zIEEgVVVJRCB2NyBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHV1aWQ3RnJvbVRpbWUodGltZXN0YW1wKSB7XG4gICAgY29uc3QgbXNlY3MgPSB0eXBlb2YgdGltZXN0YW1wID09PSBcInN0cmluZ1wiID8gRGF0ZS5wYXJzZSh0aW1lc3RhbXApIDogdGltZXN0YW1wO1xuICAgIC8vIFdvcmsgYXJvdW5kIHV1aWRAMTAgYmVoYXZpb3Igd2hlcmUgcHJvdmlkaW5nIG9ubHkgeyBtc2VjcyB9XG4gICAgLy8gbWF5IG5vdCBzZXQgdGhlIGludGVybmFsIHRpbWVzdGFtcCB1c2VkIGZvciBzdHJpbmdpZmljYXRpb24uXG4gICAgLy8gUHJvdmlkaW5nIGEgc2VxIGVuc3VyZXMgdGhlIGltcGxlbWVudGF0aW9uIHVwZGF0ZXMgaXRzIGludGVybmFsIHN0YXRlXG4gICAgLy8gYW5kIGVuY29kZXMgdGhlIHByb3ZpZGVkIG1pbGxpc2Vjb25kcyBpbnRvIHRoZSBVVUlEIGJ5dGVzLlxuICAgIHJldHVybiB1dWlkdjcoeyBtc2Vjcywgc2VxOiAwIH0pO1xufVxuLyoqXG4gKiBHZXQgdGhlIHZlcnNpb24gb2YgYSBVVUlEIHN0cmluZy5cbiAqIEBwYXJhbSB1dWlkU3RyIC0gVGhlIFVVSUQgc3RyaW5nIHRvIGNoZWNrXG4gKiBAcmV0dXJucyBUaGUgdmVyc2lvbiBudW1iZXIgKDEtNykgb3IgbnVsbCBpZiBpbnZhbGlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVdWlkVmVyc2lvbih1dWlkU3RyKSB7XG4gICAgaWYgKCFVVUlEX1JFR0VYLnRlc3QodXVpZFN0cikpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIFZlcnNpb24gaXMgaW4gYml0cyA0OC01MVxuICAgIC8vIEZvcm1hdDogeHh4eHh4eHgteHh4eC1WeHh4LXh4eHgteHh4eHh4eHh4eHh4XG4gICAgY29uc3QgdmVyc2lvbkNoYXIgPSB1dWlkU3RyWzE0XTtcbiAgICByZXR1cm4gcGFyc2VJbnQodmVyc2lvbkNoYXIsIDE2KTtcbn1cbi8qKlxuICogV2FybiBpZiBhIFVVSUQgaXMgbm90IHZlcnNpb24gNy5cbiAqXG4gKiBAcGFyYW0gdXVpZFN0ciAtIFRoZSBVVUlEIHN0cmluZyB0byBjaGVja1xuICogQHBhcmFtIGlkVHlwZSAtIFRoZSB0eXBlIG9mIElEIChlLmcuLCBcInJ1bl9pZFwiLCBcInRyYWNlX2lkXCIpIGZvciB0aGUgd2FybmluZyBtZXNzYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YXJuSWZOb3RVdWlkVjcodXVpZFN0ciwgX2lkVHlwZSkge1xuICAgIGNvbnN0IHZlcnNpb24gPSBnZXRVdWlkVmVyc2lvbih1dWlkU3RyKTtcbiAgICBpZiAodmVyc2lvbiAhPT0gbnVsbCAmJiB2ZXJzaW9uICE9PSA3ICYmICFVVUlEN19XQVJOSU5HX0VNSVRURUQpIHtcbiAgICAgICAgVVVJRDdfV0FSTklOR19FTUlUVEVEID0gdHJ1ZTtcbiAgICAgICAgd2Fybk9uY2UoYExhbmdTbWl0aCBub3cgdXNlcyBVVUlEIHY3IGZvciBydW4gYW5kIHRyYWNlIGlkZW50aWZpZXJzLiBgICtcbiAgICAgICAgICAgIGBUaGlzIHdhcm5pbmcgYXBwZWFycyB3aGVuIHBhc3NpbmcgY3VzdG9tIElEcy4gYCArXG4gICAgICAgICAgICBgUGxlYXNlIHVzZTogaW1wb3J0IHsgdXVpZHY3IH0gZnJvbSAnbGFuZ3NtaXRoJzsgY29uc3QgaWQgPSB1dWlkdjcoKTsgYCArXG4gICAgICAgICAgICBgRnV0dXJlIHZlcnNpb25zIHdpbGwgcmVxdWlyZSBVVUlEIHY3LmApO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJVVUlEX1JFR0VYIiwidjciLCJ1dWlkdjciLCJ3YXJuT25jZSIsIlVVSUQ3X1dBUk5JTkdfRU1JVFRFRCIsImFzc2VydFV1aWQiLCJzdHIiLCJ3aGljaCIsInRlc3QiLCJtc2ciLCJ1bmRlZmluZWQiLCJFcnJvciIsInV1aWQ3RnJvbVRpbWUiLCJ0aW1lc3RhbXAiLCJtc2VjcyIsIkRhdGUiLCJwYXJzZSIsInNlcSIsImdldFV1aWRWZXJzaW9uIiwidXVpZFN0ciIsInZlcnNpb25DaGFyIiwicGFyc2VJbnQiLCJ3YXJuSWZOb3RVdWlkVjciLCJfaWRUeXBlIiwidmVyc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/_uuid.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/async_caller.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/async_caller.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var _utils_p_retry_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/p-retry/index.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\n\nconst STATUS_RETRYABLE = [\n    408,\n    425,\n    429,\n    500,\n    502,\n    503,\n    504\n];\n/**\n * A class that can be used to make async calls with concurrency and retry logic.\n *\n * This is useful for making calls to any kind of \"expensive\" external resource,\n * be it because it's rate-limited, subject to network issues, etc.\n *\n * Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n * to `Infinity`. This means that by default, all calls will be made in parallel.\n *\n * Retries are limited by the `maxRetries` parameter, which defaults to 6. This\n * means that by default, each call will be retried up to 6 times, with an\n * exponential backoff between each attempt.\n */ class AsyncCaller {\n    constructor(params){\n        Object.defineProperty(this, \"maxConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxRetries\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxQueueSizeBytes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onFailedResponseHook\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queueSizeBytes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        this.maxConcurrency = params.maxConcurrency ?? Infinity;\n        this.maxRetries = params.maxRetries ?? 6;\n        this.maxQueueSizeBytes = params.maxQueueSizeBytes;\n        if ( true) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.queue = new p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n                concurrency: this.maxConcurrency\n            });\n        } else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.queue = new p_queue__WEBPACK_IMPORTED_MODULE_1__({\n                concurrency: this.maxConcurrency\n            });\n        }\n        this.onFailedResponseHook = params?.onFailedResponseHook;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    call(callable, ...args) {\n        return this.callWithOptions({}, callable, ...args);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callWithOptions(options, callable, ...args) {\n        const sizeBytes = options.sizeBytes ?? 0;\n        // Check if adding this call would exceed the byte size limit\n        if (this.maxQueueSizeBytes !== undefined && sizeBytes > 0 && this.queueSizeBytes + sizeBytes > this.maxQueueSizeBytes) {\n            return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. ` + `Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${sizeBytes} bytes.`));\n        }\n        // Add to queue size tracking\n        if (sizeBytes > 0) {\n            this.queueSizeBytes += sizeBytes;\n        }\n        const onFailedResponseHook = this.onFailedResponseHook;\n        let promise = this.queue.add(()=>(0,_utils_p_retry_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(()=>callable(...args).catch((error)=>{\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (error instanceof Error) {\n                        throw error;\n                    } else {\n                        throw new Error(error);\n                    }\n                }), {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                async onFailedAttempt ({ error }) {\n                    if (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"TimeoutError\") || error.name === \"TimeoutError\" || error.message.startsWith(\"AbortError\")) {\n                        throw error;\n                    }\n                    if (error?.code === \"ECONNABORTED\") {\n                        throw error;\n                    }\n                    const response = error?.response;\n                    if (onFailedResponseHook) {\n                        const handled = await onFailedResponseHook(response);\n                        if (handled) {\n                            return;\n                        }\n                    }\n                    const status = response?.status ?? error?.status;\n                    if (status) {\n                        if (!STATUS_RETRYABLE.includes(+status)) {\n                            throw error;\n                        }\n                    }\n                },\n                retries: this.maxRetries,\n                randomize: true\n            }), {\n            throwOnTimeout: true\n        });\n        // Decrement queue size when the call completes (success or failure)\n        if (sizeBytes > 0) {\n            promise = promise.finally(()=>{\n                this.queueSizeBytes -= sizeBytes;\n            });\n        }\n        // Handle signal cancellation\n        if (options.signal) {\n            return Promise.race([\n                promise,\n                new Promise((_, reject)=>{\n                    options.signal?.addEventListener(\"abort\", ()=>{\n                        reject(new Error(\"AbortError\"));\n                    });\n                })\n            ]);\n        }\n        return promise;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9hc3luY19jYWxsZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStDO0FBQ2Y7QUFDaEMsTUFBTUUsbUJBQW1CO0lBQ3JCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRDs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxxQkFBcUI7WUFDN0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHdCQUF3QjtZQUNoREMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSxJQUFJLENBQUNDLGNBQWMsR0FBR1AsT0FBT08sY0FBYyxJQUFJQztRQUMvQyxJQUFJLENBQUNDLFVBQVUsR0FBR1QsT0FBT1MsVUFBVSxJQUFJ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O1FBQzdCLElBQUlELFFBQVF3QixNQUFNLEVBQUU7WUFDaEIsT0FBT3BCLFFBQVFxQixJQUFJLENBQUM7Z0JBQ2hCbEI7Z0JBQ0EsSUFBSUgsUUFBUSxDQUFDc0IsR0FBR3JCO29CQUNaTCxRQUFRd0IsTUFBTSxFQUFFRyxpQkFBaUIsU0FBUzt3QkFDdEN0QixPQUFPLElBQUlDLE1BQU07b0JBQ3JCO2dCQUNKO2FBQ0g7UUFDTDtRQUNBLE9BQU9DO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9hc3luY19jYWxsZXIuanM/MjIwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcFJldHJ5IGZyb20gXCIuLi91dGlscy9wLXJldHJ5L2luZGV4LmpzXCI7XG5pbXBvcnQgUFF1ZXVlTW9kIGZyb20gXCJwLXF1ZXVlXCI7XG5jb25zdCBTVEFUVVNfUkVUUllBQkxFID0gW1xuICAgIDQwOCwgLy8gUmVxdWVzdCBUaW1lb3V0XG4gICAgNDI1LCAvLyBUb28gRWFybHlcbiAgICA0MjksIC8vIFRvbyBNYW55IFJlcXVlc3RzXG4gICAgNTAwLCAvLyBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcbiAgICA1MDIsIC8vIEJhZCBHYXRld2F5XG4gICAgNTAzLCAvLyBTZXJ2aWNlIFVuYXZhaWxhYmxlXG4gICAgNTA0LCAvLyBHYXRld2F5IFRpbWVvdXRcbl07XG4vKipcbiAqIEEgY2xhc3MgdGhhdCBjYW4gYmUgdXNlZCB0byBtYWtlIGFzeW5jIGNhbGxzIHdpdGggY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBtYWtpbmcgY2FsbHMgdG8gYW55IGtpbmQgb2YgXCJleHBlbnNpdmVcIiBleHRlcm5hbCByZXNvdXJjZSxcbiAqIGJlIGl0IGJlY2F1c2UgaXQncyByYXRlLWxpbWl0ZWQsIHN1YmplY3QgdG8gbmV0d29yayBpc3N1ZXMsIGV0Yy5cbiAqXG4gKiBDb25jdXJyZW50IGNhbGxzIGFyZSBsaW1pdGVkIGJ5IHRoZSBgbWF4Q29uY3VycmVuY3lgIHBhcmFtZXRlciwgd2hpY2ggZGVmYXVsdHNcbiAqIHRvIGBJbmZpbml0eWAuIFRoaXMgbWVhbnMgdGhhdCBieSBkZWZhdWx0LCBhbGwgY2FsbHMgd2lsbCBiZSBtYWRlIGluIHBhcmFsbGVsLlxuICpcbiAqIFJldHJpZXMgYXJlIGxpbWl0ZWQgYnkgdGhlIGBtYXhSZXRyaWVzYCBwYXJhbWV0ZXIsIHdoaWNoIGRlZmF1bHRzIHRvIDYuIFRoaXNcbiAqIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgZWFjaCBjYWxsIHdpbGwgYmUgcmV0cmllZCB1cCB0byA2IHRpbWVzLCB3aXRoIGFuXG4gKiBleHBvbmVudGlhbCBiYWNrb2ZmIGJldHdlZW4gZWFjaCBhdHRlbXB0LlxuICovXG5leHBvcnQgY2xhc3MgQXN5bmNDYWxsZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhDb25jdXJyZW5jeVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhSZXRyaWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heFF1ZXVlU2l6ZUJ5dGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInF1ZXVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRmFpbGVkUmVzcG9uc2VIb29rXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInF1ZXVlU2l6ZUJ5dGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heENvbmN1cnJlbmN5ID0gcGFyYW1zLm1heENvbmN1cnJlbmN5ID8/IEluZmluaXR5O1xuICAgICAgICB0aGlzLm1heFJldHJpZXMgPSBwYXJhbXMubWF4UmV0cmllcyA/PyA2O1xuICAgICAgICB0aGlzLm1heFF1ZXVlU2l6ZUJ5dGVzID0gcGFyYW1zLm1heFF1ZXVlU2l6ZUJ5dGVzO1xuICAgICAgICBpZiAoXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBQUXVldWVNb2QuZGVmYXVsdCh7XG4gICAgICAgICAgICAgICAgY29uY3VycmVuY3k6IHRoaXMubWF4Q29uY3VycmVuY3ksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICB0aGlzLnF1ZXVlID0gbmV3IFBRdWV1ZU1vZCh7IGNvbmN1cnJlbmN5OiB0aGlzLm1heENvbmN1cnJlbmN5IH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25GYWlsZWRSZXNwb25zZUhvb2sgPSBwYXJhbXM/Lm9uRmFpbGVkUmVzcG9uc2VIb29rO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNhbGwoY2FsbGFibGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbFdpdGhPcHRpb25zKHt9LCBjYWxsYWJsZSwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY2FsbFdpdGhPcHRpb25zKG9wdGlvbnMsIGNhbGxhYmxlLCAuLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IHNpemVCeXRlcyA9IG9wdGlvbnMuc2l6ZUJ5dGVzID8/IDA7XG4gICAgICAgIC8vIENoZWNrIGlmIGFkZGluZyB0aGlzIGNhbGwgd291bGQgZXhjZWVkIHRoZSBieXRlIHNpemUgbGltaXRcbiAgICAgICAgaWYgKHRoaXMubWF4UXVldWVTaXplQnl0ZXMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2l6ZUJ5dGVzID4gMCAmJlxuICAgICAgICAgICAgdGhpcy5xdWV1ZVNpemVCeXRlcyArIHNpemVCeXRlcyA+IHRoaXMubWF4UXVldWVTaXplQnl0ZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYFF1ZXVlIHNpemUgbGltaXQgKCR7dGhpcy5tYXhRdWV1ZVNpemVCeXRlc30gYnl0ZXMpIGV4Y2VlZGVkLiBgICtcbiAgICAgICAgICAgICAgICBgQ3VycmVudCBxdWV1ZSBzaXplOiAke3RoaXMucXVldWVTaXplQnl0ZXN9IGJ5dGVzLCBhdHRlbXB0ZWQgYWRkaXRpb246ICR7c2l6ZUJ5dGVzfSBieXRlcy5gKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIHRvIHF1ZXVlIHNpemUgdHJhY2tpbmdcbiAgICAgICAgaWYgKHNpemVCeXRlcyA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucXVldWVTaXplQnl0ZXMgKz0gc2l6ZUJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9uRmFpbGVkUmVzcG9uc2VIb29rID0gdGhpcy5vbkZhaWxlZFJlc3BvbnNlSG9vaztcbiAgICAgICAgbGV0IHByb21pc2UgPSB0aGlzLnF1ZXVlLmFkZCgoKSA9PiBwUmV0cnkoKCkgPT4gY2FsbGFibGUoLi4uYXJncykuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBhc3luYyBvbkZhaWxlZEF0dGVtcHQoeyBlcnJvciB9KSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkNhbmNlbFwiKSB8fFxuICAgICAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJUaW1lb3V0RXJyb3JcIikgfHxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IubmFtZSA9PT0gXCJUaW1lb3V0RXJyb3JcIiB8fFxuICAgICAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJBYm9ydEVycm9yXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3I/LmNvZGUgPT09IFwiRUNPTk5BQk9SVEVEXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gZXJyb3I/LnJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGlmIChvbkZhaWxlZFJlc3BvbnNlSG9vaykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVkID0gYXdhaXQgb25GYWlsZWRSZXNwb25zZUhvb2socmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHJlc3BvbnNlPy5zdGF0dXMgPz8gZXJyb3I/LnN0YXR1cztcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghU1RBVFVTX1JFVFJZQUJMRS5pbmNsdWRlcygrc3RhdHVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmV0cmllczogdGhpcy5tYXhSZXRyaWVzLFxuICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICB9KSwgeyB0aHJvd09uVGltZW91dDogdHJ1ZSB9KTtcbiAgICAgICAgLy8gRGVjcmVtZW50IHF1ZXVlIHNpemUgd2hlbiB0aGUgY2FsbCBjb21wbGV0ZXMgKHN1Y2Nlc3Mgb3IgZmFpbHVyZSlcbiAgICAgICAgaWYgKHNpemVCeXRlcyA+IDApIHtcbiAgICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucXVldWVTaXplQnl0ZXMgLT0gc2l6ZUJ5dGVzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSGFuZGxlIHNpZ25hbCBjYW5jZWxsYXRpb25cbiAgICAgICAgaWYgKG9wdGlvbnMuc2lnbmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgICAgICBwcm9taXNlLFxuICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zaWduYWw/LmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiQWJvcnRFcnJvclwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInBSZXRyeSIsIlBRdWV1ZU1vZCIsIlNUQVRVU19SRVRSWUFCTEUiLCJBc3luY0NhbGxlciIsImNvbnN0cnVjdG9yIiwicGFyYW1zIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm1heENvbmN1cnJlbmN5IiwiSW5maW5pdHkiLCJtYXhSZXRyaWVzIiwibWF4UXVldWVTaXplQnl0ZXMiLCJxdWV1ZSIsImRlZmF1bHQiLCJjb25jdXJyZW5jeSIsIm9uRmFpbGVkUmVzcG9uc2VIb29rIiwiY2FsbCIsImNhbGxhYmxlIiwiYXJncyIsImNhbGxXaXRoT3B0aW9ucyIsIm9wdGlvbnMiLCJzaXplQnl0ZXMiLCJ1bmRlZmluZWQiLCJxdWV1ZVNpemVCeXRlcyIsIlByb21pc2UiLCJyZWplY3QiLCJFcnJvciIsInByb21pc2UiLCJhZGQiLCJjYXRjaCIsImVycm9yIiwib25GYWlsZWRBdHRlbXB0IiwibWVzc2FnZSIsInN0YXJ0c1dpdGgiLCJuYW1lIiwiY29kZSIsInJlc3BvbnNlIiwiaGFuZGxlZCIsInN0YXR1cyIsImluY2x1ZGVzIiwicmV0cmllcyIsInJhbmRvbWl6ZSIsInRocm93T25UaW1lb3V0IiwiZmluYWxseSIsInNpZ25hbCIsInJhY2UiLCJfIiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/context_vars.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/context_vars.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getContextVar: () => (/* binding */ getContextVar),\n/* harmony export */   setContextVar: () => (/* binding */ setContextVar)\n/* harmony export */ });\n/* harmony import */ var _singletons_constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../singletons/constants.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/constants.js\");\n\n/**\n * Get a context variable from a run tree instance\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getContextVar(runTree, key) {\n    if (_singletons_constants_js__WEBPACK_IMPORTED_MODULE_0__._LC_CONTEXT_VARIABLES_KEY in runTree) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const contextVars = runTree[_singletons_constants_js__WEBPACK_IMPORTED_MODULE_0__._LC_CONTEXT_VARIABLES_KEY];\n        return contextVars[key];\n    }\n    return undefined;\n}\n/**\n * Set a context variable on a run tree instance\n */ function setContextVar(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrunTree, key, value) {\n    const contextVars = _singletons_constants_js__WEBPACK_IMPORTED_MODULE_0__._LC_CONTEXT_VARIABLES_KEY in runTree ? runTree[_singletons_constants_js__WEBPACK_IMPORTED_MODULE_0__._LC_CONTEXT_VARIABLES_KEY] : {};\n    contextVars[key] = value;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    runTree[_singletons_constants_js__WEBPACK_IMPORTED_MODULE_0__._LC_CONTEXT_VARIABLES_KEY] = contextVars;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9jb250ZXh0X3ZhcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVFO0FBQ3ZFOztDQUVDLEdBQ0QsOERBQThEO0FBQ3ZELFNBQVNDLGNBQWNDLE9BQU8sRUFBRUMsR0FBRztJQUN0QyxJQUFJSCwrRUFBeUJBLElBQUlFLFNBQVM7UUFDdEMsOERBQThEO1FBQzlELE1BQU1FLGNBQWNGLE9BQU8sQ0FBQ0YsK0VBQXlCQSxDQUFDO1FBQ3RELE9BQU9JLFdBQVcsQ0FBQ0QsSUFBSTtJQUMzQjtJQUNBLE9BQU9FO0FBQ1g7QUFDQTs7Q0FFQyxHQUNNLFNBQVNDLGNBQ2hCLDhEQUE4RDtBQUM5REosT0FBTyxFQUFFQyxHQUFHLEVBQUVJLEtBQUs7SUFDZixNQUFNSCxjQUFjSiwrRUFBeUJBLElBQUlFLFVBRXpDQSxPQUFPLENBQUNGLCtFQUF5QkEsQ0FBQyxHQUNwQyxDQUFDO0lBQ1BJLFdBQVcsQ0FBQ0QsSUFBSSxHQUFHSTtJQUNuQiw4REFBOEQ7SUFDOURMLE9BQU8sQ0FBQ0YsK0VBQXlCQSxDQUFDLEdBQUdJO0FBQ3pDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9kaXN0L3V0aWxzL2NvbnRleHRfdmFycy5qcz82ZjIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9MQ19DT05URVhUX1ZBUklBQkxFU19LRVkgfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9jb25zdGFudHMuanNcIjtcbi8qKlxuICogR2V0IGEgY29udGV4dCB2YXJpYWJsZSBmcm9tIGEgcnVuIHRyZWUgaW5zdGFuY2VcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZXh0VmFyKHJ1blRyZWUsIGtleSkge1xuICAgIGlmIChfTENfQ09OVEVYVF9WQVJJQUJMRVNfS0VZIGluIHJ1blRyZWUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgY29udGV4dFZhcnMgPSBydW5UcmVlW19MQ19DT05URVhUX1ZBUklBQkxFU19LRVldO1xuICAgICAgICByZXR1cm4gY29udGV4dFZhcnNba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogU2V0IGEgY29udGV4dCB2YXJpYWJsZSBvbiBhIHJ1biB0cmVlIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb250ZXh0VmFyKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnJ1blRyZWUsIGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBjb250ZXh0VmFycyA9IF9MQ19DT05URVhUX1ZBUklBQkxFU19LRVkgaW4gcnVuVHJlZVxuICAgICAgICA/IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBydW5UcmVlW19MQ19DT05URVhUX1ZBUklBQkxFU19LRVldXG4gICAgICAgIDoge307XG4gICAgY29udGV4dFZhcnNba2V5XSA9IHZhbHVlO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcnVuVHJlZVtfTENfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXSA9IGNvbnRleHRWYXJzO1xufVxuIl0sIm5hbWVzIjpbIl9MQ19DT05URVhUX1ZBUklBQkxFU19LRVkiLCJnZXRDb250ZXh0VmFyIiwicnVuVHJlZSIsImtleSIsImNvbnRleHRWYXJzIiwidW5kZWZpbmVkIiwic2V0Q29udGV4dFZhciIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/context_vars.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/env.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/env.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* binding */ getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable),\n/* harmony export */   getLangSmithEnvVarsMetadata: () => (/* binding */ getLangSmithEnvVarsMetadata),\n/* harmony export */   getLangSmithEnvironmentVariable: () => (/* binding */ getLangSmithEnvironmentVariable),\n/* harmony export */   getLangSmithEnvironmentVariables: () => (/* binding */ getLangSmithEnvironmentVariables),\n/* harmony export */   getOtelEnabled: () => (/* binding */ getOtelEnabled),\n/* harmony export */   getRuntimeEnvironment: () => (/* binding */ getRuntimeEnvironment),\n/* harmony export */   getShas: () => (/* binding */ getShas),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isDeno: () => (/* binding */ isDeno),\n/* harmony export */   isJsDom: () => (/* binding */ isJsDom),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isWebWorker: () => (/* binding */ isWebWorker),\n/* harmony export */   setEnvironmentVariable: () => (/* binding */ setEnvironmentVariable)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/index.js\");\n// Inlined from https://github.com/flexdinesh/browser-or-node\n\nlet globalEnv;\nconst isBrowser = ()=> false && 0;\nconst isWebWorker = ()=>typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = ()=> false || typeof navigator !== \"undefined\" && navigator.userAgent.includes(\"jsdom\");\n// Supabase Edge Function provides a `Deno` global object\n// without `version` property\nconst isDeno = ()=>typeof Deno !== \"undefined\";\n// Mark not-as-node if in Supabase Edge Function\nconst isNode = ()=>typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = ()=>{\n    if (globalEnv) {\n        return globalEnv;\n    }\n    // @ts-expect-error Bun types are not imported due to conflicts with Node types\n    if (typeof Bun !== \"undefined\") {\n        globalEnv = \"bun\";\n    } else if (isBrowser()) {\n        globalEnv = \"browser\";\n    } else if (isNode()) {\n        globalEnv = \"node\";\n    } else if (isWebWorker()) {\n        globalEnv = \"webworker\";\n    } else if (isJsDom()) {\n        globalEnv = \"jsdom\";\n    } else if (isDeno()) {\n        globalEnv = \"deno\";\n    } else {\n        globalEnv = \"other\";\n    }\n    return globalEnv;\n};\nlet runtimeEnvironment;\nfunction getRuntimeEnvironment() {\n    if (runtimeEnvironment === undefined) {\n        const env = getEnv();\n        const releaseEnv = getShas();\n        runtimeEnvironment = {\n            library: \"langsmith\",\n            runtime: env,\n            sdk: \"langsmith-js\",\n            sdk_version: _index_js__WEBPACK_IMPORTED_MODULE_0__.__version__,\n            ...releaseEnv\n        };\n    }\n    return runtimeEnvironment;\n}\n/**\n * Retrieves the LangSmith-specific metadata from the current runtime environment.\n *\n * @returns {Record<string, string>}\n *  - A record of LangSmith-specific metadata environment variables.\n */ function getLangSmithEnvVarsMetadata() {\n    const allEnvVars = getLangSmithEnvironmentVariables();\n    const envVars = {};\n    const excluded = [\n        \"LANGCHAIN_API_KEY\",\n        \"LANGCHAIN_ENDPOINT\",\n        \"LANGCHAIN_TRACING_V2\",\n        \"LANGCHAIN_PROJECT\",\n        \"LANGCHAIN_SESSION\",\n        \"LANGSMITH_API_KEY\",\n        \"LANGSMITH_ENDPOINT\",\n        \"LANGSMITH_TRACING_V2\",\n        \"LANGSMITH_PROJECT\",\n        \"LANGSMITH_SESSION\"\n    ];\n    for (const [key, value] of Object.entries(allEnvVars)){\n        if (typeof value === \"string\" && !excluded.includes(key) && !key.toLowerCase().includes(\"key\") && !key.toLowerCase().includes(\"secret\") && !key.toLowerCase().includes(\"token\")) {\n            if (key === \"LANGCHAIN_REVISION_ID\") {\n                envVars[\"revision_id\"] = value;\n            } else {\n                envVars[key] = value;\n            }\n        }\n    }\n    return envVars;\n}\n/**\n * Retrieves only the LangChain/LangSmith-prefixed environment variables from the current runtime environment.\n * This is more efficient than copying all environment variables.\n *\n * @returns {Record<string, string>}\n *  - A record of LangChain/LangSmith environment variables.\n */ function getLangSmithEnvironmentVariables() {\n    const envVars = {};\n    try {\n        // Check for Node.js environment\n        // eslint-disable-next-line no-process-env\n        if (typeof process !== \"undefined\" && process.env) {\n            // eslint-disable-next-line no-process-env\n            for (const [key, value] of Object.entries(process.env)){\n                if ((key.startsWith(\"LANGCHAIN_\") || key.startsWith(\"LANGSMITH_\")) && value != null) {\n                    if ((key.toLowerCase().includes(\"key\") || key.toLowerCase().includes(\"secret\") || key.toLowerCase().includes(\"token\")) && typeof value === \"string\") {\n                        envVars[key] = value.slice(0, 2) + \"*\".repeat(value.length - 4) + value.slice(-2);\n                    } else {\n                        envVars[key] = value;\n                    }\n                }\n            }\n        }\n    } catch (e) {\n    // Catch any errors that might occur while trying to access environment variables\n    }\n    return envVars;\n}\nfunction getEnvironmentVariable(name) {\n    // Certain Deno setups will throw an error if you try to access environment variables\n    // https://github.com/hwchase17/langchainjs/issues/1412\n    try {\n        return typeof process !== \"undefined\" ? process.env?.[name] : undefined;\n    } catch (e) {\n        return undefined;\n    }\n}\nfunction getLangSmithEnvironmentVariable(name) {\n    return getEnvironmentVariable(`LANGSMITH_${name}`) || getEnvironmentVariable(`LANGCHAIN_${name}`);\n}\nfunction setEnvironmentVariable(name, value) {\n    if (typeof process !== \"undefined\") {\n        // eslint-disable-next-line no-process-env\n        process.env[name] = value;\n    }\n}\nlet cachedCommitSHAs;\n/**\n * Get the Git commit SHA from common environment variables\n * used by different CI/CD platforms.\n * @returns {string | undefined} The Git commit SHA or undefined if not found.\n */ function getShas() {\n    if (cachedCommitSHAs !== undefined) {\n        return cachedCommitSHAs;\n    }\n    const common_release_envs = [\n        \"VERCEL_GIT_COMMIT_SHA\",\n        \"NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA\",\n        \"COMMIT_REF\",\n        \"RENDER_GIT_COMMIT\",\n        \"CI_COMMIT_SHA\",\n        \"CIRCLE_SHA1\",\n        \"CF_PAGES_COMMIT_SHA\",\n        \"REACT_APP_GIT_SHA\",\n        \"SOURCE_VERSION\",\n        \"GITHUB_SHA\",\n        \"TRAVIS_COMMIT\",\n        \"GIT_COMMIT\",\n        \"BUILD_VCS_NUMBER\",\n        \"bamboo_planRepository_revision\",\n        \"Build.SourceVersion\",\n        \"BITBUCKET_COMMIT\",\n        \"DRONE_COMMIT_SHA\",\n        \"SEMAPHORE_GIT_SHA\",\n        \"BUILDKITE_COMMIT\"\n    ];\n    const shas = {};\n    for (const env of common_release_envs){\n        const envVar = getEnvironmentVariable(env);\n        if (envVar !== undefined) {\n            shas[env] = envVar;\n        }\n    }\n    cachedCommitSHAs = shas;\n    return shas;\n}\nfunction getOtelEnabled() {\n    return getEnvironmentVariable(\"OTEL_ENABLED\") === \"true\" || getLangSmithEnvironmentVariable(\"OTEL_ENABLED\") === \"true\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9lbnYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsNkRBQTZEO0FBQ25CO0FBQzFDLElBQUlDO0FBQ0csTUFBTUMsWUFBWSxJQUFNLE1BQTZCLElBQUksQ0FBc0MsQ0FBQztBQUNoRyxNQUFNRyxjQUFjLElBQU0sT0FBT0MsZUFBZSxZQUNuREEsV0FBV0MsV0FBVyxJQUN0QkQsV0FBV0MsV0FBVyxDQUFDQyxJQUFJLEtBQUssNkJBQTZCO0FBQzFELE1BQU1DLFVBQVUsSUFBTSxNQUEwRCxJQUNsRixPQUFPQyxjQUFjLGVBQWVBLFVBQVVDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDLFNBQVU7QUFDaEYseURBQXlEO0FBQ3pELDZCQUE2QjtBQUN0QixNQUFNQyxTQUFTLElBQU0sT0FBT0MsU0FBUyxZQUFZO0FBQ3hELGdEQUFnRDtBQUN6QyxNQUFNQyxTQUFTLElBQU0sT0FBT0MsWUFBWSxlQUMzQyxPQUFPQSxRQUFRQyxRQUFRLEtBQUssZUFDNUIsT0FBT0QsUUFBUUMsUUFBUSxDQUFDQyxJQUFJLEtBQUssZUFDakMsQ0FBQ0wsU0FBUztBQUNQLE1BQU1NLFNBQVM7SUFDbEIsSUFBSWxCLFdBQVc7UUFDWCxPQUFPQTtJQUNYO0lBQ0EsK0VBQStFO0lBQy9FLElBQUksT0FBT21CLFFBQVEsYUFBYTtRQUM1Qm5CLFlBQVk7SUFDaEIsT0FDSyxJQUFJQyxhQUFhO1FBQ2xCRCxZQUFZO0lBQ2hCLE9BQ0ssSUFBSWMsVUFBVTtRQUNmZCxZQUFZO0lBQ2hCLE9BQ0ssSUFBSUksZUFBZTtRQUNwQkosWUFBWTtJQUNoQixPQUNLLElBQUlRLFdBQVc7UUFDaEJSLFlBQVk7SUFDaEIsT0FDSyxJQUFJWSxVQUFVO1FBQ2ZaLFlBQVk7SUFDaEIsT0FDSztRQUNEQSxZQUFZO0lBQ2hCO0lBQ0EsT0FBT0E7QUFDWCxFQUFFO0FBQ0YsSUFB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O0NBSUMsR0FDTSxTQUFTdkI7SUFDWixJQUFJdUIscUJBQXFCMUIsV0FBVztRQUNoQyxPQUFPMEI7SUFDWDtJQUNBLE1BQU1DLHNCQUFzQjtRQUN4QjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNIO0lBQ0QsTUFBTUMsT0FBTyxDQUFDO0lBQ2QsS0FBSyxNQUFNM0IsT0FBTzBCLG9CQUFxQjtRQUNuQyxNQUFNRSxTQUFTTix1QkFBdUJ0QjtRQUN0QyxJQUFJNEIsV0FBVzdCLFdBQVc7WUFDdEI0QixJQUFJLENBQUMzQixJQUFJLEdBQUc0QjtRQUNoQjtJQUNKO0lBQ0FILG1CQUFtQkU7SUFDbkIsT0FBT0E7QUFDWDtBQUNPLFNBQVNFO0lBQ1osT0FBUVAsdUJBQXVCLG9CQUFvQixVQUMvQ0MsZ0NBQWdDLG9CQUFvQjtBQUM1RCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9lbnYuanM/NGM1MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbmxpbmVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2ZsZXhkaW5lc2gvYnJvd3Nlci1vci1ub2RlXG5pbXBvcnQgeyBfX3ZlcnNpb25fXyB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xubGV0IGdsb2JhbEVudjtcbmV4cG9ydCBjb25zdCBpc0Jyb3dzZXIgPSAoKSA9PiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCI7XG5leHBvcnQgY29uc3QgaXNXZWJXb3JrZXIgPSAoKSA9PiB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gXCJvYmplY3RcIiAmJlxuICAgIGdsb2JhbFRoaXMuY29uc3RydWN0b3IgJiZcbiAgICBnbG9iYWxUaGlzLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiRGVkaWNhdGVkV29ya2VyR2xvYmFsU2NvcGVcIjtcbmV4cG9ydCBjb25zdCBpc0pzRG9tID0gKCkgPT4gKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93Lm5hbWUgPT09IFwibm9kZWpzXCIpIHx8XG4gICAgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcImpzZG9tXCIpKTtcbi8vIFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb24gcHJvdmlkZXMgYSBgRGVub2AgZ2xvYmFsIG9iamVjdFxuLy8gd2l0aG91dCBgdmVyc2lvbmAgcHJvcGVydHlcbmV4cG9ydCBjb25zdCBpc0Rlbm8gPSAoKSA9PiB0eXBlb2YgRGVubyAhPT0gXCJ1bmRlZmluZWRcIjtcbi8vIE1hcmsgbm90LWFzLW5vZGUgaWYgaW4gU3VwYWJhc2UgRWRnZSBGdW5jdGlvblxuZXhwb3J0IGNvbnN0IGlzTm9kZSA9ICgpID0+IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgIWlzRGVubygpO1xuZXhwb3J0IGNvbnN0IGdldEVudiA9ICgpID0+IHtcbiAgICBpZiAoZ2xvYmFsRW52KSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxFbnY7XG4gICAgfVxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgQnVuIHR5cGVzIGFyZSBub3QgaW1wb3J0ZWQgZHVlIHRvIGNvbmZsaWN0cyB3aXRoIE5vZGUgdHlwZXNcbiAgICBpZiAodHlwZW9mIEJ1biAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBnbG9iYWxFbnYgPSBcImJ1blwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Jyb3dzZXIoKSkge1xuICAgICAgICBnbG9iYWxFbnYgPSBcImJyb3dzZXJcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNOb2RlKCkpIHtcbiAgICAgICAgZ2xvYmFsRW52ID0gXCJub2RlXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzV2ViV29ya2VyKCkpIHtcbiAgICAgICAgZ2xvYmFsRW52ID0gXCJ3ZWJ3b3JrZXJcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNKc0RvbSgpKSB7XG4gICAgICAgIGdsb2JhbEVudiA9IFwianNkb21cIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNEZW5vKCkpIHtcbiAgICAgICAgZ2xvYmFsRW52ID0gXCJkZW5vXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBnbG9iYWxFbnYgPSBcIm90aGVyXCI7XG4gICAgfVxuICAgIHJldHVybiBnbG9iYWxFbnY7XG59O1xubGV0IHJ1bnRpbWVFbnZpcm9ubWVudDtcbmV4cG9ydCBmdW5jdGlvbiBnZXRSdW50aW1lRW52aXJvbm1lbnQoKSB7XG4gICAgaWYgKHJ1bnRpbWVFbnZpcm9ubWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGVudiA9IGdldEVudigpO1xuICAgICAgICBjb25zdCByZWxlYXNlRW52ID0gZ2V0U2hhcygpO1xuICAgICAgICBydW50aW1lRW52aXJvbm1lbnQgPSB7XG4gICAgICAgICAgICBsaWJyYXJ5OiBcImxhbmdzbWl0aFwiLFxuICAgICAgICAgICAgcnVudGltZTogZW52LFxuICAgICAgICAgICAgc2RrOiBcImxhbmdzbWl0aC1qc1wiLFxuICAgICAgICAgICAgc2RrX3ZlcnNpb246IF9fdmVyc2lvbl9fLFxuICAgICAgICAgICAgLi4ucmVsZWFzZUVudixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bnRpbWVFbnZpcm9ubWVudDtcbn1cbi8qKlxuICogUmV0cmlldmVzIHRoZSBMYW5nU21pdGgtc3BlY2lmaWMgbWV0YWRhdGEgZnJvbSB0aGUgY3VycmVudCBydW50aW1lIGVudmlyb25tZW50LlxuICpcbiAqIEByZXR1cm5zIHtSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+fVxuICogIC0gQSByZWNvcmQgb2YgTGFuZ1NtaXRoLXNwZWNpZmljIG1ldGFkYXRhIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhbmdTbWl0aEVudlZhcnNNZXRhZGF0YSgpIHtcbiAgICBjb25zdCBhbGxFbnZWYXJzID0gZ2V0TGFuZ1NtaXRoRW52aXJvbm1lbnRWYXJpYWJsZXMoKTtcbiAgICBjb25zdCBlbnZWYXJzID0ge307XG4gICAgY29uc3QgZXhjbHVkZWQgPSBbXG4gICAgICAgIFwiTEFOR0NIQUlOX0FQSV9LRVlcIixcbiAgICAgICAgXCJMQU5HQ0hBSU5fRU5EUE9JTlRcIixcbiAgICAgICAgXCJMQU5HQ0hBSU5fVFJBQ0lOR19WMlwiLFxuICAgICAgICBcIkxBTkdDSEFJTl9QUk9KRUNUXCIsXG4gICAgICAgIFwiTEFOR0NIQUlOX1NFU1NJT05cIixcbiAgICAgICAgXCJMQU5HU01JVEhfQVBJX0tFWVwiLFxuICAgICAgICBcIkxBTkdTTUlUSF9FTkRQT0lOVFwiLFxuICAgICAgICBcIkxBTkdTTUlUSF9UUkFDSU5HX1YyXCIsXG4gICAgICAgIFwiTEFOR1NNSVRIX1BST0pFQ1RcIixcbiAgICAgICAgXCJMQU5HU01JVEhfU0VTU0lPTlwiLFxuICAgIF07XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYWxsRW52VmFycykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgIWV4Y2x1ZGVkLmluY2x1ZGVzKGtleSkgJiZcbiAgICAgICAgICAgICFrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImtleVwiKSAmJlxuICAgICAgICAgICAgIWtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwic2VjcmV0XCIpICYmXG4gICAgICAgICAgICAha2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJ0b2tlblwiKSkge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJMQU5HQ0hBSU5fUkVWSVNJT05fSURcIikge1xuICAgICAgICAgICAgICAgIGVudlZhcnNbXCJyZXZpc2lvbl9pZFwiXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW52VmFyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVudlZhcnM7XG59XG4vKipcbiAqIFJldHJpZXZlcyBvbmx5IHRoZSBMYW5nQ2hhaW4vTGFuZ1NtaXRoLXByZWZpeGVkIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIHRoZSBjdXJyZW50IHJ1bnRpbWUgZW52aXJvbm1lbnQuXG4gKiBUaGlzIGlzIG1vcmUgZWZmaWNpZW50IHRoYW4gY29weWluZyBhbGwgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICpcbiAqIEByZXR1cm5zIHtSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+fVxuICogIC0gQSByZWNvcmQgb2YgTGFuZ0NoYWluL0xhbmdTbWl0aCBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlcygpIHtcbiAgICBjb25zdCBlbnZWYXJzID0ge307XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIE5vZGUuanMgZW52aXJvbm1lbnRcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZW52XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZW52XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwcm9jZXNzLmVudikpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGtleS5zdGFydHNXaXRoKFwiTEFOR0NIQUlOX1wiKSB8fCBrZXkuc3RhcnRzV2l0aChcIkxBTkdTTUlUSF9cIikpICYmXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImtleVwiKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJzZWNyZXRcIikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwidG9rZW5cIikpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudlZhcnNba2V5XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuc2xpY2UoMCwgMikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIipcIi5yZXBlYXQodmFsdWUubGVuZ3RoIC0gNCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zbGljZSgtMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnZWYXJzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBDYXRjaCBhbnkgZXJyb3JzIHRoYXQgbWlnaHQgb2NjdXIgd2hpbGUgdHJ5aW5nIHRvIGFjY2VzcyBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICB9XG4gICAgcmV0dXJuIGVudlZhcnM7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShuYW1lKSB7XG4gICAgLy8gQ2VydGFpbiBEZW5vIHNldHVwcyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHlvdSB0cnkgdG8gYWNjZXNzIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9od2NoYXNlMTcvbGFuZ2NoYWluanMvaXNzdWVzLzE0MTJcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZW52XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnY/LltuYW1lXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldExhbmdTbWl0aEVudmlyb25tZW50VmFyaWFibGUobmFtZSkge1xuICAgIHJldHVybiAoZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShgTEFOR1NNSVRIXyR7bmFtZX1gKSB8fFxuICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKGBMQU5HQ0hBSU5fJHtuYW1lfWApKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRFbnZpcm9ubWVudFZhcmlhYmxlKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm9jZXNzLWVudlxuICAgICAgICBwcm9jZXNzLmVudltuYW1lXSA9IHZhbHVlO1xuICAgIH1cbn1cbmxldCBjYWNoZWRDb21taXRTSEFzO1xuLyoqXG4gKiBHZXQgdGhlIEdpdCBjb21taXQgU0hBIGZyb20gY29tbW9uIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICogdXNlZCBieSBkaWZmZXJlbnQgQ0kvQ0QgcGxhdGZvcm1zLlxuICogQHJldHVybnMge3N0cmluZyB8IHVuZGVmaW5lZH0gVGhlIEdpdCBjb21taXQgU0hBIG9yIHVuZGVmaW5lZCBpZiBub3QgZm91bmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaGFzKCkge1xuICAgIGlmIChjYWNoZWRDb21taXRTSEFzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZENvbW1pdFNIQXM7XG4gICAgfVxuICAgIGNvbnN0IGNvbW1vbl9yZWxlYXNlX2VudnMgPSBbXG4gICAgICAgIFwiVkVSQ0VMX0dJVF9DT01NSVRfU0hBXCIsXG4gICAgICAgIFwiTkVYVF9QVUJMSUNfVkVSQ0VMX0dJVF9DT01NSVRfU0hBXCIsXG4gICAgICAgIFwiQ09NTUlUX1JFRlwiLFxuICAgICAgICBcIlJFTkRFUl9HSVRfQ09NTUlUXCIsXG4gICAgICAgIFwiQ0lfQ09NTUlUX1NIQVwiLFxuICAgICAgICBcIkNJUkNMRV9TSEExXCIsXG4gICAgICAgIFwiQ0ZfUEFHRVNfQ09NTUlUX1NIQVwiLFxuICAgICAgICBcIlJFQUNUX0FQUF9HSVRfU0hBXCIsXG4gICAgICAgIFwiU09VUkNFX1ZFUlNJT05cIixcbiAgICAgICAgXCJHSVRIVUJfU0hBXCIsXG4gICAgICAgIFwiVFJBVklTX0NPTU1JVFwiLFxuICAgICAgICBcIkdJVF9DT01NSVRcIixcbiAgICAgICAgXCJCVUlMRF9WQ1NfTlVNQkVSXCIsXG4gICAgICAgIFwiYmFtYm9vX3BsYW5SZXBvc2l0b3J5X3JldmlzaW9uXCIsXG4gICAgICAgIFwiQnVpbGQuU291cmNlVmVyc2lvblwiLFxuICAgICAgICBcIkJJVEJVQ0tFVF9DT01NSVRcIixcbiAgICAgICAgXCJEUk9ORV9DT01NSVRfU0hBXCIsXG4gICAgICAgIFwiU0VNQVBIT1JFX0dJVF9TSEFcIixcbiAgICAgICAgXCJCVUlMREtJVEVfQ09NTUlUXCIsXG4gICAgXTtcbiAgICBjb25zdCBzaGFzID0ge307XG4gICAgZm9yIChjb25zdCBlbnYgb2YgY29tbW9uX3JlbGVhc2VfZW52cykge1xuICAgICAgICBjb25zdCBlbnZWYXIgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKGVudik7XG4gICAgICAgIGlmIChlbnZWYXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2hhc1tlbnZdID0gZW52VmFyO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhY2hlZENvbW1pdFNIQXMgPSBzaGFzO1xuICAgIHJldHVybiBzaGFzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE90ZWxFbmFibGVkKCkge1xuICAgIHJldHVybiAoZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIk9URUxfRU5BQkxFRFwiKSA9PT0gXCJ0cnVlXCIgfHxcbiAgICAgICAgZ2V0TGFuZ1NtaXRoRW52aXJvbm1lbnRWYXJpYWJsZShcIk9URUxfRU5BQkxFRFwiKSA9PT0gXCJ0cnVlXCIpO1xufVxuIl0sIm5hbWVzIjpbIl9fdmVyc2lvbl9fIiwiZ2xvYmFsRW52IiwiaXNCcm93c2VyIiwid2luZG93IiwiZG9jdW1lbnQiLCJpc1dlYldvcmtlciIsImdsb2JhbFRoaXMiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJpc0pzRG9tIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5jbHVkZXMiLCJpc0Rlbm8iLCJEZW5vIiwiaXNOb2RlIiwicHJvY2VzcyIsInZlcnNpb25zIiwibm9kZSIsImdldEVudiIsIkJ1biIsInJ1bnRpbWVFbnZpcm9ubWVudCIsImdldFJ1bnRpbWVFbnZpcm9ubWVudCIsInVuZGVmaW5lZCIsImVudiIsInJlbGVhc2VFbnYiLCJnZXRTaGFzIiwibGlicmFyeSIsInJ1bnRpbWUiLCJzZGsiLCJzZGtfdmVyc2lvbiIsImdldExhbmdTbWl0aEVudlZhcnNNZXRhZGF0YSIsImFsbEVudlZhcnMiLCJnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlcyIsImVudlZhcnMiLCJleGNsdWRlZCIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsInRvTG93ZXJDYXNlIiwic3RhcnRzV2l0aCIsInNsaWNlIiwicmVwZWF0IiwibGVuZ3RoIiwiZSIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlIiwic2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsImNhY2hlZENvbW1pdFNIQXMiLCJjb21tb25fcmVsZWFzZV9lbnZzIiwic2hhcyIsImVudlZhciIsImdldE90ZWxFbmFibGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/error.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/error.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConflictingEndpointsError: () => (/* binding */ ConflictingEndpointsError),\n/* harmony export */   LangSmithConflictError: () => (/* binding */ LangSmithConflictError),\n/* harmony export */   isConflictingEndpointsError: () => (/* binding */ isConflictingEndpointsError),\n/* harmony export */   printErrorStackTrace: () => (/* binding */ printErrorStackTrace),\n/* harmony export */   raiseForStatus: () => (/* binding */ raiseForStatus)\n/* harmony export */ });\nfunction getErrorStackTrace(e) {\n    if (typeof e !== \"object\" || e == null) return undefined;\n    if (!(\"stack\" in e) || typeof e.stack !== \"string\") return undefined;\n    let stack = e.stack;\n    const prevLine = `${e}`;\n    if (stack.startsWith(prevLine)) {\n        stack = stack.slice(prevLine.length);\n    }\n    if (stack.startsWith(\"\\n\")) {\n        stack = stack.slice(1);\n    }\n    return stack;\n}\nfunction printErrorStackTrace(e) {\n    const stack = getErrorStackTrace(e);\n    if (stack == null) return;\n    console.error(stack);\n}\n/**\n * LangSmithConflictError\n *\n * Represents an error that occurs when there's a conflict during an operation,\n * typically corresponding to HTTP 409 status code responses.\n *\n * This error is thrown when an attempt to create or modify a resource conflicts\n * with the current state of the resource on the server. Common scenarios include:\n * - Attempting to create a resource that already exists\n * - Trying to update a resource that has been modified by another process\n * - Violating a uniqueness constraint in the data\n *\n * @extends Error\n *\n * @example\n * try {\n *   await createProject(\"existingProject\");\n * } catch (error) {\n *   if (error instanceof ConflictError) {\n *     console.log(\"A conflict occurred:\", error.message);\n *     // Handle the conflict, e.g., by suggesting a different project name\n *   } else {\n *     // Handle other types of errors\n *   }\n * }\n *\n * @property {string} name - Always set to 'ConflictError' for easy identification\n * @property {string} message - Detailed error message including server response\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409\n */ class LangSmithConflictError extends Error {\n    constructor(message){\n        super(message);\n        Object.defineProperty(this, \"status\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = \"LangSmithConflictError\";\n        this.status = 409;\n    }\n}\n/**\n * Throws an appropriate error based on the response status and body.\n *\n * @param response - The fetch Response object\n * @param context - Additional context to include in the error message (e.g., operation being performed)\n * @throws {LangSmithConflictError} When the response status is 409\n * @throws {Error} For all other non-ok responses\n */ async function raiseForStatus(response, context, consumeOnSuccess) {\n    let errorBody;\n    if (response.ok) {\n        // consume the response body to release the connection\n        // https://undici.nodejs.org/#/?id=garbage-collection\n        if (consumeOnSuccess) {\n            errorBody = await response.text();\n        }\n        return;\n    }\n    if (response.status === 403) {\n        try {\n            const errorData = await response.json();\n            const errorCode = errorData?.error;\n            if (errorCode === \"org_scoped_key_requires_workspace\") {\n                errorBody = \"This API key is org-scoped and requires workspace specification. \" + \"Please provide 'workspaceId' parameter, \" + \"or set LANGSMITH_WORKSPACE_ID environment variable.\";\n            }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        } catch (e) {\n            const errorWithStatus = new Error(`${response.status} ${response.statusText}`);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            errorWithStatus.status = response?.status;\n            throw errorWithStatus;\n        }\n    }\n    if (errorBody === undefined) {\n        try {\n            errorBody = await response.text();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        } catch (e) {\n            errorBody = \"\";\n        }\n    }\n    const fullMessage = `Failed to ${context}. Received status [${response.status}]: ${response.statusText}. Message: ${errorBody}`;\n    if (response.status === 409) {\n        throw new LangSmithConflictError(fullMessage);\n    }\n    const err = new Error(fullMessage);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    err.status = response.status;\n    throw err;\n}\nconst ERR_CONFLICTING_ENDPOINTS = \"ERR_CONFLICTING_ENDPOINTS\";\nclass ConflictingEndpointsError extends Error {\n    constructor(){\n        super(\"You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT \" + \"and LANGSMITH_RUNS_ENDPOINTS.\");\n        Object.defineProperty(this, \"code\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ERR_CONFLICTING_ENDPOINTS\n        });\n        this.name = \"ConflictingEndpointsError\"; // helpful in logs\n    }\n}\nfunction isConflictingEndpointsError(err) {\n    return typeof err === \"object\" && err !== null && err.code === ERR_CONFLICTING_ENDPOINTS;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9lcnJvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLFNBQVNBLG1CQUFtQkMsQ0FBQztJQUN6QixJQUFJLE9BQU9BLE1BQU0sWUFBWUEsS0FBSyxNQUM5QixPQUFPQztJQUNYLElBQUksQ0FBRSxZQUFXRCxDQUFBQSxLQUFNLE9BQU9BLEVBQUVFLEtBQUssS0FBSyxVQUN0QyxPQUFPRDtJQUNYLElBQUlDLFFBQVFGLEVBQUVFLEtBQUs7SUFDbkIsTUFBTUMsV0FBVyxDQUFDLEVBQUVILEVBQUUsQ0FBQztJQUN2QixJQUFJRSxNQUFNRSxVQUFVLENBQUNELFdBQVc7UUFDNUJELFFBQVFBLE1BQU1HLEtBQUssQ0FBQ0YsU0FBU0csTUFBTTtJQUN2QztJQUNBLElBQUlKLE1BQU1FLFVBQVUsQ0FBQyxPQUFPO1FBQ3hCRixRQUFRQSxNQUFNRyxLQUFLLENBQUM7SUFDeEI7SUFDQSxPQUFPSDtBQUNYO0FBQ08sU0FBU0sscUJBQXFCUCxDQUFDO0lBQ2xDLE1BQU1FLFFBQVFILG1CQUFtQkM7SUFDakMsSUFBSUUsU0FBUyxNQUNUO0lBQ0pNLFFBQVFDLEtBQUssQ0FBQ1A7QUFDbEI7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBOEJDLEdBQ00sTUFBTVEsK0JBQStCQztJQUN4Q0MsWUFBWUMsT0FBTyxDQUFFO1FBQ2pCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLElBQUksR0FBRztRQUNaLElBQUksQ0FBQ0MsTUFBTSxHQUFHO0lBQ2xCO0FBQ0o7QUFDQTs7Ozs7OztDQU9DLEdBQ00sZUFBZUMsZUFBZUMsUUFBUSxFQUFFQyxPQUFPLEVBQUVDLGdCQUFnQjtJQUNwRSxJQUFJQztJQUNKLElBQUlILFNBQVNJLEVBQUUsRUFBRTtRQUNiLHNEQUFzRDtRQUN0RCxxREFBcUQ7UUFDckQsSUFBSUYsa0JBQWtCO1lBQ2xCQyxZQUFZLE1BQU1ILFNBQVNLLElBQUk7UUFDbkM7UUFDQTtJQUNKO0lBQ0EsSUFBSUwsU0FBU0YsTUFBTSxLQUFLLEtBQUs7UUFDekIsSUFBSTtZQUNBLE1BQU1RLFlBQVksTUFBTU4sU0FBU08sSUFBSTtZQUNyQyxNQUFNQyxZQUFZRixXQUFXcEI7WUFDN0IsSUFBSXNCLGNBQWMscUNBQXFDO2dCQUNuREwsWUFDSSxzRUFDSSw2Q0FDQTtZQUNaO1FBQ0EsOERBQThEO1FBQ2xFLEVBQ0EsT0FBTzFCLEdBQUc7WUFDTixNQUFNZ0Msa0JBQWtCLElBQUlyQixNQUFNLENBQUMsRUFBRVksU0FBU0YsTUFBTSxDQUFDLENBQUMsRUFBRUUsU0FBU1UsVUFBVSxDQUFDLENBQUM7WUFDN0UsOERBQThEO1lBQzlERCxnQkFBZ0JYLE1BQU0sR0FBR0UsVUFBVUY7WUFDbkMsTUFBTVc7UUFDVjtJQUNKO0lBQ0EsSUFBSU4sY0FBY3pCLFdBQVc7UUFDekIsSUFBSTtZQUNBeUIsWUFBWSxNQUFNSCxTQUFTSyxJQUFJO1FBQy9CLDhEQUE4RDtRQUNsRSxFQUNBLE9BQU81QixHQUFHO1lBQ04wQixZQUFZO1FBQ2hCO0lBQ0o7SUFDQSxNQUFNUSxjQUFjLENBQUMsVUFBVSxFQUFFVixRQUFRLG1CQUFtQixFQUFFRCxTQUFTRixNQUFNLENBQUMsR0FBRyxFQUFFRSxTQUFTVSxVQUFVLENBQUMsV0FBVyxFQUFFUCxVQUFVLENBQUM7SUFDL0gsSUFBSUgsU0FBU0YsTUFBTSxLQUFLLEtBQUs7UUFDekIsTUFBTSxJQUFJWCx1QkFBdUJ3QjtJQUNyQztJQUNBLE1BQU1DLE1BQU0sSUFBSXhCLE1BQU11QjtJQUN0Qiw4REFBOEQ7SUFDOURDLElBQUlkLE1BQU0sR0FBR0UsU0FBU0YsTUFBTTtJQUM1QixNQUFNYztBQUNWO0FBQ0EsTUFBTUMsNEJBQTRCO0FBQzNCLE1BQU1DLGtDQUFrQzFCO0lBQzNDQyxhQUFjO1FBQ1YsS0FBSyxDQUFDLHFFQUNGO1FBQ0pFLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT2lCO1FBQ1g7UUFDQSxJQUFJLENBQUNoQixJQUFJLEdBQUcsNkJBQTZCLGtCQUFrQjtJQUMvRDtBQUNKO0FBQ08sU0FBU2tCLDRCQUE0QkgsR0FBRztJQUMzQyxPQUFRLE9BQU9BLFFBQVEsWUFDbkJBLFFBQVEsUUFDUkEsSUFBSUksSUFBSSxLQUFLSDtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9lcnJvci5qcz9mOGI3Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGdldEVycm9yU3RhY2tUcmFjZShlKSB7XG4gICAgaWYgKHR5cGVvZiBlICE9PSBcIm9iamVjdFwiIHx8IGUgPT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAoIShcInN0YWNrXCIgaW4gZSkgfHwgdHlwZW9mIGUuc3RhY2sgIT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgbGV0IHN0YWNrID0gZS5zdGFjaztcbiAgICBjb25zdCBwcmV2TGluZSA9IGAke2V9YDtcbiAgICBpZiAoc3RhY2suc3RhcnRzV2l0aChwcmV2TGluZSkpIHtcbiAgICAgICAgc3RhY2sgPSBzdGFjay5zbGljZShwcmV2TGluZS5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoc3RhY2suc3RhcnRzV2l0aChcIlxcblwiKSkge1xuICAgICAgICBzdGFjayA9IHN0YWNrLnNsaWNlKDEpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhY2s7XG59XG5leHBvcnQgZnVuY3Rpb24gcHJpbnRFcnJvclN0YWNrVHJhY2UoZSkge1xuICAgIGNvbnN0IHN0YWNrID0gZ2V0RXJyb3JTdGFja1RyYWNlKGUpO1xuICAgIGlmIChzdGFjayA9PSBudWxsKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc29sZS5lcnJvcihzdGFjayk7XG59XG4vKipcbiAqIExhbmdTbWl0aENvbmZsaWN0RXJyb3JcbiAqXG4gKiBSZXByZXNlbnRzIGFuIGVycm9yIHRoYXQgb2NjdXJzIHdoZW4gdGhlcmUncyBhIGNvbmZsaWN0IGR1cmluZyBhbiBvcGVyYXRpb24sXG4gKiB0eXBpY2FsbHkgY29ycmVzcG9uZGluZyB0byBIVFRQIDQwOSBzdGF0dXMgY29kZSByZXNwb25zZXMuXG4gKlxuICogVGhpcyBlcnJvciBpcyB0aHJvd24gd2hlbiBhbiBhdHRlbXB0IHRvIGNyZWF0ZSBvciBtb2RpZnkgYSByZXNvdXJjZSBjb25mbGljdHNcbiAqIHdpdGggdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHJlc291cmNlIG9uIHRoZSBzZXJ2ZXIuIENvbW1vbiBzY2VuYXJpb3MgaW5jbHVkZTpcbiAqIC0gQXR0ZW1wdGluZyB0byBjcmVhdGUgYSByZXNvdXJjZSB0aGF0IGFscmVhZHkgZXhpc3RzXG4gKiAtIFRyeWluZyB0byB1cGRhdGUgYSByZXNvdXJjZSB0aGF0IGhhcyBiZWVuIG1vZGlmaWVkIGJ5IGFub3RoZXIgcHJvY2Vzc1xuICogLSBWaW9sYXRpbmcgYSB1bmlxdWVuZXNzIGNvbnN0cmFpbnQgaW4gdGhlIGRhdGFcbiAqXG4gKiBAZXh0ZW5kcyBFcnJvclxuICpcbiAqIEBleGFtcGxlXG4gKiB0cnkge1xuICogICBhd2FpdCBjcmVhdGVQcm9qZWN0KFwiZXhpc3RpbmdQcm9qZWN0XCIpO1xuICogfSBjYXRjaCAoZXJyb3IpIHtcbiAqICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQ29uZmxpY3RFcnJvcikge1xuICogICAgIGNvbnNvbGUubG9nKFwiQSBjb25mbGljdCBvY2N1cnJlZDpcIiwgZXJyb3IubWVzc2FnZSk7XG4gKiAgICAgLy8gSGFuZGxlIHRoZSBjb25mbGljdCwgZS5nLiwgYnkgc3VnZ2VzdGluZyBhIGRpZmZlcmVudCBwcm9qZWN0IG5hbWVcbiAqICAgfSBlbHNlIHtcbiAqICAgICAvLyBIYW5kbGUgb3RoZXIgdHlwZXMgb2YgZXJyb3JzXG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSAtIEFsd2F5cyBzZXQgdG8gJ0NvbmZsaWN0RXJyb3InIGZvciBlYXN5IGlkZW50aWZpY2F0aW9uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbWVzc2FnZSAtIERldGFpbGVkIGVycm9yIG1lc3NhZ2UgaW5jbHVkaW5nIHNlcnZlciByZXNwb25zZVxuICpcbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9TdGF0dXMvNDA5XG4gKi9cbmV4cG9ydCBjbGFzcyBMYW5nU21pdGhDb25mbGljdEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXR1c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkxhbmdTbWl0aENvbmZsaWN0RXJyb3JcIjtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSA0MDk7XG4gICAgfVxufVxuLyoqXG4gKiBUaHJvd3MgYW4gYXBwcm9wcmlhdGUgZXJyb3IgYmFzZWQgb24gdGhlIHJlc3BvbnNlIHN0YXR1cyBhbmQgYm9keS5cbiAqXG4gKiBAcGFyYW0gcmVzcG9uc2UgLSBUaGUgZmV0Y2ggUmVzcG9uc2Ugb2JqZWN0XG4gKiBAcGFyYW0gY29udGV4dCAtIEFkZGl0aW9uYWwgY29udGV4dCB0byBpbmNsdWRlIGluIHRoZSBlcnJvciBtZXNzYWdlIChlLmcuLCBvcGVyYXRpb24gYmVpbmcgcGVyZm9ybWVkKVxuICogQHRocm93cyB7TGFuZ1NtaXRoQ29uZmxpY3RFcnJvcn0gV2hlbiB0aGUgcmVzcG9uc2Ugc3RhdHVzIGlzIDQwOVxuICogQHRocm93cyB7RXJyb3J9IEZvciBhbGwgb3RoZXIgbm9uLW9rIHJlc3BvbnNlc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmFpc2VGb3JTdGF0dXMocmVzcG9uc2UsIGNvbnRleHQsIGNvbnN1bWVPblN1Y2Nlc3MpIHtcbiAgICBsZXQgZXJyb3JCb2R5O1xuICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAvLyBjb25zdW1lIHRoZSByZXNwb25zZSBib2R5IHRvIHJlbGVhc2UgdGhlIGNvbm5lY3Rpb25cbiAgICAgICAgLy8gaHR0cHM6Ly91bmRpY2kubm9kZWpzLm9yZy8jLz9pZD1nYXJiYWdlLWNvbGxlY3Rpb25cbiAgICAgICAgaWYgKGNvbnN1bWVPblN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGVycm9yQm9keSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JDb2RlID0gZXJyb3JEYXRhPy5lcnJvcjtcbiAgICAgICAgICAgIGlmIChlcnJvckNvZGUgPT09IFwib3JnX3Njb3BlZF9rZXlfcmVxdWlyZXNfd29ya3NwYWNlXCIpIHtcbiAgICAgICAgICAgICAgICBlcnJvckJvZHkgPVxuICAgICAgICAgICAgICAgICAgICBcIlRoaXMgQVBJIGtleSBpcyBvcmctc2NvcGVkIGFuZCByZXF1aXJlcyB3b3Jrc3BhY2Ugc3BlY2lmaWNhdGlvbi4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJQbGVhc2UgcHJvdmlkZSAnd29ya3NwYWNlSWQnIHBhcmFtZXRlciwgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJvciBzZXQgTEFOR1NNSVRIX1dPUktTUEFDRV9JRCBlbnZpcm9ubWVudCB2YXJpYWJsZS5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yV2l0aFN0YXR1cyA9IG5ldyBFcnJvcihgJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBlcnJvcldpdGhTdGF0dXMuc3RhdHVzID0gcmVzcG9uc2U/LnN0YXR1cztcbiAgICAgICAgICAgIHRocm93IGVycm9yV2l0aFN0YXR1cztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXJyb3JCb2R5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGVycm9yQm9keSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGVycm9yQm9keSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZnVsbE1lc3NhZ2UgPSBgRmFpbGVkIHRvICR7Y29udGV4dH0uIFJlY2VpdmVkIHN0YXR1cyBbJHtyZXNwb25zZS5zdGF0dXN9XTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fS4gTWVzc2FnZTogJHtlcnJvckJvZHl9YDtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHtcbiAgICAgICAgdGhyb3cgbmV3IExhbmdTbWl0aENvbmZsaWN0RXJyb3IoZnVsbE1lc3NhZ2UpO1xuICAgIH1cbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoZnVsbE1lc3NhZ2UpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZXJyLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICB0aHJvdyBlcnI7XG59XG5jb25zdCBFUlJfQ09ORkxJQ1RJTkdfRU5EUE9JTlRTID0gXCJFUlJfQ09ORkxJQ1RJTkdfRU5EUE9JTlRTXCI7XG5leHBvcnQgY2xhc3MgQ29uZmxpY3RpbmdFbmRwb2ludHNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoXCJZb3UgY2Fubm90IHByb3ZpZGUgYm90aCBMQU5HU01JVEhfRU5EUE9JTlQgLyBMQU5HQ0hBSU5fRU5EUE9JTlQgXCIgK1xuICAgICAgICAgICAgXCJhbmQgTEFOR1NNSVRIX1JVTlNfRU5EUE9JTlRTLlwiKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29kZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogRVJSX0NPTkZMSUNUSU5HX0VORFBPSU5UU1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJDb25mbGljdGluZ0VuZHBvaW50c0Vycm9yXCI7IC8vIGhlbHBmdWwgaW4gbG9nc1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbmZsaWN0aW5nRW5kcG9pbnRzRXJyb3IoZXJyKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgZXJyID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIGVyciAhPT0gbnVsbCAmJlxuICAgICAgICBlcnIuY29kZSA9PT0gRVJSX0NPTkZMSUNUSU5HX0VORFBPSU5UUyk7XG59XG4iXSwibmFtZXMiOlsiZ2V0RXJyb3JTdGFja1RyYWNlIiwiZSIsInVuZGVmaW5lZCIsInN0YWNrIiwicHJldkxpbmUiLCJzdGFydHNXaXRoIiwic2xpY2UiLCJsZW5ndGgiLCJwcmludEVycm9yU3RhY2tUcmFjZSIsImNvbnNvbGUiLCJlcnJvciIsIkxhbmdTbWl0aENvbmZsaWN0RXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJuYW1lIiwic3RhdHVzIiwicmFpc2VGb3JTdGF0dXMiLCJyZXNwb25zZSIsImNvbnRleHQiLCJjb25zdW1lT25TdWNjZXNzIiwiZXJyb3JCb2R5Iiwib2siLCJ0ZXh0IiwiZXJyb3JEYXRhIiwianNvbiIsImVycm9yQ29kZSIsImVycm9yV2l0aFN0YXR1cyIsInN0YXR1c1RleHQiLCJmdWxsTWVzc2FnZSIsImVyciIsIkVSUl9DT05GTElDVElOR19FTkRQT0lOVFMiLCJDb25mbGljdGluZ0VuZHBvaW50c0Vycm9yIiwiaXNDb25mbGljdGluZ0VuZHBvaW50c0Vycm9yIiwiY29kZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/fast-safe-stringify/index.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/fast-safe-stringify/index.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   serialize: () => (/* binding */ serialize)\n/* harmony export */ });\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/env.js\");\n/* eslint-disable */ // @ts-nocheck\n\nvar LIMIT_REPLACE_NODE = \"[...]\";\nvar CIRCULAR_REPLACE_NODE = {\n    result: \"[Circular]\"\n};\nvar arr = [];\nvar replacerStack = [];\nconst encoder = new TextEncoder();\nfunction defaultOptions() {\n    return {\n        depthLimit: Number.MAX_SAFE_INTEGER,\n        edgesLimit: Number.MAX_SAFE_INTEGER\n    };\n}\nfunction encodeString(str) {\n    return encoder.encode(str);\n}\n// Shared function to handle well-known types\nfunction serializeWellKnownTypes(val) {\n    if (val && typeof val === \"object\" && val !== null) {\n        if (val instanceof Map) {\n            return Object.fromEntries(val);\n        } else if (val instanceof Set) {\n            return Array.from(val);\n        } else if (val instanceof Date) {\n            return val.toISOString();\n        } else if (val instanceof RegExp) {\n            return val.toString();\n        } else if (val instanceof Error) {\n            return {\n                name: val.name,\n                message: val.message\n            };\n        }\n    } else if (typeof val === \"bigint\") {\n        return val.toString();\n    }\n    return val;\n}\n// Default replacer function to handle well-known types\nfunction createDefaultReplacer(userReplacer) {\n    return function(key, val) {\n        // Apply user replacer first if provided\n        if (userReplacer) {\n            const userResult = userReplacer.call(this, key, val);\n            // If user replacer returned undefined, fall back to our serialization\n            if (userResult !== undefined) {\n                return userResult;\n            }\n        }\n        // Fall back to our well-known type handling\n        return serializeWellKnownTypes(val);\n    };\n}\n// Regular stringify\nfunction serialize(obj, errorContext, replacer, spacer, options) {\n    try {\n        const str = JSON.stringify(obj, createDefaultReplacer(replacer), spacer);\n        return encodeString(str);\n    } catch (e) {\n        // Fall back to more complex stringify if circular reference\n        if (!e.message?.includes(\"Converting circular structure to JSON\")) {\n            console.warn(`[WARNING]: LangSmith received unserializable value.${errorContext ? `\\nContext: ${errorContext}` : \"\"}`);\n            return encodeString(\"[Unserializable]\");\n        }\n        (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getLangSmithEnvironmentVariable)(\"SUPPRESS_CIRCULAR_JSON_WARNINGS\") !== \"true\" && console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${errorContext ? `\\nContext: ${errorContext}` : \"\"}`);\n        if (typeof options === \"undefined\") {\n            options = defaultOptions();\n        }\n        decirc(obj, \"\", 0, [], undefined, 0, options);\n        let res;\n        try {\n            if (replacerStack.length === 0) {\n                res = JSON.stringify(obj, replacer, spacer);\n            } else {\n                res = JSON.stringify(obj, replaceGetterValues(replacer), spacer);\n            }\n        } catch (_) {\n            return encodeString(\"[unable to serialize, circular reference is too complex to analyze]\");\n        } finally{\n            while(arr.length !== 0){\n                const part = arr.pop();\n                if (part.length === 4) {\n                    Object.defineProperty(part[0], part[1], part[3]);\n                } else {\n                    part[0][part[1]] = part[2];\n                }\n            }\n        }\n        return encodeString(res);\n    }\n}\nfunction setReplace(replace, val, k, parent) {\n    var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k);\n    if (propertyDescriptor.get !== undefined) {\n        if (propertyDescriptor.configurable) {\n            Object.defineProperty(parent, k, {\n                value: replace\n            });\n            arr.push([\n                parent,\n                k,\n                val,\n                propertyDescriptor\n            ]);\n        } else {\n            replacerStack.push([\n                val,\n                k,\n                replace\n            ]);\n        }\n    } else {\n        parent[k] = replace;\n        arr.push([\n            parent,\n            k,\n            val\n        ]);\n    }\n}\nfunction decirc(val, k, edgeIndex, stack, parent, depth, options) {\n    depth += 1;\n    var i;\n    if (typeof val === \"object\" && val !== null) {\n        for(i = 0; i < stack.length; i++){\n            if (stack[i] === val) {\n                setReplace(CIRCULAR_REPLACE_NODE, val, k, parent);\n                return;\n            }\n        }\n        if (typeof options.depthLimit !== \"undefined\" && depth > options.depthLimit) {\n            setReplace(LIMIT_REPLACE_NODE, val, k, parent);\n            return;\n        }\n        if (typeof options.edgesLimit !== \"undefined\" && edgeIndex + 1 > options.edgesLimit) {\n            setReplace(LIMIT_REPLACE_NODE, val, k, parent);\n            return;\n        }\n        stack.push(val);\n        // Optimize for Arrays. Big arrays could kill the performance otherwise!\n        if (Array.isArray(val)) {\n            for(i = 0; i < val.length; i++){\n                decirc(val[i], i, i, stack, val, depth, options);\n            }\n        } else {\n            // Handle well-known types before Object.keys iteration\n            val = serializeWellKnownTypes(val);\n            var keys = Object.keys(val);\n            for(i = 0; i < keys.length; i++){\n                var key = keys[i];\n                decirc(val[key], key, i, stack, val, depth, options);\n            }\n        }\n        stack.pop();\n    }\n}\n// Stable-stringify\nfunction compareFunction(a, b) {\n    if (a < b) {\n        return -1;\n    }\n    if (a > b) {\n        return 1;\n    }\n    return 0;\n}\nfunction deterministicStringify(obj, replacer, spacer, options) {\n    if (typeof options === \"undefined\") {\n        options = defaultOptions();\n    }\n    var tmp = deterministicDecirc(obj, \"\", 0, [], undefined, 0, options) || obj;\n    var res;\n    try {\n        if (replacerStack.length === 0) {\n            res = JSON.stringify(tmp, replacer, spacer);\n        } else {\n            res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer);\n        }\n    } catch (_) {\n        return JSON.stringify(\"[unable to serialize, circular reference is too complex to analyze]\");\n    } finally{\n        // Ensure that we restore the object as it was.\n        while(arr.length !== 0){\n            var part = arr.pop();\n            if (part.length === 4) {\n                Object.defineProperty(part[0], part[1], part[3]);\n            } else {\n                part[0][part[1]] = part[2];\n            }\n        }\n    }\n    return res;\n}\nfunction deterministicDecirc(val, k, edgeIndex, stack, parent, depth, options) {\n    depth += 1;\n    var i;\n    if (typeof val === \"object\" && val !== null) {\n        for(i = 0; i < stack.length; i++){\n            if (stack[i] === val) {\n                setReplace(CIRCULAR_REPLACE_NODE, val, k, parent);\n                return;\n            }\n        }\n        try {\n            if (typeof val.toJSON === \"function\") {\n                return;\n            }\n        } catch (_) {\n            return;\n        }\n        if (typeof options.depthLimit !== \"undefined\" && depth > options.depthLimit) {\n            setReplace(LIMIT_REPLACE_NODE, val, k, parent);\n            return;\n        }\n        if (typeof options.edgesLimit !== \"undefined\" && edgeIndex + 1 > options.edgesLimit) {\n            setReplace(LIMIT_REPLACE_NODE, val, k, parent);\n            return;\n        }\n        stack.push(val);\n        // Optimize for Arrays. Big arrays could kill the performance otherwise!\n        if (Array.isArray(val)) {\n            for(i = 0; i < val.length; i++){\n                deterministicDecirc(val[i], i, i, stack, val, depth, options);\n            }\n        } else {\n            // Handle well-known types before Object.keys iteration\n            val = serializeWellKnownTypes(val);\n            // Create a temporary object in the required way\n            var tmp = {};\n            var keys = Object.keys(val).sort(compareFunction);\n            for(i = 0; i < keys.length; i++){\n                var key = keys[i];\n                deterministicDecirc(val[key], key, i, stack, val, depth, options);\n                tmp[key] = val[key];\n            }\n            if (typeof parent !== \"undefined\") {\n                arr.push([\n                    parent,\n                    k,\n                    val\n                ]);\n                parent[k] = tmp;\n            } else {\n                return tmp;\n            }\n        }\n        stack.pop();\n    }\n}\n// wraps replacer function to handle values we couldn't replace\n// and mark them as replaced value\nfunction replaceGetterValues(replacer) {\n    replacer = typeof replacer !== \"undefined\" ? replacer : function(k, v) {\n        return v;\n    };\n    return function(key, val) {\n        if (replacerStack.length > 0) {\n            for(var i = 0; i < replacerStack.length; i++){\n                var part = replacerStack[i];\n                if (part[1] === key && part[0] === val) {\n                    val = part[2];\n                    replacerStack.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        return replacer.call(this, key, val);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9mYXN0LXNhZmUtc3RyaW5naWZ5L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsa0JBQWtCLEdBQ2xCLGNBQWM7QUFDdUQ7QUFDckUsSUFBSUMscUJBQXFCO0FBQ3pCLElBQUlDLHdCQUF3QjtJQUFFQyxRQUFRO0FBQWE7QUFDbkQsSUFBSUMsTUFBTSxFQUFFO0FBQ1osSUFBSUMsZ0JBQWdCLEVBQUU7QUFDdEIsTUFBTUMsVUFBVSxJQUFJQztBQUNwQixTQUFTQztJQUNMLE9BQU87UUFDSEMsWUFBWUMsT0FBT0MsZ0JBQWdCO1FBQ25DQyxZQUFZRixPQUFPQyxnQkFBZ0I7SUFDdkM7QUFDSjtBQUNBLFNBQVNFLGFBQWFDLEdBQUc7SUFDckIsT0FBT1IsUUFBUVMsTUFBTSxDQUFDRDtBQUMxQjtBQUNBLDZDQUE2QztBQUM3QyxTQUFTRSx3QkFBd0JDLEdBQUc7SUFDaEMsSUFBSUEsT0FBTyxPQUFPQSxRQUFRLFlBQVlBLFFBQVEsTUFBTTtRQUNoRCxJQUFJQSxlQUFlQyxLQUFLO1lBQ3BCLE9BQU9DLE9BQU9DLFdBQVcsQ0FBQ0g7UUFDOUIsT0FDSyxJQUFJQSxlQUFlSSxLQUFLO1lBQ3pCLE9BQU9DLE1BQU1DLElBQUksQ0FBQ047UUFDdEIsT0FDSyxJQUFJQSxlQUFlTyxNQUFNO1lBQzFCLE9BQU9QLElBQUlRLFdBQVc7UUFDMUIsT0FDSyxJQUFJUixlQUFlUyxRQUFRO1lBQzVCLE9BQU9ULElBQUlVLFFBQVE7UUFDdkIsT0FDSyxJQUFJVixlQUFlVyxPQUFPO1lBQzNCLE9BQU87Z0JBQ0hDLE1BQU1aLElBQUlZLElBQUk7Z0JBQ2RDLFNBQVNiLElBQUlhLE9BQU87WUFDeEI7UUFDSjtJQUNKLE9BQ0ssSUFBSSxPQUFPYixRQUFRLFVBQVU7UUFDOUIsT0FBT0EsSUFBSVUsUUFBUTtJQUN2QjtJQUNBLE9BQU9WO0FBQ1g7QUFD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O29CQUNwQ0EsTUFBTXFDLElBQUksQ0FBQyxFQUFFO29CQUNiakQsY0FBYzZFLE1BQU0sQ0FBQ1osR0FBRztvQkFDeEI7Z0JBQ0o7WUFDSjtRQUNKO1FBQ0EsT0FBTzlCLFNBQVNMLElBQUksQ0FBQyxJQUFJLEVBQUVGLEtBQUtoQjtJQUNwQztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9kaXN0L3V0aWxzL2Zhc3Qtc2FmZS1zdHJpbmdpZnkvaW5kZXguanM/ZjljOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IGdldExhbmdTbWl0aEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZW52LmpzXCI7XG52YXIgTElNSVRfUkVQTEFDRV9OT0RFID0gXCJbLi4uXVwiO1xudmFyIENJUkNVTEFSX1JFUExBQ0VfTk9ERSA9IHsgcmVzdWx0OiBcIltDaXJjdWxhcl1cIiB9O1xudmFyIGFyciA9IFtdO1xudmFyIHJlcGxhY2VyU3RhY2sgPSBbXTtcbmNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbmZ1bmN0aW9uIGRlZmF1bHRPcHRpb25zKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlcHRoTGltaXQ6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLFxuICAgICAgICBlZGdlc0xpbWl0OiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICB9O1xufVxuZnVuY3Rpb24gZW5jb2RlU3RyaW5nKHN0cikge1xuICAgIHJldHVybiBlbmNvZGVyLmVuY29kZShzdHIpO1xufVxuLy8gU2hhcmVkIGZ1bmN0aW9uIHRvIGhhbmRsZSB3ZWxsLWtub3duIHR5cGVzXG5mdW5jdGlvbiBzZXJpYWxpemVXZWxsS25vd25UeXBlcyh2YWwpIHtcbiAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgdmFsICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXModmFsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbC50b0lTT1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHZhbC5uYW1lLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHZhbC5tZXNzYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgIHJldHVybiB2YWwudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbn1cbi8vIERlZmF1bHQgcmVwbGFjZXIgZnVuY3Rpb24gdG8gaGFuZGxlIHdlbGwta25vd24gdHlwZXNcbmZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRSZXBsYWNlcih1c2VyUmVwbGFjZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gICAgICAgIC8vIEFwcGx5IHVzZXIgcmVwbGFjZXIgZmlyc3QgaWYgcHJvdmlkZWRcbiAgICAgICAgaWYgKHVzZXJSZXBsYWNlcikge1xuICAgICAgICAgICAgY29uc3QgdXNlclJlc3VsdCA9IHVzZXJSZXBsYWNlci5jYWxsKHRoaXMsIGtleSwgdmFsKTtcbiAgICAgICAgICAgIC8vIElmIHVzZXIgcmVwbGFjZXIgcmV0dXJuZWQgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gb3VyIHNlcmlhbGl6YXRpb25cbiAgICAgICAgICAgIGlmICh1c2VyUmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlclJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBGYWxsIGJhY2sgdG8gb3VyIHdlbGwta25vd24gdHlwZSBoYW5kbGluZ1xuICAgICAgICByZXR1cm4gc2VyaWFsaXplV2VsbEtub3duVHlwZXModmFsKTtcbiAgICB9O1xufVxuLy8gUmVndWxhciBzdHJpbmdpZnlcbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemUob2JqLCBlcnJvckNvbnRleHQsIHJlcGxhY2VyLCBzcGFjZXIsIG9wdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmosIGNyZWF0ZURlZmF1bHRSZXBsYWNlcihyZXBsYWNlciksIHNwYWNlcik7XG4gICAgICAgIHJldHVybiBlbmNvZGVTdHJpbmcoc3RyKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gRmFsbCBiYWNrIHRvIG1vcmUgY29tcGxleCBzdHJpbmdpZnkgaWYgY2lyY3VsYXIgcmVmZXJlbmNlXG4gICAgICAgIGlmICghZS5tZXNzYWdlPy5pbmNsdWRlcyhcIkNvbnZlcnRpbmcgY2lyY3VsYXIgc3RydWN0dXJlIHRvIEpTT05cIikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW1dBUk5JTkddOiBMYW5nU21pdGggcmVjZWl2ZWQgdW5zZXJpYWxpemFibGUgdmFsdWUuJHtlcnJvckNvbnRleHQgPyBgXFxuQ29udGV4dDogJHtlcnJvckNvbnRleHR9YCA6IFwiXCJ9YCk7XG4gICAgICAgICAgICByZXR1cm4gZW5jb2RlU3RyaW5nKFwiW1Vuc2VyaWFsaXphYmxlXVwiKTtcbiAgICAgICAgfVxuICAgICAgICBnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlKFwiU1VQUFJFU1NfQ0lSQ1VMQVJfSlNPTl9XQVJOSU5HU1wiKSAhPT1cbiAgICAgICAgICAgIFwidHJ1ZVwiICYmXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtXQVJOSU5HXTogTGFuZ1NtaXRoIHJlY2VpdmVkIGNpcmN1bGFyIEpTT04uIFRoaXMgd2lsbCBkZWNyZWFzZSB0cmFjZXIgcGVyZm9ybWFuY2UuICR7ZXJyb3JDb250ZXh0ID8gYFxcbkNvbnRleHQ6ICR7ZXJyb3JDb250ZXh0fWAgOiBcIlwifWApO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIGRlY2lyYyhvYmosIFwiXCIsIDAsIFtdLCB1bmRlZmluZWQsIDAsIG9wdGlvbnMpO1xuICAgICAgICBsZXQgcmVzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHJlcGxhY2VyU3RhY2subGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gSlNPTi5zdHJpbmdpZnkob2JqLCByZXBsYWNlciwgc3BhY2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcyA9IEpTT04uc3RyaW5naWZ5KG9iaiwgcmVwbGFjZUdldHRlclZhbHVlcyhyZXBsYWNlciksIHNwYWNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVTdHJpbmcoXCJbdW5hYmxlIHRvIHNlcmlhbGl6ZSwgY2lyY3VsYXIgcmVmZXJlbmNlIGlzIHRvbyBjb21wbGV4IHRvIGFuYWx5emVdXCIpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgd2hpbGUgKGFyci5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ID0gYXJyLnBvcCgpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0Lmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocGFydFswXSwgcGFydFsxXSwgcGFydFszXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXJ0WzBdW3BhcnRbMV1dID0gcGFydFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuY29kZVN0cmluZyhyZXMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldFJlcGxhY2UocmVwbGFjZSwgdmFsLCBrLCBwYXJlbnQpIHtcbiAgICB2YXIgcHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwYXJlbnQsIGspO1xuICAgIGlmIChwcm9wZXJ0eURlc2NyaXB0b3IuZ2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHByb3BlcnR5RGVzY3JpcHRvci5jb25maWd1cmFibGUpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwYXJlbnQsIGssIHsgdmFsdWU6IHJlcGxhY2UgfSk7XG4gICAgICAgICAgICBhcnIucHVzaChbcGFyZW50LCBrLCB2YWwsIHByb3BlcnR5RGVzY3JpcHRvcl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVwbGFjZXJTdGFjay5wdXNoKFt2YWwsIGssIHJlcGxhY2VdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcGFyZW50W2tdID0gcmVwbGFjZTtcbiAgICAgICAgYXJyLnB1c2goW3BhcmVudCwgaywgdmFsXSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGVjaXJjKHZhbCwgaywgZWRnZUluZGV4LCBzdGFjaywgcGFyZW50LCBkZXB0aCwgb3B0aW9ucykge1xuICAgIGRlcHRoICs9IDE7XG4gICAgdmFyIGk7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgdmFsICE9PSBudWxsKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHN0YWNrW2ldID09PSB2YWwpIHtcbiAgICAgICAgICAgICAgICBzZXRSZXBsYWNlKENJUkNVTEFSX1JFUExBQ0VfTk9ERSwgdmFsLCBrLCBwYXJlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGVwdGhMaW1pdCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgZGVwdGggPiBvcHRpb25zLmRlcHRoTGltaXQpIHtcbiAgICAgICAgICAgIHNldFJlcGxhY2UoTElNSVRfUkVQTEFDRV9OT0RFLCB2YWwsIGssIHBhcmVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmVkZ2VzTGltaXQgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICAgIGVkZ2VJbmRleCArIDEgPiBvcHRpb25zLmVkZ2VzTGltaXQpIHtcbiAgICAgICAgICAgIHNldFJlcGxhY2UoTElNSVRfUkVQTEFDRV9OT0RFLCB2YWwsIGssIHBhcmVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhY2sucHVzaCh2YWwpO1xuICAgICAgICAvLyBPcHRpbWl6ZSBmb3IgQXJyYXlzLiBCaWcgYXJyYXlzIGNvdWxkIGtpbGwgdGhlIHBlcmZvcm1hbmNlIG90aGVyd2lzZSFcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHZhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGRlY2lyYyh2YWxbaV0sIGksIGksIHN0YWNrLCB2YWwsIGRlcHRoLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSB3ZWxsLWtub3duIHR5cGVzIGJlZm9yZSBPYmplY3Qua2V5cyBpdGVyYXRpb25cbiAgICAgICAgICAgIHZhbCA9IHNlcmlhbGl6ZVdlbGxLbm93blR5cGVzKHZhbCk7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgIGRlY2lyYyh2YWxba2V5XSwga2V5LCBpLCBzdGFjaywgdmFsLCBkZXB0aCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgfVxufVxuLy8gU3RhYmxlLXN0cmluZ2lmeVxuZnVuY3Rpb24gY29tcGFyZUZ1bmN0aW9uKGEsIGIpIHtcbiAgICBpZiAoYSA8IGIpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpZiAoYSA+IGIpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHJldHVybiAwO1xufVxuZnVuY3Rpb24gZGV0ZXJtaW5pc3RpY1N0cmluZ2lmeShvYmosIHJlcGxhY2VyLCBzcGFjZXIsIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zKCk7XG4gICAgfVxuICAgIHZhciB0bXAgPSBkZXRlcm1pbmlzdGljRGVjaXJjKG9iaiwgXCJcIiwgMCwgW10sIHVuZGVmaW5lZCwgMCwgb3B0aW9ucykgfHwgb2JqO1xuICAgIHZhciByZXM7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHJlcGxhY2VyU3RhY2subGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXMgPSBKU09OLnN0cmluZ2lmeSh0bXAsIHJlcGxhY2VyLCBzcGFjZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzID0gSlNPTi5zdHJpbmdpZnkodG1wLCByZXBsYWNlR2V0dGVyVmFsdWVzKHJlcGxhY2VyKSwgc3BhY2VyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoXykge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoXCJbdW5hYmxlIHRvIHNlcmlhbGl6ZSwgY2lyY3VsYXIgcmVmZXJlbmNlIGlzIHRvbyBjb21wbGV4IHRvIGFuYWx5emVdXCIpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgd2UgcmVzdG9yZSB0aGUgb2JqZWN0IGFzIGl0IHdhcy5cbiAgICAgICAgd2hpbGUgKGFyci5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gYXJyLnBvcCgpO1xuICAgICAgICAgICAgaWYgKHBhcnQubGVuZ3RoID09PSA0KSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnRbMF0sIHBhcnRbMV0sIHBhcnRbM10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFydFswXVtwYXJ0WzFdXSA9IHBhcnRbMl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGRldGVybWluaXN0aWNEZWNpcmModmFsLCBrLCBlZGdlSW5kZXgsIHN0YWNrLCBwYXJlbnQsIGRlcHRoLCBvcHRpb25zKSB7XG4gICAgZGVwdGggKz0gMTtcbiAgICB2YXIgaTtcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiB2YWwgIT09IG51bGwpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc3RhY2tbaV0gPT09IHZhbCkge1xuICAgICAgICAgICAgICAgIHNldFJlcGxhY2UoQ0lSQ1VMQVJfUkVQTEFDRV9OT0RFLCB2YWwsIGssIHBhcmVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbC50b0pTT04gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kZXB0aExpbWl0ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICBkZXB0aCA+IG9wdGlvbnMuZGVwdGhMaW1pdCkge1xuICAgICAgICAgICAgc2V0UmVwbGFjZShMSU1JVF9SRVBMQUNFX05PREUsIHZhbCwgaywgcGFyZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZWRnZXNMaW1pdCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgZWRnZUluZGV4ICsgMSA+IG9wdGlvbnMuZWRnZXNMaW1pdCkge1xuICAgICAgICAgICAgc2V0UmVwbGFjZShMSU1JVF9SRVBMQUNFX05PREUsIHZhbCwgaywgcGFyZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdGFjay5wdXNoKHZhbCk7XG4gICAgICAgIC8vIE9wdGltaXplIGZvciBBcnJheXMuIEJpZyBhcnJheXMgY291bGQga2lsbCB0aGUgcGVyZm9ybWFuY2Ugb3RoZXJ3aXNlIVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZGV0ZXJtaW5pc3RpY0RlY2lyYyh2YWxbaV0sIGksIGksIHN0YWNrLCB2YWwsIGRlcHRoLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSB3ZWxsLWtub3duIHR5cGVzIGJlZm9yZSBPYmplY3Qua2V5cyBpdGVyYXRpb25cbiAgICAgICAgICAgIHZhbCA9IHNlcmlhbGl6ZVdlbGxLbm93blR5cGVzKHZhbCk7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSB0ZW1wb3Jhcnkgb2JqZWN0IGluIHRoZSByZXF1aXJlZCB3YXlcbiAgICAgICAgICAgIHZhciB0bXAgPSB7fTtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsKS5zb3J0KGNvbXBhcmVGdW5jdGlvbik7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgIGRldGVybWluaXN0aWNEZWNpcmModmFsW2tleV0sIGtleSwgaSwgc3RhY2ssIHZhbCwgZGVwdGgsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHRtcFtrZXldID0gdmFsW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcmVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKFtwYXJlbnQsIGssIHZhbF0pO1xuICAgICAgICAgICAgICAgIHBhcmVudFtrXSA9IHRtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0bXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgfVxufVxuLy8gd3JhcHMgcmVwbGFjZXIgZnVuY3Rpb24gdG8gaGFuZGxlIHZhbHVlcyB3ZSBjb3VsZG4ndCByZXBsYWNlXG4vLyBhbmQgbWFyayB0aGVtIGFzIHJlcGxhY2VkIHZhbHVlXG5mdW5jdGlvbiByZXBsYWNlR2V0dGVyVmFsdWVzKHJlcGxhY2VyKSB7XG4gICAgcmVwbGFjZXIgPVxuICAgICAgICB0eXBlb2YgcmVwbGFjZXIgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICAgID8gcmVwbGFjZXJcbiAgICAgICAgICAgIDogZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdjtcbiAgICAgICAgICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChrZXksIHZhbCkge1xuICAgICAgICBpZiAocmVwbGFjZXJTdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcGxhY2VyU3RhY2subGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFydCA9IHJlcGxhY2VyU3RhY2tbaV07XG4gICAgICAgICAgICAgICAgaWYgKHBhcnRbMV0gPT09IGtleSAmJiBwYXJ0WzBdID09PSB2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFydFsyXTtcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZXJTdGFjay5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVwbGFjZXIuY2FsbCh0aGlzLCBrZXksIHZhbCk7XG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6WyJnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlIiwiTElNSVRfUkVQTEFDRV9OT0RFIiwiQ0lSQ1VMQVJfUkVQTEFDRV9OT0RFIiwicmVzdWx0IiwiYXJyIiwicmVwbGFjZXJTdGFjayIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsImRlZmF1bHRPcHRpb25zIiwiZGVwdGhMaW1pdCIsIk51bWJlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJlZGdlc0xpbWl0IiwiZW5jb2RlU3RyaW5nIiwic3RyIiwiZW5jb2RlIiwic2VyaWFsaXplV2VsbEtub3duVHlwZXMiLCJ2YWwiLCJNYXAiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsIlNldCIsIkFycmF5IiwiZnJvbSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIlJlZ0V4cCIsInRvU3RyaW5nIiwiRXJyb3IiLCJuYW1lIiwibWVzc2FnZSIsImNyZWF0ZURlZmF1bHRSZXBsYWNlciIsInVzZXJSZXBsYWNlciIsImtleSIsInVzZXJSZXN1bHQiLCJjYWxsIiwidW5kZWZpbmVkIiwic2VyaWFsaXplIiwib2JqIiwiZXJyb3JDb250ZXh0IiwicmVwbGFjZXIiLCJzcGFjZXIiLCJvcHRpb25zIiwiSlNPTiIsInN0cmluZ2lmeSIsImUiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJ3YXJuIiwiZGVjaXJjIiwicmVzIiwibGVuZ3RoIiwicmVwbGFjZUdldHRlclZhbHVlcyIsIl8iLCJwYXJ0IiwicG9wIiwiZGVmaW5lUHJvcGVydHkiLCJzZXRSZXBsYWNlIiwicmVwbGFjZSIsImsiLCJwYXJlbnQiLCJwcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXQiLCJjb25maWd1cmFibGUiLCJ2YWx1ZSIsInB1c2giLCJlZGdlSW5kZXgiLCJzdGFjayIsImRlcHRoIiwiaSIsImlzQXJyYXkiLCJrZXlzIiwiY29tcGFyZUZ1bmN0aW9uIiwiYSIsImIiLCJkZXRlcm1pbmlzdGljU3RyaW5naWZ5IiwidG1wIiwiZGV0ZXJtaW5pc3RpY0RlY2lyYyIsInRvSlNPTiIsInNvcnQiLCJ2Iiwic3BsaWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/fast-safe-stringify/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/is-network-error/index.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/is-network-error/index.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isNetworkError)\n/* harmony export */ });\n/* eslint-disable */ // @ts-nocheck\n// is-network-error vendored to avoid import issues\n// Source: https://github.com/sindresorhus/is-network-error\nconst objectToString = Object.prototype.toString;\nconst isError = (value)=>objectToString.call(value) === \"[object Error]\";\nconst errorMessages = new Set([\n    \"network error\",\n    \"Failed to fetch\",\n    \"NetworkError when attempting to fetch resource.\",\n    \"The Internet connection appears to be offline.\",\n    \"Network request failed\",\n    \"fetch failed\",\n    \"terminated\",\n    \" A network error occurred.\",\n    \"Network connection lost\"\n]);\nfunction isNetworkError(error) {\n    const isValid = error && isError(error) && error.name === \"TypeError\" && typeof error.message === \"string\";\n    if (!isValid) {\n        return false;\n    }\n    const { message, stack } = error;\n    // Safari 17+ has generic message but no stack for network errors\n    if (message === \"Load failed\") {\n        return stack === undefined || // Sentry adds its own stack trace to the fetch error, so also check for that\n        \"__sentry_captured__\" in error;\n    }\n    // Deno network errors start with specific text\n    if (message.startsWith(\"error sending request for url\")) {\n        return true;\n    }\n    // Standard network error messages\n    return errorMessages.has(message);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9pcy1uZXR3b3JrLWVycm9yL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxrQkFBa0IsR0FDbEIsY0FBYztBQUNkLG1EQUFtRDtBQUNuRCwyREFBMkQ7QUFDM0QsTUFBTUEsaUJBQWlCQyxPQUFPQyxTQUFTLENBQUNDLFFBQVE7QUFDaEQsTUFBTUMsVUFBVSxDQUFDQyxRQUFVTCxlQUFlTSxJQUFJLENBQUNELFdBQVc7QUFDMUQsTUFBTUUsZ0JBQWdCLElBQUlDLElBQUk7SUFDMUI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDYyxTQUFTQyxlQUFlQyxLQUFLO0lBQ3hDLE1BQU1DLFVBQVVELFNBQ1pOLFFBQVFNLFVBQ1JBLE1BQU1FLElBQUksS0FBSyxlQUNmLE9BQU9GLE1BQU1HLE9BQU8sS0FBSztJQUM3QixJQUFJLENBQUNGLFNBQVM7UUFDVixPQUFPO0lBQ1g7SUFDQSxNQUFNLEVBQUVFLE9BQU8sRUFBRUMsS0FBSyxFQUFFLEdBQUdKO0lBQzNCLGlFQUFpRTtJQUNqRSxJQUFJRyxZQUFZLGVBQWU7UUFDM0IsT0FBUUMsVUFBVUMsYUFDZCw2RUFBNkU7UUFDN0UseUJBQXlCTDtJQUNqQztJQUNBLCtDQUErQztJQUMvQyxJQUFJRyxRQUFRRyxVQUFVLENBQUMsa0NBQWtDO1FBQ3JELE9BQU87SUFDWDtJQUNBLGtDQUFrQztJQUNsQyxPQUFPVCxjQUFjVSxHQUFHLENBQUNKO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9kaXN0L3V0aWxzL2lzLW5ldHdvcmstZXJyb3IvaW5kZXguanM/YmQzYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLy8gQHRzLW5vY2hlY2tcbi8vIGlzLW5ldHdvcmstZXJyb3IgdmVuZG9yZWQgdG8gYXZvaWQgaW1wb3J0IGlzc3Vlc1xuLy8gU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL2lzLW5ldHdvcmstZXJyb3JcbmNvbnN0IG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmNvbnN0IGlzRXJyb3IgPSAodmFsdWUpID0+IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBcIltvYmplY3QgRXJyb3JdXCI7XG5jb25zdCBlcnJvck1lc3NhZ2VzID0gbmV3IFNldChbXG4gICAgXCJuZXR3b3JrIGVycm9yXCIsIC8vIENocm9tZVxuICAgIFwiRmFpbGVkIHRvIGZldGNoXCIsIC8vIENocm9tZVxuICAgIFwiTmV0d29ya0Vycm9yIHdoZW4gYXR0ZW1wdGluZyB0byBmZXRjaCByZXNvdXJjZS5cIiwgLy8gRmlyZWZveFxuICAgIFwiVGhlIEludGVybmV0IGNvbm5lY3Rpb24gYXBwZWFycyB0byBiZSBvZmZsaW5lLlwiLCAvLyBTYWZhcmkgMTZcbiAgICBcIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWRcIiwgLy8gYGNyb3NzLWZldGNoYFxuICAgIFwiZmV0Y2ggZmFpbGVkXCIsIC8vIFVuZGljaSAoTm9kZS5qcylcbiAgICBcInRlcm1pbmF0ZWRcIiwgLy8gVW5kaWNpIChOb2RlLmpzKVxuICAgIFwiIEEgbmV0d29yayBlcnJvciBvY2N1cnJlZC5cIiwgLy8gQnVuIChXZWJLaXQpXG4gICAgXCJOZXR3b3JrIGNvbm5lY3Rpb24gbG9zdFwiLCAvLyBDbG91ZGZsYXJlIFdvcmtlcnMgKGZldGNoKVxuXSk7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc05ldHdvcmtFcnJvcihlcnJvcikge1xuICAgIGNvbnN0IGlzVmFsaWQgPSBlcnJvciAmJlxuICAgICAgICBpc0Vycm9yKGVycm9yKSAmJlxuICAgICAgICBlcnJvci5uYW1lID09PSBcIlR5cGVFcnJvclwiICYmXG4gICAgICAgIHR5cGVvZiBlcnJvci5tZXNzYWdlID09PSBcInN0cmluZ1wiO1xuICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHsgbWVzc2FnZSwgc3RhY2sgfSA9IGVycm9yO1xuICAgIC8vIFNhZmFyaSAxNysgaGFzIGdlbmVyaWMgbWVzc2FnZSBidXQgbm8gc3RhY2sgZm9yIG5ldHdvcmsgZXJyb3JzXG4gICAgaWYgKG1lc3NhZ2UgPT09IFwiTG9hZCBmYWlsZWRcIikge1xuICAgICAgICByZXR1cm4gKHN0YWNrID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIC8vIFNlbnRyeSBhZGRzIGl0cyBvd24gc3RhY2sgdHJhY2UgdG8gdGhlIGZldGNoIGVycm9yLCBzbyBhbHNvIGNoZWNrIGZvciB0aGF0XG4gICAgICAgICAgICBcIl9fc2VudHJ5X2NhcHR1cmVkX19cIiBpbiBlcnJvcik7XG4gICAgfVxuICAgIC8vIERlbm8gbmV0d29yayBlcnJvcnMgc3RhcnQgd2l0aCBzcGVjaWZpYyB0ZXh0XG4gICAgaWYgKG1lc3NhZ2Uuc3RhcnRzV2l0aChcImVycm9yIHNlbmRpbmcgcmVxdWVzdCBmb3IgdXJsXCIpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBTdGFuZGFyZCBuZXR3b3JrIGVycm9yIG1lc3NhZ2VzXG4gICAgcmV0dXJuIGVycm9yTWVzc2FnZXMuaGFzKG1lc3NhZ2UpO1xufVxuIl0sIm5hbWVzIjpbIm9iamVjdFRvU3RyaW5nIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJpc0Vycm9yIiwidmFsdWUiLCJjYWxsIiwiZXJyb3JNZXNzYWdlcyIsIlNldCIsImlzTmV0d29ya0Vycm9yIiwiZXJyb3IiLCJpc1ZhbGlkIiwibmFtZSIsIm1lc3NhZ2UiLCJzdGFjayIsInVuZGVmaW5lZCIsInN0YXJ0c1dpdGgiLCJoYXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/is-network-error/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/messages.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/messages.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertLangChainMessageToExample: () => (/* binding */ convertLangChainMessageToExample),\n/* harmony export */   isLangChainMessage: () => (/* binding */ isLangChainMessage)\n/* harmony export */ });\nfunction isLangChainMessage(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nmessage) {\n    return typeof message?._getType === \"function\";\n}\nfunction convertLangChainMessageToExample(message) {\n    const converted = {\n        type: message._getType(),\n        data: {\n            content: message.content\n        }\n    };\n    // Check for presence of keys in additional_kwargs\n    if (message?.additional_kwargs && Object.keys(message.additional_kwargs).length > 0) {\n        converted.data.additional_kwargs = {\n            ...message.additional_kwargs\n        };\n    }\n    return converted;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9tZXNzYWdlcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLFNBQVNBLG1CQUNoQiw4REFBOEQ7QUFDOURDLE9BQU87SUFDSCxPQUFPLE9BQU9BLFNBQVNDLGFBQWE7QUFDeEM7QUFDTyxTQUFTQyxpQ0FBaUNGLE9BQU87SUFDcEQsTUFBTUcsWUFBWTtRQUNkQyxNQUFNSixRQUFRQyxRQUFRO1FBQ3RCSSxNQUFNO1lBQUVDLFNBQVNOLFFBQVFNLE9BQU87UUFBQztJQUNyQztJQUNBLGtEQUFrRDtJQUNsRCxJQUFJTixTQUFTTyxxQkFDVEMsT0FBT0MsSUFBSSxDQUFDVCxRQUFRTyxpQkFBaUIsRUFBRUcsTUFBTSxHQUFHLEdBQUc7UUFDbkRQLFVBQVVFLElBQUksQ0FBQ0UsaUJBQWlCLEdBQUc7WUFBRSxHQUFHUCxRQUFRTyxpQkFBaUI7UUFBQztJQUN0RTtJQUNBLE9BQU9KO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9ub2RlX21vZHVsZXMvbGFuZ3NtaXRoL2Rpc3QvdXRpbHMvbWVzc2FnZXMuanM/NGMwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gaXNMYW5nQ2hhaW5NZXNzYWdlKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbm1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1lc3NhZ2U/Ll9nZXRUeXBlID09PSBcImZ1bmN0aW9uXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gY29udmVydExhbmdDaGFpbk1lc3NhZ2VUb0V4YW1wbGUobWVzc2FnZSkge1xuICAgIGNvbnN0IGNvbnZlcnRlZCA9IHtcbiAgICAgICAgdHlwZTogbWVzc2FnZS5fZ2V0VHlwZSgpLFxuICAgICAgICBkYXRhOiB7IGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCB9LFxuICAgIH07XG4gICAgLy8gQ2hlY2sgZm9yIHByZXNlbmNlIG9mIGtleXMgaW4gYWRkaXRpb25hbF9rd2FyZ3NcbiAgICBpZiAobWVzc2FnZT8uYWRkaXRpb25hbF9rd2FyZ3MgJiZcbiAgICAgICAgT2JqZWN0LmtleXMobWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncykubGVuZ3RoID4gMCkge1xuICAgICAgICBjb252ZXJ0ZWQuZGF0YS5hZGRpdGlvbmFsX2t3YXJncyA9IHsgLi4ubWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncyB9O1xuICAgIH1cbiAgICByZXR1cm4gY29udmVydGVkO1xufVxuIl0sIm5hbWVzIjpbImlzTGFuZ0NoYWluTWVzc2FnZSIsIm1lc3NhZ2UiLCJfZ2V0VHlwZSIsImNvbnZlcnRMYW5nQ2hhaW5NZXNzYWdlVG9FeGFtcGxlIiwiY29udmVydGVkIiwidHlwZSIsImRhdGEiLCJjb250ZW50IiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/messages.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/p-retry/index.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/p-retry/index.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbortError: () => (/* binding */ AbortError),\n/* harmony export */   \"default\": () => (/* binding */ pRetry),\n/* harmony export */   makeRetriable: () => (/* binding */ makeRetriable)\n/* harmony export */ });\n/* harmony import */ var _is_network_error_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../is-network-error/index.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/is-network-error/index.js\");\n/* eslint-disable */ // @ts-nocheck\n// p-retry code vendored to avoid import issues\n// Source: https://github.com/sindresorhus/p-retry\n\nfunction validateRetries(retries) {\n    if (typeof retries === \"number\") {\n        if (retries < 0) {\n            throw new TypeError(\"Expected `retries` to be a non-negative number.\");\n        }\n        if (Number.isNaN(retries)) {\n            throw new TypeError(\"Expected `retries` to be a valid number or Infinity, got NaN.\");\n        }\n    } else if (retries !== undefined) {\n        throw new TypeError(\"Expected `retries` to be a number or Infinity.\");\n    }\n}\nfunction validateNumberOption(name, value, { min = 0, allowInfinity = false } = {}) {\n    if (value === undefined) {\n        return;\n    }\n    if (typeof value !== \"number\" || Number.isNaN(value)) {\n        throw new TypeError(`Expected \\`${name}\\` to be a number${allowInfinity ? \" or Infinity\" : \"\"}.`);\n    }\n    if (!allowInfinity && !Number.isFinite(value)) {\n        throw new TypeError(`Expected \\`${name}\\` to be a finite number.`);\n    }\n    if (value < min) {\n        throw new TypeError(`Expected \\`${name}\\` to be \\u2265 ${min}.`);\n    }\n}\nclass AbortError extends Error {\n    constructor(message){\n        super();\n        if (message instanceof Error) {\n            this.originalError = message;\n            ({ message } = message);\n        } else {\n            this.originalError = new Error(message);\n            this.originalError.stack = this.stack;\n        }\n        this.name = \"AbortError\";\n        this.message = message;\n    }\n}\nfunction calculateDelay(retriesConsumed, options) {\n    const attempt = Math.max(1, retriesConsumed + 1);\n    const random = options.randomize ? Math.random() + 1 : 1;\n    let timeout = Math.round(random * options.minTimeout * options.factor ** (attempt - 1));\n    timeout = Math.min(timeout, options.maxTimeout);\n    return timeout;\n}\nfunction calculateRemainingTime(start, max) {\n    if (!Number.isFinite(max)) {\n        return max;\n    }\n    return max - (performance.now() - start);\n}\nasync function onAttemptFailure({ error, attemptNumber, retriesConsumed, startTime, options }) {\n    const normalizedError = error instanceof Error ? error : new TypeError(`Non-error was thrown: \"${error}\". You should only throw errors.`);\n    if (normalizedError instanceof AbortError) {\n        throw normalizedError.originalError;\n    }\n    const retriesLeft = Number.isFinite(options.retries) ? Math.max(0, options.retries - retriesConsumed) : options.retries;\n    const maxRetryTime = options.maxRetryTime ?? Number.POSITIVE_INFINITY;\n    const context = Object.freeze({\n        error: normalizedError,\n        attemptNumber,\n        retriesLeft,\n        retriesConsumed\n    });\n    await options.onFailedAttempt(context);\n    if (calculateRemainingTime(startTime, maxRetryTime) <= 0) {\n        throw normalizedError;\n    }\n    const consumeRetry = await options.shouldConsumeRetry(context);\n    const remainingTime = calculateRemainingTime(startTime, maxRetryTime);\n    if (remainingTime <= 0 || retriesLeft <= 0) {\n        throw normalizedError;\n    }\n    if (normalizedError instanceof TypeError && !(0,_is_network_error_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(normalizedError)) {\n        if (consumeRetry) {\n            throw normalizedError;\n        }\n        options.signal?.throwIfAborted();\n        return false;\n    }\n    if (!await options.shouldRetry(context)) {\n        throw normalizedError;\n    }\n    if (!consumeRetry) {\n        options.signal?.throwIfAborted();\n        return false;\n    }\n    const delayTime = calculateDelay(retriesConsumed, options);\n    const finalDelay = Math.min(delayTime, remainingTime);\n    if (finalDelay > 0) {\n        await new Promise((resolve, reject)=>{\n            const onAbort = ()=>{\n                clearTimeout(timeoutToken);\n                options.signal?.removeEventListener(\"abort\", onAbort);\n                reject(options.signal.reason);\n            };\n            const timeoutToken = setTimeout(()=>{\n                options.signal?.removeEventListener(\"abort\", onAbort);\n                resolve();\n            }, finalDelay);\n            if (options.unref) {\n                timeoutToken.unref?.();\n            }\n            options.signal?.addEventListener(\"abort\", onAbort, {\n                once: true\n            });\n        });\n    }\n    options.signal?.throwIfAborted();\n    return true;\n}\nasync function pRetry(input, options = {}) {\n    options = {\n        ...options\n    };\n    validateRetries(options.retries);\n    if (Object.hasOwn(options, \"forever\")) {\n        throw new Error(\"The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.\");\n    }\n    options.retries ??= 10;\n    options.factor ??= 2;\n    options.minTimeout ??= 1000;\n    options.maxTimeout ??= Number.POSITIVE_INFINITY;\n    options.maxRetryTime ??= Number.POSITIVE_INFINITY;\n    options.randomize ??= false;\n    options.onFailedAttempt ??= ()=>{};\n    options.shouldRetry ??= ()=>true;\n    options.shouldConsumeRetry ??= ()=>true;\n    // Validate numeric options and normalize edge cases\n    validateNumberOption(\"factor\", options.factor, {\n        min: 0,\n        allowInfinity: false\n    });\n    validateNumberOption(\"minTimeout\", options.minTimeout, {\n        min: 0,\n        allowInfinity: false\n    });\n    validateNumberOption(\"maxTimeout\", options.maxTimeout, {\n        min: 0,\n        allowInfinity: true\n    });\n    validateNumberOption(\"maxRetryTime\", options.maxRetryTime, {\n        min: 0,\n        allowInfinity: true\n    });\n    // Treat non-positive factor as 1 to avoid zero backoff or negative behavior\n    if (!(options.factor > 0)) {\n        options.factor = 1;\n    }\n    options.signal?.throwIfAborted();\n    let attemptNumber = 0;\n    let retriesConsumed = 0;\n    const startTime = performance.now();\n    while(Number.isFinite(options.retries) ? retriesConsumed <= options.retries : true){\n        attemptNumber++;\n        try {\n            options.signal?.throwIfAborted();\n            const result = await input(attemptNumber);\n            options.signal?.throwIfAborted();\n            return result;\n        } catch (error) {\n            if (await onAttemptFailure({\n                error,\n                attemptNumber,\n                retriesConsumed,\n                startTime,\n                options\n            })) {\n                retriesConsumed++;\n            }\n        }\n    }\n    // Should not reach here, but in case it does, throw an error\n    throw new Error(\"Retry attempts exhausted without throwing an error.\");\n}\nfunction makeRetriable(function_, options) {\n    return function(...arguments_) {\n        return pRetry(()=>function_.apply(this, arguments_), options);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9wLXJldHJ5L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxrQkFBa0IsR0FDbEIsY0FBYztBQUNkLCtDQUErQztBQUMvQyxrREFBa0Q7QUFDUTtBQUMxRCxTQUFTQyxnQkFBZ0JDLE9BQU87SUFDNUIsSUFBSSxPQUFPQSxZQUFZLFVBQVU7UUFDN0IsSUFBSUEsVUFBVSxHQUFHO1lBQ2IsTUFBTSxJQUFJQyxVQUFVO1FBQ3hCO1FBQ0EsSUFBSUMsT0FBT0MsS0FBSyxDQUFDSCxVQUFVO1lBQ3ZCLE1BQU0sSUFBSUMsVUFBVTtRQUN4QjtJQUNKLE9BQ0ssSUFBSUQsWUFBWUksV0FBVztRQUM1QixNQUFNLElBQUlILFVBQVU7SUFDeEI7QUFDSjtBQUNBLFNBQVNJLHFCQUFxQkMsSUFBSSxFQUFFQyxLQUFLLEVBQUUsRUFBRUMsTUFBTSxDQUFDLEVBQUVDLGdCQUFnQixLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDOUUsSUFBSUYsVUFBVUgsV0FBVztRQUNyQjtJQUNKO0lBQ0EsSUFBSSxPQUFPRyxVQUFVLFlBQVlMLE9BQU9DLEtBQUssQ0FBQ0ksUUFBUTtRQUNsRCxNQUFNLElBQUlOLFVBQVUsQ0FBQyxXQUFXLEVBQUVLLEtBQUssaUJBQWlCLEVBQUVHLGdCQUFnQixpQkFBaUIsR0FBRyxDQUFDLENBQUM7SUFDcEc7SUFDQSxJQUFJLENBQUNBLGlCQUFpQixDQUFDUCxPQUFPUSxRQUFRLENBQUNILFFBQVE7UUFDM0MsTUFBTSxJQUFJTixVQUFVLENBQUMsV0FBVyxFQUFFSyxLQUFLLHlCQUF5QixDQUFDO0lBQ3JFO0lBQ0EsSUFBSUMsUUFBUUMsS0FBSztRQUNiLE1BQU0sSUFBSVAsVUFBVSxDQUFDLFdBQVcsRUFBRUssS0FBSyxnQkFBZ0IsRUFBRUUsSUFBSSxDQUFDLENBQUM7SUFDbkU7QUFDSjtBQUNPLE1BQU1HLG1C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L25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9wLXJldHJ5L2luZGV4LmpzP2Y4ZDIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgKi9cbi8vIEB0cy1ub2NoZWNrXG4vLyBwLXJldHJ5IGNvZGUgdmVuZG9yZWQgdG8gYXZvaWQgaW1wb3J0IGlzc3Vlc1xuLy8gU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL3AtcmV0cnlcbmltcG9ydCBpc05ldHdvcmtFcnJvciBmcm9tIFwiLi4vaXMtbmV0d29yay1lcnJvci9pbmRleC5qc1wiO1xuZnVuY3Rpb24gdmFsaWRhdGVSZXRyaWVzKHJldHJpZXMpIHtcbiAgICBpZiAodHlwZW9mIHJldHJpZXMgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgaWYgKHJldHJpZXMgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgYHJldHJpZXNgIHRvIGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc05hTihyZXRyaWVzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIGByZXRyaWVzYCB0byBiZSBhIHZhbGlkIG51bWJlciBvciBJbmZpbml0eSwgZ290IE5hTi5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocmV0cmllcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBgcmV0cmllc2AgdG8gYmUgYSBudW1iZXIgb3IgSW5maW5pdHkuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlTnVtYmVyT3B0aW9uKG5hbWUsIHZhbHVlLCB7IG1pbiA9IDAsIGFsbG93SW5maW5pdHkgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwibnVtYmVyXCIgfHwgTnVtYmVyLmlzTmFOKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcXGAke25hbWV9XFxgIHRvIGJlIGEgbnVtYmVyJHthbGxvd0luZmluaXR5ID8gXCIgb3IgSW5maW5pdHlcIiA6IFwiXCJ9LmApO1xuICAgIH1cbiAgICBpZiAoIWFsbG93SW5maW5pdHkgJiYgIU51bWJlci5pc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgXFxgJHtuYW1lfVxcYCB0byBiZSBhIGZpbml0ZSBudW1iZXIuYCk7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA8IG1pbikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcXGAke25hbWV9XFxgIHRvIGJlIFxcdTIyNjUgJHttaW59LmApO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBYm9ydEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbEVycm9yID0gbWVzc2FnZTtcbiAgICAgICAgICAgICh7IG1lc3NhZ2UgfSA9IG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbEVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbEVycm9yLnN0YWNrID0gdGhpcy5zdGFjaztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBcIkFib3J0RXJyb3JcIjtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG59XG5mdW5jdGlvbiBjYWxjdWxhdGVEZWxheShyZXRyaWVzQ29uc3VtZWQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBhdHRlbXB0ID0gTWF0aC5tYXgoMSwgcmV0cmllc0NvbnN1bWVkICsgMSk7XG4gICAgY29uc3QgcmFuZG9tID0gb3B0aW9ucy5yYW5kb21pemUgPyBNYXRoLnJhbmRvbSgpICsgMSA6IDE7XG4gICAgbGV0IHRpbWVvdXQgPSBNYXRoLnJvdW5kKHJhbmRvbSAqIG9wdGlvbnMubWluVGltZW91dCAqIG9wdGlvbnMuZmFjdG9yICoqIChhdHRlbXB0IC0gMSkpO1xuICAgIHRpbWVvdXQgPSBNYXRoLm1pbih0aW1lb3V0LCBvcHRpb25zLm1heFRpbWVvdXQpO1xuICAgIHJldHVybiB0aW1lb3V0O1xufVxuZnVuY3Rpb24gY2FsY3VsYXRlUmVtYWluaW5nVGltZShzdGFydCwgbWF4KSB7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobWF4KSkge1xuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbiAgICByZXR1cm4gbWF4IC0gKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQpO1xufVxuYXN5bmMgZnVuY3Rpb24gb25BdHRlbXB0RmFpbHVyZSh7IGVycm9yLCBhdHRlbXB0TnVtYmVyLCByZXRyaWVzQ29uc3VtZWQsIHN0YXJ0VGltZSwgb3B0aW9ucywgfSkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3JcbiAgICAgICAgPyBlcnJvclxuICAgICAgICA6IG5ldyBUeXBlRXJyb3IoYE5vbi1lcnJvciB3YXMgdGhyb3duOiBcIiR7ZXJyb3J9XCIuIFlvdSBzaG91bGQgb25seSB0aHJvdyBlcnJvcnMuYCk7XG4gICAgaWYgKG5vcm1hbGl6ZWRFcnJvciBpbnN0YW5jZW9mIEFib3J0RXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbm9ybWFsaXplZEVycm9yLm9yaWdpbmFsRXJyb3I7XG4gICAgfVxuICAgIGNvbnN0IHJldHJpZXNMZWZ0ID0gTnVtYmVyLmlzRmluaXRlKG9wdGlvbnMucmV0cmllcylcbiAgICAgICAgPyBNYXRoLm1heCgwLCBvcHRpb25zLnJldHJpZXMgLSByZXRyaWVzQ29uc3VtZWQpXG4gICAgICAgIDogb3B0aW9ucy5yZXRyaWVzO1xuICAgIGNvbnN0IG1heFJldHJ5VGltZSA9IG9wdGlvbnMubWF4UmV0cnlUaW1lID8/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICBjb25zdCBjb250ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIGVycm9yOiBub3JtYWxpemVkRXJyb3IsXG4gICAgICAgIGF0dGVtcHROdW1iZXIsXG4gICAgICAgIHJldHJpZXNMZWZ0LFxuICAgICAgICByZXRyaWVzQ29uc3VtZWQsXG4gICAgfSk7XG4gICAgYXdhaXQgb3B0aW9ucy5vbkZhaWxlZEF0dGVtcHQoY29udGV4dCk7XG4gICAgaWYgKGNhbGN1bGF0ZVJlbWFpbmluZ1RpbWUoc3RhcnRUaW1lLCBtYXhSZXRyeVRpbWUpIDw9IDApIHtcbiAgICAgICAgdGhyb3cgbm9ybWFsaXplZEVycm9yO1xuICAgIH1cbiAgICBjb25zdCBjb25zdW1lUmV0cnkgPSBhd2FpdCBvcHRpb25zLnNob3VsZENvbnN1bWVSZXRyeShjb250ZXh0KTtcbiAgICBjb25zdCByZW1haW5pbmdUaW1lID0gY2FsY3VsYXRlUmVtYWluaW5nVGltZShzdGFydFRpbWUsIG1heFJldHJ5VGltZSk7XG4gICAgaWYgKHJlbWFpbmluZ1RpbWUgPD0gMCB8fCByZXRyaWVzTGVmdCA8PSAwKSB7XG4gICAgICAgIHRocm93IG5vcm1hbGl6ZWRFcnJvcjtcbiAgICB9XG4gICAgaWYgKG5vcm1hbGl6ZWRFcnJvciBpbnN0YW5jZW9mIFR5cGVFcnJvciAmJlxuICAgICAgICAhaXNOZXR3b3JrRXJyb3Iobm9ybWFsaXplZEVycm9yKSkge1xuICAgICAgICBpZiAoY29uc3VtZVJldHJ5KSB7XG4gICAgICAgICAgICB0aHJvdyBub3JtYWxpemVkRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCEoYXdhaXQgb3B0aW9ucy5zaG91bGRSZXRyeShjb250ZXh0KSkpIHtcbiAgICAgICAgdGhyb3cgbm9ybWFsaXplZEVycm9yO1xuICAgIH1cbiAgICBpZiAoIWNvbnN1bWVSZXRyeSkge1xuICAgICAgICBvcHRpb25zLnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBkZWxheVRpbWUgPSBjYWxjdWxhdGVEZWxheShyZXRyaWVzQ29uc3VtZWQsIG9wdGlvbnMpO1xuICAgIGNvbnN0IGZpbmFsRGVsYXkgPSBNYXRoLm1pbihkZWxheVRpbWUsIHJlbWFpbmluZ1RpbWUpO1xuICAgIGlmIChmaW5hbERlbGF5ID4gMCkge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvbkFib3J0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0VG9rZW4pO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsPy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCk7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG9wdGlvbnMuc2lnbmFsLnJlYXNvbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgdGltZW91dFRva2VuID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5zaWduYWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBvbkFib3J0KTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCBmaW5hbERlbGF5KTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVucmVmKSB7XG4gICAgICAgICAgICAgICAgdGltZW91dFRva2VuLnVucmVmPy4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsPy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgb3B0aW9ucy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBwUmV0cnkoaW5wdXQsIG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICB2YWxpZGF0ZVJldHJpZXMob3B0aW9ucy5yZXRyaWVzKTtcbiAgICBpZiAoT2JqZWN0Lmhhc093bihvcHRpb25zLCBcImZvcmV2ZXJcIikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGBmb3JldmVyYCBvcHRpb24gaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gRm9yIG1hbnkgdXNlLWNhc2VzLCB5b3UgY2FuIHNldCBgcmV0cmllczogSW5maW5pdHlgIGluc3RlYWQuXCIpO1xuICAgIH1cbiAgICBvcHRpb25zLnJldHJpZXMgPz89IDEwO1xuICAgIG9wdGlvbnMuZmFjdG9yID8/PSAyO1xuICAgIG9wdGlvbnMubWluVGltZW91dCA/Pz0gMTAwMDtcbiAgICBvcHRpb25zLm1heFRpbWVvdXQgPz89IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICBvcHRpb25zLm1heFJldHJ5VGltZSA/Pz0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgIG9wdGlvbnMucmFuZG9taXplID8/PSBmYWxzZTtcbiAgICBvcHRpb25zLm9uRmFpbGVkQXR0ZW1wdCA/Pz0gKCkgPT4geyB9O1xuICAgIG9wdGlvbnMuc2hvdWxkUmV0cnkgPz89ICgpID0+IHRydWU7XG4gICAgb3B0aW9ucy5zaG91bGRDb25zdW1lUmV0cnkgPz89ICgpID0+IHRydWU7XG4gICAgLy8gVmFsaWRhdGUgbnVtZXJpYyBvcHRpb25zIGFuZCBub3JtYWxpemUgZWRnZSBjYXNlc1xuICAgIHZhbGlkYXRlTnVtYmVyT3B0aW9uKFwiZmFjdG9yXCIsIG9wdGlvbnMuZmFjdG9yLCB7XG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgYWxsb3dJbmZpbml0eTogZmFsc2UsXG4gICAgfSk7XG4gICAgdmFsaWRhdGVOdW1iZXJPcHRpb24oXCJtaW5UaW1lb3V0XCIsIG9wdGlvbnMubWluVGltZW91dCwge1xuICAgICAgICBtaW46IDAsXG4gICAgICAgIGFsbG93SW5maW5pdHk6IGZhbHNlLFxuICAgIH0pO1xuICAgIHZhbGlkYXRlTnVtYmVyT3B0aW9uKFwibWF4VGltZW91dFwiLCBvcHRpb25zLm1heFRpbWVvdXQsIHtcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBhbGxvd0luZmluaXR5OiB0cnVlLFxuICAgIH0pO1xuICAgIHZhbGlkYXRlTnVtYmVyT3B0aW9uKFwibWF4UmV0cnlUaW1lXCIsIG9wdGlvbnMubWF4UmV0cnlUaW1lLCB7XG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgYWxsb3dJbmZpbml0eTogdHJ1ZSxcbiAgICB9KTtcbiAgICAvLyBUcmVhdCBub24tcG9zaXRpdmUgZmFjdG9yIGFzIDEgdG8gYXZvaWQgemVybyBiYWNrb2ZmIG9yIG5lZ2F0aXZlIGJlaGF2aW9yXG4gICAgaWYgKCEob3B0aW9ucy5mYWN0b3IgPiAwKSkge1xuICAgICAgICBvcHRpb25zLmZhY3RvciA9IDE7XG4gICAgfVxuICAgIG9wdGlvbnMuc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgIGxldCBhdHRlbXB0TnVtYmVyID0gMDtcbiAgICBsZXQgcmV0cmllc0NvbnN1bWVkID0gMDtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB3aGlsZSAoTnVtYmVyLmlzRmluaXRlKG9wdGlvbnMucmV0cmllcykgPyByZXRyaWVzQ29uc3VtZWQgPD0gb3B0aW9ucy5yZXRyaWVzIDogdHJ1ZSkge1xuICAgICAgICBhdHRlbXB0TnVtYmVyKys7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvcHRpb25zLnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGlucHV0KGF0dGVtcHROdW1iZXIpO1xuICAgICAgICAgICAgb3B0aW9ucy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGF3YWl0IG9uQXR0ZW1wdEZhaWx1cmUoe1xuICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIGF0dGVtcHROdW1iZXIsXG4gICAgICAgICAgICAgICAgcmV0cmllc0NvbnN1bWVkLFxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICByZXRyaWVzQ29uc3VtZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTaG91bGQgbm90IHJlYWNoIGhlcmUsIGJ1dCBpbiBjYXNlIGl0IGRvZXMsIHRocm93IGFuIGVycm9yXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUmV0cnkgYXR0ZW1wdHMgZXhoYXVzdGVkIHdpdGhvdXQgdGhyb3dpbmcgYW4gZXJyb3IuXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZXRyaWFibGUoZnVuY3Rpb25fLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmd1bWVudHNfKSB7XG4gICAgICAgIHJldHVybiBwUmV0cnkoKCkgPT4gZnVuY3Rpb25fLmFwcGx5KHRoaXMsIGFyZ3VtZW50c18pLCBvcHRpb25zKTtcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbImlzTmV0d29ya0Vycm9yIiwidmFsaWRhdGVSZXRyaWVzIiwicmV0cmllcyIsIlR5cGVFcnJvciIsIk51bWJlciIsImlzTmFOIiwidW5kZWZpbmVkIiwidmFsaWRhdGVOdW1iZXJPcHRpb24iLCJuYW1lIiwidmFsdWUiLCJtaW4iLCJhbGxvd0luZmluaXR5IiwiaXNGaW5pdGUiLCJBYm9ydEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJvcmlnaW5hbEVycm9yIiwic3RhY2siLCJjYWxjdWxhdGVEZWxheSIsInJldHJpZXNDb25zdW1lZCIsIm9wdGlvbnMiLCJhdHRlbXB0IiwiTWF0aCIsIm1heCIsInJhbmRvbSIsInJhbmRvbWl6ZSIsInRpbWVvdXQiLCJyb3VuZCIsIm1pblRpbWVvdXQiLCJmYWN0b3IiLCJtYXhUaW1lb3V0IiwiY2FsY3VsYXRlUmVtYWluaW5nVGltZSIsInN0YXJ0IiwicGVyZm9ybWFuY2UiLCJub3ciLCJvbkF0dGVtcHRGYWlsdXJlIiwiZXJyb3IiLCJhdHRlbXB0TnVtYmVyIiwic3RhcnRUaW1lIiwibm9ybWFsaXplZEVycm9yIiwicmV0cmllc0xlZnQiLCJtYXhSZXRyeVRpbWUiLCJQT1NJVElWRV9JTkZJTklUWSIsImNvbnRleHQiLCJPYmplY3QiLCJmcmVlemUiLCJvbkZhaWxlZEF0dGVtcHQiLCJjb25zdW1lUmV0cnkiLCJzaG91bGRDb25zdW1lUmV0cnkiLCJyZW1haW5pbmdUaW1lIiwic2lnbmFsIiwidGhyb3dJZkFib3J0ZWQiLCJzaG91bGRSZXRyeSIsImRlbGF5VGltZSIsImZpbmFsRGVsYXkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9uQWJvcnQiLCJjbGVhclRpbWVvdXQiLCJ0aW1lb3V0VG9rZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVhc29uIiwic2V0VGltZW91dCIsInVucmVmIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uY2UiLCJwUmV0cnkiLCJpbnB1dCIsImhhc093biIsInJlc3VsdCIsIm1ha2VSZXRyaWFibGUiLCJmdW5jdGlvbl8iLCJhcmd1bWVudHNfIiwiYXBwbHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/p-retry/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/project.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/project.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDefaultProjectName: () => (/* binding */ getDefaultProjectName)\n/* harmony export */ });\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/env.js\");\n\nconst getDefaultProjectName = ()=>{\n    return (0,_env_js__WEBPACK_IMPORTED_MODULE_0__.getLangSmithEnvironmentVariable)(\"PROJECT\") ?? (0,_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"LANGCHAIN_SESSION\") ?? // TODO: Deprecate\n    \"default\";\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9wcm9qZWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW9GO0FBQzdFLE1BQU1FLHdCQUF3QjtJQUNqQyxPQUFRRCx3RUFBK0JBLENBQUMsY0FDcENELCtEQUFzQkEsQ0FBQyx3QkFBd0Isa0JBQWtCO0lBQ2pFO0FBQ1IsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9wcm9qZWN0LmpzP2IyMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSwgZ2V0TGFuZ1NtaXRoRW52aXJvbm1lbnRWYXJpYWJsZSwgfSBmcm9tIFwiLi9lbnYuanNcIjtcbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0UHJvamVjdE5hbWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChnZXRMYW5nU21pdGhFbnZpcm9ubWVudFZhcmlhYmxlKFwiUFJPSkVDVFwiKSA/P1xuICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1NFU1NJT05cIikgPz8gLy8gVE9ETzogRGVwcmVjYXRlXG4gICAgICAgIFwiZGVmYXVsdFwiKTtcbn07XG4iXSwibmFtZXMiOlsiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsImdldExhbmdTbWl0aEVudmlyb25tZW50VmFyaWFibGUiLCJnZXREZWZhdWx0UHJvamVjdE5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/project.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/prompts.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/prompts.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isVersionGreaterOrEqual: () => (/* binding */ isVersionGreaterOrEqual),\n/* harmony export */   parsePromptIdentifier: () => (/* binding */ parsePromptIdentifier)\n/* harmony export */ });\n/* harmony import */ var semver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! semver */ \"(rsc)/./node_modules/semver/index.js\");\n\nfunction isVersionGreaterOrEqual(current_version, target_version) {\n    const current = (0,semver__WEBPACK_IMPORTED_MODULE_0__.parse)(current_version);\n    const target = (0,semver__WEBPACK_IMPORTED_MODULE_0__.parse)(target_version);\n    if (!current || !target) {\n        throw new Error(\"Invalid version format.\");\n    }\n    return current.compare(target) >= 0;\n}\nfunction parsePromptIdentifier(identifier) {\n    if (!identifier || identifier.split(\"/\").length > 2 || identifier.startsWith(\"/\") || identifier.endsWith(\"/\") || identifier.split(\":\").length > 2) {\n        throw new Error(`Invalid identifier format: ${identifier}`);\n    }\n    const [ownerNamePart, commitPart] = identifier.split(\":\");\n    const commit = commitPart || \"latest\";\n    if (ownerNamePart.includes(\"/\")) {\n        const [owner, name] = ownerNamePart.split(\"/\", 2);\n        if (!owner || !name) {\n            throw new Error(`Invalid identifier format: ${identifier}`);\n        }\n        return [\n            owner,\n            name,\n            commit\n        ];\n    } else {\n        if (!ownerNamePart) {\n            throw new Error(`Invalid identifier format: ${identifier}`);\n        }\n        return [\n            \"-\",\n            ownerNamePart,\n            commit\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy9wcm9tcHRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQztBQUN4QyxTQUFTRSx3QkFBd0JDLGVBQWUsRUFBRUMsY0FBYztJQUNuRSxNQUFNQyxVQUFVSiw2Q0FBWUEsQ0FBQ0U7SUFDN0IsTUFBTUcsU0FBU0wsNkNBQVlBLENBQUNHO0lBQzVCLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxRQUFRO1FBQ3JCLE1BQU0sSUFBSUMsTUFBTTtJQUNwQjtJQUNBLE9BQU9GLFFBQVFHLE9BQU8sQ0FBQ0YsV0FBVztBQUN0QztBQUNPLFNBQVNHLHNCQUFzQkMsVUFBVTtJQUM1QyxJQUFJLENBQUNBLGNBQ0RBLFdBQVdDLEtBQUssQ0FBQyxLQUFLQyxNQUFNLEdBQUcsS0FDL0JGLFdBQVdHLFVBQVUsQ0FBQyxRQUN0QkgsV0FBV0ksUUFBUSxDQUFDLFFBQ3BCSixXQUFXQyxLQUFLLENBQUMsS0FBS0MsTUFBTSxHQUFHLEdBQUc7UUFDbEMsTUFBTSxJQUFJTCxNQUFNLENBQUMsMkJBQTJCLEVBQUVHLFdBQVcsQ0FBQztJQUM5RDtJQUNBLE1BQU0sQ0FBQ0ssZUFBZUMsV0FBVyxHQUFHTixXQUFXQyxLQUFLLENBQUM7SUFDckQsTUFBTU0sU0FBU0QsY0FBYztJQUM3QixJQUFJRCxjQUFjRyxRQUFRLENBQUMsTUFBTTtRQUM3QixNQUFNLENBQUNDLE9BQU9DLEtBQUssR0FBR0wsY0FBY0osS0FBSyxDQUFDLEtBQUs7UUFDL0MsSUFBSSxDQUFDUSxTQUFTLENBQUNDLE1BQU07WUFDakIsTUFBTSxJQUFJYixNQUFNLENBQUMsMkJBQTJCLEVBQUVHLFdBQVcsQ0FBQztRQUM5RDtRQUNBLE9BQU87WUFBQ1M7WUFBT0M7WUFBTUg7U0FBTztJQUNoQyxPQUNLO1FBQ0QsSUFBSSxDQUFDRixlQUFlO1lBQ2hCLE1BQU0sSUFBSVIsTUFBTSxDQUFDLDJCQUEyQixFQUFFRyxXQUFXLENBQUM7UUFDOUQ7UUFDQSxPQUFPO1lBQUM7WUFBS0s7WUFBZUU7U0FBTztJQUN2QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9kaXN0L3V0aWxzL3Byb21wdHMuanM/NTU1NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZSBhcyBwYXJzZVZlcnNpb24gfSBmcm9tIFwic2VtdmVyXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNWZXJzaW9uR3JlYXRlck9yRXF1YWwoY3VycmVudF92ZXJzaW9uLCB0YXJnZXRfdmVyc2lvbikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBwYXJzZVZlcnNpb24oY3VycmVudF92ZXJzaW9uKTtcbiAgICBjb25zdCB0YXJnZXQgPSBwYXJzZVZlcnNpb24odGFyZ2V0X3ZlcnNpb24pO1xuICAgIGlmICghY3VycmVudCB8fCAhdGFyZ2V0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmVyc2lvbiBmb3JtYXQuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudC5jb21wYXJlKHRhcmdldCkgPj0gMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVByb21wdElkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICAgIGlmICghaWRlbnRpZmllciB8fFxuICAgICAgICBpZGVudGlmaWVyLnNwbGl0KFwiL1wiKS5sZW5ndGggPiAyIHx8XG4gICAgICAgIGlkZW50aWZpZXIuc3RhcnRzV2l0aChcIi9cIikgfHxcbiAgICAgICAgaWRlbnRpZmllci5lbmRzV2l0aChcIi9cIikgfHxcbiAgICAgICAgaWRlbnRpZmllci5zcGxpdChcIjpcIikubGVuZ3RoID4gMikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaWRlbnRpZmllciBmb3JtYXQ6ICR7aWRlbnRpZmllcn1gKTtcbiAgICB9XG4gICAgY29uc3QgW293bmVyTmFtZVBhcnQsIGNvbW1pdFBhcnRdID0gaWRlbnRpZmllci5zcGxpdChcIjpcIik7XG4gICAgY29uc3QgY29tbWl0ID0gY29tbWl0UGFydCB8fCBcImxhdGVzdFwiO1xuICAgIGlmIChvd25lck5hbWVQYXJ0LmluY2x1ZGVzKFwiL1wiKSkge1xuICAgICAgICBjb25zdCBbb3duZXIsIG5hbWVdID0gb3duZXJOYW1lUGFydC5zcGxpdChcIi9cIiwgMik7XG4gICAgICAgIGlmICghb3duZXIgfHwgIW5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpZGVudGlmaWVyIGZvcm1hdDogJHtpZGVudGlmaWVyfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbb3duZXIsIG5hbWUsIGNvbW1pdF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIW93bmVyTmFtZVBhcnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpZGVudGlmaWVyIGZvcm1hdDogJHtpZGVudGlmaWVyfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXCItXCIsIG93bmVyTmFtZVBhcnQsIGNvbW1pdF07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInBhcnNlIiwicGFyc2VWZXJzaW9uIiwiaXNWZXJzaW9uR3JlYXRlck9yRXF1YWwiLCJjdXJyZW50X3ZlcnNpb24iLCJ0YXJnZXRfdmVyc2lvbiIsImN1cnJlbnQiLCJ0YXJnZXQiLCJFcnJvciIsImNvbXBhcmUiLCJwYXJzZVByb21wdElkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwic3BsaXQiLCJsZW5ndGgiLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJvd25lck5hbWVQYXJ0IiwiY29tbWl0UGFydCIsImNvbW1pdCIsImluY2x1ZGVzIiwib3duZXIiLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/prompts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/warn.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/utils/warn.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   warnOnce: () => (/* binding */ warnOnce)\n/* harmony export */ });\nconst warnedMessages = {};\nfunction warnOnce(message) {\n    if (!warnedMessages[message]) {\n        console.warn(message);\n        warnedMessages[message] = true;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy93YXJuLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSxpQkFBaUIsQ0FBQztBQUNqQixTQUFTQyxTQUFTQyxPQUFPO0lBQzVCLElBQUksQ0FBQ0YsY0FBYyxDQUFDRSxRQUFRLEVBQUU7UUFDMUJDLFFBQVFDLElBQUksQ0FBQ0Y7UUFDYkYsY0FBYyxDQUFDRSxRQUFRLEdBQUc7SUFDOUI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dGlscy93YXJuLmpzPzg2MGEiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgd2FybmVkTWVzc2FnZXMgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiB3YXJuT25jZShtZXNzYWdlKSB7XG4gICAgaWYgKCF3YXJuZWRNZXNzYWdlc1ttZXNzYWdlXSkge1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgICAgIHdhcm5lZE1lc3NhZ2VzW21lc3NhZ2VdID0gdHJ1ZTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsid2FybmVkTWVzc2FnZXMiLCJ3YXJuT25jZSIsIm1lc3NhZ2UiLCJjb25zb2xlIiwid2FybiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/warn.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/uuid.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/dist/uuid.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uuid7: () => (/* binding */ uuid7),\n/* harmony export */   uuid7FromTime: () => (/* reexport safe */ _utils_uuid_js__WEBPACK_IMPORTED_MODULE_0__.uuid7FromTime)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v7.js\");\n/* harmony import */ var _utils_uuid_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/_uuid.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/utils/_uuid.js\");\n\n\n/**\n * Generate a random UUID v7 string.\n */ function uuid7() {\n    return (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvZGlzdC91dWlkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBb0M7QUFDYTtBQUNqRDs7Q0FFQyxHQUNNLFNBQVNHO0lBQ1osT0FBT0YsZ0RBQU1BO0FBQ2pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9kaXN0L3V1aWQuanM/MTJmMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2NyBhcyB1dWlkdjcgfSBmcm9tIFwidXVpZFwiO1xuZXhwb3J0IHsgdXVpZDdGcm9tVGltZSB9IGZyb20gXCIuL3V0aWxzL191dWlkLmpzXCI7XG4vKipcbiAqIEdlbmVyYXRlIGEgcmFuZG9tIFVVSUQgdjcgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXVpZDcoKSB7XG4gICAgcmV0dXJuIHV1aWR2NygpO1xufVxuIl0sIm5hbWVzIjpbInY3IiwidXVpZHY3IiwidXVpZDdGcm9tVGltZSIsInV1aWQ3Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/uuid.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Client: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.Client),\n/* harmony export */   RunTree: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.RunTree),\n/* harmony export */   __version__: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.__version__),\n/* harmony export */   getDefaultProjectName: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.getDefaultProjectName),\n/* harmony export */   overrideFetchImplementation: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.overrideFetchImplementation),\n/* harmony export */   uuid7: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.uuid7),\n/* harmony export */   uuid7FromTime: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.uuid7FromTime)\n/* harmony export */ });\n/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9ub2RlX21vZHVsZXMvbGFuZ3NtaXRoL2luZGV4LmpzP2E5M2QiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/run_trees.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/run_trees.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunTree: () => (/* reexport safe */ _dist_run_trees_js__WEBPACK_IMPORTED_MODULE_0__.RunTree),\n/* harmony export */   convertToDottedOrderFormat: () => (/* reexport safe */ _dist_run_trees_js__WEBPACK_IMPORTED_MODULE_0__.convertToDottedOrderFormat),\n/* harmony export */   isRunTree: () => (/* reexport safe */ _dist_run_trees_js__WEBPACK_IMPORTED_MODULE_0__.isRunTree),\n/* harmony export */   isRunnableConfigLike: () => (/* reexport safe */ _dist_run_trees_js__WEBPACK_IMPORTED_MODULE_0__.isRunnableConfigLike)\n/* harmony export */ });\n/* harmony import */ var _dist_run_trees_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/run_trees.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/run_trees.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvcnVuX3RyZWVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9ydW5fdHJlZXMuanM/NDhhYyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvcnVuX3RyZWVzLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/run_trees.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/langsmith/singletons/traceable.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/langsmith/singletons/traceable.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* reexport safe */ _dist_singletons_traceable_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton),\n/* harmony export */   ROOT: () => (/* reexport safe */ _dist_singletons_traceable_js__WEBPACK_IMPORTED_MODULE_0__.ROOT),\n/* harmony export */   getCurrentRunTree: () => (/* reexport safe */ _dist_singletons_traceable_js__WEBPACK_IMPORTED_MODULE_0__.getCurrentRunTree),\n/* harmony export */   isTraceableFunction: () => (/* reexport safe */ _dist_singletons_traceable_js__WEBPACK_IMPORTED_MODULE_0__.isTraceableFunction),\n/* harmony export */   withRunTree: () => (/* reexport safe */ _dist_singletons_traceable_js__WEBPACK_IMPORTED_MODULE_0__.withRunTree)\n/* harmony export */ });\n/* harmony import */ var _dist_singletons_traceable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/singletons/traceable.js */ \"(rsc)/./node_modules/@langchain/core/node_modules/langsmith/dist/singletons/traceable.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9sYW5nc21pdGgvc2luZ2xldG9ucy90cmFjZWFibGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2xhbmdzbWl0aC9zaW5nbGV0b25zL3RyYWNlYWJsZS5qcz8xNTZkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3Qvc2luZ2xldG9ucy90cmFjZWFibGUuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/langsmith/singletons/traceable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/output_parsers.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/core/output_parsers.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.AsymmetricStructuredOutputParser),\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseLLMOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser),\n/* harmony export */   BytesOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BytesOutputParser),\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.CustomListOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.JsonMarkdownStructuredOutputParser),\n/* harmony export */   JsonOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.JsonOutputParser),\n/* harmony export */   ListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.NumberedListOutputParser),\n/* harmony export */   OutputParserException: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException),\n/* harmony export */   StringOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.StringOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.StructuredOutputParser),\n/* harmony export */   XMLOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   parseJsonMarkdown: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson),\n/* harmony export */   parseXMLMarkdown: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/output_parsers/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dF9wYXJzZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9vdXRwdXRfcGFyc2Vycy5qcz8xOTM2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9vdXRwdXRfcGFyc2Vycy9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/output_parsers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/outputs.js":
/*!*************************************************!*\
  !*** ./node_modules/@langchain/core/outputs.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.RUN_KEY)\n/* harmony export */ });\n/* harmony import */ var _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dHMuanM/YWY0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3Qvb3V0cHV0cy5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/prompts.js":
/*!*************************************************!*\
  !*** ./node_modules/@langchain/core/prompts.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessagePromptTemplate),\n/* harmony export */   BaseChatPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseChatPromptTemplate),\n/* harmony export */   BaseMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessagePromptTemplate),\n/* harmony export */   BaseMessageStringPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageStringPromptTemplate),\n/* harmony export */   BasePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.BasePromptTemplate),\n/* harmony export */   BaseStringPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseStringPromptTemplate),\n/* harmony export */   ChatMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessagePromptTemplate),\n/* harmony export */   ChatPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatPromptTemplate),\n/* harmony export */   DEFAULT_FORMATTER_MAPPING: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_FORMATTER_MAPPING),\n/* harmony export */   DEFAULT_PARSER_MAPPING: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_PARSER_MAPPING),\n/* harmony export */   DictPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.DictPromptTemplate),\n/* harmony export */   FewShotChatMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.FewShotChatMessagePromptTemplate),\n/* harmony export */   FewShotPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.FewShotPromptTemplate),\n/* harmony export */   HumanMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessagePromptTemplate),\n/* harmony export */   ImagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.ImagePromptTemplate),\n/* harmony export */   MessagesPlaceholder: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.MessagesPlaceholder),\n/* harmony export */   PipelinePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.PipelinePromptTemplate),\n/* harmony export */   PromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.PromptTemplate),\n/* harmony export */   StructuredPrompt: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.StructuredPrompt),\n/* harmony export */   SystemMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessagePromptTemplate),\n/* harmony export */   checkValidTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.checkValidTemplate),\n/* harmony export */   interpolateFString: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.interpolateFString),\n/* harmony export */   interpolateMustache: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.interpolateMustache),\n/* harmony export */   parseFString: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.parseFString),\n/* harmony export */   parseMustache: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.parseMustache),\n/* harmony export */   parseTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.parseTemplate),\n/* harmony export */   renderTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)\n/* harmony export */ });\n/* harmony import */ var _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/prompts/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3Byb21wdHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1QyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3Byb21wdHMuanM/Nzk0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvcHJvbXB0cy9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/prompts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/retrievers.js":
/*!****************************************************!*\
  !*** ./node_modules/@langchain/core/retrievers.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseRetriever: () => (/* reexport safe */ _dist_retrievers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseRetriever)\n/* harmony export */ });\n/* harmony import */ var _dist_retrievers_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/retrievers/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/retrievers/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3JldHJpZXZlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90Zm4tYWktdmVyY2VsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9yZXRyaWV2ZXJzLmpzPzQ3MzIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L3JldHJpZXZlcnMvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/retrievers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/runnables.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/runnables.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RouterRunnable),\n/* harmony export */   Runnable: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.Runnable),\n/* harmony export */   RunnableAssign: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBinding),\n/* harmony export */   RunnableBranch: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBranch),\n/* harmony export */   RunnableEach: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableParallel),\n/* harmony export */   RunnablePassthrough: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnablePassthrough),\n/* harmony export */   RunnablePick: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence),\n/* harmony export */   RunnableToolLike: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableToolLike),\n/* harmony export */   RunnableWithFallbacks: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableWithFallbacks),\n/* harmony export */   RunnableWithMessageHistory: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableWithMessageHistory),\n/* harmony export */   _coerceToRunnable: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable),\n/* harmony export */   ensureConfig: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.mergeConfigs),\n/* harmony export */   patchConfig: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.patchConfig),\n/* harmony export */   pickRunnableConfigKeys: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.pickRunnableConfigKeys)\n/* harmony export */ });\n/* harmony import */ var _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/runnables/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlcy5qcz83YWIxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9ydW5uYWJsZXMvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/runnables.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/env.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/utils/env.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getRuntimeEnvironment),\n/* harmony export */   getRuntimeEnvironmentSync: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getRuntimeEnvironmentSync),\n/* harmony export */   isBrowser: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isBrowser),\n/* harmony export */   isDeno: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isDeno),\n/* harmony export */   isJsDom: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isJsDom),\n/* harmony export */   isNode: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isNode),\n/* harmony export */   isWebWorker: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isWebWorker)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvZW52LmpzPzQ2NzEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC91dGlscy9lbnYuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/function_calling.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/utils/function_calling.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToOpenAIFunction: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.convertToOpenAIFunction),\n/* harmony export */   convertToOpenAITool: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.convertToOpenAITool),\n/* harmony export */   isLangChainTool: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.isLangChainTool),\n/* harmony export */   isRunnableToolLike: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.isRunnableToolLike),\n/* harmony export */   isStructuredTool: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.isStructuredTool),\n/* harmony export */   isStructuredToolParams: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.isStructuredToolParams)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/function_calling.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/function_calling.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Z1bmN0aW9uX2NhbGxpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Rmbi1haS12ZXJjZWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Z1bmN0aW9uX2NhbGxpbmcuanM/OGM4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L3V0aWxzL2Z1bmN0aW9uX2NhbGxpbmcuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/function_calling.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/json_schema.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/utils/json_schema.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Validator: () => (/* reexport safe */ _dist_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_0__.Validator),\n/* harmony export */   deepCompareStrict: () => (/* reexport safe */ _dist_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_0__.deepCompareStrict),\n/* harmony export */   toJsonSchema: () => (/* reexport safe */ _dist_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_0__.toJsonSchema),\n/* harmony export */   validatesOnlyStrings: () => (/* reexport safe */ _dist_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_0__.validatesOnlyStrings)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/json_schema.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2pzb25fc2NoZW1hLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvanNvbl9zY2hlbWEuanM/MTY5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L3V0aWxzL2pzb25fc2NoZW1hLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/json_schema.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/types.js":
/*!*****************************************************!*\
  !*** ./node_modules/@langchain/core/utils/types.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extendInteropZodObject: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.extendInteropZodObject),\n/* harmony export */   getInteropZodDefaultGetter: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.getInteropZodDefaultGetter),\n/* harmony export */   getInteropZodObjectShape: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.getInteropZodObjectShape),\n/* harmony export */   getSchemaDescription: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.getSchemaDescription),\n/* harmony export */   interopParse: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.interopParse),\n/* harmony export */   interopParseAsync: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.interopParseAsync),\n/* harmony export */   interopSafeParse: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.interopSafeParse),\n/* harmony export */   interopSafeParseAsync: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.interopSafeParseAsync),\n/* harmony export */   interopZodObjectPartial: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.interopZodObjectPartial),\n/* harmony export */   interopZodObjectPassthrough: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.interopZodObjectPassthrough),\n/* harmony export */   interopZodObjectStrict: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.interopZodObjectStrict),\n/* harmony export */   interopZodTransformInputSchema: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.interopZodTransformInputSchema),\n/* harmony export */   isInteropZodObject: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.isInteropZodObject),\n/* harmony export */   isInteropZodSchema: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.isInteropZodSchema),\n/* harmony export */   isShapelessZodSchema: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.isShapelessZodSchema),\n/* harmony export */   isSimpleStringZodSchema: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.isSimpleStringZodSchema),\n/* harmony export */   isZodArrayV4: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.isZodArrayV4),\n/* harmony export */   isZodObjectV3: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.isZodObjectV3),\n/* harmony export */   isZodObjectV4: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.isZodObjectV4),\n/* harmony export */   isZodSchema: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.isZodSchema),\n/* harmony export */   isZodSchemaV3: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.isZodSchemaV3),\n/* harmony export */   isZodSchemaV4: () => (/* reexport safe */ _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__.isZodSchemaV4)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_types_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/types/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/types/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL3R5cGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGZuLWFpLXZlcmNlbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvdHlwZXMuanM/MmVhMyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L3V0aWxzL3R5cGVzL2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/types.js\n");

/***/ })

};
;