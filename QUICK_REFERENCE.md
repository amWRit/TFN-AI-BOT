# ‚ö° TFN-AI Quick Reference

## Setup (5 minutes)

```bash
# 1. Install Python deps
pip install pypdf langchain-text-splitters langchain-community

# 2. Preprocess PDFs
python preprocess_docs.py

# 3. Configure AWS
cp .env.local.example .env.local
# Edit .env.local with your AWS credentials

# 4. Install Node deps
npm install

# 5. Run dev server
npm run dev
```

Visit: `http://localhost:3000`

---

## File Changes at a Glance

| File | Status | Change |
|------|--------|--------|
| `preprocess_docs.py` | ‚úÖ Updated | Real PDF processing |
| `app/api/rag-alumni/route.js` | ‚úÖ Updated | Real Bedrock RAG |
| `package.json` | ‚úÖ Updated | Added `@langchain/aws` |
| `.env.local.example` | ‚úÖ Created | AWS config template |
| `README_RAG.md` | ‚úÖ Created | Full documentation |
| `SETUP_GUIDE.md` | ‚úÖ Created | Step-by-step guide |
| `CHANGES_SUMMARY.md` | ‚úÖ Created | This file |

---

## Mock vs Real

### Mock Mode (Testing, No AWS)
```javascript
// In app/api/rag-alumni/route.js
// Uncomment the "MOCK RESPONSE" section
// Fast, works offline
```

### Real Mode (Production)
```javascript
// In app/api/rag-alumni/route.js
// Uncomment the "REAL BEDROCK RAG" section
// Requires AWS credentials
```

---

## Environment Variables

```env
AWS_REGION=us-east-1                           # AWS region
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE        # AWS Access Key
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG   # AWS Secret
AWS_SESSION_TOKEN=AQoDYXdzEJr...               # Optional temp creds
BEDROCK_MODEL_ID=amazon.nova-lite-v1:0        # LLM model
LLM_TEMPERATURE=0.1                            # Creativity (0-1)
```

---

## API Endpoint

**POST** `/api/rag-alumni`

**Request:**
```json
{"query": "What are TFN programs?"}
```

**Response:**
```json
{
  "answer": "TFN programs include...",
  "sources": [
    {"source": "handbook.pdf", "page": 5}
  ],
  "totalDocs": 156,
  "status": "success"
}
```

---

## Commands

```bash
# Preprocess PDFs
python preprocess_docs.py

# Install dependencies
npm install

# Run dev server (http://localhost:3000)
npm run dev

# Build for production
npm run build

# Start production server
npm start

# Lint code
npm run lint
```

---

## Project Structure

```
project/
‚îú‚îÄ‚îÄ preprocess_docs.py          ‚Üê Run this first
‚îú‚îÄ‚îÄ .env.local                  ‚Üê Create with AWS creds
‚îú‚îÄ‚îÄ package.json                ‚Üê npm install
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ page.js                 ‚Üê Chat UI
‚îÇ   ‚îî‚îÄ‚îÄ api/rag-alumni/route.js ‚Üê Bedrock API
‚îî‚îÄ‚îÄ public/
    ‚îî‚îÄ‚îÄ tfn-documents.json      ‚Üê Generated by preprocess
```

---

## Troubleshooting

| Problem | Solution |
|---------|----------|
| "No documents available" | Run `python preprocess_docs.py` |
| "AWS credentials not configured" | Create `.env.local` with AWS keys |
| "Bedrock RAG query failed" | Check AWS credentials validity |
| "No PDF files found" | Place PDFs in project root |
| "ModuleNotFoundError" | Run `pip install pypdf langchain-...` |

---

## Costs

- **Embeddings** (Titan v2): ~$0.02 per 100k tokens
- **LLM** (Nova Lite): ~$0.30 per 1M tokens
- **LLM** (Nova Pro): ~$0.80 per 1M tokens

*Monitor AWS console for actual usage*

---

## Available Models

**Embedding:**
- `amazon.titan-embed-text-v2:0`

**LLM:**
- `amazon.nova-lite-v1:0` (Fast, cheap)
- `amazon.nova-pro-v1:0` (Better)
- `amazon.claude-3-5-sonnet-20241022` (Advanced)

---

## Key Features Implemented

‚úÖ PDF document preprocessing  
‚úÖ Bedrock Embeddings (Titan v2)  
‚úÖ Vector similarity search  
‚úÖ Bedrock LLM integration (Nova Lite)  
‚úÖ Source citations  
‚úÖ Error handling  
‚úÖ Mock mode fallback  
‚úÖ Production-ready code  

---

## Documentation Links

- üìñ Full Guide: `README_RAG.md`
- üë£ Step-by-Step: `SETUP_GUIDE.md`
- üìã Summary: `CHANGES_SUMMARY.md`
- ‚ö° This Card: `QUICK_REFERENCE.md`

---

## Production Checklist

- [ ] PDFs added and preprocessed
- [ ] AWS credentials configured
- [ ] `.env.local` created (NOT in git)
- [ ] All npm dependencies installed
- [ ] Tested locally at http://localhost:3000
- [ ] API responses verified with sources
- [ ] Ready for deployment

---

**That's it! Happy RAG'ing! üöÄ**
